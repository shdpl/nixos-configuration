chrome.extension.onMessage.addListener(function(n,t,i){var r=COMMON.getZoomData(),e,o,f,u;r&&(r.assistants&&(e=r.assistants),r.forcelogin&&(o=r.forcelogin),r.trackfields&&(f=r.trackfields),r.recording&&(u=r.recording));n.type=="getZoomToken"&&i({token:COMMON.getZoomRequestToken()||COMMON.getZoomZakRequestToken(),fte:COMMON.getValue("zoom_config_fte"),showSetting:!!COMMON.getValue("zoom_config_fixed_popup"),inputManualPwd:"2"==COMMON.getValue("zoom_config_pwdtype")&&!!COMMON.getValue("zoom_config_has_password"),showDomainInput:o&&o.domain_login,hasAssistants:e&&e.length>0,requireTracking:f&&f.length>0,hasCloudRecord:u&&u.option_cloud_recording,hasLocalRecord:u&&u.option_local_recording,trackfields:f})});chrome.extension.onMessage.addListener(function(n,t,i){var f=!1,r,u=COMMON.getZoomData();u&&u.audiopac&&(r=u.audiopac);r&&r.option_pac_enable&&(f=!0);n.type=="supportPAC"&&i({hasPac:f})});chrome.runtime.onConnect.addListener(function(n){function t(t){n.postMessage({error:!0,errorMsg:t})}function r(n){COMMON.editMeeting(n,function(){},function(){})}function i(i){COMMON.scheduleMeeting(i,function(t){COMMON.saveValue("zoom_config_fte",!1);n.postMessage({type:"schedule",meeting:t.result})},function(){t("Schedule meeting failed. Please try again.")})}console.assert(n.name=="Zoom");n.onMessage.addListener(function(u){var f;u.type=="schedule"?(f=COMMON.hasZoomRqToken(),f?i(u.info):t("Your Zoom Chrome Extension session has expired. Please login again.")):u.type=="schedulepac"?(f=COMMON.hasZoomRqToken(),f&&COMMON.schedulePACMeeting(u.info,function(t){n.postMessage({type:"schedule",meeting:t.result})},function(){t("Schedule meeting failed. Please try again.")})):u.type=="update"?(f=COMMON.hasZoomRqToken(),f&&r(u.info)):u.type=="delete"?(f=COMMON.hasZoomRqToken(),f&&COMMON.deleteMeeting(u.info,function(){},function(){})):u.type=="passOAuthToken"?COMMON.login(u.info,"",function(){COMMON.saveGoogleToken(u.info);COMMON.saveValue("zoom_auth_type",3);chrome.tabs.query({},function(n){n.length>1?chrome.tabs.remove(parseInt(COMMON.getValue("zoom_oauth_tabid"))):chrome.tabs.update(parseInt(COMMON.getValue("zoom_oauth_tabid")),{url:"about:blank"})})},function(){chrome.tabs.query({},function(n){n.length>1?chrome.tabs.remove(parseInt(COMMON.getValue("zoom_oauth_tabid"))):chrome.tabs.update(parseInt(COMMON.getValue("zoom_oauth_tabid")),{url:"about:blank"})})}):u.type=="passSsoSession"?COMMON.login("","",function(){chrome.tabs.query({},function(n){n.length>1?chrome.tabs.remove(parseInt(COMMON.getValue("zoom_oauth_tabid"))):chrome.tabs.update(parseInt(COMMON.getValue("zoom_oauth_tabid")),{url:"about:blank"})});COMMON.saveValue("zoom_auth_type",2)},function(){chrome.tabs.query({},function(n){n.length>1?chrome.tabs.remove(parseInt(COMMON.getValue("zoom_oauth_tabid"))):chrome.tabs.update(parseInt(COMMON.getValue("zoom_oauth_tabid")),{url:"about:blank"})})}):u.type=="loadZoomOptions"?n.postMessage({type:"updateZmOptions",zmOpt:COMMON.getZoomSetting()}):u.type=="saveOptionsAndSchedule"?COMMON.hasZoomRqToken()?COMMON.updateZoomSetting(u.info,function(){i(u.info)}):t("Your Zoom Chrome Extension session has expired. Please login again."):u.type=="sync"?COMMON.toSync(function(){},function(){}):u.type=="checkpoint"&&COMMON.checkPoint(function(){})})})