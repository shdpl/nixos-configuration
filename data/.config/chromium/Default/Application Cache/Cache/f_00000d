define("Viva.Controls/Controls/Base/Viva.ExtensibleControl",["require","exports","f","o","./Viva.Base"],(function(n,t,i,r,u){"use strict";var f;return (function(n){var e=(function(){function n(){}return n.prototype.setInstance=function(n){this._widget=n},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},n})(),t,f;n.Extension=e;t=(function(n){function t(t){t===void 0&&(t={});n.call(this);this.extensions=t.extensions||[]}return __extends(t,n),t})(u.ViewModel);n.ViewModel=t;f=(function(n){function u(i,r,u){n.call(this,i,r,$.extend({viewModelType:t},u));this._initializePlugins(this.options);this._addExtensionClasses()}return __extends(u,n),u.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._removeExtensionClasses())},r.defineProperty(u.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.prototype.getPlugin=function(n){if(this.options.extensions)
return i.find(this.options.extensions,(function(t){return t.getName()===n}))},u.prototype._initializePlugins=function(n){var i=this,t=[];this._loadPlugins(n.extensions,t);n.extensions=t;n.extensions.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}));n.extensions.forEach((function(n){n.setInstance(i)}))},u.prototype._extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this.options.extensions.forEach((function(t){var u=t[n];u&&i.push(u.apply(t,r))})),i},u.prototype._loadPlugins=function(n,t){var i=this;n.forEach((function(r){var u=r.getDependencies()||[],f=u.filter((function(i){return!n.some((function(n){return n.getName()===i.getName()}))&&!t.some((function(n){return n.getName()===i.getName()}))}));t.some((function(n){return n.getName()===r.getName()}))||t.push(r);f.length&&i._loadPlugins(u,t)}))},u.prototype._addExtensionClasses=function(){var n=this;
this.options.extensions.forEach((function(t){n.element.addClass(t.getName())}))},u.prototype._removeExtensionClasses=function(){var n=this;this.options.extensions.forEach((function(t){n.element.removeClass(t.getName())}))},u})(u.Widget);n.Widget=f})(f||(f={})),f}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers",["require","exports","u"],(function(n,t,i){"use strict";var r;return (function(n){function c(n,i,r){var u=n.charCodeAt(0);return t[n]||(t[n]="&#"+(i?0:r?(u-o)*1024+n.charCodeAt(1)-s+h:u)+";")}function r(n){return n===null}function u(n){return n===i}function l(n){return r(n)||u(n)}function f(n){return n!==i&&n!==null?String(n).replace(e,c):""}function a(n){return f(n)}function v(n,t,i){return n.apply(this,[t].concat(i))}var e=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"},o=55296,s=56320,h=65536;n.isNull=r;n.isUndefined=u;n.isNullOrUndefined=l;n.htmlEncode=
f;n.attributeEncode=a;n.callFormatter=v})(r||(r={})),r}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid table tbody td img.azc-grid-formatters-icon{margin-right:6px;display:flex}.azc-grid .azc-grid-formatters-sprite{position:relative;overflow:hidden;display:inline-block;margin-right:6px;vertical-align:middle}.azc-grid .azc-grid-formatters-sprite img{position:absolute}")}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxc-percent-formatter{white-space:nowrap;min-height:5px;min-width:5px}.fxc-percent-formatter .fxc-percent-formatter-container{overflow:hidden;width:100%;position:relative;padding:0}.fxc-percent-formatter .fxc-percent-formatter-value{background-color:#00bcf2;height:19px;position:absolute;left:0;display:inline}.fxc-percent-formatter .fxc-percent-formatter-background{width:100%;height:19px;background-color:transparent}.fxc-percent-formatter .fxc-percent-formatter-bottom-bar{height:5px;margin-top:28px}.fxc-percent-formatter .fxc-percent-formatter-top-bar{height:5px;margin-bottom:28px}.fxc-percent-formatter .fxc-percent-formatter-text{position:absolute;left:1px;top:1px;display:inline;margin-top:7px}.fxc-percent-formatter .fxc-percent-formatter-notext{display:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters",["require","exports","a","../../../Util/Viva.DateUtil","./Viva.Grid1.Formatters.Helpers","MsPortalFx/Globalization","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Formatters.css","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.PercentFormatter.css"],(function(n,t,i,r,u,f){"use strict";var e;return (function(t){function g(n){var t,i;return typeof n=="string"?(p.assert(!1,"String formatters are being deprecated. Please use Intl.DateTimeFormatOptions instead. Your current format string: {0}".format(n)),i=function(n,t){return r.toString(n,t)}):i=function(n,t){var i="";try{i=f.DateTimeFormat.create(t).format(n)}catch(r){p.error("IntlPolyfill loaded: "+!!window.IntlPolyfill+"; given format: "+t+"; Date: "+n.toString());i=n.toString()}return i},t=function(t){var f=e(t),r=b(f),o=h.call(arguments,1);return r?u.callFormatter(s,i(r,n),o):""},l(t,b,t)}function nt(n){var i=h.call(arguments,1),
r=i[0],t=e(n),c=!y(r)&&!y(r.cssClass)?r.cssClass:"azc-text-primary",f=" class='"+c+"'";return t&&!u.isUndefined(t.text)&&!u.isUndefined(t.uri)?"<a"+f+" href='"+u.attributeEncode(u.callFormatter(o,t.uri,i))+"'"+(t.target?" target='"+u.attributeEncode(u.callFormatter(o,t.target,i))+"'":"")+">"+u.callFormatter(s,t.text,i)+"<\/a>":"<a"+f+" href='"+u.attributeEncode(u.callFormatter(o,t,i))+"'>"+u.callFormatter(s,t,i)+"<\/a>"}function c(n){var i=h.call(arguments,1),t=e(n),r=t&&!u.isUndefined(t.text)&&!u.isUndefined(t.uri)?"<img class='"+w+"' src='"+u.attributeEncode(u.callFormatter(o,t.uri,i))+"' alt='' /><span class='fx-grid-formatters-icon-text'>"+u.callFormatter(s,t.text,i)+"<\/span>":"<img class='"+w+"' src='"+u.attributeEncode(u.callFormatter(o,t,i))+"' alt='' />";return"<span class='fx-grid-formatters-icon'>"+r+"<\/span>"}function tt(n){return function(t){var r=h.call(arguments,1),i=e(t);if(u.isNullOrUndefined(n[i])){if(n["##DEFAULT##"])return i=s(i),u.callFormatter(c,n["##DEFAULT##"].
text?{uri:n["##DEFAULT##"].uri,text:n["##DEFAULT##"].text.replace(/##DEFAULT##/g,i)}:n["##DEFAULT##"],r)}else return u.callFormatter(c,n[i],r);return""}}function it(n){return function(t){var r=h.call(arguments,1),i=e(t),b="",v="",k=0,c,y,a,l,p,d,g,w,nt;n&&(n.backgroundColor&&(b="msportalfx-bgcolor-"+n.backgroundColor),n.barColorDefault&&(v="msportalfx-bgcolor-"+n.barColorDefault),n.barColorKey&&r[0].item&&r[0].item[n.barColorKey]&&(y=e(r[0].item[n.barColorKey]),y&&(v="msportalfx-bgcolor-"+y)),n.textKey&&(c=r[0].item&&r[0].item[n.textKey]?e(r[0].item[n.textKey]):""),n.textLocation&&(k=n.textLocation));a="fxc-percent-formatter-text";l="";switch(k){case 1:l=" fxc-percent-formatter-bottom-bar";break;case 2:l=" fxc-percent-formatter-top-bar";break;case 0:default:a=null}return(isNaN(i)||i instanceof Date)&&(i=0),p="",a&&(n.textKey||(d=i/100,g=f.NumberFormat.create({style:"percent"}),c=g.format(d)),c=u.callFormatter(s,c,r),p="<div class='"+a+"'>"+c+"<\/div>"),i=Math.min(100,Math.max(0,i)),w=" min-width: 1px;",
i===0&&(w=""),nt="<div class='azc-control fxc-percent-formatter' data-control='true' role='presentation' aria-atomic='true' aria-valuemin='0' aria-valuemax='100' aria-live='polite' aria-valuenow='"+i+"'><div class='fxc-percent-formatter-container'><div class='fxc-percent-formatter-value"+l+" "+v+"' style='width: "+i+"%;"+w+"'><\/div>"+p+"<div class='fxc-percent-formatter-background"+l+" "+b+"'><\/div><\/div><\/div>",u.callFormatter(o,nt,r)}}function rt(n){var t=a(n);return function(n){var i=h.call(arguments,1),r=e(n);return u.callFormatter(s,t(r),i)}}function ut(n,i){return function(r){var s=h.call(arguments,1),f=e(r),c=u.isNullOrUndefined(n[f]),l=c?"":u.attributeEncode(t.html(n[f].attribute)).replace(" ","_"),a=c?"":u.callFormatter(t.text,n[f].text,s);return"<div class='azc-grid-formatters-sprite "+l+"'><img src='"+u.attributeEncode(u.callFormatter(o,i,s))+"' alt='' /><\/div>"+a}}function ft(n){return function(t){var i=e(t);return typeof i!="number"?i.toString():n?f.NumberFormat.create(
n).format(i):f.NumberFormat.format(i)}}function et(n,t){return function(i,r){var u,f=[],e=ko.bindingHandlers.vivaControl.registerCallback((function(){return u||ko.ignoreDependencies((function(){return u={template:n,data:t(f,i,r),disposables:f}}))}));return"<div class='azc-vivaControl' data-bind='vivaControl: \""+e+"\"'>"+n+"<\/div>"}}function l(n,t,i){if(!n)throw new Error("Display formatter has to be provided to create any formatters bundle.");var r=function(t,i){return n(t,i)};return t&&(r.sortFormatter=typeof t=="function"?t:a(t)),i&&(r.filterFormatter=typeof i=="function"?i:a(i)),r}function ot(n){return l(n,n,n)}function st(n){return d[n]}function a(n){return function(t){return u.isNullOrUndefined(n[t])?n["##DEFAULT##"]?n["##DEFAULT##"]:t:n[t]}}function b(n){var t,i;switch(typeof n){case"number":t=new Date(n);break;case"string":i=r.parse(n);isNaN(i)||(t=new Date(i));break;case"object":n!==null&&n.constructor===Date&&(t=n)}return t}function o(n){var t=e(n);return u.isNullOrUndefined(t)?
"":t+""}function s(n){var t=e(n);return u.isNullOrUndefined(t)?"":u.htmlEncode(t+"")}var v=MsPortalFx,k=v.Base.Diagnostics,y=v.isNullOrUndefined,h=i.prototype.slice,p=k.createLog(n),d={},w="azc-grid-formatters-icon",e=ko.unwrap;t.date=g;t.uri=nt;t.icon=c;t.iconLookup=tt;t.percentageBar=it;t.textLookup=rt;t.spriteLookup=ut;t.numberFormat=ft;t.htmlBindings=et;t.bundle=l;t.defaultAll=ot;t._callBackLookup=st;t.html=o;t.text=s})(e||(e={})),e}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid table caption,.azc-grid.azc-grid-headerHidden table thead{display:none}.azc-grid{position:relative;font-size:12px}.azc-grid .azc-grid-container{overflow-x:auto;overflow-y:visible}.azc-grid .azc-grid-cell-ellipse,.azc-grid table tbody tr td,.azc-grid table thead tr th .azc-grid-header-wrapper span,.azc-grid table thead tr th span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid .azc-grid-cellContent,.azc-grid .azc-vivaControl{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.azc-grid .azc-grid-cell-fullheight{height:100%}.azc-grid .azc-grid-empty tr td{border-top-style:solid;border-top-width:1px}.azc-grid table{width:100%;border:0;background-color:transparent;table-layout:fixed;border-spacing:0}.azc-grid table tbody tr td,.azc-grid table tbody:last-child tr:last-child td{border-bottom-width:1px;border-bottom-style:solid}.azc-grid table tbody tr td .azc-dropdown,.azc-grid table thead tr th .azc-grid-header-wrapper .azc-grid-headerlabel{display:block}.azc-grid table td:first-of-type,.azc-grid table th:first-child{padding-left:7px}.azc-grid table th:first-child{padding-left:0}.azc-grid table thead tr th{text-transform:uppercase;text-align:left;font-size:10px;padding:0;height:40px;position:relative;font-family:az_ea_font,wf_segoe-ui_bold,"Segoe UI Bold","Segoe WP Bold","Segoe UI","Segoe WP",Tahoma,Arial,sans-serif;line-height:38px}.azc-grid table thead tr th a{position:relative}.azc-grid table thead tr th .azc-grid-header-wrapper{padding:1px 0 1px 10px;position:relative}.azc-grid table tbody tr td{padding:1px 0 1px 10px;height:33px}.azc-grid table tbody tr td .azc-button,.azc-grid table tbody tr td .azc-dropdown,.azc-grid table tbody tr td .azc-editableCombo,.azc-grid table tbody tr td .azc-fileUpload,.azc-grid table tbody tr td .azc-optionPicker,.azc-grid table tbody tr td button,.azc-grid table tbody tr td input,.azc-grid table tbody tr td select,.azc-grid table tbody tr td textarea{font-size:12px!important}.azc-grid table tbody tr.azc-grid-row:first-of-type td{border-top-width:1px;border-top-style:solid}.azc-grid a img{border:0}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.azc-bg-selected) td.azc-br-muted,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-has-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.azc-bg-selected) td.azc-br-muted{border-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.azc-bg-selected) td:first-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-has-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.azc-bg-selected) td:first-of-type{border-left-color:#00bcf2}.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-external-hovered:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.azc-bg-selected) td:last-of-type,.azc-grid-selectableRow:not(.azc-grid-activateableRow) .azc-grid-selectable .azc-has-hover:hover:not(.fxs-bg-error):not(.azc-bg-edited):not(.azc-disabled):not(.azc-row-disabled):not(.azc-bg-selected) td:last-of-type{border-right-color:#00bcf2}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1",["require","exports","f","o","../../../Util/Viva.TemplateEngine","../../Base/Viva.ExtensibleControl","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","./Viva.Grid1.Formatters","MsPortalImpl/Resources/ImplScriptResources","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function d(n){return n?"true":"false"}var g=i,t=jQuery,w="azc-grid",b="azc-grid-headerHidden",a="azc-grid-selectableRow",nt="azc-grid-editableRow",h="azc-br-muted",tt="<!-- ko template: 'table' --><!-- /ko -->",it="<div class='azc-grid-container "+h+"'>"+("<div class='azc-grid-tableContainer "+h+"'>")+("<div class='azc-grid-tableScrollContainer "+h+"'>")+"<!-- ko if: data.columns().length --><table class='azc-grid-tableHeader' role='presentation'><caption data-bind='text: data.summary'><\/caption><!-- ko template: 'header' --><!-- /ko --><\/table><div class='azc-grid-tableContent'><table class='azc-grid-full' role='presentation'><!-- ko template: 'colgroup' --><!-- /ko --><!-- ko template: 'body' --><!-- /ko --><\/table><\/div><!-- /ko --><\/div><\/div><\/div>",
rt="<!-- ko template: 'colgroup' --><!-- /ko --><thead><tr role='row'><!-- ko template: { name: \"headerCell\", foreach: data.columns } --><!-- /ko --><\/tr><\/thead>",ut='<colgroup><!-- ko template: { name: "headerColumn", foreach: data.columns } --><!-- /ko --><\/colgroup>',ft='<col data-bind=\'attr: { "class": "col" + $index() }, style: { width: width }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }\' />',et="<th role='columnheader' scope='col' aria-readonly='true' data-bind='attr: { \"class\": \"azc-grid-column-header \" + cssClass }, css: { \"azc-collapsed-hidden\": $data.hiddenInCollapsed }'><div class='azc-grid-header-wrapper'><!-- ko template: \"headerCellContent\" --><!-- /ko --><\/div><\/th>",ot="<span class='azc-grid-headerlabel' data-bind='text: name'><\/span>",st="<!-- ko template: { name: ko.pureComputed(function () { return data.loading() ? 'templateLoading' : ($ctl._showNoRows() ? 'bodyNoItems' : 'bodyCore'); }) } --><!-- /ko -->",ht="<tbody class='azc-grid-groupdata' role='rowgroup'><!-- ko template: { name: 'bodyRows', foreach: data.items } --><!-- /ko --><\/tbody>",
ct="<tbody role='rowgroup' class='azc-grid-empty' data-bind='if: data.noRowsMessage'><tr role='row'><td role='gridcell' class='"+h+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody>",lt="<tbody role='rowgroup' class='azc-grid-empty'><tr role='row'><td role='gridcell' class='"+h+" msportalfx-tooltip-overflow' data-bind='attr: { colspan: $ctl._getTotalColumns() }'>"+s.Grid.loading+"<\/td><\/tr><\/tbody>",at="<!-- ko template: { name: 'bodyRowsCore', data: $ctl.getRowMetadata($data), context: function (metadata) { return { $disabled: metadata.disabled || $disabled }; } } --><!-- /ko -->",vt="<tr role='row' data-bind='attr: { \"class\": \"azc-grid-row \" + cssClass() }'><!-- ko template: { name: 'bodyCell', foreach: $vm.columns } --><!-- /ko --><\/tr>",yt='<td role=\'gridcell\' data-bind=\'template: { name: "bodyCellContent" }, css: { "azc-collapsed-hidden": $data.hiddenInCollapsed }, attr: { "class": "azc-grid-cell '+
h+' " + cssClass + (itemKey === "infoBalloon" ? "azc-grid-infoBalloon" : "") }\'><\/td>',pt="<div class='azc-grid-cellContent' data-bind='css: { \"azc-grid-cell-ellipse\": $data.enableEllipse, \"azc-grid-cell-fullheight\": $data.fullHeight }, trustedHtml: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)'><\/div>",c=ko.observable,v=ko.observableArray,wt=ko.computed,bt=ko.pureComputed,kt=i.forEachKey,l,k,y,p;(function(n){n[n.None=0]="None";n[n.Alt=1]="Alt";n[n.Meta=2]="Meta";n[n.Shift=4]="Shift";n[n.Ctrl=8]="Ctrl"})(n.ModifierKeys||(n.ModifierKeys={}));l=n.ModifierKeys;k=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(f.Extension);n.Extension=k;y=(function(n){function i(){n.apply(this,arguments);this.summary=c();this.showHeader=!0;this.columns=v();this.items=v();this.noRowsMessage=c();this.events=t.noop;this.uri={};this.text={};this.sortByList=v()}return __extends(i,n),i})(f.ViewModel);n.ViewModel=y;p=(function(n){function f(i,r,f){var
e=this,o;n.call(this,i,r,t.extend({viewModelType:y},f));this.templateEngine=new u.HtmlTemplateEngine;this._extensionTrigger("beforeCreate");this._showNoRows=bt((function(){if(!e.options.items)return!0;var n=e.options.items(),t=n&&n.length||0,i=e._extensionTrigger("modifyRowNumber");return i.forEach((function(n){t+=n})),t===0}));this._setTemplates();o=this.getPlugin(a);this.element.addClass(w).attr({role:"grid","aria-multiselectable":d(o&&!!o._multiselect),"aria-readonly":d(!this.getPlugin(nt))}).html(tt);this.options.showHeader||this.element.addClass(b);this._bindDescendants();this._attachEvents();this._extensionTrigger("afterCreate")}return __extends(f,n),f.getCell=function(n,t,i){var r=n.find?n:n.element;return r.find(".azc-grid-row:eq("+t+") .azc-grid-cell:not([aria-hidden=true]):eq("+i+")")},f.getModifierKeys=function(n){return(n.altKey&&l.Alt)|(n.metaKey&&l.Meta)|(n.shiftKey&&l.Shift)|(n.ctrlKey&&l.Ctrl)},f.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.
dispose)||(this._extensionTrigger("beforeDestroy"),this._detachEvents(),this._cleanElement(w,b),n.prototype.dispose.call(this),this._extensionTrigger("afterDestroy"))},r.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype.getRowMetadata=function(n){var e=this.options,u,r,f;return typeof n!="object"||!n?null:(u=function(t){return t&&t.item===n},r=i.find(this._allRows,u),r||(r=this._getNewRowMetadataEntries(),r.item=n,f=e.rowMetadata?e.rowMetadata.first(u):null,f&&t.extend(!0,r,f),this._allRows.push(r)),r)},f.prototype.previous=function(){return this.getPlugin(a).previous()},f.prototype.next=function(){return this.getPlugin(a).next()},f.prototype._getAllRowMetadata=function(){return this._allRowsInited||(this._updateAllRowMetadata(),this._allRowsInited=!0),this._allRows},f.prototype._initializePlugins=function(t){this._allRows=[];n.prototype._initializePlugins.call(this,t)},f.prototype._initializeSubscriptions=function(t)
{var i=this,r;n.prototype._initializeSubscriptions.call(this,t);this._subscriptions.registerForDispose(t.columns.subscribe(r=function(n){i._normalizeColumns(n)}));r(t.columns());t.items&&(this._subscriptions.registerForDispose(t.items.subscribe((function(n){var t=[],r=[];i._allRows.forEach((function(i){var u=n.some((function(n){return i.item===n}));u?t.push(i):r.push(i)}));r.forEach((function(n){i._extensionTrigger("shouldRetainRowMetadata",n).some((function(n){return n===!0}))&&t.push(n)}));i._allRows=t;i._updateAllRowMetadata()}))),this._addDisposablesToCleanUp(this._itemsPerKeyboardPage=wt((function(){var n=i.options.items();return n&&n.length>20?10:5}))))},f.prototype._attachEvents=function(){this._extensionTrigger("beforeAttachEvents");this.element.on("mouseenter.azcGrid","> .azc-grid-container .azc-grid-full > tbody > tr > td .azc-grid-cellContent, > .azc-grid-container .azc-grid-tableHeader > thead > tr > th .azc-grid-headerlabel",this._onMouseEnter=function(){var n=t(this),i=n.attr("title");
n.find(">div,>span").length===0&&i!==n.text()&&(this.offsetWidth<this.scrollWidth?n.attr("title",n.text()):i&&n.removeAttr("title"))});this._extensionTrigger("afterAttachEvents")},f.prototype._detachEvents=function(){this._extensionTrigger("beforeDetachEvents");this._onMouseEnter&&(this.element.off("mouseenter.azcGrid",this._onMouseEnter),this._onMouseEnter=null);this._extensionTrigger("afterDetachEvents")},f.prototype._getNewRowMetadataEntries=function(){var n={item:null,cssClass:c("")},i=this._extensionTrigger("getDefaultRowMetadataProperties");return i.forEach((function(i){t.extend(!0,n,i)})),n},f.prototype._getNewColumnEntries=function(){var n={name:c(""),itemKey:"",formatter:o.text,cssClass:"",width:c(null)},i=this._extensionTrigger("getDefaultColumnProperties");return i.forEach((function(i){t.extend(!0,n,i)})),n},f.prototype._normalizeColumns=function(n){var t=this._getNewColumnEntries(),o=r.keys(t),i=!1,f=n.length,e,u;for(this._colCount||(this._colCount=0),e=function(){var r=n[f];o.
forEach((function(n){r[n]===undefined&&(r[n]=t[n],i=!0)}));g.isNullOrUndefined(r.columnId)&&(r.columnId=(u._colCount++).toString());i&&(t=u._getNewColumnEntries(),i=!1)},u=this;f--;)e()},f.prototype._getTotalColumns=function(){var n=this.options.columns().length,t=this._extensionTrigger("getAdditionalColumns");return t.forEach((function(t){n+=t})),n},f.prototype._cellFormat=function(n,t,i,r){return(r.formatter||o.text)(i.item[r.itemKey],{item:i.item,rowNumber:n,columnNumber:t,rowMetadata:i,column:r})},f.prototype._setTemplates=function(){var n=this.templateEngine;this._extensionTrigger("beforeSetTemplates",n);kt({table:it,header:rt,headerColumn:ft,colgroup:ut,headerCell:et,headerCellContent:ot,body:st,bodyCore:ht,bodyNoItems:ct,templateLoading:lt,bodyRows:at,bodyRowsCore:vt,bodyCell:yt,bodyCellContent:pt},(function(t,i){n.setTemplate(t,i)}));this._extensionTrigger("afterSetTemplates",n)},f.prototype._updateAllRowMetadata=function(){var i=this,t=this.options,n;t.items&&(n=t.items(),n&&n.length&&
n.forEach((function(n){i.getRowMetadata(n)})))},f})(f.Widget);n.Widget=p;ko.bindingHandlers.azcGrid=e.getBindingHandler(p)})(h||(h={})),h}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-focusableRow table tbody tr[aria-disabled=true] td>div{opacity:.5}.azc-grid-focusableRow table tbody tr[aria-disabled=true] td.azc-grid-infoBalloon>div{opacity:1}.azc-grid-focusableRow table tbody tr[aria-disabled=true] td .azc-dockedballoon{position:static}.azc-grid-focusableRow.azc-grid-mousedown{outline:0}")}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow",["require","exports","f","o","./Viva.Grid1","MsPortalImpl/Base/Base.KeyboardHelper","../../../Util/Viva.Util","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.FocusableRow.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function h(n){return n.find("> tbody > tr[data-grid-focusable]:not([aria-disabled=true]):not(.fxc-row-hidden)")}
var p=i,b=p.isNullOrUndefined,t=jQuery,w=window,k='attr: { "aria-disabled": $disabled, "data-grid-focusable": true }',d='attr: { tabindex: focused() ? "0" : null }',g='css: { "azc-row-disabled": $disabled }',nt="azc-has-hover",v="azc-grid-tableContainer",y="."+v,tt="tbody tr[data-grid-focusable=true]:not([aria-disabled=true])",c=".azc-grid",l="rowFocus",a="tabindex",s=ko.observable,o=ko.dataFor,it=p.disposeDisposable,rt=(function(n){function p(t){n.call(this);this._disposables=[];this._options=t=t||{};t.focusable===undefined&&(t.focusable=s(!0));t.focusableCursorEnabled=t.focusableCursorEnabled||s(!1);t.focusableCursorOptions=t.focusableCursorOptions||{wrapFocus:s(!0),hasPreviousFocusRow:s(!1),hasNextFocusRow:s(!1)}}return __extends(p,n),r.defineProperty(p.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),p.isEditableControl=function(n){return n.is("input")||n.is("textarea")||n.is("select")||n.is("keygen")},p.prototype.setInstance=function(t){n.prototype.
setInstance.call(this,t)},p.prototype.afterCreate=function(){var n=this;this._disposables.push(ko.computed((function(){var t=n._widget.element;n.options.focusable()?t.attr(a,0):t.removeAttr(a)})))},p.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",k);t.addAttribute("tr","data-bind",this._getRowFocusDataBindAttribute());t.addAttribute("tr","data-bind",g);this.externalHover||t.addAttribute("tr","class",nt)},p.prototype.getDefaultRowMetadataProperties=function(){return{disabled:s(!1),focused:s(!1)}},p.prototype.getOrder=function(){return 10},p.prototype.afterAttachEvents=function(){var n=this,i=this._widget.element;this._disposables.push(i.setEvents(["click.azcGrid",tt,function(i){if(this===w.document.activeElement||t.contains(this,w.document.activeElement))n._updatePreviousNextFocusableState(t(this));else{var r=o(this);r&&n._focusRow(this,r,i)}}],["keydown.azcGrid",function(i){var f=t(i.target),e=f.closest(c),v=f.is(c),h=v?null:
f.closest("tr[data-grid-focusable]"),r,l=u.Widget.getModifierKeys(i),a=!0,s;if(!p.isEditableControl(f)||!n._isGridDataControl(f))if(s=n.options.focusableCursorOptions.wrapFocus(),l===u.ModifierKeys.None){switch(i.which){case 38:r=n._findPreviousFocusable(e,h,s);break;case 40:r=n._findNextFocusable(e,h,s);break;case 36:r=n._findFirstFocusable(e);break;case 35:r=n._findLastFocusable(e);break;case 33:case 34:r=n._findFocusableByPage(e,i.which);break;default:a=!1}r&&r.length&&n._focusRow(r,o(r[0]),i);a&&i.preventDefault()}else l===u.ModifierKeys.Shift&&i.which===9&&n._focus(i)}],["mousedown.azcGrid",function(){i.addClass("azc-grid-mousedown");t("body").one("mouseup",(function(){i.removeClass("azc-grid-mousedown")}))}],["focus.azcGrid",function(r){t.contains(i[0],r.relatedTarget)||(n._focus(r),i.attr(a,-1))}]))},p.prototype.beforeDestroy=function(){it(this._disposables);this._disposables=[];this._widget.element.removeAttr(a).removeClass("azc-grid-mousedown")},p.prototype.getName=function(){return p.
Name},p.prototype.focusRowByRowMetadata=function(n){var t=this._getRowByRowMetadata(n);t&&this._focusRow(t,n)},p.prototype.previous=function(n){var i;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(i=this._getRowByRowMetadata(n),i){var u=t(i),f=u.closest(c),r=this._findPreviousFocusable(f,u,!1);r&&this._focusRow(r,o(r[0]),t.Event(l))}}else throw new Error("Previous focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},p.prototype.next=function(n){var i;if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){if(i=this._getRowByRowMetadata(n),i){var u=t(i),f=u.closest(c),r=this._findNextFocusable(f,u,!1);r&&this._focusRow(r,o(r[0]),t.Event(l))}}else throw new Error("Next focusable cursor method will work only when focusableCursorEnabled option is set to true.");return Q()},p.prototype._findFirstFocusable=function(n){return h(n.find("table.azc-grid-full").eq(0)).first()},p.prototype.
_findFocusableByPage=function(n,i){var n=n.find("table.azc-grid-full").eq(0),r=this._getPagedFocusableList(n),o=this._getFocusedItemIndex(n),s=this._widget._itemsPerKeyboardPage(),u=o<s?0:Math.floor(o/s),h=o%s,f,e;if(r.length>0)switch(i){case 33:h===0&&r[u-1]?f=r[u-1].first():(e=r[u],f=e&&e.first());break;case 34:r[u+1]?f=r[u+1].first():(e=r[u],f=e&&e.last())}return f?t(f):undefined},p.prototype._findLastFocusable=function(n){return h(n.find("table.azc-grid-full").eq(0)).last()},p.prototype._findNextFocusable=function(n,i,r){r===void 0&&(r=!0);var e=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),f=h(e),u;if(i)for(u=0;u<f.length;u++)if(i[0]===f[u]&&u<f.length-1)return t(f[u+1]);return r?t(f[0]):null},p.prototype._findPreviousFocusable=function(n,i,r){r===void 0&&(r=!0);var e=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").eq(0),f=h(e),u;if(i)for(u=f.length-1;u>=0;u--)if(i[0]===f[u]&&u>0)return t(f[u-1]);return r?t(f[f.length-1]):null},p.prototype.
_focus=function(n){var i,u,e=this._widget.element,h=e.hasClass("azc-grid-mousedown"),l=n.type==="focus"&&!h,c=f.getModifierKeys(n),a=c===0&&(n.which===9||n.which===40||n.which===38),r,s;h?i=t(n.target).closest("tr:not([aria-disabled=true])")[0]:(a||l)&&(r=e.find("input, textarea, select, button, a, [tabindex=0], "+y).filter((function(n,i){return t(i).hasClass(v)||t(i).closest(y).length===0})).filter(":visible"),document.activeElement!==r[0]&&r[0]&&!t(r[0]).hasClass(v)?(this._focusElement(t(r[0])),n.preventDefault(),n.stopPropagation()):(s=e.find(".azc-grid-row").eq(0),s.length?i=s[0]:this._lastTabbableRowMetadata&&this._isRowDisplayed(this._lastTabbableRowMetadata)?(i=this._getRowByRowMetadata(this._lastTabbableRowMetadata),u=this._lastTabbableRowMetadata):i=this._findNextFocusable(e,null)[0]));i&&(u=u||this._widget.getRowMetadata(o(i).item),this._focusRow(i,u),c===0&&(n.preventDefault(),n.stopPropagation()))},p.prototype._focusElement=function(n){var t=n[0];t.focus();t.focus()},p.prototype.
_focusRow=function(n,i,r){var u=t(n),f;this._lastTabbableRowMetadata&&this._lastTabbableRowMetadata.focused(!1);b(i)||(this._lastTabbableRowMetadata=i,i.focused(!0),f={focused:i,target:u},this._focusElement(u),r&&(this._widget.trigger(l,e.cloneEvent(r,l),f),this._widget.options.events("focus",f)),this._updatePreviousNextFocusableState(u))},p.prototype._getFocusedItemIndex=function(n){for(var i,r=this._getPagedFocusableList(n),u,f=this._widget._itemsPerKeyboardPage(),t=0;t<r.length;t++)for(i=0;i<r[t].length;i++)if(o(r[t][i])===this._lastTabbableRowMetadata){u=t*f+i;break}return u},p.prototype._getFocusedRowMetadata=function(){return this._lastTabbableRowMetadata},p.prototype._getRowByRowMetadata=function(n){return i.find(this._widget.element.find("tbody tr").toArray(),(function(t){return o(t)===n}))},p.prototype._getRowFocusDataBindAttribute=function(){return d},p.prototype._findPreviousAndNextFocusable=function(n,i,r){r===void 0&&(r=!0);var s=i?i.closest("table.azc-grid-full"):n.find("table.azc-grid-full").
eq(0),u=h(s),f,e,o;if(i)for(f=u.length-1;f>=0;f--)if(i[0]===u[f]){f>0&&(e=t(u[f-1]));f<u.length-1&&(o=t(u[f+1]));break}return e=e?e:r?t(u[u.length-1]):null,o=o?o:r?t(u[0]):null,{previous:e,next:o}},p.prototype._updatePreviousNextFocusableState=function(n){if(this.options.focusableCursorEnabled&&this.options.focusableCursorEnabled()){var i=this.options.focusableCursorOptions.wrapFocus(),r=n.closest(".azc-grid"),t=this._findPreviousAndNextFocusable(r,n,i);this.options.focusableCursorOptions.hasPreviousFocusRow(t.previous?!0:!1);this.options.focusableCursorOptions.hasNextFocusRow(t.next?!0:!1)}},p.prototype._getPagedFocusableList=function(n){for(var i=[],t=h(n).toArray(),r=this._widget._itemsPerKeyboardPage();t.length>0;)t.length<=r?i.push(t.splice(0)):i.push(t.splice(0,r));return i},p.prototype._isGridDataControl=function(n){return t.contains(this._widget.element.find(y)[0],n[0])},p.prototype._isRowDisplayed=function(n){return this._widget.element.find("tbody tr[data-grid-focusable=true]:not([aria-disabled=true])").
each((function(t,i){if(o(i)===n)return!0})),!1},p.Name="azc-grid-focusableRow",p})(u.Extension);n.FocusableRowExtension=rt})(o||(o={})),o}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.CheckBox.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-checkBox,.azc-checkBox span{display:inline-block;height:17px;vertical-align:top}.azc-checkBox{outline:0;background-repeat:no-repeat;background-position:center;position:relative}.azc-checkBox input{display:inline-block;margin:0;padding:0;border-width:0;text-decoration:none;height:17px}.azc-checkBox span{width:17px;box-sizing:border-box;border-width:1px;border-style:solid;border-color:inherit}.azc-checkBox .azc-checkBox-svg{position:absolute;top:3px;left:3px}.azc-checkBox .azc-checkBox-invisible{display:none}")}));define("Viva.Controls/Controls/Forms/Viva.CheckBox",["require","exports","o","../Base/Viva.ValidatableControl","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","../../../_generated/Less/Viva.Controls/Controls/Forms/Viva.CheckBox.css"],
(function(n,t,i,r,u){"use strict";var f;return (function(n){var e=jQuery,c="azc-input",l="azc-checkBox",a="__azc-checkBox",v="<input class='azc-formControl' type='checkbox' data-bind='attr: { name: $ctl._name }, checked: $ctl._checked, value: $ctl._inputValue' name='' tabindex='-1' /><span class='azc-fill-text' data-bind='css: { \"fxs-br-error\": data.validationState() === 1, \"fxs-br-dirty\": data.dirty(), \"azc-disabled\": $disabled, \"azc-br-focused\": data.focused() }'><svg focusable='false' class='azc-checkBox-svg azc-check-svg' data-bind='style: { visibility: $ctl._checkChecked } ' version='1.1' xmlns= http://www.w3.org/2000/svg' xmlns: xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='11px' height='11px' viewBox='0 0 16 16' enable-background='new 0 0 16 16' xml: space='preserve' ><path d='M0.632,8.853L0.101,8.278C-0.037,8.126-0.037,7.885,0.123,7.74l1.534-1.418c0.073-0.066,0.16-0.101,0.255-0.101c0.108,0,0.204,0.044,0.276,0.123l4.218,4.523l7.258-9.296c0.073-0.094,0.182-0.145,0.298-0.145c0.088,0,0.167,0.029,0.233,0.081l1.659,1.28c0.081,0.059,0.13,0.145,0.145,0.248c0.007,0.101-0.015,0.204-0.081,0.276L6.595,15.246L0.632,8.853z'><\/path><\/svg><svg focusable='false' class='azc-checkBox-svg azc-indeterminate-svg' data-bind='style: { visibility: $ctl._checkIndeterminate }' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='12px' height='12px' enable - background='new 0 0 24 24' xml: space='preserve' ><rect x='1px' y='1px' width='9' height='9'><\/rect><\/svg><\/span>",
f=ko.computed,o=ko.observable,y=0,t,s,h;(function(n){n[n.Unchecked=0]="Unchecked";n[n.Checked=1]="Checked";n[n.Indeterminate=2]="Indeterminate"})(n.Value||(n.Value={}));t=n.Value;s=(function(n){function i(){n.call(this);this.state=o(0);this.inputId=null;this.inputCheckedValue=o("checked");this.inputIndeterminateValue=o("indeterminate");this.isTriState=!1;this.value(t.Unchecked);this.canUserSetIndeterminate=o(!0)}return __extends(i,n),i})(r.ViewModel);n.ViewModel=s;h=(function(n){function r(t,i,r){n.call(this,t,i,e.extend({viewModelType:s},r));this._attributes=[{name:"role",value:"checkbox"}];this._checked=f(e.noop);this._ariaChecked=f(e.noop);this._inputValue=f(e.noop);this._name=this.options.name||a+y++;this.element.addClass(l+" "+c).html(v);this._input=this.element.find("input").hide();this._svgElements=this.element.find(".azc-checkBox-svg");this._svgCheck=this.element.find(".azc-check-svg")[0];this._svgIndeterminate=this.element.find(".azc-indeterminate-svg")[0];this.options.inputId&&this.
_input.attr("id",this.options.inputId);this._addAttributes();this._initializeComputeds();this._bindDescendants();this._afterCreate();this._supportsFocus(!0)}return __extends(r,n),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement(l,c),this._removeAttributes(),this._detachEvents(),this._input=null,n.prototype.dispose.call(this))},i.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.prototype.toggle=function(){var i=this.options.value(),n=t.Checked;i===t.Checked?n=t.Unchecked:this.options.isTriState&&this.options.canUserSetIndeterminate()&&i===t.Unchecked&&(n=t.Indeterminate);this.options.value(n)},r.prototype._isSameValue=function(n,t){return n===t},r.prototype._initializeComputeds=function(){var n=this,u=this.lifetimeManager,r=this.element,i=this.options;this.$tabIndex.subscribeAndRun(u,(function(n){r.attr("tabindex",n)}));this._checked=f((function(){return i.value()!==t.Unchecked})
);this._ariaChecked=f((function(){switch(i.value()){case t.Checked:return"true";case t.Unchecked:return"false";case t.Indeterminate:return"mixed";default:return null}}));this._checkChecked=f((function(){return i.value()===1?"visible":"hidden"}));this._checkIndeterminate=f((function(){return i.value()===2?"visible":"hidden"}));this._inputValue=f((function(){return n._getInputValue(i.value())}));this._addDisposablesToCleanUp([this._checked,this._ariaChecked,this._inputValue,this._checkChecked,this._checkIndeterminate]);this._addDisposablesToCleanUp(f((function(){r.attr("aria-checked",n._ariaChecked())})));this._addDisposablesToCleanUp(f((function(){var t=n.$disabled();n._input.prop("disabled",t);r.attr("aria-disabled",t);n._detachEvents();t||n._attachEvents()})))},r.prototype._getInputValue=function(n){return n===t.Checked?this.options.inputCheckedValue():n===t.Indeterminate?this.options.inputIndeterminateValue():"unchecked"},r.prototype._addAttributes=function(){var n=this;this._attributes.forEach(
(function(t){n.element.attr(t.name,t.value)}))},r.prototype._removeAttributes=function(){var n=this;this._attributes.forEach((function(t){n.element.removeAttr(t.name)}))},r.prototype._blur=function(){this.options.focused(!1)},r.prototype._focus=function(){this.options.focused(!0)},r.prototype._attachEvents=function(){var n=this;this._detachEvents();this._events={blur:function(){n._blur()},click:function(){n.toggle()},focus:function(){n._focus()},keyup:function(t){t.which===32&&n.toggle()},keydown:function(n){n.which===32&&n.preventDefault()},mouseenter:function(){n.options.state()!==2&&n.options.state(1)},mouseleave:function(){n.options.state()!==2&&n.options.state(0)}};this.element.on(this._events)},r.prototype._detachEvents=function(){this._events&&(this.element.off(this._events),this._events=null)},r})(r.Widget);n.Widget=h;ko.bindingHandlers.azcCheckBox=u.getBindingHandler(h)})(f||(f={})),f}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility",["require","exports","f",
"o","../../Base/Loadable"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function o(n,i){t[n.toString()]=i}function s(n,i){t[n.toString()]===i&&delete t[n.toString()]}function h(){t={}}function c(n,t){n.forEach((function(n){t.addClass(n.getName())}))}function l(n,t){n.forEach((function(n){t.removeClass(n.getName())}))}var f=i.forEachKey,e=(function(){function n(){}return n.prototype.setInstance=function(n){this._widget=n},n.prototype.getName=function(){return null},n.prototype.getDependencies=function(){return null},n})(),t,r;n.Extension=e;t={};n.defaultPlugins=[];n.registerPlugin=o;n.unregisterPlugin=s;n.unregisterAllPlugins=h;r=(function(i){function r(n,t,r){i.call(this,n,t,r);this._initializePlugins(t);c(this._plugins,this.element)}return __extends(r,i),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(i.prototype.dispose)||(i.prototype.dispose.call(this),l(this._plugins,this.element))},r.prototype.getPlugin=function(n){return this._plugins?this._plugins.first(
(function(t){return t.getName()===n})):null},r.prototype._initializePlugins=function(i){var e=this,u=[],r=[];n.defaultPlugins.forEach((function(n){u.push(new n)}));f(t,(function(n,t){var r=parseInt(n,10);(i.extensions&r)===r&&u.push(new t)}));this._loadPlugins(u,r);this._plugins=r;r.sort((function(n,t){var i=n.getOrder?n.getOrder():null,r=t.getOrder?t.getOrder():null;return i===r?0:i!==null&&r===null?-1:i===null&&r!==null?1:i<r?-1:1}));r.forEach((function(n){n.setInstance(e)}))},r.prototype._extensionTrigger=function(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return i=[],this._plugins.forEach((function(t){t[n]&&i.push(t[n].apply(t,r))})),i},r.prototype._loadPlugins=function(n,t){var i=this;n.forEach((function(r){var u=r.getDependencies()||[],f=u.filter((function(i){return!n.some((function(n){return n.getName()===i.getName()}))&&!t.some((function(n){return n.getName()===i.getName()}))}));t.some((function(n){return n.getName()===r.getName()}))||t.push(r);f.length&&i._loadPlugins(u,t)}))}
,r})(u.Widget);n.Extensibility=r})(f||(f={})),f}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Impl",["require","exports","f","o","a","./Grid1.Extensibility","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(t){function d(t,i){return function(r,u){switch(t){case o.uri:u=u||{};u.cssClass="msportalfx-link-primary"}var f=t(r,u);return h.sanitizeHTML(new c(f,n,i)).sanitizedMarkup}}function g(n,t){return n&&t&&n===t}var v=i.Base,c=s.ProvenanceContainer,y=v.Diagnostics,p=i.ViewModels.Controls.Lists.Grid,l=p.Format,w=ko.observable,b=i.forEachKey,k=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(f.Extension),u,a;t.GridExtension=k;u=(function(t){function i(n,i,r){t.call(this,n,i,r);this._metadataDisposables=[];this._resetCallbackAdded=!1;this._extensionTrigger(
"beforeCreate");this._initializeWidgets();this._extensionTrigger("afterCreate")}return __extends(i,t),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(t.prototype.dispose)||(this._extensionTrigger("beforeDestroy"),this._metadataDisposables&&(this._metadataDisposables.forEach((function(n){var t=n.disposables||[];t.forEach((function(n){n.dispose()}))})),this._metadataDisposables=[]),this._resetCallbackAdded&&this.options.resetCallback(null),t.prototype.dispose.call(this),this._extensionTrigger("afterDestroy"))},r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.getRowMetadata=function(n){return this._instance.getRowMetadata(n)},i.prototype._twoWayBinding=function(n,t){var r=n(),u=t(),i=!1,f=function(n,t){if(!i)try{i=!0;n(t)}finally{i=!1}},e,o;return r?t(r):u&&n(u),e=n.subscribe((function(n){f(t,n)})),o=t.subscribe((function(t){f(n,t)})),[e,o]},i.prototype._resetExtensions=function(){var n=this._extensionTrigger(
"resetExtension");return Q.all(n)},i.prototype._initializeWidgets=function(){this._initializeNestedViewModel();this._instance=new e.Widget(this.element,this._nestedViewModel);this._widgets.push(this._instance);this._initializeExtensions();this._initializeVivaRowMetadata();this._setResetCallback()},i.prototype._getFormatter=function(n,t){var i,r=this._createOptions;switch(n){case l.Text:return o.text}if(i=this._extensionTrigger("getSafeFormatter",n,t,r.isTrusted).first((function(n){return n!==null})),i)return i;switch(n){case l.Html:i=o.html;break;default:i=this._extensionTrigger("getUnsafeFormatter",n,t,r.isTrusted).first((function(n){return n!==null}));i||(i=o.text)}return r.isTrusted||(i=d(i,this.element)),i},i.prototype._connectMetadataAndDisposeSubscriptions=function(n,t){var i=this._getVivaItem(t);i&&this._canConnectRowMetadataProperties(i,t)&&(this._connectRowMetadataProperties(i,t),n.forEach((function(n){n.dispose()})))},i.prototype._disposeMetadataDisposables=function(n){var t,i=-1;this.
_metadataDisposables.some((function(r,u){return r.metadata===n?(t=r,i=u,!0):!1}));t&&((t.disposables||[]).forEach((function(n){n.dispose()})),this._metadataDisposables.splice(i,1))},i.prototype._initializeNestedViewModel=function(){var r=this,t=new e.ViewModel,i=this.options,u;t.summary=i.summary;t.showHeader=i.showHeader;t.sortByList=i.sortByList;t.loading=i.loading;t.actions=i._msPortalFxActions;t.noRowsMessage=w();i.noRowsMessage&&(u=ko.computed((function(){var u=i.noRowsMessage(),f=r._createOptions.isTrusted?u:h.sanitizeHTML(new c(u,n)).sanitizedMarkup;t.noRowsMessage(f)}),this),this._addDisposablesToCleanUp(u));t.columns=i.columns.mapInto(this.lifetimeManager,(function(n,t){var i=r._toNestedColumn(t);return n.registerForDispose((function(){r._extensionTrigger("columnAdded",t,i)})),r._extensionTrigger("columnAdded",t,i),i}));t.items=i.items;t.extensions=this._getExtensions(i.extensionsOptions||{});t.disabled=i.disabled;this._nestedViewModel=t},i.prototype._initializeExtensions=function(){this.
_extensionTrigger("initializeExtension")},i.prototype._setResetCallback=function(){var n=this;this.options.resetCallback()||(this.options.resetCallback((function(){return n._resetExtensions()})),this._resetCallbackAdded=!0)},i.prototype._toNestedColumn=function(n){var t={};return b(n,(function(n,i){t[n]=i})),t.pcColumn=n,t.formatter=null,n.format!==undefined&&(t.formatter=this._getFormatter(n.format,n.formatOptions||{})),t},i.prototype._initializeVivaRowMetadata=function(){var n=this,t=this.options.rowMetadata;t.subscribeArrayBulkChanges(this.lifetimeManager,(function(t,i){i.forEach((function(t){n._disposeMetadataDisposables(t)}));t.forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))}));t.peek().forEach((function(t){n._connectPortalAndVivaRowMetadataAsync(t)}))},i.prototype._connectPortalAndVivaRowMetadataAsync=function(n){var r=this,t=[],i=this._getVivaItem(n);i&&this._canConnectRowMetadataProperties(i,n)?this._connectRowMetadataProperties(i,n):(this._extensionTrigger("registerSubscriptionsToConnectMetadataProperties",
t,n).forEach((function(n){t.push(n)})),t.push(this._nestedViewModel.items.subscribe((function(){r._connectMetadataAndDisposeSubscriptions(t,n)}))))},i.prototype._getVivaItem=function(n){var i=this._nestedViewModel.items().first((function(t){return n.item===t})),r,t;if(!i)for(r=this._extensionTrigger("getAdditionalItems"),t=0;t<r.length;t++)if(r[t]&&(i=r[t].first((function(t){return g(t,n.item)})),i))break;return i},i.prototype._canConnectRowMetadataProperties=function(n,t){return!this._extensionTrigger("disallowConnectRowMetadataProperties",n,t).some((function(n){return!!n}))},i.prototype._connectRowMetadataProperties=function(n,t){var i,u=this.getRowMetadata(n),r;t?(i=this._metadataDisposables.first((function(n){return n.metadata===t})),i||(i={metadata:t,disposables:[]},this._metadataDisposables.push(i)),this._extensionTrigger("connectRowMetadataProperties",n,u,t).forEach((function(n){n&&i.disposables.push.apply(i.disposables,n)}))):(r=new y.Log("Grid"),r.debug("Metadata was not present and could not connect rowmetadata."))}
,i.prototype._getExtensions=function(n){var t=[];return this._extensionTrigger("getExtension",n).forEach((function(n){n&&t.push(n)})),t},i})(f.Extensibility);t.Widget=u;a=(function(n){function t(t,i){n.call(this,t,i,{isTrusted:!0})}return __extends(t,n),t})(u);t.TrustedWidget=a})(c||(c={})),c}));define("_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxc-base.azc-grid .fx-grid-formatters-svg{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svg.fx-grid-svgicon-center{justify-content:center;width:calc(100% + 10px);margin-left:-10px}.fxc-base.azc-grid .fx-grid-formatters-svg .fx-grid-formatters-svgtext{text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-svgicon{margin-right:6px;flex-shrink:0;width:12px;height:13px;position:relative}.fxc-base.azc-grid .fx-grid-formatters-icon{display:flex;align-items:center;text-overflow:inherit;overflow:inherit}.fxc-base.azc-grid .fx-grid-formatters-icon .fx-grid-formatters-icon-text{flex:1;min-width:0;text-overflow:inherit;overflow:inherit}")})
);define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter",["require","exports","f","i","o","a","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalImpl/Base/Base.Sanitization","../../../../_generated/Less/MsPortalImpl.Controls/Controls/Lists/Grid1.Formatters.css"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function b(n){var t=w(n),i=t&&!l(t.text)&&!l(t.uri)?t.uri:t;return c.sanitizeUri(i+"")}function nt(n){return b(n)?s.icon(n):""}var a=r.Intl.DateTimeFormat,d=i.ViewModels.Controls.Lists.Grid,t=d.Format,u=s.date,y=h.attributeEncode,v=h.callFormatter,l=h.isUndefined,g=jQuery,w=ko.unwrap,k=(function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.getName=function(){return"Formatter"},i.prototype.getOrder=function(){return 0},i.prototype.getSafeFormatter=function(n,i){var r,f;switch(n){case t.ShortTime:return u(
a.shortTimePattern);case t.LongTime:return u(a.longTimePattern);case t.ShortDate:return u(a.shortDatePattern);case t.LongDate:return u(a.longDatePattern);case t.MonthDay:return u(a.monthDayPattern);case t.YearMonth:return u(a.yearMonthPattern);case t.CustomDate:return u(i.dateFormat||"");case t.Number:return s.numberFormat(i.numberFormat);case t.TextLookup:return s.textLookup(i.textLookup||{});case t.Icon:return nt;case t.IconLookup:r=i.iconLookup||{};for(f in r)r.hasOwnProperty(f)&&(b(r[f])||delete r[f]);return s.iconLookup(r);case t.SvgIcon:return p.svgIcon;case t.SvgIconLookup:return p.svgIconLookup(i.svgIconLookup||{});case t.PercentageBar:return s.percentageBar(i.percentageBar||{})}return null},i.prototype.getUnsafeFormatter=function(n,i){switch(n){case t.Html:return s.html;case t.TextLookup:return s.textLookup(i.textLookup||{});case t.Uri:return s.uri}return null},i})(o.GridExtension),p;n.FormatterExtension=k;e.defaultPlugins.push(k),(function(n){function t(n){var u=function(n){return n&&
!l(n.type)},e=function(n,t,i){var r="image: "+y(ko.toJSON(n)),u=i&&t?', style: { height:"'+y(t)+'", width: "'+y(i)+'" }':"";return"<span class='fx-grid-formatters-svgicon' data-bind='"+r+u+"'><\/span>"},o=f.prototype.slice.call(arguments,1),t=w(n),h="",i,r;return(t&&!l(t.center)&&t.center&&(h=" fx-grid-svgicon-center"),i="<div class='fx-grid-formatters-svg"+h+"'>",t&&!l(t.svg)&&u(t.svg))?(r="",t.text&&!l(t.text)&&(r="<span class='fx-grid-formatters-svgtext'>"+v(s.text,t.text,o)+"<\/span>"),i+e(t.svg,t.height,t.width)+r+"<\/div>"):u(t)?i+e(t)+"<\/div>":t&&!l(t.text)?i+"<span class='fx-grid-formatters-svgtext'>"+v(s.text,t.text,o)+"<\/span><\/div>":""}function i(t){return function(i){for(var r,u,e=[],f=1;f<arguments.length;f++)e[f-1]=arguments[f];if(r=ko.unwrap(i),h.isNullOrUndefined(t[r])){if(t["##DEFAULT##"])return r=s.text(r),u=t["##DEFAULT##"],u.text&&(u=g.extend({},u,{text:u.text.replace(/##DEFAULT##/g,r)})),v(n.svgIcon,u,e)}else return v(n.svgIcon,t[r],e);return""}}n.svgIcon=t;n.svgIconLookup=
i})(p=n.Formatters||(n.Formatters={}))})(l||(l={})),l}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-selectableRow-selectionCell-col{width:26px;max-width:26px}.azc-grid-selectableRow-selectAll{vertical-align:text-top;margin-left:7px}.azc-grid-selectableRow-selectionCell-wrapper{border-width:1px;border-style:solid;box-sizing:border-box;width:17px;height:17px;display:none}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon{margin-top:2px;margin-left:2px;position:relative}.azc-grid-selectableRow-selectionCell-wrapper .fx-grid-formatters-svgicon svg{vertical-align:top}.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table,.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody,.azc-grid-selectableRow:not(.azc-grid-scrollable):not(.azc-grid-hierarchical) table tbody tr{height:100%}.azc-grid-selectableRow table thead th.azc-grid-selectableRow-overlay-header{width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell{overflow:visible;padding:0;vertical-align:top;width:0}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin{position:relative;overflow:visible;height:100%}.azc-grid-selectableRow table tbody tr td.azc-grid-selectableRow-overlay-cell div.azc-grid-selectableRow-overlay-origin div.azc-grid-selectableRow-overlay-container{position:absolute;top:0;right:0}.azc-grid-selectableRow table tbody tr.azc-external-hovered td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr.fxs-selected td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr:not([aria-disabled=true]):focus td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper,.azc-grid-selectableRow table tbody tr:not([aria-disabled=true]):hover td.azc-grid-selectableRow-selectionCell div.azc-grid-selectableRow-selectionCell-wrapper{display:block}.azc-grid-selectableRow table tbody tr td:first-of-type{border-left:none}.azc-grid-selectableRow table tbody tr td.azc-br-muted:last-of-type,.azc-grid-selectableRow table tbody tr td:last-of-type{border-right:none}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow",["require","exports","f","o","./Viva.Grid1.FocusableRow","./Viva.Grid1","../../../Util/Viva.Util","../../Forms/Viva.CheckBox","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRow.css","MsPortalImpl/Base/Base.KnockoutExtensions.Image"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function g(n){var t=a(n);return t&&t.selected&&!t.selected()}var nt=i.Base,st=nt.Images,w=i.isNullOrUndefined,c=ko.observable,tt=ko.computed,a=ko.dataFor,it=ko.pureComputed,rt=i.disposeDisposable,y=o.Value,p=jQuery,ht=window,h="azc-grid-selectableRow",l="tr[data-grid-selectable=true]:not([aria-disabled=true])",ut="tbody "+l,ct=ut+" td."+h+"-selectionCell",ft=h+"-selectAll",et="11px",b='attr: { "data-grid-selectable": true, "aria-selected": selected() ? "true" : "false", tabindex: selected() || focused() ? $tabIndex() : $focusIndex() }',
k='css: { "fxs-selected": selected() }',lt='css: { "azc-grid-multiselectable": $ctl.getPlugin("'+h+'")._multiselect, '+('"azc-grid-selectable": $ctl.getPlugin("'+h+'")._showSelectionExperience }'),at="<col class='"+h+"-selectionCell-col' />",vt="<th class='"+h+"-selectionCell-header' aria-hidden='true'>"+("<div class='"+ft+"' data-bind='azcCheckBox: $ctl.getPlugin(\""+h+'")._selectAllCheckbox, visible: $ctl.getPlugin("'+h+"\")._canSelectAll'><\/div>")+"<\/th>",d="<td class='"+h+"-selectionCell azc-br-muted' aria-hidden='true'>"+("<div class='"+h+"-selectionCell-wrapper azc-br-default azc-fill-text'>")+("<div data-bind='trustedHtml: $ctl.getPlugin(\""+h+"\")._selectionCellFormat($data)'><\/div>")+"<\/div><\/td>",v,t,ot;(function(n){n.RowSelect="rowSelect";n.RowClick="rowClick"})(v=n.EventTypes||(n.EventTypes={})),(function(n){n[n.Off=0]="Off";n[n.Single=1]="Single";n[n.MultipleAdd=2]="MultipleAdd";n[n.MultipleReplace=3]="MultipleReplace";n[n.AlwaysSingle=4]="AlwaysSingle"})(n.RowSelectionMode||
(n.RowSelectionMode={}));t=n.RowSelectionMode;ot=(function(n){function i(i){var r=this,f;n.call(this);this._disposables=[];this._options=i=i||{};i.mode=i.mode||c(t.Single);i.hideMultiSelectCheckbox=i.hideMultiSelectCheckbox||!1;i.enableSelectableCursor=i.enableSelectableCursor||c(!1);i.hasPreviousSelectableItem=i.hasPreviousSelectableItem||c(!1);i.hasNextSelectableItem=i.hasNextSelectableItem||c(!1);this._enableSelectableCursor=tt((function(){r._updateSelectableCursor()}));f=this._selectAllCheckbox=new o.ViewModel;f.canUserSetIndeterminate(!1);this._multiselect=it((function(){var n=i.mode();return n===t.MultipleAdd||n===t.MultipleReplace}));this._canSelectAll=it((function(){return r._multiselect()&&!i.disableSelectAll&&!r._widget._extensionTrigger("shouldNotAllowSelectAll").some((function(n){return n}))}));this._modeSubscription=i.mode.subscribe((function(n){var f,e,h,o,i,s;if(r._widget&&(f=r._widget.getPlugin(u.FocusableRowExtension.Name),f&&(n===t.Off?f.options.focusable(!1):f.options.focusable(
!0)),n===t.AlwaysSingle||n===t.Single))if(i=r.getSelectedRows(),s=i?i.length:0,i=r.getSelectedRows(),s=i?i.length:0,s>=1)for(o=1;o<s;o++)i[o].selected(!1);else n===t.AlwaysSingle&&(e=r._widget.options.items(),e&&e.length>0&&(h=r._widget.getRowMetadata(e[0]),h.selected(!0)))}))}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.getSelectedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return n.selected.peek()}))},i.prototype.getSelectableRows=function(){var n=this;return this._widget.options.items().filter((function(t){return!n._widget.getRowMetadata(t).disabled()}))},i.prototype.selectAllRows=function(){this.selectRows.apply(this,this.getSelectableRows())},i.prototype.unselectAllRows=function(){this._widget._getAllRowMetadata().forEach((function(n){n.selected(!1)}))},i.prototype.unselectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach(
(function(n){i._widget.getRowMetadata(n).selected(!1)}))},i.prototype.selectRows=function(){for(var i=this,t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach((function(n){i._widget.getRowMetadata(n).selected(!0)}))},i.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t);this._options.mode.valueHasMutated()},i.prototype.afterCreate=function(){this._widget.lifetimeManager.registerForDispose([this._showSelectionExperience,this._modeSubscription,this._enableSelectableCursor]);this._focusableRowPlugin=this._widget.getPlugin(u.FocusableRowExtension.Name);this._updateSelectableCursor()},i.prototype.afterSetTemplates=function(n){var r=this,e=n.getHtmlTemplate("bodyRowsCore"),h=n.getHtmlTemplate("header"),c=n.getHtmlTemplate("colgroup"),l=n.getHtmlTemplate("table"),u=n.getHtmlTemplate("editableBodyRowsCorePerColumn"),f=n.getHtmlTemplate("editableBodyRowsCoreForRow"),o=!w(u)&&!w(f),i="data-bind";e.addAttribute("tr",i,b);e.addAttribute("tr",i,k);l.addAttribute("table",i,lt);
this._showSelectionExperience=tt((function(){var n=r._options.mode(),i=n===t.Off,u=r._options.hideMultiSelectCheckbox,f=n===t.Single||n===t.AlwaysSingle,e=r._widget.options.extensions.first((function(n){return n.getName()==="azc-grid-activateableRow"}));return!i&&!u&&!(f&&e)}));this._showSelectionExperience()&&(e.prepend("tr",d),h.prepend("tr",vt),c.prepend("colgroup",at),o&&(u.prepend("tr",d),f.prepend("tr",d)));o&&(u.addAttribute("tr",i,b),u.addAttribute("tr",i,k),f.addAttribute("tr",i,b),f.addAttribute("tr",i,k));this._selectionCellFormatter=s.Formatters.svgIconLookup({"true":{svg:st.Check({palette:nt.ImagePalette.Inherit}),height:et,width:et}});ko.reactor(this._widget.lifetimeManager,(function(){var n,t,i;r._canSelectAll()&&(t=!0,r._widget._getAllRowMetadata().forEach((function(i){if(!i.disabled()){var r=i.selected();n=n||r;t=t&&r}})),i=r._selectAllCheckbox,t&&n?i.value(y.Checked):n?i.value(y.Indeterminate):i.value(y.Unchecked))}))},i.prototype.getDefaultRowMetadataProperties=function(){return{
selected:c(!1)}},i.prototype.afterAttachEvents=function(){var i=this,n=this;this._disposables.push(this._widget.element.setEvents(["click.azcGrid",ut,function(t){p.contains(n._widget.element[0],this)&&n._onClick(this,t);t.stopPropagation()}],["click.selectionCell",ct,function(t){var i=p(this).closest(l)[0],r=n._widget.getPlugin(u.FocusableRowExtension.Name);t.ctrlKey=!0;n._changeSelection(1,i,t,n._multiselect());r._focusRow(i,a(i));t.stopPropagation()}],["keydown.azcGrid",function(i){var r=p(i.target),s=r[0],d=a(s),o=d&&d.selected,h,k,nt=n._widget._itemsPerKeyboardPage(),e=f.Widget.getModifierKeys(i),c=!0,v,y,b;if(n._options.mode()!==t.Off&&!u.FocusableRowExtension.isEditableControl(r)){switch(i.which){case 32:k=ht.document.activeElement;(e===f.ModifierKeys.None||e===f.ModifierKeys.Ctrl&&r.is("tr[data-grid-selectable]")&&(i.target===k||p.contains(r[0],k)))&&(v=a(r[0]),v&&v.selected&&v.selected()&&(i.ctrlKey=!0),n._changeSelection(2,r[0],i));break;case 65:e===f.ModifierKeys.Ctrl?n._canSelectAll(
)&&n.selectAllRows():c=!1;break;case 68:e===f.ModifierKeys.Ctrl?n.unselectAllRows():c=!1;break;case 38:case 40:n._multiselect()&&e===f.ModifierKeys.Shift&&(y=i.which===38?r.prevAll(l)[0]:r.nextAll(l)[0],o&&!o()&&n._changeSelection(3,s,i,!1,!0),w(y)||g(y)&&n._changeSelection(3,y,i,!1,!0));break;case 33:case 34:n._multiselect()&&e===f.ModifierKeys.Shift&&(b=i.which===33?r.prevAll(l):r.nextAll(l),h=b.length<nt-1?b:b.slice(0,nt-1),o&&!o()&&n._changeSelection(3,s,i,!1,!0),h.each((function(t,r){g(r)&&n._changeSelection(3,r,i,!1,!0)})));break;case 36:case 35:n._multiselect()&&e===f.ModifierKeys.Shift&&(h=i.which===36?r.prevAll(l):r.nextAll(l),n.unselectAllRows(),o&&!o()&&n._changeSelection(3,s,i,!1,!0),h.each((function(t,r){g(r)&&n._changeSelection(3,r,i,!1,!0)})));break;default:c=!1}c&&(i.stopPropagation(),i.preventDefault())}}],["click.azcGridSelectAll","."+ft,function(){if(i._canSelectAll())switch(i._selectAllCheckbox.value()){case y.Checked:i.selectAllRows();break;case y.Unchecked:i.unselectAllRows(
)}}]))},i.prototype.getOrder=function(){return 20},i.prototype.getDependencies=function(){return[new u.FocusableRowExtension]},i.prototype.beforeDestroy=function(){rt(this._disposables);this._disposables=[]},i.prototype.getName=function(){return i.Name},i.prototype.getAdditionalColumns=function(){var n=0;return this._showSelectionExperience()&&(n+=1),n},i.prototype._changeSelection=function(n,i,r,f,o){var k;f===void 0&&(f=!1);o===void 0&&(o=!1);var p=this.options.mode(),l,d=this.options.disableRequireSingleModeAssistKey?this.options.disableRequireSingleModeAssistKey.peek():!1,g=this._widget.getPlugin(u.FocusableRowExtension.Name);if(!this._widget._extensionTrigger("shouldNotChangeSelection",i,r).some((function(n){return!!n}))){switch(p){case t.Off:return;case t.Single:case t.AlwaysSingle:l=!1;break;case t.MultipleAdd:l=!0;break;case t.MultipleReplace:l=r.ctrlKey||r.shiftKey;break;default:throw new Error("Unknown selection mode: "+p+".");}f&&(l=!0);var c=a(i),s=null,h=[],nt=c.selected&&c.
selected(),w,b=-1,y;if(l)nt?h=[c]:s=c;else{for(h=this.getSelectedRows(),y=h.length-1;y>=0;y--)k=h[y],k!==c||(b=y);b<0?s=c:p===t.Single&&(d||r.ctrlKey||r.shiftKey)||(p===t.Single?(h.splice(b,1),s=c):h.splice(b,1))}(s||h.length>0)&&(w={selected:s,unselected:h,_reason:n},this._widget.trigger("beforeRowSelect",e.cloneEvent(r,"beforeRowSelect"),w),h.forEach((function(n){n.selected(!1)})),s&&s.selected&&(s.selected(!0),o&&g.focusRowByRowMetadata(s)),this._widget.trigger(v.RowSelect,e.cloneEvent(r,v.RowSelect),w),this._widget.options.events("select",w))}},i.prototype.previous=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.previous(this.getSelectedRows()[0]);else throw new Error("Previous selectable cursor method will work only when enableSelectableCursor option is set to true.");return Q()},i.prototype.next=function(){if(this.options.enableSelectableCursor())this._focusableRowPlugin.next(this.getSelectedRows()[0]);else throw new Error("Next selectable cursor method will work only when enableSelectableCursor option is set to true.");
return Q()},i.prototype._updateSelectableCursor=function(){var t=this,n;this._widget&&(n=this._widget.getPlugin(u.FocusableRowExtension.Name),this._options.enableSelectableCursor()?(n.options.focusableCursorEnabled=this._options.enableSelectableCursor,n.options.focusableCursorOptions={wrapFocus:c(!1),hasPreviousFocusRow:this.options.hasPreviousSelectableItem||c(!1),hasNextFocusRow:this.options.hasNextSelectableItem||c(!1)},this._triggeredEventRowFocus||this._disposables.push(this._triggeredEventRowFocus=this._widget.element.setEvents(["rowFocus.azcGrid",function(n,i){var r=t.getSelectedRows();r&&r.length>0&&(p(i.target[0]).click(),n.stopPropagation())}]))):(this._options.hasPreviousSelectableItem(!1),this._options.hasNextSelectableItem(!1),n.options.focusableCursorEnabled(!1),n.options.focusableCursorOptions.wrapFocus(!0),n.options.focusableCursorOptions.hasPreviousFocusRow(!1),n.options.focusableCursorOptions.hasNextFocusRow(!1),this._triggeredEventRowFocus&&(rt(this._triggeredEventRowFocus),
this._triggeredEventRowFocus=null)))},i.prototype._onClick=function(n,t){var i={item:n,rowMetadata:a(n),clientX:t.clientX,clientY:t.clientY};this._widget.trigger(v.RowClick,e.cloneEvent(t,v.RowClick),i,t.target);this._widget.options.events(v.RowClick,i);this._changeSelection(4,n,t)},i.prototype._selectionCellFormat=function(n){var t;return this._showSelectionExperience()&&(t=this._selectionCellFormatter(n.selected())),t},i.Name=h,i})(f.Extension);n.SelectableRowExtension=ot})(h||(h={})),h}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-editableRow .azc-grid-editableRow-edited td:first-child{box-shadow:inset 3px 0 0 0 #c84fd7}.azc-grid-editableRow .azc-grid-editableRow-deleted{display:none}.azc-grid-editableRow table tbody.azc-grid-editableRow-addSection:not(.azc-grid-editableRow-placement-top) tr.azc-grid-row td{border-top-width:0}.azc-grid-editableRow table tbody.azc-grid-editableRow-addSection.azc-grid-editableRow-placement-top tr.azc-grid-row td{border-bottom-width:0}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow",["require","exports","f","u","o","a","./Viva.Grid1.FocusableRow","./Viva.Grid1","./Viva.Grid1.SelectableRow","../../../Util/Viva.Util","MsPortalImpl/Widgets/Widgets.Common","MsPortalImpl/Base/Base.KeyboardHelper","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.EditableRow.css"],(function(n,t,i,r,u,f,e,o,s,h,c,l){"use strict";var a;return (function(n){function ii(n){return t(n).parent().hasClass(g)?0:1}function et(n){var i=t(n).parent(),r;return r=i.hasClass(g)?i.siblings(it).find(d).first():i.siblings(it).find(d).last(),r.find("td")}function ot(n){var i=t(n);return!i.find(".azc-validatableControl-invalid").length&&!i.find(".azc-validatableControl-pending").length}function st(n){var i=t(n);return!!i.find(".azc-validatableControl-pending").length}function ht(n,t){ot(n)?t.resolve(!0):st(n)?setTimeout((function(){ht(n,t)}),50):t.resolve(!1)}function ri(n){var t=Q.defer();return ht(n,t),t.promise}function ui(
n){return n.rowMetadata&&n.rowMetadata.editState()!==0}function ct(n){var i=t(n),r=i.find("input, select, textarea"),u=r.serializeArray(),f=k(n),e=!i.parent("tbody."+w).length;return{rowMetadata:f,data:u,existingItem:e}}var lt=i,p=lt.isNullOrUndefined,v=i.Base.EventTypes,t=jQuery,tt="azc-grid-selectableRow",d=".azc-grid-row",at=d+":not([aria-disabled=true])",it="tbody.azc-grid-groupdata",f="azc-grid-editableRow",a="azc-grid-editableRow-row",vt="."+a,yt=a+" azc-grid-editableRow-fullRow",w="azc-grid-editableRow-addSection",pt="."+w,b=pt+" "+vt,wt=a+" azc-grid-editableRow-perColumn",g="azc-grid-editableRow-placement-top",rt="azc-br-top-hovered",ut="azc-br-bottom-hovered",ft="<tbody role='rowgroup' class='"+w+"' data-bind='css: { \""+g+'": $ctl.getPlugin("'+f+"\").options.placement === MsPortalFx.ViewModels.Controls.Lists.Grid.EditableRowPlacement.Top }'>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+f+'")._orderedCreatedItems } --><!-- /ko -->')+"<\/tbody>",bt="<!-- ko with: $ctl.getRowMetadata($data) --><!-- ko context: { $disabled: $data.disabled } --><!-- ko if: editing -->"+
('<!-- ko template: { name: $ctl.getPlugin("'+f+"\")._editablePerColumn() ? 'editableBodyRowsCorePerColumn' : 'editableBodyRowsCoreForRow', data: $data } --><!-- /ko -->")+"<!-- /ko --><!-- ko ifnot: editing --><!-- ko template: 'bodyRowsCore' --><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko -->",kt="<td role='gridcell' class='azc-grid-cell azc-br-muted' data-bind='attr: { colspan: $ctl._options.columns().length }, trustedHtml: $ctl.getPlugin(\""+f+"\")._editableRowFormat($data)'><\/td>",dt="<!-- ko template: { name: 'editableBodyCellPerColumn', foreach: $vm.columns } --><!-- /ko -->",gt="<td role='gridcell' aria-readonly='false' data-bind='trustedHtml: $ctl.getPlugin(\""+f+'")._editableCellFormat($parent, $data), attr: { "class": "azc-grid-cell azc-br-muted " + cssClass }\'><\/td>',ni='css: { "azc-grid-editableRow-edited": $ctl.getPlugin("'+f+'")._isRowEdited($data), "azc-grid-editableRow-deleted": $ctl.getPlugin("'+f+'")._isRowDeleted($data) }',y=ko.observable,ti=ko.observableArray,k=
ko.dataFor,nt=ko.computed,fi=(function(n){function i(t){var i=this;n.call(this);this._options=t=t||{};t.placement=t.placement||0;this._createdItems=ti();this._orderedCreatedItems=nt((function(){var r=i._createdItems(),n,t,u;return r.length<=1?r:(n=r.slice(),t=n.firstIndex((function(n){var t=i._widget.getRowMetadata(n);return t&&t.emptyRow()})),t!==-1&&t!==n.length-1&&(u=n.splice(t,1),n.push(u[0])),i.options.placement===1&&n.reverse(),n)}));this._editablePerColumn=nt({read:function(){var n=i._widget.options.columns().some((function(n){return n.editableFormatter!==r})),t=!!i.options.editableFormatter;if(t&&n)throw new Error("The editableFormatter cannot be in columns when used for one row.");return n},deferEvaluation:!0})}return __extends(i,n),u.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),u.defineProperty(i.prototype,"createdItems",{get:function(){return this._createdItems},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=
function(n){var e=n.getTemplate.bind(n),t=n.setTemplate.bind(n),i=n.getHtmlTemplate.bind(n),o=e("body"),s=i("bodyRowsCore"),r,u,f;s.addAttribute("tr","data-bind",ni);r=e("bodyRowsCore");t("editableBodyRowsCoreForRow",r);u=i("editableBodyRowsCoreForRow");u.addAttribute("tr","class",yt);u.html("tr",kt);t("editableBodyRowsCorePerColumn",r);f=i("editableBodyRowsCorePerColumn");f.addAttribute("tr","class",wt);f.html("tr",dt);t("editableBodyCellPerColumn",gt);t("bodyRows",bt);t("body",this.options.placement===1?ft+o:o+ft)},i.prototype.getDefaultRowMetadataProperties=function(){return{editState:y(0),editing:y(!1),validationResult:y(0),emptyRow:y(!1),_addedOnce:!1}},i.prototype.modifyRowNumber=function(){var n=this,t=this._widget._getAllRowMetadata().filter((function(n){return n.editState()===3})).length,i=this.createdItems().filter((function(t){return!n._widget.getRowMetadata(t).emptyRow()})).length;return i-t},i.prototype.afterAttachEvents=function(){var n=y(),f=!1,o=!1,d=!1,i=this,u=this._widget,
e=u.element;e.on("mouseenter",b,this._onAddRowMouseEnter=function(){e.hasClass(tt)&&et(this).addClass(ii(this)===0?rt:ut)}).on("mouseleave",b,this._onAddRowMouseLeave=function(){e.hasClass(tt)&&et(this).removeClass(rt+" "+ut)}).on("focusout","tr."+a,this._onFocusOut=function(){if(!o){var n=this,r=k(n);r&&r.editing&&r.editing.peek()&&setTimeout((function(){var r=document.activeElement,u=function(){try{o=!0;i._rowAdd(n)}finally{o=!1}};n===r||t.contains(n,r)||(st(n)?ri(n).then((function(n){n&&u()})):u())}),10)}}).on("click",at,this._onClick=function(r){if(!d&&!u.$disabled()){var nt=this,a=k(nt),tt=t(nt),ut=!!tt.closest("tbody."+w).length,et=u.getPlugin(s.SelectableRowExtension.Name),ft=a,o,l=void 0,it,y,b=r.clientX,g=r.clientY,rt=void 0;if(!a.editing.peek()&&(i.options.allowEditExistingItems&&!ut||i.options.allowEditCreatedItems&&ut)){(p(b)||p(g))&&(rt=t(r.target).position(),b=rt.left,g=rt.top);l=this;do l=l.previousSibling;while(l!==null&&k(l)!==a.item);if(a.editing(!0),l){do l=l.nextSibling
while(l!==null&&l.nodeName.toLowerCase()!=="tr");l&&(r.target=l,y=l,c.waitForBindings(e[0]).then((function(){if(i._onClick){for(o=document.elementFromPoint(b,g);o;)if(o=h.findContainingControl(o),t.contains(y,o))if(o&&h.executeSetFocusOn(o)){try{f=!0;d=!0;n(y);it=h.cloneEvent(r,v.click);it.clientX=b;it.clientY=g;t(document.activeElement).trigger(it)}finally{f=!1;d=!1}break}else break;else break;n.peek()!==y&&n(y)}})),ft.selected&&(et._changeSelection(4,y,r),r.stopPropagation(),r.preventDefault()))}else t.contains(nt,document.activeElement)||c.waitForBindings(u.element[0]).then((function(){if(i._onClick){for(o=document.elementFromPoint(b,g);o;)if(o=h.findContainingControl(o),t.contains(nt,o)){if(o&&h.executeSetFocusOn(o)){try{f=!0;n(tt[0])}finally{f=!1}break}}else break;n.peek()!==tt[0]&&n(tt[0])}}))}else a.editing.peek()&&ft.selected&&r.ctrlKey&&a.editing(!1)}});if(u._addDisposablesToCleanUp(nt((function(){var i=n();f||p(i)||h.setFocusToFirstFocusableChild(t(i),(function(n){return t(n).attr(
h.Constants.dataEditableAttribute)?n:null}))}))),this.options.automaticRowChangeEventListener)u.element.on("keydown keyup change","tr."+a+" input, tr."+a+" select, tr."+a+" textarea",this._onRowChange=function(n){var u=!1,e=t(n.target),o=n.target,f,s;l.isNonWrittenCharacter(n.which)||(n.type===v.keydown||n.type===v.keyup||n.type===v.input?(f=e.data("editablerow-previous"),n.type===v.keydown&&f===r?e.data("editablerow-previous",o.value):(n.type===v.keyup||n.type===v.input)&&(u=o.value!==(f||""))):u=!0,u&&(s=t(this).closest("tr."+a),i._rowEdit(s[0],n.type)))})},i.prototype.getOrder=function(){return 14},i.prototype.getDependencies=function(){return[new e.FocusableRowExtension]},i.prototype.beforeDestroy=function(){var n=this._widget.element,f=this._onFocusOut,t,i,r,u;f&&(n.off("focusout",f),this._onFocusOut=null);t=this._onClick;t&&(n.off("click",t),this._onClick=null);i=this._onRowChange;i&&(n.off("keydown keyup change",i),this._onRowChange=null);r=this._onAddRowMouseEnter;r&&(n.off("mouseenter",
b,r),this._onAddRowMouseEnter=null);u=this._onAddRowMouseLeave;u&&(n.off("mouseleave",b,u),this._onAddRowMouseLeave=null)},i.prototype.shouldRetainRowMetadata=function(n){return this._createdItems().some((function(t){return n.item===t}))},i.prototype.getName=function(){return i.Name},i.prototype._rowAdd=function(n){var r=this._widget,u=!0,i=ct(n),f={targets:t(n).find(">td").children(),editableRow:i,preventExitEditing:function(){u=!1}};(i.existingItem||ui(i))&&!p(i.rowMetadata)&&ot(n)&&(i.rowMetadata._addedOnce=!0,r.trigger("rowAdd",null,f),r.options.events("rowAdd",f),u&&i.rowMetadata.editing(!1))},i.prototype._rowEdit=function(n,i){var r={targets:t(n).find(">td").children(),editableRow:ct(n),type:i};r.editableRow.rowMetadata.editState(r.editableRow.existingItem?2:1);this._widget.trigger("rowEdit",null,r);this._widget.options.events("rowEdit",r)},i.prototype._editableRowFormat=function(n){var t=this.options.editableFormatter;return t?t({rowMetadata:n}):""},i.prototype._editableCellFormat=
function(n,t){return t.editableFormatter?t.editableFormatter(n.item[t.itemKey],{item:n.item,rowMetadata:n,column:t}):""},i.prototype._isRowEdited=function(n){return n.editState()!==0},i.prototype._isRowDeleted=function(n){return n.editState()===3},i.Name=f,i})(o.Extension);n.EditableRowExtension=fi})(a||(a={})),a}));define("MsPortalImpl.Controls/Controls/Base/Formatters",["require","exports","f","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters.Helpers","MsPortalFx/Globalization","MsPortalImpl/Base/Base.Sanitization","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(t){function nt(n,t,i,f){var s=!!f,o;switch(t){case r.ShortTime:return u.date(e.DateTimeFormat.shortTimePattern);case r.LongTime:return u.date(e.DateTimeFormat.longTimePattern);case r.ShortDate:return u.
date(e.DateTimeFormat.shortDatePattern);case r.LongDate:return u.date(e.DateTimeFormat.longDatePattern);case r.MonthDay:return u.date(e.DateTimeFormat.monthDayPattern);case r.YearMonth:return u.date(e.DateTimeFormat.yearMonthPattern);case r.CustomDate:return u.date(i.dateFormat||"");case r.TextLookup:return u.textLookup(i.textLookup||{});case r.Text:return u.text;case r.Number:return u.numberFormat(i.numberFormat);case r.Icon:return tt;case r.HtmlBindings:return u.htmlBindings(it(i.htmlBindingsType,i.htmlBindingsTemplate,s),rt(n,i.htmlBindingsType,i.htmlBindingsData));case r.PercentageBar:return u.percentageBar(i.percentageBar||{})}switch(t){case r.Html:o=u.html;break;case r.IconLookup:o=u.iconLookup(i.iconLookup||{});break;case r.Uri:o=u.uri;break;default:o=u.text}return s||(o=ut(o)),o}function tt(n){var t=ko.unwrap(n),i=f.isUndefined,r=t&&!i(t.text)&&!i(t.uri)?t.uri:t;return o.sanitizeUri(r+"")?u.icon(n):""}function it(t,i,r){var u=i||"";switch(t){case c.MultiselectDropDown:case c.TextBox:
case c.CheckBox:case c.DropDown:case c.CheckBoxRowSelection:return"<div data-bind='formElement: $data'><\/div>"}return r?u:h.sanitizeHTML(new y(u,n)).sanitizedMarkup}function rt(n,t,i){switch(t){case c.MultiselectDropDown:return l.multiselectDropDown(n,i);case c.TextBox:return l.textBox(n,i);case c.CheckBox:return l.checkBox(n,i);case c.DropDown:return l.dropDown(n,i);case c.CheckBoxRowSelection:return l.rowSelectionCheckBox(n);case c.Default:default:return function(n,t,i){return{value:t,settings:i}}}}function ut(t){return function(i,r){switch(t){case u.uri:r=r||{};r.cssClass="msportalfx-link-primary"}var f=t(i,r);return h.sanitizeHTML(new y(f,n)).sanitizedMarkup}}var y=s.ProvenanceContainer,p=i.ViewModels.Controls.Lists.Grid,r=p.Format,c=p.HtmlBindingsType,a=i.ViewModels.Forms,w=a.CheckBox.ViewModel,b=a.DropDown.ViewModel,k=a.GroupDropDown,d=a.MultiSelectDropDown,g=a.TextBox.ViewModel,v={invalidBindingData:"The formatOptions property was not correctly set. The htmlBindingsData needs to be specified correctly for rendering the {0}."},
l;(function(n){function r(n,r){return function(u,f,e){var o,s=i(f),h,c;if(!u||!r||!ko.isObservable(r.groups))throw new Error(v.invalidBindingData.format("MultiselectDropDownFormField"));return h=ko.observable(s()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return s},createdByBaseFormClass:!0},o=new d.ViewModel(n,{label:ko.observable(r.label||""),groups:r.groups,multiselect:r.multiselect,validations:ko.observableArray(r.validations),infoBalloonContent:ko.observable(r.infoBalloonContent)}),o.maxSelectAllowed=r.maxSelectAllowed,o.multiItemsDisplayFormat=r.multiItemsDisplayFormat,o.multiItemsMaxDisplayFormat=r.multiItemsMaxDisplayFormat,o.valueSeparator=r.valueSeparator,o.displaySeparator=r.displaySeparator,o._setEditScopeAccessors(c),t(n,o,s,e&&e.rowMetadata,r&&r.validate),o}}function u(n,r){return function(u,f,e){var o=i(f);if(!u||!r||!ko.isObservable(r.items))throw new Error(v.invalidBindingData.format("GroupDropDownFormField"));var h=ko.observable(o(
)),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return o},createdByBaseFormClass:!0},s=new k.ViewModel(n,{label:ko.observable(r.label||""),items:r.items,validations:ko.observableArray(r.validations),infoBalloonContent:ko.observable(r.infoBalloonContent),filter:r.filter,filterPlaceholder:r.filterPlaceholder,customFilter:r.customFilter,multiselect:r.multiselect,selectAll:r.selectAll,selectAllOverride:r.selectAllOverride});return s._setEditScopeAccessors(c),t(n,s,o,e&&e.rowMetadata,r&&r.validate),s}}function f(n,r){return function(u,f,e){var s=i(f),o,h=ko.observable(s()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return s},createdByBaseFormClass:!0};return o=new g(n,{label:ko.observable(r&&r.label?r.label:""),validations:ko.observableArray(r?r.validations:null),emptyValueText:ko.observable(r?r.emptyValueText:null),infoBalloonContent:ko.observable(r?r.infoBalloonContent:null)}),o._setEditScopeAccessors(c),t(n,o,s,e&&e.rowMetadata,
r&&r.validate),o}}function e(n,r){return function(u,f,e){var o=i(f),h=ko.observable(o()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return o},createdByBaseFormClass:!0},s=new w(n,{label:ko.observable(r&&r.label?r.label:""),validations:ko.observableArray(r?r.validations:null),infoBalloonContent:ko.observable(r?r.infoBalloonContent:null),inlineLabel:!0});return s._setEditScopeAccessors(c),t(n,s,o,e&&e.rowMetadata,r&&r.validate),s}}function o(n,r){return function(u,f,e){var o=i(f),s,h,c;if(!r||!ko.isObservable(r.options))throw new Error(v.invalidBindingData.format("DropDownFormField"));return o()===undefined&&o(r.options()[0].value),h=ko.observable(o()),c={getOriginalObservable:function(){return h},getEditableObservable:function(){return o},createdByBaseFormClass:!0},s=new b(n,{label:ko.observable(r.label||""),options:r.options,validations:ko.observableArray(r.validations),infoBalloonContent:ko.observable(r.infoBalloonContent)}),s._setEditScopeAccessors(
c),t(n,s,o,e&&e.rowMetadata,r&&r.validate),s}}function s(n){return function(t,i,r){i=r.rowMetadata.selected;var f=new w(n),u=!1,e=!0;return i.subscribe(n,(function(n){try{u=!0;f.value(n)}finally{u=!1}})),f.value.subscribe(n,(function(n){if(!e&&!u)try{u=!0;f.value(!n)}finally{u=!1}e=!1})),f}}function t(n,t,i,r,u){if(t.rowMetadata=r,r.editState&&r.editState()===0){t.performValidation(!1);var f=n.createChildLifetime();i.subscribe(f,(function(){r.editState()!==0&&(t.performValidation()||t.performValidation(!0),t.ensureValidation())}));u&&ko.isObservable(u)&&(u.subscribe(n,(function(){t.validate(t.validate()+1)})),r.editing.subscribe(f,(function(n){n||f.dispose()})))}}function i(n){return ko.isObservable(n)?n:ko.observable(n)}n.multiselectDropDown=r;n.groupDropDown=u;n.textBox=f;n.checkBox=e;n.dropDown=o;n.rowSelectionCheckBox=s})(l=t.ControlViewModels||(t.ControlViewModels={}));t.getFormatter=nt})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Viva.DockedBalloon.css",["require","exports",
"module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-dockedballoon.azc-dockedballoon-info{display:inline-block;text-align:center;width:20px;height:20px;cursor:pointer;position:relative}.azc-dockedballoon.azc-dockedballoon-info .azc-dockedballoon-anchor{width:100%;height:100%;stroke:none;outline:0}.azc-dockedballoon.azc-dockedballoon-info .azc-dockedballoon-anchor img{display:inline-block;margin-top:5px}.azc-dockedballoon-requiredwidget.azc-dockedballoon-required{display:inline-block;text-align:center;width:11px;height:6px;cursor:pointer;position:relative}.azc-required-anchor{height:6px;width:6px;margin-right:5px}.azc-required-anchor svg{vertical-align:4px}.azc-dockedballoon-anchor-target{height:9px;width:9px;margin-left:3px}.azc-dockedballoon-validation{display:inline-block;vertical-align:top;box-sizing:border-box}.azc-dockedballoon-validation .azc-dockedballoon-anchor{cursor:pointer;font-weight:700;color:#fff;font-size:12px;text-align:center;text-decoration:none;display:block}.azc-dockedballoon-validation .azc-dockedballoon-anchor svg{display:none}.azc-dockedballoon-validation .azc-dockedballoon-anchor:before{content:"!"}.azc-dockedballoon-required{fill:#e81123}')})
);define("Viva.Controls/Controls/Viva.DockedBalloon",["require","exports","o","./Viva.Balloon","./Base/Viva.Base","MsPortalImpl.Controls/Controls/Base/WidgetBinding","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","MsPortalImpl/Generated/SvgStartupDefinitions","../Util/Viva.Util","../../_generated/Less/Viva.Controls/Controls/Viva.DockedBalloon.css"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function k(t){for(var r,u=t.findByClassName(n.classes.anchor),i=0;i<u.length;i++)r=f.contextFor(u[i]),r.$vm.balloonVisible(!1),r.$ctl._balloonPinned=!1}var y,p;n.classes={widget:"azc-dockedballoon",requiredWidget:"azc-dockedballoon-requiredwidget",anchor:"azc-dockedballoon-anchor",anchorTarget:"azc-dockedballoon-anchor-target",balloon:"azc-dockedballoon-balloon",info:"azc-dockedballoon-info",required:"azc-dockedballoon-required",validation:"azc-dockedballoon-validation azc-bg-default",balloonVisible:"azc-dockedballoon-balloonVisible"};var h=window,t=jQuery,c=n.classes,
l="click",w="scroll.dockedBalloon",b="<div class='"+n.classes.anchor+"' data-bind='attr: { \"aria-label\": data.content }' aria-haspopup='true'><!-- ko if: $ctl._isImageShown() -->"+("<div class='fxs-fill-secondary azc-fill-hovered-heavy "+n.classes.anchorTarget+"' data-bind='css: { \"azc-fill-heavy\": data.balloonVisible() }'>")+"<svg viewBox='0 0 9 9' focusable='false'><circle cx='4.5' cy='4.5' r='4.5'/><rect x='4' y='4' class='azc-fill-white' width='1' height='3'/><rect x='4' y='2' class='azc-fill-white' width='1' height='1'/><\/svg><\/div><!-- /ko --><!-- ko if: $ctl._isCheckPopulated() --><svg viewBox='0 0 16 16' focusable='false'><path class=\"msportalfx-svg-c14\" d=\"M0.632,8.853L0.101,8.278C-0.037,8.126-0.037,7.885,0.123,7.74l1.534-1.418 c0.073-0.066,0.16-0.101,0.255-0.101c0.108,0,0.204,0.044,0.276,0.123l4.218,4.523l7.258-9.296c0.073-0.094,0.182-0.145,0.298-0.145 c0.088,0,0.167,0.029,0.233,0.081l1.659,1.28c0.081,0.059,0.13,0.145,0.145,0.248c0.007,0.101-0.015,0.204-0.081,0.276L6.595,15.246 L0.632,8.853z\" /><\/svg ><!-- /ko --><!-- ko if: $ctl._isRequired() --><div data-bind='image: $ctl._requiredIcon' class='azc-required-anchor'><\/div><!-- /ko --><\/div>"+
("<div role='tooltip' class='"+n.classes.balloon+"'><\/div>"),a=[],v={info:{showImage:!0,offsets:{horizontal:{preferred:0,alternate:0},vertical:{preferred:12,alternate:12}},altText:"Info"},validation:{showImage:!1,offsets:{horizontal:{preferred:-8,alternate:-8},vertical:{preferred:0,alternate:0}}},required:{showImage:!1,offsets:{horizontal:{preferred:-8,alternate:-8},vertical:{preferred:0,alternate:0}},required:!0}};a[0]="info";a[2]="validation";a[3]="required";y=(function(n){function t(){n.apply(this,arguments);this.type=0;this.position=ko.observable(0);this.content=ko.observable("");this.link=ko.observable();this.balloonVisible=ko.observable(!1);this.stopClickPropagation=ko.observable(!0);this.isTabbable=ko.observable(!0)}return __extends(t,n),t})(u.ViewModel);n.ViewModel=y;p=(function(u){function f(i,r,f){u.call(this,i,r,t.extend({viewModelType:y},f));this._requiredIcon=o.Content.SvgStartup.requiredField;this._typeString=a[this.options.type];this._balloonHoverTimeoutHandle=null;this.options.
type===3?this.element.addClass(n.classes.requiredWidget):this.element.addClass(n.classes.widget);this.element.addClass(c[this._typeString]).html(b).find("."+n.classes.balloon).addClass(c[this._typeString]);this._bindDescendants();this._initializeBalloonWidget();this._initializeKoDependencies();this._attachEvents()}return __extends(f,u),f.prototype.dispose=function(){if(!this._checkExistsOrRegisterDestroyId(u.prototype.dispose)){this._balloonWidget&&(this._beforeClickedEventHandler&&(this._balloonWidget.element[0].removeEventListener(l,this._beforeClickedEventHandler),this._beforeClickedEventHandler=null),this._balloonWidget.dispose(),this._balloonWidget=null);this._balloonViewModel&&(this._balloonViewModel=null);this._detachEvents();this._cleanElement();for(var n in c)this.element.removeClass(c[n]);u.prototype.dispose.call(this)}},i.defineProperty(f.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype._initializeKoDependencies=function()
{var t=this;ko.computed(this.lifetimeManager,(function(){t._balloonWidget.options.link(t.options.link())}));this._balloonViewModel.visible.subscribe(this.lifetimeManager,this.options.balloonVisible);ko.computed(this.lifetimeManager,(function(){t._balloonWidget.options.visible()||(t._balloonPinned=!1)}));ko.reactor(this.lifetimeManager,(function(){t.tabindex(t.options.isTabbable()?0:-1)}));this.$tabIndex.subscribeAndRun(this.lifetimeManager,(function(i){t.element.find("."+n.classes.anchor).attr("tabindex",i)}));this.options.balloonVisible.subscribe(this.lifetimeManager,(function(i){if(t._scrollableParents&&(t._scrollableParents.off(w,t._parentScrollHandler),t._scrollableParents=null,t._parentScrollHandler=null),i){t._balloonWidget.options.box(r.getBox(t.element.find("."+n.classes.anchor)));t._scrollableParents=s.getScrollableParents(t.element,!0);t._scrollableParents.on(w,t._parentScrollHandler=function(){t._scrollOrResizeWindow()})}t._balloonWidget.options.visible(i);t.element.toggleClass(n.classes.
balloonVisible,i)}));ko.isObservable(this.options.content)?this.options.content.subscribe(this.lifetimeManager,(function(n){t._balloonWidget.options.content(n)})):this._balloonWidget.options.content(this.options.content);this.$disabled.subscribe(this.lifetimeManager,(function(n){n!==t._balloonWidget.options.disabled()&&(t._balloonWidget.options.disabled(n),t._balloonPinned=!1,n&&t.options.balloonVisible()&&t.options.balloonVisible(!1))}));this.options.position.subscribe(this.lifetimeManager,(function(n){t._balloonWidget.options.position(n)}))},f.prototype._initializeBalloonWidget=function(){var u=this,f=this.element.find("div."+n.classes.balloon),i=this._balloonViewModel=new r.ViewModel;i.visible(this.options.balloonVisible());i.content(ko.unwrap(this.options.content));i.position(this.options.position());i.horizontalOffset=this._getOffset("horizontal");i.verticalOffset=this._getOffset("vertical");i.closeOtherBalloons=!0;this._balloonWidget=new r.Widget(f,this._balloonViewModel);f[0].addEventListener(
l,this._beforeClickedEventHandler=function(n){(n.target===u.element[0]||t.contains(u.element[0],n.target))&&(i.visible(!1),u._balloonPinned=!1,n.stopPropagation())},!0)},f.prototype._attachEvents=function(){var i=this;this._detachEvents();this._mouseEnterHandler=function(){i._mouseEnter()};this._mouseLeaveHandler=function(){i._mouseLeave()};this._anchorClickHandler=function(n){n.preventDefault();i._anchorClick(n)};this._anchorFocusInHandler=function(){i._anchorFocusIn()};this._anchorFocusOutHandler=function(){i._anchorFocusOut()};this._keyDownHandler=function(n){i._keyDown(n)};this.element.find("."+n.classes.anchor).on(l,this._anchorClickHandler);this.element.on("focusin",this._anchorFocusInHandler).on("focusout",this._anchorFocusOutHandler).on("keydown",this._keyDownHandler);this.element.on("mouseenter",this._mouseEnterHandler).on("mouseleave",this._mouseLeaveHandler);t(h).on("resize",this._resizeEventHandler=function(){i._scrollOrResizeWindow()});t(h).on("mousedown",this._documentMouseDownHandler=
function(n){i._documentMouseDown(n)})},f.prototype._detachEvents=function(){var i=this.element.find("."+n.classes.anchor);this._mouseEnterHandler&&(this.element.off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null);this._mouseLeaveHandler&&(this.element.off("mouseleave",this._mouseLeaveHandler),this._mouseLeaveHandler=null);this._anchorClickHandler&&(i.off(l,this._anchorClickHandler),this._anchorClickHandler=null);this._anchorFocusInHandler&&(this.element.off("focusin",this._anchorFocusInHandler),this._anchorFocusInHandler=null);this._anchorFocusOutHandler&&(this.element.off("focusout",this._anchorFocusOutHandler),this._anchorFocusOutHandler=null);this._keyDownHandler&&(this.element.off("keydown",this._keyDownHandler),this._keyDownHandler=null);this._resizeEventHandler&&(t(h).off("resize",this._resizeEventHandler),this._resizeEventHandler=null);this._documentMouseDownHandler&&(t(h).off("mousedown",this._documentMouseDownHandler),this._documentMouseDownHandler=null)},f.
prototype._mouseEnter=function(){var n=this;this._balloonPinned||this._balloonHoverTimeoutHandle||(this._balloonHoverTimeoutHandle=h.setTimeout((function(){n._balloonWidget&&!n._balloonWidget.options.disabled()&&n.options.balloonVisible(!0);n._clearBalloonHoverTimeout()}),200))},f.prototype._anchorClick=function(n){n.preventDefault();this.options.stopClickPropagation()&&n.stopPropagation();this._balloonPinned||this._balloonWidget.options.disabled()?(this.options.balloonVisible(!1),this._balloonPinned=!1):(this.options.balloonVisible(!0),this._balloonPinned=!0)},f.prototype._mouseLeave=function(){this._clearBalloonHoverTimeout();this._balloonPinned||this.options.balloonVisible(!1)},f.prototype._keyDown=function(n){(n.keyCode===13||n.keyCode===32)&&(n.stopImmediatePropagation(),this.options.balloonVisible(!0),n.preventDefault())},f.prototype._clearBalloonHoverTimeout=function(){this._balloonHoverTimeoutHandle&&(h.clearTimeout(this._balloonHoverTimeoutHandle),this._balloonHoverTimeoutHandle=
null)},f.prototype._anchorFocusIn=function(){this.element.find("."+n.classes.anchorTarget).addClass("azc-fill-heavy")},f.prototype._anchorFocusOut=function(){var t=this;this.element.find("."+n.classes.anchorTarget).removeClass("azc-fill-heavy");setTimeout((function(){var n=document.activeElement;n!==null&&t.element.has(n).length===0&&(t.options.balloonVisible(!1),t._balloonPinned=!1)}),1)},f.prototype._scrollOrResizeWindow=function(){this._balloonPinned=!1;this.options.balloonVisible(!1)},f.prototype._documentMouseDown=function(n){n.target===this.element[0]||t.contains(this.element[0],n.target)||(this._balloonPinned=!1,this.options.balloonVisible(!1))},f.prototype._isImageShown=function(){return v[this._typeString].showImage},f.prototype._isRequired=function(){return v[this._typeString].required},f.prototype._isCheckPopulated=function(){return this.element.hasClass("azc-dockedballoon-validation")},f.prototype._getOffset=function(n){var t=v[this._typeString];return{preferred:t.offsets?t.offsets[
n].preferred:0,alternate:t.offsets?t.offsets[n].alternate:0}},f})(u.Widget);n.Widget=p;ko.bindingHandlers.azcDockedBalloon=e.getBindingHandler(p);n.DismissAllBalloons=k})(h||(h={})),h}));define("Viva.Controls/Controls/Forms/Viva.Button",["require","exports","o","../Base/Viva.Base","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","../../../_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css"],(function(n,t,i,r,u){"use strict";var f;return (function(n){var f=jQuery,s="fxs-button-primary",h="azc-disabled",t,e,o;(function(n){n[n.Initial=0]="Initial";n[n.Hover=1]="Hover";n[n.Active=2]="Active"})(n.MouseState||(n.MouseState={}));t=n.MouseState;e=(function(n){function i(){n.apply(this,arguments);this.submit=!1;this.selector=ko.observable(null);this.toggle=ko.observable(!1);this.pressed=ko.observable(!1);this.state=ko.observable(t.Initial);this.click=f.noop;this.uri=ko.observable({});this.text=ko.observable({});this.tabindex=ko.observable(0);this.visible=ko.observable(!0);this.isDefault=
ko.observable(!1)}return __extends(i,n),i})(r.ViewModel);n.ViewModel=e;o=(function(n){function r(t,i,r){var u=this,o;n.call(this,t,i,f.extend({viewModelType:e},r));this.element.addClass("azc-button fxt-button").attr({role:"button",type:"button"}).on("click",this._clickHandler=function(n){return u._click(n)}).on("mousedown",this._mouseDownHandler=function(){u._mouseDown()}).on("mouseenter",this._mouseEnterHandler=function(){u._mouseEnter()}).on("mouseleave",this._mouseLeaveHandler=function(){u._mouseLeave()});if(!this.element.is("button")){o=!1;this.element.on("keydown",this._keyDownHandler=function(n){var t=function(){u.element.trigger("click",n)};n.which===13&&t();o=!1;n.which===32&&(o=!0,n.stopPropagation())}).on("keyup",this._keyUpHandler=function(n){o&&n.which===32&&(o=!1,u.element.trigger("click",n),n.stopPropagation())})}this._initializeComputeds()}return __extends(r,n),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._cleanElement("azc-button fxt-button"),
this.element.removeAttr("role tabindex aria-pressed aria-disabled aria-label"),this._mouseLeaveHandler&&(this.element.off("mouseleave",this._mouseLeaveHandler),this._mouseLeaveHandler=null),this._mouseEnterHandler&&(this.element.off("mouseenter",this._mouseEnterHandler),this._mouseEnterHandler=null),this._mouseDownHandler&&(this.element.off("mousedown",this._mouseDownHandler),this._mouseDownHandler=null),this._removeMouseUpHandler(),this._keyUpHandler&&(this.element.off("keyup",this._keyUpHandler),this._keyUpHandler=null),this._keyDownHandler&&(this.element.off("keydown",this._keyDownHandler),this._keyDownHandler=null),this._clickHandler&&(this.element.off("click",this._clickHandler),this._clickHandler=null),n.prototype.dispose.call(this))},i.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.prototype._initializeComputeds=function(){var n=this,t=this.lifetimeManager,r=this.options,i=this.element;this.$tabIndex.subscribeAndRun(t,
(function(n){i.attr("tabindex",n)}));ko.computed(t,(function(){r.toggle()?i.attr("aria-pressed",r.pressed()):i.removeAttr("aria-pressed")}));ko.computed(t,(function(){var t=r.selector();n._previousSelector!==t&&n._previousImg&&n._previousImg.attr({src:"",alt:""});n._previousSelector=t;n._previousImg=i.find(t).attr({src:n._getUri(),alt:n._getAlt()})}));ko.computed(t,(function(){var t=n.$disabled();i.toggleClass(h,t).attr("aria-disabled",t).filter(":button").prop("disabled",t)}));ko.computed(t,(function(){var n=r.isDefault();i.toggleClass("azc-button-default "+s,n)}));ko.computed(t,(function(){i.toggle(r.visible()!==!1)}));r.tabindex.subscribeAndRun(t,(function(t){n.tabindex(t)}))},r.prototype._click=function(n){return this.$disabled()?!1:(this.options.pressed(!this.options.pressed()),this.options.click&&this.options.click.call(this.element,n),this.options.submit&&this.element.submit(),!0)},r.prototype._getAlt=function(){var n,i,r,u;return(n=this.options.text(),typeof n=="string")?n:n?(i=this._getObject(
n),r=this.options.state(),u=t[r].toLowerCase(),i[u]||null):null},r.prototype._getObject=function(n){return this.options.toggle()&&n.normal&&n.pressed&&(n=this.options.pressed()?n.pressed:n.normal),n.enabled&&n.disabled&&(n=this.$disabled()?n.disabled:n.enabled),n},r.prototype._getUri=function(){var n,i,r,u;return(n=this.options.uri(),typeof n=="string")?n:n?(i=this._getObject(n),r=this.options.state(),u=t[r].toLowerCase(),i[u]||null):null},r.prototype._mouseDown=function(){var n=this;this.element.addClass("azc-button-state-active");this.options.state(t.Active);this._removeMouseUpHandler();this._body&&this._body.length===1||(this._body=f("body"));this._body.on("mouseup",this._mouseUpHandler=function(){n.element.removeClass("azc-button-state-active");n.options.state(t.Initial);n.element.hasClass("azc-button-state-hover")?n._mouseEnter():n._mouseLeave();n._removeMouseUpHandler()})},r.prototype._mouseEnter=function(){this.element.addClass("azc-button-state-hover");this.options.state()!==t.
Active&&this.options.state(t.Hover)},r.prototype._mouseLeave=function(){this.element.removeClass("azc-button-state-hover");this.options.state()!==t.Active&&this.options.state(t.Initial)},r.prototype._removeMouseUpHandler=function(){this._mouseUpHandler&&(this._body.off("mouseup",this._mouseUpHandler),this._mouseUpHandler=null)},r})(r.Widget);n.Widget=o;ko.bindingHandlers.azcButton=u.getBindingHandler(o,{controlsDescendantBindings:!1})})(f||(f={})),f}));define("MsPortalImpl.Controls/Fields/Base/LabelAndBalloonWidget",["require","exports","f","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Viva.DockedBalloon","Viva.Controls/Controls/Viva.Balloon","MsPortalImpl/Base/Base.ImplUtils","MsPortalImpl/Base/Base.KnockoutTemplateSanitizer"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(t){var l=e.ProvenanceContainer,c=i.ViewModels,it=c.FormValidationType,y=c.Forms.SubLabelPosition,s=jQuery,rt="azc-text-label",p="azc-text-sublabel",w="msportalfx-tooltip-overflow",ut=
"azc-validation-messages",b="azc-text-sublabel-neighbor",a="fxc-left-label",k="fxc-right-sublabel",ft="azc-form-labelcontainer",et="azc-required-balloon",ot="azc-checkBoxField-inlineLabelContainer",d="fxs-hidden-important",st="msportalfx-form-formelement",ht="azc-formElementContainer",ct="azc-formElementSubLabelContainer",g="fxc-has-sublabel",v="<div/>",nt="<label/>",tt="azc-show-validation",lt="azc-validatableControl",at="azc-validatableControl-none",f=ko.unwrap,h=ko.isObservable,vt=(function(){function t(n,t){this.lifetimeManager=n;this._options=t;this._initializeRequiredComputed();this.lifetimeManager.registerForDispose(this)}return t.prototype._initializeRequiredComputed=function(){var t=this,n=this._options.validations;n&&(this.required=ko.pureComputed((function(){var i=f(n)||[];return i.firstIndex((function(n){return!!n&&!!n.type&&n.type===it.Required}))>=0&&!!f(t._options.label)})))},t.prototype.appendWidgetToDom=function(n,t){var i=this._options,u,r;i.subLabel?(u=s(v).addClass(ct).append(
t),n.append(u)):n.append(t);i.subLabel&&(h(i.subLabel)&&i.subLabel.subscribe(this.lifetimeManager,(function(t){n.toggleClass(g,t.length>0)})),r=f(i.subLabel),r&&r.length>0&&n.addClass(g))},t.prototype.insertLabelBefore=function(n,t){var r,i;t===void 0&&(t={});r=this._options.subLabel&&!t.inlineLabel?n.parent():n;this.labelContainer=this._createLabelContainer(t.inlineLabel?ot:ft);i=this.labelContainer;i&&(t.inlineLabel?r.after(i):r.before(i),t.emptyLabel||this._appendLabelContent(i))},t.prototype._createLabelContainer=function(n){var i=null,t=this._options;return(t.label||t.infoBalloonContent||t.infoBalloonLinkContent)&&(i=s(v).addClass(n).addClass(rt),ko.reactor(this.lifetimeManager,(function(){var n=(f(t.label)||f(t.infoBalloonContent)||t.infoBalloonLinkContent())&&f(t.labelPosition)!==c.Forms.LabelPosition.Hidden;i.toggleClass(d,!n);i.attr("aria-hidden",!n)}))),i},t.prototype._appendLabelContent=function(t){var ut=this,p=this._options,g=p.label,rt=c.Forms.LabelPosition,w,it,nt,e,b,k,tt,y;
g&&(this.labelId="azc-form-guid-"+i.getUniqueId(),w=s("<label id='"+this.labelId+"'><\/label>"),it=function(){var i=o.sanitizeHTML(new l(f(g),n),!0).sanitizedMarkup;w.html(i);i&&(w.parent()[0]||t.append(w),ko.applyBindingsToDescendants(ko.contextFor(w[0]),w[0]))},this.required&&(nt=s(v).addClass(et),e=null,this.required.subscribeAndRun(this.lifetimeManager,(function(n){n&&!e&&(e=new u.ViewModel,e.type=3,h(e.content)&&e.content(r.requiredField),e.isTabbable(!1),ut.lifetimeManager.registerForDispose(new u.Widget(nt,e)),t.prepend(nt));nt.toggle(n)}))),h(p.labelPosition)?p.labelPosition.subscribeAndRun(this.lifetimeManager,(function(n){t.parent().toggleClass(a,n===rt.Left)})):t.parent().toggleClass(a,p.labelPosition===rt.Left),h(g)?g.subscribeAndRun(this.lifetimeManager,(function(){it()})):it());b=p.infoBalloonContent;k=p.infoBalloonLinkContent;(b||k)&&(this.labelId=this.labelId||"azc-form-guid-"+i.getUniqueId(),this.balloonId=this.labelId+"-balloon",tt=s("<div id='"+this.balloonId+"'/>"),y=new u.
ViewModel,y.type=0,y.position(1),y.isTabbable(!1),b&&(y.content=b),k&&(y.link=k),this._widget=new u.Widget(tt,y),this.lifetimeManager.registerForDispose(this._widget),t.append(tt),ko.reactor(this.lifetimeManager,(function(){tt.toggleClass(d,!f(b)&&!f(k))})))},t.prototype.insertSubLabelAfter=function(t){var i=this,r=this._options,u;r.subLabel&&(u=ko.utils.wrap(r.subLabel),this._subLabelElement=s(nt).addClass(p).addClass(w),u.subscribeAndRun(this.lifetimeManager,(function(r){i._subLabelElement.html(r?o.sanitizeHTML(new l(r,n)).sanitizedMarkup:"");i.labelContainer&&i.labelContainer.toggleClass(b,i._subLabelElement.html().length>0);i._updateWidth(t)})),t.after(this._subLabelElement),r.subLabelPosition&&(h(r.subLabelPosition)?r.subLabelPosition.subscribeAndRun(this.lifetimeManager,(function(n){i._rightSublabel=n===y.Right;i._updateWidth(t)})):(this._rightSublabel=r.subLabelPosition===y.Right,this._updateWidth(t))))},t.prototype.insertValidationMessageBelowControlAfter=function(t,i,r){var f=this,e,
h,u,c,a;i===void 0&&(i=!1);e=this._options;(i||e.showValidationMessagesBelowControl)&&(h=ko.computed(this.lifetimeManager,(function(){return r().map((function(n){return"<div>"+n+"<\/div>"})).join("")})),this._validationMessageElement=s(nt).addClass(ut).addClass(w),u=this._validationMessageElement,h.subscribeAndRun(this.lifetimeManager,(function(t){u.html(t?o.sanitizeHTML(new l(t,n)).sanitizedMarkup:"");u.toggleClass(tt,u.html().length>0);f.labelContainer&&f.labelContainer.toggleClass(b,u.html().length>0)})),c=!t.find("."+lt).hasClass(at),a=u.html().length>0,u.toggleClass(tt,c&&a),t.after(u))},t.prototype.toggleBalloon=function(n){var t=this._widget.options.balloonVisible;i.isNullOrUndefined(n)&&(n=!t());t(n)},t.prototype._updateWidth=function(n){var t="style",i=n.parent(),r=i.findByClassName(ht),u=n.closest("."+st),f;this._subLabelElement.html().length>0&&this._rightSublabel?(u.addClass(k),f=i.findByClassName(p).width()+1,r.attr(t,"width: calc(100% - "+f+"px)")):(r.attr(t,""),u.removeClass(k))}
,t.prototype.dispose=function(){var n=this.labelContainer,t=this._subLabelElement;n&&(n.parent().removeClass(a),n.remove());t&&t.remove()},t})();t.LabelAndBalloonWidgetHelper=vt})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Base/Viva.ValidationPlacements.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-validatableControl .azc-dockedballoon-validation,.azc-validatableControl-valid-validated .azc-dockedballoon-anchor::before,.azc-validationBelowCtrl div.azc-formElementSubLabelContainer .azc-validatableControl-invalid div.azc-dockedballoon-validation{display:none}.azc-dropdown.azc-validatableControl-invalid,.azc-editableCombo.azc-validatableControl-invalid,.azc-inputbox.azc-validatableControl-invalid,.azc-inputbox.azc-validatableControl-pending,.azc-inputbox.azc-validatableControl-valid-validated{padding-right:14px}.azc-dropdown.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-editableCombo.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-invalid div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-pending div.azc-dockedballoon.azc-dockedballoon-validation,.azc-inputbox.azc-validatableControl-valid-validated div.azc-dockedballoon.azc-dockedballoon-validation{display:inline-block;width:14px;margin-right:-14px}.azc-checkBox.azc-validatableControl-invalid .azc-dockedballoon-validation{display:inline-block}.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid,.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid .azc-validatableControl-invalid{padding-right:0}.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid.azc-validation-border{border:2px solid #e81123;width:100%}.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid.azc-validation-border.azc-optionPicker{width:calc(100% - 2px * 2)}.fxc-base.azc-validationBelowCtrl div.azc-validatableControl-invalid .azc-validation-border{border:2px solid #e81123;width:100%}.azc-validation-messages{clear:both;display:none;color:#e81123;line-height:15px;margin-top:5px}.azc-validation-messages.azc-show-validation{display:block}.azc-validatableControl.azc-textBox{box-sizing:border-box}.azc-validatableControl-invalid .azc-dockedballoon-validation .azc-dockedballoon-anchor{padding-top:3px;line-height:normal}.azc-checkBox .azc-dockedballoon-validation .azc-dockedballoon-anchor{padding:0 2px 0 0}.azc-validatableControl-invalid .azc-inputbox-wrapper{display:inline-block}.azc-validatableControl-pending{overflow:visible;position:relative}.azc-validatableControl-pending .azc-dockedballoon-validation .azc-dockedballoon-anchor:before{content:url(Content/static/azc-validatableControl-pending.gif);position:absolute;top:4px;right:3px}.azc-validatableControl-pending .azc-dockedballoon-validation .azc-dockedballoon-anchor,.azc-validatableControl-valid-validated .azc-dockedballoon-validation .azc-dockedballoon-anchor{cursor:default;padding:1px 1px 0 0}.fxc-selector-requiredBalloon .azc-dockedballoon-anchor{padding:0}.azc-validatableControl-pending .azc-inputbox-wrapper,.azc-validatableControl-valid-validated .azc-inputbox-wrapper{display:inline-block;margin:0;padding:0;border-width:0;text-decoration:none;border-right-color:transparent;float:left}.azc-validatableControl-pending .azc-dockedballoon-validation,.azc-validatableControl-valid-validated .azc-dockedballoon-validation{border-width:1px 1px 1px 0;border-style:solid;outline:0}.azc-inputbox.azc-validatableControl-pending .azc-inputbox-wrapper .azc-input,.azc-inputbox.azc-validatableControl-valid-validated .azc-inputbox-wrapper .azc-input{border-right-width:0}.azc-validatableControl-valid-validated .azc-dockedballoon-validation .azc-dockedballoon-anchor svg{display:block;height:10px;width:10px;margin-top:5px}")})
);define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.Base",["require","exports","../../../Util/Viva.Util","../../../../_generated/Less/Viva.Controls/Controls/Base/Viva.ValidationPlacements.css"],(function(n,t,i){"use strict";var r;return (function(n){var t=(function(){function n(){this._destroyIds=[]}return n.prototype._checkExistsOrRegisterDestroyId=function(n){return i.existsOrRegisterId(this._destroyIds,n)},n.prototype.isDestroyed=function(){return this._destroyIds.length>0},n.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(null)||(this._errorMessage&&(this._errorMessage.dispose(),this._errorMessage=null),this._disposeSubscriptions())},n.prototype.initialize=function(n,t){var i=this;this._element=n;this._validatable={enableValidation:t.enableValidation,valid:t.valid,validationState:t.validationState,validators:t.validators};this._errorMessage||(this._errorMessage=ko.computed((function(){var u="",r=i._validatable.validators(),n,t;if(r)for(n=0;n<r.length;n++)if(
t=r[n],!t.valid()&&t.message()){u=t.message();break}return u})));this._subscriptions||this._initializeSubscriptions()},n.prototype.onErrorMessageChanged=function(){},n.prototype.onValidationStateChanged=function(){},n.prototype._initializeSubscriptions=function(){var n=this;this._subscriptions=this._subscriptions||[];this._disposeSubscriptions();this.onValidationStateChanged(this._validatable.validationState());this._subscriptions.push(this._validatable.validationState.subscribe((function(t){n.onValidationStateChanged(t)})));this.onErrorMessageChanged(this._errorMessage());this._subscriptions.push(this._errorMessage.subscribe((function(t){n.onErrorMessageChanged(t)})))},n.prototype._disposeSubscriptions=function(){if(this._subscriptions)while(this._subscriptions.length)this._subscriptions.splice(0,1)[0].dispose()},n})();n.Base=t})(r||(r={})),r}));define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.Css",["require","exports","o","./Viva.Base"],(function(n,t,i,r){"use strict";var u;return (function(
n){var t=[],u="azc-validatableControl-none",f="azc-validatableControl-invalid",e="azc-validatableControl-pending",i="azc-validatableControl-valid-validated",o="data-validatable-control-valid",h="data-validatable-control-validation-state",s;t[0]="none";t[1]="invalid";t[2]="valid";t[3]="pending";s=(function(n){function r(){n.apply(this,arguments);this._input=null;this._valid=ko.computed($.noop)}return __extends(r,n),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._element&&this._element.removeClass([u,f,e,i].join(" ")),this._input&&this._input.removeAttr(o),this._valid&&(this._valid.dispose(),this._valid=null))},r.prototype.initialize=function(t,r){var u=this;n.prototype.initialize.call(this,t,r);this._valid=ko.computed((function(){return u._validatable.enableValidation()&&u._validatable.validators().length>0&&u._validatable.validationState()===2}));this._subscriptions.push(this._valid.subscribe((function(n){u._element.
toggleClass(i,n)})));this._input=this._element.find("input, select, textarea");this._validatable.validationState.notifySubscribers(this._validatable.validationState());this._setValidationAttribute(this._validatable.validationState())},r.prototype.onValidationStateChanged=function(n){var t=this._element;t.toggleClass(u,n===0);t.toggleClass(f,n===1);t.toggleClass(e,n===3);t.toggleClass(i,this._valid());this._setValidationAttribute(n)},r.prototype._setValidationAttribute=function(n){this._input&&(this._input.attr(o,n===2||this._validatable.validators().length===0),this._input.attr(h,t[n]))},r})(r.Base);n.Css=s})(u||(u={})),u}));define("Viva.Controls/Controls/Base/ValidationPlacements/Viva.DockedBalloon",["require","exports","o","../Viva.Validators","../../Viva.DockedBalloon","./Viva.Base"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var r=jQuery,t={length:4},i;t[0]="none";t[1]="invalid";t[2]="valid";t[3]="pending";i=(function(n){function i(t){n.call(this);this._inputSelector="input, select";
this._settings=t}return __extends(i,n),i.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._detachEvents(),this._widget&&(this._widget.dispose(),this._widget=null),this._element&&this._widgetElement&&(ko.cleanNode(this._widgetElement[0]),this._widgetElement.remove()),this._errorMessagesListWidget&&(this._errorMessagesListWidget.dispose(),this._errorMessagesListWidget=null))},i.prototype.onValidationStateChanged=function(i){if(n.prototype.onValidationStateChanged.call(this,i),!this._widgetElement){if(i===0)return;this._createDockedBalloon()}if(this._widgetElement.removeClass("fxs-bg-error"),this._inputElement)switch(i){case 0:case 1:this._widgetElement.addClass("fxs-bg-error");case 2:case 3:this._widgetViewModel.disabled(!this._validationStateBalloonOptions[t[i]].balloonVisible)}},i.prototype._setInputSelector=function(n){this._inputSelector=n},i.prototype._createDockedBalloon=function(){this._inputElement=this._element.
find(this._inputSelector);this._widgetElement||(this._widgetElement=r("<div />"));this._widgetViewModel=new u.ViewModel;this._widgetViewModel.content=this._errorMessage;this._widgetViewModel.isTabbable(!1);this._initializeValidationStateDockedBalloonOptions(this._settings);this._element.append(this._widgetElement);this._widgetViewModel.type=2;var n=this._element.innerHeight();this._widget=new u.Widget(this._widgetElement,this._widgetViewModel);this._widgetElement.css("height",n);this._attachEvents();this.onValidationStateChanged(this._validatable.validationState())},i.prototype._initializeValidationStateDockedBalloonOptions=function(n){var i=function(n){return n!==undefined&&n!==null},u=function(n){return{balloonVisible:n}};if(this._validationStateBalloonOptions={none:u(!1),invalid:u(!0),valid:u(!1),pending:{}},n&&n.validationStateBalloonOptions){var r=n.validationStateBalloonOptions,f=r.none,e=r.invalid,o=r.valid,s=r.pending,t=this._validationStateBalloonOptions;f&&(t.none.balloonVisible=
i(f.balloonVisible)?f.balloonVisible===!0:t.none.balloonVisible);e&&(t.invalid.balloonVisible=i(e.balloonVisible)?e.balloonVisible===!0:t.invalid.balloonVisible);o&&(t.valid.balloonVisible=i(o.balloonVisible)?o.balloonVisible===!0:t.valid.balloonVisible);s&&(t.pending.balloonVisible=i(s.balloonVisible)?s.balloonVisible===!0:t.pending.balloonVisible)}},i.prototype._attachEvents=function(){var n=this;this._detachEvents();this._inputElementFocusHandler=function(){n._onInputElementFocus()};this._inputElementBlurHandler=function(){n._onInputElementBlur()};this._widgetAnchorElementClickHandler=function(n){n.preventDefault()};this._element.find("input,select").on("focus",this._inputElementFocusHandler).on("blur",this._inputElementBlurHandler);this._widgetElement.find("a").on("click",this._widgetAnchorElementClickHandler)},i.prototype._detachEvents=function(){this._inputElementFocusHandler&&(this._inputElement.off("focus",this._inputElementFocusHandler),this._inputElementFocusHandler=null);this.
_inputElementBlurHandler&&(this._inputElement.off("blur",this._inputElementBlurHandler),this._inputElementBlurHandler=null);this._widgetAnchorElementClickHandler&&(this._widgetElement.find("a").off("blur",this._widgetAnchorElementClickHandler),this._widgetAnchorElementClickHandler=null)},i.prototype._onInputElementFocus=function(){this._widget&&!this._validatable.valid()&&this._widget.options.balloonVisible(!0)},i.prototype._onInputElementBlur=function(){this._widget&&this._widget.options.balloonVisible(!1)},i.defaultOptions={validationStateBalloonOptions:{pending:{balloonVisible:!1}}},i})(f.Base);n.DockedBalloon=i})(e||(e={})),e}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow",["require","exports","o","./Grid1.Impl"],(function(n,t,i,r){"use strict";var u;return (function(n){var t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getName=function(){return"Focusable"},t.prototype.getOrder=function(){return 0},t})(r.GridExtension);n.FocusableRowExtension=
t})(u||(u={})),u}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid-activateableRow table tbody tr.azc-grid-row td[data-activatable=true]{font-family:az_ea_font,wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe UI","Segoe WP",Tahoma,Arial,sans-serif}.azc-grid-activateableRow table tbody tr.azc-grid-row.azc-grid-virtualFocus td[data-activatable=true],.azc-grid-activateableRow table tbody tr.azc-grid-row:not([aria-disabled=true]):hover td[data-activatable=true],.azc-grid-activateableRow table.azc-grid-activateonselected tbody tr.azc-grid-row.azc-grid-virtualFocus,.azc-grid-activateableRow table.azc-grid-activateonselected tbody tr.azc-grid-row:not([aria-disabled=true]):hover,.azc-grid-link{cursor:pointer}')}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate",["require","exports","f","u","o","./Viva.Grid1.SelectableRow",
"../../../Util/Viva.Util","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SelectableRowActivate.css"],(function(n,t,i,r,u,f,e,o){"use strict";var h=i.Base.EventTypes,s;return (function(n){var y=i,s=y.isNullOrUndefined,c=f.RowSelectionMode,t=jQuery,p="keypress.",l="azcActivation",w="azc-grid-virtualFocus",a="tbody tr[data-grid-activateable=true]",b=a+":not([aria-disabled=true])",v=b+" ["+e.Constants.dataActivatableAttribute+"=true]",k=b+", "+v,tt="tbody tr[data-grid-activateable=true]:not([aria-disabled=true])",it='css: { "fxs-activated": activated() }',rt='css: { "azc-grid-activateonselected": $ctl.getPlugin("azc-grid-activateableRow")._activateOnSelected }',ut='attr: { "data-grid-activateable": "true", "data-grid-row-activated": activated() ? "true" : "false" }',ft='css: { "azc-grid-link": !$disabled() && link() && link().uri }',et='attr: { "data-activatable": activatable(), tabindex: activatable() ? $tabIndex() : null, "data-grid-cell-activated": $parent.activated() === $data.itemKey ? "true" : "false" }',
r=ko.observable,d=ko.dataFor,g=ko.computed,ot=y.disposeDisposable,nt;n.windowOpen=function(n,t){window.open(n,t)};nt=(function(i){function o(n){i.call(this);this._disposables=[];this._options=n=n||{};this._activatedColumnKey=n.activatedColumnKey||r();this._primaryActivateColumnKey=n.primaryActivateColumnKey||r();this._activateOnSelected=n.activateOnSelected||r(!1);this._preserveSelection=r(!1);this._activatedRow=null;this._onRowClicked=n.onRowClicked;this._selfActivation=!1}return __extends(o,i),u.defineProperty(o.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),o.prototype.getActivatedRows=function(){return this._widget._getAllRowMetadata().filter((function(n){return!s(n.activated.peek())}))},o.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("bodyRowsCore"),i="tr",t="data-bind",r=u.addAttribute.bind(u),f,e;r(i,t,ut);r(i,t,ft);r(i,t,it);f=n.getHtmlTemplate("bodyCell");f.addAttribute("td",t,et);e=n.getHtmlTemplate("table");e.addAttribute(
"table",t,rt)},o.prototype.getDefaultRowMetadataProperties=function(){return{activated:r(null),activatedInfo:r(null),link:r(null),useDefaultActivation:r(!0)}},o.prototype.getDefaultColumnProperties=function(){return{activatable:r(!1)}},o.prototype.afterAttachEvents=function(){var i=this,n=this;this._disposables.push(this._widget.element.setEvents(["click.azcActivationCell",v,function(t){n._handleActivationKeyPressOrClick(t,this)}],[p+"azcActivationRow",tt,function(t){n._handleActivationKeyPressOrClick(t,this)}],[p+"azcActivationCell",v,function(t){n._handleActivationKeyPressOrClick(t,this);t.stopPropagation()}],["rowSelect."+l,function(t,i){n._onRowSelect(t,i)}],["focus."+l,k,function(n){var i=t(n.currentTarget);i.closest(a).addClass(w)}],["blur."+l,k,function(n){var i=t(n.currentTarget);i.closest(a).removeClass(w)}],["beforeRowSelect."+l,function(n,t){i._onBeforeRowSelect(n,t)}]))},o.prototype.afterCreate=function(){var n=this,t=this._widget.lifetimeManager,i=this._widget.options;this.
_selectableRowExtension=this._widget.getPlugin(f.SelectableRowExtension.Name);this._widget._getAllRowMetadata().filter((function(n){return!s(n.activated.peek())&&n.selected.peek()})).forEach((function(n){n.activated(null)}));g(t,(function(){var t=i.columns();n._firstColumnKey=t&&t.length>0?t[0].itemKey:null}));i.items.map(t,(function(t,i){var r=n._widget.getRowMetadata(i),u=!1;r.selected.subscribe(t,(function(t){var i=n._activateOnSelected();if(t&&i)n._activateRow(r);else if(i&&!u)try{u=!0;r.activated(null)}finally{u=!1}}));r.activated.subscribe(t,(function(t){var i=!s(t);if(i){if(!u&&!n._selfActivation)try{u=!0;n._activateOnSelected()&&r.selected(!0);n._activatedColumnKey.peek()!==t&&n._activatedColumnKey(t)}finally{u=!1}n._activatedRow=r}}))}));g(t,(function(){n._widget.element.toggleClass("azc-grid-selectionActivates",n._activateOnSelected())}));this._widget._getAllRowMetadata().forEach((function(t){t.activated()&&(n._activatedRow=t,n._activateOnSelected()&&t.selected(!0))}))},o.prototype.getOrder=
function(){return 40},o.prototype.getDependencies=function(){return[new f.SelectableRowExtension(this.options)]},o.prototype.beforeDestroy=function(){ot(this._disposables);this._disposables=[]},o.prototype.getName=function(){return o.Name},o.prototype.shouldNotAllowSelectAll=function(){return this._activateOnSelected()},o.prototype.shouldNotChangeSelection=function(n,i){var u=this._selectableRowExtension.options.mode?this._selectableRowExtension.options.mode():c.Off,r,f;if(u===c.MultipleReplace){if(t(n).attr("aria-selected")==="true"&&!(i.shiftKey||i.ctrlKey)&&(r=t(i.target),f=r.attr(e.Constants.dataActivatableAttribute)==="true"?r:r.closest("["+e.Constants.dataActivatableAttribute+"=true]"),f.length>0&&t.contains(n,f[0])))return!0}else if(u===c.Single||u===c.AlwaysSingle)return i.ctrlKey||i.shiftKey;return!1},o.prototype.previous=function(){return this._selectableRowExtension.previous()},o.prototype.next=function(){return this._selectableRowExtension.next()},o.prototype._changeActivation=
function(n,i){var r=d(n),s=t(i.currentTarget),a=s.closest(".azc-grid-cell"),w=t(n).find(".azc-grid-cell"),b=a[0]?a:w,k=d(b[0]),v=r.selected.peek(),g=r.activated.peek(),y=!1,u=k.itemKey,f,o,l,p;if(v&&(i.ctrlKey||i.shiftKey)&&g===u&&(y=!0),v||i.type!=="keypress"||(f=e.cloneEvent(i,"keydown"),f.which=32,t.extend(f,{which:32,target:n,ctrlKey:i.ctrlKey,altKey:i.altKey,shiftKey:i.shiftKey}),t(n).trigger(f),i.stopPropagation(),i.preventDefault()),y||(this._activatedInfo=s.attr(e.Constants.dataActivateInfoAttribute),this._activatedColumnKey(u)),o=this._activatedRow,o!==null&&o!==r&&o.activated(null),r!==null&&(l=r.useDefaultActivation,!l||l()))try{this._selfActivation=!0;p=this._options.mode()!==c.MultipleAdd||!(r.activated()!==u&&r.selected());this._activatedColumnKey(u);r.activated(u);p||i.stopPropagation()}finally{this._selfActivation=!1;s.trigger(h.fxensurebladevisible,{})}},o.prototype._handleActivationKeyPressOrClick=function(n,i){var u=this,r;(n.type!=="keypress"||!n.ctrlKey&&n.which===
13||n.ctrlKey&&n.which===10||n.which===32)&&(r=t(i).closest("tr[data-grid-activateable=true]"),r.length>0&&u._changeActivation(r[0],n))},o.prototype._onBeforeRowSelect=function(n,t){if(this._activateOnSelected){var i=t&&t.selected,r=i&&i.selected;r&&r()&&this._activateRow(i)}},o.prototype._onRowSelect=function(t,i){var r=i.selected,u,f;r&&(this._onRowClicked&&this._onRowClicked(r.item),u=r.link&&r.link(),u&&(f=u.uri,f&&(n.windowOpen(f,u.target),this._selectableRowExtension.unselectAllRows())))},o.prototype._activateRow=function(n){var t=this._activatedColumnKey();s(t)&&(t=this._primaryActivateColumnKey()||this._firstColumnKey);s(t)||n.activated()===t||n.useDefaultActivation&&!n.useDefaultActivation()||n.activated(t)},o.Name="azc-grid-activateableRow",o})(o.Extension);n.SelectableRowActivateExtension=nt})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow",["require","exports","f","i","o","./Grid1.Extensibility","./Grid1.FocusableRow","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRow",
"Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SelectableRowActivate","../../../../MsPortalImpl/Base/Base.Selectable2.ClickContext"],(function(n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(n){function b(){try{return window.self!==window.top}catch(n){return!0}}var v=i.Base,y=v.EventTypes,p=i.ViewModels,w=p.Controls.Lists.Grid,t=s.RowSelectionMode,u=i.isNullOrUndefined,l=b(),a=(function(n){function i(){n.apply(this,arguments);this._lifetime=new r.TriggerableLifetimeManager}return __extends(i,n),i.prototype.beforeDestroy=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},i.prototype.getExtension=function(n){var u=n,r=ko.observable(t.Off),i=u&&u.selectableRow,f,e,o;if(i){o=i.selectionMode||0;switch(o){case 1:r(t.Single);break;case 2:r(t.MultipleReplace);break;case 3:r(t.MultipleAdd);break;default:r(t.Off)}this._activatedColumnKey=i.activatedColumnKey;this._primaryActivateColumnKey=i.primaryActivateColumnKey;this._activateOnSelected=i.activateOnSelected;f=i.
disableRequireSingleModeAssistKey;e=i.enableSelectableCursor||ko.observable(!1)}return this._activatedColumnKey||(this._activatedColumnKey=ko.observable()),this._primaryActivateColumnKey||(this._primaryActivateColumnKey=ko.observable()),this._activateOnSelected||(this._activateOnSelected=ko.observable(!1)),this._vivaSelectableRowActivation=new h.SelectableRowActivateExtension({mode:r,disableSelectAll:i.disableSelectAll,activatedColumnKey:this._activatedColumnKey,primaryActivateColumnKey:this._primaryActivateColumnKey,activateOnSelected:this._activateOnSelected,disableRequireSingleModeAssistKey:f,enableSelectableCursor:e,hasNextSelectableItem:ko.observable(!1),hasPreviousSelectableItem:ko.observable(!1),onRowClicked:l?u.onRowClicked:undefined})},i.prototype.getActivatedColumnKey=function(){return this._activatedColumnKey.peek()||this._primaryActivateColumnKey.peek()},i.prototype.initializeExtension=function(){var n=this._widget,a=n.options.extensionsOptions,f=this._lifetime,u,e,v,p,o,i,
h,t,r;l||(o=a.onRowClicked,o&&(u=c.getListSelectableWithClickHandler(n.options.selectableData,$(n.element),o),ko.reactor(f,(function(){var t=u.activationState(),n=t.previous;n&&ko.ignoreDependencies((function(){n.metadata.activated(null);e=null}))}))));i=n._instance.element;h=function(n){n&&e!==n&&(e=n,u&&u.onClick({item:n.item,metadata:n}))};i.on(s.EventTypes.RowSelect,v=function(n,t){var i,r;n.stopPropagation();i=a.selectableRow.rowSelect;i&&i(n,t);r=t._reason;(r===4||r===2)&&h(t.selected)});f.registerForDispose((function(){i.off(s.EventTypes.RowSelect,v)}));i.on(s.EventTypes.RowClick,p=function(t,i){var e=$(t.target),r=i.rowMetadata,u=e.closest("a"),o=u&&$(i.item).find(u).length>0,f;if(!o){var s=n.options.extensionsOptions,c=s.selectableRow,l=c.selectionMode===1;l&&(t.ctrlKey||t.shiftKey)&&(t.stopPropagation(),t.preventDefault(),f=n.options.selectableData,$(t.target).trigger(y.fxopeninnewtab,{selectableSet:f,item:r.item}));h(r)}});f.registerForDispose((function(){i.off(s.EventTypes.RowClick,
p)}));t=this._vivaSelectableRowActivation;r=t.options;r.enableSelectableCursor&&r.enableSelectableCursor()&&n.options.selectableData._msPortalFxCursor({previous:{canExecute:r.hasPreviousSelectableItem||ko.observable(!1),execute:t.previous.bind(t)},next:{canExecute:r.hasNextSelectableItem||ko.observable(!1),execute:t.next.bind(t)}})},i.prototype.getName=function(){return"Selectable"},i.prototype.getOrder=function(){return 1},i.prototype.getDependencies=function(){return[new e.FocusableRowExtension]},i.prototype.registerSubscriptionsToConnectMetadataProperties=function(n,t){var i=this;return this._widget.options.selectableData.selectableItems.subscribe((function(){i._widget._connectMetadataAndDisposeSubscriptions(n,t)}))},i.prototype.disallowConnectRowMetadataProperties=function(n,t){var r=-1,u=this._widget.options,i;return(u.selectableData.selectableItems().some((function(n,i){return n.data===t.item?(r=i,!0):!1})),r>=0)?(i=-1,u.items().some((function(t,r){return t===n?(i=r,!0):!1})),i===-1)?!1:
r!==i:!0},i.prototype.connectRowMetadataProperties=function(n,t,i){var a=this,o=this._widget,s=[],h=o.options.selectableData.selectableItems().first((function(t){return t.data===n})),c=t,r=i,l,f=function(n){s.push.apply(s,n)},e=o._twoWayBinding.bind(o);return r.link&&c.link&&f(e(r.link,c.link)),f(e(h.isSelected,t.selected)),f(e(t.selected,r.selected)),f([l=ko.computed({read:function(){var n=r.activated();return!(n===null||n===undefined)},write:function(n){var t,i;n?r.activated()||(t=a.getActivatedColumnKey(),u(t)&&(i=o.options.columns().first((function(n){return n.activatable&&n.activatable()})),t=u(i)?null:i.itemKey),u(t)||r.activated(t)):r.activated(null)}})]),f(e(t.activated,r.activated)),f(e(h.isActivated,l)),f(e(t.disabled,r.disabled)),f(e(t.useDefaultActivation,r.useDefaultActivation)),s},i})(o.GridExtension);n.SelectableRowExtension=a;f.registerPlugin(w.Extensions.SelectableRow,a)})(l||(l={})),l}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow",["require","exports",
"f","o","../../../Util/Viva.Util","./Viva.Grid1"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){var o=i.Base.EventTypes,t=jQuery,s=ko.observable,e=ko.dataFor,h=i.disposeDisposable,c=(function(n){function i(t){n.call(this);this._disposables=[];t=this._options=t||{};t.disabled===undefined&&(t.disabled=s(!1))}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterAttachEvents=function(){var r=this._options,i=this._widget,n="rowRightClick";this._disposables.push(i.element.setEvents([o.fxcontextmenurequest+".azcGrid","tbody[class!=azc-grid-empty] tr",function(t){var f;r.disabled()||(f={rowMetadata:e(this),clientX:t.clientX,clientY:t.clientY},i.trigger(n,u.cloneEvent(t,n),f,t.target),i.options.events(n,f))}],["keydown.azcGrid",function(r){switch(r.which){case 121:if(r.shiftKey){var f=t(r.target).closest("tr")[0],o=t(f).offset(),s={rowMetadata:e(f),clientX:o.left+f.offsetWidth-232,clientY:
o.top+10};i.trigger(n,u.cloneEvent(r,n),s,r.target);i.options.events(n,s);r.preventDefault();r.stopPropagation()}}}]))},i.prototype.beforeDestroy=function(){h(this._disposables);this._disposables=[]},i.prototype.getName=function(){return i.Name},i.Name="azc-grid-rightClickableRow",i})(f.Extension);n.RightClickableRowExtension=c})(e||(e={})),e}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow",["require","exports","f","o","./Grid1.Extensibility","./Grid1.SelectableRow","MsPortalImpl/UI/Commands/UI.Commands.Base","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.RightClickableRow","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRow"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){var c=i.Base.EventTypes,l=i.ViewModels,a=l.Controls,v=a.Lists.Grid,t=jQuery,r=ko.unwrap,e=(function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.beforeDestroy=function(){this._rightClickHandler&&(this._widget._instance.
element.off("rowRightClick",this._rightClickHandler),this._rightClickHandler=null)},i.prototype.getExtension=function(n){var t=n;return this._commands=t.controlCommands,new s.RightClickableRowExtension},i.prototype.initializeExtension=function(){var n=this;this._widget._instance.element.on("rowRightClick",this._rightClickHandler=function(t,i){return n._triggerRightClickEvent(t,i)})},i.prototype.getName=function(){return"RightClickableRow"},i.prototype.getOrder=function(){return 1},i.prototype.getDependencies=function(){return[new f.SelectableRowExtension]},i.prototype._triggerRightClickEvent=function(n,i){var f=this._widget.options,e=f.selectableData,r=i.rowMetadata,u;return!!r&&!!r.item?(this._updateSelectionFollowingRightClick(r),r.disabled()||this._widget._extensionTrigger("shouldHideContextMenu",r).some((function(n){return!!n})))?!1:(u=t.Event(c.fxrightclick),u.clientX=i.clientX,u.clientY=i.clientY,t(n.target).trigger(u,this._getCommandRightClickEventArgs(e,r.item)),n.preventDefault(
),n.stopPropagation(),!0):!1},i.prototype._updateSelectionFollowingRightClick=function(n){var i;if(!n.selected()){var t=this._widget,u=t.options,r=u.selectableData.selectableItems();r.forEach((function(n){n.isSelected(!1)}));i=r.first((function(i){return!t.getRowMetadata(i.data).disabled()&&i.data===n.item}));i&&(i.isSelected(!0),t._instance.getPlugin(h.FocusableRowExtension.Name).focusRowByRowMetadata(n))}},i.prototype._getCommandRightClickEventArgs=function(n,i){var f=this._widget,v=n.selectableItems().filter((function(n){return n.isSelected()})),l=v.map((function(n){return n.data})),e=l[0],a=f.getRowMetadata(i),o,c,u;if(e){var s=r(e.commandGroup),h=r(e.commandGroupOwner),y=l.some((function(n){return r(n.commandGroup)!==s||r(n.commandGroupOwner)!==h}));y&&(s=null,h=null)}return o={selectableSet:n,deleteRowCommandTitle:null,markForDelete:null},f._extensionTrigger("enableRowDelete",a).some((function(n){return!!n}))&&f._extensionTrigger("getListDataForRightClick",a).forEach((function(n){t.extend(o,n)})
),c={entityType:1,commandGroup:s,commandGroupOwner:h,viewModel:i,listData:o},u=this._commands&&this._commands(),u&&u.length&&t.extend(c,{controlCommands:u}),c},i})(o.GridExtension);n.RightClickableRowExtension=e;u.registerPlugin(v.Extensions.RightClickableRow,e)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-contextMenuShortcut .azc-grid-contextMenuShortcut-col{width:32px}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled=true]) td.azc-grid-contextMenuShortcut-cell{padding:0 4px 0 0;text-align:center}.azc-grid-contextMenuShortcut table tbody tr:not([aria-disabled=true]) td.azc-grid-contextMenuShortcut-cell a{width:100%;height:28px;font-size:23px;margin-right:2px;text-decoration:none;line-height:14px}.azc-grid-contextMenuShortcut table tbody .azc-row-disabled .azc-grid-contextMenuShortcut-cell a{display:none}")}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut",
["require","exports","o","MsPortalImpl/Resources/ImplScriptResources","./Viva.Grid1.SelectableRow","../../../Util/Viva.Util","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ContextMenuShortcut.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var v=MsPortalFx,o=jQuery,s="azc-grid-contextMenuShortcut-cell",t="tbody tr[data-grid-selectable=true]:not([aria-disabled=true]) .azc-grid-contextMenuShortcut-cell a",y='attr: { "data-grid-contextmenushortcut": true }',p="<col class='azc-grid-contextMenuShortcut-col' />",w="<th role='columnheader' class='azc-grid-contextMenuShortcut-header'><\/th>",h="<td role='gridcell' class='"+s+" azc-br-muted'><a class='msportalfx-inherit-color' href=\"\" role='button' title='"+r.ContextMenu.ariaLabel+"' aria-label='"+r.ContextMenu.ariaLabel+"'>&#8230<\/a><\/td>",c="azcGridContextMenuShortcut",l="click."+c,a="keydown."+c,b=(function(n){function r(t){n.call(this);this._options=t||{}}return __extends(r,n),i.defineProperty(
r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),r=n.getHtmlTemplate("header"),u=n.getHtmlTemplate("colgroup"),i=n.getHtmlTemplate("editableBodyRowsCorePerColumn");t.addAttribute("tr","data-bind",y);t.append("tr",h);r.append("tr",w);u.append("colgroup",p);v.isNullOrUndefined(i)||i.append("tr",h)},r.prototype.afterAttachEvents=function(){var e=this,i=this._widget,r=function(n){var r=o(this),u=r.offset(),e=r.closest("tr")[0],s={rowMetadata:ko.dataFor(e),clientX:u.left,clientY:u.top},t="rowContextMenuShortcutClick";i.trigger(t,f.cloneEvent(n,t),s,e);i.options.events(t,s);n.preventDefault()},n=i.element,u;n.on(l,t,r);u=function(n){n.which===32&&r(n)};n.on(a,t,u);this._detachEvents=function(){e._detachEvents=null;n.off(l,t,r);n.off(a,t,u)}},r.prototype.getOrder=function(){return 40},r.prototype.getDependencies=function(){return[new u.SelectableRowExtension]},r.prototype.
beforeDestroy=function(){this._detachEvents&&this._detachEvents()},r.prototype.getName=function(){return r.Name},r.prototype.shouldNotChangeSelection=function(n,t){var i=o(t.target),r=i.closest("tr").attr("aria-selected")==="true",u=!!i.closest("."+s).length;return r&&u?!0:!1},r.prototype.getAdditionalColumns=function(){return 1},r.Name="azc-grid-contextMenuShortcut",r})(e.Extension);n.ContextMenuShortcutExtension=b})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut",["require","exports","f","o","./Grid1.Extensibility","./Grid1.RightClickableRow","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ContextMenuShortcut"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._onClick&&(this._widget._instance.element.off("rowContextMenuShortcutClick",this._onClick),this._onClick=
null)},t.prototype.getExtension=function(){return new o.ContextMenuShortcutExtension},t.prototype.initializeExtension=function(){var n=this;this._widget._instance.element.on("rowContextMenuShortcutClick",this._onClick=function(t,i){var r=n._widget.getPlugin("RightClickableRow");return r?r._triggerRightClickEvent(t,i):!1})},t.prototype.getName=function(){return"ContextMenuShortcut"},t.prototype.getOrder=function(){return 1},t.prototype.getDependencies=function(){return[new f.RightClickableRowExtension]},t})(e.GridExtension);n.ContextMenuShortcutExtension=t;u.registerPlugin(r.Extensions.ContextMenuShortcut,t)})(s||(s={})),s}));define("MsPortalImpl/Controls/Helpers/Validation",["require","exports","f","i","Viva.Controls/Controls/Base/Viva.Validators"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function o(n){var i,r;switch(n.type){case t.Invalid:i=new u.Invalid(n);break;case t.RegExMatch:i=new u.Match(n);break;case t.NotRegExMatch:i=new u.NotMatch(n);break;case t.Contains:i=new
u.Contains(n);break;case t.NotContains:i=new u.NotContains(n);break;case t.ContainsCharacters:i=new u.ContainsCharacters(n);break;case t.NotContainsCharacters:i=new u.NotContainsCharacters(n);break;case t.HasDigit:i=new u.HasDigit(n);break;case t.HasLetter:i=new u.HasLetter(n);break;case t.HasUpperCaseLetter:i=new u.HasUpperCaseLetter(n);break;case t.HasLowerCaseLetter:i=new u.HasLowerCaseLetter(n);break;case t.HasPunctuation:i=new u.HasPunctuation(n);break;case t.Equals:i=new u.Equals(n);break;case t.CaseInsensitiveComparison:i=new u.CaseInsensitiveComparison(n);break;case t.LocaleAwareCaseInsensitiveComparison:i=new u.LocaleAwareCaseInsensitiveComparison(n);break;case t.LengthRange:i=new u.LengthRange(n);break;case t.MinLength:i=new u.MinLength(n);break;case t.MaxLength:i=new u.MaxLength(n);break;case t.Required:i=new u.Required(n);break;case t.Numeric:i=new u.Numeric(n);break;case t.Range:i=new u.ValueRange(n);break;case t.MinValue:i=new u.MinValue(n);break;case t.MaxValue:i=new u.MaxValue(
n);break;case t.Custom:r=f.getMetadataId(n);i=new u.CustomAsyncValidator(n,r);break;case t.Uri:i=new u.Uri(n)}return i&&n.isEmptyValid&&(i.isEmptyValid=n.isEmptyValid),i}function s(n,t){for(var i,r=n.validators(),u=0;u<t.length;u++)for(i=0;i<r.length;i++)if(t[u]===r[i].fxViewModel){r.splice(i,1);break}n.validators(r)}var f=r.Po,e=i.ViewModels,t=e.FormValidationType;n.convertValidation=o;n.removeValidations=s})(f||(f={})),f}));define("_generated/Less/MsPortalImpl.Controls/Fields/Fields.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".fxs-bladestyle-context .azc-form-labelcontainer,.fxs-hubPane .azc-form-labelcontainer{color:#fff}.azc-checkBoxField.azc-checkBoxField-inlineLabel div.azc-checkBox{display:inline-block;width:auto}div.azc-oauthButton-invalid.azc-button{border:2px solid #e81123}.azc-checkBoxField-inlineLabel .azc-form-labelcontainer,.azc-oAuthButton-hidden-textbox{display:none}.azc-checkBoxField-inlineLabel .azc-text-label{margin-left:6px}.azc-checkBoxField-inlineLabel label{line-height:16px;max-width:100%}.azc-checkBoxField-inlineLabelContainer{display:inline-block;max-width:calc(100% - 17px - 6px)}.fxc-CheckBoxField .azc-formElementSubLabelContainer{min-height:17px}.fxc-hide-check .azc-validatableControl-valid-validated div.azc-dockedballoon-anchor{display:none}")})
);define("MsPortalImpl.Controls/Fields/Base/Field",["require","exports","f","o","./FormValidation","./LabelAndBalloonWidget","../../Controls/Base/Loadable","Viva.Controls/Controls/Base/Viva.Validators","../../../MsPortalImpl/Base/Telemetry","MsPortalImpl/Controls/Helpers/Validation","../../../_generated/Less/MsPortalImpl.Controls/Fields/Fields.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){var o=i.Base,c=o.EventTypes,d=o.Diagnostics.Telemetry,g=window,l=jQuery,a=ko.isObservable,nt="azc-input",v="msportalfx-form-formelement",tt="azc-formElementSubLabelContainer",it="azc-formElementContainer",rt="azc-validationBelowCtrl",t="fxc-hide-check",y="aria-labelledby",p="aria-describedby",w="aria-required",b="focusin.focusTelemetry",k="focusout.focusTelemetry",ut=(function(n){function e(t,i,r){var f=this,u;n.call(this,t,i,r);this._disposables=[];u=this.options;this._validationMessages=ko.observableArray();u._msPortalFxClearValidation((function(){return f._clearValidation(
)}));u._msPortalFxTriggerValidation((function(){return f.triggerValidation()}));this.valid=u.valid;this._initializeWidgets();this._attachTelemetryEvents()}return __extends(e,n),e.prototype._initializeField=function(){this.element.addClass(v);this._widgetInstances=[];this._createContent()},e.prototype._initializeWidgets=function(){var i=this,n;this._labelHelper=new f.LabelAndBalloonWidgetHelper(this.lifetimeManager,this.options);this._required=this._labelHelper.required;this._initializeField();a(this.options.hideValidationCheck)?(n=this.options.hideValidationCheck,n.subscribe(this.lifetimeManager,(function(n){i.element.toggleClass(t,n)})).callback(n())):this.element.toggleClass(t,this.options.hideValidationCheck);this.options.showValidationMessagesBelowControl&&(this.element.addClass(rt),this.validatableViewModel&&(this.validatableViewModel.showValidationMessagesBelowControl=this.options.showValidationMessagesBelowControl,this.validatableViewModel.validators.filter((function(n){return n.validationState(
)!==0&&!n.valid()&&!!n.message()})).map((function(n){return n.message()})).subscribeAndRun(this.lifetimeManager,this._validationMessages)));this._createLabelAndSubLabel();u.markFormFieldElement(this.element[0],this.options,this.validatableViewModel,this)},e.prototype.dispose=function(){if(!this._checkExistsOrRegisterDestroyId(n.prototype.dispose)){this._widgetInstances=null;var r=this.element;r.removeClass(v);r.removeClass(t);this._container&&this._container.remove();this._disposeOfTelementryEvents();i.disposeDisposable(this._disposables);this._disposables=[];n.prototype.dispose.call(this)}},r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(e.prototype,"validatableViewModel",{get:function(){return this._widgets[0].validatableViewModel},enumerable:!0,configurable:!0}),r.defineProperty(e.prototype,"validatableWidget",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getPerformValidationFromViewModel=
function(){return this.options.performValidation()===null||this.options.performValidation()},e.prototype.addValidations=function(){var n=this;ko.unwrap(this.options.validations).forEach((function(t){var i=h.convertValidation(t);i&&n.validatableViewModel.validators.push(i)}))},e.prototype.removeValidations=function(n){h.removeValidations(this.validatableViewModel,n)},e.prototype.linkValidatableControlViewModels=function(){var i=this,n=this.validatableViewModel,t=this.options;this.linkFieldViewModels();n.valid.subscribe(this.lifetimeManager,(function(i){n.validators().some((function(n){return!n.valid()}));t.valid(i)}));this.addValidations();a(t.validations)&&t.validations.subscribeArrayEdits(this.lifetimeManager,(function(t){var r=[],u=[];t.forEach((function(n){if(n.status==="added"){var t=h.convertValidation(n.value);t&&u.push(t)}else n.status==="deleted"&&r.push(n.value)}));n.validators(n.validators().concat(u));r.length>0&&i.removeValidations(r)}));n.enableValidation=t.enableValidation;n.enableValidation.
subscribe(this.lifetimeManager,(function(t){t||n.validators().forEach((function(n){n.validationState(0)}))}))},e.prototype.validateField=function(n){this.getPerformValidationFromViewModel()&&(this.validatableViewModel.enableValidation()?this.validatableWidget.validate(n):(this.validatableViewModel.enableValidation(!0),this.validatableWidget.validate(!0)))},e.prototype.setupValidationBindings=function(){var t=this,i=this.options,r=this.validatableWidget,n;i.validate.subscribe(this.lifetimeManager,(function(){t.validateField(!0)}));i.ensureValidation.subscribe(this.lifetimeManager,(function(){t.validateField()}));n=i.performValidation;n.subscribe(this.lifetimeManager,(function(i){n()!==null&&(t.validatableViewModel.enableValidation(i),i&&r&&r.validate(!0))})).callback(n())},e.prototype.linkFieldViewModels=function(){var n=this.options,t=this.validatableViewModel;n.enabled.subscribe(this.lifetimeManager,(function(n){t.disabled(!n)})).callback(n.enabled());t.loading=n.loading;t.dirty=n.dirty},e.prototype.
appendControl=function(n){return this._container.append(n),this},e.prototype.triggerValidation=function(){var e=this,t=[],u=this.validatableViewModel,r;if(u){this.validateField(!0);var i=!0,f=1,n=2;u.validators().forEach((function(r){var u=r.validationState(),o,s;u===3?(o=Q.defer(),t.push(o.promise),s=e.lifetimeManager.createChildLifetime(),r.validationState.subscribe(s,(function(t){(t===f||t===n)&&(o.resolve(t===n),s.dispose())}))):(u===f||u===n)&&(i=i&&u===n)}));t.push(Q(i))}return r=Q.defer(),Q.all(t).then((function(n){r.resolve(!n.some((function(n){return!n})))})),r.promise},e.prototype._getLabelId=function(){return this._labelHelper.labelId},e.prototype._getBalloonId=function(){return this._labelHelper.balloonId},e.prototype._addWidget=function(n){n&&this._widgetInstances.push(n)},e.prototype._createContent=function(){this._createControlsContainer()},e.prototype._createControlsContainer=function(){this._container=l("<div/>").addClass(it);this._labelHelper.appendWidgetToDom(this.element,this.
_container);this._container.toggleClass(tt,!this.options.subLabel)},e.prototype._createLabelAndSubLabel=function(){this._attachLabelAndSubLabel()},e.prototype._attachLabelAndSubLabel=function(n){var t,r,i,u;n===void 0&&(n={});t=this._labelHelper;r=this._container;n.inhibitLabel||t.insertLabelBefore(n.insertLabelBefore||r,n);t.insertValidationMessageBelowControlAfter(r,n.showValidationMessagesBelowControl,this._validationMessages);n.inhibitSubLabel||t.insertSubLabelAfter(n.insertSubLabelAfter||r);i=this.element.find("."+nt);u=n.toAriaLabel||i;u.attr(y,((i.attr(y)||"")+" "+t.labelId).trim());u.attr(p,((i.attr(p)||"")+" "+t.balloonId).trim());var o=this.lifetimeManager,f=this._required,e=this.options.valid;f&&f.subscribe(o,(function(n){n?i.attr(w,n):i.removeAttr(w)})).callback(f());e&&e.subscribe(o,(function(n){return i.attr("aria-invalid",!n)})).callback(e());this._disposables.push(i.setEvents([c.keydown,function(n){if(n.keyCode===112)return t.toggleBalloon(),!1;n.keyCode===27&&t.toggleBalloon(
!1)}],[c.focusout,function(){g.setTimeout((function(){l.contains(i[0],document.activeElement)||t.toggleBalloon(!1)}))}]))},e.prototype._clearValidation=function(){var n=this.validatableViewModel;return n&&n.validators().forEach((function(n){n.validationState(0)})),Q()},e.prototype._attachTelemetryEvents=function(){var t=this.options,n,i;if(t.telemetryKeys&&t.telemetryKeys.focus){n=this.element;i=function(i){n.has(i.relatedTarget).length===0&&d.trace({source:s.Source.FormControl,action:s.Action.FormFocused,actionModifier:t.telemetryKeys.focus})};n.on(b,i);n.on(k,i)}},e.prototype._disposeOfTelementryEvents=function(){var n=this.element;n.off(b);n.off(k)},e})(e.Widget);n.FieldWidget=ut})(c||(c={})),c}));define("MsPortalImpl.Controls/Fields/TextField",["require","exports","o","./Base/Field","Viva.Controls/Controls/Forms/Viva.TextBox","Viva.Controls/Controls/Base/ValidationPlacements/Viva.Css","Viva.Controls/Controls/Base/ValidationPlacements/Viva.DockedBalloon","../Controls/Lists/Base/Controls.Lists.ActionHandler"],
(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var h=jQuery,t="azc-textField",s="fxc-TextField",c=(function(n){function r(t,i,r){n.call(this,t,i,r)}return __extends(r,n),r.prototype._initializeField=function(){n.prototype._initializeField.call(this);this.element.addClass(t).addClass(s);this.textFieldInit()},r.prototype.dispose=function(){this._textBoxWidget&&(this._textBoxWidget.dispose(),this._textBoxWidget=null,this._textBoxViewModel=null);this._cleanElement(t,s);n.prototype.dispose.call(this)},i.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.defineProperty(r.prototype,"validatableViewModel",{get:function(){return this._textBoxViewModel},enumerable:!0,configurable:!0}),i.defineProperty(r.prototype,"validatableWidget",{get:function(){return this._textBoxWidget},enumerable:!0,configurable:!0}),r.prototype.textFieldInit=function(){var n=this,c,l=this.options,t=new u.ViewModel,s,v;t.events={};var i=t.events,a=t.
validationPlacements,r=l.actionHandler;this._textBoxViewModel=t;s=l.actionsEnabled;v=this.lifetimeManager;a.push(new f.Css);a.push(new e.DockedBalloon(e.DockedBalloon.defaultOptions));r&&(this._actionHandler=o.getOrCreateActionHandler(ko.unwrap(r)),ko.isObservable(r)&&r.subscribe(this.lifetimeManager,(function(t){n._actionHandler=o.getOrCreateActionHandler(t)})),i.enterPressed=function(){var t=n._actionHandler();t&&ko.unwrap(s)&&t.activateFirstItem()},i.downPressed=function(){var t=n._actionHandler();t&&ko.unwrap(s)&&t.focusFirstItem()},i.focus=function(){var t=n._actionHandler();t&&ko.unwrap(s)&&t.pseudoFocusFirstItem()},i.blur=function(){var t=n._actionHandler();t&&t.pseudoBlurFirstItem()},this._actionHandler.subscribe(v,(function(n){n&&t.focused()&&n.pseudoFocusFirstItem()})));c=h("<div />");this.appendControl(c);this.linkTextBoxViewModels();this._textBoxWidget=new u.Widget(c,t);this._addWidget(this._textBoxWidget);this.setupValidationBindings();l.value.subscribeAndRun(this.lifetimeManager,
(function(t){n.element.findByClassName("azc-input").toggleClass("fxc-inputhasvalue",!!t)}))},r.prototype.linkTextBoxViewModels=function(){var n=this._textBoxViewModel;n.value=this.options._msPortalFxWidgetValue;n.placeholder(this.options.emptyValueText());this.options.emptyValueText.subscribe(this.lifetimeManager,(function(t){n.placeholder(t)}));n.valueUpdateTrigger=this.options.valueUpdateTrigger;this._textBoxViewModel.readonly=ko.utils.wrap(this.options.readonly);this.linkValidatableControlViewModels()},r})(r.FieldWidget);n.Widget=c})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow",["require","exports","f","o","./Grid1.Extensibility","./Grid1.FocusableRow","../../../Fields/Base/FormValidation","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.EditableRow","../../../Fields/TextField"],(function(n,t,i,r,u,f,e,o,s){"use strict";var h;return (function(n){function w(n){switch(n){case t.Created:return 1;case t.Deleted:return 3;case t.Updated:return 2
case t.None:default:return 0}}function k(n,t){return n===t||n&&t&&n[h]&&n[h]===t[h]}var d=i.Base,g=d.Diagnostics,t=i.Data.EditState,nt=i.ViewModels,r=nt.Controls.Lists.Grid,a=r.EditableRowPlacement,tt=r.Format,it=r.HtmlBindingsType,v=i.isUndefined,y=ko.utils,c=ko.unwrap,rt=new g.Log("ImplGrid.EditableRowExtension"),p=s.EditableRowExtension.Name,b,h,l;n.getVivaEditableRowState=w,(function(n){n[n.Hold=0]="Hold";n[n.Release=1]="Release"})(b||(b={}));h="__gridGuid";l=(function(n){function i(){n.apply(this,arguments);this._creatingEmptyRow=!1}return __extends(i,n),i.prototype.beforeDestroy=function(){var n=this._detach;n&&n()},i.prototype.getExtension=function(n){var i=n,t=i.editableRow||{},r=t.placement,u={placement:r,automaticRowChangeEventListener:!0,allowEditExistingItems:!!t.allowEditExistingItems,allowEditCreatedItems:!!t.allowEditCreatedItems};return this._editableExtn=new s.EditableRowExtension(u)},i.prototype.initializeExtension=function(){var u=this,f=this._widget,e=f.lifetimeManager,
n=f.options,o=f._instance,t=o.getPlugin(p),g=n.extensionsOptions,i=g.editableRow,r=t.createdItems,s=this._ensureValidation.bind(this),b={rowAdd:function(i,r){r.preventExitEditing();s(r.targets,t,(function(){n.rowAdd&&n.rowAdd(i,r);r.editableRow.rowMetadata.editing(!1)}))},rowEdit:function(f,e){var h=e.editableRow,o=h.rowMetadata,l;o.emptyRow(!1);h.existingItem||(l=n.createdItems().some((function(n){return k(n,o.item)})),l||i.addCreated(o.item));s(null,t);i.placement===a.Bottom&&r().length<c(i.maxBufferedRows)&&u._ensureNewRow(t)}},d=o.element,h,l,w;d.on(b);this._detach=function(){u._detach=null;d.off(b)};h=i.validate;h&&h.subscribe(e,(function(){s(f.element,t)}));l=function(){var t=n.addEmptyRow(),i;t&&(i=o.getRowMetadata(t),i.editing(!0),i.emptyRow(!0),r.push(t))};y.arrayPushAll(r,n.createdItems());l();n.addEmptyRow.subscribe(e,(function(){l()}));n.createdItems.subscribeArrayEdits(e,(function(n){if(n=y.adjustArrayEdits(n),n.length){var e=r(),s=!1;r.valueWillMutate();n.forEach((function(n){var i=
!v(n.moved),r,u,t;switch(n.status){case"added":r=e.some((function(t){return k(t,n.value)}));(i||!r)&&e.splice(n.index,0,n.value);break;case"deleted":u=e.splice(n.index,1)[0];i||(s=!0,t=o.getRowMetadata(u),t.editing(!1),t.editState(0))}}));r.valueHasMutated();s&&(e.length<c(i.maxBufferedRows)&&u._ensureNewRow(t),u._ensureValidation(f.element,t))}}));w=i.maxBufferedRows;ko.isObservable(w)&&w.subscribe(e,(function(){return u._onMaxBufRowsChange()}))},i.prototype.getName=function(){return"EditableRow"},i.prototype.getOrder=function(){return 1},i.prototype.getDependencies=function(){return[new f.FocusableRowExtension]},i.prototype.columnAdded=function(n,t){var r=this._widget,i,u=n.editableFormat;v(u)?(rt.verbose("The EditableRowExtension was loaded but no editable format was specified. Using the default."),i=r._getFormatter(tt.HtmlBindings,{htmlBindingsType:it.TextBox})):i=r._getFormatter(u,n.editableFormatOptions||{});t.editableFormatter=i},i.prototype.columnRemoved=function(){},i.prototype.connectRowMetadataProperties=
function(n,i,r){var u=this,f=[];return f.push(ko.computed((function(){var n=r.editState();ko.ignoreDependencies((function(){var r=w(n);i.editState(r);i.editing(n===t.Created||n===t.Updated);r===3&&u._ensureValidation(u._widget.element,u._widget._instance.getPlugin(s.EditableRowExtension.Name))}))}))),f},i.prototype.getAdditionalItems=function(){return this._editableExtn.createdItems()},i.prototype.registerSubscriptionsToConnectMetadataProperties=function(n,t){var i=this;return this._editableExtn.createdItems.subscribe((function(){i._widget._connectMetadataAndDisposeSubscriptions(n,t)}))},i.prototype.enableRowDelete=function(){var n=this._widget.options.extensionsOptions;return n.editableRow.enableRowDelete!==!1},i.prototype.shouldHideContextMenu=function(n){return n.item===this._getEmptyRowItem()},i.prototype.getListDataForRightClick=function(){var n={},i=this._widget.options.extensionsOptions,t=i.editableRow;return n.deleteRowCommandTitle=t.deleteRowCommandTitle,n.markForDelete=function(n){
t.markForDelete(n)},n},i.prototype._ensureValidation=function(n,i,r){var f=this,u=this._widget.options.extensionsOptions;n&&(e.gatherFormFieldViewModels(n).forEach((function(n){var i=n.rowMetadata;i.editState&&i.editState()!==t.None&&n.performValidation()!==null&&n.performValidation(!0)})),r&&e.ensureFormFieldValidation(n,!1).then((function(n){if(n){r();var t=u.editableRow;t.placement===a.Top&&i.createdItems().length<c(t.maxBufferedRows)&&f._ensureNewRow(i)}})));e.ensureFormFieldValidation(this._widget.element,!1).then((function(n){var t=u.editableRow;t.valid&&t.valid(n)}))},i.prototype._getEmptyRowItem=function(){var n=this;return this._editableExtn.createdItems().first((function(i){return n._widget.getRowMetadata(i).editState()===t.None}))},i.prototype._ensureNewRow=function(n){var i=this,t;if(!this._creatingEmptyRow){if(t=this._widget.options.extensionsOptions,t.editableRow.enableRowAdd===!1)return;this._emptyNewRowExists(n)||(this._creatingEmptyRow=!0,t.editableRow.create().finally((function(
){i._creatingEmptyRow=!1})))}},i.prototype._emptyNewRowExists=function(n){var t=this;return n.createdItems().some((function(n){var i=t._widget._instance.getRowMetadata(n);return i.emptyRow()}))},i.prototype._onMaxBufRowsChange=function(){var i=this._widget,f=i.options.extensionsOptions.editableRow,r=f.maxBufferedRows(),n=i._instance.getPlugin(p),t=n.createdItems().length,u=this._emptyNewRowExists(n);t<r&&!u?this._ensureNewRow(n):t>r&&u&&n.createdItems.splice(t-1,1)},i})(o.GridExtension);n.EditableRowExtension=l;u.registerPlugin(r.Extensions.EditableRow,l)})(h||(h={})),h}));define("_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-searchBox{position:relative;display:inline-block;font-size:12px;padding-right:30px;height:23px;font-family:az_ea_font,wf_segoe-ui_normal,"Segoe UI","Segoe WP",Tahoma,Arial,sans-serif}.azc-searchBox.azc-searchBox-button-state-hidden .azc-button,.azc-searchBox.azc-searchBox-state-hidden{display:none}.azc-searchBox ::-ms-clear{display:none}.azc-searchBox.azc-searchBox-button-state-hidden{padding-right:0}.azc-searchBox .azc-button{height:23px;width:23px;min-width:23px;font-size:16px;line-height:normal;vertical-align:top;margin-left:0;padding:0;border:none;top:0;position:absolute}.azc-searchBox .azc-button .azc-searchBox-button-icon{position:absolute;top:-1px;left:6px}.azc-searchBox-wrapper{width:100%;height:100%;position:relative;float:left;padding:0}.azc-searchBox-wrapper .azc-searchBox-input{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:100%}.azc-searchBox-wrapper .azc-searchBox-input .azc-textBox-wrapper{padding-right:0;width:100%}.azc-searchBox-wrapper .azc-searchBox-input .azc-textBox-wrapper input{display:inline-block;padding-right:0}.azc-searchBox-search-icon{position:absolute;width:14px;height:14px;opacity:.3;top:4px;left:6px;pointer-events:none;display:none}.azc-searchBox-search-icon-visible .azc-searchBox-search-icon{display:block}.azc-searchBox-search-icon-visible .azc-textBox-wrapper input{padding-left:24px}')})
);define("Viva.Controls/Controls/Forms/Viva.SearchBox",["require","exports","o","../Base/Viva.ValueUpdateTrigger","./Viva.TextBox","./Viva.Button","../Base/Viva.ValidatableControl","MsPortalImpl/Base/Base.KeyboardHelper","MsPortalImpl/Generated/SvgStartupDefinitions","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","../../../_generated/Less/Viva.Controls/Controls/Forms/Viva.SearchBox.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){var p=s.Content.SvgStartup,c=jQuery,t="azc-searchBox",w="azc-searchBox-state-hover",a="azc-searchBox-state-hidden",v="azc-searchBox-button-state-hidden",b="__azc-searchBox",k="<div class='azc-searchBox-wrapper' data-bind='css: { \"azc-searchBox-search-icon-visible\": data.searchIconVisible }'><div class='azc-searchBox-search-icon msportalfx-svg-flip-horizontal'>"+p.search.data+"<\/div><div class='azc-searchBox-input' data-bind='azcTextBox: $ctl._textBoxViewModel'><\/div><\/div><button data-bind='azcButton: $ctl._buttonViewModel'><div class='azc-searchBox-button-icon'>&times;<\/div><\/button>",
d=0,y=(function(n){function t(){n.apply(this,arguments);this.queryString=ko.observable("");this.visible=ko.observable(!0);this.closeButtonVisible=ko.observable(!0);this.searchIconVisible=ko.observable(!0);this.placeholder=ko.observable("Search...")}return __extends(t,n),t})(e.ViewModel),l;n.ViewModel=y;l=(function(n){function e(i,e,o){n.call(this,i,e,c.extend({viewModelType:y},o));this.element.addClass(t).html(k);this._name=this.options.name||b+d++;this._button=this.element.find("button");this._input=this.element.find(".azc-searchBox-input");this.options.keyDownEvent=this.options.keyDownEvent||c.noop;this._textBoxViewModel=new u.ViewModel;this._textBoxViewModel.value=this.options.queryString;this._textBoxViewModel.valueUpdateTrigger=r.ValueUpdateTrigger.Input;this._textBoxViewModel.placeholder=this.options.placeholder;this._buttonViewModel=new f.ViewModel;this._buttonViewModel.isDefault(!0);this._buttonViewModel.visible=this.options.closeButtonVisible;this._attachEvents();this._initializeComputeds(
);this._bindDescendants();this._afterCreate()}return __extends(e,n),e.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(t,w,a,v),n.prototype.dispose.call(this))},i.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype._getElementToFocus=function(){var n=this.element.find("input");return n.length>0?n[0]:null},e.prototype._initializeComputeds=function(){var n=this;this._addDisposablesToCleanUp(ko.computed((function(){var t=n.$disabled(),i=n.options.dirty();n._buttonViewModel.disabled(t);n._textBoxViewModel.disabled(t);n._textBoxViewModel.dirty(i)})));this._addDisposablesToCleanUp(ko.computed((function(){n.element.toggleClass(a,!n.options.visible())})));this._addDisposablesToCleanUp(ko.computed((function(){n.element.toggleClass(v,!n.options.closeButtonVisible())})))},e.prototype._attachEvents=function(){var n=this;this._detachEvents();this._buttonClickHandler=
function(){n.options.queryString("");n.options.visible(!1)};this._inputKeyDownHandler=function(t){c.contains(n._input[0],document.activeElement)&&(o.getModifierKeys(t)===0&&t.which===27&&(n.options.queryString(""),t.preventDefault()),n.options.keyDownEvent(t))};this._button.on("click."+t,this._buttonClickHandler);this.element.on("keydown.azcSearchBox",this._inputKeyDownHandler)},e.prototype._detachEvents=function(){this._buttonClickHandler&&(this._button.off("click."+t,this._buttonClickHandler),this._buttonClickHandler=null);this._inputKeyDownHandler&&(this.element.off("keydown.azcSearchBox",this._inputKeyDownHandler),this._inputKeyDownHandler=null)},e})(e.Widget);n.Widget=l;ko.bindingHandlers.azcSearchBox=h.getBindingHandler(l)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-filterable.azc-grid.azc-grid-headerHidden:not(.azc-grid-groupable) .azc-grid-filterable-searchBox{margin-bottom:14px}.azc-grid-filterable.azc-grid.azc-grid-filterable-active .azc-grid-reorderRow-cell div{visibility:hidden}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox{display:block}.azc-grid-filterable.azc-grid .azc-grid-filterable-searchBox.azc-searchBox-state-hidden{display:none}.azc-grid-filterable.azc-grid .azc-grid-filterable-match{font-style:normal}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable",["require","exports","f","o","./Viva.Grid1.FocusableRow","./Viva.Grid1.Formatters","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","../../Forms/Viva.SearchBox","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Filterable.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){var w=i.Util,l=jQuery,a=window,b=300,k=" ",v="azc-grid-filterable-active",t="azc-grid-filterable",d="<div class='azc-grid-filterable-searchBox' data-bind='azcSearchBox: $ctl.getPlugin(\""+t+"\")._searchBoxVM'><\/div>",y="###EXISTING_TEMPLATE_BODY_CORE###",g='<!-- ko ifnot: $ctl.getPlugin("'+t+'").options.serverFilter() -->'+('<!-- ko if: $ctl.getPlugin("'+t+'").filterActive() -->')+('<!-- ko if: $ctl.getPlugin("'+t+'").results().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+
t+'").results() } --><!-- /ko -->')+"<\/tbody><!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+t+'").results().length -->')+"<!-- ko if: data.items().length --><tbody role='rowgroup' class='azc-grid-empty' data-bind='if: data.noRowsMessage'><tr role='row'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: data.noRowsMessage'><\/td><\/tr><\/tbody><!-- /ko --><!-- /ko --><!-- /ko --><!-- /ko -->"+('<!-- ko if: $ctl.getPlugin("'+t+'").options.serverFilter() || !$ctl.getPlugin("'+t+'").filterActive() -->')+y+"<!-- /ko -->",nt="(['|\"]?)([\"|']?trustedHtml[\"|']?:)(.*),",tt="$1$2 "+('$ctl.getPlugin("'+t+'").filterActive() ')+('? $ctl.getPlugin("'+t+'")._filterableCellFormat($parentContext.$parentContext.$index, $index, $parent, $data) ')+": $3,",it='<em class="azc-grid-filterable-match fxs-highlight">$&<\/em>',c=ko.observable,p=ko.observableArray,rt=ko.computed,ut=(function(n){function i(t){n.call(this);this._options=l.extend(this._getDefaultFilterableOptions(
),t);this._results=p();this._filterActive=c(!1);this._displayedCols=[];this._colMap={};this._colNumMap={};this._resultTokenMap={}}return __extends(i,n),r.defineProperty(i.prototype,"filterActive",{get:function(){return this._filterActive},enumerable:!0,configurable:!0}),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(i.prototype,"results",{get:function(){return this._results},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){var u=n.getHtmlTemplate("table"),f=n.getTemplate("bodyCore"),e=g.replace(y,f),t=n.getTemplate("bodyCellContent"),i=new RegExp(nt),r=t;t.match(i)&&(r=t.replace(i,tt));u.prepend(".azc-grid-container",d);n.setTemplate("bodyCore",e);n.setTemplate("bodyCellContent",r)},i.prototype.afterCreate=function(){var n=this,t=this._widget;[function(){n._searchBoxVM.visible(n._options.searchBoxVisible())},function(){var t=l.trim(n._searchBoxVM.queryString());n._queryTimeout&&a.clearTimeout(
n._queryTimeout);n._queryTimeout=a.setTimeout((function(){n._queryTimeout=null;n._resetResults();n._filterHandler(t)}),n.options.valueUpdateDelayTimeout())},function(){var i=t.options.columns();n._colMap={};n._colNumMap={};i.forEach((function(t,i){n._colMap[t.itemKey]=t;n._colNumMap[t.itemKey]=i;n._displayedCols.push(t.itemKey)}))},function(){t.element.toggleClass(v,n._filterActive())},function(){t.options.items();n._filterActive.peek()&&n._results(n._getResultItems(n._parseQueryString(n._searchBoxVM.queryString.peek())))}].forEach((function(i){rt(i,n,{disposeWhenNodeIsRemoved:t.element[0]})}));t.lifetimeManager.registerForDispose(this.options.serverFilter.subscribe((function(){n._resetAndFilterResults(l.trim(n._searchBoxVM.queryString()))})))},i.prototype.beforeCreate=function(){var n=this;this._searchBoxVM=new h.ViewModel;this._searchBoxVM.queryString=this.options.queryString;this._searchBoxVM.closeButtonVisible=this.options.searchBoxCloseButtonVisible;this._searchBoxVM.placeholder=this.options.
searchBoxPlaceholder;this._searchBoxVM.keyDownEvent=function(t){var r=n._widget.getPlugin(u.FocusableRowExtension.Name),i=s.getModifierKeys(t);r&&t.which===9&&(i===0||i===4)&&r._focus(t);i===0&&t.which===13&&n._resetAndFilterResults(l.trim(n._searchBoxVM.queryString()))}},i.prototype.beforeDestroy=function(){this._widget.element.removeClass(v)},i.prototype.getDefaultRowMetadataProperties=function(){return{}},i.prototype.getName=function(){return i.Name},i.prototype.getOrder=function(){return 100},i.prototype.shouldNotAllowDrag=function(){return this._widget.element.hasClass(v)?!0:!1},i.prototype._parseQueryString=function(n){for(var i=n.split(k),t=0;t<i.length;t++)this._resultTokenMap[i[t]]=[];return i},i.prototype._resetAndFilterResults=function(n){this._queryTimeout&&(a.clearTimeout(this._queryTimeout),this._queryTimeout=null,this._resetResults());this._filterHandler(n)},i.prototype._filterHandler=function(n){this.options.serverFilter()&&this.options.filterCallback()?this.options.filterCallback(
)(n):n===""?this._filterActive(!1):(this._filterActive(!0),this._results(this._getResultItems(this._parseQueryString(w.encodeHtml(n)))))},i.prototype._getResultItems=function(n){var t=this,o=this._getSearchableColumns(),r,s,h=[],u=[],i,f,e;return this._widget.options.items().forEach((function(c,l){for(u=[],f=0;f<o.length;f++)if(r=o[f],c.hasOwnProperty(r))for(s=t._getFormattedItemValue(c[r],{item:c,rowMetadata:t._widget.getRowMetadata(c),rowNumber:function(){return l},columnNumber:function(){return t._colNumMap[r]},column:t._colMap[r]}),e=0;e<n.length;e++)i=n[e],s.toLowerCase().indexOf(i.toLowerCase())!==-1&&(u.indexOf(i)===-1&&u.push(i),t._resultTokenMap[i].indexOf(c)===-1&&t._resultTokenMap[i].push(c));u.length===n.length&&h.push(c)})),h},i.prototype._filterableCellFormat=function(n,t,i,r){var o=i.item,s=r.itemKey,l=o[s],a={item:i.item,rowNumber:n,columnNumber:t,rowMetadata:i,column:r},f=this._getFormattedItemValue(l,a),v=this._getSearchableColumns(),h,u,e=[],c;for(u in this._resultTokenMap)
h=this._resultTokenMap.hasOwnProperty(u)&&this._resultTokenMap[u].indexOf(o)!==-1&&v.indexOf(s)!==-1,h&&e.push(this._regexStringEscape(u));return e.length&&(c="("+e.join("|")+")",f=this._highlightMatches(f,c)),f},i.prototype._highlightMatches=function(n,t){var i=n;return i.replace(new RegExp(t,"gi"),it)},i.prototype._regexStringEscape=function(n){var t=new RegExp("([!\"#$%&'()*+,./:;<=>?@[\\]^`{|}~\\\\])","g");return n.replace(t,"\\$1")},i.prototype._getFormattedItemValue=function(n,t){var i,r;if(t.column&&t.column.filterFormatter)r=t.column.filterFormatter(n,t);else{i=ko.toJS(n);switch(typeof i){case"object":r=f.text(JSON.stringify(i),t);break;default:r=f.text(i,t)}}return r},i.prototype._getSearchableColumns=function(){return this.options.searchableColumns().length?this.options.searchableColumns():this._displayedCols},i.prototype._resetResults=function(){this._results.removeAll();this._resultTokenMap={}},i.prototype._getDefaultFilterableOptions=function(){return{searchableColumns:p(),
searchBoxVisible:c(!0),searchBoxPlaceholder:c(o.Viva.Grid.Filterable.placeholder),searchBoxCloseButtonVisible:c(!0),queryString:c(""),serverFilter:c(!1),filterCallback:c(null),valueUpdateDelayTimeout:c(b)}},i.Name=t,i})(e.Extension);n.FilterableExtension=ut})(c||(c={})),c}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var s=i.ViewModels.Controls.Lists.Grid,h=300,t=ko.observable,c=ko.observableArray,r=(function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.getExtension=function(n){var u=n,i=u&&u.filterable,r;return i&&(r={searchBoxCloseButtonVisible:i.searchBoxCloseButtonVisible||t(!0),searchBoxPlaceholder:i.searchBoxPlaceholder||t(e.Viva.Grid.Filterable.placeholder),searchBoxVisible:i.searchBoxVisible||t(
!0),searchableColumns:i.searchableColumns||c(),queryString:i.queryString||t(""),serverFilter:i.serverFilter||t(!1),valueUpdateDelayTimeout:i.valueUpdateDelayTimeout||t(h)}),this._options=r,new o.FilterableExtension(r)},i.prototype.getName=function(){return"Filterable"},i.prototype.getOrder=function(){return 0},i.prototype.columnAdded=function(n,t){t.filterFormatter=null;var i=n.filterableFormat;i!==undefined&&(t.filterFormatter=this._widget._getFormatter(i,n.filterableFormatOptions||{}))},i})(f.GridExtension);n.FilterableExtension=r;u.registerPlugin(s.Extensions.Filterable,r)})(s||(s={})),s}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover",["require","exports","u","o","./Viva.Grid1.FocusableRow","../../../Util/Viva.Util","./Viva.Grid1"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var i=MsPortalFx,c=jQuery,o=window,l='css: { "azc-external-hovered": $data === $ctl.getPlugin("azc-grid-hoverableRow")._hoveredRowMetadata() }',t=ko.observable,s=ko.unwrap,
h=ko.dataFor,a=i.disposeDisposable,v=(function(n){function e(i){n.call(this);this._disposables=[];this._options=i||{};this._hoverIDKey=this._options.hoverIDKey||t();this._hoveredID=this._options.hoveredID||t();this._hoveredRowMetadata=t(null);this._backupIdMax=0}return __extends(e,n),r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.beforeCreate=function(){this._focusableRowExtension=this._widget.getPlugin(u.FocusableRowExtension.Name);this._focusableRowExtension.externalHover=!0},e.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore");t.addAttribute("tr","data-bind",l)},e.prototype.getDefaultRowMetadataProperties=function(){return{hovered:t(!1)}},e.prototype.afterAttachEvents=function(){var t=this,n=this,i=this._widget.element;this._disposables.push(i.setEvents(["rowFocus.azcHovered",function(t,i){n._onRowFocus(t,i)}],["mouseenter.azcHovered","> .azc-grid-container .azc-grid-full > tbody > tr.azc-grid-row:not([aria-disabled=true])",
function(i){var r;!t._preventMouseHandler&&i.currentTarget&&(r=h(i.currentTarget),n._hoveredRowMetadata(r))}],["mouseleave.azcHovered",function(){t._preventMouseHandler||n._hoveredRowMetadata(null)}],["focus.azcHovered",function(t){if(!n._hoveredRowMetadata()){var i;t.currentTarget&&(i=h(t.currentTarget),n._hoveredRowMetadata(i),n._focusedByEvent=!0)}}],["blur.azcHovered","tbody.azc-grid-groupdata",function(){n._focusedByEvent&&n._hoveredRowMetadata()&&(n._hoveredRowMetadata(null),n._focusedByEvent=!1)}]))},e.prototype.afterCreate=function(){var n=this,i,r,t;this._rebuildIdRowMetadaMap();t=this._widget;t.options.items.subscribeArrayChanges(t.lifetimeManager,(function(u){r=s(u[n._hoverIDKey()]);r||(r=(n._backupIdMax++).toString());i=t.getRowMetadata(u);i.hoverID=r;n._idRowMetadataMap[r]=i}),(function(r){i=t.getRowMetadata(r);delete n._idRowMetadataMap[i.hoverID]}));t._addDisposablesToCleanUp([this._hoveredID.subscribe((function(t){n.hoverRowByHoverId(t)})),this._hoveredRowMetadata.subscribe((function(
t){var i=t?t.hoverID:null;i!==n._hoveredID.peek()&&n._hoveredID(i)}))])},e.prototype.getOrder=function(){return 30},e.prototype.getDependencies=function(){return[new u.FocusableRowExtension(this.options)]},e.prototype.beforeDestroy=function(){a(this._disposables);this._disposables=[];this._resetPreventMouseHandlerTimer()},e.prototype.getName=function(){return e.Name},e.prototype.hoverRowByHoverId=function(n){var t=this._getRowMetadataFromHoverID(n);this.hoverRowByRowMetadata(t)},e.prototype.hoverRowByRowMetadata=function(n,t){if(this._hoveredRowMetadata.peek()!==n){if(this._inHoverRowByRowMetadata){console.error(" FocusableRowHoverExtension hoverRowByRowMetadata go into recursive called. Please verify."+i.Base.Utilities.getCurrentCallStack(!0));return}try{if(this._inHoverRowByRowMetadata=!0,this._hoveredRowMetadata(n),n){var r={hovered:n};this._widget.trigger("rowHover",t?f.cloneEvent(t,"rowHover"):c.Event("rowHover"),r);this._widget.options.events("hover",r)}}finally{this._inHoverRowByRowMetadata=
!1}}},e.prototype._resetPreventMouseHandlerTimer=function(){this._preventMouseHandler=!1;this._preventMouseHandlerTimer!==null&&(o.clearTimeout(this._preventMouseHandlerTimer),this._preventMouseHandler=null)},e.prototype._onRowFocus=function(n,t){var r=this,i;this._focusedByEvent=!!n;this._focusedByEvent&&(this._resetPreventMouseHandlerTimer(),this._preventMouseHandler=!0,this._preventMouseHandlerTimer=o.setTimeout((function(){r._resetPreventMouseHandlerTimer()}),250));t.focused?(i=t.focused,this.hoverRowByRowMetadata(i,n)):this.hoverRowByRowMetadata(null)},e.prototype._getRowMetadataFromHoverID=function(n){var t;return i.isNullOrUndefined(n)||(t=this._idRowMetadataMap[n]),t||null},e.prototype._rebuildIdRowMetadaMap=function(){var i=this,r=this._widget._getAllRowMetadata(),u=this._hoverIDKey.peek(),n,t={};this._backupIdMax=0;r.forEach((function(r){n=s(r.item[u]);n=n?n.toString():(i._backupIdMax++).toString();t[n]=r;r.hoverID=n}));this._idRowMetadataMap=t},e.Name="azc-grid-hoverableRow",e})(
e.Extension);n.FocusableRowHoverExtension=v})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.FocusableRowHover"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var o=i.ViewModels.Controls.Lists.Grid,t=ko.observable,r=(function(n){function i(){n.apply(this,arguments)}return __extends(i,n),i.prototype.beforeDestroy=function(){},i.prototype.getExtension=function(n){var r=n,i=r.hoverable||{};return new e.FocusableRowHoverExtension({focusable:i.focusable||t(!0),hoverIDKey:i.hoverIDKey||t(),hoveredID:i.hoveredID||t()})},i.prototype.initializeExtension=function(){},i.prototype.getName=function(){return"FocusableRowHover"},i.prototype.getOrder=function(){return 0},i})(f.GridExtension);n.FocusableRowHoverExtension=r;u.registerPlugin(o.Extensions.Hoverable,r)})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings",
["require","exports","f","o","../../Base/Formatters","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Formatters","../../../../MsPortalImpl/Base/Base.KnockoutTemplateSanitizer","../../../../MsPortalImpl/Base/Base.ImplUtils"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(t){function w(t,i,u,f){var e=i||"";switch(t){case r.MultiselectDropDown:case r.TextBox:case r.CheckBox:case r.DropDown:case r.GroupDropDown:case r.CheckBoxRowSelection:return"<div data-bind='formElement: $data' data-grid-formelement='"+r[t]+"'><\/div>"}return u||(e=s.sanitizeHTML(new y(e,n,f),{allowFastForEach:!1}).sanitizedMarkup),e}function v(n,t,i){switch(t){case r.MultiselectDropDown:return c.multiselectDropDown(n,i);case r.TextBox:return c.textBox(n,i);case r.CheckBox:return c.checkBox(n,i);case r.DropDown:return c.dropDown(n,i);case r.GroupDropDown:return c.groupDropDown(n,i);case r.CheckBoxRowSelection:return c.rowSelectionCheckBox(n);case r.Default:default:
return function(n,t,i){return{value:t,settings:i}}}}var y=h.ProvenanceContainer,a=i.ViewModels.Controls.Lists.Grid,p=a.Format,r=a.HtmlBindingsType,c=u.ControlViewModels,l;t.getHtmlBindingsViewModel=v;l=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getName=function(){return"FormatterHtmlBindings"},t.prototype.getOrder=function(){return 0},t.prototype.getSafeFormatter=function(n,t,i){switch(n){case p.HtmlBindings:var r=this._widget&&this._widget.element;return o.htmlBindings(w(t.htmlBindingsType,t.htmlBindingsTemplate,i,r),v(this._widget.lifetimeManager,t.htmlBindingsType,t.htmlBindingsData))}return null},t})(e.GridExtension);t.FormatterHtmlBindingsExtension=l;f.defaultPlugins.push(l)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid-groupable.azc-grid.azc-grid-headerHidden .azc-grid-groupdata:first-of-type tr.azc-grid-groupheader td{border-top-width:0}.azc-grid-groupable.azc-grid .azc-grid-groupdata:first-of-type tr.azc-grid-groupheader td{border-top-width:1px}.azc-grid-groupable.azc-grid .azc-grid-groupdata tr.azc-grid-groupheader td{padding-top:15px;font-size:10px;font-family:az_ea_font,wf_segoe-ui_semibold,"Segoe UI Semibold","Segoe WP Semibold","Segoe UI","Segoe WP",Tahoma,Arial,sans-serif;text-transform:uppercase;border-top-width:0}.azc-grid-groupable.azc-grid .azc-grid-groupdata tr.azc-grid-groupheader:hover{background-color:inherit}.azc-grid-groupable.azc-grid .azc-grid-groupdata tr:not(.azc-grid-groupheader) td.azc-grid-cell:first-of-type{padding-left:30px}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable",["require","exports","f","u","o","./Viva.Grid1.Formatters","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Groupable.css"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){function c(n){return n=s(n),l(n)?"":n}function b(n,t,i){var r=[],u=[],f=[];return t.forEach((function(t){var i=c(t[n]),f=i.toString();u.indexOf(f)===-1&&(r.push(i),u.push(f))})),r.forEach((function(n){f.push(new y(n,i))})),f}function k(n,t,i){var r=[],u=[];return t===0?u=n:(n.forEach((function(n){n.sortFormatter?r.push(n.sortFormatter(s(n.value))):r.push(s(n.value))})),i?r.sort(i):r.sort(),t===2&&r.reverse(),r.forEach((function(t){n.forEach((function(n){var i=n.sortFormatter?n.sortFormatter(s(n.value)):s(n.value);t.toString()===i.toString()&&u.push(n)}))}))),u}function d(n,t,i){var r,u,f;n.options.items().forEach((function(e){r="";f=c(e[i]);t.forEach((function(n){u=c(n.
value);f.toString()===u.toString()&&(r=u)}));n.getRowMetadata(e).groupId(r)}))}function g(n,t){if(t===null||t===r)throw new Error("groupId cannot be null or undefined when fetching group items.");return a((function(){var i=[],u=s(t).toString(),r;return n.options.items().forEach((function(t){r=c(n.getRowMetadata(t).groupId);r.toString()===u&&i.push(t)})),i}))}var l=i.isNullOrUndefined,h=ko.observable,a=ko.computed,s=ko.toJS,v=jQuery,t="azc-grid-groupable",w="<!-- ko if: data.items().length -->"+('<!-- ko foreach: $ctl.getPlugin("'+t+'").groups -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='row' class='azc-grid-groupheader'>"+("<td role='gridcell' class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+t+'")._headerCellFormat(formatter, value), attr: { "aria-label": value, colspan: $ctl._getTotalColumns() }\'><\/td>')+"<\/tr>"+('<!-- ko if: $ctl.getPlugin("'+t+'").getItemsByGroup(value)().length -->')+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+
t+'").getItemsByGroup(value)() } --><!-- /ko -->')+"<!-- /ko -->"+('<!-- ko ifnot: $ctl.getPlugin("'+t+'").getItemsByGroup(value)().length -->')+"<tr role='row'><td role='gridcell' data-bind='attr: { colspan: $ctl._getTotalColumns() }, html: $vm.noRowsMessage' class='azc-br-muted'><\/td><\/tr><!-- /ko --><\/tbody><!-- /ko -->"+('<!-- ko if: $ctl.getPlugin("'+t+'").getItemsByGroup("")().length -->')+"<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='row' class='azc-grid-groupheader'>"+("<td rol='gridcell' class='azc-br-muted' data-bind='trustedHtml: $ctl.getPlugin(\""+t+'").options.noGroupLabel(), attr: { "aria-label": $ctl.getPlugin("'+t+"\").options.noGroupLabel(), colspan: $ctl._getTotalColumns() }'><\/td>")+"<\/tr>"+("<!-- ko template: { name: 'bodyRows', foreach: $ctl.getPlugin(\""+t+'").getItemsByGroup("")() } --><!-- /ko -->')+"<\/tbody><!-- /ko --><!-- /ko -->",y=(function(){function n(n,t,i){this.value=n;this.formatter=t||f.text;this.sortFormatter=i}return n})(),p;n.Group=
y;p=(function(n){function i(t){n.call(this);this._groupItems={};this._options=v.extend(this._getDefaultGroupOptions(),t);l(this._options.groups)&&(this._options.groups=h(null))}return __extends(i,n),u.defineProperty(i.prototype,"groups",{get:function(){return this._groups},enumerable:!0,configurable:!0}),u.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){n.setTemplate("bodyCore",w)},i.prototype.beforeCreate=function(){var n=this;this._groups=a((function(){var t=[],i=n.options.groups(),r;return i?t=i:(r=n.options.headerFormatter||f.text,t=b(n.options.groupKey(),n._widget.options.items(),r)),d(n._widget,t,n.options.groupKey()),k(t,n.options.sortOrder(),n.options.sortFunction)}))},i.prototype.beforeDestroy=function(){var n=this;this._groups&&(this._groups.dispose(),this._groups=null);this._groupItems&&(u.getOwnPropertyNames(this._groupItems).forEach((function(t){var i=n._groupItems[t];i&&(v.isFunction(
i.dispose)&&i.dispose(),n._groupItems[t]=null)})),this._groupItems=null)},i.prototype.getItemsByGroup=function(n){return n=s(n),this._groupItems[n]||(this._groupItems[n]=g(this._widget,n)),this._groupItems[n]},i.prototype.getDefaultRowMetadataProperties=function(){return{groupId:h("")}},i.prototype.getName=function(){return i.Name},i.prototype.getOrder=function(){return 70},i.prototype._getDefaultGroupOptions=function(){return{groupKey:h(""),headerFormatter:f.text,groups:h(null),noGroupLabel:function(){return o.Viva.Grid.Groupable.noGroupLabel},sortOrder:h(1),sortFunction:null}},i.prototype._headerCellFormat=function(n,t){return n(t)},i.Name=t,i})(e.Extension);n.GroupableExtension=p})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Groupable"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(
n){function s(n){var i,r=t.SortFunction;switch(n){case r.DateTime:i=function(n,t){var i=new Date(n).getTime(),r=new Date(t).getTime();return i<r?-1:i>r?1:0};break;case r.SettingListGroupOrder:i=function(n,t){var i=h.SettingList.Group.support;return n===i?-1:t===i?1:0};break;default:i=null}return i}var h=i.Resources.Strings.Part,t=i.ViewModels.Controls.Lists.Grid,r=ko.computed,e=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var f=n,i=this._widget,u=i.element[0],t=f.groupable;return new o.GroupableExtension({groupKey:t.groupKey,headerFormatter:i._getFormatter(t.headerFormat,t.headerFormatOptions),groups:r((function(){var n;return t&&t.groups&&(n=[],t.groups().forEach((function(t){var u=i._getFormatter(t.format,t.formatOptions),r=null;t.sortFormat&&(r=i._getFormatter(t.sortFormat,t.sortFormatOptions));n.push(new o.Group(t.value,u,r))}))),n}),this,{disposeWhenNodeIsRemoved:u}),noGroupLabel:i._getFormatter(
t.noGroupLabelFormat,t.noGroupLabelFormatOptions),sortFunction:s(t.sortFunction),sortOrder:r((function(){var n=1;return t&&t.sortOrder&&(n=t.sortOrder()),n}),this,{disposeWhenNodeIsRemoved:u})})},t.prototype.initializeExtension=function(){},t.prototype.getName=function(){return"Groupable"},t.prototype.getOrder=function(){return 0},t.prototype.connectRowMetadataProperties=function(n,t,i){var r=[];return r.push.apply(r,this._widget._twoWayBinding(i.groupId,t.groupId)),r},t})(f.GridExtension);n.GroupableExtension=e;n.getSortFunction=s;u.registerPlugin(t.Extensions.Groupable,e)})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid.azc-grid-hierarchical .azc-grid-hierarchical-cell-flexcontainer{display:-webkit-flex;display:flex;-webkit-align-items:center;align-items:center}.azc-grid.azc-grid-hierarchical .azc-grid-hierarchical-cell-flexcontainer .azc-grid-hierarchical-icon,.azc-grid.azc-grid-hierarchical .azc-grid-hierarchical-cell-flexcontainer .azc-grid-hierarchical-indent{display:inline-block;flex:0 0 auto;width:16px;height:16px;top:3px}.azc-grid.azc-grid-hierarchical .azc-grid-hierarchical-cell-flexcontainer .azc-grid-hierarchical-icon .azc-grid-hierarchical-icon-collapsed{margin-top:3px;margin-left:5.5px;width:0;height:0;background:0 0;border-style:solid;border-width:5px 0 5px 5px;border-top-color:transparent!important;border-right-color:transparent!important;border-bottom-color:transparent!important}.azc-grid.azc-grid-hierarchical .azc-grid-hierarchical-cell-flexcontainer .azc-grid-hierarchical-icon .azc-grid-hierarchical-icon-expanded{margin-top:5.5px;margin-left:3px;width:0;height:0;background:0 0;border-style:solid;border-width:5px 5px 0;border-right-color:transparent!important;border-bottom-color:transparent!important;border-left-color:transparent!important}.azc-grid.azc-grid-hierarchical .azc-grid-hierarchical-cell-flexcontainer .azc-grid-cellContent{flex:1 1 auto}.azc-grid.azc-grid-hierarchical .azc-grid-hierarchical-cell-flexcontainer thead tr th.azc-grid-hierarchical-header>a{padding-left:26px}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical",["require","exports","f","o","./Viva.Grid1","./Viva.Grid1.FocusableRow","MsPortalImpl/Base/Base.KeyboardHelper","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Hierarchical.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function v(){return{hierarchy:null}}function y(n){return n.expandable&&(n.expandable()===!0||n.expandable()===undefined)}function s(n,t,i){var r=ko.dataFor(t),u=r?r.item:null,f=n.hierarchy;return u&&y(u)?(i?u.expanded()||f.expand(r.item):u.expanded()&&f.collapse(r.item),!0):!1}var t=jQuery,h='css: { "azc-grid-hierarchical-toplevel": item.depth() === 0 }',c='css: { "azc-grid-hierarchical-header": hierarchical }',o="tr[data-grid-focusable]",l="<div class='azc-grid-hierarchical-cell-flexcontainer'><!-- ko if: hierarchical --><!-- ko foreach: new Array($parent.item.depth()) --><div class='azc-grid-hierarchical-indent'><\/div><!-- /ko --><div class='azc-grid-hierarchical-icon' data-bind='if: $parent.item.expandable() === true || $parent.item.expandable() === undefined, click: function () { $parent.item.expanded() ? $ctl.getPlugin(\"azc-grid-hierarchical\").options.hierarchy.collapse($parent.item) : $ctl.getPlugin(\"azc-grid-hierarchical\").options.hierarchy.expand($parent.item); }, clickBubble: false, attr: { tabindex: $parent.item.expandable() === true ? $tabIndex() : $focusIndex() }'><div data-bind='css: {\"azc-grid-hierarchical-icon-collapsed\": !$parent.item.expanded(), \"azc-grid-hierarchical-icon-expanded\": $parent.item.expanded() }'><\/div><\/div><!-- /ko --><div class='azc-grid-cellContent' data-bind='css: { \"azc-grid-cell-ellipse\": $data.enableEllipse, \"azc-grid-cell-fullheight\": $data.fullHeight }, trustedHtml: $ctl._cellFormat($parentContext.$parentContext.$index, $index, $parent, $data)'><\/div><\/div>",
a=i.disposeDisposable,p=(function(n){function i(i){n.call(this);this._disposables=[];this._options=t.extend(v(),i)}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("headerCell");i.addAttribute("th","data-bind",c);t.addAttribute("tr","data-bind",h);n.setTemplate("bodyCellContent",l)},i.prototype.afterCreate=function(){},i.prototype.afterAttachEvents=function(){var n=this;this._disposables.push(this._widget.element.setEvents(["keydown.azcGrid",o,function(i){var h=t(i.target),u=h.closest(o),c=e.getModifierKeys(i),r,f;if(c===0&&u&&u.length>0){r=!0;f=n.options;switch(i.which){case 37:r=s(f,u[0],!1);break;case 39:r=s(f,u[0],!0);break;default:r=!1}r&&(i.preventDefault(),i.stopPropagation())}}]))},i.prototype.beforeDestroy=function(){a(this._disposables);this._disposables=[]},i.prototype.getName=function(){return i.
Name},i.prototype.getOrder=function(){return 18},i.prototype.getDependencies=function(){return[new f.FocusableRowExtension]},i.prototype.getDefaultColumnProperties=function(){return{hierarchical:!1}},i.prototype.shouldNotAllowSelectAll=function(){return!0},i.Name="azc-grid-hierarchical",i})(u.Extension);n.HierarchicalExtension=p})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Hierarchical"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.getExtension=function(n){var t=n,i=t&&t.hierarchical;return new e.HierarchicalExtension(i)},t.prototype.initializeExtension=function(){},t.prototype.beforeDestroy=function(){},t.prototype.getName=function(){return"Hierarchical"},t.prototype.getOrder=function(){return 0}
,t})(f.GridExtension);n.HierarchicalExtension=t;u.registerPlugin(r.Extensions.Hierarchical,t)})(o||(o={})),o}));define("_generated/Less/Viva.Controls/Controls/Viva.Pager.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-pager ul{list-style:none;margin:0;padding:0;overflow:auto}.azc-pager ul li{float:left;text-align:center}.azc-pager ul li:last-child{margin-right:0}.azc-pager ul li a{display:block;padding:0 12px;font-size:11px;line-height:23px;color:inherit;text-decoration:none}.azc-pager ul li.azc-pager-arrow,.azc-pager ul li.azc-pager-page{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-pager ul li.azc-pager-arrow{margin-left:5px;width:30px;opacity:.5}.azc-pager ul li.azc-pager-arrow:hover{opacity:.75}.azc-pager ul li.azc-pager-arrow a{background-color:#ccc}.azc-pager ul li.azc-pager-arrow a[href]:hover{background-color:#f5f5f5}.azc-pager ul li.azc-pager-arrow a img{border:0}.azc-pager ul li.azc-pager-arrow.azc-pager-arrow-previous a span:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2IiBoZWlnaHQ9IjExIiB2aWV3Qm94PSIwIDAgMTEgMTciPg0KICAgIDxwYXRoIGZpbGw9IiMzMjM4M2YiIGQ9Ik05LjUgMGwxLjQgMS40LTcuMSA3LjEgNy4xIDcuMUw5LjUgMTcgMSA4LjV6Ii8+DQo8L3N2Zz4NCg==)}.azc-pager ul li.azc-pager-arrow.azc-pager-arrow-next a span:before{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2IiBoZWlnaHQ9IjExIiB2aWV3Qm94PSIwIDAgMTEgMTciPg0KICAgIDxwYXRoIGZpbGw9IiMzMjM4M2YiIGQ9Ik0yLjQxNCAxN0wxIDE1LjU4Nmw3LjA3MS03LjA3MUwxIDEuNDQzIDIuNDE0LjAyOWw4LjQ4NSA4LjQ4NnoiLz4NCjwvc3ZnPg0K)}.azc-pager ul li.azc-pager-page[aria-selected=true] a{background-color:#e5e5e5}.azc-pager ul li.azc-pager-input{width:50px}.azc-pager ul li.azc-pager-input .azc-pager-input-textBox{height:23px;padding-right:0!important}.azc-pager ul li.azc-pager-input input{text-align:center;border-right-width:1px!important}.azc-pager ul li[aria-disabled=true]{opacity:.1!important}")})
);define("Viva.Controls/Controls/Viva.Pager",["require","exports","o","a","./Base/Viva.Validators","./Base/ValidationPlacements/Viva.Css","./Forms/Viva.TextBox","./Base/Viva.Base","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl.Controls/Controls/Base/WidgetBindingHandler","../../_generated/Less/Viva.Controls/Controls/Viva.Pager.css"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function k(){return{previous:s.Pager.previous,next:s.Pager.next}}var c=jQuery,l="azc-pager",a="azc-pager-arrow",v="azc-pager-arrow-previous",y="azc-pager-arrow-next",t="azc-pager-input-textBox",b="<ul role='navigation' aria-label='"+s.Grid.pagination+"'><!-- ko if: $ctl._longPager -->"+("<li class='azc-pager-input'><div class='"+t+"' data-bind='azcTextBox: $ctl._textBoxViewModel'><\/div><\/li>")+"<li class='azc-pager-page'><a role='button' data-bind='text: data.numberOfPages, attr: { \"data-page-id\": data.numberOfPages(), href: $ctl._isCurrentPage(data.numberOfPages()) ? null : \"\" }'><\/a><\/li><!-- /ko --><!-- ko ifnot: $ctl._longPager --><!-- ko foreach: $ctl._pages --><li class='azc-pager-page' data-bind='attr: { \"aria-selected\": $ctl._isCurrentPage($data) ? \"true\" : \"false\" }'><a role='button' data-bind='text: $data, attr: { \"data-page-id\": $data, href: $ctl._isCurrentPage($data) ? null : \"\" }'><\/a><\/li><!-- /ko --><!-- /ko --><!-- ko if: $ctl._showArrows -->"+
("<li class='"+a+" "+v+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageFirst() ? "true" : "false" }\'><a role=\'button\' data-bind=\'attr: { title: data.text.previous, "aria-label": data.text.previous, href: $ctl._isCurrentPageFirst() ? null : "" }\'><span><\/span><\/a><\/li>')+("<li class='"+a+" "+y+'\' data-bind=\'attr: { "aria-disabled": $ctl._isCurrentPageLast() ? "true" : "false" }\'><a role=\'button\' data-bind=\'attr: { title: data.text.next, "aria-label": data.text.next, href: $ctl._isCurrentPageLast() ? null : "" }\'><span><\/span><\/a><\/li>')+"<!-- /ko --><\/ul>",p=(function(n){function t(t){t===void 0&&(t={});n.call(this);this.currentPage=t.currentPage||ko.observable(1);this.numberOfPages=t.numberOfPages||ko.observable(1);this.maxPages=t.maxPages||ko.observable(20);this.text=t.text}return __extends(t,n),t})(o.ViewModel),r,w;n.ViewModel=p;r=(function(n){function r(t,i,r){n.call(this,t,i,c.extend({viewModelType:p},r));this.options.text=this.options.text||k();this.element.
addClass(l).html(b);var o=new e.ViewModel,s=o.validators;this._textBoxViewModel=o;o.validationPlacements.push(new f.Css);s.push(new u.ValueRange(null,1,this.options.numberOfPages));s.push(new w);this._attachEvents();this._initializeComputeds();this._bindDescendants()}return __extends(r,n),r.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(this._detachEvents(),this._cleanElement(l),n.prototype.dispose.call(this))},i.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.defineProperty(r.prototype,"_longPager",{get:function(){return this.options.numberOfPages()>this.options.maxPages()},enumerable:!0,configurable:!0}),i.defineProperty(r.prototype,"_showArrows",{get:function(){return this.options.numberOfPages()>1},enumerable:!0,configurable:!0}),r.prototype._initializeComputeds=function(){var t=this,n=this.options,i=this._textBoxViewModel;this._pages=ko.observableArray();this._addDisposablesToCleanUp(
ko.computed((function(){var r=t._pages.peek(),i,u;for(t._pages.valueWillMutate(),r.splice(0,r.length),i=1,u=Math.min(n.numberOfPages(),n.maxPages());i<=u;i++)r.push(i);t._pages.valueHasMutated()})));i.events={enterPressed:function(t){i.validationState()===2&&n.currentPage(parseInt(t,10))}};this._addDisposablesToCleanUp(ko.computed((function(){i.value(n.currentPage().toString())})))},r.prototype._attachEvents=function(){var i=this,n;this._detachEvents();n=this.options;this.element.on("click","ul li.azc-pager-page a[href]",this._clickPageEventHandler=function(t){n.currentPage(parseInt(c(t.currentTarget).data("page-id"),10));t.preventDefault()}).on("click","ul li."+v+" a[href]",this._clickArrowPreviousEventHandler=function(t){n.currentPage(n.currentPage()-1);t.preventDefault()}).on("click","ul li."+y+" a[href]",this._clickArrowNextEventHandler=function(t){n.currentPage(n.currentPage()+1);t.preventDefault()}).on("blur","."+t+" input",this._inputBlurEventHandler=function(){i._textBoxViewModel.value(
n.currentPage().toString());i._textBoxViewModel.validationState(2)})},r.prototype._detachEvents=function(){var n=this.element,f=this._clickPageEventHandler,i,r,u;f&&(n.off("click",f),this._clickPageEventHandler=null);i=this._clickArrowPreviousEventHandler;i&&(n.off("click",i),this._clickArrowPreviousEventHandler=null);r=this._clickArrowNextEventHandler;r&&(n.off("click",r),this._clickArrowNextEventHandler=null);u=this._inputBlurEventHandler;u&&(n.off("blur","."+t+" input",u),this._inputBlurEventHandler=null)},r.prototype._isCurrentPage=function(n){return n===this.options.currentPage()},r.prototype._isCurrentPageFirst=function(){return 1===this.options.currentPage()},r.prototype._isCurrentPageLast=function(){return this.options.numberOfPages()===this.options.currentPage()},r})(o.Widget);n.Widget=r;w=(function(n){function t(t){n.call(this,null,t)}return __extends(t,n),t.prototype._validate=function(n){return/^[0-9]*$/.test(n)?2:1},t})(u.Validator);ko.bindingHandlers.azcPager=h.getBindingHandler(
r)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer{display:block;height:38px;text-decoration:none;text-align:center}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreLabel{font-family:az_ea_font,wf_segoe-ui_normal,"Segoe UI","Segoe WP",Tahoma,Arial,sans-serif;font-size:12px;line-height:38px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon{display:inline-block;margin-top:10px}.azc-grid-pageable.azc-grid .azc-grid-pageable-loadMoreContainer .azc-grid-pageable-loadMoreIcon:before{content:url(Content/static/azc-validatableControl-pending.gif)}.azc-grid-pageable.azc-grid .azc-grid-pageable-pager{float:right}.azc-grid-pageable.azc-grid.azc-grid-pageable-onePage .azc-grid-pageable-pager{display:none}')}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable",
["require","exports","f","o","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Pageable.css"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){function w(){return{label:e(f.Grid.loadMore),showLabel:e(!0),loading:e(!1)}}var s=jQuery,t="azc-grid-pageable",h=t+"-loadMoreContainer",c="."+h+"[href]",l=t+"-onePage",o=t+"-full",a='<!-- ko ifnot: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel --><a class=\'azc-grid-pageable-loadMoreContainer\' data-bind=\'attr: { href: $ctl.getPlugin("azc-grid-pageable").options.loading() ? null : "#" }, visible: $ctl.getPlugin("azc-grid-pageable").options.showLabel\'><span class=\'azc-grid-pageable-loadMoreLabel\' data-bind=\'visible: !$ctl.getPlugin("azc-grid-pageable").options.loading(), text: $ctl.getPlugin("azc-grid-pageable").options.label\'><\/span><span class=\'azc-grid-pageable-loadMoreIcon\' data-bind=\'visible: $ctl.getPlugin("azc-grid-pageable").options.loading, css: { "azc-grid-pageable-showLoadingIcon": $ctl.getPlugin("azc-grid-pageable").options.loading }\'><\/span><\/a><!-- /ko --><!-- ko if: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel --><div class=\'azc-grid-pageable-pager\' data-bind=\'azcPager: $ctl.getPlugin("azc-grid-pageable").options.pagerViewModel\'><\/div><!-- /ko -->',
v="<!-- ko template: { name: ko.pureComputed(function () { return data.items().length ? 'bodyCore' : ($ctl.getPlugin(\"azc-grid-pageable\").options.loading() ? 'bodyCore' : 'bodyNoItems'); }), data: $data } --><!-- /ko -->",e=ko.observable,y=i.disposeDisposable,p=(function(n){function i(t){n.call(this);this._disposables=[];this._options=s.extend(w(),t)}return __extends(i,n),r.defineProperty(i.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),i.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("table");t.append(".azc-grid-container",a);n.setTemplate("body",v)},i.prototype.afterCreate=function(){var t=this,n=this.options.pagerViewModel;n&&this._disposables.push(ko.computed((function(){var i=t._widget.element;i.toggleClass(l,n.numberOfPages()===1);i.addClass(o)})))},i.prototype.afterAttachEvents=function(){var n=this;this._disposables.push(this._widget.element.setEvents(["click.azcPageableGrid",c,function(t){t.preventDefault();t.stopPropagation(
);var i=n.options;!i.loading()&&i.onLoadMoreData&&i.onLoadMoreData()}]))},i.prototype.beforeDestroy=function(){y(this._disposables);this._disposables=[];this._widget.element.removeClass(o)},i.prototype.getName=function(){return i.Name},i.prototype.getOrder=function(){return 20},i.prototype.shouldNotAllowSelectAll=function(){return!0},i.Name=t,i})(u.Extension);n.PageableExtension=p})(e||(e={})),e}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","MsPortalImpl/Resources/ImplScriptResources","Viva.Controls/Controls/Viva.Pager","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Pageable"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function v(n){var t,r;return n&&(t=n.metadata(),t&&(r=t.totalItemCount,!i.isNullOrUndefined(r)))?r:0}var a=i.ViewModels.Controls.Lists.Grid,t=a.PageableType,y=e.Grid,r=ko.observable,c=i.getUniqueId,l;
n.DefaultItemsPagePage=10;l=(function(u){function f(){u.apply(this,arguments);this._options=null;this._type=null;this._dataNav=null;this._filterQS=r(null);this._currentRequestId=null}return __extends(f,u),f.prototype.getExtension=function(u){var e=this,l=u,f=l&&l.pageable,s;if(f&&(this._dataNav=f.dataNavigator),!this._validateSequential()&&!this._validatePageable())throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");this._type=f.type;switch(f.type){case t.Pageable:s=f.pagerMaxPages;this._options={loading:r(!1),pagerViewModel:new o.ViewModel({maxPages:!i.isNullOrUndefined(s)&&r(s)}),itemsPerPage:f.itemsPerPage?f.itemsPerPage:r(n.DefaultItemsPagePage)};break;case t.Sequential:default:this._options={label:f.label?f.label:r(y.loadMore),showLabel:f.showLabel?f.showLabel:r(!0),loading:r(!1),onLoadMoreData:function(){e._currentRequestId=c();e._onLoadMoreData(e._currentRequestId).catch((function(){}))}}}return new h.PageableExtension(
this._options)},f.prototype.initializeExtension=function(){if(!(this._type===t.Sequential&&this._validateSequential()||this._type===t.Pageable&&this._validatePageable()))throw new Error("Pageable extension cannot work without a valid data navigator. Provide a valid data navigator to fetch data.");var n=this._filterableExtn=this._widget._instance.getPlugin(s.FilterableExtension.Name);n&&n.options.serverFilter()&&this._filterQS(n.options.queryString())},f.prototype.resetExtension=function(){var n=this,i=this._filterableExtn&&this._filterableExtn.options,r;return i&&!i.filterCallback()&&i.filterCallback((function(t){if(n._filterQS()!==t)return n._filterQS(t),n.resetExtension()})),r=this._type===t.Sequential&&this._validateSequential()?this._resetAndLoadData():this._type===t.Pageable&&this._validatePageable()?this._resetLoadPage():Q(),r.catch((function(){})),r},f.prototype.beforeDestroy=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},f.prototype.getName=function(){return"Pageable"}
,f.prototype.getOrder=function(){return 0},f.prototype._validateSequential=function(){return this._dataNav&&!!this._dataNav.loadByContinuationToken},f.prototype._validatePageable=function(){return this._dataNav&&!!this._dataNav.loadBySkipTake},f.prototype._loadPage=function(){var n=this,i=c(),t=this._options;this._currentRequestId=i;var u=t.pagerViewModel.currentPage(),r=t.itemsPerPage(),f=this._getSortData();return t.loading(!0),Q(this._dataNav.loadBySkipTake((u-1)*r,r,this._filterQS(),f)).then((function(){if(n._currentRequestId===i){var t=n._dataNav.items();t=t?t.slice(0):[];n._widget.options.items(t)}})).finally((function(){n._currentRequestId===i&&t.loading(!1)}))},f.prototype._attachSubscriptions=function(){var r=this;if(this._lifetime=this._widget.lifetimeManager.createChildLifetime(),this._type===t.Pageable){var i=this._options,n=i.pagerViewModel,u=v(this._dataNav),f=i.itemsPerPage(),e=n.currentPage(),o=n.numberOfPages();ko.reactor(this._lifetime,(function(){var s=v(r._dataNav),t=i.itemsPerPage(
),h=n.currentPage();ko.ignoreDependencies((function(){if(t){var i=(s+t-1)/t|0||1;i!==o&&(o=i,n.numberOfPages(i))}(s!==u||t!==f||h!==e)&&(u=s,f=t,e=h,t&&h&&r._loadPage().catch((function(){})))}))}))}},f.prototype._resetCurrentPageSubscription=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null);this._options.pagerViewModel.currentPage(1);this._attachSubscriptions()},f.prototype._resetLoadPage=function(){return this._resetCurrentPageSubscription(),this._loadPage()},f.prototype._onLoadMoreData=function(n){var t=this,i=this._options;return i.loading(!0),Q(this._dataNav.loadByContinuationToken()).then((function(){t._currentRequestId===n&&t._widget.options.items.push.apply(t._widget.options.items,t._dataNav.items())})).finally((function(){t._currentRequestId===n&&(i.loading(!1),t._dataNav.metadata()&&t._dataNav.metadata().continuationToken||i.showLabel(!1))}))},f.prototype._resetAndLoadData=function(){var n=this._getSortData();return this._currentRequestId=c(),this._dataNav.resetLoadByContinuationToken&&
this._dataNav.resetLoadByContinuationToken(this._filterQS(),n),this._options.showLabel(!0),this._widget.options.items([]),this._onLoadMoreData(this._currentRequestId)},f.prototype._getSortData=function(){var n=this._widget.options.sortByList;return n?n():null},f})(f.GridExtension);n.PageableExtension=l;u.registerPlugin(a.Extensions.Pageable,l)})(c||(c={})),c}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-reorderRow.azc-grid table thead tr th:nth-child(2)>a{padding-left:0}.azc-grid-reorderRow col.azc-grid-reorderRow-col{width:16px}.azc-grid-reorderRow table tbody tr[draggable]{-webkit-user-drag:element}.azc-grid-reorderRow table tbody tr td.azc-grid-reorderRow-cell{padding-left:5px;padding-right:6px}.azc-grid-reorderRow table tbody tr td:nth-child(2){padding:0}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true]):hover td.azc-grid-reorderRow-cell div{margin-top:4px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true]):hover td.azc-grid-reorderRow-cell div:before{content:url(Content/static/azc.grid.reorderrowextension.handle-hover.svg);width:5px;height:17px}.azc-grid-reorderRow.azc-grid-reorderRow-enabled table tbody tr:not([aria-disabled=true])[aria-selected=true]:hover td.azc-grid-reorderRow-cell div:before{content:url(Content/static/azc.grid.reorderrowextension.handle-active.svg)}.azc-grid-reorderRow .azc-grid-reorderRow-line{position:absolute;width:100%;height:3px;display:none}.azc-grid-reorderRow.azc-grid-reorderRow-active .azc-grid-reorderRow-line{display:block}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow",["require","exports","f","o","../../../Util/Viva.Util","./Viva.Grid1.FocusableRow","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ReorderRow.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var o=jQuery,c=window,t="azc-grid-reorderRow-active",h="azc-grid-reorderRow-enabled",l='attr: { "data-grid-reorder": true }',a="<div class='azc-grid-reorderRow-line azc-bg-muted'><\/div>",v="<col class='azc-grid-reorderRow-col' />",y="<th role='presentation' class='azc-grid-reorderRow-header'><\/th>",p="<td row='presentation' class='azc-grid-reorderRow-cell azc-br-muted'><div><\/div><\/td>",w="application/x-azc-grid-row",b=ko.observable,k="data:image/gif;base64,R0lGODlhAQABAJEAAAAAAP///////wAAACH5BAEAAAIALAAAAAABAAEAAAICVAEAOw==",s={},d=(function(n){function e(t){n.call(this);this._options=t=t||{};t.disabled===undefined&&(t.disabled=b(!1));this._gridGuid=i.getUniqueId()}return __extends(
e,n),r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),e.prototype.afterCreate=function(){var n=this;this._widget.element.append(a);ko.computed((function(){n._widget.element.toggleClass(h,!n.options.disabled())}))},e.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("bodyRowsCore"),i=n.getHtmlTemplate("header"),r=n.getHtmlTemplate("colgroup");t.addAttribute("tr","data-bind",l);t.prepend("tr",p);i.prepend("tr",y);r.prepend("colgroup",v)},e.prototype.afterAttachEvents=function(){var n=this,r=this;this._widget.element.on("dragstart","[draggable]",this._dragstartEventHandler=function(t){if(!n._widget._extensionTrigger("shouldNotAllowDrag").some((function(n){return!!n}))){u.DataTransfer.isLegacyDataTransfer()&&c.getSelection().removeAllRanges();var f=i.getUniqueId(),e=t.target,r=new u.DataTransfer(t.originalEvent.dataTransfer),o=document.createElement("img");o.src=k;s[f]={rowMetadata:ko.dataFor(e),element:e};r.effectAllowed=
"move";r.setDragImage(o,-25,-25);r.setData(n._getMimeType(),f)}}).on("drop",this._dropEventHandler=function(t){var i=new u.DataTransfer(t.originalEvent.dataTransfer),f=i.types;if(f.some((function(t){return t===n._getMimeType()}))){i.dropEffect="move";var e=i.getData(n._getMimeType()).split(";"),o=e.map((function(n){return s[n].rowMetadata})),r={rowMetadata:o,clientX:t.originalEvent.pageX,clientY:t.originalEvent.pageY,position:n._positionLine(t)};t.preventDefault();setTimeout((function(){n._widget.trigger("rowReorder",u.cloneEvent(t,"rowReorder"),r);n._widget.options.events("reorder",r)}),0)}}).on("dragend",this._dragendEventHandler=function(){s={};n._widget.element.removeClass(t)}).on("mouseenter.azcGrid","tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",this._mouseenterEventHandler=function(){r.options.disabled()||o(this).closest(".azc-grid-row").attr("draggable","true")}).on("mouseleave.azcGrid","tbody tr[data-grid-reorder=true]:not([aria-disabled=true]) td.azc-grid-reorderRow-cell",
this._mouseleaveEventHandler=function(){o(this).closest(".azc-grid-row").removeAttr("draggable")});o("html").on("dragover",this._dragoverEventHandler=function(i){if(o.contains(n._widget.element[0],i.target)){var f=new u.DataTransfer(i.originalEvent.dataTransfer),r=f.types;r&&r.some((function(t){return t===n._getMimeType()}))&&(n._positionLine(i),i.preventDefault())}else n._widget.element.hasClass(t)&&n._widget.element.removeClass(t)})},e.prototype.getOrder=function(){return 21},e.prototype.getDependencies=function(){return[new f.FocusableRowExtension]},e.prototype.beforeCreate=function(){var n=this,t=["azc-grid-editableRow"];this._widget.options.extensions.forEach((function(i){if(t.indexOf(i.getName())>=0)throw new Error("The extension "+i.getName()+" is not compatible with the extension "+n.getName()+".");}))},e.prototype.beforeDestroy=function(){this._widget.element.removeClass(t).removeClass(h);this._dragstartEventHandler&&(this._widget.element.off("dragstart",this._dragstartEventHandler),
this._dragstartEventHandler=null);this._dropEventHandler&&(this._widget.element.off("drop",this._dropEventHandler),this._dropEventHandler=null);this._dragendEventHandler&&(this._widget.element.off("dragend",this._dragendEventHandler),this._dragendEventHandler=null);this._dragoverEventHandler&&(this._widget.element.off("dragover",this._dragoverEventHandler),this._dragoverEventHandler=null);this._mouseenterEventHandler&&(this._widget.element.off("mouseenter.azcGrid",this._mouseenterEventHandler),this._mouseenterEventHandler=null);this._mouseleaveEventHandler&&(this._widget.element.off("mouseleave.azcGrid",this._mouseleaveEventHandler),this._mouseleaveEventHandler=null)},e.prototype.getName=function(){return e.Name},e.prototype.getAdditionalColumns=function(){return 1},e.prototype._getMimeType=function(){return(w+"-"+this._gridGuid).toLowerCase()},e.prototype._positionLine=function(n){var s=o(n.target),r=null,i,f;if(s.hasClass("azc-grid-reorderRow-line"))r=this._savedIndex;else if(o.contains(
this._widget.element[0],n.target)){if(this._widget.element.hasClass(t)||this._widget.element.addClass(t),i=s.closest("[data-grid-reorder=true]"),f=n.originalEvent,i.length===0){var h=this._widget.element.find("[data-grid-reorder=true]"),c=h.first(),v=h.last();i=f.pageY<=c.offset().top?c:v}r=i.index();var l=i.outerHeight(),e=i.offset(),u=i.position(),a=this._widget.element.find(".azc-grid-reorderRow-line");e.top=Math.floor(e.top);u.top=Math.floor(u.top);f.pageY-e.top<l/2?a.css("top",Math.round(u.top)):(a.css("top",Math.round(u.top+l)),r++);this._savedIndex=r}else this._widget.element.removeClass(t);return r},e.Name="azc-grid-reorderRow",e})(e.Extension);n.ReorderRowExtension=d})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow",["require","exports","f","o","a","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ReorderRow"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,
t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){this._handler&&(this._widget._instance.element.off("rowReorder",this._handler),this._handler=null)},t.prototype.getExtension=function(n){var t=n||{},i=t.reorderRow||{},r=i.disabled;return new o.ReorderRowExtension({disabled:r})},t.prototype.initializeExtension=function(){var t=this._widget,n=t.options;t._instance.element.on("rowReorder",this._handler=function(i,r){var b=n.extensionsOptions||{},h=b.reorderRow||{},k=h.automaticallyReorderRows,c=h.rowReorder,l=r.rowMetadata,y,f,s,p,w;if(k!==!1){var u=n.items.peek(),e=[],a=Math.min(u.length,Math.max(0,r.position)),v=0,o=!1;for(l.forEach((function(n){e.push(n.item)})),y=function(n){return e.indexOf(n)>=0?!0:!1},f=0,s=0;f<u.length;f++,s++)p=u[f],y(p)&&(o||(n.items.valueWillMutate(),o=!0),u.splice(f,1),f--,s<a&&v++);o&&(u.splice.apply(u,[a-v,0].concat(e)),n.items.valueHasMutated())}c&&(w={rowMetadata:l.map((function(n){return t.getRowMetadata(
n.item)})),position:r.position},c(i,w))})},t.prototype.getName=function(){return"ReorderRowExtension"},t.prototype.getOrder=function(){return 0},t})(e.GridExtension);n.ReorderRowExtension=t;f.registerPlugin(r.Extensions.ReorderRow,t)})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,'.azc-grid.azc-grid-resizableColumn .azc-grid-tableContainer{position:relative}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle{position:absolute;right:-5px;top:0;height:40px;width:10px;cursor:ew-resize;z-index:1;display:-webkit-flex;display:flex;-webkit-justify-content:center;justify-content:center}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line{width:1px;height:100%;opacity:0}.azc-grid.azc-grid-resizableColumn .azc-grid-resizableColumn-ghostLine{position:absolute;width:1px;top:0;z-index:1}.azc-grid.azc-grid-resizableColumn .azc-grid-show-handles .azc-grid-resizableColumn-handle .azc-grid-resizableColumn-handle-line,.azc-grid.azc-grid-resizableColumn thead:hover .azc-grid-resizableColumn-handle-line,.azc-grid.azc-grid-resizableColumn.azc-grid-resizing .azc-grid-resizableColumn-handle-line{opacity:1}.azc-grid.azc-grid-resizableColumn.azc-grid-resizing *{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.azc-grid.azc-grid-resizableColumn .azc-grid-headerlabel:after{content:"\\00a0"}')})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn",["require","exports","o","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.ResizableColumn.css"],(function(n,t,i,r){"use strict";var u;return (function(n){function c(){return{resizable:e(!0),resizeToPercent:e(!0),minWidth:20}}var t=jQuery,f=window,o="azc-grid-resizing",h="<!-- ko if: $ctl.getPlugin(\"azc-grid-resizableColumn\").options.resizable() && hasHandle() --><div class='azc-grid-resizableColumn-handle'><div class='azc-grid-resizableColumn-handle-line azc-bg-muted'><\/div><\/div><!-- /ko -->",e=ko.observable,u=ko.dataFor,s=ko.isObservable,l=(function(n){function r(i){n.call(this);this._options=t.extend(c(),i)}return __extends(r,n),i.defineProperty(r.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.prototype.afterSetTemplates=function(n){var t=n.getHtmlTemplate("headerCell");t.append("div",h)},r.prototype.afterCreate=function(){var n=this,
t=this._widget.options.columns();t.length>0&&(this._lastColumnObject=t[t.length-1],this._lastColumnObject.hasHandle(!1));this._columnsSubscription=this._widget.options.columns.subscribe((function(t){t.length&&(n._lastColumnObject&&n._lastColumnObject.hasHandle(!0),n._lastColumnObject=t[t.length-1],n._lastColumnObject.hasHandle(!1))}))},r.prototype.afterAttachEvents=function(){var n=this;this._widget.element.on("mousedown.azcGridResizableColumn",".azc-grid-resizableColumn-handle",this._mouseDownEventHandler=function(i){var e,r,f,o;(n._mouseDownPosition=i.pageX,n._handle=t(i.currentTarget),n._columns=n._widget.element.find("th"),e=n._handle.parent().closest("th"),f=u(e[0]),i.preventDefault(),f.disableResizable())||(r=n._getNextResizableColumn(n._columns,n._widget.options.columns.indexOf(f)+1),r!==null)&&(o=u(r[0]),s(f.width)&&s(o.width))&&n._resizeStart(e,r)})},r.prototype.getName=function(){return r.Name},r.prototype.getOrder=function(){return 16},r.prototype.beforeDestroy=function(){this.
_mouseDownEventHandler&&(this._widget.element.off("mousedown.azcGridResizableColumn",this._mouseDownEventHandler),this._mouseDownEventHandler=null);this._mouseUpEventHandler&&(t(f.document).off("mouseup.azcGridResizableColumn",this._mouseUpEventHandler),this._mouseUpEventHandler=null);this._mouseMoveEventHandler&&(t(f.document).off("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler),this._mouseMoveEventHandler=null);this._columnsSubscription&&(this._columnsSubscription.dispose(),this._columnsSubscription=null);this._widget.element.removeClass(o)},r.prototype.getDefaultColumnProperties=function(){return{disableResizable:e(!1),hasHandle:e(!0)}},r.prototype._resizeStart=function(n,i){var r=this,h,w=this._widget.element.find(".azc-grid-tableHeader"),b=this._widget.element.find(".azc-grid-tableContent"),e=t("<div class='azc-grid-resizableColumn-ghostLine azc-bg-selected'><\/div>"),s=this._widget.element.find(".azc-grid-tableContainer"),c=n.offset().left+this._options.minWidth,l=
i.offset().left+i.width()-this._options.minWidth,a,v,y,p;h=this._handle.find(".azc-grid-resizableColumn-handle-line");a=h.offset().left;v=this._tableOffset(s,a);e.offset({left:v});e.css("position","absolute");y=w.height();p=b.height();e.height(y+p);s.append(e);t(f.document).on("mousemove.azcGridResizableColumn",this._mouseMoveEventHandler=function(n){var t=n.pageX,i=Math.min(Math.max(t,c),l);n.preventDefault();r._widget.element.addClass(o);e.offset({left:i})});t(f.document).one("mouseup.azcGridResizableColumn",this._mouseUpEventHandler=function(h){var a,w,b,v,k,y,d,p,nt=h.pageX,g=[],tt=Math.min(Math.max(nt,c),l),it=u(i[0]),rt=u(n[0]);t(f.document).off("mousemove.azcGridResizableColumn",r._mouseMoveEventHandler);r._mouseMoveEventHandler=null;r._widget.element.removeClass(o);e.remove();w=n.width();b=i.width();p=tt-r._mouseDownPosition;v=w+p;k=b-p;r._options.resizeToPercent()?(a=s.width(),d=r._convertToPercent(a,k),y=r._convertToPercent(a,v),it.width(d)):(r._columns.each((function(n,i){var
r=t(i),f=u(i);f.hasOwnProperty("width")?g.push(r.width().toString()+"px"):r.width(r.width())})),r._widget.options.columns().forEach((function(n,t){n.width(g[t])})),y=v.toString()+"px");rt.width(y)})},r.prototype._getNextResizableColumn=function(n,t){var e=this._widget.options.columns(),r,o,f,i;if(t===e.length)r=null;else if(f=e[t],f.hasOwnProperty("disableResizable")&&!f.disableResizable()){for(i=0;i<n.length;i++)if(u(n.eq(i)[0]).columnId===f.columnId){o=n.eq(i);break}r=o}else t++,r=this._getNextResizableColumn(n,t);return r},r.prototype._convertToPercent=function(n,t){if(n>0)return(t/n*100).toString()+"%"},r.prototype._tableOffset=function(n,t){return t-n.offset().left},r.Name="azc-grid-resizableColumn",r})(r.Extension);n.ResizableColumnExtension=l})(u||(u={})),u}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.ResizableColumn"],(function(n,t,i,r,u,f,
e){"use strict";var o;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.beforeDestroy=function(){},t.prototype.getExtension=function(n){var t=n,i=t&&t.resizableColumn;return new e.ResizableColumnExtension(i)},t.prototype.getName=function(){return"ResizableColumn"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);n.ResizableColumnExtension=t;u.registerPlugin(r.Extensions.ResizableColumn,t)})(o||(o={})),o}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css",["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid.azc-grid-scrollable{width:100%;height:100%;overflow:hidden}.azc-grid.azc-grid-scrollable div.azc-grid-container{width:100%;height:100%;overflow:hidden;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer{width:100%;height:100%;overflow:hidden;padding-top:40px;position:relative;-webkit-flex:1 1 auto;flex:1 1 auto;display:-webkit-flex;display:flex;-webkit-flex-direction:column;flex-direction:column}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer div.azc-grid-tableScrollContainer{width:100%;height:100%;overflow:auto;-webkit-flex:1 1 auto;flex:1 1 auto}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer div.azc-grid-tableScrollContainer table.azc-grid-tableHeader{position:absolute;top:0;left:0}.azc-grid.azc-grid-scrollable div.azc-grid-container div.azc-grid-tableContainer tr.azc-grid-scrollable-above+tr.azc-grid-row td{border-top-width:1px;border-top-style:solid}")})
);define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable",["require","exports","f","o","MsPortalImpl/Base/Base.FeatureDetection","../../../Util/Viva.Resize","./Viva.Grid1","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.Scrollable.css"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function tt(){return{dataProvider:null}}var v=jQuery,o=window,y="<!-- ko template: { name: ko.pureComputed(function () { return  $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems().length ? 'bodyCore' : 'bodyNoItems'; }), data: $data } --><!-- /ko -->",p="<tbody class='azc-grid-groupdata' role='rowgroup'><tr role='presentation' class='azc-grid-scrollable-above' aria-hidden='true'><\/tr><!-- ko foreach: $ctl.getPlugin(\"azc-grid-scrollable\").asyncItems --><!-- ko template: { name: template, data: item() } --><!-- /ko --><!-- /ko --><\/tbody>",w="<tr role='row' class='azc-grid-scrollable-loading'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",
b="<tr role='row' class='azc-grid-scrollable-error'><td role='gridcell' class='azc-br-muted' data-bind='attr: { colspan: $ctl._getTotalColumns() }'><\/td><\/tr>",h=ko.observable,k=ko.observableArray,d=ko.pureComputed,s=ko.utils,t=Math.floor,c=Math.min,g=i.forEachKey,nt=i.disposeDisposable,l=(function(){function n(n,t,i){var r=this;this.index=n;this.item=h(i);this.state=h(t);this.template=d((function(){switch(r.state()){case 0:return"bodyRowsLoading";case 2:return"bodyRowsError";case 1:default:return"bodyRows"}}))}return n})(),a;n.AsyncItem=l;a=(function(n){function e(t){n.call(this);this._disposables=[];this._options=v.extend(tt(),t);this.virtualScrolling&&(this.asyncItems=k(),this._resetAsyncItemCache())}return __extends(e,n),r.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),r.defineProperty(e.prototype,"virtualScrolling",{get:function(){return!!this.options.dataProvider},enumerable:!0,configurable:!0}),e.prototype.afterCreate=function(
){var n=this,t=this._widget.element;this._scrollContainer=t.find(".azc-grid-tableScrollContainer");this._disposables.push(this._scrollContainer.setEvents(["scroll.azcGridScrollable",function(){n._update()}]));this.virtualScrolling&&(this._lastWidth=t.width(),this._lastHeight=t.height(),f.track(this._widget.lifetimeManager,t,(function(t,i){n._onResize(t,i)})),this._disposables.push(this.options.dataProvider.totalItemCount.subscribe((function(){n._activePageRequest||(n._resetAsyncItemCache(),n._update())}))));this._update(!0)},e.prototype.afterSetTemplates=function(n){this.virtualScrolling&&g({body:y,bodyCore:p,bodyRowsLoading:w,bodyRowsError:b},(function(t,i){n.setTemplate(t,i)}))},e.prototype.getDefaultColumnProperties=function(){return{}},e.prototype.beforeDestroy=function(){this._updateViewportAsyncTimeout&&(o.clearTimeout(this._updateViewportAsyncTimeout),this._updateViewportAsyncTimeout=null);nt(this._disposables);this._disposables=[];this._asyncItemCache=null;this._activePageRequest=null}
,e.prototype.getName=function(){return e.Name},e.prototype.getOrder=function(){return 15},e.prototype.shouldNotAllowSelectAll=function(){return this.virtualScrolling?!0:!1},e.prototype.reset=function(){this._resetAsyncItemCache();this.virtualScrolling&&this._widget.options.items.removeAll();var n=this._scrollContainer;n&&(n.scrollLeft(0),n.scrollTop(0),this._update(!0))},e.prototype._onResize=function(n,t){t===this._lastHeight?n!==this._lastWidth&&(this._lastWidth=n,this._updateHeader()):(this._lastHeight=t,this._lastWidth=n,this._update())},e.prototype._resetAsyncItemCache=function(){this._asyncItemCache=[];this._asyncItemCache.length=e._asyncItemCacheSize},e.prototype._updateHeader=function(){var t,r,u,f,n=this._scrollContainer;n&&(t=n.find(".azc-grid-tableHeader"),t.length&&(r=-n.scrollLeft(),t.css("left",r<0?r+"px":""),u=i.truncate(n[0].offsetWidth-n[0].clientWidth),t.css("width",u>0?"calc(100% - "+u+"px)":""),f=t.outerHeight(),n.parent(".azc-grid-tableContainer").css("padding-top",
f+"px")))},e.prototype._update=function(n){this._updateHeader();this.virtualScrolling&&this._updateViewportAsync(n)},e.prototype._updateViewportAsync=function(n){var t=this,i;if(n)try{this._updateViewport(n);this._updateHeader()}catch(r){}else i=this._options.updateViewportAsyncDebounceTime||e._updateViewportAsyncDebounceTime,this._updateViewportAsyncTimeout&&o.clearTimeout(this._updateViewportAsyncTimeout),this._updateViewportAsyncTimeout=o.setTimeout((function(){if(t._updateViewportAsyncTimeout)try{t._updateViewport();t._updateHeader()}catch(n){}}),i)},e.prototype._getRowHeight=function(){var t,n;return n=this._scrollContainer.find(".azc-grid-full td"),n.length&&(t=n.outerHeight()),t||this._options.defaultRowHeight||e._defaultRowHeight},e.prototype._getTotalScrollHeight=function(n,i){var r,f;return f=t(e._maxElementHeightFactor*u.getMaxElementHeight()),r=t(n*i),c(r,f)},e.prototype._updateContentHeight=function(n){var t=this._widget.element.find(".azc-grid-tableContent");t.height(n)},e.
prototype._updateAboveRowHeight=function(n){var t=this._scrollContainer.find(".azc-grid-scrollable-above");t.css("height",n||"")},e.prototype._updateViewport=function(n){var u=this,r,s,f,h,b,v,y,l,o,k,p,d,a,w,g;r=this.options.dataProvider.totalItemCount();(i.isNullOrUndefined(r)||n)&&(r=e._defaultRequestCount);s=this._getRowHeight();f=this._getTotalScrollHeight(r,s);this._updateContentHeight(f);a=this._scrollContainer[0];h=a.clientHeight;b=a.scrollTop||0;v=a.scrollHeight||f||h;h&&(y=t(r*(b/v)),l=Math.ceil(h/s),o=Math.max(y-l,0),k=c(y+l+l,r),p=k-o,d=t(v*(o/r)),this._updateAboveRowHeight(d),w=this._activePageRequest={},g=this._renderRows(o,p),this._request(w,g,o,p).finally((function(){w===u._activePageRequest&&(u._activePageRequest=null,r=u.options.dataProvider.totalItemCount(),f=u._getTotalScrollHeight(r,s),u._updateContentHeight(f),u._updateHeader())})))},e.prototype._renderRows=function(n,t){for(var f=[],e=this._asyncItemCache,u,i,o,h,c,r=0;r<t;r++)u=n+r,o=u%e.length,i=e[o],i&&i.index===
u||(i=new l(u,0,null),e[o]=i,i.state()===2&&i.state(0)),f.push(i);return h=s.compareArrays(this.asyncItems(),f,{sparse:!0}),c=s.createArraySplices(h),s.applyArraySplices(this.asyncItems,c),f},e.prototype._updateGridItems=function(n){var i,r,t;n&&n.length&&(t=this._widget.options,i=t.items.peek(),i?(r=[i.length,0],n.forEach((function(n){i.indexOf(n)<0&&r.push(n)})),r.length>2&&t.items.splice.apply(t.items,r)):t.items(n))},e.prototype._request=function(n,t,i,r){var u=this;return this.options.dataProvider.fetch(i,r).then((function(i){var r=[];t.forEach((function(n,t){var u=i[t];u?(n.item(u),n.state(1),r.push(u)):n.state(2)}));n===u._activePageRequest&&(t.length>i.length&&u.asyncItems.splice(i.length,t.length-i.length),u._updateGridItems(r))}),(function(){t.forEach((function(n){n.state()!==1&&n.state(2)}))}))},e.prototype.shouldRetainRowMetadata=function(){return!0},e.prototype.scrollTo=function(n){this._scrollContainer[0].scrollTop=n/this._options.dataProvider.totalItemCount.peek()*this._scrollContainer[
0].scrollHeight;this._updateViewport()},e.Name="azc-grid-scrollable",e._updateViewportAsyncDebounceTime=256,e._asyncItemCacheSize=2048,e._defaultRowHeight=36,e._maxElementHeightFactor=.8,e._defaultRequestCount=100,e})(e.Extension);n.ScrollableExtension=a})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Filterable","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.Scrollable"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,s=ko.observable,t=(function(n){function t(){n.apply(this,arguments);this._filterQueryString=s(null)}return __extends(t,n),t.prototype.getExtension=function(n){var i=this,r=n,f=r&&r.scrollable,u={dataProvider:null},t=this._dataNavigator=f.dataNavigator;return t&&(u.dataProvider={totalItemCount:ko.pureComputed((function(){var n,i=t.metadata();return i&&(n=i.totalItemCount),
n})),fetch:function(n,r){var u=null,f=i._widget.options.sortByList;return f&&(u=f()),Q(t.loadBySkipTake(n,r,i._filterQueryString(),u)).then((function(){return t.items()}))}}),this._azcScrollableExtension=new o.ScrollableExtension(u)},t.prototype.initializeExtension=function(){var r=this,u=this._widget._instance.getPlugin(e.FilterableExtension.Name),n,t,i;u&&(n=this._filterQueryString,t=u.options,t.serverFilter()&&n(t.queryString()),i=t.filterCallback,i()||i((function(t){if(n()!==t){n(t);var i=r._dataNavigator;return i&&i.metadata(null),r.resetExtension()}})))},t.prototype.resetExtension=function(){var n=this;return Q().then((function(){n._azcScrollableExtension.reset()}))},t.prototype.beforeDestroy=function(){this._azcScrollableExtension=null},t.prototype.getName=function(){return"Scrollable"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);n.ScrollableExtension=t;u.registerPlugin(r.Extensions.Scrollable,t)})(s||(s={})),s}));define("_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css",
["require","exports","module"],(function(n,t,i){"use strict";window.fx.injectCss(i,".azc-grid-sortableColumn .azc-grid-sortableColumn-target{display:-webkit-flex;display:flex;-webkit-flex:1 1 auto;flex:1 1 auto;cursor:pointer}.azc-grid-sortableColumn .azc-grid-sortableColumn-image-container{display:flex;-webkit-flex:0 0 auto;flex:0 0 auto;-webkit-align-items:center;align-items:center;-webkit-justify-content:center;justify-content:center;position:absolute;top:0;right:9px}.azc-grid-sortableColumn .azc-grid-sortableColumn-sortImage{width:11px;height:38px}.azc-grid-sortableColumn .azc-grid-headerlabel{-webkit-flex:1 1 calc(100% - 11px);flex:1 1 calc(100% - 11px);margin-right:22px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:15px}")}));define("Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn",["require","exports","f","o","./Viva.Grid1.FocusableRow","./Viva.Grid1","MsPortalImpl/Resources/ImplScriptResources","MsPortalImpl/Base/Base.KeyboardHelper","../../../../_generated/Less/Viva.Controls/Controls/Lists/Viva.Grid1.SortableColumn.css"],
(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(n){var a=i.Base,v=a.Images,l=a.EventTypes,p=i.ViewModels.Controls.Lists.Grid,t=p.SortOrder,s="azc-grid-sortableColumn",y=s+"-target",c="."+y,h=e.Viva.Grid.Sortable,w="<span class='"+y+"' data-bind='attr: { tabindex: $tabIndex, title: $ctl.getPlugin(\""+s+'")._getTitle(sortOrder()), "aria-sort": $ctl.getPlugin("'+s+"\")._getAria(sortOrder())}'><div class='azc-grid-headerlabel' data-bind='text: name'><\/div><div class='azc-grid-sortableColumn-image-container'>"+("<div class='azc-grid-sortableColumn-sortImage' data-bind='image: $ctl.getPlugin(\""+s+'")._getImage(sortOrder(), $data), css: sortOrder() === 0 ? "fxs-fill-secondary" : "azc-fill-text"\'>')+"<\/div><\/div><\/span>",b=ko.observable,k=i.disposeDisposable,d=(function(n){function f(t){n.call(this);this._disposables=[];this._sortByList=[];this._options=t||{}}return __extends(f,n),f.prototype.setInstance=function(t){n.prototype.setInstance.call(this,t)},r.defineProperty(f.prototype,
"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),f.prototype.afterSetTemplates=function(n){var t=n.getTemplate("headerCellContent");n.setTemplate("headerCellContent","<!-- ko if: sortable -->"+w+"<!-- /ko --><!-- ko ifnot: sortable -->"+t+"<!-- /ko -->")},f.prototype.afterCreate=function(){var n=this,u=this._options,t=this._widget,i=t.options,r=this._sortByList=i.sortByList();u.sortClientSide&&r.length&&this._sortCallback(r);i.sortByList.subscribe(t.lifetimeManager,(function(t){t!==n._sortByList&&n._sortCallback(t)}))},f.prototype._sortCallback=function(n){this._sortByList=n;this._widget.options.actions.sort(n)},f.prototype.afterAttachEvents=function(){var n=this,r=this._widget.getPlugin(u.FocusableRowExtension.Name),f=this._widget.element;this._disposables.push(f.setEvents([l.click,c,function(r){var f=ko.dataFor(this),h=f.itemKey,u=n._sortByList.slice(),c=r.ctrlKey,s=f.sortOrder()===t.Ascending?t.Descending:t.Ascending,e={itemKey:f.itemKey,sortOrder:s},o;r.
preventDefault();c?(o=i.findIndex(u,(function(n){return n.itemKey===h})),o>=0?u[o]=e:u.push(e)):(n._resetColumns(),u=[e]);f.sortOrder(s);n._sortCallback(u)}],[l.keydown,c,function(n){o.getModifierKeys(n)===0&&(n.which===13||n.which===32)&&($(this).trigger(l.click),n.preventDefault())}],["keydown.azc-grid-sortableColumn",c,r?function(n){var t=$(n.currentTarget),i=f.find(c).last();t[0]===i[0]&&n.which===9&&o.getModifierKeys(n)===0&&r._focus(n)}:null]))},f.prototype._resetColumns=function(){var n=this._widget.options,i=n.sortByList();i.length!==0&&n.columns().forEach((function(n){n.sortOrder(t.Unsorted)}))},f.prototype._getImage=function(n){return n===t.Descending?v.CaretDown():v.CaretUp()},f.prototype._getAria=function(n){switch(n){case t.Ascending:return h.ascending.toLowerCase();case t.Descending:return h.descending.toLowerCase()}return null},f.prototype._getTitle=function(n){switch(n){case t.Ascending:return h.ascending;case t.Descending:return h.descending}return h.unsorted},f.prototype.
getDefaultColumnProperties=function(){return{sortable:!0,sortOrder:b(t.Unsorted)}},f.prototype.beforeDestroy=function(){k(this._disposables);this._disposables=[]},f.prototype.getName=function(){return f.Name},f.Name=s,f})(f.Extension);n.SortableColumnExtension=d})(s||(s={})),s}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn",["require","exports","f","o","./Grid1.Extensibility","./Grid1.Impl","Viva.Controls/Controls/Lists/Grid1/Viva.Grid1.SortableColumn"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){var r=i.ViewModels.Controls.Lists.Grid,t=(function(n){function t(){n.apply(this,arguments);this._dataNavigator=null}return __extends(t,n),t.prototype.getExtension=function(n){var i=n,r=i&&i.sortableColumn,t=r.dataNavigator;return t&&(this._dataNavigator=t),new e.SortableColumnExtension({sortClientSide:!t,sortCallback:r.sortCallback||null})},t.prototype.getName=function(){return"SortableColumn"},t.prototype.getOrder=function(){return 0},t})(f.GridExtension);
n.SortableColumnExtension=t;u.registerPlugin(r.Extensions.SortableColumn,t)})(o||(o={})),o}));define("MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1",["require","exports","o","./Grid1.Impl","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ContextMenuShortcut","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.EditableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Extensibility","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Filterable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FocusableRowHover","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Formatter","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.FormatterHtmlBindings","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Groupable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Hierarchical","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Pageable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ReorderRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.ResizableColumn",
"MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.RightClickableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.Scrollable","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SelectableRow","MsPortalImpl.Controls/Controls/Lists/Grid1/Grid1.SortableColumn"],(function(n,t,i,r){"use strict";var u;return (function(n){var t,i,u;n.x=5;t=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(r.GridExtension);n.GridExtension=t;i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(r.Widget);n.Widget=i;u=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(r.TrustedWidget);n.TrustedWidget=u})(u||(u={})),u}))