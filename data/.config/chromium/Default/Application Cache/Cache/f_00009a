define("HubsExtension/ArmHelpers/ArmApiEndpoints",["require","exports","f","i"],(function(n,t,i,r){"use strict";var u;return (function(n){function s(t){return n.armEndpoints.first((function(n){return u.isEqualCloudName(n.cloudName,t)}))}var u=r.Extension,f=i.Base,t=window.fx.environment,e=t.armInvokeApi,o=(t.armEndpoint||"").replace(/\/$/,"");n.armEndpoints=t&&t.armEndpoints||[];u.multiCloudEnabled||(n.armEndpoints=[{cloudName:f.Constants.DefaultCloudName,uri:o,invokeApi:e}]);n.getArmEndpointObject=s})(u||(u={})),u}));define("HubsExtension/Common/BrowseCuration",["require","exports","f","i","FxHubs/RpcEndPoints"],(function(n,t,i,r,u){"use strict";var f;return (function(n){function t(){return n.browseCurationPromise&&n.browseCurationPromise.isFulfilled()||(n.browseCurationPromise=Q(u.Curation.getSharedCurationEndpoint.invoke(r.Rpc.client,f.Shell,undefined))),n.browseCurationPromise}function e(){return t().then((function(n){return n.searchCuration||[]}))}function o(n){return t().then((function(t){var
u=(t.resourceTypesExcludedFromBrowse||[]).first((function(t){return r.Extension.isEqualCloudName(t.cloudName||f.DefaultCloudName,n)}));return i.convertArrayToMap(u&&u.types||[],(function(n){return n}),(function(){return!0}))}))}function s(){return t().then((function(n){return n.mergedAssetTypes||[]}))}var f=i.Base.Constants;n.getSearchCuration=e;n.getExcludedResourceTypes=o;n.getMergedAssetTypes=s})(f||(f={})),f}));define("HubsExtension/Common/AssetTypeCache",["require","exports","f","i","ko","../ArmHelpers/ArmApiEndpoints","FxHubs/RpcEndPoints","./BrowseCuration"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(t){function tt(n){return{assetTypesInformation:s.assetTypes.get(n),isPartialSet:s.isPartialSet}}function ct(n){if(!a.get(n)){var t=Q.defer();a.set(n,t.promise);Q(k()).then((function(){t.resolve(tt(n))}),(function(n){t.reject(n)}),(function(){t.notify(tt(n))}))}return a.get(n)}function it(){return h||(h=Q(d.getRegisteredAssetTypesInformationEndPoint.acquireObject(nt,g,l).then((function(
n){return ht(n&&n.getValue()).finally((function(){n.dispose()}))})))),h}function rt(n){var t=Q.defer(),r=n.cloudName||c.DefaultCloudName,f=n.extensionName,e=n.assetType,u=function(n){if(t.promise.isPending()){var u=n.assetTypesInformation&&i.find(n.assetTypesInformation,(function(n){return y.isEqualCloudName(r,n.cloudName)&&f===n.lowerCaseExtension&&e===n.lowerCaseAssetType}));u&&t.resolve(u)}};return et(r).then(u,null,u).finally((function(){t.promise.isPending()&&t.reject(new Error("Could not find the asset type"))})),t.promise}function ut(n,t,i){var u,r;return n?(u=n.toLowerCase(),s&&(r=s.assetTypes.get(t).first((function(n){return y.isEqualCloudName(n.cloudName,t)&&n.lowerCaseResourceType===u})),r))?Q.resolve(r):Q(d.getResourceTypeAssetTypeInformationEndPoint.invoke(nt,g,{resourceTypes:[n],cloudName:t})).then((function(n){if(n&&n.length){var r=n[0];if(r.assetType)return s&&(r.cloudName=t,s.assetTypes.get(t).push(r)),Q.resolve(r)}if(!i)throw new Error("Did not receive any asset type information from the shell");
return null})):undefined}function ft(n,t,i){return y.isEqualCloudName(n,i.cloudName||c.DefaultCloudName)&&t.lowerCaseExtension===i.extensionName&&t.lowerCaseAssetType===i.assetType}function lt(n,t){return o.getMergedAssetTypes().then((function(r){return ut(n,t).then((function(n){var u=i.find(r,(function(i){return ft(t,n,i.base)||i.associated.some((function(i){return ft(t,n,i)}))})),o={base:n,associated:[]},f,e;return u?(f={base:n,associated:[],infoTextOverride:u.infoTextOverride},e=[],e.push(rt(u.base).then((function(n){f.base=n}))),u.associated.forEach((function(n){e.push(rt(n).then((function(n){f.associated.push(n)})))})),Q.allSettled(e).then((function(n){return n.forEach((function(n){n.state!=="fulfilled"&&st.warning("Failed to find asset type: "+n.reason)})),f}))):o}))}))}function w(n){return s&&!s.isPartialSet?Q.resolve({assetTypesInformation:s.assetTypes.get(n),isPartialSet:s.isPartialSet}):ct(n)}function at(n){return w(n).then((function(n){var t={};return(n&&n.assetTypesInformation||[]).map((function(
n){n.lowerCaseResourceType&&(t[n.lowerCaseResourceType]=n.icon||v.Images.Polychromatic.ResourceDefault())})),t}))}function et(n){return w(n).then((function(n){return n.assetTypesInformation=(n.assetTypesInformation||[]).filter((function(n){return!!n.resourceType})),n}))}function b(n){var u=!1,e=n.isPartialSet;if(s&&(n.assetTypesInformation.every((function(n){var r=s.assetTypes.get(n.cloudName).first((function(t){return i.deepEquals(t,n)}));if(!r){u=!0;t.onlyPartialResultsAvailable(!0);return!1}return!0})),!u))t.onlyPartialResultsAvailable(e);s={assetTypes:r.getCloudMap(),isPartialSet:e};n.assetTypesInformation.forEach((function(n){n.extensionName===c.ExtensionNames.Hubs?f.armEndpoints.forEach((function(t){var r=i.clone(n,!0);r.cloudName=t.cloudName;s.assetTypes.getOrSet(t.cloudName,[]).push(r)})):s.assetTypes.getOrSet(n.cloudName,[]).push(n)}))}function k(){return Q(it()).then((function(n){return b(n),n}),l,(function(n){return b(n),n}))}function vt(){h&&(s=l,a=r.getCloudMap(),h=l,k(),p.forEach((function(
n){n()})))}function yt(n){p.push(n)}function pt(n){p.remove(n)}var v=i.Base,c=v.Constants,ot=v.Diagnostics,y=r.Extension,d=e.AssetTypes,st=ot.createLog(n),l=undefined,g=c.Shell,nt=r.Rpc.client,ht=u.unwrap,s,a=r.getCloudMap(),h,p=[];t.onlyPartialResultsAvailable=u.observable();t.getRegisteredAssetTypesInformation=it;t.getResourceTypeAssetTypeInformation=ut;t.getMergedResourceTypeAssetTypeInformation=lt;t.getRegisteredAssetTypes=w;t.getRegisteredResourceTypesIcons=at;t.getRegisteredResourceTypes=et;t.updateCache=b;t.primeRegisteredAssetTypesCache=k;t.assetTypeCacheUpdated=vt;t.registerAssetTypeCacheUpdatedCallback=yt;t.unregisterAssetTypeCacheUpdatedCallback=pt})(s||(s={})),s}));define("HubsExtension/ArmHelpers/ArmApisStartup",["require","exports","f","i","o","FxHubs/RpcEndPoints","../Common/AssetTypeCache","./ArmApiEndpoints"],(function(n,t,i,r,u,f,e,o){"use strict";var s;return (function(t){function wt(n){var t=o.getArmEndpointObject(n);return t||tt.endpointNotFound(n),t.uri}function p(n){return o.
getArmEndpointObject(n).invokeApi}function rt(n){return n.replace(li,"")}function ut(n){return"/"+rt(n)}function yi(n){return n.replace(ai,"/")}function l(n){return n.toLowerCase()}function pi(n,t){var r=i.trimEnd(t,"/")+i.ensurePrefix(n,"/"),u=ci.exec(r);return u||tt.invalidUrlEndpoint(r),r=u[1]?u[1]+"/":"",r+=yi(rt(u[7])),!u[1]&&u[7].startsWith("/")&&(r="/"+r),u[8]&&(r+=u[8]),r}function a(n,t){return vt(n)?n:pi(n,wt(t))}function wi(n){return{reason:n.trim(),extension:b}}function w(n){var t,r,i;return n?(t=l(n.extension||k),t=t===l(b)?"":"("+t+") ",r=n.reason||"unknown",i=""+t+r,i.length<=60)?i:(t=d(d(d(t,"extension",""),"microsoft","ms"),"azure","az"),i=""+t+r,i.length<=60)?i:i.substr(0,57)+"...":null}function bt(n,i,r,u){n.length>t.maxBatchCallCount&&tt.batchLimitExceeded();var f=n.map((function(n){return vt(n)?{httpMethod:"GET",url:n}:{httpMethod:"GET",relativeUrl:n}})),e={requests:f},o=a("batch"+si,r);return v({cloudName:r,contentType:s,headers:{accept:s},isBackgroundTask:i,invokeApi:
null,setAuthorizationHeader:!0,setTelemetryHeader:w(u),type:"POST",uri:o,data:ct(e)}).then((function(n){return(n.content||{}).responses||[]}))}function ft(n,t,i,r,u,f){if(!n.length)return Q();var e=n.pop(),o=a(e,u);return v({cloudName:u,contentType:s,headers:{accept:s},isBackgroundTask:r,invokeApi:p(u),setAuthorizationHeader:!0,setTelemetryHeader:w(f),type:"GET",uri:o}).then((function(o){var s=o.content,c=s&&s.value,l,h;return s?c?(l=t(c),l===!1?n=[]:(h=s.nextLink,h&&n.push(h))):i({api:e,reason:"Expected response.value not found."}):i({api:e,reason:"Expected response not found."}),ft(n,t,i,r,u,f)}),(function(o){return i({api:e,reason:o}),ft(n,t,i,r,u,f)}))}function bi(n,t,i,r,u,f){return ft(n,t,i,r,u,f)}function kt(n,t,i,r,u,f,e,o,h){var l=a(n,f),c={cloudName:f,headers:{accept:s},isBackgroundTask:r,invokeApi:o!==!1?p(f):null,setAuthorizationHeader:!0,setTelemetryHeader:w(e),type:t,uri:l};return i&&(c.contentType=s,c.data=typeof i=="string"?i:ct(i)),h&&(c.dataFilter=function(n,t){return t==="json"&&
!n?"{}":n}),u&&(c.dataType=u),v(c)}function ki(n,t,i,r,u,f,e,o){return kt(n,t,i,r,"json",u,f,e,o).then((function(n){return n.content}))}function et(n,t,i,r,u,f){if(!n.length)return Q();var e=n.slice(0,20);return n.splice(0,20),bt(e,r,u,f).then((function(o){return o.every((function(r,u){var h;r=r||{};var f=r.content||{},o=f.value,s=f.nextLink;if(f&&o){if(h=t(o),h===!1)return n=[],!1;s&&n.push(s)}else i({api:e[u],reason:r});return!0})),et(n,t,i,r,u,f)}),(function(o){return i({api:e.join("|"),reason:o}),et(n,t,i,r,u,f)}))}function di(n,t){var i={assetTriplet:n,cloudName:t};return ti.mapAssetIdToResourceIdEndPoint.invoke(ht.client,k,i)}function gi(){return"/locations"+pt}function nr(n,t,i){var r;return u.isSubscriptionId(t)?[u.parseSubscriptionDescriptor(t).subscription]:lt(t)?(r=u.parseResourceGroupDescriptor(t),i&&i("resourcegroup eq '"+r.resourceGroup+"'"),[r.subscription]):at(t)&&!u.isTenantResource(t)?(r=yt(t),i&&i("resourcegroup eq '"+r.resourceGroup+"'"),[r.subscription]):n}function tr(n,t,
r){var u=i.makeArray(n).filter((function(n){return!ii(c,(function(t){return n.cloudName===t.cloudName&&n.extensionName===t.extensionName&&n.assetType===t.assetType&&i.deepEquals(n.assetId,t.assetId)}))})),f;c.push.apply(c,u);f=u.map((function(n){var i=n;return i.reason=t,i}));dt.hubsNotifyAssetDeletedDefinition.invoke(r||ht.client,k,f).finally((function(){Q.delay(2e3).then((function(){c.remove.apply(c,u)}))}))}var h=i.Base,ot=h.Constants,st=h.Diagnostics,dt=r.AssetManager,ht=r.Rpc,gt=st.Telemetry,ni=h.Net2,u=i.ViewModels.Services.ResourceTypes,ti=f.AssetTypes,b=ot.ExtensionNames.Hubs,k=ot.Shell,d=i.replaceAll,v=ni.Internal.ajaxExtended,ct=JSON.stringify,lt=u.isResourceGroupId,at=u.isResourceId,vt=h.Resources.isUriAbsolute,yt=u.parseResourceDescriptor,ii=i.find,s="application/json",ri=new RegExp("^[0-9-]+$","ig"),c,ir,rr,ur,fr,er;t.resourceTypeApiVersion="2014-04-01";t.eventsApiVersion="2014-04-01";var ui="2014-04-01-preview",fi="2015-07-01",ei="2016-06-01",g="api-version",y="?api-version=2014-04-01-preview",
oi="?api-version=2016-09-01",si="?api-version=2015-11-01",pt="?api-version=2016-06-01",hi="?api-version=2014-07-01-preview",ci=/^((https?:)(\/\/\/?)([\w]*(?::[\w]*)?@)?([\d\w\.-]+)(?::(\d+))?)?([^?]*)?(?:(.*)?)$/i,li=/^[\s\/\/]*|[\/\/]*$/g,ai=/\/\//g;t.maxBatchCallCount=20;var nt="",vi={batchLimitExceeded:nt,invalidUrlEndpoint:nt,endpointNotFound:nt},tt=r.getErrorMap(vi),it;t.getArmEndpointUri=wt;t.getArmInvokeApi=p;t.getAbsoluteArmUri=a;t.makeResourceManagerTelemetry=wi;t.shortenTelemetryForAjax=w;t.callBatch=bt;t.callWithContinuation=bi;t.callRaw=kt;t.call=ki;t.callBatchWithContinuation=et;t.mapAssetIdFromHubs=di;t.listLocationsApi=gi;t.filterSubscriptionsByScope=nr;c=[];t.internalNotifyAssetDeleted=tr,(function(n){function t(){return"/subscriptions"+pt}function i(n){return"/subscriptions/"+n+"/locations"+y}n.list=t;n.listLocationsApi=i})(ir=t.Subscriptions||(t.Subscriptions={})),(function(n){function t(n){return"/"+rt(n)+"/providers/microsoft.authorization/permissions?api-version="+fi}
n.getPermissionsApi=t})(rr=t.Permissions||(t.Permissions={})),(function(n){function i(n,i,r,u,f){var o;f===void 0&&(f=null);var s="eventTimestamp",c=new h.UriBuilder("/subscriptions/"+i+"/providers/microsoft.insights/eventtypes/management/"+n),e=s+" ge '"+r.toISOString()+"' and "+s+" le '"+u.toISOString()+"'";return f&&f.length>0&&(e=f+" and "+e),o=c.query,o.setParameter(g,t.eventsApiVersion),o.setParameter("$filter",e),c.toString()}function r(n,t,r,u){return u===void 0&&(u=null),i("values",n,t,r,u)}function u(n,t,r,u){return u===void 0&&(u=null),i("digestEvents",n,t,r,u)}n.getEventsApi=r;n.getEventDigestsApi=u})(ur=t.Events||(t.Events={})),(function(n){function t(n){return"/subscriptions/"+n+"/providers/microsoft.authorization/classicAdministrators"+hi}n.listClassicAdministratorsApi=t})(fr=t.ClassicAdministrators||(t.ClassicAdministrators={})),(function(i){function o(n){return"/subscriptions/"+n+"/resourcegroups"+y}function c(n,t){return t?ut(n)+oi:ut(n)+y}function w(n,t){var i=new h.UriBuilder(
ut(n)),r=i.query;return r.getParameter(g)?Q(i.toString()):f(i.path,t).then((function(n){return r.setParameter(g,n),i.toString()}))}function r(n){var t,f,r,e,u;if(!t)for(f=n.split("/"),r=f.length-1;r>0;){if(e=f.slice(0,r).join("/"),u=i.resourceTypeApiVersionDictionary,u[e]){t=u[e];u[n]=t;break}r--}return t}function f(f,o){if(lt(f))return Q.resolve(ui);if(u.isSubscriptionId(f))return Q.resolve(ei);if(at(f)){var h=yt(f),c=l(h.provider+"/"+h.types.join("/")),w;return it||(it=e.getRegisteredResourceTypes(o).then((function(n){n.assetTypesInformation.forEach((function(n){var t=n.resourceType,r=n.apiVersion;t&&r&&(i.resourceTypeApiVersionDictionary[l(t)]=r)}))}))),it.then((function(){if(w=i.resourceTypeApiVersionDictionary[c]||r(c),w)return w;gt.trace({source:b,action:"MissingApiVersion",actionModifier:c});var u=h.subscription,e=h.provider,k=(!u?"/providers/"+e:"/subscriptions/"+u+"/providers/"+e)+y,d=a(k,o);return Q(v({uri:d,invokeApi:p(o),type:"GET",headers:{accept:s},setAuthorizationHeader:!0,setTelemetryHeader:
"getLatestApiVersion",cloudName:o})).then((function(n){var u=n&&n.content&&n.content.resourceTypes||[];return u.forEach((function(n){var t=n.apiVersions||[],u=t.first((function(n){return n&&ri.test(n)})),r=l(h.provider+"/"+n.resourceType);i.resourceTypeApiVersionDictionary[r]||(i.resourceTypeApiVersionDictionary[r]=u||t[0])})),i.resourceTypeApiVersionDictionary[c]||r(c)||t.resourceTypeApiVersion}),(function(i){return st.createLog(n).warning(f+" using api ver "+t.resourceTypeApiVersion+". Error "+i.responseText),t.resourceTypeApiVersion}))}))}return Q.reject("Unexpected id "+f)}i.resourceTypeApiVersionDictionary={"aspera.transfers/services":"2016-03-25","cloudyn.analytics/accounts":"2016-03-01","conexlink.mycloudit/accounts":"2015-06-15","hive.streaming/services":"2016-03-18","microsoft.bingmaps/mapapis":"2015-07-02","microsoft.visualstudio/account/project":"2014-02-26","newrelic.apm/accounts":"2014-10-01","pokitdok.platform/services":"2016-05-17","raygun.crashreporting/apps":"2015-01-01","signiant.flight/accounts":
"2015-06-29","trendmicro.deepsecurity/accounts":"2015-06-15"};i.resourceGroupsInSubscriptionApi=o;i.resourceGroupApi=c;i.resourceApi=w;i.getLatestApiVersion=f})(er=t.Resources||(t.Resources={}))})(s||(s={})),s}));define("HubsExtension/ArmHelpers/Models/ArmResourceGroup",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(t){function f(n){if(!n.id)return u.warning("ARM returned a resource group with no id: "+JSON.stringify(n)),null;var i=n.tags||{},t=n.properties||{};return{id:n.id,location:n.location,name:n.name,tags:i,properties:t,lockState:t.lockState,provisioningState:t.provisioningState,managedBy:n.managedBy}}var r=i.Base.Diagnostics,u=r.createLog(n);t.toResourceGroup=f})(r||(r={})),r}));define("HubsExtension/Notifications/EventSubscriptionService",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(n){function o(n,r,u){if(!n.operationNameRegex&&!n.source&&!n.status&&!n.subStatus)throw new Error("At least one criteria must be specified.");
var f=i.getUniqueId();return t.push({cookie:f,criteria:n,callback:r,eventLimit:u}),f}function s(n){var i=t.filter((function(t){return t.cookie!==n}));t=i}function r(n,t){return!n==!t&&n.toLowerCase()===t.toLowerCase()}function h(n,t){var i=t.operationNameRegex,u;if(i&&(u=new RegExp(i,"ig"),!u.test(n.operationName)))return!1;var f=t.source,o=t.status,s=t.subStatus;return f&&!r(n.source,f)||o&&!r(n.status,o)||!e(s)&&!r(n.subStatus,s)?!1:!0}function f(n,i){var r=t.slice();r.forEach((function(t){var r=[];n.forEach((function(n){h(n,t.criteria)&&r.push(n)}));t.callback(r.slice(0,t.eventLimit||r.length),i)}))}function c(n){var t="microsoft.resources",e=t+"/subscriptions/resourcegroups",i="/delete",r=function(n,i,r){f([{operationName:r,status:"succeeded",source:t,correlationId:null,timestamp:new Date,assetId:n,isLocalEvent:!0}],i)};return n.forEach((function(n){u.isResourceGroupId(n.assetId)?r(n.assetId,n.cloudName,e+i):u.isResourceId(n.assetId)&&r(n.assetId,n.cloudName,i)})),Q(!0)}var u=i.ViewModels.
Services.ResourceTypes,e=i.isNullOrUndefined,t=[];n.subscribeToArmEvent=o;n.removeArmEventSubscription=s;n.matchEvents=f;n.createResourceDeletedEvent=c})(r||(r={})),r}));define("HubsExtension/_generated/ExtensionDefinition",["require","exports","i","HubsExtension/Tags/TagsClientStrings","HubsExtension/ServicesHealth/ServicesHealthClientStrings","HubsExtension/ResourceMap/ResourceMapClientStrings","HubsExtension/Locks/LocksClientStrings","HubsExtension/ClassicAdmins/ManagementTeamClientStrings","HubsExtension/Browse/BrowseClientStrings","HubsExtension/MoveResource/MoveResourceStrings"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function a(){var w=l.createGalleryServiceDefinition,b=l.createAssetIdSource,k=l.createPermission,v=l.createCommandGroupDefinition,c=l.createPartReferenceDefinition3,a=l.createPartInstanceDefinition,p=l.createDetailsDefinition2,n=l.createReference,i=l.createInputBinding,y=l.createCommandDefinition,d=l.createDefinition3;return d(t,[y("MoveResourceCommand",
h.moveResourceCommandText,"MoveResource$MoveResourceCommandVM",[i("resourceId",[n(1,"resourceId")],!1)],p(t,t,t,[i(t,[n(4,"container.selectable")],!1)],t,t,t,[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),t,t,t,2)],[a("Browse",c("BrowseAllResourcesPinnedPart",t,t,[],4),t,!1),a("ServicesHealthPartStart",c("ServicesHealthPart",t,t,[],1),t,!1),a("GalleryTileStart",c("GalleryTile",t,t,[i("selectedMenuItemId",[n(5,"constant_",t,t,t,"")],!0)],2),t,!1),a("HelpAndSupport",c("HelpAndSupportPart",t,t,[],2),t,!1),a("GettingStarted",c("GettingStartedPart",t,t,[],5,5,4),t,!1),a("Diagnostics",c("DiagnosticsTile",t,t,[],0),t,!1),a("TourTileStart",c("TourTile",t,t,[],2),t,!1),a("Settings",c("SettingsBladePart",t,t,[],1),t,!1),a("BillingTileStart",c("SubscriptionsTile",t,t,[],0),t,!1),a("WhatsNewTileStart",c("WhatsNewTile",t,t,[],2),t,!1),a("FeedbackTileStart",c("FeedbackTile",t,t,[],1),t,!1),a("AzurePortalTileStart",c("AzurePortalTile",t,t,[],1),t,!1)],[v("serviceCommandGroup",[]),v("RecentResourceBrowseGrid2Commands",
[y("DiscardRecentResource",s.discardRecentItem,"BrowseGrid2$DiscardRecentResourceCommand",[i("id",[n(1,"id")],!1),i("assetType",[n(1,"assetType")],!0),i("extensionName",[n(1,"extensionName")],!0)],t,t,t,t,0)]),v("ManagementTeamCommandGroup",[y("ManageUsersCommand",o.manageUsersCommandText,"ClassicAdmins$ManageUsersCommand",[],t,t,t,t,1)]),v("LockCommands",[y("Delete",e.delete,"Locks$DeleteLockCommandViewModel",[i("id",[n(1,"id")],!1)],t,t,t,t,0)]),v("MoveResourceCommands",[y("MoveResourceCommand",h.moveResourceCommandText,"MoveResource$MoveResourceCommandVM",[i("resourceId",[n(1,"resourceId")],!1)],p(t,t,t,[i(t,[n(4,"container.selectable")],!1)],t,t,t,[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),t,t,t,2)]),v("ResourceGroupBrowseCommands",[y("OpenResourceGroupDeleteBlade",f.deleteResourceGroupCommandTitle,"ResourceMap$DeleteResourceGroupCommandViewModel",[i("resourceGroup",[n(1,"id")],!1)],p("ResourceGroupDeleteBladeForCommand",t,t,t,t,t,[i("resourceGroup",[n(4,"content.resourceGroup")],
!1)],[i("actionBarOutput",[n(1,"actionBarOutput")],!1)]),"ResourceGroups","resourceGroup",[k(t,"ResourceGroups",b(0,"resourceGroup"),"Microsoft.Resources/subscriptions/resourceGroups/delete",0)],2)]),v("ServiceHealth",[y(t,u.ServiceHealth.uriCommandTitle,"ServicesHealth$PublicShdUriCommand",[],t,t,t,t,1)]),v("AddTagCommandGroup",[y("AddTagCommand",r.addCommandText,"Tags$SaveTagCommand",[],t,t,t,t,0)]),v("TagItemCommandGroup",[y("DeleteTagCommand",r.deleteCommandText,"Tags$DeleteTagCommand",[i("key",[n(1,"key")],!1),i("value",[n(1,"value")],!1),i("resourceId",[n(1,"resourceId")],!1),i("allowEdits",[n(1,"allowEdits")],!1)],t,t,t,t,0)]),v("MoveResourceBladeCommands",[y(t,h.moveDocLabel,"MoveResource$LearnMoreCommandVM",[],t,t,t,t,1)])],{},t,w("Deployments$CustomDeploymentBladeSelector"),t,"HubsExtension","1.0","47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU=%","1.0.0.2","5.0.302.761 (production_merge#6fd00ab.170525-1936)")}var t=undefined,l=i.DefinitionBuilder,v,c,y,p,w;n.definitionName="HubsExtension";
n.getDefinition=a,(function(n){var t,i,r,u,f,e;(function(n){n.name="Microsoft_Azure_Insights"})(t=n.Microsoft_Azure_Insights||(n.Microsoft_Azure_Insights={})),(function(n){n.name="Microsoft_Azure_Monitoring";var t;(function(n){var t,i,r,u,f;(function(n){n.name="EventsBrowseBlade"})(t=n.EventsBrowseBlade||(n.EventsBrowseBlade={})),(function(n){n.name="DiagnosticsLogsBlade"})(i=n.DiagnosticsLogsBlade||(n.DiagnosticsLogsBlade={})),(function(n){n.name="AlertsBlade"})(r=n.AlertsBlade||(n.AlertsBlade={})),(function(n){n.name="MetricsBlade";var t;(function(n){n.queryInputs="queryInputs"})(t=n.Inputs||(n.Inputs={}))})(u=n.MetricsBlade||(n.MetricsBlade={})),(function(n){n.name="MetricsBladeV2"})(f=n.MetricsBladeV2||(n.MetricsBladeV2={}))})(t=n.Blades||(n.Blades={}))})(i=n.Microsoft_Azure_Monitoring||(n.Microsoft_Azure_Monitoring={})),(function(n){n.name="Microsoft_Azure_Resources";var t;(function(n){var t,i,r;(function(n){n.name="QuotasBlade";var t;(function(n){n.bladeInputs="bladeInputs"})(t=n.Inputs||(n.
Inputs={}))})(t=n.QuotasBlade||(n.QuotasBlade={})),(function(n){n.name="ArmPolicyBlade";var t;(function(n){n.bladeInputs="bladeInputs"})(t=n.Inputs||(n.Inputs={}))})(i=n.ArmPolicyBlade||(n.ArmPolicyBlade={})),(function(n){n.name="ArmPolicyAddBlade"})(r=n.ArmPolicyAddBlade||(n.ArmPolicyAddBlade={}))})(t=n.Blades||(n.Blades={}))})(r=n.Microsoft_Azure_Resources||(n.Microsoft_Azure_Resources={})),(function(n){n.name="Microsoft_Azure_Marketplace";var t;(function(n){var t,i;(function(n){var t,i;n.name="GalleryFeaturedMenuItemBlade",(function(n){n.selectedMenuItemId="selectedMenuItemId"})(t=n.Inputs||(n.Inputs={})),(function(n){n.resetMenuId="resetMenuId";n.createTriggeredSignal="createTriggeredSignal"})(i=n.Outputs||(n.Outputs={}))})(t=n.GalleryFeaturedMenuItemBlade||(n.GalleryFeaturedMenuItemBlade={})),(function(n){var t,i;n.name="GalleryResultsListBlade",(function(n){n.selectedSubMenuItemId="selectedSubMenuItemId"})(t=n.Inputs||(n.Inputs={})),(function(n){n.inlineGalleryCreateOutputs="inlineGalleryCreateOutputs"})
(i=n.Outputs||(n.Outputs={}))})(i=n.GalleryResultsListBlade||(n.GalleryResultsListBlade={}))})(t=n.Blades||(n.Blades={}))})(u=n.Microsoft_Azure_Marketplace||(n.Microsoft_Azure_Marketplace={})),(function(n){n.name="Microsoft_Azure_Billing";var t;(function(n){var t,i,r,u;(function(n){n.name="SubscriptionsBlade"})(t=n.SubscriptionsBlade||(n.SubscriptionsBlade={})),(function(n){n.name="AccountBlade"})(i=n.AccountBlade||(n.AccountBlade={})),(function(n){n.name="BillingNoSubscriptionsBlade"})(r=n.BillingNoSubscriptionsBlade||(n.BillingNoSubscriptionsBlade={})),(function(n){n.name="UpgradeSubscriptionBlade";var t;(function(n){n.subscriptionId="subscriptionId"})(t=n.Inputs||(n.Inputs={}))})(u=n.UpgradeSubscriptionBlade||(n.UpgradeSubscriptionBlade={}))})(t=n.Blades||(n.Blades={}))})(f=n.Microsoft_Azure_Billing||(n.Microsoft_Azure_Billing={})),(function(n){n.name="Microsoft_Azure_AD";var t;(function(n){var t,i,r,u;(function(n){var t,i;n.name="SelectMember",(function(n){n.collectorBindingInternals_inputs="collectorBindingInternals-inputs";
n.collectorBindingInternals_errors="collectorBindingInternals-errors";n.stepInput="stepInput"})(t=n.Inputs||(n.Inputs={})),(function(n){n.collectorBindingInternals_outputs="collectorBindingInternals-outputs";n.collectorBindingInternals_commit="collectorBindingInternals-commit";n.stepOutput="stepOutput"})(i=n.Outputs||(n.Outputs={}))})(t=n.SelectMember||(n.SelectMember={})),(function(n){n.name="SelectMemberV3";var t;(function(n){n.title="title";n.subtitle="subtitle"})(t=n.Inputs||(n.Inputs={}))})(i=n.SelectMemberV3||(n.SelectMemberV3={})),(function(n){n.name="RolesListBlade";var t;(function(n){n.scope="scope"})(t=n.Inputs||(n.Inputs={}))})(r=n.RolesListBlade||(n.RolesListBlade={})),(function(n){n.name="UserAssignmentsBlade";var t;(function(n){n.scope="scope"})(t=n.Inputs||(n.Inputs={}))})(u=n.UserAssignmentsBlade||(n.UserAssignmentsBlade={}))})(t=n.Blades||(n.Blades={}))})(e=n.Microsoft_Azure_AD||(n.Microsoft_Azure_AD={}))})(v=n.External||(n.External={})),(function(n){var t,i,r,u,f,e,o,s,h,c,l,a,v,
y,p,w,b,k,d,g,nt,tt,it,rt,ut,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt;(function(n){n.name="ArmExplorer"})(t=n.ArmExplorer||(n.ArmExplorer={})),(function(n){n.name="BrowseAll"})(i=n.BrowseAll||(n.BrowseAll={})),(function(n){n.name="BrowseAllWithType"})(r=n.BrowseAllWithType||(n.BrowseAllWithType={})),(function(n){n.name="BrowseService"})(u=n.BrowseService||(n.BrowseService={})),(function(n){n.name="BrowseDynamicAsset"})(f=n.BrowseDynamicAsset||(n.BrowseDynamicAsset={})),(function(n){n.name="BrowseDynamicResource"})(e=n.BrowseDynamicResource||(n.BrowseDynamicResource={})),(function(n){n.name="NonAssetResource"})(o=n.NonAssetResource||(n.NonAssetResource={})),(function(n){n.name="BrowseInstanceLink"})(s=n.BrowseInstanceLink||(n.BrowseInstanceLink={})),(function(n){n.name="BrowseResource"})(h=n.BrowseResource||(n.BrowseResource={})),(function(n){n.name="BrowseAllResources"})(c=n.BrowseAllResources||(n.BrowseAllResources={})),(function(n){n.name="BrowseRecentResources"})(l=n.BrowseRecentResources||(n.BrowseRecentResources=
{})),(function(n){n.name="BrowseResourceGroup"})(a=n.BrowseResourceGroup||(n.BrowseResourceGroup={})),(function(n){n.name="ActiveDirectoryMfaPlaceholder"})(v=n.ActiveDirectoryMfaPlaceholder||(n.ActiveDirectoryMfaPlaceholder={})),(function(n){n.name="ActiveDirectoryRmsPlaceholder"})(y=n.ActiveDirectoryRmsPlaceholder||(n.ActiveDirectoryRmsPlaceholder={})),(function(n){n.name="ApiManagementPlaceholder"})(p=n.ApiManagementPlaceholder||(n.ApiManagementPlaceholder={})),(function(n){n.name="BackupPlaceholder"})(w=n.BackupPlaceholder||(n.BackupPlaceholder={})),(function(n){n.name="BizTalkServicePlaceholder"})(b=n.BizTalkServicePlaceholder||(n.BizTalkServicePlaceholder={})),(function(n){n.name="CdnPlaceholder"})(k=n.CdnPlaceholder||(n.CdnPlaceholder={})),(function(n){n.name="EventHubPlaceholder"})(d=n.EventHubPlaceholder||(n.EventHubPlaceholder={})),(function(n){n.name="MarketplaceAddOnPlaceholder"})(g=n.MarketplaceAddOnPlaceholder||(n.MarketplaceAddOnPlaceholder={})),(function(n){n.name="MediaServicePlaceholder"})
(nt=n.MediaServicePlaceholder||(n.MediaServicePlaceholder={})),(function(n){n.name="MobileServicePlaceholder"})(tt=n.MobileServicePlaceholder||(n.MobileServicePlaceholder={})),(function(n){n.name="RemoteAppPlaceholder"})(it=n.RemoteAppPlaceholder||(n.RemoteAppPlaceholder={})),(function(n){n.name="ServiceBusPlaceholder"})(rt=n.ServiceBusPlaceholder||(n.ServiceBusPlaceholder={})),(function(n){n.name="SiteRecoveryPlaceholder"})(ut=n.SiteRecoveryPlaceholder||(n.SiteRecoveryPlaceholder={})),(function(n){n.name="StorSimplePlaceholder"})(ft=n.StorSimplePlaceholder||(n.StorSimplePlaceholder={})),(function(n){n.name="StreamAnalyticsPlaceholder"})(et=n.StreamAnalyticsPlaceholder||(n.StreamAnalyticsPlaceholder={})),(function(n){n.name="AccountPortalSearchResult"})(ot=n.AccountPortalSearchResult||(n.AccountPortalSearchResult={})),(function(n){n.name="WhatsNew"})(st=n.WhatsNew||(n.WhatsNew={})),(function(n){n.name="Deployments"})(ht=n.Deployments||(n.Deployments={})),(function(n){n.name="ResourceGroups";var t;(function(
n){n.read="Microsoft.Resources/subscriptions/resourceGroups/read";n.deleteObject="Microsoft.Resources/subscriptions/resourceGroups/delete";n.write="Microsoft.Resources/subscriptions/resourceGroups/write";n.writeDeployments="Microsoft.Resources/subscriptions/resourceGroups/deployments/write";n.readDeployments="Microsoft.Resources/subscriptions/resourceGroups/deployments/read";n.readEvents="Microsoft.Insights/events/read"})(t=n.Permissions||(n.Permissions={}))})(ct=n.ResourceGroups||(n.ResourceGroups={})),(function(n){n.name="ResourceGroupEvents"})(lt=n.ResourceGroupEvents||(n.ResourceGroupEvents={})),(function(n){n.name="ServicesHealth"})(at=n.ServicesHealth||(n.ServicesHealth={})),(function(n){n.name="Settings"})(vt=n.Settings||(n.Settings={})),(function(n){n.name="Tag"})(yt=n.Tag||(n.Tag={})),(function(n){n.name="Dashboard"})(pt=n.Dashboard||(n.Dashboard={}))})(c=n.AssetTypes||(n.AssetTypes={})),(function(n){n.armExplorer=c.ArmExplorer.name;n.browseAll=c.BrowseAll.name;n.browseAllWithType=c.BrowseAllWithType.
name;n.browseService=c.BrowseService.name;n.browseDynamicAsset=c.BrowseDynamicAsset.name;n.browseDynamicResource=c.BrowseDynamicResource.name;n.nonAssetResource=c.NonAssetResource.name;n.browseInstanceLink=c.BrowseInstanceLink.name;n.browseResource=c.BrowseResource.name;n.browseAllResources=c.BrowseAllResources.name;n.browseRecentResources=c.BrowseRecentResources.name;n.browseResourceGroup=c.BrowseResourceGroup.name;n.activeDirectoryMfaPlaceholder=c.ActiveDirectoryMfaPlaceholder.name;n.activeDirectoryRmsPlaceholder=c.ActiveDirectoryRmsPlaceholder.name;n.apiManagementPlaceholder=c.ApiManagementPlaceholder.name;n.backupPlaceholder=c.BackupPlaceholder.name;n.bizTalkServicePlaceholder=c.BizTalkServicePlaceholder.name;n.cdnPlaceholder=c.CdnPlaceholder.name;n.eventHubPlaceholder=c.EventHubPlaceholder.name;n.marketplaceAddOnPlaceholder=c.MarketplaceAddOnPlaceholder.name;n.mediaServicePlaceholder=c.MediaServicePlaceholder.name;n.mobileServicePlaceholder=c.MobileServicePlaceholder.name;n.remoteAppPlaceholder=
c.RemoteAppPlaceholder.name;n.serviceBusPlaceholder=c.ServiceBusPlaceholder.name;n.siteRecoveryPlaceholder=c.SiteRecoveryPlaceholder.name;n.storSimplePlaceholder=c.StorSimplePlaceholder.name;n.streamAnalyticsPlaceholder=c.StreamAnalyticsPlaceholder.name;n.accountPortalSearchResult=c.AccountPortalSearchResult.name;n.whatsNew=c.WhatsNew.name;n.deployments=c.Deployments.name;n.resourceGroups=c.ResourceGroups.name;n.resourceGroupEvents=c.ResourceGroupEvents.name;n.servicesHealth=c.ServicesHealth.name;n.settings=c.Settings.name;n.tag=c.Tag.name;n.dashboard=c.Dashboard.name})(y=n.AssetTypeNames||(n.AssetTypeNames={})),(function(n){n.armExplorerBlade="ArmExplorerBlade";n.unauthorizedAssetBlade="UnauthorizedAssetBlade";n.notFoundAssetBlade="NotFoundAssetBlade";n.unavailableAssetBlade="UnavailableAssetBlade";n.noCreateFlowBlade="NoCreateFlowBlade";n.browseAllBlade="BrowseAllBlade";n.browseAllBladeWithType="BrowseAllBladeWithType";n.browseServiceBlade="BrowseServiceBlade";n.browseDynamicAssetBlade=
"BrowseDynamicAssetBlade";n.browseDynamicResourceBlade="BrowseDynamicResourceBlade";n.resources="Resources";n.browseAllResourcesBlade="BrowseAllResourcesBlade";n.browseResourceBlade="BrowseResourceBlade";n.browseInstanceLinkBlade="BrowseInstanceLinkBlade";n.browseResourceGroupBlade="BrowseResourceGroupBlade";n.browseRecentResourcesBlade="BrowseRecentResourcesBlade";n.mapResourceGroupBlade="MapResourceGroupBlade";n.browseGrid2ChooseColumnsBlade="BrowseGrid2ChooseColumnsBlade";n.resourceProperties="ResourceProperties";n.browseLinkBlade="BrowseLinkBlade";n.resourceGroupPickerV3Blade="ResourceGroupPickerV3Blade";n.managementTeamBlade="ManagementTeamBlade";n.deployFromTemplateBlade="DeployFromTemplateBlade";n.parametersEditorBlade="ParametersEditorBlade";n.parametersFileEditorBlade="ParametersFileEditorBlade";n.templateEditorBlade="TemplateEditorBlade";n.templateViewerBlade="TemplateViewerBlade";n.errorDetailsBlade="ErrorDetailsBlade";n.whatsNewBlade="WhatsNewBlade";n.noSubscriptionsBlade="NoSubscriptionsBlade";
n.noMsdnOfferOnSubscriptionsBlade="NoMsdnOfferOnSubscriptionsBlade";n.subCertsBlade="SubCertsBlade";n.locationPickerV3Blade="LocationPickerV3Blade";n.locksBlade="LocksBlade";n.lockEditBlade="LockEditBlade";n.moveResourceBlade="MoveResourceBlade";n.regionPickerBlade="RegionPickerBlade";n.resourceGroupPickerBlade="ResourceGroupPickerBlade";n.createResourceGroupBlade="CreateResourceGroupBlade";n.subscriptionPickerBlade="SubscriptionPickerBlade";n.createEmptyResourceGroupBlade="CreateEmptyResourceGroupBlade";n.deploymentsListBlade="DeploymentsListBlade";n.deploymentDetailsBlade="DeploymentDetailsBlade";n.deploymentOperationPropertiesBlade="DeploymentOperationPropertiesBlade";n.resourceGroupMapBlade="ResourceGroupMapBlade";n.resourceGroupQuickStartBlade="ResourceGroupQuickStartBlade";n.resourceGroupEventsBlade="ResourceGroupEventsBlade";n.resourceGroupCostsBlade="ResourceGroupCostsBlade";n.resourceGroupDeleteBlade="ResourceGroupDeleteBlade";n.resourceGroupDeleteBladeForCommand="ResourceGroupDeleteBladeForCommand";
n.resourceGroupSettingListBlade="ResourceGroupSettingListBlade";n.resourceMenuBlade="ResourceMenuBlade";n.servicesHealthBlade="ServicesHealthBlade";n.settingsBlade="SettingsBlade";n.languageSelectionBlade="LanguageSelectionBlade";n.localeSelectionBlade="LocaleSelectionBlade";n.myAccessBlade="MyAccessBlade";n.rPStatusBlade="RPStatusBlade";n.azureProvisioningResultsBlade="AzureProvisioningResultsBlade";n.subscriptionPickerV3Blade="SubscriptionPickerV3Blade";n.resourcesWithTagBlade="ResourcesWithTagBlade";n.resourceTagsListBlade="ResourceTagsListBlade";n.subscriptionTagsListBlade="SubscriptionTagsListBlade";n.armDataContextPane="ArmDataContextPane";n.armDataJsonBlade="ArmDataJsonBlade";n.armDataResultJsonBlade="ArmDataResultJsonBlade";n.armActionsContextPane="ArmActionsContextPane";n.armActionsResultJsonBlade="ArmActionsResultJsonBlade";n.deployToAzure="DeployToAzure";n.gettingStartedBlade="GettingStartedBlade";n.dashboardBlade="DashboardBlade";n.markdownContextPane="MarkdownContextPane";
n.armErrorsBlade="ArmErrorsBlade";n.clockContextPane="ClockContextPane";n.videoContextPane="VideoContextPane"})(p=n.BladeNames||(n.BladeNames={})),(function(n){n.serviceCommandGroup="serviceCommandGroup";n.recentResourceBrowseGrid2Commands="RecentResourceBrowseGrid2Commands";n.managementTeamCommandGroup="ManagementTeamCommandGroup";n.lockCommands="LockCommands";n.moveResourceCommands="MoveResourceCommands";n.resourceGroupBrowseCommands="ResourceGroupBrowseCommands";n.serviceHealth="ServiceHealth";n.addTagCommandGroup="AddTagCommandGroup";n.tagItemCommandGroup="TagItemCommandGroup"})(w=n.CommandGroupNames||(n.CommandGroupNames={}))})(c||(c={})),c}));define("HubsExtension/HubsCommon",["require","exports","f","./_generated/ExtensionDefinition"],(function(n,t,i,r){"use strict";var u;return (function(n){function l(){var n="HubsExtension.BrowseResources";return o||(i.Data.Metadata.setTypeMetadata(n,{idProperties:["id"]}),o=!0),n}function a(t){var i="";return t?(i=(t.status||t.state||"").toLowerCase(
),!!~[n.subscriptionEnabledStatus,n.subscriptionActiveStatus,n.subscriptionWarnedStatus,n.subscriptionPastDueStatus].indexOf(i)):!1}function v(){return u||(u={},(c.fx.environment.armSubscriptionQuotaIds||[]).forEach((function(n){u[n.toLocaleLowerCase()]=!0}))),u}var s=i.Base,h=s.Constants.ExtensionNames,t=r.BladeNames,c=window,f="ResourceGroup",e="Blade",u,o;n.extensionName=h.Hubs;n.marketplaceExtensionName=h.Marketplace;n.resourceGroupPartName=f+"MapPinnedPart";n.resourceGroupMapBlade=f+"Map"+e;n.resourceGroupEventsBlade=f+"Events"+e;n.deploymentDetailsBlade="DeploymentDetails"+e;n.subscriptionEnabledStatus="enabled";n.subscriptionActiveStatus="active";n.subscriptionWarnedStatus="warned";n.subscriptionDisabledStatus="disabled";n.subscriptionPastDueStatus="pastdue";n.whatsNewFeedUriFormat=s.Resources.getAppRelativeUri("api/WhatsNew?count={0}");n.tagsV2Enabled=i.isFeatureEnabled("tagsv2");n.resourceMenuEnabled=i.isFeatureEnabled("resourcemenu");n.resourceGroupBladeName=n.resourceMenuEnabled?
t.resourceMenuBlade:t.resourceGroupMapBlade;n.defaultResourceBladeName=n.resourceMenuEnabled?t.resourceMenuBlade:t.resourceProperties;o=!1;n.getBrowseEntityType=l;n.hasValidStatus=a;n.getArmSubscriptionQuotaIds=v;n.subsLimitPerResourcesAcrossSubsCall=40})(u||(u={})),u}));define("HubsExtension/Common/HubsObservables",["require","exports","f","i","a","ko","../ArmHelpers/ArmApisStartup","../ArmHelpers/ArmApiEndpoints","./AssetTypeCache","../ArmHelpers/Models/ArmResourceGroup","HubsExtension/Common/CommonClientStrings","../Notifications/EventSubscriptionService","../HubsCommon","HubsExtension/Notifications/NotificationsClientStrings"],(function(n,t,i,r,u,f,e,o,s,h,c,l,a,v){"use strict";var y;return (function(t){function u(n){return n.toLowerCase()}function ct(t,r){return i.require(n.normalize(t)).then((function(n){return r(n)}))}function ci(){return hr()}function wt(n,t){var i=u(n.status||""),r=u(t.status||"");if(i!==r){if(i===pt)return 1;if(r===pt)return-1}return n.subscriptionName.localeCompareIgnoreCase(
t.subscriptionName)||n.subscriptionID.localeCompareIgnoreCase(t.subscriptionID)}function lr(n){var t=[],r=e.callBatchWithContinuation(tt.slice(),(function(n){var i=n.map(h.toResourceGroup).filter((function(n){return!!n}));return t=t.concat(i),t.length<ei}),(function(n){var r=n.api||"",t=n.reason||{},f=t.httpStatusCode||(t.jqXHR||{}).status,e=f===0;e||(~[401,403,404].indexOf(f)?i.remove(tt,(function(n){return u(n||"")===u(r)})):b.error("GetResourceGroups failed for api: "+r+" reason: "+rt(t)))}),!0,n,st("getResourceGroups"));return r.then((function(){return t.slice(0,ei)}))}function ar(n,t){var i=function(){return lr(t)};return tt?i():(tt=n.map((function(n){return e.Resources.resourceGroupsInSubscriptionApi(n.subscriptionID)})),i())}function vr(n){var t=nt.get(n),r=t&&t.Subscriptions,u=r&&r.data(),f;u&&u.subscriptions&&(f=(t.SelectedSubscriptions.data()||[]).map(ut),r.data({subscriptions:i.union(f.stableSort(wt),u.subscriptions.stableSort(wt),(function(n,t){return n.subscriptionID.localeCompareIgnoreCase(
t.subscriptionID)===0}))}))}function yr(n){return y(n).dataPromise.then((function(){return gi.getSelectedSubscriptions(ft.client,n).then((function(t){it(n).data(t);vr(n);d.trace({source:si,action:er,data:{cloudName:n,count:t?t.length:-1}})}))}))}function pr(n){var r,u,i;return t.loadDataFromServer&&(u=y(n),i=k(n),r=i.dataPromise,!r&&i.loadData&&(r=u.dataPromise.then((function(){var t=u.data().subscriptions;return t.length?ar(t,n):g})).then((function(n){i.data({resourceGroups:n});i.loadData=!1})).finally((function(){i.dataPromise=null})),i.dataPromise=r)),r||g}function li(n){return!!n.first((function(n){return(n.authorizationSource||"").toLowerCase().indexOf("legacy")>=0}))}function wr(n,t){var i=bt(n,t);return!!i&&li([ut(i)])}function br(){return ci().then((function(n){return n.tenants.length}))}function kr(){var n=at(fr);ci().then((function(t){var i=t.tenants=t.tenants||[];return vt(n,i.length),t}),(function(t){yt(n);b.error("Failed for tenant info: "+rt(t));var i=new HubsExtension.Azure.TenantInfo;return i.
tenants=[],i.failed=!0,i})).then((function(n){ni.updateTenantInfoEndPoint.invoke(ft.client,ht,{tenantInfo:n});hi=n.tenants.length}));o.armEndpoints.forEach((function(n){var t=n.cloudName;nt.set(t,{Subscriptions:{dataPromise:null,data:f.observable({subscriptions:[]}),map:{}},SelectedSubscriptions:{dataPromise:null,data:f.observable([])},ResourceGroups:{loader:pr,loadData:!0,dataPromise:null,data:f.observable({resourceGroups:[]})},SpecDataSet:{data:f.observable({})}});y(t).dataPromise=bi(t);it(t).dataPromise=yr(t)}));l.subscribeToArmEvent({source:ui,operationNameRegex:fi+"/*"},(function(n,t){var i=!1;n.forEach((function(n){var r=n.assetId;ti.isResourceGroupId(r)&&n.source===fi+"/delete"?u(n.status)===ur&&pi(t,r):i=!0}));i&&yi(t)}))}function dr(n,t){gt.sharedObservablesEndPoint.registerObjectFactory(n,{allowedOrigin:null,allowRemoteChanges:!1,handler:function(n,i){return t(n,i.srcWindowId)}})}function gr(n,t){var r=gt.getDescriptor(t).cloudName,u=nt.get(r),i=u[n];if(i)return i.loader&&i.loader(r),
i.data;sr.unknown(n)}function nu(n){return y(n).data}function tu(n){return y(n).dataPromise}function iu(n){return y(n).map}function bt(n,t){var r,u,i;return n&&(n=n.toUpperCase(),u=y(t),i=u.map,i&&(r=i[n])),r}function ru(n,t){if(!n)return Q.reject("Invalid subscription id "+n);var i=y(t);return i.dataPromise.then((function(){var i=bt(n,t);return i?Q(i):Q.reject("Subscription with id "+n+" not found")}))}function uu(n){return vi(n).then((function(t){return ai(n).then((function(n){var r=n()||[],i=r.length;return!i||i===t.length?c.allSubscriptionsSelectedText:i===1?r[0].uniqueDisplayName:c.multipleSubscriptionsSelectedText.format(i)}))}))}function ai(n){var t=it(n);return t.dataPromise.then((function(){return t.data}))}function fu(n,t){it(n).data(t)}function vi(n){var t=y(n);return t.dataPromise.then((function(){return t.data().subscriptions.map(kt)}))}function eu(n){var t=k(n);return t.loader(n),t.data}function ou(n,t){return wi(n).then((function(n){var r={};return t?n.forEach((function(n){var t=ii[
n.name.toLowerCase()];t&&(r[n.name]=n.displayName)})):i.extendArrayIntoMap(r,n,(function(n){return n.name}),(function(n){return n.displayName})),r}))}function su(n){return k(n).loader(n)}function yi(n){var t=k(n);t.loadData||(t.loadData=!0,t.loader(n))}function pi(n,t){var r=k(n);r.loadData||(r.dataPromise||g).then((function(){var n=r.data;n({resourceGroups:i.remove(n().resourceGroups||[],(function(n){return ti.compareResourceGroupId(n.id,t)}))})}))}function hu(){s.primeRegisteredAssetTypesCache()}function wi(n){var t=cr.getOrSet(n,i.memoizeQ((function(){var t="GetLocations",i=at(t);return Q(e.call(e.listLocationsApi(),"GET",undefined,!1,n,st("getLocations"))).then((function(n){return(vt(i),n&&n.value)?n.value:(b.warning(t+" No locations?!"),[])}),(function(n){yt(i);b.warning(t+" failure: "+rt(n));throw n;}))})));return t().catch((function(){return[]}))}function ut(n){var t=n.subscriptionPolicies;return{subscriptionName:n.displayName,subscriptionID:n.subscriptionId,tenantID:n.tenantId,status:n.state,subscriptionPolicies:
t,requireRdfe:cu(t),authorizationSource:n.authorizationSource}}function cu(n){return ri("rdfe")==="false"?!1:!n||!a.getArmSubscriptionQuotaIds()[(n.quotaId||"").toLocaleLowerCase()]}function bi(n){var t=[],i={},f=!1,e=ft.client,o=at("GetSubscriptions"),s=rr([ir.list()],(function(n){t=t.concat(n)}),(function(n){f=!0;i[n.api]=n.reason}),!1,n,st("fetchSubscriptions"));return s.then((function(){var c,d,a,s,v,h,nt;if(f)yt(o),c={title:p.title,description:p.error,timestamp:new Date,status:et.Error,cloudName:n},r.Extension.multiCloudEnabled?(c.description=p.multiCloudError.format(n),ot.InternalClientNotification.internalPublish(c,n)):ot.showModalNotification.invoke(e,ht,{notification:c,primaryButtonText:p.primaryButtonText,primaryButtonClickAction:2}),b.warning("Error getting subscriptions '{0}'.".format(rt(i)));else{var tt={},it={},ft={},k=function(n,t){t=u(t||"");n[t]=(n[t]||0)+1};t.forEach((function(n){k(tt,n.state);k(it,(n.subscriptionPolicies||{}).quotaId);k(ft,n.authorizationSource)}));vt(o,{cloudName:
n,count:t.length,states:tt,quotaIds:it,authorizationSources:ft});var pt=t.length,l={subscriptions:[]},st={};if(pt){if(ct("./SubsCreditCheck",(function(n){n.checkRemainingCredit(t)})),d=t.filter((function(n){return u(n.state)===oi})),d.length&&ct("./PastDueSubsCheck",(function(t){t.raiseWarningForPastDueSubs(d,n)})),a=ri("subscriptions"),s=t,a){var g=s.length,lt=u(a),at=function(n,t){var i=u(n||"");return i.indexOf(t)!==-1};s=s.filter((function(n){return at(n.displayName,lt)||at(n.subscriptionId,lt)}));v={status:et.Warning,title:p.filteredTitle,description:""};h=void 0;g?s.length?g===s.length?h=p.notFiltered:(v.status=et.Information,h=p.filtered):h=p.allFiltered:h=p.notFilterable;v.description=h.format(a,g,s.length);or.internalPublish(v,n)}l.subscriptions=s.map(ut).stableSort(wt);l.subscriptions.map(kt).forEach((function(n){st[n.subscriptionId.toUpperCase()]=n}))}else w.Security.getUserInfo().then((function(t){ct("./NoSubsChecks",(function(i){i.handleNoSubsInDirectory(t,hi,n)}))}));nt=y(n);nt.data(l);
nt.map=st;ni.updateSubscriptionInfoEndPoint.invoke(e,ht,l)}}))}function kt(n,t,i){var e=n.subscriptionID,r=n.subscriptionName,f=n.status&&u(n.status)===pt?c.disabledSubscriptionLabelFormat.format(r):r;return i.filter((function(n){return n.subscriptionName===r})).length>1&&(f=c.subscriptionNameAndIdLabelFormat.format(f,e)),{subscriptionId:e,uniqueDisplayName:f,displayName:r,tenantId:n.tenantID,state:n.status,subscriptionPolicies:n.subscriptionPolicies,authorizationSource:n.authorizationSource}}var ki=i.Azure,w=i.Base,di=w.Constants,dt=w.Diagnostics,d=dt.Telemetry,gi=r.Azure,nr=w.Resources,ft=r.Rpc,tr=i.Hubs.Notifications,et=tr.NotificationStatus,gt=r.Extension,ot=r.Hubs.Notifications,ni=HubsExtension.Internal.Azure,ir=e.Subscriptions,ti=i.ViewModels.Services.ResourceTypes,rr=e.callWithContinuation,ii={},g,oi;i.extendArrayIntoMap(ii,window.fx.environment.servicesHealthAllowedRegions||[],(function(n){return n.toLowerCase()}));g=Q(null);t.loadDataFromServer=!0;var b=dt.createLog(n),ri=i.getFeatureValue,
p=v.SubNotification,st=function(n){return e.makeResourceManagerTelemetry("HubsObservables."+n)},ht=di.Shell,ui="microsoft.resources",fi=ui+"/subscriptions/resourcegroups",ur=ki.ResourceManager.DeploymentStates.Succeeded,ei=1e3;oi=u(a.subscriptionPastDueStatus);var nt=r.getCloudMap(),tt,lt=function(n){return nt.get(n)},y=function(n){return lt(n).Subscriptions},it=function(n){return lt(n).SelectedSubscriptions},k=function(n){return lt(n).ResourceGroups},si="HubsObservables",fr="GetTenants",er="InitialSelectedSubscriptions",at=function(n){return d.start({source:si,action:n})},vt=function(n,t){return d.completeTrace(n,t)},yt=function(n,t){return d.cancelTrace(n,t)},rt=JSON.stringify,pt=a.subscriptionDisabledStatus,or=ot.InternalClientNotification,sr=r.getErrorMap({unknown:""}),hr=i.memoizeQ((function(){return Q(w.Net2.ajax({uri:nr.getAppRelativeUri("/api/tenants/List"),type:"POST",dataType:"json",contentType:"application/json",isBackgroundTask:!0}))})),hi,cr=r.getCloudMap();t.isCoadminOnAnySub=
li;t.isCoAdminOnSub=wr;t.getTenantsCount=br;t.initializeObservables=kr;t.registersObservables=dr;t.getObservable=gr;t.getSubscriptionsObservable=nu;t.getSubscriptionsPromise=tu;t.getSubscriptionsMap=iu;t.getSubscriptionInfo=bt;t.getSubscriptionInfoPromise=ru;t.getSelectedSubscriptionsLabel=uu;t.getSelectedSubscriptions=ai;t.pingSelectedSubscriptionsList=fu;t.getSubscriptions=vi;t.getResourceGroupsObservable=eu;t.getLocationDisplayNames=ou;t.getResourceGroupsPromise=su;t.invalidateResourceGroups=yi;t.removeResourceGroup=pi;t.createRegisteredAssetTypeCache=hu;t.getLocations=wi;t.toHubsExtensionSubscription=ut;t.fetchSubscriptions=bi;t.toMsPortalFxSubscription=kt})(y||(y={})),y}));define("HubsExtension/ArmHelpers/ArmApis",["require","exports","f","i","FxHubs/RpcEndPoints","./ArmApisStartup"],(function(n,t,i,r,u,f){"use strict";var e;return (function(n){function b(n){return n.replace(vt,"")}function t(n){return"/"+b(n)}function h(n){return n.replace("'","''")}function c(n){return n.toLowerCase(
)}function et(n){return n===void 0&&(n=0),ut.invoke(v.client,a.Shell,null).catch((function(t){if(v.errorIsRpcTimeout(t,lt,a.Shell)&&n<rt)return et(n+1);throw t;}))}function d(n,t,i,r){return r===void 0&&(r=0),ft.invoke(v.client,a.Shell,{cloudName:n.cloudName,extension:n.name,assetType:t,assetId:i}).catch((function(u){if(v.errorIsRpcTimeout(u,at,a.Shell)&&r<rt)return d(n,t,i,r+1);throw u;}))}var l=i.Base,a=l.Constants,v=r.Rpc,o=i.ViewModels.Services.ResourceTypes,g=f.Resources,nt=u.Mru,ot=o.linkTagPrefix,y="2014-04-01-preview",tt="api-version",e="?api-version="+y,p="&api-version="+y,s="?api-version=2015-01-01",it="?api-version=2015-10-01",w="?api-version=2015-11-01",k="?api-version=2016-06-01",st="&api-version=2016-06-01",ht="&api-version=2016-02-01",ct=["Microsoft.ClassicCompute/virtualMachines","Microsoft.ClassicCompute/domainNames","Microsoft.ClassicStorage/storageAccounts","Microsoft.ClassicNetwork/virtualNetworks","Microsoft.ClassicNetwork/reservedIps"],rt=3,ut=nt.clearMruAssetsListEndPoint,
lt=ut.getName(),ft=nt.removeMruAssetEndPoint,at=ft.getName(),vt=/^[\s\/\/]*|[\/\/]*$/g,yt,pt,wt,bt,kt,dt;n.clearMruAssetsList=et;n.removeMruAsset=d,(function(n){function t(n){return"/subscriptions/"+n+k}function i(n){return"/subscriptions/"+n+"/tagnames?$expand=tagvalues"+st}n.getSubscriptionApi=t;n.subscriptionTagsApi=i})(yt=n.Subscriptions||(n.Subscriptions={})),(function(n){function t(n){return n?"/subscriptions/"+n+"/providers"+e:"/providers"+e}function i(n){var t="?$expand=metadata"+ht;return n?"/subscriptions/"+n+"/providers"+t:"/providers"+t}function r(n){return"/providers/"+n+e}function u(n,t){return"/subscriptions/"+n+"/providers/"+t+"/register"+e}function f(n,t){return"/subscriptions/"+n+"/providers/"+t+"/unregister"+e}function o(n,t){return"/subscriptions/"+n+"/providers/"+t+e}n.listResourceProvidersApi=t;n.listResourceProvidersWithMetadataApi=i;n.getResourceProviderApi=r;n.registerResourceProvidersApi=u;n.unregisterResourceProvidersApi=f;n.getResourceProviderWithSubscriptionApi=
o})(pt=n.ResourceProviders||(n.ResourceProviders={})),(function(n){function i(n,t,i){return"/subscriptions/"+n+"/resourcegroups/"+t+"/deployments/"+i}function r(n){return t(n)+"/deployments"+w}function u(n){return t(n)+k}function f(n,i){return t(n)+("/providers/microsoft.resources/deployments/"+i+"/validate")+k}function e(n){return t(n)+"/cancel"+w}function o(n){return t(n)+"/operations"+w}function s(n){return t(n)+w}n.buildDeploymentUri=i;n.listDeploymentsApi=r;n.singleDeploymentApi=u;n.validateDeploymentApi=f;n.cancelDeploymentApi=e;n.deploymentOperationsApi=o;n.singleDeploymentOperationApi=s})(wt=n.Deployments||(n.Deployments={})),(function(n){function r(n,t){var i=t.filter((function(n){return!!n})).join(" and ");i&&n.query.setParameter("$filter",i)}function u(n,t){var i=t.filter((function(n){return!!n})).map((function(n){return"("+n+")"})).join(" and ");i&&n.query.setParameter("$filter",i)}function a(n){return"/subscriptions/"+n+"/resourcegroups"+e}function v(n){return n+"/providers/Microsoft.Authorization/locks"+
s}function w(n,t){return n+"/providers/Microsoft.Authorization/locks/"+t+s}function k(n){return t(n)+s}function nt(n){return t(n)+"/resources"+e}function rt(n,t){var i="/subscriptions/"+b(n)+"/resources"+e;return!t||(i=i+"&$top=1"),i}function ut(n){var t=new l.UriBuilder("/subscriptions/"+n+"/resources"),i=ct.map((function(n){return"resourceType eq '"+n+"'"})).join(" or ");return t.query.setParameter("$filter",i),t.toString()+p}function ft(n,t,i){var u=new l.UriBuilder("/subscriptions/"+n+"/resourcegroups");return r(u,["tagname eq '"+h(t)+"'",i?"tagvalue eq '"+h(i)+"'":null]),u.toString()+p}function et(n,t,i){var u=new l.UriBuilder("/subscriptions/"+n+"/resources");return r(u,["tagname eq '"+h(t)+"'",i?"tagvalue eq '"+h(i)+"'":null]),u.toString()+p}function st(n){return t(n)+"/moveresources"+s}function ht(n){return t(n)+"/validateMoveResources"+s}function lt(n){return t(n)+"/providers/Microsoft.ClassicCompute/validateSubscriptionMoveAvailability"+it}function at(n){return"/subscriptions/"+
b(n)+"/providers/Microsoft.ClassicCompute/moveSubscriptionResources"+it}function vt(n,t){return"/subscriptions/"+n+"/resourcegroups/"+t+"/resources"+e}function yt(n,t,r,f,e,o){var a=new l.UriBuilder("/resources"),s=[n.map((function(n){return"subscriptionId eq '"+n+"'"})).join(" or "),r?"(substringof('"+h(c(r))+"', name) or substringof('"+h(c(r))+"', resourcegroup))":null],v,p,w;return t&&(v=i.makeArray(t),s.push(v.map((function(n){return"resourceType eq '"+c(n)+"'"})).join(" or "))),e&&(p=i.makeArray(e),s.push(p.map((function(n){return"location eq '"+c(n)+"'"})).join(" or "))),o&&(w=i.makeArray(o),s.push(w.map((function(n){return"resourcegroup eq '"+c(n)+"'"})).join(" or "))),f&&(s=s.concat(f)),a.query.setParameter(tt,y),u(a,s),a.toString()}function pt(n,t,r,f){var o=new l.UriBuilder("/providers/"+n.resourceTypeName),e=[t?"substringof('"+h(c(t))+"', name)":null],s;return f&&(s=i.makeArray(f),e.push(s.map((function(n){return"location eq '"+c(n)+"'"})).join(" or "))),r&&(e=e.concat(r)),o.query.setParameter(
tt,n.apiVersion),u(o,e),o.toString()}function wt(n,t){return"/subscriptions/"+n+"/resources?$filter=tagname%20eq%20'"+ot+":"+t+"'"+p}function bt(n){n=n.filter((function(n){return o.isResourceId(n.assetId)||o.isResourceGroupId(n.assetId)}));var r={},t={},u=n.map((function(n){var i=n.cloudName,u=n.assetId,f=function(u){r[u]=n;t[i]||(t[i]=[]);t[i].push(u)};return o.isResourceGroupId(u)?(f(g.resourceGroupApi(u)),Q(!0)):g.resourceApi(u,i).then((function(n){f(n)}))})),e=f.makeResourceManagerTelemetry("notifyIfResourcesDeleted");return Q.all(u).then((function(){var n=[];return i.forEachKey(t,(function(t,i){for(i=i||[];i.length>0;){var u=i.splice(0,f.maxBatchCallCount);n.push(kt(u,t,r,e))}})),Q.all(n).then((function(n){return n.reduce((function(n,t){return n.concat(t)}),[])}))}))}function kt(n,t,i,r){return f.callBatch(n,!1,t,r).then((function(t){for(var e=[],u=0;u<t.length;u++){var o=t[u],s=n[u],r=i[s];o.httpStatusCode===404?(f.internalNotifyAssetDeleted(r,"The query to '"+s+"' returned a "+o.httpStatusCode+
"."),e.push(r.assetId)):o.httpStatusCode===403&&(d({cloudName:r.cloudName,name:r.extensionName},r.assetType,r.assetId),e.push(r.assetId))}return e}))}n.resourceGroupsInSubscriptionApi=a;n.locksOnResourceApi=v;n.createLockOnResourceApi=w;n.deleteLockOnResourceApi=k;n.resourcesInResourceGroupApi=nt;n.resourcesInSubscriptionApi=rt;n.classicResourcesInSubscriptionApi=ut;n.resourceGroupsWithTag=ft;n.resourcesWithTag=et;n.moveResourcesApi=st;n.validateMoveResourcesApi=ht;n.validateSubscriptionMoveAvailabilityApi=lt;n.moveResourcesToSubscriptionApi=at;n.resourcesInResourceGroupByNameApi=vt;n.resourcesAcrossSubscriptionsApi=yt;n.tenantResourcesApi=pt;n.resourcesLinkedToResourceApi=wt;n.notifyIfResourcesDeleted=bt})(bt=n.Resources||(n.Resources={})),(function(n){function i(n){return t(n)+"/providers/Microsoft.Resources/links"+s}function r(n){var t,i,r,u;return n=b(n),t="/"+n,o.isResourceGroupId(t)?(r=o.parseResourceGroupDescriptor(t),i=r.subscription):(u=o.parseResourceDescriptor(t),i=u.subscription),
"/subscriptions/"+i+"/providers/Microsoft.Resources/links"+s+("&$filter=targetId eq '"+n+"'")}n.linksOfScopeApi=i;n.linksToScopeApi=r})(kt=n.Links||(n.Links={})),(function(n){function t(n,t){if(typeof n!="string"){var i=n;n="/subscriptions/"+i.subscriptionId+"/resourcegroups/"+i.resourceGroupName+"/providers/Microsoft.Portal/dashboards/"+i.dashboardName}return n+"?api-version="+t}function i(n){var t=n.map((function(n){return"subscriptionId eq '"+n+"'"})).join(" or ");return"/resources?$filter=("+t+") and (resourceType eq 'Microsoft.Portal/dashboards')&api-version="+y}n.dashboardApi=t;n.allDashboardsApi=i})(dt=n.Dashboard||(n.Dashboard={}))})(e||(e={})),e}));define("HubsExtension/ArmHelpers/Models/ArmResource",["require","exports","f"],(function(n,t,i){"use strict";var r;return (function(t){function o(n){var t=n.id,i,e,o;if(!t)return u.warning("ARM returned a resource with no id: "+JSON.stringify(n)),null;i=n.name;i||(e=t.toLowerCase(),f[e]||(u.warning("ARM returned a resource with no name: "+JSON.
stringify(n)),f[e]=!0),o=r.parseResourceDescriptor(t),i=o.resources.join("/"));var s=n.properties||{},h=n.tags||{},c=!r.isTenantResource(t)&&r.buildResourceGroupIdFromResourceId(t);return{id:t,location:n.location,name:i,tags:h,properties:s,resourceGroup:c,type:n.type,kind:n.kind,selfLinkUri:n.selfLinkUri}}var e=i.Base.Diagnostics,r=i.ViewModels.Services.ResourceTypes,u=e.createLog(n),f={};t.toResource=o})(r||(r={})),r}));define("HubsExtension/Browse/BrowseCommon",["require","exports","f","i","ko","FxHubs/RpcEndPoints","HubsExtension/ArmHelpers/ArmApis"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(t){function d(n,t){n===void 0&&(n=0);var i=t||l.client;return v.invoke(i,a,null).then((function(n){if(!k){k=!0;var t=n.map((function(n){return{assetType:n.resourceTypeAssetTypeInformation.assetType,assetId:n.id,extensionName:n.resourceTypeAssetTypeInformation.extensionName,cloudName:n.cloudName}}));return e.Resources.notifyIfResourcesDeleted(t).then((function(t){return t.forEach((function(
t){n.remove(n.first((function(n){return y(n.id)&&y(t)&&s.compareResourceId(n.id,t)?!0:p(n.id)&&p(t)&&s.compareResourceGroupId(n.id,t)?!0:!1})))})),n}))}return n})).catch((function(i){if(et(i,ft,a)&&n<ut)return d(n+1,t);throw i;}))}function ot(n){o.indexOf(n)!==-1?rt.warning("Tried to register an MRU view twice"):o.push(n)}function st(n){o.indexOf(n)!==-1&&o.remove(n)}function ht(){var n=Date.now(),t=b+w;h||(h=!0,Q.delay(Math.min(Math.max(n-t,0),w)).then((function(){o.forEach((function(n){return n.pingMruAssetsList()}));b=Date.now();h=!1})))}var c=i.Base,g=c.Diagnostics,l=r.Rpc,nt=f.Mru,s=i.ViewModels.Services.ResourceTypes,a=c.Constants.Shell,tt=window,it=tt.fx.environment.isDevelopmentMode,rt=g.createLog(n),ut=3,v=nt.getMruAssetsListEndPoint,ft=v.getName(),y=s.isResourceId,p=s.isResourceGroupId,et=l.errorIsRpcTimeout,w=it?500:3e4,b=0,h=!1,o=[],k=!1;t.resourceGroupRefreshCommandCount=u.observable(0);t.getMruAssetsList=d;t.registerMruView=ot;t.unregisterMruView=st;t.pingMruAssetsList=ht})(o||(o={})
),o}));define("HubsExtension/Common/AssetViewModelCommon",["require","exports","f","i","o"],(function(n,t,i,r){"use strict";var u;return (function(n){function o(n,i,r){var e={type:l.ViewModel,name:n.viewModel,initialState:null,createSelectable:!1};return r&&(e.earlyExecTasks=r),u.getViewModelsDefinition.acquireObject(h.client,u.getWindowId({name:n.extensionName,cloudName:i}),e).then((function(i){var r=new t(n,i,function(){delete f[n.resourceType]});return f[n.resourceType]=r,r}))}function a(n,t){return o(n,t)}function v(n,t,i){return o(n,t,i)}var s=i.Base,h=r.Rpc,c=i.Assets,u=r.Extension,l=s.Constants.ViewModelTypes,f={},e=(function(){function n(n,t){this._acquiredObject=n;this._onDispose=t}return n.prototype.getValue=function(){return this._acquiredObject.getValue()},n.prototype.dispose=function(){this._onDispose&&this._onDispose();i.disposeViewModelProperties(this.getValue());this._acquiredObject.dispose()},n})(),t;n.AcquiredObjectWrapperImpl=e;t=(function(n){function t(t,i,r){n.call(this,i,
r);this._assetTypeInformation=t}return __extends(t,n),t.prototype._getContentForContract=function(n){return c.assetTypeInformationSupportsContract(this._assetTypeInformation,n)?this.getValue().content:null},t.prototype.getBrowseConfigContract=function(){return this._getContentForContract(2)},t.prototype.getSupplementalDataContract=function(){return this._getContentForContract(4)},t.prototype.getResourceMenuConfigContract=function(){return this._getContentForContract(8)},t.prototype.getProvideProxyResourcesContract=function(){return this._getContentForContract(64)},t})(e);n.AssetTypeViewModelWrapperImpl=t;n.getAssetTypeViewModel=a;n.getAssetTypeViewModelAndExec=v})(u||(u={})),u}));define("HubsExtension/ResourceMap/ResourceMapCommon",["require","exports","f","i","ko","../ArmHelpers/ArmApisStartup","../ArmHelpers/Models/ArmResourceGroup","../ArmHelpers/Models/ArmResource","../Common/HubsObservables","HubsExtension/ResourceMap/ResourceMapClientStrings","../Common/AssetViewModelCommon"],(function(
n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return (function(t){function l(n){return n.toLowerCase()}function lt(n,t){var i={};return k(n,(function(r){var f=t&&typeof n[r]=="object"&&n[r],u=n[r];i[r]=it(f?lt(u):u)})),i}function d(n,t){return l((t||"")+":"+n)}function ft(t){return i.require(n.normalize("../ArmHelpers/ArmApis")).then((function(n){return t(n)}))}function ai(n,t,i){ui.uncacheResourceGroup(t,n);fi.flushCache(n,t);switch(i){case 1:s.removeResourceGroup(n,t);break;case 2:s.invalidateResourceGroups(n)}}function pi(n){var t=i.getUniqueId();return y[t]=n,t}function wi(n){y[n]&&delete y[n]}function bi(n,t){k(y,(function(i,r){r.resourceGroupDeleteStarted(n,t)}))}function ki(n,t){k(y,(function(i,r){r.resourceGroupDeleteFailed(n,t)}))}function di(n,t,i){if(t){var r=t,u=r.subscriptionId||r.subscriptionID;return wt.Internal.validateResourceGroupName(n,u,i,null,(function(){return ut(st(hi.buildResourceGroupIdFromSubscriptionAndResourceGroupName(u,n)),b,undefined,!1,i,ct("validateResourceGroupName")).
then((function(){return bt(si.ResourceGroup.Validation.alreadyExistsMessage.format(r.displayName||r.subscriptionName||u))}),(function(){return bt()}))}))}return wt.Internal.validateResourceGroupName(n,null,i)}function ei(n,t,i,r){return ot(f.callRaw(t,n,undefined,!1,undefined,i,r).then((function(n){var t=n.jqXHR;return{status:t.status,operationId:t.getResponseHeader("Location"),retryAfterInSeconds:parseInt(t.getResponseHeader("Retry-After"))}})),r)}function ot(n,t){var i=Q(n);return i.catch((function(n){var i=w(r.Azure.buildSimplifiedError(n&&n.jqXHR||n),t,!0),u=i.stack;if(t.extension&&t.extension!==nt.ExtensionNames.Hubs)throw u?g.Diagnostics.createIgnoreUnhandledRejectionError(i.message,u):g.Diagnostics.createIgnoreUnhandledRejectionError(i.message);else throw i;}))}var vt=i.Azure,g=i.Base,nt=g.Constants,oi=nt.AssetNames,tt=nt.ResourceTypes,p=g.Images.StatusBadge,si=i.Resources.Strings,yt=i.ViewModels,hi=yt.Services.ResourceTypes,a=vt.ResourceManager.DeploymentStates,pt=f.Resources,wt=vt.ResourceGroups,
vi,at,et,ui,yi,fi,y;t.resourceGroupsTypeLowerCase=l(tt.ResourceGroups);t.recentResourcesTypeLowerCase=l(tt.RecentResources);t.allResourcesTypeLowerCase=l(tt.AllResources);t.subscriptionsTypeLowerCase=l(tt.Subscriptions);t.resourceGroupAssetType=oi.ResourceGroups;var it=u.observable,rt=u.utils.peekObservable,w=i.extend,ci=404,b="GET",k=i.forEachKey,st=pt.resourceGroupApi,li=pt.resourceApi,ut=f.call,v=s.getLocationDisplayNames,bt=yt.getValidationResult,ht=Q.isRejected,ct=function(n){return f.makeResourceManagerTelemetry(n+"ResourceMap")},kt=a.Running,dt=a.Deploying,gt=a.Accepted,ni=a.Canceled,ti=a.Failed,ii=a.Deleting,ri=a.Succeeded;t.deploymentStatusIconLookup={};t.deploymentStatusIconLookup[kt]=t.deploymentStatusIconLookup[dt]=t.deploymentStatusIconLookup[gt]=t.deploymentStatusIconLookup[a.Waiting]=p.Pending();t.deploymentStatusIconLookup[ni]=p.Canceled();t.deploymentStatusIconLookup[ti]=p.Error();t.deploymentStatusIconLookup[ii]=p.Disabled();t.deploymentStatusIconLookup[ri]=p.Success(
);t.deploymentStatusDisplayTextLookup={};t.deploymentStatusDisplayTextLookup[kt]=t.deploymentStatusDisplayTextLookup[dt]=h.deploymentRunningState;t.deploymentStatusDisplayTextLookup[gt]=h.deploymentAcceptedState;t.deploymentStatusDisplayTextLookup[ni]=h.deploymentCanceledState;t.deploymentStatusDisplayTextLookup[ti]=h.deploymentFailedState;t.deploymentStatusDisplayTextLookup[ii]=h.deploymentDeletingState;t.deploymentStatusDisplayTextLookup[ri]=h.deploymentSucceededState;t.DeleteResourceGroupConfigType="ResourceGroupDeleteWarningPartViewModel_DeleteResourceGroupConfig";i.Data.Metadata.setTypeMetadata(t.DeleteResourceGroupConfigType,{name:t.DeleteResourceGroupConfigType,properties:{resourceGroup:null,resourceGroupName:null},entityType:!0});t.invalidateCaches=ai,(function(n){n.ResourceMap="ResourceMap";var t;(function(n){n.OpenedBlade="OpenedBlade";n.ResultOpened="ResultOpened"})(t=n.Action||(n.Action={}))})(vi=t.Telemetry||(t.Telemetry={}));at=1e4;et=(function(){function n(n){this._cache={};
this._timeout=n}return n.prototype.store=function(n,t){return this._cache[n]={value:t,accessTime:Date.now()},t},n.prototype.remove=function(n){delete this._cache[n]},n.prototype.fetch=function(n){var t=this._cache[n];if(t){if(t.accessTime>=Date.now()-this._timeout)return t.value;delete this._cache[n]}return},n.prototype.touch=function(n){var t=this._cache[n];t&&(t.accessTime=Date.now())},n.prototype.trim=function(){var n=this;this._trimPromise&&this._trimPromise.isPending||(this._trimPromise=Q.delay(100).then((function(){var t=Date.now()-n._timeout;k(n._cache,(function(i,r){r.accessTime<t&&delete n._cache[i]}))})))},n.prototype.flushCache=function(){this._cache={}},n.prototype.flushCacheWithPrefix=function(n){var t=this;k(this._cache,(function(i){i.startsWith(n)&&delete t._cache[i]}))},n})();t.Cache=et,(function(n){function u(n,u,f,o,s){var c=d(n,u),h,l;return(i.trim(),h=i.fetch(c),h&&!ht(h)&&!o)?h:(l=ot(ut(st(n,s),b,null,!1,u,f).then((function(t){return t.id=t.id||n,e.toResourceGroup(t)})),f),i.
store(c,l).catch((function(i){i&&i.status===ci&&r.AssetManager.notifyAssetDeleted(t.resourceGroupAssetType,n,nt.ExtensionNames.Hubs,u);throw i;})))}function s(n,t,i,r){return u(n,t,i,r).then((function(n){return v(t).then((function(t){return f(n,t)}))}))}function h(n,t,i,r){return u(n,t,i,r).then((function(n){var i=lt(n,!0);return v(t).then((function(n){return o(i,n)}))}))}function c(n){n?i.flushCacheWithPrefix(n+":"):i.flushCache()}function a(n,t){var r=d(n,t);i.remove(r)}function y(n,t){return ei("DELETE",st(n),t,ct("deleteResourceGroup"))}function f(n,t){var i=n.location||"";return w({locationString:t[l(i)]||i},n)}function o(n,t){var i=rt(n.location)||"";return w({locationString:it(t[l(i)]||i)},n)}var i=new et(at);n.getResourceGroup=u;n.getResourceGroupWithStrings=s;n.getResourceGroupObservableWithStrings=h;n.flushCache=c;n.uncacheResourceGroup=a;n.deleteResourceGroup=y;n.mapResourceGroupToResourceGroupWithStrings=f;n.mapResourceGroupObservableToResourceGroupObservableWithStrings=o})(ui=t.ResourceGroupClient||
(t.ResourceGroupClient={})),(function(n){function t(n,t){return ei(b,n,t,ct("getOperationResponse"))}n.getOperationResponse=t})(yi=t.ResourceManagerOperationsClient||(t.ResourceManagerOperationsClient={})),(function(n){function r(n,t,i){var r=[];return ot(f.callWithContinuation([n],(function(n){r=r.concat(n.map(o.toResource).filter((function(n){return!!n})))}),(function(n){throw n;}),!1,t,i).then((function(){return r})),i)}function u(n,i,r,u){var e=d(n,i),f,s;return(t.trim(),f=t.fetch(e),f&&!ht(f)&&!u)?f:(s=ot(li(n,i).then((function(t){return ut(t,b,null,!1,i,r).then((function(t){return t.id=t.id||n,o.toResource(t)}))})),r),t.store(e,s))}function e(n,i,r,u,f){var o=d(n,r),e,s;return(t.trim(),e=t.fetch(o),e&&!ht(e)&&!f)?e:(s=Q(c.getAssetTypeViewModel(i,r)).then((function(t){var i=t.getProvideProxyResourcesContract();return Q(i&&i.getResource(n))})),t.store(o,s))}function y(n,t,r,f){return u(n,t,r,f).then((function(n){return v(t).then((function(t){return i(n,t)}))}))}function p(n,t,r,u,f){return e(n,t,r,u,f).
then((function(n){return v(r).then((function(t){return i(n,t)}))}))}function k(n,t,i,r){return u(n,t,i,r).then((function(n){var i=lt(n,!0);return v(t).then((function(n){return a(i,n)}))}))}function s(n,t,i){return ft((function(u){return r(u.Resources.resourcesInResourceGroupApi(n),t,i)}))}function g(n,t,i,u){return ft((function(f){var e=f.Resources.resourcesInSubscriptionApi(n,u);return u?ut(e,b,null,!1,t,i).then((function(n){return n.value&&n.value.map(o.toResource).filter((function(n){return!!n}))})):r(e,t,i)}))}function nt(n,t,i){return ft((function(u){return r(u.Resources.classicResourcesInSubscriptionApi(n),t,i)}))}function tt(n,t,r){return s(n,t,r).then((function(n){return v(t).then((function(t){return n.map((function(n){return i(n,t)}))}))}))}function h(n,t,i,u){return ft((function(f){return r(f.Resources.resourcesLinkedToResourceApi(n,t),i,u)}))}function st(n,t,r,u){return h(n,t,r,u).then((function(n){return v(r).then((function(t){return n.map((function(n){return i(n,t)}))}))}))}function ct(n,i){n?t.flushCacheWithPrefix(
l(n+":"+(i||""))):t.flushCache()}function vt(n,i){var r=d(n,i);t.remove(r)}function i(n,t){var i=n.location||"";return w({locationString:t[l(i)]||i,trimmedName:(n.name||n.id||"").split("/").last()},n)}function a(n,t){var i=rt(n.location)||"";return w({locationString:it(t[l(i)]||i),trimmedName:it((rt(n.name)||rt(n.id)||"").split("/").last())},n)}var t=new et(at);n.getResource=u;n.getProxyResource=e;n.getResourceWithStrings=y;n.getProxyResourceWithStrings=p;n.getResourceObservableWithStrings=k;n.getResourcesInResourceGroup=s;n.getResourcesInSubscription=g;n.getClassicResourcesInSubscription=nt;n.getResourcesInResourceGroupWithStrings=tt;n.getResourcesLinkedToResource=h;n.getResourcesLinkedToResourceWithStrings=st;n.flushCache=ct;n.uncacheResource=vt;n.mapResourceToResourceWithStrings=i;n.mapResourceObservableToResourceObservableWithStrings=a})(fi=t.ResourceClient||(t.ResourceClient={}));y={};t.registerResourceGroupDeleteWatcher=pi;t.unregisterResourceGroupDeleteWatcher=wi;t.notifyResourceGroupDeleting=
bi;t.notifyResourceGroupDeleteFailed=ki;t.validateResourceGroupName=di})(l||(l={})),l}));define("HubsExtension/Common/CloudNameHelpers",["require","exports","f","i","../_generated/ExtensionDefinition","./AssetTypeCache"],(function(n,t,i,r,u,f){"use strict";var e;return (function(t){function h(n,t){if(!s.readFromInputs(t))return s.addToModel(n,t)}function c(n,t){t.detailBladeInputs=t.detailBladeInputs||{};h(n,t.detailBladeInputs)}function l(n,t){t.cloudName=n}function v(n,t){var r=t,h=t.detailBlade,a=t.assetType,u=t.resourceId,s;return h||a?(t.extension&&t.extension.toLowerCase()!==e?l(n,r):c(n,r),Q(r)):u?(s=void 0,s=o.isResourceGroupId(u)?i.Base.Constants.ResourceTypes.ResourceGroups:o.buildResourceTypeFromResourceId(u),f.getResourceTypeAssetTypeInformation(s,n).then((function(t){return t.lowerCaseExtension===e?c(n,r):l(n,r),r}))):Q(t)}function y(n,t){var i=t;return i.extensionName&&i.extensionName.toLowerCase()!==e?i.cloudName=n:(i.parameters=i.parameters||{},h(n,i.parameters)),i}var a=i.Base.
Diagnostics,o=i.ViewModels.Services.ResourceTypes,s=r.Extension.CloudName,e=u.definitionName.toLowerCase(),p=a.createLog(n);t.addCloudNameToDynamicSelection=v;t.addCloudNameToBladeReference=y})(e||(e={})),e}));define("HubsExtension/BrowseResource/BrowseResourceCommon",["require","exports","f","i","../Browse/BrowseCommon","../ResourceMap/ResourceMapCommon","../Notifications/EventSubscriptionService","../ArmHelpers/ArmApisStartup","../Common/CloudNameHelpers","../_generated/ExtensionDefinition"],(function(n,t,i,r,u,f,e,o,s,h){"use strict";var c;return (function(n){function et(n,t){return t?n.name.toLowerCase().indexOf(t.trim().toLowerCase())!==-1:!0}function ot(n,i,r){var u=t.parseResourceDescriptor(i);return n.format({resourceId:c(i),name:c(u.resource),type:c(u.type),provider:c(u.provider),resourceGroup:c(u.resourceGroup),subscriptionId:c(u.subscription),locationId:c(r)})}function st(n,r){return t.isResourceGroupId(n.id)&&t.isResourceGroupId(r.id)?t.compareResourceGroupId(n.id,r.id):t.isResourceId(
n.id)&&t.isResourceId(r.id)?t.compareResourceId(n.id,r.id):i.toSortedString(n.id)!==i.toSortedString(r.id)?!1:n.assetType!==r.assetType?!1:n.extensionName===r.extensionName}function y(n,t,i){n.storeResource(i);i.kind&&n.storeKind(i.kind);n.storeDefaultIcon(t)}function ht(n){var e=n.mruEntry,i=e.id,r=e.resourceTypeAssetTypeInformation,u;r.resourceType?(u=void 0,u=t.isResourceId(i)?Q(i):rt.mapAssetIdToResourceId({extensionName:r.extensionName,assetType:r.assetType,assetId:i}),n.storeKindPromise(u.then((function(i){if(t.isResourceId(i)){var r=i.toLowerCase(),u=l.fetch(r);if(u){y(n,i,u);return}return tt.getPromiseFromPool(n).then((function(n){var t=n.value,u=o.makeResourceManagerTelemetry("Browse.getKindForMru:"+t.sourceKeyForTelemetry);return f.ResourceClient.getResource(i,t.mruEntry.cloudName,u).then((function(n){l.store(r,n);y(t,i,n)})).catch((function(){t.storeDefaultIcon()})).finally((function(){n.release()}))}))}n.storeDefaultIcon()})).catch((function(){n.storeDefaultIcon()})))):n.storeDefaultIcon(
)}function p(n,t){return function(i,r){var u=i.filter((function(n){return!n.isLocalEvent})).map((function(n){return{assetId:n.id,assetType:ut.resourceAssetType,extensionName:null,cloudName:r}}));u.length&&o.internalNotifyAssetDeleted(u,"The event service notified "+n+" deleted.",t)}}function ct(n){var t=new nt;return t.attachEventWatch(f.allResourcesTypeLowerCase,{resourceGroupDeleted:p("resource group",n),resourceDeleted:p("resource",n)}),t}function lt(n,t,i,r,u){return u===void 0&&(u=!0),s.addCloudNameToDynamicSelection(n,{selectionKey:t,cloudName:n,extension:ft,detailBlade:u?a.resourceMenuBlade:a.resourceProperties,detailBladeInputs:{id:i,referrerInfo:r}})}function at(n){return n&&n.resourceType&&!n.bladeName&&n.browseType!==4}var it=i.ViewModels,t=it.Services.ResourceTypes,rt=i.Assets,ut=r.AssetManager,a=h.BladeNames,ft=h.definitionName,c=encodeURIComponent,v,l,tt;n.filterMruEntry=et;n.buildInstanceLink=ot;n.matchBrowseItems=st;v=72e5;l=new f.Cache(v);u.registerMruView({pingMruAssetsList:
function(){l.trim()}});n.getResourceKindForMruItem=ht;n.watchForResourceDeletes=ct;var w="/write",b="microsoft.resources/subscriptions/resourcegroups/write",k="/delete",d="microsoft.resources/subscriptions/resourcegroups/delete",g="succeeded",nt=(function(){function n(){}return n.prototype.attachEventWatch=function(n,i){var r,u,o;this.disposeEventWatcher();r=w;u=k;n.toLowerCase()===f.resourceGroupsTypeLowerCase&&(r=b,u=d);o=function(n,i,r,u){return e.subscribeToArmEvent({source:null,operationNameRegex:n},(function(n,f){var e,o;u.resourceGroupCallback&&(e=n.filter((function(n){return n.status.toLowerCase()===g&&n.operationName===i&&t.isResourceGroupId(n.assetId)})).map((function(n){return{id:n.assetId,isLocalEvent:!!n.isLocalEvent}})),e.length&&u.resourceGroupCallback(e,f));u.resourceCallback&&(o=n.filter((function(n){return n.status.toLowerCase()===g&&n.operationName.endsWith(r)&&t.isResourceId(n.assetId)})).map((function(n){return{id:n.assetId,isLocalEvent:!!n.isLocalEvent}})),o.length&&u.resourceCallback(
o,f))}),100)};(i.writeToResourceGroup||i.writeToResource)&&(this._writeEventSubscription=o(r,b,w,{resourceGroupCallback:i.writeToResourceGroup,resourceCallback:i.writeToResource}));(i.resourceGroupDeleted||i.resourceDeleted)&&(this._deleteEventSubscription=o(u,d,k,{resourceGroupCallback:i.resourceGroupDeleted,resourceCallback:i.resourceDeleted}))},n.prototype.disposeEventWatcher=function(){this._writeEventSubscription&&(e.removeArmEventSubscription(this._writeEventSubscription),this._writeEventSubscription=null);this._deleteEventSubscription&&(e.removeArmEventSubscription(this._deleteEventSubscription),this._deleteEventSubscription=null)},n})();n.ArmEventWatcher=nt,(function(n){function i(n){return t>=r?Q.delay(100).then((function(){return i(n)})):(++t,Q({value:n,release:function(){--t}}))}var t=0,r=8;n.getPromiseFromPool=i})(tt=n.PromisePool||(n.PromisePool={}));n.makeResourceBladePromise=lt;n.checkNoBladeName=at})(c||(c={})),c}));define("HubsExtension/Common/UserSettingsHelper",["require","exports",
"f","i","o","FxHubs/HubsSettingsSchema","FxHubs/CloudNameCommon"],(function(n,t,i,r,u,f,e){"use strict";var o;return (function(n){function v(n){return e.removeCloudNameFromId(n)}function s(n,t){return e.addCloudNameToId(n,t,!1)}var t=i.Base,c=t.Diagnostics,l=r.Extension,a=r.Rpc,o=t.Constants.Shell,h;n.addCloudNameToUserSettingKey=s;h=(function(){function n(){}return n.initialize=function(t){if(n._rpcClient)throw new Error("rpcClient already initialized.");n._rpcClient=t||a.client},n.readSettings=function(t){return f.readHubsUserSettings.invoke(n._rpcClient,o,t)},n.writeSettings=function(t,i){return f.writeHubsUserSettings.invoke(n._rpcClient,o,{settings:t,priority:i})},n.readSettingsRpc=function(t,i){var e=l.getDescriptor(i.srcWindowId).cloudName,o=t.map((function(n){return s(n,e)})),r=t.first((function(n){return!~f.allowedUserSettingsKeys.indexOf(n)}));if(r)throw c.createIgnoreUnhandledRejectionError(i.srcWindowId+" is not allowed to read the user setting "+r+".");return n.readSettings(o).then(
(function(n){var t={};return u.getOwnPropertyNames(n).forEach((function(i){t[v(i)]=n[i]})),t}))},n})();n.UserSettingsHelper=h})(o||(o={})),o}))