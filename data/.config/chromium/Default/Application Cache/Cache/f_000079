var __extends=function(n,t){function r(){Object.defineProperty(this,"constructor",{configurable:!0,value:n,writable:!0})}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=function(n,t,i,r){var s=self||window,f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof s.Reflect=="object"&&typeof s.Reflect.decorate=="function")u=s.Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},__metadata=function(n,t){var i=self||window;if(typeof i.Reflect=="object"&&typeof i.Reflect.metadata=="function")return i.Reflect.metadata(n,t)},__param=function(n,t){return function(i,r){t(i,r,n)}},__awaiter=function(n,t,i,r){return new i(function(u,f){function o(n){return n instanceof i&&n.constructor===i?n:new i(function(t){t(n)})}function s(n){try{e("next",n)}catch(t){f(t)}}function h(n){try{e("throw",
n)}catch(t){f(t)}}function e(n,t){var i=r[n](t);i.done?u(i.value):o(i.value).then(s,h)}r=r.call(n,t);e("next",void 0)})},executeInDevelopmentModeOnly=function(){},ko,HubsExtension,ko_observable,FxImpl,MsPortalFx;(function(n){"use strict";function i(n){return(t&n)>0}n.Base=n;var t=window.fx.environment.frameworkCapabilities||0;n.hasCapability=i})(FxImpl||(FxImpl={})),(function(n){"use strict";function o(n){return n.toLowerCase()}function s(n){return i[o(n)]}function h(n){var t=s(n);return!!t&&t.length===4&&o(t)==="true"}var i,f;n.Internal=FxImpl;var r=window,u=r.fx,t=u.environment,e=t.activeFlights;u.bootstrapTelemetry.fxScriptsBegin=u.getTimestamp();i=t.features;Object.keys(e).forEach((function(n){if(!i.hasOwnProperty(n)){var r=e[n]+"";i[n]=r;t.query["flight."+n]=r}}));f=r.parent;n.isIFrame=f&&r.window!==f.window;n.getFeatureValue=s;n.isFeatureEnabled=h;n.defineProperty=n.defineProperty||Object.defineProperty;t.javascriptObjectPropertiesAreEnumerable||(Object.defineProperty=function(t,i,r)
{r&&r.get&&r.enumerable===!0&&(r.enumerable=!1);n.defineProperty(t,i,r)})})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function t(n){return function(){return nt.apply(n,arguments)}}function pr(n){return n!=null&&n===n.window}function yf(n){for(var t in n)return!1;return!0}function pf(){var n=yr();return function(){return yr()-n}}function kt(n){if(vf.type(n)!==i||n.nodeType||pr(n))return!1;var t=n.constructor,r=t&&t.prototype;return!(r&&!it(r,"isPrototypeOf"))}function wr(n){var t,r;switch(typeof n){case a:t=[];for(r in n)c(t,r);return t;case f:case i:case vr:return sr(n);default:return[]}}function u(n,t){return typeof n===t}function dt(n){return n instanceof Date}function nu(n){var t=n&&n.dispose;return u(t,f)&&t}function ut(n,t){s(w(n),(function(i){t(i,n[i])}))}function gt(n){return n?w(n).length:0}function bf(n){return!gt(n)}function kf(n){return!!nu(n)}function tu(n){h(n)&&s(n,tu);var t=nu(n);t&&t.call(n)}function df(n){return n===null}function iu(n){return n===undefined}function r(
n){return n===null||n===undefined}function ru(n){return n!==null&&n!==undefined}function gf(n){return r(n)||u(n,a)&&!gr.test(n)}function uu(n,t,i){try{return t(n)}catch(r){return i(r)}}function te(n){return ft.error=n,ft}function fu(n,t){t===void 0&&(t={});var e=t.cacheFactory,u=t.checkResult,i=t.cacheFactory?e():new ni,f=!u&&ne,r=function(r){var e,o,s;if(i.has(r))return i.get(r);if(e=uu(r,n,te),e!==ft){if(f&&f(e),!u||u(e,r,i))return i.set(r,e),e}else o=ft.error,s=t.onError,s&&s(o,r,i)||Q.fcall((function(){return Q.reject(o)}))};return r.dispose=r.clear=function(){i.clear()},r.delete=function(n){return i.delete(n)},r}function ie(t,i){return function(r,u,f){return!!(r&&r.catch((function(r){f.delete(u);var e=new n.Errors.Error({message:"memoizeQ remove ("+u+") from the cache due to return promise rejection",data:i&&i(r),innerErrors:r});if(!(t&&t(e,u,f)))return Q.reject(e)})))}}function eu(n,t){t===void 0&&(t={});var i={},r=i.onError=t.onError;return i.cacheFactory=t.cacheFactory,i.checkResult=
ie(r,(function(){return'memoizeQ(callback: "'+n.toString()+'")'})),i.onError=r,fu(n,i)}function re(n,t,i){return t&&(n=t.normalize(n)),i&&(rt.requireConfig.ignoreErrorsForModule[n]=!0),ou(n)}function ti(n,t,i){if(i===void 0&&(i=0),n){var u=n.length,f=u,e=1,r=i;if(u){if(i<0&&(r+=u,e=f=-1),!t)return r<u&&r>=0?r:-1;while(r!==f){if(t(n[r],r,n))return r;r+=e}}}return-1}function ue(n,t,i){var r=ti(n,t,i);return r<0?undefined:n[r]}function fe(n){return n?n[0]:undefined}function ee(n){var t=n?n.length:0;return t?n[t-1]:undefined}function oe(n,t,i){var s,r,h,e,l,o;for(i===void 0&&(i=0),s=[],r=0,u(t,f)&&(h=t),e=i,l=n.length;e<l;e++)o=n[e],r&&(n[e-r]=o),(t===o||h&&h(o))&&(r++,c(s,o));return r&&cf(n,-1*r),s}function ii(n,t,i,r){var o,f,u,s,e;if(r===void 0&&(r=!1),h(t)){for(o=i?function(t){return ti(n,(function(n){return i(n,t)}))}:function(t){return n.indexOf(t)},f=r?[]:n,u=0,s=t.length;u<s;u++)e=t[u],o(e)<0&&c(f,e);r&&ur.apply(n,f)}return n}function su(n,t){return ii([],n,t)}function se(){var r=[],i=
arguments.length-2,n=arguments[i+1],t,e;for(u(n,f)||(n=undefined,i++),t=0;t<=i;t++)e=su(arguments[t],n),ii(r,e,n,!0);return r}function he(t,i){return n.merge.apply(null,t.map(i))}function ce(n,t){var i=n.map((function(n,t){return{i:t,v:n}}));return i.sort((function(n,i){return t(n.v,i.v)||n.i-i.i})),i.map((function(n){return n.v}))}function le(n){return n?n.toString():String(n)}function ri(n,t,i,r,u){var f,e,c,s,o,h;for(i=i||le,f=[t,,,""],e=0,c=t.length;e<c;e++)s=t[e],f[1]=s,f[2]=e,f[3]=undefined,o=nt.apply(i,f),u&&n[o]!==undefined||(f[3]=o,h=r?nt.apply(r,f):s,h!==undefined&&(n[o]=h))}function ae(n,t,i,r){var u=[t,,];ut(t,(function(t,f){if(!r||n[t]===undefined){u[1]=f;u[2]=t;var e=i?nt.apply(i,u):f||t;e!==undefined&&(n[t]=e)}}))}function ui(n){return n=h(n)?fr(n):arguments,function(){var t={};return s(arguments,(function(i,r){var u=n[r];i!==undefined&&(t[u]=i)})),t}}function ve(n){return ui.apply(undefined,n)}function ye(t,i){var r=[];return ut(t,(function(t,i){u(t,a)&&u(i,ar)&&c(r,n.getNameValue(
t,i))})),i?r.sort((function(n,t){return n.value-t.value})):r}function pe(n){return h(n)||(n=r(n)?[]:[n]),n}function hu(n,t){return dt(n)&&dt(t)&&!(n>t||n<t)}function we(n){return n.getTime()/1e3|0}function cu(n){return ct(n)&&h(n())}function be(n){return h(n)||cu(n)}function lu(n,t,i){var r=at[n]&t;at[n]=r|i}function ke(){ei.getRandomValues(at);lu(8,15,64);lu(11,63,128);for(var t=0;t<fi;t++)b[t]=lt[at[t]];return b[4]=b[7]=b[10]=b[13]="-",n.applyUncurry(er,"",b)}function de(n){for(var t,i=new Array(n),r;n;)for(t=4294967296*p.random()|0,r=8;r--;){if(i[--n]=v[t&15],n<0)return i;t>>>=4}}function ge(){var n=de(36);return n[8]=n[13]=n[18]=n[23]="-",n[14]="4",n[19]=v[8+(v.indexOf(n[19])&3)],st(er,"",n)}function au(n){return lt[n>>4]+v[n&15]}function vu(t){t=t?t+"-":"";var r="",i=et;return function(){return++i>et&&(i=0),i||(r=t+n.newGuid().substring(0,33)),r+au(i)}}function no(n){var i=-1,t=et,r="";return function(){return++t>et&&(t=0,i++,r=n+i.toString(16)+"-"),r+au(t)}}function to(n,t){return t=
p.pow(10,t||0),p.round(Number(n)*t)/t}function io(n){return n|0}function ro(n,t){return n?!t:t}function uo(n,t){if(n!==undefined&&t!==undefined&&!(n>t))return p.floor(p.random()*(t-n+1))+n}function fo(n,t,i){var r=it(n,t)&&n[t];r&&ct(r)?r(i):n[t]=ko.observable(i)}function eo(n,t){return n===t||hu(n,t)}function oo(n,t){if(n===t)return!0;if(n&&t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return!1}function vt(n){var t=typeof n;return t===i&&(n===null?t="null":h(n)?t="array":dt(n)&&(t="date")),t}function oi(n,t,r){var u,e,f;if(r&&(n=r(n),t=r(t)),n===t)return!0;if(!n||!t||(u=vt(n),u!==vt(t)))return!1;switch(u){case"array":return e=n,n.length===t.length&&e.every((function(n,i){return oi(n,t[i],r)}));case"date":return n.getTime()===t.getTime();case i:return f=w(n),f.length===gt(t)&&f.every((function(i){return oi(n[i],t[i],r)}));default:return!1}}function so(n,t,i){var r=i?yu.peekObservable:ko.unwrap;return oi(n,t,r)}function ho(n){return vt(n)===i}
function co(t,i,r){var u=[t,,,r],f=w(t),e=f.map((function(n){return u[1]=t[n],u[2]=n,nt.apply(i,u)}));return n.merge.apply(null,e)}function lo(n,t,i){var r,u,f;for(i=i||w(t),r=0;r<i.length;r++)u=i[r],f=t[u],f!==undefined&&(n[u]=f)}function yt(n,t,i){var f,e;return u(t,a)?(n=r(n)?"":String(n),f=n.length,(i===undefined||i>f)&&(i=f),i-=t.length,e=ht(n,t,i),e!==-1&&e===i):!1}function ao(n,t,i,f){return r(n)?-1:u(t,a)?n.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase(),i,f):1}function vo(n,t){var i="";for(t=t<0?0:t;t--;)i+=n;return i}function yo(n){for(var t="",i=n.length;i;)t+=n[--i];return t}function po(n){return function(){return hf(arguments,n)}}function wo(n,t){return n=n||"",t=t||n,function(i){return n+i+t}}function bo(n,t,i){return n.replace(new RegExp(si(t),"g"),i)}function go(n,t){var r={},u=!1,i,f;for(i in t||{})t.hasOwnProperty(i)&&(r[si(i)]=t[i],u=!0);return u?(f=new RegExp(w(r).join("|"),"g"),n.replace(f,(function(n){return t[n]}))):n}function ns(n,t,i){var r=[];if(n&&t&&i){var
u=0,e=t.length,f=0;for(i--;;){if(r.length>=i||(f=ht(n,t,u))<0){c(r,l(n,u));break}c(r,l(n,u,f));u=f+e}}return r}function k(n,t,i){return n=r(n)?"":String(n),i=r(i)||i<0?0:p.min(i,n.length),n.lastIndexOf(t,i)===i}function pu(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(n=n||"";n;){if(i=r.first((function(t){return t&&yt(n,t)})),!i)break;n=l(n,0,n.length-i.length)}return n}function ts(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(n=n||"";n;){if(i=r.first((function(t){return t&&k(n,t)})),!i)break;n=l(n,i.length)}return n}function is(n,t){return n=n||"",yt(n,t)||(n+=t),n}function wu(n,t){return n=n||"",k(n,t)||(n=t+n),n}function rs(n,t){h(t)||(t=fr(arguments,1));var i="";return s(t||[],(function(t){i?t&&(i=pu(i,n)+wu(t,n)):i=t||""})),i}function us(n,t){var r,u,i;return(t===void 0&&(t=!0),!n)?n:(k(n,"//")?n=l(n,r+2):(r=ht(n,"://"),r>-1&&(n=l(n,r+3))),u=t?/[?#/]/:/[?#/:]/,i=n.search(u),i=i>-1?i:n.length,l(n,0,i))}function fs(n,t){if(!n||!t||n.length<t.length)
return!1;var i=or(n),r=or(t);return i===r||yt(i,"."+r)}function es(n){return ht(n,"://")!==-1||k(n,"//")}function os(n){return pt.error=n,pt}function ss(n,t,i){var u=n.inspect(),r;return u.state==="fullfilled"?(r=uu(u.value,t,os),r===pt)?Q.reject(r.error).catch(i):Q(r):n.then(t,i)}function hs(n,t){return n.isPending()?n.finally(t):(t(),n)}function si(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function hi(){}function cs(n){return n}function bu(n){return n===null||typeof n in wt}function ls(n,t,i){var r=n.prototype;ut(t,(function(n,t){(i||!r[n])&&e.defineProperty(r,n,{value:t,configurable:!0,enumerable:!1,writable:!0})}))}function ku(n){if(n>ci)throw new Error("The requiredMaxInteger("+n+") should be less than "+ci);if(n<=0)throw new Error("The requiredMaxInteger("+n+") should be greater than zero.");}function as(n){return ku(n),li}function vs(n){return ku(n),ai}function ys(n){var r=e.create(e.getPrototypeOf(n)),t,i;for(t in n)i=n[t],u(i,f)?r[t]=i.bind(n):it(n,t)&&(r[
t]=i);return r}function ps(n){return n&&n.toLowerCase()}function yi(n){var r,t;if(n){if(r=typeof n,r===a)return ps(n);if(Array.isArray(n))return n.map((function(n){return yi(n)}));if(r===i)return t=n,ut(t,(function(n){t[n]=yi(t[n])})),t}return n}function nf(t,i,r){return r?n.jqueryExtend(!0,t,i):n.jqueryExtend(t,i)}function bs(n,t,i){if(i&&bu(n))return n;var r=g(n)?[]:{};return nf(r,n,t)}function ks(t,i,r,u){var f=g(t)?[]:{};return n.jqueryExtend(f,t,i,r,u)}function tf(n){return r(n)?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function ds(n){return tf(n).replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#96;")}function gs(t){var i,u,r,f,e;return t||n.isDiagnosticsEnabled?(i=ot(),i&&(u="\n",r=0,r=i.indexOf(u,0),r=i.indexOf(u,r+1),f=i.indexOf("@",0),e=f>-1&&f<r,e||(r=i.indexOf(u,r+1)),i=i.substr(r+1)),i||""):"(Callstack capturing is not enabled. Use ?trace=diagnostics to enable it.)"}function nh(n,t){var r=function(t,i){if(t===n&&!t.hasOwnProperty(i))
throw new Error("Missing property '"+i+"' on root object '"+bi(t)+"'.");},u=function(u,f){var s=f===n,e,o;return f&&typeof f===i&&!g(f)?(e=s&&t?t:wi(f),e.length===0?s?{}:f:(o=new oh,e.forEach((function(n){r(f,n);o.addProperty(n,f[n])})),o.toJSON())):f};return bi(n||{},u)}function th(n){if(!n||typeof n!==i||g(n))throw new Error(di+".");var t=wi(n);if(t.length!==1)throw new Error(di+" with only one property.");return t[0]}function ih(n,t,i){return n[i]}function rh(n){var t=function(t,i){if(t===gu&&g(i)){var r=this;ri(r,i,(function(t){try{return th(t)}catch(i){i.message=i.message+(" String: '"+n+"'.");throw i;}}),ih);return}return i};return ws(n,t)}function uh(t){t&&n.disposeDisposable(t.content,t.container)}function fh(n){return pi+n+pi}function eh(n){return n!=="constructor"&&!k(n,pi)}function tr(n){var t=i,r;return n.constructor&&(r=n.constructor,t=nr(r)),t}function y(n){return"<"+n+">"}function hh(n,t,r,u){function l(n){return r.visited.indexOf(n)<0?(r.visited.push(n),!0):!1}var e,o,s,k=!n,
a=k||u,v,p,h,c,w,b;if(!n||n[0]!=="_")return s=typeof t,e=y(s),s in wt||(s===i?t===null?e=y("null"):g(t)?(v=t,p=l(t)?"":gi,e=p+y("Array["+v.length+"]")):t instanceof Date?e=y("Date"):r.current!==t?(h=y(tr(t)),a?(e=o={},o[h]=t,o=o[h],r.current=t):e=h):(r.current=null,e=l(t)?t:gi+y(tr(t))):s===f&&(c=y(s)+nr(t),ko.isObservable(t)&&a?l(t)?(e=o={},w=t,b=w.peek(),o[c]=b):e=gi+c:e=c)),e}function ch(n,t){var i={current:null,visited:[]};return bi(n,(function(n,r){return hh(n,r,i,t)}),2).replace(/\"/g,"")}function lh(n,t,i){var r={};return ri(r,n,t,i),r}function ah(n,t){var i=kr(),r=wf((function(){i(t())}));return i.dispose=r.dispose.bind(r),n.registerForDispose(i),i}function bh(n,t,i){var r=n.charCodeAt(0);return uf[n]||(uf[n]="&#"+(t?0:i?(r-yh)*1024+n.charCodeAt(1)-ph+wh:r)+";")}function kh(n){return ff(n)}function ff(n){return r(n)?"":String(n).replace(vh,bh)}function dh(t){for(var c=new n.Map,e=[[t]],o,s,u,r,h;e.length;)for(o=e.pop(),s=Object.keys(o),u=0;u<s.length;u++){if(r=o[s[u]],h=typeof r,h===
f||r instanceof Error||r instanceof Node||r===document.all)return!1;r&&h===i&&!c.has(r)&&(c.set(r,!0),e.push(r))}return!0}function gh(n,t){n=dr(n);t=dr(t);var u=!r(n),i=!r(t);if(u&&i){if(n.localeCompare)return n.localeCompare(t);n=+n;t=+t;u=!isNaN(n);i=!isNaN(t)}return u?i?n-t:-1:i?1:0}function ir(n,t){return iu(n)?t:n}function nc(n,t){return ct(n)?n:br(ir(n,t))}function tc(n,t){return ct(n)?n:kr(ir(n,t))}var bt=window,rr=Function,p=Math,e=Object,nt=rr.call,ef=rr.apply,st,gr,ni,ne,ft,ou,v,lt,ei,et,yu,pt,wt,d,vi,ot,ki,di,rf;n.uncurryThis=t;st=t(ef);n.applyCall=st;n.applyUncurry=st;var o=Array.prototype,of=o.concat,ur=o.push,sf=t(o.filter),s=t(o.forEach),hf=t(o.join),c=t(ur),fr=t(o.slice),cf=t(o.splice),ic=t(o.indexOf),h=Array.isArray,tt=String.prototype,er=t(tt.concat),lf=t(tt.split),l=t(tt.substring),ht=t(tt.indexOf),or=t(tt.toLowerCase),it=t(e.prototype.hasOwnProperty),sr=e.keys,hr=bt.fx,rt=hr.environment,cr=e.freeze,af=rt.isDevelopmentMode,lr="boolean",f="function",a="string",ar="number",
i="object",vr="undefined",vf=jQuery,yr=hr.getTimestamp;n.isWindow=pr;n.isEmptyObject=yf;n.startTimer=pf;n.isPlainObject=kt;n.jqueryExtend=function(){for(var p=[],h=0;h<arguments.length;h++)p[+h]=arguments[h];var c,s,e,r,l,a,t=arguments[0]||{},o=1,y=arguments.length,v=!1;for(typeof t===lr&&(v=t,t=arguments[o]||{},o++),typeof t===i||u(t,f)||(t={}),o===y&&(t=this,o--);o<y;o++)if((c=arguments[o])!=null)for(s in c)(e=t[s],r=c[s],t!==r)&&(v&&r&&(kt(r)||(l=Array.isArray(r)))?(l?(l=!1,a=e&&Array.isArray(e)?e:[]):a=e&&kt(e)?e:{},t[s]=n.jqueryExtend(v,a,r)):r!==undefined&&(t[s]=r));return t};n._objectKeysPolyfill=wr,(function(){try{sr("")}catch(n){e.keys=wr}})();var w=e.keys,ct=ko.isObservable,wf=ko.computed,br=ko.observable,kr=ko.observableArray,dr=ko.utils.peekObservable;gr=/\S/;n.forEachKey=ut;n.keysLength=gt;n.isEmpty=bf;n.isDisposable=kf;n.disposeDisposable=function(){s(arguments,tu)};n.isNull=df;n.isUndefined=iu;n.isNullOrUndefined=r;n.notNullOrUndefined=ru;n.isNullOrWhiteSpace=gf;ni=bt.Map;
n.Map=ni;ft={};n.memoize=fu;n.memoizeQ=eu;ou=n.memoize((function(t){var i=Q.defer();return bt.requirejs([t],(function(n){i.resolve(n)}),(function(n){var u=n&&n.requireType,t,r;if(u==="scripterror"&&!it(n,"status")&&(t=n.originalError||{},t.type==="error"&&t.srcElement)){r=t.srcElement.src;FxImpl.Diagnostics.getStatusCode(r,(function(t,u,f){n.srcUrl=r;n.status=t;n.statusText=f;i.reject(n)}));return}i.reject(n)})),i.promise.catch((function(i){var r=rt.requireConfig.ignoreErrorsForModule[t]?new n.Errors.CanceledError({message:"Suppressing require rejection for failed download of ignore-able module "+t,innerErrors:i}):i;return Q.reject(r)}))}),{checkResult:function(t,i,r){return Q.isFulfilled(t)||t.catch((function(t){n.Errors.isInstanceOfErrorType(n.Errors.CanceledError,t)||r.delete(i)})),!0}});n.require=re;n.findIndex=ti;n.find=ue;n.first=fe;n.last=ee;n.remove=oe;n.pushUnique=ii;n.unique=su;n.union=se;n.merge=function(){var n=sf(arguments,ru);return of.apply([],n)};n.mapMany=he;n.stableSort=ce;n.extendArrayIntoMap=
ri;n.extendStringMapIntoMap=ae;n.getStringMapFunc=ui;n.applyStringMapFunc=ve;n.getNameValue=ui("name","value");n.getEnumArray=ye;n.makeArray=pe;n.areEqualDates=hu;n.toSeconds=we;n.isObservableArray=cu;n.isArrayOrObservableArray=be;v=lf("0123456789abcdef","");lt=[];s(v,(function(n){s(v,(function(t){c(lt,n+t)}))}));var fi=20,at=new Uint8Array(fi),b=new Array(fi);ei=window.crypto||window.msCrypto;n.newGuid=ei?ke:ge;et=4095;n.getUniqueIdGenerator=vu;n.getIdGenerator=no;n.getUniqueId=vu();n.round=to;n.truncate=io;n.xor=ro;n.random=uo;n.hasOwnProperty=it;n.setObjPropAsObservable=fo;n.areEqual=eo;n.arrayEquals=oo;n.getTypeOf=vt;yu=ko.utils;n.deepEquals=so;n.isObject=ho;n.map=co;n.shallowCopyFromObject=lo;n.endsWith=yt;n.localeCompareIgnoreCase=ao;n.repeat=vo;n.reverse=yo;n.getJoinFunc=po;n.getQuoteFunc=wo;n.replaceAll=bo;n.replaceMany=go;n.split=ns;n.startsWith=k;n.trimEnd=pu;n.trimStart=ts;n.ensureSuffix=is;n.ensurePrefix=wu;n.pathJoin=rs;n.getUriAuthority=us;n.isSubdomain=fs;n.isUriAbsolute=es;
pt={};n.tryImmediateResolve=ss;n.tryImmediateFinally=hs;n.memoizePromise=eu;n.regexEscape=si;n.noop=hi;n.identity=cs;wt={};s([lr,vr,ar,a,"symbol"],(function(n){wt[n]=!0}));n.isPrimitive=bu;n.polyfill=ls;var ci=50,li=[],ai={};for(d=0;d<=ci;d++)vi=d+"",li[d]=vi,ai[vi]=d;af&&(cr(li),cr(ai));n.getIntToStringMap=as;n.getStringToIntMap=vs;n.cloneAndRebindFunctions=ys;n.lowerCaseAllStrings=yi;var du=function(){return(new Error).stack},gu="#",pi="###",g=Array.isArray,wi=Object.keys,bi=JSON.stringify,ws=JSON.parse;n.isDiagnosticsEnabled=(function(){var n=rt.trace;return n&&n.diagnostics?!0:n&&n.nocallstacks?!1:rt.isDevelopmentMode&&!!du()?!0:!1})();ot=du;ot()||(ot=hi,n.isDiagnosticsEnabled&&(ki=function(){try{throw new Error;}catch(n){return n.stack}},ki()&&(ot=ki)));n.extend=nf;n.clone=bs;n.extend2=ks;n.htmlEncode=tf;n.attributeEncode=ds;n.getCurrentCallStack=gs;n.toSortedString=nh;di="Invalid sorted string, property array must contain objects";n.parseSortedString=rh;n.disposeViewModelProperties=uh;
n.generateNonSerializableProperty=fh;n.isSerializableProperty=eh;var oh=(function(){function n(){this._propertyMap={}}return n.prototype.addProperty=function(n,t){t!==undefined&&typeof t!==f&&(this._propertyMap[n]=t)},n.prototype.toJSON=function(){var n=this._propertyMap,i=wi(n),t;return i.length>1?(t={},t[gu]=i.sort().map((function(t){var i={};return i[t]=n[t],i})),t):n},n})(),sh=/function\s+(\w*)\(.*?\)/,gi="[potential-circular-reference]",nr=function(n){var t,r,i;return n?(t=n.name,t===undefined&&(r=n.toString(),r&&(i=sh.exec(r),i&&i.length>=1&&(t=i[1]))),t||"[anonymous]"):""};n.getFunctionName=nr;n.getObjectConstructorName=tr;n.getObjectDescriptor=ch;n.convertArrayToMap=lh;n.thunkArray=ah;rf=(function(){function n(n){var t=br(0),i=n?n:{rateLimit:30};t.extend(i);this._value=t}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n.prototype.touch=function(){this._value(this._value.peek()+1&65535)},n})();n.KnockoutDelayTrigger=
rf;var vh=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,uf={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"},yh=55296,ph=56320,wh=65536;n.encodeAttribute=kh;n.encodeHtml=ff;n.canSendThroughPostMessage=dh;n.compare=gh;n.initValue=ir;n.initObservable=nc;n.initObservableArray=tc;n.markIgnoreHighDependenciesCount=hi})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function r(n,t,i){var u="Code: '"+n+"'. ",r="";return t?r=t.format.apply(t,i):i&&i.length&&(r="\nParameters: "+[].join.call(i,",")+". "),u+r}function u(n){var t={};return i(n,(function(n,i){t[n]=function(){var t=r(n,i,arguments);throw new Error(t);}})),t}var t=MsPortalFx,i=t.forEachKey;n.getErrorMap=u})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function at(){var t="MsPortalFx.Resources.Strings",n=window,i=(n=n.Resources)&&(n=n.getResources)&&n(t);if(!i)throw new Error("Unable to find the resources for '"+t+"'.");return function(
n){return i[n]}}function vt(n){return n&&n[0].toLowerCase()+n.slice(1)}function yt(n){return n?function(t){return c(n+t)}:c}function i(t,i,r){t=t||n.Resources.Strings;i=i||"";n.extendArrayIntoMap(t,r,vt,yt(i))}var c=at(),r="Azure_",l,a,pt,u,wt,e,bt,v,y,p,kt,o,dt,w,gt,b,k,d,g,f,ni,nt,tt,it,rt,s,ti,ut,ft,et,ot,st,ht,h,ii,ct,lt;(function(n){var c=r+"Subscriptions_",a,f,v,t,y,u,p,e,w,o,s,h,b;(function(n){var r=c+"DropDown_",t;(function(){i(t,r,["SubDisallowedRP","SubCantRegisterWithRP","RequiredPermissionsValidationMessage","SubscriptionNotAllowedForGalleryItemValidationMessage","DisabledSubscriptionValidationMessage","DefaultLabel"])})(t=n.DropDown||(n.DropDown={}))})(a=n.Subscriptions||(n.Subscriptions={}));f=r+"ResourceManager_",(function(n){var t=f+"Provisioner_",r;(function(n){var f=t+"ArmValidation_",u;(function(){i(u,f,["NetworkFailure","ValidationFailed"])})(u=n.ArmValidation||(n.ArmValidation={}));i(r,t,["SeeTemplateLink","PricingSummaryLinkLabel"])})(r=n.Provisioner||(n.Provisioner=
{}))})(v=n.ResourceManager||(n.ResourceManager={}));t=r+"ResourceGroups_",(function(n){var e=t+"InfoBalloon_",u,r,f;(function(){i(u,e,["Text","LinkText"])})(u=n.InfoBalloon||(n.InfoBalloon={}));r=t+"DropDown_",(function(n){var u=r+"ProvisioningStateValidation_",t;(function(){i(t,u,["BaseMessage","Movingresources","Deleting","Deleted"])})(t=n.ProvisioningStateValidation||(n.ProvisioningStateValidation={}));i(f,r,["LockedValidationMessage","RequiredPermissionsValidationMessage","NoOptions","DefaultLabel"])})(f=n.DropDown||(n.DropDown={}))})(y=n.ResourceGroups||(n.ResourceGroups={}));u=r+"Validators_",(function(n){var e=u+"ReservedResourceName_",t,r,f;(function(){i(t,e,["Message"])})(t=n.ReservedResourceName||(n.ReservedResourceName={}));r=u+"RequiredPermission_",(function(){i(f,r,["Message"])})(f=n.RequiredPermission||(n.RequiredPermission={}))})(p=n.Validators||(n.Validators={}));e=r+"Legal_",(function(n){var r=e+"LegalTermsSelector_",t;(function(){i(t,r,["LegalTermsMessage","LegalTermsLabel","LegalTermsAcceptedMessage"])}
)(t=n.LegalTermsSelector||(n.LegalTermsSelector={}))})(w=n.Legal||(n.Legal={}));o=r+"BaseResourceDropDown_",(function(){i(s,o,["SearchingValidationMessage","CreatingResourcedDisabledValidationMessage"])})(s=n.BaseResourceDropDown||(n.BaseResourceDropDown={}));h=r+"Locations_",(function(n){var r=h+"DropDown_",t;(function(){i(t,r,["EmptyMessage","DefaultLabel"])})(t=n.DropDown||(n.DropDown={}))})(b=n.Locations||(n.Locations={}));i(l,r,["ErrorMessageWithTarget","ErrorMessageWithCode"])})(l=t.Azure||(t.Azure={}));a="Toolbar_",(function(n){var r=a+"MoveButton_",t;(function(){i(t,r,["Title","Subscription","Resourcegroup"])})(t=n.MoveButton||(n.MoveButton={}))})(pt=t.Toolbar||(t.Toolbar={}));u="Part_",(function(n){var w=u+"PropertiesPart_",r,t,f,e,o,s,h,c,l,a,v,y,p;(function(){i(r,w,["changeLabel","changeSubscriptionLabel","changeResourceGroupLabel"])})(r=n.PropertiesPart||(n.PropertiesPart={}));t=u+"SettingList_",(function(n){var h=t+"Group_",r,u,e,o,s;(function(){i(r,h,["Settings","General","Monitoring",
"QuickAccess","Support","ResourceManagement"])})(r=n.Group||(n.Group={}));u=t+"Keyword_",(function(){i(e,u,["Insights","logs","events"])})(e=n.Keyword||(n.Keyword={}));o=t+"Keywords_",(function(){i(s,o,["ExportTemplate","EventLogs","ResourceAdvisor","ResourceHealth","troubleshoot","helpRequest","quotas"])})(s=n.Keywords||(n.Keywords={}));i(f,t,["properties","ResourceProviders","AccessDetails","locksForSubscriptions","locks","ExportTemplate","EventLogs","ResourceAdvisor","ResourceHealth","troubleshoot","helpRequest","accessControl","users","tags","quotas","subCerts","roles","Resources","ResourceGroups","access","searchBoxPlaceholder"])})(f=n.SettingList||(n.SettingList={}));e=u+"CollectionSummary_",(function(){i(o,e,["NumberPlus","Number"])})(o=n.CollectionSummary||(n.CollectionSummary={}));s=u+"ResourceSummary_",(function(){i(h,s,["notAvailable","subscriptionNamePropertyLabel","subscriptionIdPropertyLabel","locationPropertyLabel","statusPropertyLabel","resourceGroupPropertyLabel"])})(h=n.ResourceSummary||
(n.ResourceSummary={}));c=u+"Chart_",(function(){i(l,c,["editButtonText"])})(l=n.Chart||(n.Chart={}));a=u+"Quickstart_",(function(){i(v,a,["title"])})(v=n.Quickstart||(n.Quickstart={}));y=u+"Provisioning_",(function(){i(p,y,["pollingFailed","deploymentStatusUnavailable","description"])})(p=n.Provisioning||(n.Provisioning={}))})(wt=t.Part||(t.Part={}));e="Pickers_",(function(n){var t=e+"Specs_",r,u,f;(function(n){var f=t+"DropDown_",u;(function(){i(u,f,["LabelLinkText","Recent","Available","Recommended","LabelFormatter"])})(u=n.DropDown||(n.DropDown={}));i(r,t,["PricingTier"])})(r=n.Specs||(n.Specs={}));u=e+"AccessDenied_",(function(){i(f,u,["reasonMessage"])})(f=n.AccessDenied||(n.AccessDenied={}))})(bt=t.Pickers||(t.Pickers={}));v="HeatMap_",(function(){i(y,v,["legend","noUnitsMessage","name"])})(y=t.HeatMap||(t.HeatMap={}));p="Controls_",(function(n){var r=p+"Grid2_",t;(function(){i(t,r,["ContextMenu"])})(t=n.Grid2||(n.Grid2={}))})(kt=t.Controls||(t.Controls={}));o="ViewModels_",(function(n){var t=o+
"Controls_",r,u,f;(function(n){var v=t+"ResourceGroups_",u,f,e,o,s,h,c,l,a;(function(){i(u,v,["SelectExisting","CreateNew"])})(u=n.ResourceGroups||(n.ResourceGroups={}));f=t+"DateTimePicker_",(function(){i(e,f,["TimeLabel","DateLabel"])})(e=n.DateTimePicker||(n.DateTimePicker={}));o=t+"DateTimePickerRange_",(function(){i(s,o,["StartTime","StartDate","EndTime","EndDate"])})(s=n.DateTimePickerRange||(n.DateTimePickerRange={}));h=t+"CreatorAndSelector_",(function(){i(c,h,["SelectExisting","UseExisting","CreateNew"])})(c=n.CreatorAndSelector||(n.CreatorAndSelector={}));l=t+"CreatorAndComboBox_",(function(){i(a,l,["UseExisting","CreateNew"])})(a=n.CreatorAndComboBox||(n.CreatorAndComboBox={}));i(r,t,["Calendar","FileUpload","Selector","CreatorAndSelectorLabel","Button","RemoveItem","ChooseItem","AddItem","SpecComparison","Terminal","SearchBox","Search","NoRowsMessage"])})(r=n.Controls||(n.Controls={}));u=o+"Container_",(function(){i(f,u,["notFound","preview","unauthorizedText"])})(f=n.Container||(n.Container=
{}))})(dt=t.ViewModels||(t.ViewModels={}));w="ResourceGroup_",(function(n){var r=w+"Validation_",t;(function(){i(t,r,["SubscriptionHasNoPermissionsMessage","LengthValidationMessage","InvalidMessage","AlreadyExistsMessage"])})(t=n.Validation||(n.Validation={}))})(gt=t.ResourceGroup||(t.ResourceGroup={}));b="UnitConversion_",(function(){i(k,b,["PetabytesPerSecondSI","TerabytesPerSecondSI","GigabytesPerSecondSI","MegabytesPerSecondSI","PetabytesSI","TerabytesSI","GigabytesSI","MegabytesSI","TrillionPerSecond","Trillion","ThousandPerSecond","Thousand","TerabytesPerSecond","Terabytes","Seconds","PetabytesPerSecond","Petabytes","Percentage","Minutes","MilliSeconds","MillionPerSecond","Million","MicroSeconds","MegabytesPerSecond","Megabytes","KilobytesPerSecondSI","KilobytesSI","KilobytesPerSecond","Kilobytes","Hours","GigabytesPerSecond","Gigabytes","Days","CountPerSecond","CountPerMinute","CountPerHour","CountPerDay","BytesPerSecond","BytesPerMinute","BytesPerHour","BytesPerDay","Bytes","BillionPerSecond",
"Billion"])})(k=t.UnitConversion||(t.UnitConversion={}));d="NumericTextBox_",(function(){i(g,d,["invalidText"])})(g=t.NumericTextBox||(t.NumericTextBox={}));f="DatePolyfill_",(function(n){var a=f+"Months_",t,r,u,e,o,s,h,c,l;(function(){i(t,a,["September","October","November","May","March","June","July","January","February","December","August","April"])})(t=n.Months||(n.Months={}));r=f+"MonthsAbbr_",(function(){i(u,r,["September","October","November","May","March","June","July","January","February","December","August","April"])})(u=n.MonthsAbbr||(n.MonthsAbbr={}));e=f+"Days_",(function(){i(o,e,["Wednesday","Tuesday","Thursday","Saturday","Monday","Friday","Sunday"])})(o=n.Days||(n.Days={}));s=f+"DaysAbbr_",(function(){i(h,s,["Wednesday","Tuesday","Thursday","Saturday","Monday","Friday","Sunday"])})(h=n.DaysAbbr||(n.DaysAbbr={}));c=f+"AgoStrings_",(function(){i(l,c,["years","weeks","months","minutes","lessThanAMinute","hours","days","aYear","aWeek","anHour","aMonth","aMinute","aDay"])})(l=n.AgoStrings||
(n.AgoStrings={}))})(ni=t.DatePolyfill||(t.DatePolyfill={}));nt="FileDownload_",(function(){i(tt,nt,["unauthorizedText"])})(tt=t.FileDownload||(t.FileDownload={}));it="FileDownloadCommand_",(function(){i(rt,it,["fileDownloadErrorStatus","authTokenNotAvailable"])})(rt=t.FileDownloadCommand||(t.FileDownloadCommand={}));s="Services_",(function(n){var f=s+"Gallery_",t,r,u;(function(){i(t,f,["ViewPricingSummaryLabel"])})(t=n.Gallery||(n.Gallery={}));r=s+"AssetHandler_",(function(){i(u,r,["titleGridColumn","assetTypeGridColumn"])})(u=n.AssetHandler||(n.AssetHandler={}))})(ti=t.Services||(t.Services={}));ut="Dialogs_",(function(){i(ft,ut,["OkButtonText","CancelButtonText"])})(ft=t.Dialogs||(t.Dialogs={}));et="FileUpload_",(function(){i(ot,et,["notSupported","notReady"])})(ot=t.FileUpload||(t.FileUpload={}));st="DeleteAssetConfirmation_",(function(){i(ht,st,["bladeTitle","warningText","confirmationLabel","assetNameValidationFailureMessage","affectedItemsLabel"])})(ht=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation=
{}));h="DeleteCommand_",(function(n){var f=h+"Failure_",t,r,u;(function(){i(t,f,["title","message"])})(t=n.Failure||(n.Failure={}));r=h+"Confirmation_",(function(){i(u,r,["title","message"])})(u=n.Confirmation||(n.Confirmation={}))})(ii=t.DeleteCommand||(t.DeleteCommand={}));ct="ExtensionRequestHandler_",(function(){i(lt,ct,["VersionMismatch"])})(lt=t.ExtensionRequestHandler||(t.ExtensionRequestHandler={}))})(i=t.Strings||(t.Strings={}))})(t=n.Resources||(n.Resources={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function i(n){t.push(n);n.reset()}function r(){t.forEach((function(n){n.reset()}))}var t=[];n.register=i;n.resetGlobalState=r})(t=n.GlobalStateManager||(n.GlobalStateManager={}))})(FxImpl||(FxImpl={})),(function(n){"use strict";var r=MsPortalFx,t=window,i=(function(){function n(n,t,i){this._cache={};this._formatCulture=n;this._intl=t;this._formatFactorySelector=i}return n.prototype._create=function(n){var f,t,i,u;if(this._intl&&(t=this._formatFactorySelector(
this._intl),t)){i=r.clone(n);u=this._formatCulture;try{f=new t(u,i)}catch(e){throw new Error("Intl.DateTimeFormat failed. format culture: {0}, options: {1}, Exception: {2}".format(u,JSON.stringify(i),e));}}return f||{format:function(n){return n+""}}},n.prototype.get=function(n){var i=this._cache,t;return n?(t="",Object.keys(n).sort().forEach((function(i,r){r&&(t+=",");t+=i+":"+n[i]})),i[t]||(i[t]=this._create(n))):this._defaultFormat||(this._defaultFormat=this._create())},n})(),u=(function(){function n(n,t){var r=n.split(".");r.length>1?(this.displayLanguage=r[0],this.formatCulture=r[1]):this.displayLanguage=this.formatCulture=r[0];this._intl=t;this.numberFormatCache=new i(this.formatCulture,t,function(n){return n.NumberFormat});this.dateTimeFormatCache=new i(this.formatCulture,t,function(n){return n.DateTimeFormat})}return n.createWithBrowserIntl=function(i){return i===void 0&&(i=t.fx.environment.effectiveLocale||"en.en-us"),new n(i,t.Intl)},n.prototype.supportedLocalesOf=function(n){var t=
this._intl;return t?(n=t.DateTimeFormat.supportedLocalesOf(n),t.NumberFormat.supportedLocalesOf(n)):["en-us"]},n})(),f;n.IntlContext=u,(function(i){var r=n.IntlContext.createWithBrowserIntl(),u,f,e;i.displayLanguage=r.displayLanguage;i.formatCulture=r.formatCulture,(function(n){function t(n){return r.numberFormatCache.get(n)}function i(n){return t().format(n)}n.create=t;n.format=i})(u=i.NumberFormat||(i.NumberFormat={})),(function(n){function u(n){return r.dateTimeFormatCache.get(n)}var t="numeric",i="long";n.shortDatePattern={day:t,month:t,year:t};n.longDatePattern={weekday:i,year:t,month:i,day:t};n.fullDateTimePattern={weekday:i,year:t,month:i,day:t,hour:t,minute:t,second:t};n.monthDayPattern={month:i,day:t};n.shortTimePattern={hour:t,minute:t};n.longTimePattern={hour:t,minute:t,second:t};n.yearMonthPattern={year:t,month:i};n.create=u})(f=i.DateTimeFormat||(i.DateTimeFormat={})),(function(n){function t(n){return r.supportedLocalesOf(n)}n.supportedLocalesOf=t})(e=i.Internal||(i.Internal={}));
t.define("MsPortalFx/Globalization",[],(function(){return n.Intl}))})(f=n.Intl||(n.Intl={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function i(){return t||(t=FxImpl.Extension.getRuntime().getSharedSettings())}var t;n.getSharedSettings=i})(t=n.Settings||(n.Settings={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function r(){var n=arguments,e=this,o=!1,u,h=n.length===1&&n[0]&&typeof n[0]=="object",s=n.length===2&&n[0]&&typeof n[0]=="object"&&(typeof n[1]=="function"||n[1]===null),r=s?n[1]:null,f;return(h||s)&&(f=n[0],u=e.replace(t,(function(n){var i=n.substring(1,n.length-1),t;return f.hasOwnProperty(i)?(o=!0,t=f[i],r?r(t):t):n}))),o||(u=e.replace(i,(function(t,i){if(i<n.length){var u=n[i];return r?r(u):u}return t}))),u}var t=/\{[a-zA-Z$_\d]*\}/g,i=/\{(\d+)\}/g;n.polyfill(String,{format:r,localeCompareIgnoreCase:function(t,i,r){return n.localeCompareIgnoreCase(this,t,i,r)},replaceAll:function(t,i){return n.replaceAll(this,t,i)},replaceMany:function(t){return n.
replaceMany(this,t)},repeat:function(t){return n.repeat(this,t)},startsWith:function(t,i){return n.startsWith(this,t,i)},endsWith:function(t,i){return n.endsWith(this,t,i)}},!0)})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function f(n){return n||""}function i(n,t,i){return f(n).substr(t,i)}function s(n,t,i){return e(n)?o(n,r,4).slice(t,i).join(r):""}var h="?",c="#",l="=",a="&",r="/",u=n.isUndefined,e=n.isUriAbsolute,o=n.split,v=n.ensurePrefix,y=decodeURIComponent,p=encodeURIComponent,w=(function(){function n(n,t){var e=this,r,f;this._qs=[];this._qsMap={};this._leadingSeparator=u(t)?h:t;n&&(r=n,r[0]===this._leadingSeparator&&(r=i(r,1)),f=r.split(a),f.forEach((function(n){if(n){var r=n.indexOf(l),f=r>=0,t=f?i(n,0,r):n,u=f?i(n,r+1):"";t&&(t=y(t),u=y(u),e.setParameter(t,u))}})))}return n.prototype.clear=function(){return this._qs=[],this._qsMap={},this},n.prototype.setParameters=function(n){for(var t in n)n.hasOwnProperty(t)&&this.setParameter(t,n[t]);return this}
,n.prototype.getParameterIndex=function(n){var t=n.toUpperCase();return this._qsMap[t]},n.prototype.setParameter=function(n,t){var f=n.toUpperCase(),r=this._qsMap[f],i=this._qs;return u(r)?(this._qsMap[f]=i.length,i.push(n),i.push(t)):(i[r]=n,i[r+1]=t),this},n.prototype.getParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs[t+1]),i},n.prototype.getParameters=function(){for(var r,i={},t=this._qs,n=0,u=t.length;n<u;n+=2)r=t[n],r!==undefined&&(i[t[n]]=t[n+1]);return i},n.prototype.removeParameters=function(n){return n.forEach(this.removeParameter,this),this},n.prototype.removeParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs,i[t]=i[t+1]=undefined),this},n.prototype.toString=function(n){var e,o;n===void 0&&(n=!0);for(var t="",r=this._qs,s=r.length,f=0;f<s;)e=r[f++],o=r[f++],u(e)||(t+=a,t+=p(e),t+=l,t+=p(o));return t&&(t=i(t,1),n&&(t=this._leadingSeparator+t)),t},n})(),b;t.QueryStringBuilder=w;b=(function(){function n(n){var t=f(n),u=
t.indexOf(c),o=u>=0,r=o?i(t,0,u):t,l=o?i(t,u):"",e=r.indexOf(h),s=e>=0,a=s?i(r,0,e):r;this._oq=s?i(r,e):"";this.path=a;this.query=new w(this._oq);this.fragment=l}return n.prototype.getOriginalQuery=function(){return this._oq},n.prototype.toString=function(){var t=(this.query||"").toString(),n=f(this.fragment);return n&&(n=v(n,c)),f(this.path)+t+n},n.prototype.getScheme=function(){var n=s(this.path,0,2);return n&&(n+="/"),n},n.prototype.getAuthority=function(){return s(this.path,2,3)},n.prototype.getSchemeAndAuthority=function(){return s(this.path,0,3)},n.prototype.getRelativePath=function(){var n=this.path;return e(n)&&(n=v(o(n,r,4)[3],r)),n},n.prototype.setRelativePath=function(n){var t=this.path,u;e(t)?(n=f(n),n.startsWith(r)&&(n=i(n,1)),u=o(t,r,4),u[3]=n,t=u.join(r)):t=n;this.path=t},n})();t.UriBuilder=b})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=undefined,r=n.extendArrayIntoMap,u=n.extendStringMapIntoMap,
f,e,o,s,h,c,l,a,v,y;t.Shell="fx";t.DefaultCloudName=window.fx.environment.defaultCloudName||"DefaultCloud";t.HubsCloudName="HubsCloud",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(f=t.ExtensionNames||(t.ExtensionNames={})),(function(n){n.Dashboard="Dashboard";n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseAllResources="BrowseAllResources";n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseServiceBlade="BrowseService";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.BrowseResourceBlade="BrowseResource";n.BrowseInstanceLinkBlade="BrowseInstanceLink";n.Gallery="Gallery";n.StoreGallery=
"StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource="BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(e=t.AssetNames||(t.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(o=t.ResourceTypes||(t.ResourceTypes={})),(function(n){var t;(function(n){u(n,{BrowseServicePinnedPart:"BrowseServicePart",BrowseResourcePinnedPart:i,BrowseResourceGroupPinnedPart:i})})(t=n.Hubs||(n.Hubs={}))})(s=t.PartNames||(t.PartNames={})),(function(n){var t,f,e,o;(function(n){r(n,["SubscriptionsBlade"])})(t=n.Billing||(n.Billing={})),(function(n){u(n,{CreateHubBlade:"GalleryCreateBlade",BrowseAllResourcesBlade:i,BrowseLinkBlade:i,BrowseResourceBlade:i,BrowseResourceGroupBlade:
i,BrowseServiceBlade:i,NotFoundAssetBlade:i,ResourceGroupMapBlade:i,ResourceMenuBlade:i,ResourceProperties:i,UnauthorizedAssetBlade:i,UnavailableAssetBlade:i})})(f=n.Hubs||(n.Hubs={})),(function(n){u(n,{GalleryFeaturedMenuItemBlade:i,GalleryResultsListBlade:i,LegalTermsV2Blade:"PCLegalTermsV2Blade"})})(e=n.Marketplace||(n.Marketplace={})),(function(n){r(n,["EventsBrowseBlade"])})(o=n.AzureMonitoring||(n.AzureMonitoring={}))})(h=t.BladeNames||(t.BladeNames={})),(function(n){n.ViewModel="viewModel";n.PartViewModel="partViewModel"})(c=t.ViewModelTypes||(t.ViewModelTypes={})),(function(n){r(n,["FeatureAdoption","FeatureObsolete"])})(l=t.Telemetry||(t.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(a=t.TelemetrySharing||(t.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(v=t.GalleryMenuItems||(t.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(y=t.BladeParameterNames||
(t.BladeParameterNames={}))})(i=t.Constants||(t.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";n.NativeError=Error})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function l(t){var f=[],r=[],e=t.prototype,u,i;for(r.push(t);(t=(e=h(e)).constructor)!==o;)r.push(t);while(t=r.pop())i=t.TypeName,u&&u===i?i=t.TypeName=n.getFunctionName(t):u=i,f.unshift(i);return f}function a(n,t){var i,u,r,f,e;return n&&(i=n.baseTypes,u=i&&i.length,u&&(r=l(t),f=r&&r.length,f&&(e=u-f,e>=0)))?r.every((function(n){return n===i[e++]})):!1}function f(t,i){if(t){var r=typeof t;r==="string"&&(t={message:t})}else t={};return n.extend2(i,t)}var o=FxImpl.NativeError,s=window,i="MsPortalFx.Errors.",h=Object.getPrototypeOf,c="Disposed",r,u,v,y,p,e,w;t.isInstanceOfErrorType=a;t.getErrorOptions=f;r=(function(t){function r(i){var r=f(i,{errorLevel:2}),e,o,c,a,u;t.call(this,r.message);e=l(h(this).constructor);this.type=e[0];this.baseTypes=e;this.code=r.code;this.
data=r.data;this._errorData=r.errorData;this.extension=s.fx.environment.extensionName;this.errorLevel=r.errorLevel;this._sourceErrorLevel=r._sourceErrorLevel;this.handled=r.handled;this.timestamp=r.timestamp||s.fx.getTimestamp();this.source=r.source;o=this.message;this.message=r.message||o;c=this.name;this.name=r.name||c;a=this.stack;this.stack=r.stack||a||n.getCurrentCallStack(!0);u=r.innerErrors;this.innerErrors=u?Array.isArray(u)?u.slice():[u]:[]}return __extends(r,t),r.isBaseOf=function(n){return a(n,this)},Object.defineProperty(r.prototype,"errorData",{get:function(){return this._errorData},enumerable:!0,configurable:!0}),r.TypeName=i+"Error",r})(o);t.Error=r;u=(function(n){function t(t,i){n.call(this,{source:t,errorData:i});this.dataSetName=t}return __extends(t,n),t.TypeName=i+"DataError",t})(r);t.DataError=u;v=(function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"FetchDataError",t})(u);t.FetchDataError=v;y=(function(n){function t(t,i){n.call(this,t,i)}return __extends(
t,n),t.TypeName=i+"UnauthorizedDataError",t})(u);t.UnauthorizedDataError=y;p=(function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"NotFoundDataError",t})(u);t.NotFoundDataError=p;e=(function(n){function t(t){var i=f(t,{errorLevel:0});n.call(this,i)}return __extends(t,n),t.TypeName=i+"CanceledError",t})(r);t.CanceledError=e;t.disposedCanceledError=new e({message:c,stack:c});w=(function(n){function t(t){n.call(this,t)}return __extends(t,n),t.TypeName=i+"DisposedError",t})(r);t.DisposedError=w})(t=n.Errors||(n.Errors={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n){var t;try{t=e(n)}catch(i){t="ERROR serializing message: "+e(i)}return t}function o(n,i,e,o){var l=u.bootMessageSignature,h=u.trustedParentOrigin,a=i.getAttribute("crossorigin"),c=function(i){var c=i.message||i.filename||i.lineno||i.colno,u={error:t(i.error),url:e,crossOriginAttribute:a},s={signature:l,kind:n,data:u};o&&(u.moduleName=o);c?(u.details={fileName:i.filename,
lineNumber:i.lineno,columnNumber:i.colno,message:i.message},r.postMessage(s,h)):f(e,(function(n,t){u.statusCode=n;u.httpMessage=t;r.postMessage(s,h)}))},s;i.addEventListener("error",c);s=function(){i.removeEventListener("load",s);i.removeEventListener("error",c)};i.addEventListener("load",s)}function f(n,t){try{var i=new XMLHttpRequest;i.onerror=function(){t(i.status,i.responseText,i.statusText)};i.onload=function(){t(i.status,i.status===200?"":i.responseText,i.statusText)};i.open("GET",n,!0);i.send()}catch(r){t(undefined,undefined)}}function e(n){if(!n||typeof n!="object")return String(n);var i=[];return Object.getOwnPropertyNames(n).forEach((function(r){var u=n[r],o=typeof u,s,e,f,h;if(o!=="function"){if(o!=="string"&&!MsPortalFx.startsWith(r,"###"))if(u instanceof Error)u=t(u);else{if(Array.isArray(u)&&(e=u,s=e.some((function(n){return n instanceof Error})))){for(u="[",f=0,h=e.length;f<h;f++)f&&(u+=", "),u+=t(e[f]);u+="]"}if(!s)try{u=JSON.stringify(u)}catch(c){u="<cyclic object>"}}i.push(
r+": "+u+"\r\n")}})),i.sort().join("")}var i=window,r=i.parent,u=i.fx.environment;n.getLogFriendlyMessage=t;n.addScriptErrorListener=o;n.getStatusCode=f})(t=n.Diagnostics||(n.Diagnostics={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function ft(n){var t=[],i=0;return g&&(t[i++]=g),n.level===-1&&(t[i++]="[DEBUG]"),t[i++]=new Date(n.timestamp).toString(ut),n.area&&(t[i++]=n.area),typeof n.code=="number"&&(t[i++]=n.code),n.message&&(t[i++]=n.message),t.push.apply(t,n.args),t}function v(n){return{timestamp:d(),level:2,area:"MsPortalFx/Base/Base.Diagnostics",message:n,code:undefined}}function et(){var n=[],u,t,l=6e4,h=1,i=1001,s=function(){n=u(n);t&&(e.clearTimeout(t),t=null)},r=function(i){n.push(i);n.length>tt?s():t||(t=e.setTimeout((function(){s()}),l))};rt&&(r=f);var a=function(n){var t=n.level;if(t===-2){r(n);return}t>=h&&(i--,(i>=0||nt)&&(i===0&&(n=v("Maximum errors exceeded")),r(n)));o[t](n)},y=function(t){return n.filter((function(n){return n.
level>=t}))},p=function(){n=[]},w=function(n){h=n;i=1001},c=function(n){u=n?function(t){try{return n(t)}catch(i){return[]}}:function(n){return n.length>tt&&n.splice(0,2,v("Log entry buffer overflowed")),n}};return c(),{empty:p,flush:s,entries:y,log:a,pushLog:r,init:w,setCallback:c}}function p(n){var t=n||"",i=t.lastIndexOf("/");return i>=0?t.substr(i+1):t}function ot(n){var t=i;return i=n||w,t}function s(n,t){var i=e.console||{},r=f;return[n,t].forEach((function(n){var t=n&&i[n];typeof t=="function"&&(r=function(n){try{var r=ft(n);t.apply(i,r)}catch(u){}})})),r}function st(){var n={};return n[0]=s("log","debug"),n[1]=s("warn"),n[2]=s("error"),n[-1]=!l.debuglog?f:s("debug","log"),n}function ht(n,t){var i=[n,t],r=[2,1];i.forEach((function(n,t){var i=r[t],u=o[i];o[i]=function(t){u(t);n(t)}}))}function ct(n){var t=st(),i=c(n)?-1:n;[-1,0,1,2].forEach((function(n){o[n]=n>=i?t[n]:f}))}function lt(n,t,i,r,u){var f=!0;f=typeof t=="function"?t():!!t;f||(n.debugBreak,n.error(i,r,u))}var k=FxImpl.Diagnostics,
c=n.isNullOrUndefined,d=Date.now,e=window,u=e.fx.environment,g="["+u.extensionName+"] ",l=u.trace||{},o={},f=function(){},rt=u.features.canmodifyextensions==="true",ut={hour:"numeric",minute:"numeric",second:"numeric"},nt=u.isDevelopmentMode||!!l.diagnostics,tt=50,a,r,y,w,i,h,at,it,b;(function(n){n[n.Custom=-2]="Custom";n[n.Debug=-1]="Debug";n[n.Verbose=0]="Verbose";n[n.Warning=1]="Warning";n[n.Error=2]="Error"})(a||(a={}));t.LogEntryLevel=a;r=et();y=f;w=function(n,t,i,u,f,e){var o,s,h;o=u?typeof u=="string"?u:k.getLogFriendlyMessage(u):u+"";s=o;n>=1&&i&&(s=[i,o].join(": "));h={timestamp:d(),level:n,area:t,message:s,code:f,args:e&&e.map((function(n){return n instanceof Error?k.getLogFriendlyMessage(n):n}))};r.log(h)};i=w;t.setWriter=ot;t.setupErrorDetection=ht;h=(function(){function n(n){this.debugBreak=!!l.assert;this._area=n;this._type=p(n)}return n.writeEntry=function(n,t,r){for(var e,f=[],u=3;u<arguments.length;u++)f[u-3]=arguments[u];e=n>=1?p(t):null;i(n,t,e,r,null,f)},n.writeEntry2=
function(n,t,r,u,f){var e=n>=1?p(t):null;i(n,t,e,r,u,f)},n.initialize=function(n,t){var i=!c(n),u=!c(t),e=f;i||u?i&&!u?t=n:!i&&u&&(n=-1):(n=t=-1,e=lt);r.init(t);ct(n);y=e},n.disable=function(){n.initialize(3,3)},n.prototype.verbose=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];i(0,this._area,this._type,n,null,r)},n.prototype.warning=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(1,this._area,this._type,n,t,u)},n.prototype.error=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(2,this._area,this._type,n,t,u)},n.prototype.debug=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];i(-1,this._area,this._type,n,null,r)},n.prototype.custom=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(-2,this._area,this._type,n,t,u)},n.prototype.assert=function(n,t,i,r){y(this,n,t,i,r)},n.prototype.writeEntry=function(n,t,r,u){i(n,this._area,this._type,t,r,u)},n.getEntries=r.entries,
n.clear=r.empty,n.flush=r.flush,n._setBufferFullCallback=r.setCallback,n})();t.Log=h,(function(n){n.pushLogEntry=r.pushLog})(at=t.Internal||(t.Internal={}));nt?h.initialize():h.initialize(2,1);!n.isIFrame||u.trace.nonsecure&&u.isDevelopmentMode||(it={alert:undefined,confirm:!1,prompt:null},b=0,n.forEachKey(it,(function(n,t){b++;e[n]=function(i){var u=v("This call to "+n+" is not allowed in an extension.");return u.args=[b,i],r.log(u),t}})))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function s(n,t,i){i.enumerable=!1}var h=n.Base,r=window,i=Object,u=i.getOwnPropertyDescriptor,f=i.defineProperty,e=$.noop,o=r.fx.environment;t.NotProxied=s;t.ProxyCompatibilityMode=o.javascriptObjectPropertiesAreEnumerable?function(n){var i=n.prototype,t;for(var r in i)t=u(i,r),t&&t.enumerable&&t.get&&(t.enumerable=!1,f(i,r,t))}:e})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(
t){"use strict";function u(t){return t&&n.isObject(t)&&typeof t.readyState=="number"&&typeof t.status=="number"&&typeof t.statusText=="string"}function r(n){n["finally"]=n.always;n["catch"]=n.fail}function f(n){return t.Deferred().resolve(n).promise()}function e(n){return t.Deferred().reject(n).promise()}var i=jQuery;t.isXMLHttpRequestLike=u;t.ajax=i.ajax;t.ajax=function(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];return i.ajax.apply(i,t)};t.selector=i;t.Callbacks=i.Callbacks;t.data=i.data;t.removeData=i.removeData,(function(){var n=i.Deferred;i.Deferred=function(t){var i=n(t),u=i.promise;return r(i),i.promise=function(){var n=u.apply(this,arguments);return r(n),n},i}})();t.Deferred=i.Deferred;t.resolve=f;t.reject=e})(t=n.Helpers||(n.Helpers={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n,t){return typeof t=="number"&&(t={palette:t}),i(n,t||null)}var i=n.getStringMapFunc("type","options");t.newImageData=r})(i=
t.Image||(t.Image={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.White=1]="White";n[n.Black=2]="Black";n[n.Blue=3]="Blue";n[n.Green=4]="Green";n[n.Gray=5]="Gray";n[n.Inherit=99]="Inherit";n[n.Disabled=100]="Disabled"})(n.ImagePalette||(n.ImagePalette={}));var t=n.ImagePalette})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function a(n,t,i){var r=3,u=!1;return(t.deleteCount>0||t.spliceArguments.length>r)&&(t.spliceArguments[1]=t.startIndex,t.spliceArguments[2]=t.deleteCount,s.apply(i,t.spliceArguments),u=!0),t.deleteCount=0,t.startIndex=t.currentIndex,t.spliceArguments.length=r,u}function v(n,t,i,f){var a,s,h,tt,p,v,k,l,d,g,nt;if(n[u])throw new Error("createArraySplices does not work against edits with indexes that have been adjusted by adjustArrayEdits.");if(a=n.length,i){for(p=0,v=new Array(a),h=0;h<a;h++)s=n[h],r(s.moved)&&s.status===o&&(v[p++]=s.value);
v.length=p;tt=f(v)}var y=new Array(a),w=0,b=0,e,it=0;for(h=0;h<a;h++)s=n[h],k=s.status,l=!r(s.moved),k===o?(d=s.index,g=i?l?i[s.moved]:tt[it++]:s.value,e&&(!t||!!e.move===l)&&d===e.start+e.items.length?e.items.push(g):(e={start:d,deleteCount:0,items:[g]},t&&l&&(e.move=l),y[w++]=e),b++):k===c&&(nt=s.index+b,e&&(!t||!!e.move===l)&&nt===e.start+e.items.length?e.deleteCount++:(e={start:nt,deleteCount:1,items:[]},t&&l&&(e.move=l),y[w++]=e),b--);return y.length=w,y}function y(n,t,i,r){for(var u=t?t.split("."):[];n&&u.length;)n=i(n),n&&(n=n[u.shift()]);if(!u.length)return r&&(n=i(n)),n}function p(n,t,i,r){var u=t.subscribe(i,r,"arrayChange");return n&&n.registerForDispose(u),u}function w(n,t,i,r,u,f){var e=n.subscribe(t,(function(n){var t=!r;if(r)if(u)try{t=r(n)}catch(o){f(o)}else t=r(n);t&&(i&&i.call(e,n),u&&u(n),e.dispose())})),o=e.disposeCallback;return e.disposeCallback=function(){f&&f(new MsPortalFx.Errors.CanceledError("fxawait promise disposed"));o.apply(this,arguments)},e}var rt=MsPortalFx.
Base,t=ko.utils,b=ko.observable,i=ko.observableArray,e=ko.isObservable,k=MsPortalFx.uncurryThis,r=MsPortalFx.isUndefined,ut=window,d=jQuery,u="###knockoutArrayEditFixupTokenPropertyName###",s=Function.call,g=Array.prototype,h=k(g.push),nt=undefined,o="added",c="deleted",tt="retained",f="",it={fixedUp:f,fixedUpIndexes:f,createArraySplices:f,mapIntoChanges:f},l=n.getErrorMap(it);t.adjustArrayEdits=function(n,t,i){n[u]&&l.fixedUpIndexes();var f=0,e=n.map((function(n){var u=MsPortalFx.clone(n);switch(n.status){case o:t&&(u.value=r(n.moved)?i(n.value):t[n.moved]);f++;break;case c:u.index+=f;f--;case tt:t&&(u.value=t[n.index])}return u}));return e[u]=u,e};n.quickApplyArrayEdits=function(n,t,i){for(var c=i&&i.spliceFunc||Array.prototype.splice,v=i&&i.inplaceFixup,r={startIndex:0,currentIndex:0,spliceArguments:[n,0,0],deleteCount:0},f=0,l=0,y={added:1,deleted:-1},e=0,p=t.length;e<p;e++){var o=t[e],u=y[o.status]||0,s=o.index;v&&(u<0&&(s+=l),l+=u);r.currentIndex!==s&&(a(n,r,c)&&f++,r.startIndex=r.
currentIndex=s);u>0?(r.currentIndex++,h(r.spliceArguments,o.value)):u<0&&r.deleteCount++}return a(n,r,c)&&f++,f};n.createArraySplicesInternal=v;t.createArraySplices=function(n,t,i,r){return v(n,t,i,r?function(n){return n.map(r)}:nt)};t.applyArraySplices=function(n,t,i){var u=[],r;return t.length&&(t.length>1&&e(n)&&(r=n,n=r.peek(),r.valueWillMutate()),t.forEach((function(t){var r,f,e;r=i?t.items.map(i):t.items;f=[t.start,t.deleteCount];e=n.splice.apply(n,f.concat(r));t.move||u.push.apply(u,e)})),r&&r.valueHasMutated()),u};t.twoWayBinding=function(n,t,i){i=i||function(n){return!r(n)};var f=n(),e=t(),u=!1,o=function(n){if(!u)try{u=!0;this(n)}finally{u=!1}};return i(f)?t(f):i(e)&&n(e),[n.subscribe(o,t),t.subscribe(o,n)]};t.cleanDescendantNodes=function(n){d(n).contents().toArray().forEach((function(n){ko.cleanNode(n)}))};t.wrap=function(n){return e(n)?n:b(n)};t.wrapArray=function(n){return e(n)?n:i(n)};t.unwrapObservablePath=function(n,t,i){return i===void 0&&(i=!0),y(n,t,ko.unwrap,i)};t.peekObservablePath=
function(n,i,r){return r===void 0&&(r=!0),y(n,i,t.peekObservable,r)};n.subscribeArrayEdits=p;ko.subscribable.fn.fxOnce=function(n,t,i){return w(this,n,t,i)};ko.subscribable.fn.fxAwait=function(n,t){var u=this,i,r=Q.promise((function(r,f){i=w(u,n,null,t,r,f)}));return r.subscription=i,r};i.fn.subscribeArrayEdits=function(n,t,i){return p(n,this,t,i)};i.fn.subscribeArrayChanges=function(n,t,i,u){u=u||this;var f=[u,null],e={added:t,deleted:i};return this.subscribeArrayEdits(n,(function(n){for(var i,u,t=0,o=n.length;t<o;t++)i=n[t],r(i.moved)&&(u=e[i.status],u&&(f[1]=i.value,s.apply(u,f)))}))};i.fn.subscribeArrayBulkChanges=function(n,t,i){return i=i||this,this.subscribeArrayEdits(n,(function(n){for(var u,e=[],o=[],s={added:e,deleted:o},f=0,c=n.length;f<c;f++)u=n[f],r(u.moved)&&h(s[u.status],u.value);t.call(i,e,o)}))};i.fn.subscribeArrayAdds=function(n,t,i){return this.subscribeArrayChanges(n,t,null,i)};i.fn.subscribeArrayDeletes=function(n,t,i){return this.subscribeArrayChanges(n,null,t,i)};i.fn.
mapInto=function(n,r,u){var o,f;u||(u=i());var s=this,c=n.createChildLifetime(),h=function(n){return ko.ignoreDependencies((function(){var t=c.createChildLifetime(),i=r(t,n);return{item:i,lifetime:t}}))},e=s.peek().map(h);return u(e.map((function(n){return n.item}))),o=n.createChildLifetime(),f=!1,u.subscribe(o,(function(){f||l.mapIntoChanges()})),s.subscribeArrayEdits(o,(function(n){var i=t.createArraySplices(n,!0,e,h),r=t.applyArraySplices(e,i);try{f=!0;t.applyArraySplices(u,i,(function(n){return n.item}))}finally{f=!1;r.forEach((function(n){n.lifetime.dispose()}))}})),u}})(FxImpl||(FxImpl={})),(function(n){var t;(function(){"use strict";var n=MsPortalFx.Errors.isInstanceOfErrorType,t=Q.makePromise.prototype;t.catchError=function(t,i){return this.catch((function(r){return n(r,t)?i(r):Q.reject(r)}))}})(t=n.QExtensions||(n.QExtensions={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function s(n,t){return new e(n,t)}function r(n,t){var f=Q.defer(),u=f.promise,h=
t.cancelation,c=h(),o,e,s;if(c)f.reject(c);else{if(o=new FxImpl.TriggerableLifetimeManager,h.subscribe(o,(function(n){n&&u.isPending()&&f.reject(n)})),u.finally((function(){o.dispose()})),Q.isPromiseAlike(n))e=Q(n);else try{e=Q(n())}catch(l){e=Q.reject(l)}e.then((function(n){u.isPending()&&f.resolve(n)}),(function(n){u.isPending()&&f.reject(n)}),(function(n){t.canceled||f.notify(n)}))}return s=u.then,u.then=function(n,f,e){if(f)return s.apply(u,arguments);var o=i(n,t),h=i(e,t);return o||h?r(s.call(u,o,f,h),t):u},u}function h(n,t,i){var o=new u,s=function(){o.cancel(new f(i||"cancelOnDisposed"))},c=!n||n.isDisposed&&n.isDisposed(),e=!c&&n.createChildLifetime(),h;return e?e.registerForDispose(s):s(),h=r(t,o),h.finally((function(){e&&e.dispose()}))}function i(n,t){return n&&function(i){if(!t.canceled)return n(i)}}var f=n.Errors.CanceledError,o,u,e;(function(n){n.fulfilled="fulfilled";n.rejected="rejected"})(o=t.PromiseStates||(t.PromiseStates={}));t.wrapWithCancelablePromise=s;t.makeCancelable=r;t.cancelOnDispose=
h;u=(function(){function n(){this.cancelation=ko.observable()}return Object.defineProperty(n.prototype,"canceled",{get:function(){return!!this.cancelation.peek()},enumerable:!0,configurable:!0}),n.prototype.cancel=function(n){var t=this.cancelation,i=t.peek()||n||new f;return t(i),i},n})();t.CancelationToken=u;e=(function(){function n(n,t){if(!n||!t)throw new Error("Argument '"+(n?"cancelationToken":"underlyingPromise")+"' cannot be null or undefined.");this._underlyingPromise=n;this._cancelationToken=t}return n.prototype.then=function(t,r){var u=this._cancelationToken,e=i(t,u),o=i(r,u),f=this._underlyingPromise;return(e||o)&&(f=f.then(e,o)),new n(f,u)},n.prototype.progress=function(t){if(this._underlyingPromise.progress){var u=this._cancelationToken,f=i(t,u),r=this._underlyingPromise;return f&&(r=r.progress(f)),new n(r,u)}return this},n.prototype.finally=function(n){return this.then(n,n)},n.prototype.catch=function(n){return this.then(null,n)},n})()})(i=t.Promises||(t.Promises={}))})(t=n.
Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var h=n.keysLength,c=ko.observable,l=n.uncurryThis,a=Array.prototype,r=l(a.forEach),v=n.shallowCopyFromObject,f=n.disposeDisposable,u="",y={keyNotFound:u,reservedKey:u,noPut:u,noRemove:u,noClear:u},i=FxImpl.getErrorMap(y),e=(function(){function n(){this._modifyMap={};this._dependantMaps=[];this._observable=c({});this._isInModifyBlock=!1;this.latch=this._observable}return n.prototype.put=function(n,t){var i=this;this._validateKey(n);this.modify((function(){i._modifyMap[n]=t;r(i._dependantMaps,(function(i){return i._putNotification(n,t)}))}))},n.prototype.lookup=function(n){return this._modifyMap[n]},n.prototype.modify=function(n){var i=!1,t=[];this._isInModifyBlock||(i=!0,this._isInModifyBlock=!0,this._modifyMap={},v(this._modifyMap,this._observable()),r(this._dependantMaps,(function(n,i){t.push((function(){return n.modify(t[i+1])}))})));try{t.push(n);t[0]()}finally{i&&(this._isInModifyBlock=
!1,this._observable(this._modifyMap))}},n.prototype.clear=function(){var n=this;this.modify((function(){n._modifyMap={};r(n._dependantMaps,(function(t){return t._clearNotification(n)}),n)}))},Object.defineProperty(n.prototype,"count",{get:function(){return h(this._observable())},enumerable:!0,configurable:!0}),n.prototype.remove=function(n){var t=this;this._validateKey(n);n in this._observable()||i.keyNotFound(n);this.modify((function(){delete t._modifyMap[n];r(t._dependantMaps,(function(t){return t._removeNotification(n)}))}))},n.prototype.forEach=function(n){this.some((function(){return n.apply(this,arguments),!1}))},n.prototype.some=function(n,t){var r=this._observable(),f=t||this,i,u;for(i in r)if(u=r[i],n.call(f,u,i))return!0;return!1},n.prototype.every=function(n,t){return!this.some((function(){return!n.apply(this,arguments)}),t)},n.prototype.toArray=function(){var n=[];return this.forEach((function(t){n.push(t)})),n},n.prototype.dispose=function(){},n.prototype.subscribe=function(n,t,i,r){return this.
_observable.subscribe(n,t,i,r)},n.prototype.map=function(n,t){return new o(n,this,t)},n.prototype._addDependantMap=function(n){this._dependantMaps.push(n)},n.prototype._removeDependantMap=function(n){var t=this._dependantMaps.filter((function(t){return t!==n}));t.length!==this._dependantMaps.length&&(this._dependantMaps=t)},n.prototype._putNotification=function(){},n.prototype._removeNotification=function(){},n.prototype._clearNotification=function(){},n.prototype._validateKey=function(n){for(var t in Object.prototype)t===n&&i.reservedKey(n)},n})(),o,s;t.ObservableMap=e;o=(function(n){function t(t,i,r){var u=this;n.call(this);this._map=i;this._transform=r;i._addDependantMap(this);t.registerForDispose(this);this.modify((function(){i.forEach((function(t,i){n.prototype.put.call(u,i,u._transform(t,undefined))}))}))}return __extends(t,n),t.prototype.dispose=function(){this._map._removeDependantMap(this)},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=
function(){i.noClear()},t.prototype._putNotification=function(t,i){var r=this.latch()[t],u=this._transform(i,r);r&&r!==u&&f(r);n.prototype.put.call(this,t,u)},t.prototype._removeNotification=function(t){var i=this.latch()[t];f(i);n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(){this.forEach((function(n){return f(n)}));n.prototype.clear.call(this)},t})(e);t.ObservableMapProjection=o;s=(function(n){function t(t){for(var r=this,u=[],i=1;i<arguments.length;i++)u[i-1]=arguments[i];n.call(this);this._maps=u;t.registerForDispose(this);u.forEach((function(t){t._addDependantMap(r);r.modify((function(){t.forEach((function(t,i){n.prototype.put.call(r,i,t)}))}))}))}return __extends(t,n),t.prototype.dispose=function(){var n=this;r(this._maps,(function(t){return t._removeDependantMap(n)}))},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){n.prototype.put.call(this,t,i)}
,t.prototype._removeNotification=function(t){n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(t){var i=this;this._modifyMap={};r(this._maps,(function(r){r!==t&&r.forEach((function(t,r){n.prototype.put.call(i,r,t)}))}));r(this._dependantMaps,(function(n){n._clearNotification(i)}))},t})(e);t.ObservableMapUnion=s})(i=t.Internal||(t.Internal={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function e(n){for(var i=n.length-1,r=new Array(i),t=0;t<i;t++)r[t]=n[t+1];return r}function o(n){return n.map((function(n){return n&&n()}))}function v(){return u.apply(this,arguments)}function y(){u.apply(this,arguments)}function s(n){var t=n.subscribe;n.subscribe=function(n,i){var r,u;return n&&n.registerForDispose?(arguments.length===2?r=t.call(this,i):(u=e(arguments),r=t.apply(this,u)),n.registerForDispose(r)):r=t.apply(this,arguments),r}}function i(n){return n&&(n.map=p,n.filter=w),n}function p(n,t){if(n&&n.registerForDispose){var r=l.call(this,{mappingWithDisposeCallback:
function(i){var r=n.createChildLifetime();return{mappedValue:t(r,i),dispose:function(){r.dispose()}}}});return n.registerForDispose(r),i(r)}return i(l.apply(this,arguments))}function w(n,t){if(n&&n.registerForDispose){var r=a.call(this,t);return n.registerForDispose(r),i(r)}return i(a.apply(this,arguments))}var r=n.computed,b=MsPortalFx.noop,u=n.computed=function(t,i){var u,s,l;if(t&&t.registerForDispose){if(arguments.length===2)u=r.call(this,i);else{var f=e(arguments),h=f[0],c=n.isSubscribable(h)&&[h]||Array.isArray(h)&&h;c&&(f.shift(),s=f[0],typeof s=="function"?f[0]=function(){return n.ignoreDependencies(s,this,o(c))}:(l=s.read,l&&(s.read=function(){return o(c),n.ignoreDependencies(l,this,null)})));u=r.apply(this,f)}t.registerForDispose(u)}else u=r.apply(this,arguments);return u},t,h,c;n.explicitComputed=v;n.reactor=y;t=n.subscribable.fn;s(t);t.subscribeAndRun=function(){var n=this.subscribe.apply(this,arguments);return n.callback(this()),n};t.fxOnceAndRun=function(n,t,i){i=i||function(
n){return!!n};var r=this.fxOnce(n,t,i);return r.callback(this()),r};t.fxAwaitAndRun=function(n,t){t=t||function(n){return!!n};var i=this.fxAwait(n,t);return i.subscription.callback(this()),i};h=n.extenders.trackArrayChanges;n.extenders.trackArrayChanges=function(n){var t=n.subscribe,i=h.apply(this,arguments),r=n.subscribe;return r!==t&&s(n),i};c=n.hasPrototype;n.hasPrototype=function(t,i){return i===u&&(i=r),c.call(n,t,i)};var f=n.observableArray,l=f.fn.map,a=f.fn.filter;i(f.fn)})(ko||(ko={})),(function(n){"use strict";var t=n.Base.Diagnostics;n.polyfill(Array,{concatUnique:function(t,i){return n.union(this,t,i)},first:function(t,i){var r=n.findIndex(this,t,i);return r<0?null:this[r]},firstIndex:function(t,i){return n.findIndex(this,t,i)},last:function(){if(this.length<1)throw new Error("Cannot get the last element because the array is empty.");return this[this.length-1]},mapMany:function(t){return n.mapMany(this,t)},remove:function(t){return n.remove(this,(function(n){return n===t}))},stableSort:
function(t){return n.stableSort(this,t)},toNumberMap:function(n){var t=[];return this.forEach((function(i){t[n(i)]=i})),t},unique:function(t){return n.unique(this,t)}})})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function t(n,t,i){return i===void 0&&(i=0),{limit:n,format:t,factorSeconds:i}}function ri(t,i){var r,f,e,o,u;if(i>=1){if(r=ut[t],r||(r=ut[t]=[""]),f=r[i],!f){for(e=n.repeat,o=i<5?5:i,u=1;u<o;u++)r[u]=e(t,u);f=r[i]}return f}return""}function ui(n,t,i){i===void 0&&(i="0");var r=n+"",u=t-r.length;return u>0?ri(i,u)+r:r}function et(n,t){return(n+"").substr(-t)}function ot(n,t){return et(f(n,t),t)}function fi(n){return(n-1)%12+1}function o(n){for(var t="",i=0,r=n.length;i<r;i++)t+="\\",t+=n[i];return t}function ei(n,t){var i=t.length,u=i===2?ot:d,e=ft(),c,l,v,s,y,a,w;switch(t[0]){case"y":return c=n.getFullYear(),i===3?f(c,i):i===1?parseInt(d(c,2),10)+"":ot(c,i);case"M":return l=n.getMonth(),i===4?o(e.months[l]):i===3?o(r.monthsAbbr[l]):u(l+1,2);case"d":return i===4?o(e.days[
n.getDay()]):i===3?o(r.daysAbbr[n.getDay()]):u(n.getDate(),2);case"h":v=!0;case"H":return s=n.getHours(),s=v?fi(s):s,u(s,2);case"m":return u(n.getMinutes(),2);case"s":return u(n.getSeconds(),2);case"t":return y=i===2?e.ampm:r.ampmAbbr,y[n.getHours()<12?0:1];case"z":var h=-n.getTimezoneOffset()/60,b=h<0,p="+";return b&&(h=-h,p="-"),a=parseInt(h+"",10),w=(h-a)*60,p+(i===3?f(a,2)+":"+f(w,2):f(a,i));case"/":return e.dateSeparator;case":":return e.timeSeparator}return""}function oi(n,t){return v(ei(n,t))}function st(n,t){var o=t?t.getTime():Date.now(),f=o-n.getTime(),i,r,e,u;for(f/=1e3,r=0,e=rt.length;r<e;r++)if(i=rt[r],f<i.limit)break;return u=i.format,i.factorSeconds&&(u=u.format(Math.round(f/i.factorSeconds))),u}function lt(n){n=n||0;var i=this.getDate(),r=this.getDay(),t=n-r;return t>0&&(t-=7),new Date(this.getFullYear(),this.getMonth(),i+t)}function si(n){var t=lt.call(n,r.firstDayOfWeek);return y[0].format=function(t){return st(t,n)},y[1].limit=(n.getTime()-t.getTime())/1e3,y}function hi(
n,t){var u,f,i,e,r;for(t===void 0&&(t=new Date),u=si(t),f=(t.getTime()-n.getTime())/1e3,i=0,e=u.length;i<e;i++)if(r=u[i],f<r.limit&&r.limit>0)break;return r.format(n)}function yt(){return function(){var u=this,n,t,i;return arguments.length?(n=arguments[0],typeof n=="string"?(n=r.standard[n]||n,n=n.replace(/'([^']*)'/g,vt),t=function(n){return oi(u,n)},v(v(n).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,t).replace(/\\(?!\\)/g,""))):(i=s.create(n),i.format(this))):kt(this,arguments)}}var wt=n.Resources.Strings.DatePolyfill,s=FxImpl.Intl.DateTimeFormat,p=n.uncurryThis,bt=Array.prototype,h=p(bt.map),kt=p(Date.prototype.toString),dt=Date.parse,e=wt,ci=new n.Base.Diagnostics.Log("MsPortalFx.Polyfill"),gt=e.Days,ni=e.DaysAbbr,ti=e.Months,ii=e.MonthsAbbr,i=e.AgoStrings,tt=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],it=["january","february","march","april","may","june","july","august","september","october","november","december"],
r={days:h(tt,(function(n){return gt[n]})),daysAbbr:h(tt,(function(n){return ni[n]})),months:h(it,(function(n){return ti[n]})),monthsAbbr:h(it,(function(n){return ii[n]})),ampm:["AM","PM"],ampmAbbr:[],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"",G:"",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},firstDayOfWeek:0},c=60,l=c*60,u=l*24,w=u*7,a=u*365,b=a/12,rt=[t(c,i.lessThanAMinute),t(c*1.5,i.aMinute),t(l,i.minutes,c),t(l*1.5,i.anHour),t(u,i.hours,l),t(u*1.5,i.aDay),t(w,i.days,u),t(w*1.5,i.aWeek),t(b,i.weeks,w),t(b*1.5,i.aMonth),t(a,i.months,b),t(a*1.5,i.aYear),t(Number.POSITIVE_INFINITY,i.years,a),],ut={},ft=function(){return r},k,f,d,v,ht,ct,y,at,g,vt,pt,nt;n.getLocaleValues=Date.getLocaleValues=ft;k=function(n){r=n||r;r.ampmAbbr=[r.
ampm[0][0]||"",r.ampm[1][0]||""];var t=r.standard;t.f=t.D+" "+t.t;t.g=t.d+" "+t.t;t.G=t.d+" "+t.T};n.setLocaleValues=Date.setLocaleValues=k;f=ui;d=et;v=n.reverse;y=[{limit:u,format:undefined},{limit:undefined,format:function(n){var t=ht||(ht=s.create({weekday:"long"}).format);return t(n)}},{limit:Number.POSITIVE_INFINITY,format:function(n){var t=ct||(ct=s.create(s.shortDatePattern).format);return t(n)}}];at={difference:st,timestamp:hi};g=function(n,t){var i=at[n||"difference"];if(i)return i(this,t||new Date)};n.dateToRelativeString=g;vt=p(o);n.getDateToStringFunc=yt;pt=yt(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g);n.polyfill(Date,{toRelativeString:g,toString:pt,getFirstDayOfWeek:lt},!0);nt=function(t){return(typeof t!="string"&&(t=t+""),n.startsWith(t,"/Date("))?parseInt(t.substr(6),10):dt.call(this,t)};n.dateParse=nt;Date.parse=nt;k(r)})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function y(n){var t=a(n);return t[e]=!0,t}function p(n){return n&&
n.hasOwnProperty(e)}function w(n){return r(n)}function a(n,r,e){var w=u(n),y=w?n.peek():n,v={},b,d,k,p;if(l&&(b=r||new WeakMap,d=w||Array.isArray(n)||i(n)),d){if(k=b.get(n),k===s)return c("toSerializableObjectImpl detects a cycle. root: "+t.getObjectDescriptor(n,!1),n)||h;if(k!==undefined)return k;b.set(n,s)}return p=e||function(n){return a(n,b,p)},w&&(v.t=1),Array.isArray(y)?w?(n.splice&&(v.t=2),v.v=p(y)):v.v=y.map(p):u(y)?v.v=p(y):i(y)?w?v.v=p(y):(v.v={},o(y).forEach((function(n){f(n)&&(v.v[n]=p(y[n]))}))):y instanceof Date?(v.d=!0,v.v=y.valueOf()):v.v=y,d&&b.set(n,v),v}function r(n){var u,t=n.v,s=n.t,c=!1,e;return t===h.v&&(t=undefined),s&&i(t)&&t.hasOwnProperty("v")&&(u=r(t),c=!0),c||(Array.isArray(t)?u=t.map(r):i(t)?(u={},o(t).forEach((function(n){f(n)&&(u[n]=r(t[n]))}))):u=n.d?new Date(t):t),e=u,s===1?e=ko.observable(u):s===2&&(e=ko.observableArray(u)),e}var t=MsPortalFx,u=ko.isObservable,f=t.isSerializableProperty,i=t.isObject,e="#fxSerialized#",v=new t.Base.Diagnostics.Log("FxImpl.Serialization"),
o=Object.getOwnPropertyNames,l;n.toSerializableObject=y;n.isSerializedObject=p;n.fromSerializableObject=w;var s={},h={v:t.generateNonSerializableProperty("object_cycle_detected")},c=function(n){v.error(n+"at callstack:"+t.getCurrentCallStack(!0))},b;b=c;l=!!window.WeakMap})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function i(t,i){if(n.multiCloudEnabled&&!t)throw new Error(h+(i||"")+c);}function l(t){return n.multiCloudEnabled?(i(t),t):w}function a(t,r){return i(t),i(r),!n.multiCloudEnabled||t===r||t.toLowerCase()===r.toLowerCase()}function v(n){return new e.QueryStringBuilder(n).getParameter(b)}function y(){return!!n.selfCloudName||f.isFeatureEnabled("multicloud")}function p(f,e){var h,s;if(e===void 0&&(e={}),h=f.name,!h)throw new Error("Extension name must not be empty");return!n.multiCloudEnabled||h===t.Shell?h:(s=f.cloudName,u!==h.toLowerCase()||e.forceCloudName||(s=r),e.addSelfCloudNameIfMissing&&(s=s||n.selfCloudName),i(s,"extension name = "+h),s=l(s),s+o+h)}
function k(i,f){if(f===void 0&&(f={}),!i)throw new Error("Window id must not be empty");if(!n.multiCloudEnabled||i===t.Shell)return{name:i,cloudName:undefined};if(u===i.toLowerCase())return{cloudName:r,name:i};var e=i.split(o),s=e[e.length-2];if(f.addSelfCloudNameIfMissing&&(s=s||n.selfCloudName),!s)throw new Error(h+"windowId = "+i+c);return{cloudName:s,name:e[e.length-1]}}function d(t,i){var f=t.name.toLowerCase(),e=i.name.toLowerCase(),r=f===e;return r&&n.multiCloudEnabled&&f!==u&&(r=a(t.cloudName,i.cloudName)),r}function g(){return p({name:s,cloudName:r})}function nt(){if(n.multiCloudEnabled)return r}var f=MsPortalFx,e=f.Base,t=e.Constants,o="/",w=t.DefaultCloudName,s=t.ExtensionNames.Hubs,r=t.HubsCloudName,h="Missing cloud name; ",b="cloudname",c="",u;n.selfCloudName=v(window.location.search);n.multiCloudEnabled=y();u=s.toLowerCase();n.validateCloudName=i;n.normalizeCloudName=l;n.isEqualCloudName=a;n.generateSelfCloudName=v;n.generateMultiCloudEnabled=y;n.getWindowId=p;n.getDescriptor=
k;n.isEqualDescriptor=d;n.getHubsWindowId=g;n.getHubsCloudName=nt})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){"use strict";function t(n){if(!n)throw new Error(u);}function f(){return n.Extension.multiCloudEnabled?new r:new i}var u="Missing cloud name.",i,r;n.getCloudMap=f;i=(function(){function n(){}return n.prototype.get=function(){return this._value},n.prototype.set=function(n,t){this._value=t},n.prototype.getOrSet=function(n,t){return this._value||(this._value=t),this._value},n.prototype.all=function(){return[this._value]},n.prototype.dispose=function(){this._value&&typeof this._value.dispose=="function"&&this._value.dispose()},n})();r=(function(){function n(){this._map={}}return n.prototype.get=function(n){return t(n),this._map[n.toLowerCase()]},n.prototype.getOrSet=function(n,i){t(n);var u=n.toLowerCase(),r=this._map[u];return r===undefined&&(this._map[u]=r=i),r},n.prototype.set=function(n,i){t(n);this._map[n.toLowerCase()]=i},n.prototype.all=function(){var n=
[];return MsPortalFx.forEachKey(this._map,(function(t,i){n.push(i)})),n},n.prototype.dispose=function(){MsPortalFx.forEachKey(this._map,(function(n,t){t&&typeof t.dispose=="function"&&t.dispose()}))},n})()})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function o(n,i){MsPortalFx.extendArrayIntoMap(n,i,null,(function(n){return t+n}))}function s(n,i){MsPortalFx.extendStringMapIntoMap(n,i,(function(n){return t+n}))}var f,h;(function(n){n.inputBindingKey="_msPortalFxCloudName";n.allClouds="_msPortalFxAllClouds"})(f=n.CloudName||(n.CloudName={}));var t="MsPortalFx.Internal.Constants.RpcMethods.",r=t+"AzureStorage.",i=t+"AzureResourceManager.DeploymentManager.",e="Hubs."+t,u=t+"ParameterCollection.ShellProvisioner.";(function(n){n.hubsGetResourceGroupsFromSubscription=e+"getResourceGroupsFromSubscription";n.getSasUriForQueue=r+"getSasUriForQueue";n.getHmacSha256=r+"getHmacSha256";n.azureResourceManagerDeployTemplate=i+"deployTemplate";n.azureResourceManagerPollForDeployment=i+"pollForDeployment";
n.validateArmTemplate=i+"validateTemplate";n.getProvisioningRequest=u+"fulfillProvisioningRequest";n.initiateProvisioningRequest=u+"initiateProvisioningRequest";o(n,["brokerExtensionService","forwardEvent","getUserInfo","getSharedSettings","entryPointDispose","entryPointGetDefinition","entryPointGetBladeDefinition","entryPointGetControlDefinition","entryPointGetPartDefinition","entryPointInitialize","hasPermission","mapAssetIdToResourceId","mapResourceIdToAssetId","mapAssetIdToDynamicSelectionAndIcon","mapResourceIdToDynamicSelectionAndIcon","getAssetTypeInformation","getResourceTypeAssetTypeInformation","getResourceAssetInformation","getResource","notifyExtensionStatus","ping","provideExtensionService","updateSubscriptionInfo","updateTenantInfo","getRegisteredResourceProviderInfo","viewModels","getClientNotifications","signalResourcesChanged","getSubscriptionInfo","getAllSubscriptions","getSelectedSubscriptions","getLocationDisplayNames","submitObjectCacheTelemetry","networkTelemetry",
"addClientNotification","addClientNotifications","showNps","canShowNps","getArmEndpoint","getSettings","logFeatureAdoptionTelemetry","getExtensionGalleryServiceViewModel","getLocalGalleryPackagesEndpoints","getLocationsForCreate","getProvisioningOperation","registerLocalGalleryPackagesEndpoint","submitProvisionerTelemetry","pinParts"]);s(n,{getAuthToken:"getAuthenticationToken",registration:"register",shellReadUserSettings:"Shell.readUserSettings",shellWriteUserSettings:"Shell.writeUserSettings"})})(h=n.RpcMethods||(n.RpcMethods={}))})(t=n.Constants||(n.Constants={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){(function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"})(n.Orientation||(n.Orientation={}));var t=n.Orientation})(t=n.Widgets||(n.Widgets={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function l(n,t){return{type:1,data:n,options:t?c:undefined}}var t=MsPortalFx.getStringMapFunc,u,f,i,e,o,s,h,r,c;n.createMenuBladeConfig=t();u=["htmlTemplate",
"parameterProvider","details","partSize","htmlTemplateInline","partState",];n.createTemplateBladeConfig4=t(u);n.createCommandExternalReference=t("commandType","extension");n.createDefaultBladeAction=t("partName","actionName");n.createHtmlTemplateDefinition=t("file","content");n.createAssetIdSource=t("sourceType","property","providerKey");n.createPermissionBase=t("permissionType");n.createPartSharedStateDefinition=t("property","key");n.createPartStateDefinition=t("inputIdentityProperties","sharedProperties");n.createInputDefinition=t("name","type","optional","isAssetId");n.createNotificationMessage=t("type","status","subStatus","title","message","assetType");n.createServerEvent=t("source","operation");f=["title","description","category","thumbnail","thumbnailStretch","pivotKind","autoConfigSelectablePath","feature",];n.createPartGalleryInfoDefinition2=t(f);n.createPermissionSet=t("requirement","permissions","permissionType");n.createPermission=t("extensionName","assetType","assetId","action",
"permissionType");n.createReference=t("referenceType","property","part","bladeCommand","partCommand","constantValue");n.createToolbarDefinition=t("source");n.createActionBarDefinition=t("name","actionBarKind","source","viewModel","bindings");i=["name","inputs","optionalInputs","templateKeyInputs","outputs","commandGroup","viewModelName","_internal_viewModelExtensionName","lenses","commandGroupReference","viewModelInputs","bindings","width","locked","editScopeType","assetType","assetIdInputProperty","pinnedPart","pinnable","initialDisplayState","style","actionBar","discardEditsOnSelectionChange","orientation","permissions","pairMasterInfo","toolbar","templateBlade","waitForInputsSet","menuBlade","attributes",];n.createBladeDefinition2=t(i);i.splice(25,1);n.createBladeDefinition3=t(i);n.createCommandDefinition=t("name","text","viewModel","bindings","details","assetType","assetIdInputProperty","permissions","commandKind","reference");n.createCommandGroupDefinition=t("name","commands");n.createCommandGroupReference=
t("name","commands");n.createCommandReference=t("name","bindings");n.createGalleryServiceDefinition=t("serviceViewModel");n.createDashboardProviderDefinition=t("viewModel");n.createLensDefinition=t("name","title","partInstances","isSummary");e=["viewModel","partKind","canUseOldInputVersions","inputs","bindings","htmlTemplate","details","initialSize","initialWidth","initialHeight","supportedSizes","resizeMode","commandGroup","commandGroupReference","editScopeType","viewStateProperties","partState","assetType","assetIdInputProperty","permissions","options","htmlTemplateInline",];n.createPartDefinition5=t(e);o=["partTypeName","extension","version","bindings","initialSize","initialWidth","initialHeight","assetType","extenderViewModel"];n.createPartReferenceDefinition3=t(o);n.createPartInstanceDefinition=t("name","reference","inline","parameterProvider","options","redirectMode");s=["name","inputDefinitions","reference","parameterProvider","viewModel","partKind","canUseOldInputVersions","inputs",
"bindings","htmlTemplate","details","initialSize","initialWidth","initialHeight","supportedSizes","resizeMode","commandGroup","commandGroupReference","editScopeType","viewStateProperties","partState","assetType","assetIdInputProperty","permissions","options","htmlTemplateInline",];n.createPartTypeDefinition6=t(s);h=["partsCatalog","commandsCatalog","startBoardParts","commandGroups","htmlTemplates","styleSheets","galleryService","dashboardProvider","name","version","hash","schemaVersion","sdkVersion","buildDescription","isPreview",];n.createDefinition3=t(h);r=["blade","bladeExtension","isMultiple","invocationInputArguments","selectablePath","selectableBindings","additionalInputArguments","outputArguments","parameterCollector","name","asSubJourney","pairInfo","openInContextPane","persistentContextPane",];n.createDetailsDefinition=t(r);r.splice(11,1);n.createDetailsDefinition2=t(r);n.createInputBinding=t("property","valuesFrom","optional","isIdentityInput");c={isLogo:!0};n.createSvgImage=
l})(t=n.DefinitionBuilder||(n.DefinitionBuilder={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t){return f.multiCloudEnabled&&(t[r]=n),t}function e(n){return u(i.allClouds,n||{})}function o(n){return n&&n[r]}function s(){}var f=n.Extension,i=n.Constants.CloudName,r=i.inputBindingKey;t.addToModel=u;t.addAllCloudsToModel=e;t.readFromInputs=o;t.preventCallingFromHubsAndShell=s})(i=t.CloudName||(t.CloudName={}))})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function it(n){var t,u,r;y++;y<200?i.error.apply(i,arguments):(t=((n&&n.message||n)+"").substr(0,50),u=(e[t]=e[t]||0)%1e3,u===0&&(r=[].slice.call(arguments),r[1]=4,r.push("NoisyCount:"+e[t]),i.error.apply(i,r)),e[t]++)}function ut(n){return new t.Log(n.normalize(undefined))}function ft(t,i){var r,f=arguments.length>1&&arguments[arguments.length-1],e=typeof f=="object"&&f,o=p?1:0,u,s;return t&&typeof t!="string"?
(r=new v,n.extend(r,t),r._sourceErrorLevel=o):(u={message:t,_sourceErrorLevel:o},typeof i=="string"&&(u.stack=i),r=new v(u)),e&&(s=n.extend({},r.data),r.data=n.extend(s,e)),r}function et(n){var i=new Error(n.reason),t=n.callStack;return i.stack=t.substring(0,l.length)===l?t:l+t,i}function w(){var n=Q.getUnhandledRejections();s?n.forEach((function(n){var t=s.get(n);t===!1?(k(n.inspect().reason),s.set(n,!0)):t!==!0&&s.set(n,!1)})):(n.forEach((function(n){k(n.inspect().reason)})),Q.resetUnhandledRejections());o=r.setTimeout(w,a)}function b(n,t){var i=2,e=n&&n.errorLevel,r,f;return u(e)?t&&(r=t(n),u(r)||(i=r)):i=e,f=n&&n._sourceErrorLevel,u(f)||(i=f),i}function k(n){var t=b(n,(function(n){var t=n&&n.stack;if(!t)return 0})),r=t===2?c:t===1?i.warning:null;r&&r.call(i,n,1)}function d(n){n===void 0&&(n=rt);var t=a;return u(n)||(a=n),g(),w(),t}function g(){typeof o=="number"&&(r.clearTimeout(o),o=null)}var nt=n.Base,tt=FxImpl.Diagnostics,u=n.isNullOrUndefined,h=n.Errors,v=h.Error,r=window,f=r.fx.environment,
i=new t.Log("MsPortalFx.Base.Diagnostics.ErrorReporter"),y=0,e={},c=it,p=n.isDiagnosticsEnabled,rt=f.isDevelopmentMode?1e3:5e3,l=n.generateNonSerializableProperty("_RPC_Exception_")+"\n",a,o,s=r.WeakMap&&new WeakMap,ot;p&&(Q.longStackSupport=!0,Error.stackTraceLimit=100);t.createLog=ut;t.createIgnoreUnhandledRejectionError=ft;t.createRpcException=et;t.setPromiseErrorCapturePeriod=d;t.clearPromiseErrorCaptureTimeout=g;d(),(function(n){function s(n){t=c;u=n}function e(r){var e={message:r.message,fileName:r.filename,lineNumber:r.lineno,columnNumber:r.colno},f=r.error,o,s;if(f?(h.isInstanceOfErrorType(f,h.Error)?(s=b(f),s===2?o=!0:s===1&&i.warning(f,2,e)):f.stack&&/http/.test(f.stack)&&(o=!0),o&&(t(f,2,e),!n.lastError||n.lastError===f||t(n.lastError,3,e))):!n.lastError||t(n.lastError,3,e),n.lastError=null,u)try{u()}catch(c){}}var o=f.extensionName===nt.Constants.Shell,t=function(n,t,i){if(o)c(n,t,i);else{var u={signature:f.bootMessageSignature,kind:4,data:{error:tt.getLogFriendlyMessage(n),
details:i}};r.parent.postMessage(u,f.trustedParentOrigin)}},u;n.initialize=s;n.handleError=e;r.addEventListener("error",e)})(ot=t.ErrorReporter||(t.ErrorReporter={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function s(n,r){var u,f;for(i=null,u=t.length-1;u>=0;u--)if(f=!t[u].hasValue(n),t[u].setContextValue(n,r),!f)break}function h(n){var e,f,u,o;if(i=null,e=r(t),e)for(f=e.getValue(n),u=t.length-1;u>=0;u--){if(o=t[u].getValue(n),f&&o!==f||t[u].resetContextValue(n),t[u].hasValue(n))break;f=o}}function c(n,t){return function(){var i=arguments[0];try{return u.apply(n,arguments),i()}finally{u.apply(t,arguments)}}}function l(n){for(var r,i=t.length-1;i>=0;i--)if(r=t[i].getValue(n),r)return r}function a(){for(var i,r={},u=!1,n=0,f=t.length;n<f;n++)i=t[n].getValues(),i&&MsPortalFx.forEachKey(i,(function(n,t){t&&(u=!0,r[n]=t)}));return u?r:e}function v(){return i||(i=new f(r(t)))}function y(n){i=null;
t.push(new f(n))}function p(){i=null;t.length>1&&t.pop()}function r(n){if(n&&n.length)return n.last()}var e=undefined,o,u;(function(n){n[n.Part=0]="Part";n[n.Blade=1]="Blade";n[n.CompositionItem=2]="CompositionItem"})(n.ContextType||(n.ContextType={}));o=n.ContextType;n.setContextValue=s;n.resetContextValue=h;u=Function.call;n.provideContext=c(s,h);n.getCurrentValue=l;n.getCurrentValues=a;n.getState=v;n.usingState=c(y,p);var f=(function(){function n(n){var u,i,t,f,r;if(this._providers=[],n&&n._providers)for(u=this._providers,i=n._providers,t=0,f=i.length;t<f;t++)r=i[t],u[t]=r?r.slice():[]}return n.prototype.setContextValue=function(n,t){(this._providers[n]||(this._providers[n]=[])).push(t)},n.prototype.resetContextValue=function(n){var t=this._providers[n];t&&t.length&&t.pop()},n.prototype.getValue=function(n){var t=this._providers[n];return t&&r(t)},n.prototype.getValues=function(){for(var t,i={},u=!1,f=this._providers,n=0,s=f.length;n<s;n++)t=r(f[n]),t&&(u=!0,i[o[n]]=t);return u?i:e},
n.prototype.hasValue=function(n){var t=this._providers[n];return!!(t&&t.length)},n})(),i=null,t=[new f]})(t=n.TelemetryContext||(n.TelemetryContext={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){return function(){return f(n)}}var r=FxImpl.TelemetryContext,u=r.ContextType,f=r.getCurrentValue,i=u;n.getPartContext=t(i.Part);n.getBladeContext=t(i.Blade);n.getJourneyContext=function(){return{id:""}};n.getCompositionItemContext=t(i.CompositionItem)})(t=n.Context||(n.Context={}))})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n){return function(t){var i,f,r,u;return t&&(f=t[s],f||(r=FxImpl.Po.getOrCreateMetadata(t),u=r,r&&(i=u[n],i||(i=u[n]={})))),i}}function u(n){return function(t,i,r){var u=n(t),f;if(u)return f=arguments.length>2,f?u[i]=r:u[i]}}
function c(t){var i=FxImpl.Po.getOrCreateMetadata(t);i&&(i.isNonSerializableCallStack=h&&n.getCurrentCallStack()||"(Unknown callstack)")}var f=window,i=f.fx.environment,e=i.trace,o=n.generateNonSerializableProperty,s=o("poSpecialType"),h=i.isDevelopmentMode||e.diagnostics;t.dataContainer=r("client");t.disposableDataContainer=r("clientDisposables");t.data=u(t.dataContainer);t.disposableData=u(t.disposableDataContainer);t.markNonSerializable=c})(i=t.ProxiedObservables||(t.ProxiedObservables={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function yr(n){try{return o(n)?n:hf(n)}catch(t){return t}}function d(n,t){var i=st(n),r=i?i.id+":":"";try{return r+nf(n,t)}catch(u){return r+"Failed to get descriptor:"+u}}function yt(n){return typeof n=="string"&&n[0]!==i?"removed:"+n.length:n}function pr(n){var o,h,t,s,e,f,l;if(!n)return n;if(n.length===1)return[yt(n[0])];for(o=[],h=n.length>50?50:n.length,t=0;t<h;t+=2){var c=n[t],r=n[t+1],a=c.split(
i),v=parseInt(a[1]),u=void 0;switch(v){case 11:for(s=r.length,u=new Array(s),e=0;e<s;e++)u[e]=yt(r[e]);break;case 3:for(u=[],f=0,l=r.length;f<l;f++)u.push(f%2==0?r[f]:yt(r[f]));break;default:u=yt(r)}o[t]=c;o[t+1]=u}return o}function ne(n){return wr.some((function(t){return t.test(n)}))}function br(t,i,r){var f="Po-"+t+": ",u;if(i&&(f+=i),f+="\r\n"+(o(r)?r:yr(r)),r&&(u=typeof r=="string"?r:r.id||r.poId,u)){if(u=u.replace(yf,pf),!rt&&t===301&&ne(u))return;f+="\r\nThe error occured in below callstack:\r\n"+u}rt&&n.Rpc.messageContext&&(f+="\r\n"+n.Rpc.messageContext.callStack);du.error(f,t)}function ft(n,t,i,r){br(n,t,i,r)}function f(n,t){br(n,"Please open a bug to Framework.",t)}function g(n,t){f(n,"Unsupported: "+t)}function kr(n,t,i){t.raiseRemoteException("Po-"+n+": "+yr(i))}function et(n,t,i){t[i]=n.slice(0)}function dr(n,t,i){var r={id:n};return u.set(t,r),w(t)&&et(t,r,i.aId),i.isPrimary&&i.nc++===df&&lt((function(){pu(i,!0)})),r}function te(n){for(var r,i={},t=0,u=n.length;t<u;t++)r=n[t],
i[r]=!0;return i}function ie(n,t){for(var r,u=ii(t),i=0,f=u.length;i<f;i++)r=u[i],n[r]=t[r];return n}function re(n){for(var t in n)return!1;return!0}function ei(n){return typeof n.reject=="function"&&n.promise||typeof n.then=="function"}function ue(n){return n.charCodeAt(0)===95&&!(n.charCodeAt(1)===109&&n.charCodeAt(2)===115&&n.charCodeAt(3)===80&&n.charCodeAt(4)===111&&n.charCodeAt(5)===114&&n.charCodeAt(6)===116&&n.charCodeAt(7)===97&&n.charCodeAt(8)===108&&n.charCodeAt(9)===70&&n.charCodeAt(10)===120)}function b(n,t){var c,f,e,i,l,r,s,h;if(!o(n)&&u.get(n)&&!t.get(n)){t.set(n,!0);c=typeof n;switch(c){case"object":if(w(n))for(i=0;i<n.length;i++)b(n[i],t);else if(ei(n))f=tt(n),f.getState()!==0&&b(f.getValue(),t);else if(!(n instanceof Date)&&!(n instanceof RegExp)){for(e=ii(n),i=0,l=e.length;i<l;i++)(r=e[i],ue(r))||ui&&(s=cr(n,r),s.get||s.set)||b(n[r],t);h=sr(n);h!==hr&&b(h,t)}break;case"function":ur(n)&&b(n.peek(),t)}}}function fe(n,t){return n.map[t]||n.pending[t]}function gr(n,t){t.
length>300&&(n.freedIds=t.slice(100,300))}function oi(n,t){return n.freedIds.indexOf(t)!==-1}function h(n,t,i,r){var u=n.map[t]||n.pending[t];if(u)return u;if(oi(n,t)){fi(207,{id:t,code:i});return}f(i,{id:t,disposed:n.disposed,v:d(r)})}function nt(n,t){var i=u.get(n);return i||f(t,d(n)),i}function si(n,t){var i=u.get(n);return i?i[t]:n}function ee(n,t,i){var r=h(n,t,i);return r?u.get(r).disallowRemoteMutations:!1}function hi(n,t,i){for(var r,e,f=t.id,u=0,o=s.length;u<o;u++)r=s[u],e=r.map[f]||r.pending[f],e===n&&i(r)}function ci(n,t,i,r,f){var e=n.gFuncCallId(),d=[],l=h(n,t,222),a,o,v,s,g,y,nt,w,b,c;if(l){for(a=u.get(l).disallowRemoteMutations,o=[l],i===k?v=lr:(v=p(n,i,a,!0),o.push(i)),s=0,g=r.length;s<g;s++)y=r[s],d.push(p(n,y,a,!0)),o.push(y);nt={cid:e,fid:t,t:v,a:d};w=tt(f);n.funcCalls[e]={promise:w,objs:o};n.onFunction(nt);b=w.promise;c=!1;b.hold=function(){return c=!0,{dispose:function(){delete n.roots[e];c=!1}}};b.then((function(t){lt((function(){c&&(n.roots[e]=t)}))}))}}function iu()
{var i,n,r,t;for(pt=!0;v.length;)for(i=v,v=[],n=0,r=i.length;n<r;n++)t=i[n],t.length===3?hi.apply(null,t):ci.apply(null,t);pt=!1}function bt(n){wt=oe[n];ru=se[n]}function kt(n,t){var i=n[t];return i===undefined?0:i}function li(n,t){var i=kt(n,t);return n[t]=++i,i}function uu(n,t,i,r){i.desiredValue=r;try{t(r)}finally{i.desiredValue=undefined}}function he(n,t,i,r){var c=fr(t),u=t.peek(),h=si(u,n.aId),o,l,f,s,a;if(ir(h,u)||(u.length=0,h.length&&rf.apply(u,h)),c||t.valueWillMutate(),i)for(f=0,s=i.length;f<s;f++){o=i[f];switch(o.k){case 0:l=e(n,o.v);u.splice(o.i,0,l);break;case 1:u.splice(o.i,1)}}else for(u.splice(0,u.length),f=0,s=r.length;f<s;f++)u.push(e(n,r[f]));a=nt(u,240);et(u,a,n.aId);c?t(u):t.valueHasMutated()}function ce(n,t,i,r,u,f,o){var s=e(n,t.o),h=u+1;if(f===h||i.peek()===s)try{uu(n,i,r,s)}finally{kt(r,o)===u&&(r[o]=f)}else return n.isPrimary?li(r,o):uu(n,i,r,s),d(s)}function le(n,t,i){var o=[],f,s,r,u;if(t)for(r=0,u=t.length;r<u;r++)f=t[r],s=f.v,o.push({k:f.k,i:f.i,v:s?d(e(n,
s)):null});else if(i)for(r=0,u=i.length;r<u;r++)o.push(d(e(n,i[r])));return o}function fu(n,t){var o=t.o,u=t.a,s=t.fa,f,i,r;if(o)e(n,o);else if(u)for(i=0,r=u.length;i<r;i++)f=u[i],f.k===0&&e(n,f.v);else for(i=0,r=s.length;i<r;i++)e(n,s[i])}function ae(n,t,i,r,u,f,e){var h=n.sId,o=r[h],s=t.sn,c=t.a,l=t.fa,a=s===o;if(f!==u+1&&a)return r[h]=o?o+1:1,r[e]=undefined,le(n,c,l);if(!a){if(o&&(s===undefined||s<o))return;r[h]=s;r[e]=undefined}he(n,i,c,l);kt(r,e)===u&&(r[e]=f)}function eu(n,t,i,r){var u=t.id;wt(n,t,(function(n){var c=n.cnId,l=li(t,c),f,s,e,a,o,v,h;if(n.receivedChanges[u]!==l){if(f={id:u,cn:l},t[n.sId]&&t[c]===1){for(s=[],e=0,a=r.length;e<a;e++)s.push(p(n,r[e],!1));f.fa=s}else i=si(i,n.aId),o=sf(i,r,{sparse:!0}),o=of(o),v=o.map((function(i){switch(i.status){case"added":return{k:0,i:i.index,v:p(n,i.value,t.disallowRemoteMutations,!0)};case"deleted":return{k:1,i:i.index};default:g(106,i.status)}})),f.a=v;h=t[n.sId];h&&(f.sn=h);n.onChange(f);et(r,nt(r,235),n.aId)}}))}function ou(n,t,i,r){
var u=i===r,f=w(i);if(u&&f){eu(n,t,i,r);return}wt(n,t,(function(i){var u=li(t,i.cnId);if(i.receivedChanges[t.id]===u)if(fr(n)&&r!==t.desiredValue)u=++t[i.cnId];else return;i.onChange({id:t.id,o:p(i,r,t.disallowRemoteMutations,!0),cn:u})}))}function ot(n,t){var i=n._poBuffer;n._poBuffer=t;i&&i()}function ve(n){var t=n.deferred,i=n.promise;t&&!i[at]&&ri(i,at,{value:t,enumerable:!1})}function vi(n,t,i,r){wt(n,t,(function(n){var u=n.pId;if(!t[u]&&!n.disposed)n.onPromise({id:t.id,s:i,v:p(n,r,t.disallowRemoteMutations,!0)});t[u]&&t[u]--}))}function su(n){var t=vt.get(n.promise),i;t||(t={},i=function(n){t.value=n},n.promise.then(i,i),vt.set(n.promise,t))}function hu(n,t){n.promise.progress((function(n){var i=nt(t,236);vi(t,i,0,n)}));n.always((function(i){arguments.length===0&&(i=n.getValue());var r=n.getState(),u=nt(t,237);switch(r){case 1:vi(t,u,1,i);break;case 2:vi(t,u,2,i);break;default:g(100,r)}}))}function cu(n,t,i,r,u){switch(t){case 1:n.deferred.resolve(i);break;case 2:n.deferred.reject(i);break
case 0:u||hu(n,r);break;default:g(101,t)}}function tt(n){var t;return typeof n.then=="undefined"&&typeof n.reject=="function"?t=new yi(n,n.promise,7):af(n)?t=new yi(n[at],n,6):lf(n)&&(typeof n.reject=="function"?(t=new pi(n,n.promise(),7),su(t)):(t=new pi(n[at],n,6),su(t))),ve(t),t}function ye(n,t){var r=e(n,t.v),o=h(n,t.id,221,r),s,i,u,f;if(o){if(s=tt(o),s.getState()!==0){fi(244,t.id);return}if(i=nt(o,238),i.disallowRemoteMutations){kr(242,n,{id:i.id,msg:"Remote mutation is not allowed"});return}u=n.pId;i[u]?i[u]++:i[u]=1;f=s.deferred;switch(t.s){case 1:f.resolve(r);break;case 2:f.reject(r);break;case 0:f.notify(r);break;default:g(101,t.s)}}}function dt(n,t,i,r){if(!n.disposed)n.onPromise({id:r.cid,s:i,v:p(n,t,ee(n,r.fid,220),!0)})}function pe(n,t){return function(){var i=tr();return ru(n,t,this,arguments,i),i.promise()}}function we(n,t,i){var r=e(n,t.v),s=n.funcCalls,h=t.id,c=i.promise,u=c.deferred,f=t.s;o(r)||s[h].objs.push(r);switch(f){case 1:u.resolve(r);break;case 2:u.reject(r);break
case 0:u.notify(r);break;default:g(103,f)}f!==0&&c.promise.finally((function(){lt((function(){delete s[h]}))}))}function y(n,t,i,r){var f=u.get(t),e=n.map,o;if(f){if(f.id?r=f.id:f.id=r,e[r])return r;if(o=n.pending,o[r])return e[r]=t,delete o[r],i.push([r,t]),n.revivedIds[r]=t,r;w(t)&&et(t,f,n.aId)}else dr(r,t,n);return e[r]=t,i.push([r,t]),r}function be(n,t){var i=cr(t,n);return i.get||i.set}function lu(n,t,r,u){for(var o=[],h=ii(t),f,e,s=0,c=h.length;s<c;s++)if(f=h[s],!t.hasOwnProperty||t.hasOwnProperty(f)){if(f.charCodeAt(0)===95&&!(f.charCodeAt(1)===109&&f.charCodeAt(2)===115&&f.charCodeAt(3)===80&&f.charCodeAt(4)===111&&f.charCodeAt(5)===114&&f.charCodeAt(6)===116&&f.charCodeAt(7)===97&&f.charCodeAt(8)===108&&f.charCodeAt(9)===70&&f.charCodeAt(10)===120))continue;if(ui&&be(f,t))continue;e=t[f];switch(typeof e){case"function":if(f==="constructor")continue;break;case"object":if(!e){o.push(f,e);continue}if(e[ut])continue;break;default:o.push(f,e);continue}o.push(f,i+y(n,e,u,r+"."+f))}return o}
function ke(n,t,r,u){for(var o=[],f,e=0,s=t.length;e<s;e++){f=t[e];switch(typeof f){case"object":o[e]=f?f[ut]?undefined:i+y(n,f,u,r+"."+e):f;break;case"function":o[e]=i+y(n,f,u,r+"."+e);break;default:o[e]=f}}return o}function co(n,t,r){var ht=[],vt=n.map,h,et,b,ct,k,v,p,g,nt,d,ot,rt;if(t[ut])return lr;if(h=[],et=u.get(t),et&&(b=et.id,vt[b]))if(w(t)){if(ct=si(t,n.aId),ir(t,ct))return[b,undefined];h.push([b,t])}else return[b,undefined];for(k=[],y(n,t,h,n.gId());h.length;){var lt=h.shift(),a=lt[0],e=lt[1],at=typeof e,s=void 0,l=void 0;switch(at){case"function":ur(e)?(v=e.peek(),e.splice||e.map?v&&w(v)?(s=wi,l=y(n,v,h,a+"(a)")):v===undefined?s=de:v===null?s=ge:ft(303,"Attempting to serialize an observable array whose value is not an array, null, or undefined.",a):(uf(e)&&(e[n.kId]=e.subscribe(it)),o(v)?(s=no,l=v):(s=au,l=y(n,v,h,a+"(o)")))):(s=to,l=undefined);break;case"object":ei(e)?(e._underlyingPromise&&ft(304,"Can't serialize CancellablePromise which is not returned from function",a),p=
tt(e),p.getState()===0&&hu(p,e),g=p.getValue(),nt=void 0,o(g)?(nt=so,l=g):(nt=ho,l=y(n,g,h,a+"()")),s=c[p.type]+nt+p.getState()):e instanceof Date?(s=io,l=e.getTime()):e instanceof RegExp?(s=ro,d=e.source+i,e.global&&(d+="g"),e.ignoreCase&&(d+="i"),e.multiline&&(d+="m"),l=d):w(e)?(s=uo,l=ke(n,e,a,h)):e instanceof Error?(s=gt,ot={message:e.message,name:e.name,stack:e.stack},ie(ot,e),l=lu(n,ot,a,h)):e instanceof ArrayBuffer?(s=eo,l=e):(rt=sr(e),s=rt===hr?gt:rt===null?fo:gt+i+y(n,rt,k,a+"(p)"),l=lu(n,e,a,h));break;default:f(105,{poId:n.id,dataType:at})}r&&(st(e).disallowRemoteMutations=!0);ht.push(a+i+s,l);!h.length&&k.length&&(h=k,k=[])}return ht}function lo(n,t,r,u){for(var e,o,s,h,f=0,c=u.length;f<c;f+=2)e=u[f],o=u[f+1],o&&o[0]===i?(s=o.substring(1),h=n[s]||t[s],h?r[e]=h:(r[e]=s,l.push(e))):r[e]=o}function ao(n,t,r){for(var f,e,o,u=0,s=r.length;u<s;u++)f=r[u],f&&f[0]===i&&(e=f.substring(1),o=n[e]||t[e],o?r[u]=o:(r[u]=e,l.push(""+u)));return r}function vo(n,t){for(var l,r,s,a,c,e=0,v=n.
length;e<v;e++){var o=n[e],y=o[0],i=o[1],u=o[2];switch(y){case 11:for(r=0,s=u.length;r<s;r++)l=u[r],i[l]=h(t,i[l],243);et(i,st(i),t.aId);break;case 3:for(r=0,s=u.length;r<s;r++)a=u[r],i[a]=h(t,i[a],232);break;case 0:case 1:c=h(t,u,233);i(c);break;case 7:case 6:c=h(t,u,234);cu(i,o[3],c,y===7?i.deferred:i.promise,!1);break;default:f(107,t.id)}}}function yo(n,t){function ft(r){var e,h,u,s;for(d?d[r]&&f(213,r):d={},d[r]=!0,e=r+i,h=e.length,u=o-1;u>=2;u-=2)if(s=t[u],s.substring(0,h)===e){t[o+1]=s;t[o+2]=t[u+1];t[u]=oo;t[u+1]=null;o+=4;return}f(214,{id:r,freed:oi(n,r)})}for(var e=n.map,a=n.pending,h=[],y,d,o=t.length-1,p,c,r,v,nt,w,b,k;o>0;){var et=t[o-1],u=t[o],s=et.split(i);p=s[0];c=tu[s[1]];r=void 0;switch(c){case 3:v=s[2];v?v==="n"?r=or(null):(nt=e[v]||a[v],nt?r=or(nt):(ft(v),y=!0)):r={};y||(lo(e,a,r,u),l.length&&(h.push([3,r,l]),l=[]));break;case 11:r=ao(e,a,u);l.length&&(h.push([11,r,l]),l=[]);break;case 4:r=new Date(u);break;case 5:var it=u.lastIndexOf(i),ot=u.substring(0,it),st=u.substring(
it+1);r=new RegExp(ot,st);break;case 10:r=pe(n,p);break;case 0:if(r=ff(),w=void 0,s[2])w=u;else if(w=e[u]||a[u],!w){h.push([c,r,u]);break}r(w);break;case 1:if(r=ef(),b=void 0,s[2])b=s[2]==="u"?undefined:null;else if(b=e[u]||a[u],!b){h.push([c,r,u]);break}r(b);break;case 7:case 6:var rt=c===6,g=tt(tr()),ut=tu[s[3]];if(r=rt?g.promise:g.deferred,k=void 0,s[2])k=u;else if(k=e[u]||a[u],!k){h.push([c,g,u,ut]);break}cu(g,ut,k,r,rt);break;case 13:r=u;break;case 14:y=!0;break;default:f(108,{poId:n.id,t:c,d:pr(t)})}y?y=!1:(dr(p,r,n),e[p]=r);o-=2}return h.length&&vo(h,n),e[p]}function p(n,t,i,r){if(o(t))return[t];try{return bt(1),co(n,t,i,r)}catch(u){ft(241,null,{message:u.message,callstack:u.stack,poId:n.id,data:d(t)},!0);throw u;}finally{bt(0)}}function e(n,t){if(t.length===0)return undefined;if(t.length===1)return t[0];if(t.length===2&&t[1]===undefined&&t[0].indexOf(i)===-1)return h(n,t[0],245);try{return bt(2),yo(n,t)}finally{bt(0)}}function ni(n,t,i,r){var f=u.get(n),e;f[t]&&(f[t]=undefined);
e=n[i];e&&(e.dispose(),n[i]=undefined);f[r]&&(f[r]=undefined)}function vu(n,t){var i=n.roots[t];i||f(206,t);delete n.roots[t];n.isPrimary&&n.dc++}function yu(n){var r=n.roots,u=n.funcCalls,t=gu(),f,e,o,i,s;for(f in r)e=r[f],b(e,t);for(o in u){i=u[o].objs;for(s in i)b(i[s],t)}return t}function po(n){var f=yu(n),i=n.map,e=n.pending,r=[],t,u;for(t in i)u=i[t],f.get(u)||(r.push(t),e[t]=i[t],delete i[t]);return r}function bo(n,t){var e=te(t),o=n.map,u=n.pending,s=n.aId,h=n.kId,c=n.cnId,f=n.freedIds,i,r;for(i in u)r=u[i],e[i]?(ni(r,s,h,c),f.push(i)):o[i]=r;gr(n,f);ar&&ti.completeTrace(n.gcTk,{disposed:t.length,created:n.nc,immediate:n.gcI||!1});n.pending={};n.revivedIds={};n.nc=0;n.dc=0;n.gcTk=undefined;n.gcLt=rr()}function go(n,t){for(var i,r,c=yu(n),u=[],s=n.map,e=[],l=n.aId,a=n.kId,v=n.cnId,h=n.freedIds,o=0,y=t.length;o<y;o++)i=t[o],r=s[i],r?c.get(r)||(u.push(i),delete s[i],ni(r,l,a,v),h.push(i)):(u.push(i),e.push(i));return e.length&&f(231,{poId:n.id,objs:e}),gr(n,h),u}function ns(n,t){n.
gcIIds=t;n.gcIIdMap=undefined}function ts(n,t){var u=n.gcIIds,i,r,f;if(u){if(i=n.gcIIdMap,!i){for(i={},r=0,f=u.length;r<f;r++)i[u[r]]=!0;n.gcIIdMap=i}return i[t]}}function pu(n,t){if(re(n.pending)){var i=po(n);if(i.length){n.gcI=t;ar&&(n.gcTk=ti.start({source:"PO",action:"GC",name:n.id}));n.onRelease({iIds:i})}}}function is(){return vf((function(){var n=s.filter((function(n){return n.isPrimary&&(n.nc>kf||n.dc)})),t,i;n.length&&(t=0,i=function(){pu(n[t++]);t<n.length&&lt(i)},i())}),bf)}function rs(n,t){return n==="fx"?!0:t==="fx"?!1:n==="HubsExtension"?!0:t==="HubsExtension"?!1:n>t}function ki(n){return function(t){n(t);v.length&&!pt&&iu()}}function us(n,t,i,r,u,e,o,h,c){var l=new bi,a=n+s.length;return l.id=a,l.cnId="c-"+a,l.aId="a-"+a,l.kId="k-"+a,l.pId="p-"+a,l.sId="s-"+a,l.raiseRemoteException=t,l.onChange=ki(i),l.onPromise=ki(r),l.onFunction=ki(u),l.onRelease=e,l.gId=nr(a),l.gFuncCallId=nr(a+"f"),l.rWinId=h,l.gcLt=rr(),o===h&&f(210,o),l.isPrimary=rs(o,h),!l.isPrimary||wu||c||(wu=is()),
s.push(l),l}function st(n){return u.get(n)}function fs(n){var t=st(n);return t&&t.id}function bu(n){if(!o(n)){var t=u.get(n);return t||(t={id:null},u.set(n,t)),t}}function es(n){var t=bu(n);t&&(t.disallowRemoteMutations=!0)}function os(){return{compatibilityMode:ui,diagnostics:rt,metadataMap:u,jQPromise:vt,managers:s}}var r=MsPortalFx,ku=r.Helpers,di=r.Base,ti=di.Diagnostics.Telemetry,k=window,du=new di.Diagnostics.Log("Base.ProxiedObservablesV2"),gi=ko.subscribable.fn,ht=gi.notifySubscribers,it=r.noop,gu=function(){return new r.Map},o=r.isPrimitive,nr=r.getIdGenerator,ct=k.fx.environment,tr=ku.Deferred,ss=r.getObjectConstructorName,nf=r.getObjectDescriptor,hs=r.getCurrentCallStack,cs=r.isNullOrUndefined,ls=r.isEmpty,ir=r.arrayEquals,tf=r.hasOwnProperty,rr=r.startTimer,i=String.fromCharCode(5),w=Array.isArray,rf=Array.prototype.push,ur=ko.isObservable,uf=ko.isPureComputed,fr=ko.isComputed,ff=ko.observable,ef=ko.observableArray,er=ko.utils,of=er.adjustArrayEdits,sf=er.compareArrays,hf=JSON.
stringify,cf=Math,a=Object,or=a.create,sr=a.getPrototypeOf,ii=a.keys,hr=a.prototype,cr=a.getOwnPropertyDescriptor,ri=a.defineProperty,as=a.defineProperties,vs=a.preventExtensions,lf=Q.isPromiseAlike,af=Q.isPromise,vf=k.setInterval,lt=Q.nextTick,lr=[undefined],yf=/^(\w+-\w+-)(\w+-\w+)+(.*)$/,pf="$1?$3",ui=!ct.enableFastViewModelProxying,ar=r.isFeatureEnabled("gctelemetry"),wf=r.isFeatureEnabled("detailedgclog"),ys=wf||r.isFeatureEnabled("gclog"),bf=3e4,kf=100,df=54e3,rt=ct.isDevelopmentMode||ct.trace.diagnostics,ps=ct.trace.potrackobservable,at="_deferred",ut="###isPoUndefined###",fi,wr,v,pt,ai,yi,pi,l,wo,wu,bi;[$.prototype,$.Event.prototype,k].forEach((function(n){ri(n,ut,{configurable:!0,value:!0})}));var gf=(function(){function n(n){this._pKey=n}return n.prototype.get=function(n){if(n&&tf(n,this._pKey))return n[this._pKey]},n.prototype.set=function(n,t){ri(n,this._pKey,{configurable:!0,value:t})},n})(),vr=!k.WeakMap||rt?function(n){return new gf(n)}:function(){return new WeakMap},u=vr("###PO2_Metadata###"),
vt=vr("###PO2_PromiseValue###"),s=[];fi=it;wr=[/\.activatedItems$/,/^Microsoft_Azure_Insights(.)*/,/\.notFoundMessage$/];var nu=cf.max(15,3),tu=r.getStringToIntMap(nu),c=r.getIntToStringMap(nu);v=[];pt=!1;var oe=[hi,function(n,t,i){v.push([n,t,i])},it,],se=[ci,function(n,t,i,r,u){v.push([n,t,i,r,u])},it,],wt=hi,ru=ci;gi.notifySubscribers=function(n,t){var r=this,i=u.get(this),f;if(i)if(t==="beforeChange")this._capturedOriginalValue===!0&&ft(302,"Detected a cycle subscription. Please avoid below pattern:\r\n observable.subscribe(() => { observable(1); }, null, 'beforeChange')",i.id),ot(this),this._originalValue=this.peek(),this._capturedOriginalValue=!0,ht.apply(this,arguments);else if(t===undefined){f=this.peek();this._capturedOriginalValue?(this._capturedOriginalValue=!1,ot(this,(function(){ou(r,i,r._originalValue,f)}))):typeof this.push=="function"||n&&typeof n.push=="function"?ot(this,(function(){eu(r,i,f,n)})):ot(this,(function(){ou(r,i,f,n)}));try{ht.apply(this,arguments)}finally{ot(this);
this._originalValue=undefined}}else ht.apply(this,arguments);else ht.apply(this,arguments)};ai={resolved:1,fulfilled:1,rejected:2,pending:0};yi=(function(){function n(n,t,i){this.deferred=n;this.promise=t;this.type=i}return n.prototype.getState=function(){var n=this.promise.inspect();return ai[n.state]},n.prototype.getValue=function(){var n=this.promise.inspect();switch(n.state){case"pending":return;case"fulfilled":return n.value;case"rejected":return n.reason;default:g(102,n.state)}},n.prototype.always=function(n){var t=this;this.promise.finally((function(){n(t.getValue())}))},n})();pi=(function(){function n(n,t,i){this.deferred=n;this.promise=t;this.type=i;this.getState=function(){var n=t.state();return ai[n]}}return n.prototype.getValue=function(){if(this.getState()!==0){var n=vt.get(this.promise);return n||f(203,{metadata:u.get(this.promise)}),n.value}},n.prototype.always=function(n){var t=this;this.promise.finally((function(){n(t.getValue())}))},n})();var wi=c[1],de=wi+i+"u",ge=wi+i+"n",au=
c[0],no=au+i+"1",to=c[10],io=c[4],ro=c[5],gt=c[3],uo=c[11],fo=gt+i+"n",eo=c[13],oo=i+14,so=i+"1"+i,ho=i+i;l=[];wo=it;bi=(function(){function n(){this.nc=0;this.dc=0;this.ops=[];this.map={};this.pending={};this.roots={};this.receivedChanges={};this.funcCalls={};this.freedIds=[];this.revivedIds={}}return n.prototype.serialize=function(n,t){var r=p(this,n,t,!1),i;return o(n)||n[ut]||(i=u.get(n),this.roots[i.id]=n),r},n.prototype.proxyBuffer=function(){v.length&&iu()},n.prototype.deserialize=function(n){var t=e(this,n),i;return o(t)||(i=u.get(t),this.roots[i.id]=t),t},n.prototype.applyPromise=function(n){var i=this,t;this.disposed||(t=this.funcCalls[n.id],t?we(this,n,t):ye(this,n))},n.prototype.applyChange=function(n){var l=this,t=n.id,r,h;if(!this.disposed){if(r=fe(this,t),!r){fu(this,n);(this.isPrimary||!ts(this,t))&&f(224,{id:t,freed:oi(this,t),data:pr(n.o)});return}if(this.revivedIds[n.id]){fu(this,n);return}var i=u.get(r),e=n.cn,o=this.cnId,s=kt(i,o),c=this.receivedChanges;if(i.disallowRemoteMutations)
{i[o]=e;kr(216,this,{id:i.id,msg:"Remote mutation is not allowed"});return}c[t]=s+1;try{h=n.o?ce(this,n,r,i,s,e,o):ae(this,n,r,i,s,e,o);h&&ft(301,"Detected a simultaneous change.",{id:t,from:this.rWinId,remote:e,local:s,serial:i[this.sId],changes:h},!rt)}finally{delete c[t]}}},n.prototype.applyRelease=function(n){var r=this,t,i;if(!this.disposed)if(n.rId)vu(this,n.rId);else if(n.iIds){t=n.iIds;ns(this,t);i=go(this,t);this.onRelease({cIds:i})}else bo(this,n.cIds)},n.prototype.invoke=function(n){var r=this,o=!1,t,s=h(this,n.fid,225),u,c;if(s){u=e(this,n.t);u===undefined&&n.t.length>1&&f(209);c=n.a.map((function(n){return e(r,n)}));try{t=s.apply(u,c);o=!0}finally{if(t&&ei(t)){var a=t.hasOwnProperty("_underlyingPromise")?t._underlyingPromise:t,i=tt(a),l=i.getState();l===0?(i.promise.progress((function(t){dt(r,t,0,n)})),i.always((function(t){dt(r,t,i.getState(),n)}))):dt(this,i.getValue(),l,n)}else dt(this,t,o?1:2,n)}}},n.prototype.release=function(n){if(!o(n)){var t=nt(n,239);vu(this,t.id);this.
onRelease({rId:t.id})}},n.prototype.dispose=function(){var h=this,n,o,t;if(!this.disposed){this.disposed=!0;var i=this.map,r=this.pending,u=this.aId,f=this.kId,e=this.cnId;for(k.clearInterval(this.gcH),n=0,o=s.length;n<o;n++)if(s[n]===this){s.splice(n,1);break}for(t in i)ni(i[t],u,f,e);for(t in r)ni(r[t],u,f,e);this.gcTk&&ti.completeTrace(this.gcTk,{disposed:-1,created:this.nc});this.map=null;this.pending=null;this.roots=null}},n})();t.ProxiedObjectManager=bi;t.createPoMgr=us;t.getMetadata=st;t.getMetadataId=fs;t.getOrCreateMetadata=bu;t.disallowRemoteMutations=es;t.getDiagnostics=os})(t=n.Po||(n.Po={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function r(n){return i(n)||n>=0}function u(n,t){return n===t?0:i(n)?-1:i(t)?1:n>t?1:-1}function s(n){var t,i;if(!n)return t=new f,t.major=0,t.minor=0,t.build=0,t.revision=0,t;if(i=o(n),!i)throw new Error("value is not a valid version string.");return i}function o(n){var t;n=n||"";var i=n.split(e),u=null,o=i.length;return o>=
2&&(t=new f,t.major=parseInt(i[0]),t.minor=parseInt(i[1]),t.build=o>=3?parseInt(i[2]):null,t.revision=!i[3]?null:parseInt(i[3].match(/\d+/)),r(t.major)&&r(t.minor)&&r(t.build)&&r(t.revision)&&(u=t)),u}var i=n.isNullOrUndefined,e=".",f;t.getVersionFromString=s;t.tryParseVersion=o;f=(function(){function n(){}return n.prototype.toString=function(){var n=[this.major,this.minor],r=this.build,t;return i(r)||(n.push(r),t=this.revision,i(t)||n.push(t)),n.join(e)},n.prototype.compareTo=function(n){var t=u(this.major,n.major);return t||(t=u(this.minor,n.minor),t||(t=u(this.build,n.build),t||(t=u(this.revision,n.revision)))),t},n})()})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function k(n,i,r){i===void 0&&(i=t.messageContext);var u=i&&i.callStack,f=n||"";return u&&n.indexOf(pt)<0&&(f+="\r\n"+pt+" "+i.srcWindowId+" -> "+i.destWindowId+(r?" ("+r+")":"")+"\r\n"+u),f}function wt(n){n&&typeof n.stack=="string"&&(n.stack=k(n.stack))}function ki(n){return k(
MsPortalFx.getCurrentCallStack(n))}function ii(n,t){return(typeof n=="string"?n:n&&n.message&&n.message+"")||t}function d(n,i){var u=t.messageContext;t.messageContext=n;try{return i()}catch(r){wt(r);s.ErrorReporter.lastError=r;s.ErrorReporter.handleError({});throw r;}finally{t.messageContext=u}}function rr(n,t){var i=new l(n);t.registerForDispose(i);i.onDispose((function(){r(t)}));return i}function er(n,t,i){return n&&n.code==="ETIMEDOUT"&&n.message&&typeof n.message=="string"&&n.message.indexOf(ui.format(t,i))!==-1}function ar(){return ei.trackedObjects.getValues().sort((function(n,t){return n.getMetadata().creationTime.getTime()-t.getMetadata().creationTime.getTime()}))}function ot(n){var t=ht.getDescriptor(n,{addSelfCloudNameIfMissing:!0});return ht.getWindowId(t)}function si(n){if(n){var t=i.makeArray(n.allowedOrigin);n.allowedOrigin=t.map(ot)}}function vr(n){var t=new ft(n.originId,n.loadWindow,{hostWindow:o,parentTrustedOrigin:lt.trustedParentOrigin,parentWindow:n.parentWindow});y.start(
t)}function g(n){return n.getName()}function hi(n,t,i,r){t.registerRpcEndPoint(g(n),{allowedOrigin:i,handler:r})}function ci(n,t,i,r){return t.invokeRpc(g(n),i,r)}var i=MsPortalFx,yi=i.Base,s=yi.Diagnostics,ht=n.Extension,nt=n.TelemetryContext,ct=n.Po,l,v,rt,bt,ut,ni,ti,ft,et,oi,st,y,p,li,ai,vi;t.WindowLoadTimeoutsInSec=[20,40,80];t.minTraceDurationInMs=100;t.timeToDelayWindowUnload=6e4;var o=window,a=new s.Log("MsPortalFx/Base/Base.Rpc2"),lt=o.fx.environment,w=lt.extensionName,u="fx",tt=i.generateNonSerializableProperty("WindowMessage"),it=(t.WindowLoadTimeoutsInSec.reduce((function(n,t){return n+t}),0)+20)*1e3,at=n.Constants.RpcMethods.entryPointDispose,r=i.disposeDisposable,b=i.noop,vt=i.uncurryThis,yt=Array.prototype,h=vt(yt.forEach),c=vt(yt.push),pi=i.forEachKey,wi=ko.observable,yr=Object.keys,f="",bi={noHandler:f,handlerExists:f,badRefCount:f,alreadyStarted:f,routeExists:f,callbackRegistered:f,endpointExists:f,sameWindow:f,badDuration:f,notStarted:f,keyExists:f},e=n.getErrorMap(bi),
pt="From RPC:";t.createCallStack=k;t.addRpcStack=wt;t.getCurrentCallStack=ki;l=(function(){function n(n){this._disposeCallbacks=[];this._value=n}return n.prototype.getValue=function(){return this._value},n.prototype.dispose=function(){if(this._disposeCallbacks){var n=this.getValue(),t=this._disposeCallbacks;this._disposeCallbacks=null;h(t,(function(t){try{t(n)}catch(i){setTimeout((function(){throw i;}),0)}}))}},n.prototype.onDispose=function(n){this._disposeCallbacks?c(this._disposeCallbacks,n):n(this.getValue())},n})();t.DisposableValue=l;v=(function(){function n(n){this._dic=new i.Map;this._countChangesCallback=n}return n.prototype.getValue=function(n){return this._dic.get(n)},n.prototype.setValue=function(n,t){var i=this._dic,r=this._countChangesCallback,u=i.has(n);i.set(n,t);!u&&r&&r(i.size,!0);t.onDispose((function(){i.delete(n)&&r&&r(i.size,!1)}))},n.prototype.getValues=function(){var n=[];return this._dic.forEach((function(t){n.push(t)})),n},n.prototype.dispose=function(){var n=this.getValues(
);r(n);this._dic.clear()},n})();rt=(function(n){function t(t){n.call(this,t.window);this._trustedHost=(t.trustedHost||"*").toLowerCase();this._initFunc=t.initializationFunc;this._source=t.source}return __extends(t,n),t.prototype.getSource=function(){return this._source},t.prototype.initialize=function(){if(this._initFunc){var n=this._initFunc;this._initFunc=null;n(this)}},t.prototype.isHostAllowed=function(n){var t=this._trustedHost;return t==="*"||n.toLowerCase()===t},t.prototype.postMessage=function(n){this.getValue().postMessage(n,this._trustedHost)},t.prototype.getTrustedHost=function(){return this._trustedHost},t})(l);t.RpcWindow=rt;bt=function(n,t){return t.seq-n.seq};ut=(function(){function n(n,t){this._outerList=[];this._innerListIndex=0;this._outerListIndex=n;this._handler=t}return n.prototype._processInnerList=function(n){var e=this,r,i,u,t,f;if(n&&this._innerList!==n&&(this._innerList=n,this._innerListIndex=0),this._innerList){r=this._innerList;i=!0;try{for(t=this._innerListIndex,
f=r.length;t<f;t++)u=r[t],i=!1,this._handler(u),i=!0}finally{i||(this._innerListIndex=t+1,Q.nextTick((function(){e.addItem()})))}this._innerList=undefined}},n.prototype.addItem=function(n){var t=this._outerList,i;for(n&&(c(t,n),t.sort(bt)),this._processInnerList();t.length>0&&t[t.length-1].seq===this._outerListIndex;)i=t.pop(),this._outerListIndex++,this._processInnerList(i.data)},n.prototype.isEmpty=function(){return this._outerList.length===0&&this._innerList===undefined},n})();t.Sequencer=ut;var di=(function(){function n(n){this._isReadyToSend=!1;this._isCallbackScheduled=!1;this._frameBuffer=[];this._sender=n}return n.prototype._schedule=function(){var n=this;this._isReadyToSend&&!this._isCallbackScheduled&&(this._isCallbackScheduled=!0,Q.nextTick((function(){n.flush();n._isCallbackScheduled=!1})))},n.prototype.flush=function(){this._isReadyToSend&&this._frameBuffer.length>0&&(this._sender(this._frameBuffer),this._frameBuffer=[])},n.prototype.send=function(n){this._schedule();c(this._frameBuffer,
n)},n.prototype.start=function(){this._isReadyToSend=!0;this._schedule()},n})(),kt=(function(){function n(n){this._handlerMap={};this._listener=n}return n.prototype.handleMessage=function(n,t){var i=this._handlerMap[n.kind+""];i||e.noHandler();i(n.data,t)},n.prototype.registerHandler=function(n,t){var r=this,i=n+"";return this._handlerMap[i]&&e.handlerExists(),this._handlerMap[i]=t,function(t,i){r._listener(t,{kind:n,data:i})}},n})(),gi=(function(){function n(n,t,i){this._senderSequenceIndex=0;this.localInstanceIndex=0;this.remoteInstanceIndex=0;this._isParentRoute=n;this.remoteId=t;this._routedMsgHandler=i}return n.prototype.handleMessage=function(n,t,i){var r=this._rpcWnd,u,f;if(r){try{u=r.getSource()===n}catch(e){u=!1}u&&r.isHostAllowed(t)&&(f=i.seq,i.handshakeData?this._handleHandshakeFrame(i.handshakeData):this._wndMsgHandler&&f>=this.localInstanceIndex&&this._wndMsgHandler.addItem(i))}},n.prototype.setWindow=function(n){var i=this,t;n?(t=function(n){i._postMsgToWin(n)},this._bufferedSender=
new di(t),this._rpcWnd=n,this._isParentRoute&&this._postMsgToWin(null,!1)):(this._bufferedSender.flush(),this._rpcWnd=null,this._bufferedSender=null,this._wndMsgHandler=null)},n.prototype.send=function(n){this._bufferedSender&&(this._rpcWnd.initialize(),this._bufferedSender.send(n))},n.prototype._handleHandshakeFrame=function(n){var t=n.sequenceStart;this.localInstanceIndex=t;this._localId=n.destinationId;this._wndMsgHandler=new ut(t,this._routedMsgHandler);n.isResponse||this._postMsgToWin(null,!0);this._bufferedSender.start()},n.prototype._postMsgToWin=function(n,t){var i,r;this._rpcWnd&&(typeof t=="boolean"?(r=this._senderSequenceIndex,this.remoteInstanceIndex=r,i={signature:tt,seq:-1,originId:undefined,handshakeData:{isResponse:t,sequenceStart:r,destinationId:this.remoteId},data:undefined}):i={signature:tt,seq:this._senderSequenceIndex++,originId:this._localId,data:n},this._rpcWnd.postMessage(i))},n})(),nr=(function(){function n(){this._refCounts=[];this.totalCount=0}return n.prototype.
setCount=function(n,t){var i=this.getCount(n);return this._refCounts[n]=t,this.totalCount+=t-i,this.totalCount},n.prototype.getCount=function(n){return this._refCounts[n]||0},n.prototype.clearRefCounts=function(){var n=this.totalCount;return this._refCounts=[],this.totalCount=0,n},n})(),dt=2,tr=(function(){function n(){this._refCounts={};this.totalRefCounts=wi(0)}return n.prototype._getRefCountSet=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new nr),i},n.prototype.setRefCount=function(n,t,i){var u=this._getRefCountSet(n,!0),f=u.totalCount,e=u.setCount(t,i),r=e-f;return r?(this.totalRefCounts(this.totalRefCounts.peek()+r),r>0?f?1:0:e?3:dt):4},n.prototype.clearRefCountsFrom=function(n){var t=this._getRefCountSet(n),i;t&&(i=t.clearRefCounts(),this.totalRefCounts(this.totalRefCounts.peek()-i))},n.prototype.getRefCountsFrom=function(n){var t=this._getRefCountSet(n);return t?t.totalCount:0},n})(),ir=0,gt=(function(n){function t(){n.call(this,""+ir++)}return __extends(
t,n),t})(l);t.AcquireWindowResult=gt;ni=(function(){function n(n,t,i,r,u){this._wndUnloadTimeoutHandle=0;this._wndId=n;this._routeWndSetter=t;this._clearRefCountsFunc=i;this._sendShutdownMsg=r;this._loadWndFunc=u}return n.prototype.isAlive=function(){return this._wndUnloadTimeoutHandle?!1:!!this._currentWnd},n.prototype.setWindowLoaded=function(n){var i=this,u;if(n)if(this._currentWnd)this._wndUnloadTimeoutHandle!==0&&(o.clearTimeout(this._wndUnloadTimeoutHandle),this._wndUnloadTimeoutHandle=0);else{try{this._currentWnd=this._loadWndFunc(this._wndId)}catch(f){u=f}if(this._currentWnd){this._currentWnd.onDispose((function(){i._currentWnd=null;var n=i._wndId;i._sendShutdownMsg(n,void 0);i._routeWndSetter.setRouteWindow(n,null);o.clearTimeout(i._wndUnloadTimeoutHandle);i._wndUnloadTimeoutHandle=0;i._clearRefCountsFunc({windowId:n,reason:"The window '"+n+"' was garbage collected or forcibly terminated.",callStack:undefined})}));this._routeWndSetter.setRouteWindow(this._wndId,this._currentWnd)}else
this._clearRefCountsFunc({windowId:this._wndId,reason:ii(u,"Fail to load window '"+this._wndId+"'."),callStack:u&&u.stack})}else!n&&this._currentWnd&&this._wndUnloadTimeoutHandle===0&&(this._wndUnloadTimeoutHandle=o.setTimeout((function(){r(i._currentWnd)}),t.timeToDelayWindowUnload))},n})();ti=(function(){function n(n,t,i,r){var f=this;this._refCounts={};this._knownWnds=[u];this._loadableWnds={};this._clearRefCountsFunc=function(n){h(f._knownWnds,(function(t){var u=n.windowId,i=f.getWindowRefCounts(t,!1),r=f.getWindowRefCounts(u,!1);(r&&r.getRefCountsFrom(t)>0||i&&i.getRefCountsFrom(u)>0)&&f._sendResetMsg(t,n);r&&r.clearRefCountsFrom(t);i&&i.clearRefCountsFrom(u)}))};this._routeWndSetter=n;this._sendShutdownMsg=i;this._sendResetMsg=t;this._loadWndFunc=r}return n.prototype._getOrCreateLoadableWin=function(n){var t=this._loadableWnds[n];return n===u||t||(t=new ni(n,this._routeWndSetter,this._clearRefCountsFunc,this._sendShutdownMsg,this._loadWndFunc),this._loadableWnds[n]=t,c(this._knownWnds,
n)),t},n.prototype.setRefCount=function(n,t){var r=t.target,u=this.getWindowRefCounts(r,!0).setRefCount(n,t.kind,t.value),i=this._getOrCreateLoadableWin(r);return i&&(t.isActivating&&!i.isAlive()||u===dt&&i.isAlive())&&this._refreshWinsLoadedState(),u},n.prototype.getWindowRefCounts=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new tr),i},n.prototype._refreshWinsLoadedState=function(){for(var f=this,n={},t=[u],e=Object.keys(this._loadableWnds),o=e,i,r;t.length>0;)i=[],r=[],h(t,(function(t){n[t]=undefined;h(o,(function(u){var e;f.getWindowRefCounts(u,!0).getRefCountsFrom(t)>0?(n[t]=undefined,e=i):e=r;c(e,u)}))})),t=i,o=r;h(e,(function(t){f._loadableWnds[t].setWindowLoaded(n.hasOwnProperty(t))}))},n})();t.invokeWithContext=d;ft=(function(){function n(n,t,r){var f=this,o,c;this._routedMessageClients=[];this.routedMessageRelay=new kt(function(n,t){var r=f.localWindowId,e={callStack:i.getCurrentCallStack(),routeInstanceIndex:0,destWindowId:n,srcWindowId:r,data:t},o;r===n?
f.routedMessageRelay.handleMessage(t,e):(o=r===u?n:u,f._baseDispatcher.sendMessage(o,e))});this.log=this.routedMessageRelay.registerHandler(3,(function(n){s.Log.writeEntry2(n.level,n.area,n.message,n.code)}));this.raiseRemoteException=this.routedMessageRelay.registerHandler(2,(function(n){var t=s.createRpcException(n);throw t;}));this._baseDispatcher=new et(r);this.localWindowId=n;o=this.routedMessageRelay.registerHandler(0,(function(n,t){t.srcWindowId===u&&h(f._routedMessageClients,(function(i){i.reset(n,t)}))}));c=this.routedMessageRelay.registerHandler(1,(function(n,t){t.srcWindowId===u&&(h(f._routedMessageClients,(function(n){n.shutdown(t)})),s.Log.flush(),s.Log.disable())}));t&&(this._shellRefCounter=new ti(this._baseDispatcher,o,c,t));this._sendRefCount=this.routedMessageRelay.registerHandler(4,(function(n,t){f._shellRefCounter?f._shellRefCounter.setRefCount(t.srcWindowId,n):e.badRefCount()}))}return n.prototype.handleMessage=function(n,t){var e=this,i=t.remoteId,f=n.srcWindowId,r;if(i!==u&&i!==
f){a.error("["+w+"] Message from route to '"+i+"' specifies an invalid window ID '"+f+"'.",1);return}n.routeInstanceIndex+=t.remoteInstanceIndex;r=n.destWindowId;r===this.localWindowId?(n.routeInstanceIndex+=t.localInstanceIndex,d(n,(function(){return e.routedMessageRelay.handleMessage(n.data,n)}))):this._baseDispatcher.sendMessage(r,n)},n.prototype.getTotalRefCounts=function(n){return this._shellRefCounter.getWindowRefCounts(n,!0).totalRefCounts},n.prototype.createClient=function(n,t){var i=new n(this,t);return c(this._routedMessageClients,i),i},n.prototype.setRefCount=function(n,t,i,r){var f={target:n,kind:t,isActivating:i,value:r};this._shellRefCounter?this._shellRefCounter.setRefCount(u,f):this._sendRefCount(u,f)},n.prototype.start=function(){this._baseDispatcher.start(this)},n.prototype.dispose=function(){r(this._baseDispatcher)},n})();t.RoutedMessageDispatcher=ft;et=(function(){function n(n){var t=this,f;this._routes={};this._preStartReceiveBuffer=[];this._eventHandler=function(n){var
i,r;t._wnd.Object&&(i=n.data,i&&i.signature===tt&&(r=t._preStartReceiveBuffer,r?c(r,{data:i,origin:n.origin,source:n.source}):t._handleMsg(n)))};var i=n.hostWindow,r=n.parentWindow,e=n.parentTrustedOrigin;this._wnd=i;i.addEventListener("message",this._eventHandler);r!==i&&e&&(f=this._registerRoute(!0,u),f.setWindow(new rt({window:r,source:r,trustedHost:n.parentTrustedOrigin,initializationFunc:void 0})))}return n.prototype.getRoute=function(n){return this._routes[n]},n.prototype.sendMessage=function(n,t){var i=this._routes[n];if(i)return i.send(t)},n.prototype.start=function(n){var i,t,r,u;if(this._preStartReceiveBuffer||e.alreadyStarted(),this._routedMsgMultiplexer=n,this._preStartReceiveBuffer)for(i=this._preStartReceiveBuffer,t=0,r=i.length;t<r;t++)u=i[t],this._handleMsg(u);this._preStartReceiveBuffer=undefined},n.prototype.setRouteWindow=function(n,t){var i=this._routes[n];i||(i=this._registerRoute(!1,n));i.setWindow(t)},n.prototype.dispose=function(){this._wnd.removeEventListener("message",
this._eventHandler)},n.prototype._registerRoute=function(n,t){var r=this,i;return this._routes[t]&&e.routeExists(t),i=new gi(n,t,function(n){r._routedMsgMultiplexer.handleMessage(n,i)}),this._routes[t]=i,i},n.prototype._handleMsg=function(n){var t=n.data,r=t.originId,i;r?(i=this._routes[r],i&&i.handleMessage(n.source,n.origin,t)):pi(this._routes,(function(i,r){r.handleMessage(n.source,n.origin,t)}))},n})();t.WindowMessageDispatcher=et;var ur=(function(){function n(){this._filters=[]}return n.prototype.register=function(n){var i=this,t;return this._filters.indexOf(n)>=0&&e.callbackRegistered(),c(this._filters,n),t=!1,{dispose:function(){t||(t=!0,i._filters.remove(n))}}},n.prototype.applyFilters=function(n,t){this._filters.concat(t).reduce((function(t,i){return t?t.then((function(){return i(n)})):i(n)}),undefined)},n})(),fr=(function(){function t(n,t){this._name=n;this._options=t}return t.prototype.invoke=function(t,u,f,e){var y=this,a=u.srcWindowId,h=new n.TriggerableLifetimeManager,o=this._options,
v=i.makeArray(o.allowedOrigin),p=o.handler||function(){},c=function(n,t){t===void 0&&(t=!0);r(h);n=n||{};var i=y._name,s=ii(n,"Failed to complete the RPC call for '"+i+"'"),f=typeof n.stack=="string",o=k(f?n.stack:"",u,i);if(e(s,o),f&&(n.stack=o),t)throw n;},s,l;v.length&&v.indexOf(a)===-1&&c("The origin window '"+a+"' is not allowed to access the endpoint name '"+this._name+"'.",!1);try{s=p(t,u,h);l=function(n){(o.onSuccess||f)(rr(n,h),o,f)};Q.isPromiseAlike(s)?Q(s).then((function(n){d(u,(function(){l(n)}))}),c):l(s)}catch(w){c(w)}},t})(),ri=(function(){function n(n){this._endPoints={};this._endPointDeferred={};this._endPointFilterMgr=n}return n.prototype.registerEndPoint=function(n,t){if(this._endPoints[n])e.endpointExists(n);else{var i=new fr(n,t),r=this._endPointDeferred[n];this._endPoints[n]=i;r&&(r.resolve(i),delete this._endPointDeferred[n])}},n.prototype.invokeEndPoint=function(n,t,i,r,u){var f=this;this._endPointFilterMgr.applyFilters(n,(function(){var o=f._endPoints[n],e;o?o.invoke(
t,i,r,u):(a.verbose("["+w+"] Attempted to invoke endpoint '"+n+"' but it is not registered. RPC call has been blocked until endpoint becomes registered."),e=f._endPointDeferred[n],e||(e=Q.defer(),f._endPointDeferred[n]=e,Q.timeout(e.promise,it,"["+w+"] Attempted to invoke endpoint '"+n+"' from '"+i.srcWindowId+"' but it is not registered after '"+it+"'ms. The call was made in:\r\n'"+i.callStack+"'").catch((function(n){a.error(n)}))),e.promise.then((function(n){d(i,(function(){return n.invoke(t,i,r,u)}))})))}))},n})(),ui="["+w+"]: RPC call to '{0}' in '{1}' took too long.";t.errorIsRpcTimeout=er;var fi=(function(){function n(n,t,i){this._requestIdCounter=0;this._pendingRpcCall=new MsPortalFx.Map;this._destination=n;this._refCounter=t;this._kind=i}return n.prototype.getDestinationId=function(){return this._destination},n.prototype._setRefCount=function(n){this._refCounter.setRefCount(this._destination,this._kind,n,this._pendingRpcCall.size)},n.prototype.getMetadata=function(n){return this._pendingRpcCall.
get(n)},n.prototype.create=function(n,t,r){var f=this,e=Q.defer(),s=i.getCurrentCallStack(),u=this._requestIdCounter+++"",h=new Date,c;return this._pendingRpcCall.set(u,{destinationId:this._destination,creationCallStack:s,creationTime:h,returnValue:e,returnCallback:r,telemetryContext:nt.getState()}),this._setRefCount(!0),c=o.setTimeout((function(){var t=Date.now()-h.getTime();a.error(ui.format(n,f._destination)+" RequestId: "+u,0,t,s)}),it*2),t(u),e.promise.finally((function(){o.clearTimeout(c);Q.nextTick((function(){f._pendingRpcCall.delete(u);f._setRefCount(!1)}))}))},n.prototype.resolve=function(n,t){var i=this._pendingRpcCall.get(n);i&&(i.returnCallback&&i.returnCallback(t),i.returnValue.resolve(t))},n.prototype.reject=function(n,t,i){var r=this._pendingRpcCall.get(t),u;r&&(u=s.createRpcException({reason:i.reason,callStack:i.callStack||r.creationCallStack}),r.returnCallback&&r.returnCallback(undefined),r.returnValue.reject(u))},n.prototype.handleResetMessage=function(n,t){var r=this,i=[];
this._pendingRpcCall.forEach((function(n,t){i.push(t)}));h(i,(function(i){r.reject(t.destWindowId,i,n)}))},n})(),or=(function(){function n(n,t){var i=this,u;this._targetWndCtx={};u=n.routedMessageRelay;this._clientCtx=n;this._endPoints=t;this._sendInvokeFunc=u.registerHandler(5,(function(n,t){var u=t.srcWindowId,f=n.requestId;i._endPoints.invokeEndPoint(n.name,n.arg,t,(function(n){i._sendRpcResolveFunc(u,{pendingRequestId:f,successValue:n.getValue()});r(n)}),(function(n,t){i._sendRpcRejectFunc(u,{pendingRequestId:f,reason:n,callStack:t})}))}));this._sendRpcResolveFunc=u.registerHandler(6,(function(n,t){i._getWndCtx(t.srcWindowId).resolve(n.pendingRequestId,n.successValue)}));this._sendRpcRejectFunc=u.registerHandler(7,(function(n,t){i._getWndCtx(t.srcWindowId).reject(t.destWindowId,n.pendingRequestId,n)}))}return n.prototype._getWndCtx=function(n){var t=this._targetWndCtx[n];return t||(this._targetWndCtx[n]=t=new fi(n,this._clientCtx,3)),t},n.prototype.invoke=function(n,t,i){var r=this;return this._getWndCtx(
t).create(n,(function(u){r._sendInvokeFunc(t,{requestId:u,name:n,arg:i})}))},n.prototype.reset=function(n,t){this._getWndCtx(n.windowId).handleResetMessage(n,t)},n.prototype.shutdown=function(n){this._endPoints.invokeEndPoint(at,undefined,n,b,b)},n})(),sr=0,ei=(function(n){function t(i,r){n.call(this,i);this._metadata=r;this._id=""+sr++;t.trackedObjects.setValue(this._id,this)}return __extends(t,n),t.prototype.getMetadata=function(){return this._metadata},t.trackedObjects=new v,t})(l),hr=(function(){function n(t,i,u,f,e,o){var s=this,h;this._producedObjs=new v;this._acquiredObjs=new v(function(n){s._clientCtx&&s._clientCtx.setRefCount(s._remoteWinId,1,!1,n)});this._remoteWinId=u;this._pendingObjRequest=e;this._clientCtx=t;this._sender=o;h=[i,u,f].join("-");this._msgRelay=new kt(function(n,t){var i=s._sender;i&&i(t)});this._poMgr=n.createPoMgr(this,h,i,u);this._sendAcquireObjResp=this._registerSymmetricAct(4,(function(n){var t=n.requestId,i=s._pendingObjRequest.getMetadata(t),u=nt.usingState((function(
){return s._poMgr.deserialize(n.object)}),i&&i.telemetryContext),r=new ei(u,i);r.onDispose((function(){s._poMgr.release(u);s._sendReleaseRootObj(t)}));s._acquiredObjs.setValue(t,r);s._pendingObjRequest.resolve(t,r)}));this._sendReleaseRootObj=this._registerSymmetricAct(5,(function(n){r(s._producedObjs.getValue(n))}))}return n.createPoMgr=function(n,t,r,u){var f=ct.createPoMgr(t,(function(t){n._clientCtx.raiseRemoteException(u,{reason:t,callStack:i.getCurrentCallStack()})}),n._registerSymmetricAct(0,(function(n){var t=ct.getMetadata(n);nt.usingState((function(){f.applyChange(n)}),t)})),n._registerSymmetricAct(1,(function(n){f.applyPromise(n)})),n._registerSymmetricAct(2,(function(n){f.invoke(n)})),n._registerSymmetricAct(3,(function(n){f.applyRelease(n)})),r,u);return f},n.prototype._registerSymmetricAct=function(n,t){var i=this._msgRelay.registerHandler(n,t);return function(n){i(undefined,n)}},n.prototype.handleAcquireObjRequest=function(n,t,i){this._producedObjs.setValue(n,i);var r=this._poMgr;this._sendAcquireObjResp(
{requestId:n,object:r.serialize(i.getValue(),!t.allowRemoteChanges,!1)});r.proxyBuffer()},n.prototype.handle=function(n){this._msgRelay.handleMessage(n,undefined)},n.prototype.dispose=function(){r(this._acquiredObjs,this._producedObjs,this._poMgr);this._sender=null;this._clientCtx=null},n})(),cr=(function(){function n(n,t,i,r){var u=this;this._routeInstanceIndex=0;this._receiveSequenceIndex=0;this._transmitSequenceIndex=0;this._pendingObjRequests=new fi(n,t,2);this._clientCtx=t;this._sendAcquireObjRequest=i;this._sendConnMsg=function(t){r(n,{sequenceIndex:u._transmitSequenceIndex++,data:t})}}return n.prototype.getRemoteId=function(){return this._pendingObjRequests.getDestinationId()},n.prototype.getPoConnection=function(n,t){var r=t>=0,i;return this._connection&&t!==this._receiveSequenceIndex&&this._routeInstanceIndex!==n.routeInstanceIndex&&(this._resetConnection(),this._sendConnMsg(null)),t!==0&&r||this._connection||(this._routeInstanceIndex=n.routeInstanceIndex,this._connection=new hr(
this._clientCtx,n.destWindowId,n.srcWindowId,n.routeInstanceIndex,this._pendingObjRequests,this._sendConnMsg)),t===this._receiveSequenceIndex?(this._receiveSequenceIndex++,i=this._connection):r||(i=this._connection),i},n.prototype.acquireObj=function(n,t,i){var r=this;return this._pendingObjRequests.create(n,(function(i){r._sendAcquireObjRequest(r.getRemoteId(),{requestId:i,name:n,arg:t})}),i)},n.prototype.handleAcquireObjResponseError=function(n,t){this._pendingObjRequests.reject(n,t.pendingRequestId,t)},n.prototype.reset=function(n,t){this._pendingObjRequests.handleResetMessage(n,t);this._resetConnection()},n.prototype._resetConnection=function(){r(this._connection);this._connection=null;this._transmitSequenceIndex=0;this._receiveSequenceIndex=0},n})(),lr=(function(){function n(n,t){var i=this,r;this._targetWnds={};r=n.routedMessageRelay;this._endpoints=t;this._routedMsgClientCtx=n;this._sendAcquireObjRequest=r.registerHandler(8,(function(n,t){var r=i._getOrCreatePoConnection(t,-1);i._endpoints.
invokeEndPoint(n.name,n.arg,t,(function(t,i){r.handleAcquireObjRequest(n.requestId,i,t)}),(function(r,u){i._sendAcquireObjResponseError(t.srcWindowId,{pendingRequestId:n.requestId,reason:r,callStack:u})}))}));this._sendAcquireObjResponseError=r.registerHandler(9,(function(n,t){i._getWndCtx(t.srcWindowId).handleAcquireObjResponseError(t.destWindowId,n)}));this._sendConnMsg=r.registerHandler(10,(function(n,t){var r=i._getOrCreatePoConnection(t,n.sequenceIndex),u=n.data;r&&u&&r.handle(u)}))}return n.prototype._getWndCtx=function(n){n===this._routedMsgClientCtx.localWindowId&&e.sameWindow();var t=this._targetWnds[n];return t||(this._targetWnds[n]=t=new cr(n,this._routedMsgClientCtx,this._sendAcquireObjRequest,this._sendConnMsg)),t},n.prototype._getOrCreatePoConnection=function(n,t){return this._getWndCtx(n.srcWindowId).getPoConnection(n,t)},n.prototype.acquireObject=function(n,t,i,r){return this._getWndCtx(t).acquireObj(n,i,r)},n.prototype.reset=function(n,t){this._getWndCtx(n.windowId).reset(n,t)}
,n.prototype.shutdown=function(n){this._endpoints.invokeEndPoint(at,undefined,n,b,b)},n})();t.dumpTrackedObjects=ar;oi=(function(){function n(n){this._targetWindows={};this._routedMsgClientCtx=n}return n.prototype._getWndCtx=function(n){var i=this,t=this._targetWindows[n];return t||(this._targetWindows[n]=t=new v(function(t,r){i._routedMsgClientCtx.setRefCount(n,0,r,t)})),t},n.prototype.acquireWindow=function(n,t){var f=this._getWndCtx(n),u=0,i=new gt;i.onDispose((function(){o.clearTimeout(u)}));return typeof t=="number"&&(t<0&&e.badDuration(),u=o.setTimeout((function(){r(i)}),t*1e3)),f.setValue(i.getValue(),i),i},n.prototype.reset=function(n){var t=n.windowId;r(this._targetWindows[t])},n.prototype.shutdown=function(){},n})();st=(function(){function n(){this.reset()}return n.prototype.registerRpcEndPoint=function(n,t){si(t);this._rpcEndPoints.registerEndPoint(n,t)},n.prototype.registerObjectFactory=function(n,t){si(t);this._poEndPoints.registerEndPoint(n,t)},n.prototype._assertReady=function()
{this._dispatcher||e.notStarted()},n.prototype.log=function(n,t){this._assertReady();this._dispatcher.log(n,t)},n.prototype.invokeRpc=function(n,t,i){this._assertReady();var r=ot(t);return this._rpcClient.invoke(n,r,i)},n.prototype.acquireObject=function(n,t,i,r){this._assertReady();var u=ot(t);return this._poClient.acquireObject(n,u,i,r)},n.prototype.getTotalRefCountTo=function(n){return this._assertReady(),this._dispatcher.getTotalRefCounts(n)},n.prototype.acquireWindow=function(n,t){return this._assertReady(),this._wndAcquirer.acquireWindow(n,t)},n.prototype.registerEndPointFilter=function(n){return this._endPointFilterMgr.register(n)},n.prototype.start=function(n){this._dispatcher=n;this._rpcClient=n.createClient(or,this._rpcEndPoints);this._poClient=n.createClient(lr,this._poEndPoints);this._wndAcquirer=n.createClient(oi,null);n.start()},n.prototype.reset=function(){r(this._dispatcher);this._dispatcher=null;this._endPointFilterMgr=new ur;this._rpcEndPoints=new ri(this._endPointFilterMgr);
this._poEndPoints=new ri(this._endPointFilterMgr);this._rpcClient=null;this._poClient=null;this._wndAcquirer=null},n})();t.ClientImpl=st;y=new st;n.GlobalStateManager.register(y);t.start=vr;t.client=y;t.internalClient=y;p=(function(){function n(n){this._name=n}return n.prototype.getName=function(){return this._name},n})();t.EndPointDefinition=p;li=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.register=function(n,t,i){hi(this,n,t,i)},t.prototype.invoke=function(n,t,i){return ci(this,n,t,i)},t})(p);t.ActionEndPointDefinition=li;ai=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.register=function(n,t,i){hi(this,n,t,i)},t.prototype.invoke=function(n,t,i){return ci(this,n,t,i)},t})(p);t.FuncEndPointDefinition=ai;vi=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.registerObjectFactory=function(n,t){n.registerObjectFactory(g(this),t)},t.prototype.acquireObject=function(n,t,i,r){return n.acquireObject(
g(this),t,i,r)},t})(p);t.ProxiedObjectTypeDefinition=vi;t.load&&a.error("script invoked multiple times. "+i.getCurrentCallStack(!0));t.load=1})(t=n.Rpc||(n.Rpc={}))})(FxImpl||(FxImpl={}));var placeHolder="",errorMessages={contextAmd:placeHolder,contextInit:placeHolder,protoEnum:placeHolder,unknownName:placeHolder,nonIframe:placeHolder,contentNull:placeHolder,entryMissMatch:placeHolder},throwError=FxImpl.getErrorMap(errorMessages),FxImpl;(function(n){var t;(function(t){"use strict";function e(n,t){var u=i.getState(),f=r.messageContext;return MsPortalFx.require(n).then((function(n){return i.usingState((function(){return t(n)}),u)}))}function s(n,i,r,f,e){u||(u=new t.RuntimeImpl(n,i,r,f,e),u.register())}function h(){return u}var i=n.TelemetryContext,f=MsPortalFx.Base,r=n.Rpc,c=window.fx.environment,l=f.tryParseVersion,u,o;t.extensionStatusEndPoint=new r.ActionEndPointDefinition(n.Constants.RpcMethods.notifyExtensionStatus);o=(function(){function n(){}return n.prototype.setDataContext=function(n)
{this._factory&&throwError.contextAmd();f.ProxiedObservables.markNonSerializable(n);this._context=n},Object.defineProperty(n.prototype,"dataContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),n.prototype.setDataContextFactory=function(n,t,i){!this._context||throwError.contextInit();i&&(n=i.normalize(n));this._factory=function(){return e(n,t)}},n.prototype.loadViewModelAsync=function(n,t,u){var o=this,s,h,c;return u&&(n=u.normalize(n)),s=function(){return e(n,t)},h=r.messageContext,!this._context&&this._factory?(this._promise||(this._promise=this._factory(),this._promise.then((function(n){f.ProxiedObservables.markNonSerializable(n);o._context=n;o._promise=undefined;o._factory=undefined}))),c=i.getState(),this._promise.then((function(){return i.usingState((function(){return r.invokeWithContext(h,(function(){return s()}))}),c)}))):s()},n})();t.ViewModelAreaFactoriesBase=o;t.setRuntime=s;t.getRuntime=h})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){
var t;(function(t){"use strict";function v(n){var t=n;t.initialize=n.initialize.bind(n);t.dispose=n.dispose.bind(n);t.getDefinition=n.getDefinition.bind(n);t.getViewModel=n.getViewModel.bind(n);t.getPartViewModel=n.getPartViewModel.bind(n);n.getObservable&&(t.getObservable=n.getObservable.bind(n))}function y(t){var h=n.Base.tryParseVersion(c),f,e,o;if(h||i.error("Incorrect version '"+c+"' was specified in the environment. Please ensure that ApplicationContext.Version in your assembly is correctly set up, and updates correctly for major and minor version changes. For more information see section 'Support stamping the extension version at compile time' in the documentation page https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),n.isNullOrUndefined(t)){f="The manifest is null or undefined for the extension at URL: "+r.location.href+".\r\nPossible reasons for the failure:\r\n - You passing an invalid manifest to the MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd call that is used to register your extension with the portal.\r\n - The manifest file is not included in your project.\r\n - If you are not using AMD, verify that your scipt ordering is correct so that the manifest object is being created before the call to the MsPortalFx.Extension.register/registerAmd."+
u;i.error(f);throw new Error(f);}if(n.isNullOrWhiteSpace(t.name)){e="The extension manifest should specify a valid name. This name is obtained from the <Extension> tag in PDL. "+("\r\nExtension URL: "+r.location.href+".")+"\r\nThis name should be a string and cannot be empty or whitespace. It also cannot contain the ! character. \r\nThe recommended naming convention for an extension name is to follow the pattern {Company}_{BrandOrSuite}_{ProductOrComponent} (e.g. Microsoft_Azure_Insights)."+u;i.error(e);throw new Error(e);}if(n.isIFrame||throwError.nonIframe(t.name),s.getRuntime()){o="The extension with name "+t.name+" has already been registered. Ensure that you are not calling MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd multiple times within your extension.";i.error(o);throw new Error(o);}}function p(t,i,r,f,h,c){if(y(t),e.manifestScriptDownloadEnd=o(),n.isNullOrWhiteSpace(i)&&throwError.entryMissMatch(t.name,u),r){var l=r.normalize.bind(r);i=l(i);f&&(f=l(f));h&&(h=
l(h));c&&(c=l(c))}s.setRuntime(t,(function(){return e.initScriptDownloadBegin=o(),n.require(i).then((function(n){return e.initScriptDownloadEnd=o(),n.create()}))}),f,h,c)}function w(t,i,r,u,f,e){var c=u?n.ViewModels.Part.createSelectableViewModel():undefined,h=u?new n.ViewModels.Internal.SelectableContainerViewModel({selectable:c}):new n.ViewModels.Internal.ContainerViewModel,o,s;return(o=t(i,h,r),o||throwError.contentNull(i),s=function(n){var t=new FxImpl.ViewModels.CompositionViewModel(h,n,r,f);return e&&e(n),t},Q.isPromiseAlike(o))?o.then(s):s(o)}var s=FxImpl.Extension,r=window,i=new n.Base.Diagnostics.Log("MsPortalFx/Extension/Extension"),u="\r\nMore information at {0}".format("https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),f=r.fx,h=f.environment,e=f.bootstrapTelemetry,o=f.getTimestamp,c=h.version,l=h.isDevelopmentMode||n.isDiagnosticsEnabled,a=(function(){function t(){v(this)}return t.prototype.initialize=function(){},t.prototype.dispose=function(
){l&&n.ViewModels.Internal.ContainerViewModel.VerifyAllContainerViewModelDisposed()},t.prototype.getViewModel=function(n,t,i){var r,u=this.viewModelFactories;return n in u?r=u[n](t,i):throwError.unknownName(),r},t.prototype.getPartViewModel=function(n,t,i){var r,u=this.viewModelFactories;return n in u?r=u[n](t,i):throwError.unknownName(),r},t})();t.EntryPointBase=a;t.registerAmd=p;t.getService=function(t,i,r){return Q(new n.Services.ObservableServiceClientImpl(t,r))};t.composeViewModel=w})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function a(t,i){return{type:t.type,data:t.data,options:n.extend2(t.options,{badge:i})}}function v(n,t){return{type:n.type,data:n.data,options:t}}function i(n){return o?function(t){return t?u(n,t):s(n)}:function(t){return u(n,t)}}function y(n){return{type:2,data:n}}function f(t,r){n.extendStringMapIntoMap(t,r,i)}function h(n){return u(n,{isLogo:!0})}function r(n){return o?function(
){return c(n)}:function(){return h(n)}}var l=n.Services.Image,e=n.Base.Images,u=l.newImageData,o=FxImpl.hasCapability(1),s,p,w,b,k,d,g,c,nt;t.CustomImageWithBadge=a;t.CustomImageWithOptions=v;s=n.memoize(u);t.ImageUri=y;f(e,{Add:4,AddBoxed:300,AddTeamMember:82,AddTile:318,Attachment:83,AvatarDefault:84,AvatarUnknown:85,AzurePortal:334,AzureQuickstart:161,Backlog:86,Blank:0,Book:10,Canceled:74,Check:12,Clock:75,Clone:76,Code:94,Collapse:298,Commit:96,Commits:210,Connect:132,Console:333,Customize:296,Delete:17,Disable:98,Disabled:18,Discard:19,Disconnect:133,Download:174,Edit:99,Ellipsis:176,Error:77,Expand:299,Favorite:101,Feedback:228,File:102,Filter:22,ForPlacementOnly:177,Gear:103,GetMoreLicense:104,GetStarted:105,Go:108,Guide:218,Hamburger:313,HeartPulse:211,History:109,Hyperlink:31,Inactive:110,LaunchCurrent:227,Link:35,Lock:37,Log:112,Monitoring:193,Paused:79,Pending:43,Person:44,PersonWithFriend:45,Pin:46,Plus:297,Postpone:114,PowerUp:216,Properties:48,Publish:162,Question:49,Queued:
80,Redo:157,Refresh:51,Release:115,Request:116,Retain:117,Save:52,Signout:226,SmileyHappy:319,SmileyNeutral:320,SmileySad:321,Start:61,Stop:62,Subtract:65,Support:219,Swap:66,Tasks:119,Tools:159,TrendDown:204,TrendUp:205,Triangle:120,Unlock:69,Unpin:70,Upload:121,Variables:206,Warning:317,Wrench:160,Info:225,AddAlternate:259,ArrowDown:260,ArrowLeft:261,ArrowRight:262,ArrowUp:263,CaretDown:286,CaretUp:287,Columns:264,Diagnostics:279,FolderAlternate:265,GearAlternate:249,Globe:285,InstallVisualStudio:111,Key:266,Mail:267,Message:268,Query:270,SaveAll:271,Search:248,Star:283,Tag:239,Tags:246,Tour:275,Undo:272,WebHostingPlan:236});t.GitLogo=i(106);t.GitLogoBox=i(107);t.VisualStudio=i(123);t.VisualStudioLogoBox=i(124),(function(){f(e.Logos,{Bitbucket:181,BitbucketBox:182,Channel9:277,CodePlex:183,CodePlexBox:184,Dropbox:185,DropboxBox:186,ExternalRepositoryBox:212,Git:187,GitBox:188,GitHub:189,GitHubBox:190,Redis:229,StackOverflow:278,VisualStudio:191,VisualStudioBox:192,Microsoft:220,MicrosoftSquares:
258})})(p=t.Logos||(t.Logos={})),(function(t){function r(n){return{type:n,options:{customClass:"msportalfx-svg-rotate360"}}}function u(n){return o?function(){return f(n)}:function(){return r(n)}}t.EllipsisSquare=i(295);var f=n.memoize(r);t.Spinner=u(328);t.Loader=u(329)})(w=t.Loading||(t.Loading={})),(function(n){n.Happy=i(242)})(b=t.Emoticon||(t.Emoticon={})),(function(n){f(n,{ActiveDirectory:3,Advisor:336,ApiManagement:301,AppInsights:135,Automation:164,AvailabilitySet:136,Backlog:87,Backup:137,BillingHub:92,BizTalk:302,BlobBlock:231,BlobPage:232,Branch:240,Browser:138,Bug:11,Builds:93,Cache:230,Cdn:303,Certificate:194,Chart:241,ClearDBDatabase:178,Clock:195,CloudService:13,Code:95,Commit:97,Controls:14,ControlsHorizontal:196,Counter:250,Cubes:15,CustomDomain:139,Database:16,Discs:244,ErrorIcon:274,EventHub:304,Extensions:237,DevConsole:213,Download:20,File:254,Files:255,FolderBlank:23,FolderCube:24,FolderWebsite:25,Ftp:26,Functions:337,Gear:27,Globe:140,GlobeError:222,GlobeSuccess:223,GlobeWarning:
224,Grid:28,Guide:29,Heart:30,Image:256,Info:32,InputOutput:197,IpAddress:141,JourneyHub:33,Key:34,LaunchPortal:142,LoadBalancer:143,LoadTest:144,Location:36,Log:145,LogDiagnostics:146,LogStreaming:147,ManagementPortal:276,Media:38,MediaFile:39,Mobile:40,MobileEngagement:305,Module:198,Monitoring:41,NetworkInterfaceCard:148,Notification:42,OperationalInsights:306,Owl:332,Power:291,Powershell:47,PowerUp:199,ProcessExplorer:251,Preview:294,ProductionReadyDb:214,RemoteApp:307,ResourceDefault:149,ResourceGroup:179,ResourceGroupList:208,ResourceLinked:150,ResourceList:207,ResourceRole:288,Scale:118,Scheduler:308,Search:53,SearchGrid:54,ServerFarm:151,ServiceBus:309,SiteRecovery:310,SqlDatabase:165,SqlDataBaseServer:152,SSD:280,SslCustomDomains:60,Storage:63,StorageAzureFiles:290,StorageContainer:233,StorageQueue:234,Store:64,StorSimple:311,StreamAnalytics:312,Support:200,Table:235,TeamProject:67,TfsVcRepository:153,Toolbox:68,TrafficManager:166,Versions:203,VirtualMachine:71,VirtualNetwork:
245,WebEnvironment:167,WebHosting:154,WebJobs:168,Website:72,WebsitePower:73,WebsiteStaging:155,WebSlots:215,WebTest:156,Workflow:180});n.PolyTrafficManagerDisabled=i(201);n.PolyTrafficManagerEnabled=i(202);n.TrafficManagerDisabled=i(201);n.TrafficManagerEnabled=i(202);n.QuickStart=i(161)})(k=t.Polychromatic||(t.Polychromatic={})),(function(n){f(e.Shell,{Add:325,ArrowWideUp:282,ArrowWideDown:281,Chevron:158,Close:55,Collapse:56,CornerCheck:221,Customize:314,DefaultBlade:57,Dots:169,Filter:326,Fullscreen:323,Gear:247,HeaderDots:273,Maximize:58,Mini:322,Minimize:289,Pin:331,Restore:59,Save:330,Share:324,Trash:284,TrashOutline:327,TripleArrow:257});var t;(function(n){n.Home=i(127);n.Alerts=i(129);n.Journey=i(128);n.Browse=i(126);n.Billing=i(92);n.Create=i(125)})(t=n.JumpBar||(n.JumpBar={}))})(d=t.Shell||(t.Shell={})),(function(n){var t,r;n.Canceled=i(89);n.Critical=i(292);n.Disabled=i(90);n.Error=i(6);n.Failed=i(252);n.Info=i(78);n.None=i(7);n.Pending=i(88);n.Stopped=i(131);n.Success=i(8);n.Unknown=
i(91);n.Warning=i(9),(function(n){n.Critical=i(293);n.Error=i(170);n.Failed=i(253);n.Info=i(171);n.Stopped=i(175);n.Success=i(172);n.Unknown=i(209);n.Update=i(238);n.Warning=i(173)})(t=n.Outline||(n.Outline={})),(function(n){n.Error=i(315);n.Info=i(316);n.Warning=i(317)})(r=n.Solid||(n.Solid={}))})(g=t.StatusBadge||(t.StatusBadge={}));c=n.memoize(h),(function(n){n.CollectionPartWithRollup=r(1e3);n.CollectionSummary=r(1001);n.DonutChart=r(1002);n.DonutChartPartial=r(1003);n.Extensions=r(1004);n.GridWithMoreData=r(1005);n.Map=r(1006);n.MultiLineChartMultiTrendLine=r(1007);n.MultiScatterChart=r(1008);n.MultiStackedBarChart=r(1009);n.MutliLineChart=r(1010);n.PricingTier=r(1011);n.QuotaGauge=r(1012);n.ResourceMap=r(1013);n.SingleAreaChart=r(1014);n.SingleAreaChartSingleThreshold=r(1015);n.SingleAreaChartSingleTrendline=r(1016);n.SingleBarChartLarge=r(1017);n.SingleBarChartSmall=r(1018);n.SingleLineChart=r(1019);n.SingleScatterChart=r(1020);n.SingleScatterSingleThreshold=r(1021);n.SingleValueGauge=
r(1022);n.SplitBarChart=r(1023);n.StackedAreaChart=r(1024)})(nt=t.PartGallery||(t.PartGallery={}))})(i=t.Images||(t.Images={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function ot(n){if(!n.skipTelemetry&&et)return new h(n)}function st(){ft=0}function ht(){y.registerRpcEndPoint(v,{allowedOrigin:null,handler:function(n,t){f.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:n.action,actionModifier:n.actionModifier,name:n.name,duration:n.duration,data:n.data,optional:n.optional})}})}function ct(n){var t=r.performance,e,f,o;t&&t.getEntriesByType&&t.timing&&(e=t.timing,f=e.navigationStart,n=n||t.getEntriesByType("resource"),o=n.filter((function(n){var t=n.initiatorType;return t==="link"||t==="script"})).map((function(n){var t=u.getUriAuthority(n.name,!1);return{host:t,entry:n,queueTime:vt(n)}})).reduce((function(n,t){var i=t.host,r=n[i]||(n[i]=[]);return r.push(t),n}),{}),w(o,(function(n,t){var u=d("domainLookupStart",
"domainLookupEnd",t),e=d("connectStart","connectEnd",t),r=at(t),o=t.reduce((function(n,t){var i=n.entry,r=i&&i.duration||0;return t.entry.duration>=r?t:n}),{});u.entry&&i("MaxHostDnsTime",u.entry.domainLookupStart,u.entry.domainLookupEnd,{epochAdjustment:f,data:u.entry,name:n});e.entry&&i("MaxHostConnectTime",e.entry.connectStart,e.entry.connectEnd,{epochAdjustment:f,data:e.entry,name:n});o.entry&&i("MaxHostTotalTime",o.entry.startTime,o.entry.responseEnd,{epochAdjustment:f,data:o.entry,name:n});r.entry&&i("MaxHostQueueTime",r.entry.responseEnd-r.queueTime,r.entry.responseEnd,{epochAdjustment:f,data:r.entry,name:n})})))}function lt(){var u,n,t,i;try{u=r.sessionStorage;n=u.getItem(b);n&&(t=JSON.parse(n),t&&k(t,!0))}catch(f){ut.warning(f)}return i=r.performance&&r.performance.timing,i?k(i):void 0}function k(n,t){var u=r.fx.bootstrapTelemetry,f;return u.appCacheLoad=n.domainLookupStart-n.fetchStart,u.requestTime=n.responseStart-n.requestStart,u.pageLoad=n.loadEventEnd-n.responseEnd,f=t?"Initial":
"",u.navigationTime=i(f+"DocumentNavigationTime",n.fetchStart,n.responseEnd),u.ttfb=i(f+"DocumentFirstByte",n.fetchStart,n.responseStart),u.domainLookup=i(f+"DocumentDnsTime",n.domainLookupStart,n.domainLookupEnd),u.unloadTime=i(f+"DocumentUnloadTime",n.navigationStart,n.fetchStart),u}function i(n,t,i,r){r=r||{};var u=i-t;return c({timestamp:Math.round(i+(r.epochAdjustment||0)),source:s,action:n,name:r.name,actionModifier:f.ActionModifier.Complete,duration:u,data:yt(r.data)}),u}function c(n){it?f.trace(n):y.invokeRpc(v,l,n)}function d(n,t,i){return i.reduce((function(i,r){return g(n,t,r.entry)>=g(n,t,i.entry)?r:i}),{})}function g(n,t,i){return!i||!i[n]||!i[t]?0:i[t]-i[n]}function at(n){return n.reduce((function(n,t){return n&&n.queueTime>t.queueTime?n:t}),null)}function vt(n){return e(n.startTime,n.redirectStart)+e(n.redirectEnd,n.fetchStart)+e(n.fetchStart,n.domainLookupStart)+e(n.domainLookupEnd,n.connectStart)+e(n.connectEnd,n.requestStart)}function e(n,t){return n&&t?Math.max(0,t-n):0}
function yt(n){for(var t={},i=n;i&&i!==Object;)Object.keys(i).forEach((function(n){t[n]=undefined})),i=Object.getPrototypeOf(i);return w(t,(function(i){var r=n[i];typeof r!="function"?t[i]=r:delete t[i]})),t}function pt(){c({source:s,action:"CdnIndex",name:String(p.cdn.index)})}var u=MsPortalFx,o=u.Base,l=o.Constants.Shell,a=o.Diagnostics,f=a.Telemetry,v=n.Constants.RpcMethods.networkTelemetry,y=n.Rpc.client,s="Framework",nt="XHRPerformance",r=window,tt=r.fx,p=tt.environment,it=p.extensionName===l,rt=u.startTimer,ut=new a.Log("MsPortalFx/Base/Internal/Diagnostics/Net"),w=u.forEachKey,ft=0,et=u.isFeatureEnabled("networktelemetry"),h,b;t.tryCreateTelemetry=ot;t.resetTelemetryTimer=st;h=(function(){function n(n){this._settings=n;this._timer=rt()}return n.prototype.success=function(n){this._result(n,f.ActionModifier.Complete,this._timer())},n.prototype.error=function(n){this._result(n,f.ActionModifier.Cancel,this._timer())},n.prototype._result=function(n,t,i){var r=(n.responseText||"").length,u=
{timestamp:Date.now(),source:s,action:nt,actionModifier:t,duration:i,data:{requestId:this._settings.headers[o.headerNames_requestId],status:n.status,dataSent:this._size(this._settings.data),dataReceived:r},optional:!0};c(u)},n.prototype._size=function(n){return n?typeof n=="string"?n.length:-1:0},n})();t.NetworkTelemetry=h;t.registerTelemetrySubmissionHandler=ht;t.traceResourceDownloads=ct;b="Redirect_InitialTiming";t.traceDocumentNavigation=lt;t.traceCdnIndex=pt})(t=n.NetDiagnostics||(n.NetDiagnostics={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function kt(){return h=(h+1)%10}var i=n,p=i.Helpers,s=FxImpl.Extension,u=i.Base,d=FxImpl.Rpc,g=FxImpl.NetDiagnostics,e=p.Deferred,c=i.isUndefined,nt=i.isEmpty,w=window,r=w.fx.environment,tt="Accept-Language",it="Authorization",l="Cache-Control",a="x-ms-cache-tag",rt="x-ms-effective-locale",ut="x-ms-extension-flags",ft="x-ms-failure-cause",et="x-ms-force-login",ot="x-ms-path-query",st="Pragma",ht="x-ms-client-session-id",
ct="x-ms-version",lt="x-ms-version-mismatch",at="x-ms-command-name",vt=60,f,dt;t.headerNames_requestId="x-ms-client-request-id";var v=ko,yt=i.isFeatureEnabled("apiinvokenocache"),pt=i.getUniqueIdGenerator(),wt="Failed to get authorization token.",o=new u.Diagnostics.Log("MsPortalFx/Base/Base.Net"),b=p.ajax,bt=!1,y=o.error.bind(o),k=b,h=-1;(function(f){function ui(n){var i=n.getResponseHeader(st),t;return i===gt?!0:(t=n.getResponseHeader(l)||"",t.indexOf(gt)>=0)?!0:!1}function ii(n){if(!n)return!0;var t=n.status;return t===500||t===0?!0:[401,403,502,503,504].indexOf(t)>=0&&n.getAllResponseHeaders().indexOf("x-ms-")<0}function dt(n,t,i){c(n[t])&&(n[t]=i)}function fi(){s.getRuntime().disableAjaxServerVersionCheck()}function ei(n){n||o.error("setAjaxLogFunc: Invalid arg!");y=n}function oi(n){k=n||b}function ri(n,t){n.contentType="application/json";n.data=JSON.stringify(t);n.type="POST"}function hi(n,t){return p.postJSON(n,t)}function ci(n){return p.ajax(n)}function li(n){return p.ajaxExtended(
n)}function ai(){return p}function vi(n){return p.cachedAjax(n)}function yi(n){n&&delete n[a]}function pi(t,i){return n.extend(t,{"x-ms-cache-tag":i})}function wi(n){p.initialize(r.version,n,r.extensionFlags,r.effectiveLocale,r.traceAjaxErrors)}function bi(){p.skipVersionCheck=!0}var ni,ti,gt,si,p;(function(n){n[n.Continue=100]="Continue";n[n.SwitchingProtocols=101]="SwitchingProtocols";n[n.Ok=200]="Ok";n[n.Created=201]="Created";n[n.Accepted=202]="Accepted";n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation";n[n.NoContent=204]="NoContent";n[n.ResetContent=205]="ResetContent";n[n.PartialContent=206]="PartialContent";n[n.Ambiguous=300]="Ambiguous";n[n.MultipleChoices=300]="MultipleChoices";n[n.Moved=301]="Moved";n[n.MovedPermanently=301]="MovedPermanently";n[n.Found=302]="Found";n[n.Redirect=302]="Redirect";n[n.RedirectMethod=303]="RedirectMethod";n[n.SeeOther=303]="SeeOther";n[n.NotModified=304]="NotModified";n[n.UseProxy=305]="UseProxy";n[n.Unused=306]="Unused";n[n.RedirectKeepVerb=
307]="RedirectKeepVerb";n[n.TemporaryRedirect=307]="TemporaryRedirect";n[n.BadRequest=400]="BadRequest";n[n.Unauthorized=401]="Unauthorized";n[n.PaymentRequired=402]="PaymentRequired";n[n.Forbidden=403]="Forbidden";n[n.NotFound=404]="NotFound";n[n.MethodNotAllowed=405]="MethodNotAllowed";n[n.NotAcceptable=406]="NotAcceptable";n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired";n[n.RequestTimeout=408]="RequestTimeout";n[n.Conflict=409]="Conflict";n[n.Gone=410]="Gone";n[n.LengthRequired=411]="LengthRequired";n[n.PreconditionFailed=412]="PreconditionFailed";n[n.RequestEntityTooLarge=413]="RequestEntityTooLarge";n[n.RequestUriTooLong=414]="RequestUriTooLong";n[n.UnsupportedMediaType=415]="UnsupportedMediaType";n[n.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable";n[n.ExpectationFailed=417]="ExpectationFailed";n[n.UpgradeRequired=426]="UpgradeRequired";n[n.InternalServerError=500]="InternalServerError";n[n.NotImplemented=501]="NotImplemented";n[n.BadGateway=502]=
"BadGateway";n[n.ServiceUnavailable=503]="ServiceUnavailable";n[n.GatewayTimeout=504]="GatewayTimeout";n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported"})(ni||(ni={}));f.HttpStatusCode=ni;ti=3;gt="no-cache";f.disableAjaxServerVersionCheck=fi;f.setAjaxLogFunc=ei;f.setAjaxFunc=oi,(function(f){function fi(n){return u.Net2.ajaxExtended(n)}function ei(){p=new f.AjaxCaller}var b,st,ni;FxImpl.GlobalStateManager.register({reset:function(){f.environment={retryDelay:400}}});f.ajaxExtended=fi;b=(function(){function p(){this.ajaxStatus=v.observable({code:0});this.unknownErrorStatusCode=0;this._initialized=e();this._unknownErrors=0;this._backgroundTask=e()}return p.prototype.initialize=function(n,t,u,f,e){var l=this,o,c;this._version=n;o=this._backgroundTask;o.resolve(),(function(){var n=o;w.setInterval((function(){n===o&&o.resolve()}),6e4)})();h=-1;c=f&&f.split(".");this._acceptLanguage=c&&c[0];this._effectiveLocale=f;this._getAuthTokenFunc=t;nt(u)||(this._extensionFlags=JSON.stringify(u));this.
_traceErrors=e;r.useFxArmEndpoint?s.getArmEndpointEndPoint.invoke(d.client,s.getHubsWindowId(),undefined).then((function(n){l._armEndpoint=i.ensureSuffix(n,"/");l._initialized.resolve()})):this._initialized.resolve()},p.prototype.postJSON=function(n,t){return ri(n,t),this.ajax(n)},p.prototype.oldPostJSON=function(n,t){return ri(n,t),this.oldAjax(n)},p.prototype.ajaxExtended=function(n){return this._executeAjaxCall(n,new st)},p.prototype.oldAjax=function(n){return this._executeAjaxCall(n,new ni)},p.prototype.ajax=function(n){var t=this.ajaxExtended(n),i=t.inspect();return i.state==="fulfilled"?Q(i.value.content):t.then((function(n){return n.content}))},p.prototype._executeAjaxCall=function(i,f){var o=this,v,h,a,p,y;return(i.url=i.originalUri=i.uri||i.url,v={retryCount:i.performRetry?4:0},i.useRawAjax)?(this._worker(i,v,f),f.getPromise()):(h=!n.isUriAbsolute(i.url),c(i.setAuthorizationHeader)&&(i.setAuthorizationHeader=h),c(i.checkVersion)&&(i.checkVersion=h,this.skipVersionCheck&&(i.checkVersion=
!1)),a=this._initialized.promise(),i.isBackgroundTask&&(a=a.then(this._backgroundTask.promise),p=this._backgroundTask=e(),f.finally((function(){p.resolve()}))),y=function(){var e=function(n){var e=i.headers||{},a,y,p;if(i.setAuthorizationHeader&&(e[it]=n),i.setTelemetryHeader&&(e[at]=i.setTelemetryHeader.substring(0,vt)),a=o._acceptLanguage,a&&dt(e,tt,a),i.invokeApi){var w=o._armEndpoint,s=void 0,c=void 0;w&&h?(s=new u.UriBuilder(w),c=encodeURI(i.url)):(s=new u.UriBuilder(i.url),s.query.clear(),c=encodeURI(s.getRelativePath()+s.getOriginalQuery()));s.setRelativePath(i.invokeApi);yt?dt(e,l,gt):s.query.setParameter("_",kt());bt&&s.query.setParameter("uri",c);i.uri=i.url=s.toString();dt(e,ot,c)}dt(e,rt,o._effectiveLocale);dt(e,t.headerNames_requestId,pt());dt(e,ht,r.sessionId);y=o._version;i.checkVersion&&y&&dt(e,ct,y);p=o._extensionFlags;h&&p&&(e[ut]=p);i.headers=e;o._worker(i,v,f)},n;i.setAuthorizationHeader?(n=void 0,i.cloudName=i.cloudName||s.selfCloudName,n=i.setAuthorizationHeader===!0?
{cloudName:i.cloudName}:{resourceName:i.setAuthorizationHeader.resourceName,cloudName:i.cloudName},o._getAuthTokenFunc(n).then((function(n){e(n)}),(function(n){f.reject(wt,n,null)}))):e(null)},a.state()==="resolved"?y():a.then(y),f.getPromise())},p.prototype.cachedAjax=function(t){return t.headers=n.extend({"x-ms-cache-tag":'"0"'},t.headers),this.ajaxExtended(t).then((function(n){var r=n.content,i=n.textStatus,t=n.jqXHR;return{cachedAjax:!0,data:r,modified:i==="success",textStatus:i,cacheTagValue:t.status===200?t.getResponseHeader(a):null,jqXHR:t}}))},p.prototype.oldCachedAjax=function(t){var i=e();return t.headers=n.extend({"x-ms-cache-tag":'"0"'},t.headers),this.oldAjax(t).then((function(n,t,r){i.resolve({cachedAjax:!0,data:n,modified:t==="success",textStatus:t,cacheTagValue:r.status===200?r.getResponseHeader(a):null,jqXHR:r},t,r)}),(function(n,t,r){i.reject(n,t,r)})),i.promise()},p.prototype._worker=function(n,u,e){var s=this,c,h;this._stall||(c=g.tryCreateTelemetry(n),h=k(n),h.always((function(
){if(n.checkVersion&&ui(h)){var a=h.getResponseHeader(lt);a&&(o.warning("'{0}' with version '{1}' is not accepting requests from clients with version '{2}'".format(n.uri,a,s._version)),s._stall=!0,s.ajaxStatus({code:1,data:{version:a}}))}if(h.getResponseHeader(et)&&s.ajaxStatus({code:2,message:"Received logged out header from server."}),!s._stall)switch(h.state()){case"resolved":c&&c.success(h);s._unknownErrors&&(s._unknownErrors=0,s.ajaxStatus({code:0}));h.then((function(n,t,i){e.resolve(n,t,i)}));break;case"rejected":c&&c.error(h);h.status===s.unknownErrorStatusCode?(s._unknownErrors++,s._unknownErrors>=ti&&(s._unknownErrors=0,s.ajaxStatus({code:4,data:{uri:n.uri}}))):h.status===429&&s.ajaxStatus({code:6,data:{uri:n.originalUri,retryAfter:h.getResponseHeader("Retry-After")}});h.then(null,(function(c,a,v){var w,p,b;s._traceErrors&&h.status>=500&&(w={uri:n.uri,requestId:(n.headers||{})[t.headerNames_requestId],sessionId:r.sessionId},y&&y(c,0,w));u.retryCount>0&&ii(c)?(u.retryCount--,Q.delay(
f.environment.retryDelay).then((function(){s._worker(n,u,e)}))):h.status===403&&n.skipRetryOnForbidden!==!0&&(h.getResponseHeader(ft)||"").toLowerCase()==="gateway"?(p=i.clone(n,!0),p.skipRetryOnForbidden=!0,p.headers=p.headers||{},p.headers[l]=gt,s._worker(p,u,e)):(n.performRetry&&(b=c.status||c.readyState?2:1,o.writeEntry(b,"Retryable ajax call failed after several attempts",0,[n.uri,n.type||"GET",c.status,c.statusText,ii(c)])),n.detailedError?e.reject(a,{error:v,responseText:h.responseText},c):e.reject(a,v,c))}))}})))},p})();f.AjaxCaller=b;st=(function(){function n(){var n=Q.defer();this.resolve=function(t,i,r){n.resolve({content:t,jqXHR:r,textStatus:i})};this.reject=function(t,i,r){var u={jqXHR:r,textStatus:t,errorThrown:i};n.reject(u)};this.getPromise=function(){return n.promise};this.finally=function(t){n.promise.finally(t)}}return n})();ni=(function(){function n(){var n=e();this.resolve=function(t,i,r){n.resolve(t,i,r)};this.reject=function(t,i,r){n.reject(r,t,i)};this.getPromise=function(
){return n.promise()};this.finally=function(t){n.promise().finally(t)}}return n})();f.reset=ei})(si=f.Internal||(f.Internal={}));p=new f.Internal.AjaxCaller;f.postJSON=hi;f.ajax=ci;f.ajaxExtended=li;f.getSingleton=ai;f.cachedAjax=vi;f.invalidateCacheHeader=yi;f.setCacheHeader=pi;f.initialize=wi;f.status=v.computed((function(){return p.ajaxStatus()}));f.disableVersionCheck=bi;$.support.cors=!0;$.ajaxTransport("+binary",(function(n,t,i){if(n.dataType&&n.dataType==="binary")return{send:function(t,i){var r=new XMLHttpRequest,f=n.url,e=n.type,o=n.data||null,u;r.addEventListener("load",(function(){var t={};t[n.dataType]=r.response;i(r.status,r.statusText,t,r.getAllResponseHeaders())}));r.open(e,f,!0);r.responseType="blob";for(u in t)r.setRequestHeader(u,t[u]);r.send(o)},abort:function(){i.abort()}}}))})(f=t.Net2||(t.Net2={})),(function(n){function i(n,i){return t.oldPostJSON(n,i)}function r(n){return t.oldAjax(n)}function e(n){return t.oldCachedAjax(n)}n.HttpStatusCode=f.HttpStatusCode;n.disableAjaxServerVersionCheck=
u.Net2.disableAjaxServerVersionCheck;var t=u.Net2.getSingleton();n.postJSON=i;n.ajax=r;n.cachedAjax=e;n.invalidateCacheHeader=f.invalidateCacheHeader;n.setCacheHeader=f.setCacheHeader;n.initialize=f.initialize;n.status=v.computed((function(){return t.ajaxStatus()}));n.disableVersionCheck=f.disableVersionCheck})(dt=t.Net||(t.Net={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=n.Base,u=r.Net2,i=window,f=10,e=1e3,o=(function(){function t(t,r,u,o,s){function tt(){l||h&&!d()||k(it,!0)}function y(n,i){if((c.length||i&&a.length)&&!l){var u=t(a,c);c=[];a=[];l=!0;p=Q(r(u)).then(null,(function(r){if(n)return c=t(u,c),l=!1,y(!1,i);throw r;})).finally((function(){l=!1;k()}))}else a.length&&!l&&tt();return p}function d(){return c.length+a.length>=rt}s=s||{};var b=u||0,it=s.optionalDataInterval||b*f+1,rt=s.maxBatchSize||e,h;o=!!o;var l=!1,c=[],a=[],p=Q(),v=0,w=0,g=n.noop,nt=function(n){h=i.setTimeout(g,n);w=v},k=o?function(n,t){if(d())y(!0,!!t),v=
w=0;else{var r=n||b;v=Date.now()+r;g=function(){if(h=0,v){var n=v-Date.now();n<=0?(y(!0,!!t),v=w=0):nt(n)}};w>v&&(i.clearTimeout(h),h=0);h||nt(r)}}:function(n,t){d()?y(!0,!!t):h||(h=i.setTimeout((function(){h=null;y(!0,!!t)}),n||b))};this.execute=function(n,i){i?(a=t(a,n),tt()):(c=t(c,n),l||k())};this.flush=function(){return c.length?p.then((function(){return y(!1,!1)})):p}}return t.getMergeIntoArrayDataMerger=function(){return n.merge},t.getPostArrayExecutor=function(n){return function(t){if(Array.isArray(t)&&t.length)return u.postJSON({uri:n.uri,headers:n.headers,isBackgroundTask:!!n.isBackgroundTask,setAuthorizationHeader:!!n.setAuthHeader,skipTelemetry:!!n.skipTelemetry},t)}},t})();t.Debouncer=o})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function e(n,f,e,o,s){function a(n){return function(i){return t.getPostArrayExecutor({uri:n,headers:l,isBackgroundTask:!c,setAuthHeader:!0,skipTelemetry:f})(i)}}var c=0,l,h;return o=o||r,s=s||u,f=!!f,l={"x-ms-client-version":
i.version,"x-ms-client-query":JSON.stringify(i.query),"x-ms-extension-name":e,"x-ms-time-zone-offset":(new Date).getTimezoneOffset()+""},i.isDevelopmentMode&&(l["x-ms-client-settings"]="devmode"),h=new t(t.getMergeIntoArrayDataMerger(),a(n),o,!0,{maxBatchSize:s}),{execute:function(n,t){h.execute(n,t)},flush:function(){var n=h.flush();return Q.isPending(n)?(c++,h.flush().finally((function(){c--}))):n}}}var t=MsPortalFx.Base.Debouncer,r=1e4,u=2e3,f=window,i=f.fx.environment;n.getStandardDebouncer=e})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function e(n){return function(){return n}}function bt(n){return ft.initialize(n)}function kt(n){v.invokeRpc(c.RegisterExtension,y,undefined);v.registerRpcEndPoint(c.TraceTelemetry,{allowedOrigin:[y],handler:function(t){n?n.trace(t):et(t)}})}function et(n){i.trace(n)}function dt(n){return i.start(n)}function gt(n){return i.startTrace(n)}function ni(n,t){return i.endTrace(n,!1,t)}function ti(n,t)
{return i.endTrace(n,!0,t)}function ii(n,t,r){return i.endTrace(n,t,r)}function ri(n){i.resetTrace(n)}function ui(){return i.flush()}function fi(n){i.telemetryEventProcessors.push(n)}function o(t){var i={timestamp:vt(),data:p(t.data)};return n.shallowCopyFromObject(i,t,["source","action","actionModifier","assetType","duration","extension","name","journeyId","optional"]),i}var s=n.Base,h=s.Constants,c=h.TelemetrySharing,l=n.isNullOrUndefined,ot=s.Diagnostics,st=FxImpl.TelemetryContext,ht=n.Helpers.resolve(),u=n.noop,a=window,ct=a.fx,lt=n.startTimer,f=ct.environment,v=FxImpl.Rpc.client,at=new ot.Log("MsPortalFx.Base.Diagnostics.Telemetry"),y=h.Shell,vt=Date.now,p=JSON.stringify,yt=f.features.canmodifyextensions==="true",w=n.isFeatureEnabled("nativeperf"),b="start",k="complete",d="reset",g="cancel",nt="mark",pt,ut,i,ft;(function(n){n.Start=b;n.Complete=k;n.Reset=d;n.Cancel=g;n.Mark=nt})(pt=t.ActionModifier||(t.ActionModifier={}));var r=a.performance,tt=function(n){return"start: "+n},wt=function(
n){return"end: "+n},it=u,rt=u;r&&r.mark&&r.measure&&(it=function(n){r.mark(tt(n))},rt=function(n){var t=wt(n),i=tt(n);r.mark(t);r.measure(n,i,t)});ut=(function(){function n(n){function f(n){var t=st.getCurrentValues();l(t)||(n.context=p(t))}function e(t){n.forEach((function(n){try{t(n)}catch(i){at.error(i)}}))}function s(n,i,r){var u=o(n._evt);return u.actionModifier=i,u.duration=n._timer(),r=r||t,r(u),u.duration}function h(n){n._evt.duration=0;n._timer=lt()}function v(n){s(n,d);h(n)}function c(n){return function(t){t=o(t);var f=a++,r="telemetry_"+f,u={_evt:t,_timer:null};return t.actionModifier=b,h(u),i[r]=u,w&&it(t.action+"_"+r),n(t),r}}var i={},a=1,t;this._perf=r;t=yt?u:function(n){e((function(t){t.trace(n)}))};this.telemetryEventProcessors=n;this.trace=function(n){var i=n.timestamp;n=o(n);n.actionModifier=n.actionModifier||nt;n.timestamp=i||n.timestamp;f(n);t(n)};this.start=c(u);this.startTrace=c(t);this.endTrace=function(n,r,u){var e=i[n],o;if(e)return typeof r=="boolean"&&(r=r?k:g),o=
s(e,r,(function(n){l(u)||(n.data=u);f(n);t(n)})),w&&rt(e._evt.action+"_"+n),delete i[n],o};this.resetTrace=function(n){var t=i[n];t&&v(t)};this.flush=function(){var n=[],t;return e((function(t){n.push(t.flush())})),t=n.every((function(n){return!Q.isPending(n)})),t?Q():Q.all(n)}}return n})();i={telemetryEventProcessors:[],trace:u,start:e(""),startTrace:e(""),endTrace:e(0),resetTrace:u,flush:e(ht)},(function(t){function r(t,r){var o=i.telemetryEventProcessors,u=f.extensionTelemetryUri,e;return f.enablePortalLogging&&u||(u=f.telemetryUri),e=r&&r.length?r:[n.Services.getTelemetryEventProcessor(u,t)],i=new ut(e),o}t.initialize=r})(ft=t.Internal||(t.Internal={}));t.initialize=bt;t.registerForShellTelemetry=kt;t.trace=et;t.start=dt;t.startTrace=gt;t.cancelTrace=ni;t.completeTrace=ti;t.endTrace=ii;t.resetTrace=ri;t.flush=ui;t.addProcessor=fi})(i=t.Telemetry||(t.Telemetry={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var
t;(function(n){var t;(function(n){"use strict";function t(n,t,i,r){t.activatedItems.subscribeArrayChanges(n,i,r)}function r(n,t,i){return $.extend({source:n,action:t},i)}function i(t,i,u){return function(f){n.trace(r(t,i,u(f)))}}function u(n,r,u,f,e,o){t(n,r,i(u,f,o),i(u,e,o))}n.addActivatedItemsWatcher=t;n.addActivatedItemsTelemetryWatcher=u})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){if(n){var t=e.location.search;t&&n.indexOf("?")===-1&&(n+=t);r=FxImpl.getStandardDebouncer(n,!0,i.extensionName);u._setBufferFullCallback((function(n){return r.execute(n),[]}))}else u._setBufferFullCallback((function(){return[]}))}function h(){}function c(){return u.flush(),r?r.flush():Q()}var s=n.Base,e=window,i=e.fx.environment,u=s.Diagnostics.Log,f=i.extensionTraceUri,r;t.initialize=o;t.upload=h;t.flush=c;i.enablePortalLogging&&
f||(f=i.clientTraceUri);o(f)})(i=t.Upload||(t.Upload={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t;(function(t){var i;(function(t){function u(n,t){throw new Error(n.format(t));}function e(n,t,i){return n.substr(t,i)}function st(n){var t,r,o,f,e,i;l={};for(t in n)if(n.hasOwnProperty(t)){for(r=t.split("_"),o=r.length,i=l,e=0;e<o-1;e++)f=r[e],f||u("Resource key '{0}' is not in the correct format.",t),i=i[f]=i[f]||{};i[r[o-1]]=n[t]}}function nt(n){return w.getResources("MsPortalFx.Resources."+n)||{}}function tt(n,t){var r,u;n||(n=o.fx.environment);d=n.applicationPath;h=n.contentUriBasePath||i;c=n.contentVersionToken||"";g=(n.versionedContentRoots||[]).map((function(n){return s(n.toLowerCase(),i)}));w&&(t=t||nt("Strings"),r=nt("Regions"),r.formats&&y.setLocaleValues&&y.setLocaleValues(r.formats));u=[];n.isRtl&&u.push("rtl=true");f=u.join("&");st(t||{})}function ht(n,t){var i={};return k(n,(function(n,r){typeof r==
"string"&&(i[n]=t(r))})),i}function ct(n){return ht(n,(function(n){return it(r(et,n))}))}function lt(t){t||u("Control must be specified.");for(var f=t.split("."),e,i=l,r=0;r<f.length;r++)e=f[r],i=i[e],i||u("Control {0} is not recognized.",t);return n.clone(i,!0)}function r(){for(var f,r,h,c=[],u=0;u<arguments.length;u++)c[+u]=arguments[u];var l=arguments.length,n="",o=!1;for(f=0;f<l;f++)r=arguments[f],r&&(n&&(r=s(r,i),n+=i),h=r.length-1,o=r[h]===i,o&&(r=e(r,0,h)),n+=r);return o&&(n+=i),t.isUriAbsolute(n)||n[0]===i||(n=i+n),n}function a(n,o,l){var a,v;return n=s(n,i),v=n.toLowerCase(),g.forEach((function(n){if(!a&&v.startsWith(n)){var t=n.length;(v.length===t||v[t]===i)&&(a=t)}})),o===1||o===2?(t.isUriAbsolute(n)&&u("The '{0}' URI is not a valid content URI because it is an absolute URI.",n),a||u("The '{0}' URI is an application relative URI. However a content URI was expected. Did you mean to call getAppRelativeUri?",n),c!==""&&(n=r(e(n,0,a),c,e(n,a))),o===2&&f&&(n+=n.indexOf("?")>0?"&"+f:"?"+
f),n=r(h,n)):t.isUriAbsolute(n)||(a&&u("The '{0}' URI is a content URI. However an application relative URI was expected. Did you mean to call getContentUri?",n),n=r(d,n)),l&&!t.isUriAbsolute(n)&&(n=r(p,n)),n}function it(n,t){return t===void 0&&(t=!0),a(n,2,t)}function at(n){return a(n,1,!1)}function vt(n){return a(n,0,!1)}function rt(n,i){return i===void 0&&(i=!0),n=n||"",t.isUriAbsolute(n)||(n=r(h,n),i&&!t.isUriAbsolute(n)&&(n=r(p,n))),n}function yt(n){var t=n.lastIndexOf(".");return t!==-1?e(n,0,t):n}function ft(n,t,r,u){var f=t[r];return f||(t[r]=f={}),n.forEach((function(n){if(typeof n=="string"){var r=yt(n);f[r]=ut+u+"_"+n}else k(n,(function(n,r){ft(r,t,n,u+i+n)}))})),t}function pt(n,t){var i=v.get(n);return i||(i=ft(n,{},"",""),v.set(n,i)),i[t]}var o=window,y=Date,p="//"+o.location.host,w=o.Resources,i="/",b="Content/",et=b+"Images",ot=b+"Static",k=n.forEachKey,s=n.trimStart,d,h,c,g=[],f,l={},ut,v;t.initialize=tt;t.getImages=ct;t.getStrings=lt;t.isUriAbsolute=n.isUriAbsolute;t.getContentUri=
it;t.getScriptUri=at;t.getAppRelativeUri=vt;t.getVersionlessContentUri=rt;tt();ut=rt(r(ot,i));v=new n.Map;t._getImageMap=pt})(i=t.Resources||(t.Resources={}))})(t=n.Base||(n.Base={}));n.getImages=t.Resources._getImageMap})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function i(n){if(t)throw new Error(n);}function s(n,t){if(typeof n.dispose=="function")t&&n.dispose();else if(typeof n=="function")t&&n();else return!1;return!0}var u=window.fx.environment,f=u.isDevelopmentMode,e=u.trace,o=e?e.lifetime:!1,t=f||o,r=f&&o,h=(function(){function n(){var n=this;this._disposables=[];this._isDisposed=!1;this._isDisposing=!1;this._container=null;this._children=[];this._failToDispose=[];this.registerForDispose=function(t){var i;return i=Array.isArray(t)?t:[t],i.forEach((function(t){n._registerForDispose(t)})),n};r&&(this._diagnosticCreateStack=MsPortalFx.getCurrentCallStack(!0))}return n.setDevMode=function(n){t=n},n.setDiagnosticMode=function(n){n?(t=!0,r=!0):r=!1},n.prototype.isDisposed=function(
){return this._isDisposed},n.prototype.createChildLifetime=function(){var t=new n;return t._container=this,this._children.push(t),t},n.prototype.dispose=function(){var u=this,n=[],r;this._isDisposed||(this._isDisposed=!0,this._isDisposing=!0,[this._disposables,this._children].forEach((function(i){while(i.length){var r=i.pop();try{s(r,!0)}catch(f){t&&(n.push(f),u._failToDispose.push(r))}}})),n.length&&i("error to disposing this lifetimeManager. Exceptions: "+n.map((function(n){return n.toString()})).join("\n")),r=this._container,r&&(this._container=null,r._unregisterChildForDispose(this)),this._isDisposing=!1)},n.prototype._unregisterChildForDispose=function(n){var t=this._children,r;this._isDisposing||(r=t.lastIndexOf(n),r<0?i("lifetime Manager internal error.  this._unregisterChildForDispose is called but the disposeable is not one of the child it created."):r===t.length-1?t.pop():t.splice(r,1))},n.prototype._isRegistered=function(n){return this._disposables.lastIndexOf(n)>=0||this._children.
lastIndexOf(n)>=0},n.prototype._registerForDispose=function(n){var r=!this._isDisposed;n?s(n,!r)||(i("disposable must have a dispose method or be a function."),r=!1):r=!1;t&&this._isRegistered(n)&&i("Unable to add this disposable to LifetimeManager. This disposable is already included in the LifetimeManager.");r&&this._disposables.push(n)},n})();n.TriggerableLifetimeManager=h})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function s(t){var i=c[t];return n.isNullOrUndefined(i)?null:"#"+i.substr(f.length)}function h(n){return i[n]}function w(n){var t=n.length,i=f.length;if(t===e)return n;if(t===e+1){if(n[0]==="#")return n.substr(1)}else if(t===e+i&&n.substr(0,i)===f)return n.substr(i);return null}function b(t){var r=w(t),i;return!n.isNullOrUndefined(r)&&(i=c[f+r],!n.isNullOrUndefined(i))?i:null}function k(t){return n.isNullOrUndefined(t)?0:t.length>=e?b(t):i[t]}function rt(t,i){var u=k(t),r;return n.isNullOrUndefined(u)?null:(r=d(u),i?r.map(s):r.map(h))}function d(n){return n=
n%g,it[n]}function ut(){if(n.isNullOrUndefined(u)){var t=0;for(u=new Array(33),t=0;t<u.length;t++)u[t]=t}return u}function r(t,i){var u=new Array(t&&t.length),f=t.length,r,e=n.isNullOrUndefined(i)?0:i;if(i){for(r=0;r<f;r++)u[r]=t[(r+e)%f];return u}return t}function v(n){return r(nt,n)}function y(n){return r(tt,n)}function ft(t){return n.isNullOrUndefined(l)&&(l=v().map(h)),r(l,t)}function et(t){return n.isNullOrUndefined(a)&&(a=v().map(s)),r(a,t)}function ot(t){return n.isNullOrUndefined(o)&&(o=y().map(h)),r(o,t)}function st(t){return n.isNullOrUndefined(p)&&(p=y().map(s)),r(o,t)}var f="Hex_",e=6,c;(function(n){n[n.Hex_fcd116=0]="Hex_fcd116";n[n.Hex_eb3c00=1]="Hex_eb3c00";n[n.Hex_ba141a=2]="Hex_ba141a";n[n.Hex_b4009e=3]="Hex_b4009e";n[n.Hex_442359=4]="Hex_442359";n[n.Hex_002050=5]="Hex_002050";n[n.Hex_0072c6=6]="Hex_0072c6";n[n.Hex_008272=7]="Hex_008272";n[n.Hex_007233=8]="Hex_007233";n[n.Hex_7fba00=9]="Hex_7fba00";n[n.Hex_a0a5a8=10]="Hex_a0a5a8";n[n.Hex_fff100=11]="Hex_fff100";n[n.Hex_ff8c00=
12]="Hex_ff8c00";n[n.Hex_e81123=13]="Hex_e81123";n[n.Hex_ec008c=14]="Hex_ec008c";n[n.Hex_68217a=15]="Hex_68217a";n[n.Hex_00188f=16]="Hex_00188f";n[n.Hex_00bcf2=17]="Hex_00bcf2";n[n.Hex_00b294=18]="Hex_00b294";n[n.Hex_009e49=19]="Hex_009e49";n[n.Hex_bad80a=20]="Hex_bad80a";n[n.Hex_bbc2ca=21]="Hex_bbc2ca";n[n.Hex_fffc9e=22]="Hex_fffc9e";n[n.Hex_ffb900=23]="Hex_ffb900";n[n.Hex_dd5900=24]="Hex_dd5900";n[n.Hex_f472d0=25]="Hex_f472d0";n[n.Hex_9b4f96=26]="Hex_9b4f96";n[n.Hex_4668c5=27]="Hex_4668c5";n[n.Hex_6dc2e9=28]="Hex_6dc2e9";n[n.Hex_00d8cc=29]="Hex_00d8cc";n[n.Hex_55d455=30]="Hex_55d455";n[n.Hex_e2e584=31]="Hex_e2e584";n[n.Hex_d6d7d8=32]="Hex_d6d7d8";n[n.Hex_807900=33]="Hex_807900";n[n.Hex_804600=34]="Hex_804600";n[n.Hex_740912=35]="Hex_740912";n[n.Hex_760046=36]="Hex_760046";n[n.Hex_34113d=37]="Hex_34113d";n[n.Hex_000c48=38]="Hex_000c48";n[n.Hex_005e79=39]="Hex_005e79";n[n.Hex_084c41=40]="Hex_084c41";n[n.Hex_063d20=41]="Hex_063d20";n[n.Hex_3d460a=42]="Hex_3d460a";n[n.Hex_32383f=43]="Hex_32383f";
n[n.Hex_bfb500=44]="Hex_bfb500";n[n.Hex_bf6900=45]="Hex_bf6900";n[n.Hex_ae0d1a=46]="Hex_ae0d1a";n[n.Hex_b10069=47]="Hex_b10069";n[n.Hex_4e195c=48]="Hex_4e195c";n[n.Hex_00126b=49]="Hex_00126b";n[n.Hex_008db5=50]="Hex_008db5";n[n.Hex_00856f=51]="Hex_00856f";n[n.Hex_0f5b2f=52]="Hex_0f5b2f";n[n.Hex_8ba208=53]="Hex_8ba208";n[n.Hex_464f59=54]="Hex_464f59";n[n.Hex_fcf37e=55]="Hex_fcf37e";n[n.Hex_ffba66=56]="Hex_ffba66";n[n.Hex_f1707b=57]="Hex_f1707b";n[n.Hex_f466ba=58]="Hex_f466ba";n[n.Hex_a47aaf=59]="Hex_a47aaf";n[n.Hex_6674bc=60]="Hex_6674bc";n[n.Hex_66d7f7=61]="Hex_66d7f7";n[n.Hex_66d1bf=62]="Hex_66d1bf";n[n.Hex_66c592=63]="Hex_66c592";n[n.Hex_d6e86c=64]="Hex_d6e86c";n[n.Hex_8f9ca8=65]="Hex_8f9ca8";n[n.Hex_fffccc=66]="Hex_fffccc";n[n.Hex_ffe8cc=67]="Hex_ffe8cc";n[n.Hex_facfd3=68]="Hex_facfd3";n[n.Hex_fbcce8=69]="Hex_fbcce8";n[n.Hex_e1d3e4=70]="Hex_e1d3e4";n[n.Hex_ccd1e9=71]="Hex_ccd1e9";n[n.Hex_ccf2fc=72]="Hex_ccf2fc";n[n.Hex_ccf0ea=73]="Hex_ccf0ea";n[n.Hex_ccecdb=74]="Hex_ccecdb";n[n.Hex_f0f7b2=
75]="Hex_f0f7b2";n[n.Hex_63707e=76]="Hex_63707e";n[n.max=77]="max"})(t.AllRawColorCode||(t.AllRawColorCode={}));c=t.AllRawColorCode,(function(n){n[n.a1=0]="a1";n[n.b1=1]="b1";n[n.c1=2]="c1";n[n.d1=3]="d1";n[n.e1=4]="e1";n[n.f1=5]="f1";n[n.g1=6]="g1";n[n.h1=7]="h1";n[n.i1=8]="i1";n[n.j1=9]="j1";n[n.k1=10]="k1";n[n.a0=11]="a0";n[n.b0=12]="b0";n[n.c0=13]="c0";n[n.d0=14]="d0";n[n.e0=15]="e0";n[n.f0=16]="f0";n[n.g0=17]="g0";n[n.h0=18]="h0";n[n.i0=19]="i0";n[n.j0=20]="j0";n[n.k0=21]="k0";n[n.a2=22]="a2";n[n.b2=23]="b2";n[n.c2=24]="c2";n[n.d2=25]="d2";n[n.e2=26]="e2";n[n.f2=27]="f2";n[n.g2=28]="g2";n[n.h2=29]="h2";n[n.i2=30]="i2";n[n.j2=31]="j2";n[n.k2=32]="k2";n[n.a0s2=33]="a0s2";n[n.b0s2=34]="b0s2";n[n.c0s2=35]="c0s2";n[n.d0s2=36]="d0s2";n[n.e0s2=37]="e0s2";n[n.f0s2=38]="f0s2";n[n.g0s2=39]="g0s2";n[n.h0s2=40]="h0s2";n[n.i0s2=41]="i0s2";n[n.j0s2=42]="j0s2";n[n.k0s2=43]="k0s2";n[n.a0s1=44]="a0s1";n[n.b0s1=45]="b0s1";n[n.c0s1=46]="c0s1";n[n.d0s1=47]="d0s1";n[n.e0s1=48]="e0s1";n[n.f0s1=49]="f0s1";
n[n.g0s1=50]="g0s1";n[n.h0s1=51]="h0s1";n[n.i0s1=52]="i0s1";n[n.j0s1=53]="j0s1";n[n.k0s1=54]="k0s1";n[n.a0t1=55]="a0t1";n[n.b0t1=56]="b0t1";n[n.c0t1=57]="c0t1";n[n.d0t1=58]="d0t1";n[n.e0t1=59]="e0t1";n[n.f0t1=60]="f0t1";n[n.g0t1=61]="g0t1";n[n.h0t1=62]="h0t1";n[n.i0t1=63]="i0t1";n[n.j0t1=64]="j0t1";n[n.k0t1=65]="k0t1";n[n.a0t2=66]="a0t2";n[n.b0t2=67]="b0t2";n[n.c0t2=68]="c0t2";n[n.d0t2=69]="d0t2";n[n.e0t2=70]="e0t2";n[n.f0t2=71]="f0t2";n[n.g0t2=72]="g0t2";n[n.h0t2=73]="h0t2";n[n.i0t2=74]="i0t2";n[n.j0t2=75]="j0t2";n[n.k0t2=76]="k0t2";n[n.max=77]="max"})(t.ColorCode||(t.ColorCode={}));var i=t.ColorCode,g=11,l,a,o,p,u,nt=[i.a0,i.a1,i.b2,i.b0,i.c2,i.b1,i.c0,i.c1,i.d0,i.d1,i.e2,i.e0,i.e1,i.f1,i.f0,i.g1,i.g0,i.g2,i.h2,i.h0,i.h1,i.i1,i.i0,i.i2,i.j1,i.j0,i.j2,],tt=[i.g0,i.f0,i.e0,i.h0,i.i0,i.j0,i.a1,i.b1,i.c1,i.d1,i.e1,i.f1,i.g1,i.h1,i.i1,i.j1,i.b2,i.c2,i.e2,i.g2,i.h2,i.i2,i.j2,i.a0,i.b0,i.c0,i.d0,],it={0:[i.a0s2,i.a0s1,i.a0,i.a0t1,i.a0t2,],1:[i.b0s2,i.b0s1,i.b0,i.b0t1,i.b0t2,],2:[i.c0s2,i.c0s1,
i.c0,i.c0t1,i.c0t2,],3:[i.d0s2,i.d0s1,i.d0,i.d0t1,i.d0t2,],4:[i.e0s2,i.e0s1,i.e0,i.e0t1,i.e0t2,],5:[i.f0s2,i.f0s1,i.f0,i.f0t1,i.f0t2,],6:[i.g0s2,i.g0s1,i.g0,i.g0t1,i.g0t2,],7:[i.h0s2,i.h0s1,i.h0,i.h0t1,i.h0t2,],8:[i.i0s2,i.i0s1,i.i0,i.i0t1,i.i0t2,],9:[i.j0s2,i.j0s1,i.j0,i.j0t1,i.j0t2,],10:[i.k0s2,i.k0s1,i.k0,i.k0t1,i.k0t2,]};t.getRawColorString=s;t.getColorCodeString=h;t.getRawColorCode=w;t.getRawColorIndex=b;t.getColorIndex=k;t.getColorCodeTintSet=rt;t.getColorCodeTintSetIndex=d;t.getAllColorCodeIndexes=ut;t.getRotatedArray=r;t.getGradientColorCodeIndexes=v;t.getRainbowColorCodeIndexes=y;t.getGradientColorCode=ft;t.getRawGradientColorCode=et;t.getRainbowColorCode=ot;t.getRawRainbowColorCode=st})(t=n.ColorUtil||(n.ColorUtil={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(n,t,r){this.startDateTime=i(n,null);this.endDateTime=i(t,null);this.timezoneOffset=i(r,-(new Date).getTimezoneOffset())}return n})();t.DateTimeRange=
r})(t=n.DateUtil||(n.DateUtil={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function o(n){return{original:n,type:n>>f,index:n&127,perTime:!!(n&e)}}function vt(n,t,i){return ut.isNumeric(n)?yt(Math.abs(n),t,i):t}function yt(t,i,r){var c=o(i),e,h=i,s=t,u,f,l,a=n.isNullOrUndefined(r)?i:r;if(c.type>0&&(e=at[c.type],u=e.indexOf(i),f=t>1?1:-1,l=f>0?e.length-1:0,t!==1)){while(u!==l){if(s=t/tt(i,e[u+f])+et,f>0){if(s<1)break}else if(s>=1){u+=f;break}u+=f}h=e[u];f<0&&u===0&&s<ft&&(h=a)}return h}function a(n,t,i){var r=ht[n],u=r[t],f=r[i];return{dividend:f.dividend*u.divisor,divisor:f.divisor*u.dividend}}function pt(n,t,i){var r=t.index-k,u=i.index-k,o=Math.max(0,r),s=Math.max(0,u),h=-Math.min(0,r),c=-Math.min(0,u),f=a(n,o,s),e=a(2,c+b,h+b);return{dividend:f.dividend*e.dividend,divisor:f.divisor*e.divisor}}function tt(n,t){var i=bt(n,t);return i.dividend/i.divisor}function wt(n,t){var i=l[n];return i?i[t]:null}function it(n,t,i){var r=l[n];r||(r=l[n]={});r[t]=i}function bt(
n,t){var e,f,r=null,h=!1,i;if(n===t)return s;if(i=wt(n,t),i)return i;if(e=o(n),f=o(t),e.type===f.type){switch(f.type){case u.DecimalPerTime:h=!0;case u.Decimal:r=0;break;case u.BytesPerTime:h=!0;case u.Bytes:r=1;break;case u.BytesPerTime_SI:h=!0;case u.Bytes_SI:r=0;break;case u.Time:r=2}if(r!==null)return i=h?pt(r,e,f):a(r,e.index,f.index),it(n,t,i),it(t,n,{dividend:i.divisor,divisor:i.dividend}),i}throw"Not supported: conversion from unit "+n+"("+v(n)+") to unit "+t+"("+v(t)+") is not supported.";}function v(n,t){var i;return t===!0?(i=g[n],i===y&&(i=g[n]=rt(n,!0))):(i=d[n],i===y&&(i=d[n]=rt(n,!1))),i}function rt(n,t){switch(n){case r.Count:return"";case r.Thousand:return i.thousand;case r.Million:return i.million;case r.Billion:return i.billion;case r.Trillion:return i.trillion;case r.Bytes:case r.Bytes_SI:return i.bytes;case r.Kilobytes:return t?i.kilobytesSI:i.kilobytes;case r.Kilobytes_SI:return i.kilobytesSI;case r.Megabytes:return t?i.megabytesSI:i.megabytes;case r.Megabytes_SI:
return i.megabytesSI;case r.Gigabytes:return t?i.gigabytesSI:i.gigabytes;case r.Gigabytes_SI:return i.gigabytesSI;case r.Terabytes:return t?i.terabytesSI:i.terabytes;case r.Terabytes_SI:return i.terabytesSI;case r.Petabytes:return t?i.petabytesSI:i.petabytes;case r.Petabytes_SI:return i.petabytesSI;case r.BytesPerDay:case r.BytesPerDay_SI:return i.bytesPerDay;case r.BytesPerHour:case r.BytesPerHour_SI:return i.bytesPerHour;case r.BytesPerMinute:case r.BytesPerMinute_SI:return i.bytesPerMinute;case r.BytesPerSecond:case r.BytesPerSecond_SI:return i.bytesPerSecond;case r.KilobytesPerSecond:return t?i.kilobytesPerSecondSI:i.kilobytesPerSecond;case r.KilobytesPerSecond_SI:return i.kilobytesPerSecondSI;case r.MegabytesPerSecond:return t?i.megabytesPerSecondSI:i.megabytesPerSecond;case r.MegabytesPerSecond_SI:return i.megabytesPerSecondSI;case r.GigabytesPerSecond:return t?i.gigabytesPerSecondSI:i.gigabytesPerSecond;case r.GigabytesPerSecond_SI:return i.gigabytesPerSecondSI;case r.TerabytesPerSecond:
return t?i.terabytesPerSecondSI:i.terabytesPerSecond;case r.TerabytesPerSecond_SI:return i.terabytesPerSecondSI;case r.PetabytesPerSecond:return t?i.petabytesPerSecondSI:i.petabytesPerSecond;case r.PetabytesPerSecond_SI:return i.petabytesPerSecondSI;case r.CountPerDay:return i.countPerDay;case r.CountPerHour:return i.countPerHour;case r.CountPerMinute:return i.countPerMinute;case r.CountPerSecond:return i.countPerSecond;case r.ThousandPerSecond:return i.thousandPerSecond;case r.MillionPerSecond:return i.millionPerSecond;case r.BillionPerSecond:return i.billionPerSecond;case r.TrillionPerSecond:return i.trillionPerSecond;case r.MicroSeconds:return i.microSeconds;case r.MilliSeconds:return i.milliSeconds;case r.Seconds:return i.seconds;case r.Minutes:return i.minutes;case r.Hours:return i.hours;case r.Days:return i.days;case r.Percentage:return i.percentage;default:return""}}var y=undefined,ut=jQuery,i=n.Resources.Strings.UnitConversion,ft=.0001,et=1e-5,s={dividend:1,divisor:1},p=60,w=60*
p,h=24*w,ot=7*h,st=30*h,c=[{dividend:1,divisor:Math.pow(10,6)},{dividend:1,divisor:Math.pow(10,3)},s,{dividend:p,divisor:1},{dividend:w,divisor:1},{dividend:h,divisor:1},{dividend:ot,divisor:1},{dividend:st,divisor:1},],b=c.indexOf(s),f=8,k=3,e=1<<f-1,ht=[function(n){return{dividend:Math.pow(10,3*n),divisor:1}},function(n){return{dividend:Math.pow(2,10*n),divisor:1}},function(n){return c[n]}].map((function(n){return c.map((function(t,i){return n(i)}))})),l={},d={},g={},u,r;(function(n){n[n.None=0]="None";n[n.Bytes=1]="Bytes";n[n.Decimal=2]="Decimal";n[n.Time=3]="Time";n[n.BytesPerTime=4]="BytesPerTime";n[n.DecimalPerTime=5]="DecimalPerTime";n[n.Bytes_SI=6]="Bytes_SI";n[n.BytesPerTime_SI=7]="BytesPerTime_SI"})(u||(u={})),(function(n){n[n.None=u.None<<f]="None";n[n.Percentage=n.None+1]="Percentage";n[n.Bytes=u.Bytes<<f]="Bytes";n[n.Kilobytes=n.Bytes+1]="Kilobytes";n[n.Megabytes=n.Bytes+2]="Megabytes";n[n.Gigabytes=n.Bytes+3]="Gigabytes";n[n.Terabytes=n.Bytes+4]="Terabytes";n[n.Petabytes=n.Bytes+
5]="Petabytes";n[n.BytesPerDay=u.BytesPerTime<<f|e]="BytesPerDay";n[n.BytesPerHour=n.BytesPerDay+1]="BytesPerHour";n[n.BytesPerMinute=n.BytesPerDay+2]="BytesPerMinute";n[n.BytesPerSecond=n.BytesPerDay+3]="BytesPerSecond";n[n.KilobytesPerSecond=n.BytesPerDay+4]="KilobytesPerSecond";n[n.MegabytesPerSecond=n.BytesPerDay+5]="MegabytesPerSecond";n[n.GigabytesPerSecond=n.BytesPerDay+6]="GigabytesPerSecond";n[n.TerabytesPerSecond=n.BytesPerDay+7]="TerabytesPerSecond";n[n.PetabytesPerSecond=n.BytesPerDay+8]="PetabytesPerSecond";n[n.Count=u.Decimal<<f]="Count";n[n.Thousand=n.Count+1]="Thousand";n[n.Million=n.Count+2]="Million";n[n.Billion=n.Count+3]="Billion";n[n.Trillion=n.Count+4]="Trillion";n[n.MicroSeconds=u.Time<<f]="MicroSeconds";n[n.MilliSeconds=n.MicroSeconds+1]="MilliSeconds";n[n.Seconds=n.MicroSeconds+2]="Seconds";n[n.Minutes=n.MicroSeconds+3]="Minutes";n[n.Hours=n.MicroSeconds+4]="Hours";n[n.Days=n.MicroSeconds+5]="Days";n[n.CountPerDay=u.DecimalPerTime<<f|e]="CountPerDay";n[n.CountPerHour=
n.CountPerDay+1]="CountPerHour";n[n.CountPerMinute=n.CountPerDay+2]="CountPerMinute";n[n.CountPerSecond=n.CountPerDay+3]="CountPerSecond";n[n.ThousandPerSecond=n.CountPerDay+4]="ThousandPerSecond";n[n.MillionPerSecond=n.CountPerDay+5]="MillionPerSecond";n[n.BillionPerSecond=n.CountPerDay+6]="BillionPerSecond";n[n.TrillionPerSecond=n.CountPerDay+7]="TrillionPerSecond";n[n.Bytes_SI=u.Bytes_SI<<f]="Bytes_SI";n[n.Kilobytes_SI=n.Bytes_SI+1]="Kilobytes_SI";n[n.Megabytes_SI=n.Bytes_SI+2]="Megabytes_SI";n[n.Gigabytes_SI=n.Bytes_SI+3]="Gigabytes_SI";n[n.Terabytes_SI=n.Bytes_SI+4]="Terabytes_SI";n[n.Petabytes_SI=n.Bytes_SI+5]="Petabytes_SI";n[n.BytesPerDay_SI=u.BytesPerTime_SI<<f|e]="BytesPerDay_SI";n[n.BytesPerHour_SI=n.BytesPerDay_SI+1]="BytesPerHour_SI";n[n.BytesPerMinute_SI=n.BytesPerDay_SI+2]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=n.BytesPerDay_SI+3]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=n.BytesPerDay_SI+4]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=n.BytesPerDay_SI+5]="MegabytesPerSecond_SI";
n[n.GigabytesPerSecond_SI=n.BytesPerDay_SI+6]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=n.BytesPerDay_SI+7]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=n.BytesPerDay_SI+8]="PetabytesPerSecond_SI"})(t.Unit||(t.Unit={}));r=t.Unit;var nt=n.getEnumArray,ct=nt(u,!0),lt=nt(r).map((function(n){return o(n.value)})),at=ct.map((function(n){return n.value===0?[]:lt.filter((function(t){return t.type===n.value})).map((function(n){return n.original})).sort((function(n,t){return n-t}))}));t.getAppropriateUnit=vt;t.getConversionFactor=tt;t.toString=v})(t=n.UnitConversionUtil||(n.UnitConversionUtil={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function s(n,t,u){var f=e(u)?null:i(u),o=r.getAppropriateUnit(n,i(t),f);return a(o)}function h(n,t){return r.getConversionFactor(i(n),i(t))}function c(n,t){return r.toString(i(n),t)}function y(n,t,i,r,u,f){return l(n,t,s(n,t,u),i,r,u,f)}function l(n,t,i,r,u,f,s){var w=u?u:v,a=r?r:{minimumFractionDigits:0,maximumFractionDigits:2},
y=h(t,i),p=i,l="";return n===0?(l=o(a).format(n),p=e(f)?i:f):y&&(l=o(a).format(n/y)),w.format(l,c(p,s))}function i(n){var t=r.Unit,i=u[n];return t[i]}function a(n){var t=u,i=r.Unit[n];return t[i]}var f=n,r=f.UnitConversionUtil,e=f.isNullOrUndefined,o=FxImpl.Intl.NumberFormat.create,v="{0} {1}",u;(function(n){n[n.None=0]="None";n[n.Percentage=1]="Percentage";n[n.Bytes=2]="Bytes";n[n.Kilobytes=3]="Kilobytes";n[n.Megabytes=4]="Megabytes";n[n.Gigabytes=5]="Gigabytes";n[n.Terabytes=6]="Terabytes";n[n.Petabytes=7]="Petabytes";n[n.BytesPerDay=8]="BytesPerDay";n[n.BytesPerHour=9]="BytesPerHour";n[n.BytesPerMinute=10]="BytesPerMinute";n[n.BytesPerSecond=11]="BytesPerSecond";n[n.KilobytesPerSecond=12]="KilobytesPerSecond";n[n.MegabytesPerSecond=13]="MegabytesPerSecond";n[n.GigabytesPerSecond=14]="GigabytesPerSecond";n[n.TerabytesPerSecond=15]="TerabytesPerSecond";n[n.PetabytesPerSecond=16]="PetabytesPerSecond";n[n.Count=17]="Count";n[n.Thousand=18]="Thousand";n[n.Million=19]="Million";n[n.Billion=
20]="Billion";n[n.Trillion=21]="Trillion";n[n.MicroSeconds=22]="MicroSeconds";n[n.MilliSeconds=23]="MilliSeconds";n[n.Seconds=24]="Seconds";n[n.Minutes=25]="Minutes";n[n.Hours=26]="Hours";n[n.Days=27]="Days";n[n.CountPerDay=28]="CountPerDay";n[n.CountPerHour=29]="CountPerHour";n[n.CountPerMinute=30]="CountPerMinute";n[n.CountPerSecond=31]="CountPerSecond";n[n.ThousandPerSecond=32]="ThousandPerSecond";n[n.MillionPerSecond=33]="MillionPerSecond";n[n.BillionPerSecond=34]="BillionPerSecond";n[n.TrillionPerSecond=35]="TrillionPerSecond";n[n.Bytes_SI=36]="Bytes_SI";n[n.Kilobytes_SI=37]="Kilobytes_SI";n[n.Megabytes_SI=38]="Megabytes_SI";n[n.Gigabytes_SI=39]="Gigabytes_SI";n[n.Terabytes_SI=40]="Terabytes_SI";n[n.Petabytes_SI=41]="Petabytes_SI";n[n.BytesPerDay_SI=42]="BytesPerDay_SI";n[n.BytesPerHour_SI=43]="BytesPerHour_SI";n[n.BytesPerMinute_SI=44]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=45]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=46]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=
47]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=48]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=49]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=50]="PetabytesPerSecond_SI"})(t.Unit||(t.Unit={}));u=t.Unit;t.getAppropriateUnit=s;t.getConversionFactor=h;t.toString=c;t.getConvertedValue=y;t.getConvertedValueForTargetUnit=l;t._convertUnitToInternalConversionUnit=i;t._convertInternalConversionUnitToUnit=a})(t=n.UnitConversion||(n.UnitConversion={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="string"}function s(n,t){var i=n.name;return n&&t[i.namespaceIndex]+"."+i.name}function h(n){return n?r[n]:null}function c(n,t){var i=l(n,t);return i&&i.itemType||null}function p(n,t){return h(c(n,t))}function l(n,t){var i=u(n)?h(n):n,r=i&&i.properties;return r&&r[t]}function w(n,t){var i=l(n,t);return!!(i&&i.isArray)}function b(n){var r=[],t=n&&n.properties,i;if(t)for(i in t)t.hasOwnProperty(i)&&r.push(i);
return r}function k(n){var i=u(n)?t.getTypeMetadata(n):n,r=i&&i.idProperties;return r||null}function ut(n){var t=k(n);return t&&t.length>0}function ft(n,i){for(var l=u(i)?t.getTypeMetadata(i):i,s=d(l),h,r,c=[],f=0,a=s.length;f<a;f++){if(h=s[f],r=o(n[h]),e(r))return;r===null&&(r=rt);c.push(r)}return c.join(",")}function d(n){return k(n)}function et(n,t){f(n,t,{visitArray:function(n,t){a.data(n,y,t)}})}function f(n,t,i){if(t)if(Array.isArray(o(n)))i.visitArray&&i.visitArray(n,t),o(n).forEach((function(n){f(n,t,i)}));else if(tt(n))for(var r in n)n.hasOwnProperty(r)&&f(n[r],c(t,r),i)}function ot(n){return a.data(n,y)}function g(n){var t=u(n)?r[n]:n,i={},f;return t&&(f=b(t),f.forEach((function(n){var r=p(t,n),u=w(t,n);if(u)i[n]=it();else if(!r||r.entityType)i[n]=v();else if(r.name)i[n]=v(g(r.name));else throw new Error("Cannot create entity.");}))),i}function st(n){return n&&n.entityType}function nt(n,t){t&&!t.name&&(t=i.clone(t),t.name=n);r[n]=t}function ht(n){for(var i,t,f=(n+"Type").split("."),
r=window,o=f.length,s=o-1,u=0;u<o;u++){if(i=f[u],t=r[i],u===s){if(t!==n){if(!e(t))throw new Error("Cannot create namespace for '"+n+"' because it already exists.");r[i]=n}}else if(typeof t!="object"){if(!e(t))throw new Error("Cannot create namespace for '"+n+"' at the segment '"+i+"' because it already exists.");t={};r[i]=t}r=t}}function ct(n){var t=n.namespaces,r=n.metadata,u=r.map((function(n){var o={},u,f,e,i;ht(s(n,t));e=n.properties;for(u in e)i=e[u],f=i.typeIndex,o[u]={isArray:!!i.isArray,isDate:!!i.isDate,itemType:f===-1?null:s(r[f],t),trackEdits:!!i.trackEdits,persistEdits:!!i.persistEdits};return{name:s(n,t),properties:o,idProperties:n.idProperties,entityType:n.entityType,hasGloballyUniqueId:n.hasGloballyUniqueId}})),i=n.rootTypeIndex;return u.forEach((function(n){nt(n.name,n)})),typeof i=="number"&&i>=0&&u[i]||null}var i=n,a=i.Helpers,tt=i.isObject,e=i.isUndefined,o=ko.unwrap,v=ko.observable,it=ko.observableArray,y="aux-type",rt="NULL-VALUED-ID-PROPERTY",r={},lt;t.getTypeMetadata=
h;t.getPropertyType=c;t.getPropertyTypeMetadata=p;t.getPropertyMetadata=l;t.getPropertyCardinality=w;t.getProperties=b;t.typeHasId=ut;t.getItemId=ft;t.getIdPropertyNames=d;t.decorateWithType=et;t.visitTypedData=f;t.getArrayItemType=ot;t.createEmptyObject=g;t.typeIsEntityType=st;t.setTypeMetadata=nt;t.setTypesMetadata=ct,(function(n){function t(){r={}}n.clearAllTypesMetadata=t})(lt=t.Internal||(t.Internal={}))})(i=t.Metadata||(t.Metadata={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(n.SortOrder||(n.SortOrder={}));var t=n.SortOrder})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=ko.observableArray,i="This callback is already registered.",u=(function(){function t(n){this._resetListeners=[];this._partialErrors=n||r()}return Object.defineProperty(t.prototype,"partialErrors",{get:function(
){return this._partialErrors},enumerable:!0,configurable:!0}),t.prototype.resetNavigation=function(){var n=this._resetListeners.map((function(n){return n()}));return Q.all(n)},t.prototype.addResetNavigationListener=function(n){if(this._resetListeners.indexOf(n)>=0)throw new Error(i);this._resetListeners.push(n)},t.prototype.removeResetNavigationListener=function(n){var t=this._resetListeners.indexOf(n);if(t<0)throw new Error(i);this._resetListeners.splice(t,1)},__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.DataNavigatorBase=u})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function f(t){return n.regExpTenantResource.test(t)}function t(t){return n.regExpSubscriptionId.test(t)}function i(t){return n.regExpResourceGroupId.test(t)}function e(t){return n.regExpResourceId.test(t)}function r(t){return n.regExpDeploymentResourceId.test(t)||n.regExpDeploymentId.test(t)}function u(t){return n.regExpTagId.
test(t)}function o(f,e){if(e===void 0&&(e=!1),typeof f!="string")return!1;var o=n.regExpResourceIdRelaxed.test(f)||t(f)||i(f);return e?o:o||r(f)||u(f)}n.regExpTenantResource=/^(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i;n.regExpSubscriptionId=/^\/subscriptions\/([^\/\s]+)$/i;n.regExpResourceGroupId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)$/i;n.regExpResourceId=/^(?:\/cloudname\/[^\/\s]+)?(?:\/subscriptions\/[^\/\s]+(\/resourcegroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)+)$/i;n.regExpResourceIdRelaxed=/^(?:\/subscriptions\/[^\/\s]+(\/resourcegroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i;n.regExpDeploymentId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)\/deployments\/([^\/]+)$/i;
n.regExpDeploymentResourceId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)\/providers\/microsoft.resources\/deployments\/([^\/]+)$/i;n.regExpTagId=/^\/subscriptions\/([^\/\s]+)\/tagNames\/([^\/]+)(?:\/tagValues\/([^\/]+))?$/i;n.isTenantResource=f;n.isSubscriptionId=t;n.isResourceGroupId=i;n.isResourceId=e;n.isDeploymentId=r;n.isTagId=u;n.isResourceManagerId=o})(t=n.ResourceTypes||(n.ResourceTypes={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.Tenant=1]="Tenant";n[n.Proxy=2]="Proxy"})(n.ResourceRoutingType||(n.ResourceRoutingType={}));var t=n.ResourceRoutingType})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){function u(n,r){i.requirejs.config(n);r&&MsPortalFx.extend(t.fxRequireConfig,r)}var i=window,r=i.fx,t=r.environment,f;n.setupRequire=u,(function(r){"use strict";function wt(n,t,i){return"message"in i?
"status"in i?Q.reject(new Error("Failed to load AMD dependency for "+t+" '"+n+"'.\r\nurl: "+i.srcUrl+"\r\nstatus: "+i.status+"\r\nstatusText: "+i.statusText)):Q.reject(new Error("Failed to retrieve the "+t+" defintion for '"+n+"' from the server.\r\nmessage:"+i.message)):Q.reject(i)}function tt(n,t,i){return MsPortalFx.require(at(n,"/")+i).then((function(n){return n[t]})).catch((function(n){return wt(i,t,n)}))}var c=MsPortalFx,a=c.Base,s=n.Rpc,k=a.Net2,it=c.Extension,v=c.ViewModels,rt=s.ActionEndPointDefinition,d=a.Constants,o=s.FuncEndPointDefinition,ut=n.TelemetryContext,g=s.ProxiedObjectTypeDefinition,u=n.Constants.RpcMethods,ct=v.Services.ResourceTypes,ft=d.ViewModelTypes,nt=n.NetDiagnostics,lt=c.isNullOrUndefined,y=undefined,at=c.ensureSuffix,e=d.Shell,bt=t.isDevelopmentMode,vt=c.isFeatureEnabled,et=d.ExtensionNames,ot=ko.isObservable,st=ko.observable,yt=ko.pureComputed,h="",pt={unallowedGallery:h,alreadyRegistered:h,alreadyInit:h,notArmId:h,noObservable:h,noInputs:h,unexpectedVM:h,earlyExecNotAFunc:
h},l=n.getErrorMap(pt),p,f,ht,w,b;r.registerManifestDefinition=new rt(u.registration);r.getViewModelsDefinition=new g(u.viewModels);r.getExtensionGalleryService=new g(u.getExtensionGalleryServiceViewModel);r.initializeEndPoint=new o(u.entryPointInitialize);r.disposeEndPoint=new rt(u.entryPointDispose);r.getDefinitionEndPoint=new o(u.entryPointGetDefinition);r.getBladeDefinitionEndPoint=new o(u.entryPointGetBladeDefinition);r.getPartDefinitionEndPoint=new o(u.entryPointGetPartDefinition);r.getControlDefinitionEndPoint=new o(u.entryPointGetControlDefinition);r.pingEndPoint=new o(u.ping);r.getAuthorizationTokenEndPoint=new o(u.getAuthToken);r.getUserInfoEndPoint=new o(u.getUserInfo);r.getSharedSettingsEndPoint=new o(u.getSharedSettings);r.getLocalGalleryPackagesEndpointsDefinition=new o(u.getLocalGalleryPackagesEndpoints);r.registerLocalGalleryPackagesEndpointDefinition=new o(u.registerLocalGalleryPackagesEndpoint);r.submitObjectCacheTelemetryEndpoint=new o(u.submitObjectCacheTelemetry);r.
sharedObservablesEndPoint=new g(u.provideExtensionService);r.hasPermissionsToShell=new o(u.hasPermission);r.mapAssetIdToResourceIdEndPoint=new o(u.mapAssetIdToResourceId);r.mapResourceIdToAssetIdEndPoint=new o(u.mapResourceIdToAssetId);r.mapAssetIdToDynamicSelectionAndIconEndPoint=new o(u.mapAssetIdToDynamicSelectionAndIcon);r.mapResourceIdToDynamicSelectionAndIconEndPoint=new o(u.mapResourceIdToDynamicSelectionAndIcon);r.getAssetTypeInformationEndPoint=new o(u.getAssetTypeInformation);r.getResourceTypeAssetTypeInformationEndPoint=new o(u.getResourceTypeAssetTypeInformation);r.getResourceAssetInformationEndPoint=new o(u.getResourceAssetInformation);r.getResourceEndPoint=new o(u.getResource);r.signalResourcesChangedEndPoint=new o(u.signalResourcesChanged);r.getArmEndpointEndPoint=new o(u.getArmEndpoint);p=new a.Diagnostics.Log("MsPortalFx/Extension/Runtime");ht=(function(){function u(n,t,u,o,h){var c=this,y,v;this._hubsWindowsId=r.getHubsWindowId();f=s.client;this._extensionId=n.name;this.
_manifest=n;this._tokenCache=a.Security.createAuthTokenCache((function(n){return r.getAuthorizationTokenEndPoint.invoke(f,e,n)}));this._entryPointDeferred=Q.defer();a.Diagnostics.ErrorReporter.initialize();y=vt("prefetch");y?t():(v=function(){var t=c._entryPoint.getDefinition(),n=require.s.contexts._.config;return t.requireConfig=JSON.parse(JSON.stringify({bundles:n.bundles,paths:n.paths,shim:n.shim})),t},r.initializeEndPoint.register(f,[e],(function(){return c.initializeEntryPoint(t).then((function(n){return MsPortalFx.extend2(n,{_msPortalFxDef:v()})}))})),r.disposeEndPoint.register(f,[e],(function(){c._entryPointDeferred.promise.isPending||(c._entryPointDeferred=Q.defer());c._entryPoint&&(c._entryPoint.dispose(),c._entryPoint=null)})),u&&r.getBladeDefinitionEndPoint.register(f,[e],(function(n){return tt(u,"blade",n)})),o&&r.getPartDefinitionEndPoint.register(f,[e],(function(n){return tt(o,"part",n)})),h&&r.getControlDefinitionEndPoint.register(f,[e],(function(n){return tt(h,"control",n)})),r.getDefinitionEndPoint.
register(f,[e],v),r.getViewModelsDefinition.registerObjectFactory(f,{allowedOrigin:[e,this._hubsWindowsId],allowRemoteChanges:!0,handler:function(n){return c.getObservable(n)},onSuccess:w.earlyOnInputsSet}),r.getExtensionGalleryService.registerObjectFactory(f,{allowedOrigin:null,allowRemoteChanges:!0,handler:function(n,t){var i=r.getDescriptor(t.srcWindowId).name;if([e,et.Hubs,et.Marketplace].indexOf(i)!==-1)return c.getGalleryServiceViewModel();l.unallowedGallery(t.srcWindowId)}}));s.start({originId:r.getWindowId({name:n.name,cloudName:undefined},{addSelfCloudNameIfMissing:!0}),parentWindow:i.parent})}return u.prototype.initializeEntryPoint=function(n){var t=this;return Q(n()).then((function(n){return t._entryPoint=n,t._initialize(),t._entryPoint.initialize(),t._entryPointDeferred.resolve(!0),nt.traceDocumentNavigation()}))},u.prototype.register=function(){this._registered&&l.alreadyRegistered();r.registerManifestDefinition.invoke(f,e,this._manifest);this._registered=!0;nt.traceResourceDownloads(
);nt.traceCdnIndex()},u.prototype._initialize=function(){var u=this,i;if(this._initialized){p.warning("alreadyInit");return}r.pingEndPoint.register(f,[e],(function(){return Q(!0)}));this._entryPoint.getObservable&&r.sharedObservablesEndPoint.registerObjectFactory(f,{allowedOrigin:null,allowRemoteChanges:!1,handler:function(n){return u._entryPoint.getObservable(n,[])}});k.status.subscribe((function(n){r.extensionStatusEndPoint.invoke(f,e,n)}));k.initialize((function(n){return u.getAuthorizationToken(n).then((function(n){return n&&n.header}))}));i=t.localGalleryPackageEndpoint;i&&r.registerLocalGalleryPackagesEndpointDefinition.invoke(f,e,i);n.Data.beginTelemetrySubmission();this._initialized=!0},u.prototype.getAuthorizationToken=function(n){return this._tokenCache.getToken(n)},u.prototype.getSharedSettings=function(){return r.getSharedSettingsEndPoint.invoke(f,e,y)},u.prototype.getUserInfo=function(){return r.getUserInfoEndPoint.invoke(f,e,y)},u.prototype.getLocalGalleryPackagesEndpoints=function(
){return r.getLocalGalleryPackagesEndpointsDefinition.invoke(f,e,y)},u.prototype.hasPermission=function(n,t,i){return ct.isResourceManagerId(n,!0)?r.hasPermissionsToShell.invoke(f,e,{entityId:n,requestedActions:t,cloudName:i}):(p.error("Entity ID must be a resource ID, a subscription ID or a resource group ID for hasPermissions, failing open"),Q(!0))},u.prototype.assetHasPermission=function(n,t){var i=this;return this.mapAssetIdToResourceId(n).then((function(n){return i.hasPermission(n,t,undefined)}))},u.prototype.mapAssetIdToResourceId=function(n){return r.mapAssetIdToResourceIdEndPoint.invoke(f,e,n)},u.prototype.mapResourceIdToAssetId=function(n){return r.mapResourceIdToAssetIdEndPoint.invoke(f,e,n)},u.prototype.mapAssetIdToDynamicSelectionAndIcon=function(n,t){return r.mapAssetIdToDynamicSelectionAndIconEndPoint.invoke(f,e,{assetId:n,forceBladeSelection:t})},u.prototype.mapResourceIdToDynamicSelectionAndIcon=function(n,t){return r.mapResourceIdToDynamicSelectionAndIconEndPoint.invoke(
f,e,{resourceId:n,forceBladeSelection:t})},u.prototype.getAssetTypeInformation=function(n,t){return r.getAssetTypeInformationEndPoint.invoke(f,e,{extensionName:n,assetType:t})},u.prototype.getResourceTypeAssetTypeInformation=function(n){return r.getResourceTypeAssetTypeInformationEndPoint.invoke(f,e,n)},u.prototype.getResourceAssetInformation=function(n){return r.getResourceAssetInformationEndPoint.invoke(f,e,n)},u.prototype.getResource=function(n,t){return r.getResourceEndPoint.invoke(f,e,{resourceId:n,caller:t})},u.prototype.signalResourcesChanged=function(n){return r.signalResourcesChangedEndPoint.invoke(f,e,n)},u.prototype.disableAjaxServerVersionCheck=function(){k.disableVersionCheck()},u.prototype.getObservable=function(n){var t=this,i=n.telemetryContext,r=s.messageContext;return this._entryPointDeferred.promise.then((function(){return s.invokeWithContext(r,(function(){var u;switch(n.type){case ft.PartViewModel:u=ut.usingState((function(){return t.getPartViewModel(n)}),i);break;case ft.
ViewModel:t._entryPoint.getViewModel&&(u=ut.usingState((function(){return t.getViewModel(n)}),i))}if(u)return u.then((function(t){return w.createViewModelWrapper(t,n,r)||t}));l.noObservable()}))}))},u.prototype.getGalleryServiceViewModel=function(){var t=this,n=this._manifest&&this._manifest.galleryService&&this._manifest.galleryService.serviceViewModel;return n?this._entryPointDeferred.promise.then((function(){return it.composeViewModel(t._entryPoint.getViewModel,n,null,!1)})):Q(y)},u.prototype.dispose=function(){this._disposed=!0},u.prototype.getViewModel=function(n){var t=n.earlyExecTasks&&function(t){b.earlyExecuteTask(t,n.earlyExecTasks)};return Q(it.composeViewModel(this._entryPoint.getViewModel,n.name,n.initialState,n.createSelectable,n.createHubsInternalCloudNameProperty,t))},u.prototype.getPartViewModel=function(t){var f=n.Composition.BladeContainer,c=f.BladeContainer,l=f.bindActionBar,i=t.initialState,e=n.ViewModels.createFrameworkPartViewModel(),o=t.collapsed,a={selectable:t.createSelectable?
v.Part.createSelectableViewModel(i):y,location:t.partLocation,flags:t.flags},s=t.containerType===1,p=s?c:v.PartContainer,w=function(n,t){s&&l(n,t)},r=new p(e,a),u=this._entryPoint.getPartViewModel(t.name,r,i),k="Extension/"+this._extensionId+"/PartType/"+t.name,h=function(n){lt(o)||n.collapsed(o);w(r,n);var u=new v.Part(e,r,n,i,t.createHubsInternalCloudNameProperty,k);return t.earlyExecTasks&&b.earlyExecuteTask(n,t.earlyExecTasks),u};return Q.isPromiseAlike(u)?u.then(h):Q(h(u))},u})();r.RuntimeImpl=ht,(function(i){function h(n,t,i){n.getViewModelOptions=t;var h=n.content;if((h&&h._msPortalFx_viewModelApiV2))return f(n,t)||l.noInputs(),delete t.partSize,s.invokeWithContext(i,(function(){var v=e(n,t),f,l;o(n,v);var i=r.reduce((function(n,t){return n[t]=st(),n}),{}),s={},c=n.container;return u(c,i,h,s,t.name),f=MsPortalFx.cloneAndRebindFunctions(n),l=f.content={_msPortalFx_viewModelApiV2_wrapper:!0,chrome:i,viewModel:st()},a(n,(function(){u(c,i,h,s,t.name);l.viewModel(h)})),f}))}function u(n,i,u,
f,e){r.forEach((function(r){var o,s;r in u&&(o=u[r],r in f?o!==f[r]&&p.error("Property changed non-observably, use an observable instead and update its value: '"+r+"' in '"+e+"' in '"+t.extensionName+"'"):(s=i[r],ot(o)?(s(o()),o.subscribe(n,s)):s(o),f[r]=o))}))}function c(n,t,i){var u,r=n.getValue(),h=r.getViewModelOptions,s,c;delete r.getViewModelOptions;f(r,h)&&(u=Q.defer(),o(r,u.promise));i(n,t);s=r.content;c=h.partSize;typeof c=="number"&&s&&ot(s.size)&&s.size(c);u&&u.resolve(e(r,h))}function f(n,t){return!!(t.onInputsSetParameters&&n.updatePartInputValues)}function e(n,t){var i=t.onInputsSetParameters;return delete t.onInputsSetParameters,n.updatePartInputValues(i.inputs,i.settings,i.traceOptions,i.viewModelName,i.inputsMetadata,i.dontCallViewModelOnInputsSet)}function o(n,t){n.onInputsSetPromise=t}function a(t,i){var u=t.container,r;t instanceof v.Part?r=u.operations.blockingUi:t instanceof n.ViewModels.CompositionViewModel?r=yt((function(){return t.state()===n.ViewModels.CompositionState.
Preparing})):l.unexpectedVM();r.fxOnceAndRun(u,(function(){i()}),(function(n){return!n}))}var r=["title","subtitle"];i.createViewModelWrapper=h;i.earlyOnInputsSet=c})(w||(w={})),(function(n){function t(n,t){return function(){var i=n[t.method],r=typeof i;if(r==="function")return i.apply(n,t.args);l.earlyExecNotAFunc(t.method,r)}}function i(n,i){var u=[],r,f;i&&(r=i&&i.tasks,r&&r.length>0&&(i.taskExecType!==1?(f=r.reduce((function(i,r){return i.then(t(n,r))}),Q()),u=[f]):u=r.map((function(i){return Q.fcall(t(n,i))}))),typeof i.keepReturnsIn=="string"&&(n["_msPortalFx_earlyExec"+i.keepReturnsIn]=u))}n.earlyExecuteTask=i})(b||(b={}))})(f=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Observable=0]="Observable"})(n.ServiceType||(n.ServiceType={}));var t=n.ServiceType})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.All=0]="All";n[n.Any=1]="Any"})(n.SetRequirement||
(n.SetRequirement={}));var t=n.SetRequirement})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i,r){var u=this,f=r&&r.allowedOrigins;return t.registerRpcEndPoint(n,{allowedOrigin:f,handler:function(n){return i.apply(u,n)}})}function r(n,i){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return t.invokeRpc(i,n,u)}var t=FxImpl.Rpc.client;n.registerCallback=i;n.invokeCallback=r})(t=n.Rpc||(n.Rpc={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=FxImpl.Rpc,r=window,o=r.fx.environment,u=new n.Base.Diagnostics.Log("MsPortalFx/Services/ServiceProvider"),f="Performance issue: usage of this api makes the portal unusable for large accounts. Requested {0} from {1}.",e=(function(){function n(n,t){this._extension=n;this._scope=t}return n.prototype.getObservable=function(){var n=this;return u.error(""+f.format(this._scope,this._extension)),
FxImpl.Extension.sharedObservablesEndPoint.acquireObject(i.client,this._extension,this._scope).then((function(n){return n.getValue()}))},n.prototype.releaseObservable=function(){},n.prototype.dispose=function(){},n})();t.ObservableServiceClientImpl=e})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function l(n,t){var i=r(null),f=r(t.blockUi),e=r(t.shieldType);return n.progress&&n.progress((function(n){var t=n&&n.percent;typeof t=="string"&&(t=parseFloat(t),isNaN(t)&&u.percentValueNotNumber());typeof t=="number"&&i(a(t,0,100))})),{promise:n,deterministicPercentage:i,blockUi:f,shieldType:e}}function a(n,t,i){return Math.min(Math.max(n,t),i)}var r=ko.observable,s=ko.observableArray,i=ko.computed,o="",h={promiseCannotBeNull:o,percentValueNotNumber:o},u=FxImpl.getErrorMap(h),c=(function(){function t(t){var r=this,u;this._operations=s();u=n.ViewModels.Controls.Visualization.ProgressBar;this.inProgress=i(t,(function(){return r._operations().
length>0}));this.blockingUi=i(t,(function(){return r._operations().some((function(n){return n.blockUi()}))}));this.shieldType=ko.pureComputed((function(){var n=r._operations(),t;return n.length>0&&(t=n.every((function(n){return n.shieldType&&n.shieldType()===1}))),t?1:0}));this.progressBarViewModel=new u.ViewModel(t);i(t,(function(){var n=r._operations().some((function(n){return n.deterministicPercentage()!==null}));r.progressBarViewModel.status(n?u.StatusType.InProgress:u.StatusType.Indeterminate)}));i(t,(function(){var n=0,t=0;r._operations().forEach((function(i){var r=i.deterministicPercentage();r!==null&&(n++,t+=r)}));r.progressBarViewModel.valuePercentage(n===0?0:t/n)}))}return t.prototype.dispose=function(){},t.prototype.add=function(n,t){var f=this,i,r;n||u.promiseCannotBeNull();t=t||new e;i=l(n,t);r=function(){f._operations.remove(i)};this._operations.push(i);n.then(r,r)},t.prototype.remove=function(n){n||u.promiseCannotBeNull();this._operations.remove((function(t){return t.promise===n}))},t.prototype.
update=function(n,t){var i=this._operations().first((function(t){return t.promise===n}));i&&i.blockUi(t.blockUi)},t.prototype.getOptionsForOperation=function(n){var t=this._operations().first((function(t){return t.promise===n}));return t?{blockUi:t.blockUi(),shieldType:t.shieldType()}:null},t})(),f,e;t.PartOperationList=c,(function(n){n[n.Opaque=0]="Opaque";n[n.Translucent=1]="Translucent"})(f||(f={}));t.ShieldType=f;e=(function(){function n(){}return n})();t.PartOperationOptions=e})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(n,t){this.uri=n;this.target=i(t,"_blank")}return n})();t.ClickableLink=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(n,t){this.uri=n;this.target=i(t,"_blank")}return n})();t.ClickableLink=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t,i){this.partName=n;this.parameters=t;this.options=i||{}}return n})();n.PartReference=t})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function r(n,t){var i="_msPortalFxShell";return t?n[i]=t:t=n[i],t}function v(n,t){var i=n;i._msPortalFxIsSelectableViewModel=!0;t&&(i._msPortalFxSelectable=t);n.configureSelectable=l.configureSelectable.bind(n)}function y(n,t){var i=n;i._msPortalFxSelectable=t}function p(n){return h(n)?n:null}function h(n,t){var i=n,r;return i&&i._msPortalFxIsSelectableViewModel===!0?(r=!!i._msPortalFxSelectable2,!t)?!!i._msPortalFxSelectable||r:r:!1}function w(n){var t=n&&r(n);return t&&t.type===21298}function b(n,t,i){var r=n._msPortalFxCallbacks;r&&r[t]&&typeof r[t]=="function"&&r[t].apply(r,i)}var e=window,f=ko.observable,t="",a={supplyConflict:t,recieveConflict:t,syncConflict:t,supplyBladeConflict:t},i=n.getErrorMap(a),o,u,s,c,l;n.shellInterface=
r,(function(n){n.ClickableLink=MsPortalFx.ViewModels.ClickableLink})(o=n.CompositionCore||(n.CompositionCore={})),(function(t){var u;(function(t){var o=(function(){function n(n,t){this.parameters=n;this._msPortalFxCallbacks=t}return n.prototype.clone=function(t){return new n(t,this._msPortalFxCallbacks)},n})(),u,s,e,h;t.BladeReference=o;u=(function(t){function i(i,r,u,f){var e=u&&u.parameters,o=u&&u.callbacks;t.call(this,e,o);this.bladeName=i;this.extensionName=r;this.options=u;this.metadata=f;this.cloudName=n.Extension.selfCloudName}return __extends(i,t),i})(o);t.PdlBladeReference=u;s=(function(t){function u(u,e,o,s){function y(t){var i=new n.TriggerableLifetimeManager,r=a.getEditableObservable(i);t(r);i.dispose()}var v;t.call(this,u,e,o,s);var c=o.supplyInitialData,l=o.supplyProviderConfig,h=o.receiveResult,a=o.editScopeAccessor;c=c&&c.bind(o);l=l&&l.bind(o);h=h&&h.bind(o);a?(h||c)&&i.supplyConflict():h||i.recieveConflict();v=f();r(this,{type:20560,bladeConfig:v,getBladeConfig:function(){var
n=null,t;return c?n=c():a&&y((function(t){n=t()})),t={config:l?l():undefined,initialState:n},v(t),t},receiveResult:function(n){h?h(n):y((function(t){t(n)}))}})}return __extends(u,t),u})(u);t.ParameterProviderBladeReference=s;e=(function(){function n(){}return n.prototype.renavigateActivatedBlade=function(){},n})();t.SelectableBase=e;h=(function(n){function t(t){function s(n,t,i){return{reason:n,bladeReference:t,operationId:i||MsPortalFx.getUniqueId()}}function h(n,t){var i=s(1,n,t);return e(i),i}function c(n){var t=u();return h(t,n)}function l(n){return o().then((function(t){return h(t,n)}))}n.call(this);var e=f(),u=t.supplyBladeReference,o=t.supplyBladeReferenceAsync;u||o||i.syncConflict();u&&o&&i.supplyBladeConflict();r(this,{type:21298,flags:1,request:e,fetchRequest:u?c:l,result:f()});this.renavigateActivatedBlade=function(n){e(s(2,n))}}return __extends(t,n),t})(e);t.Selectable2=h})(u=t.Selectable||(t.Selectable={}))})(u=n.Composition||(n.Composition={}));s=u.Selectable;n.BladeReference=s.BladeReference;
n.initializeSelectableViewModel=v;n.assignSelectable=y;n.tryGetSelectableViewModelContract=p;n.isSelectableViewModel=h;n.isSelectable2=w;n.invokeCallback=b;c=(function(){function n(){}return n.prototype.configureSelectable=function(n){var t=new u.Selectable.Selectable2(n),i=this._msPortalFxSelectable;return i&&(i.dispose(),delete this._msPortalFxSelectable),this._msPortalFxSelectable2=t,t},n})();l=new c;e.define("Fx/Composition",[],(function(){return o}));e.define("Fx/Composition/Selectable",[],(function(){return u.Selectable}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Minute=0]="Minute";n[n.Hour=1]="Hour";n[n.Day=2]="Day";n[n.Week=3]="Week";n[n.Month=4]="Month";n[n.Year=5]="Year"})(n.TimeUnit||(n.TimeUnit={}));var t=n.TimeUnit;n.TimeRangeValueType="MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"})(t=n.Configuration||(n.Configuration={}))})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var
t;(function(n){"use strict";function t(n){return typeof n=="object"?u(n,!0):n}var i=MsPortalFx.deepEquals,r=MsPortalFx.union,u=MsPortalFx.clone,f=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Part"),e=(function(){function n(n,t){this._configChangedHandler=t}return n.prototype.setValues=function(n){this._persistedValues=t(n)},n.prototype.getValues=function(){var n=this._persistedValues;return n.parameters,t(n)},n.prototype.updateValues=function(n,u){var w;if(u===void 0&&(u=!0),!this._persistedValues)throw new Error("This 'updateValues' method cannot be called until the associated Part/Blade has been initialized.  Typically, 'updateValues' is called in the 'receiveResult' callback for a ParameterCollector opening a configuration Blade.");var o,s=n.parameters,c=n.settings,l=this._persistedValues,a=l.parameters,h=l.settings,v=a.values,y=s&&s.values||{},e=a.metadata,p=s&&s.metadata||{},b=r(Object.keys(y),Object.keys(p));return b.forEach((function(n){var h,c,u,r,l,s,a;if(
!e.hasOwnProperty(n)){f.error("Parameter named '"+n+"' is not a recognized parameter for this Part.");return}if(c=e&&e[n]&&Array.isArray(e[n].bindingSources)&&e[n].bindingSources.length>0,c){if(u=p[n],r=u&&u.activeBindingSourceName,r!==e[n].activeBindingSourceName){if(l=!r||e[n].bindingSources.firstIndex((function(n){return n.name===r}))>=0,!l)throw new Error("The name '"+r+"' supplied as 'activeBindingSourceName' does not match a binding source in 'bindingSources'.");e[n].activeBindingSourceName=r;o=!0}h=!!r}s=y[n];a=h||i(s,v[n]);a||(v[n]=t(s),o=!0)})),w=Object.keys(c),w.forEach((function(n){var u=!0,r=c[n];r===undefined&&(u=!1);u?i(r,h[n])||(h[n]=t(r),o=!0):h[n]!==undefined&&(h[n]=undefined,o=!0)})),o?this._configChangedHandler(t(this._persistedValues),u):Q()},n})();n.Configuration=e})(t=n.Composition||(n.Composition={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed";n[n.Preparing=2]="Preparing"})(n.CompositionState||
(n.CompositionState={}));var t=n.CompositionState})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function u(n){return typeof n=="function"}function y(){return{allowUiBlocking:i(!0),selectable:i()}}function p(){return{allowUiBlocking:i(!0),selectable:i(),registeredSelectables:i(),registeredSelectableOptions:i(),_revealContentCallCount:i(0),activeOpenBladeCommand:i(),updateConfigFn:i(),_onInputValuesUpdated:null}}var e=MsPortalFx,h=e.Base,c=n,i=ko.observable,o=ko.toJSON,l=n.Extension,a=l.CloudName,r=n.TelemetryContext,v=new h.Diagnostics.Log("MsPortalFx/ViewModels/Composition/ViewModels.Composition"),w=e.forEachKey,f,s;t.internalCloudNamePropertyName="cloudName";t.createFrameworkPartViewModel=p;f=(function(){function n(n,t,r,u,f){this._hadHubsInternalCloudNameProperty=!1;this.internal=n;this.container=t;this.content=r||{};f&&(this.internal.cloudName=i(),this._hadHubsInternalCloudNameProperty=!0)}return n.prototype.updatePartInputValues=
function(n,t,i,f,e,s){var h=[],c=this.content,w=this.container,l,y,p;if(this.content&&u(c.onInputsSet)){i&&(v.verbose("Invoking onInputsSet of view model '"+(i.debugId||"N/A")+"'.\nInputs: "+o(n)+".\nSettings: "+o(t)),!!i.breakOnInputsSet);f&&r.setContextValue(r.ContextType.CompositionItem,{id:f});try{l=c.isV2?c.onInputsSet(n,t,s):!s&&c.onInputsSet(n,t);l&&u(l.then)&&h.push(l)}catch(b){h.push(Q.reject(b))}finally{f&&r.resetContextValue(r.ContextType.CompositionItem)}}return this.container&&(y=w.onInputsSetCallbacks.triggerCallbacks(n,t),y&&u(y.then)&&h.push(y)),this._hadHubsInternalCloudNameProperty&&(p=a.readFromInputs(n),p&&this.internal.cloudName(p)),h.length>0?Q.all(h):null},n})();t.CompositionViewModelBase=f;s=(function(n){function r(r,u,f,e){var s=this,o,h,l;n.call(this,y(),r,u,f,e);this.state=i(t.CompositionState.Preparing);o=null;h=r;h.selectable&&c.assignSelectable(h,h.selectable);l=function(n){var i=Q(n).then((function(){var n=!o||o===i;n&&s.state(t.CompositionState.Ready)}),(function(
){var n=!o||o===i;n&&s.state(t.CompositionState.Failed)}));return i};this.updatePartInputValues=function(i,r,u,f,e,h){o=null;var c=n.prototype.updatePartInputValues.call(s,i,r||{},u,f,e,h),a=t.CompositionState.Ready;return c!==null&&(a=t.CompositionState.Preparing,o=l(c)),s.state(a),o}}return __extends(r,n),r.prototype.updatePartInputValues=function(){return},r})(f);t.CompositionViewModel=s})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(t){"use strict";function r(t,r){var f=n.createFrameworkPartViewModel(),e,u;return r=r||{},r.logArea=r.logArea||"MsPortalFx/ViewModels/Composition/ViewModels.Composition.Part",e={selectable:r.createSelectable?i.Part.createSelectableViewModel(r.initialState):undefined,location:r.location},u=new i.PartContainer(f,e),new i.Part(f,u,t(u),r.initialState,r.createHubsInternalCloudNameProperty,r.logArea)}var i=MsPortalFx.ViewModels;t.composePartViewModel=r})(t=n.Part||(n.Part={}))})(t=n.ViewModels||(n.ViewModels=
{}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var f=FxImpl.Composition.Selectable,i=ko.observable,u="",e={badBladeReferenceType:u,observableInBladeParameters:u,openBladeFromContextPaneNotAllowed:u},r=FxImpl.getErrorMap(e),o;(function(t){function a(){var n=[],t=!1,i={add:function(i,r){n.indexOf(i)<0&&n.push(i);r&&t&&i(null)},remove:function(t){var i=n.indexOf(t);i>=0&&n.splice(i,1)},triggerCallbacks:function(i,r){t=!0;var f=n.slice(),u=f.map((function(n){try{return n(i,r)}catch(t){return Q.reject(t)}})).filter((function(n){return!!n}));return u.length>0?Q.all(u):null},dispose:function(){n.splice(0,n.length)}};return i._callbacks=n,i}function y(t,i,u,e,o,h){function a(n){var i=Q.defer(),r=t.createChildLifetime();return u.result.subscribe(r,(function(t){t&&t.operationId===n&&(i.resolve(!!t.success),r.dispose())})),i.promise}function c(t,i,u,s,c){var v,p,y;return e&&r.openBladeFromContextPaneNotAllowed(),t instanceof f.PdlBladeReference||FxImpl.Po.getMetadata(t)||r.badBladeReferenceType(
),v=t.options,p=v&&v.parameters,w(p)&&r.observableInBladeParameters(),s=s||n.getUniqueId(),c=c||a(s),y=i?1:0,y|=u&&u.asSubJourney?2:0,l({bladeReference:t,reason:3,selectedItem:o,controlMetadata:h,flags:y,operationId:s}),c}function v(t,i,u,f){var o,h,v;return e&&r.openBladeFromContextPaneNotAllowed(),o=n.getUniqueId(),h=u?1:0,h|=f&&f.asSubJourney?2:0,v=a(o),l({bladeReference:undefined,reason:4,flags:h,operationId:o,initialWidth:f&&f.initialWidth}),i.catch((function(n){return s.error("The extension provided promise to container."+t+" has failed.\n"+FxImpl.Diagnostics.getLogFriendlyMessage(n)),Q.reject(!1)})).then((function(n){return c(n,u,f,o,v)})).catch((function(n){return n===!1?n:Q.reject(n)}))}var l=u.request;return{openBlade:function(n,t){return c(n,!1,t)},openBladeAsync:function(n,t){return v("openBladeAsync",n,!1,t)},openContextPane:function(n){return c(n,!0)},openContextPaneAsync:function(n){return v("openContextPaneAsync",n,!0)}}}function e(n,t){var i=n[h],r=n[c],u;return r?r:(i()||i(
new f.Selectable2({supplyBladeReference:$.noop})),u=FxImpl.shellInterface(i()),y(n,1,u,t))}function d(n,t){n[c]=t}function g(n,t){t===void 0&&(t=!0);var i=n;i.preview(!!t)}function w(t,i){return i===void 0&&(i=50),n.isObject(t)&&i&&Object.keys(t).some((function(n){return ko.isSubscribable(t[n])||w(t[n],i-1)}))}var l=n.Resources.Strings.ViewModels.Container,b=window,o=b.fx.environment.isDevelopmentMode||n.isDiagnosticsEnabled,s=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Container"),h,c,p;t.createOnInputsSetCallbacks=a;var k=0,u={},v=(function(){function n(){var n=this,t;this._lifetime=new FxImpl.TriggerableLifetimeManager;this._id=k++;this._msPortalFxNotice=i();this.onInputsSetCallbacks=a();this.helpContentUri=i();this.notFoundMessage=i();this.unauthorizedMessage=i();this.registerForDispose=function(t){return n._lifetime.registerForDispose(t),n._lifetime};t=this;t.preview=i(!1);o&&(u[this._id]=FxImpl.Rpc.getCurrentCallStack())}return n.VerifyAllContainerViewModelDisposed=
function(){var n,t;o&&(n=Object.keys(u),n&&n.length>0&&(t=["The following "+n.length+" ContainerViewModel is created but not disposed:"],t.push("This indicate a Framework bug. Please open a Framework bug with following call stacks."),n.forEach((function(n,i){t.push("ContainerViewModel ("+i+") callstack:");t.push(u[n])})),s.error(t.join("\n"))))},n.prototype.isDisposed=function(){return this._lifetime.isDisposed()},n.prototype.createChildLifetime=function(){return this._lifetime.createChildLifetime()},n.prototype.dispose=function(){var t=this._lifetime,n;t&&t.dispose();n=this.onInputsSetCallbacks;n&&n.dispose();o&&delete u[this._id]},n.prototype.unauthorized=function(n){n||(n=l.unauthorizedText);this.unauthorizedMessage(n)},n.prototype.notFound=function(n){n||(n=l.notFound);this.notFoundMessage(n)},n.prototype.enableNotice=function(n){this._msPortalFxNotice.peek()?s.error("Notice has been enabled. It cannot be enabled again."):this._msPortalFxNotice(n)},n})();t.ContainerViewModel=v;t.createClickContext=
y;h="_msPortalFxOpenBladeSelectable";c="_clickContext";t.setClickContext=d;p=(function(n){function t(t){n.call(this);this.configureSelectable=undefined;this[h]=i();var r=t.selectable||null;FxImpl.initializeSelectableViewModel(this,r);this.selectable=r;this.flags=t.flags||0}return __extends(t,n),t.prototype.openBlade=function(n,t){return e(this,!!(this.flags&1)).openBlade(n,t)},t.prototype.openBladeAsync=function(n,t){return e(this,!!(this.flags&1)).openBladeAsync(n,t)},t.prototype.openContextPane=function(n){return e(this,!!(this.flags&1)).openContextPane(n)},t.prototype.openContextPaneAsync=function(n){return e(this,!!(this.flags&1)).openContextPaneAsync(n)},t})(v);t.SelectableContainerViewModel=p;t.markAsPreview=g})(o=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Dirty=4]="Dirty";n[n.Info=
5]="Info";n[n.Upsell=6]="Upsell";n[n.Complete=7]="Complete"})(n.ContentState||(n.ContentState={}));var t=n.ContentState})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function h(n,t,i){var r=s(n).closeBlade;return r.fxAwaitAndRun(n).then((function(n){return n(t,i)}))}var c=n.Base,l=c.Diagnostics,a=n.ViewModels,w=FxImpl.Composition,f=a.Internal,b=FxImpl.ViewModels,k=b.CompositionViewModelBase,d=FxImpl.Rpc,e=n.clone,g=c.Constants.BladeParameterNames,o=n.Errors,i=ko.observable,s=FxImpl.shellInterface,tt=new l.Log("MsPortalFx/ViewModels/ViewModels.Part"),r="",nt={containerViewModelMissing:r,messageMissing:r,enableNoticeInvoked:r,identitySelectableMissing:r,selectableRegistered:r,selectableInstanceRegistered:r},u=FxImpl.getErrorMap(nt),v,y,p;(function(n){n[n._Internal_None=0]="_Internal_None";n[n.Dashboard=1]="Dashboard";n[n.Blade=2]="Blade"})(t.PartLocation||(t.PartLocation={}));v=t.PartLocation;y=(function(i){function r(t,r,f,e,
o,s){r||u.containerViewModelMissing();i.call(this,t,r,f,e,o);this._logArea=s;r.selectable&&FxImpl.assignSelectable(r,r.selectable);this._hadRevealedContentAtConstruction=t._revealContentCallCount()>0;this._currentOnInputsSetPromise=n.Helpers.Deferred().promise();this.container.operations.add(this._currentOnInputsSetPromise,{blockUi:!this._hadRevealedContentAtConstruction});t._revealContentCallCount.subscribe(r,this._onRevealContent,this)}return __extends(r,i),r.createSelectableViewModel=function(n,i){return new t.Selectable({selectedValue:arguments.length===2?i:!0,isSelected:!!(n&&n.container&&n.container.selectable.isSelected),isCommandSelected:!!(n&&n.container&&n.container.selectable.isCommandSelected)})},r.createClickableLinkViewModel=function(n,i){return new t.ClickableLink(n,i)},r.prototype.updatePartInputValues=function(n,t,r,u,f,e){var o,h,s,c;return this.internal._onInputValuesUpdated&&this.internal._onInputValuesUpdated(n,t,f),o=this._currentOnInputsSetPromise,this._currentOnInputsSetPromise=
null,h=this.internal._revealContentCallCount(),this._onInputsSetContext=d.messageContext,s=i.prototype.updatePartInputValues.call(this,n,t||{},r,u,f,e),s!==null&&(this._currentOnInputsSetPromise=this._updatePartStateAfterOnInputsSetPromise(s),c=this._hadRevealedContentAtConstruction||this.internal._revealContentCallCount()>h,this.container.operations.add(this._currentOnInputsSetPromise,{blockUi:!c})),o&&this.container.operations.remove(o),this._currentOnInputsSetPromise},r.prototype._updatePartStateAfterOnInputsSetPromise=function(t){var i=this,r=t.then((function(){if(n.isNullOrUndefined(i.container.unauthorizedMessage())){var t=!i._currentOnInputsSetPromise||i._currentOnInputsSetPromise===r;t&&i.container.recover()}}),(function(t){var e=FxImpl.Diagnostics.getLogFriendlyMessage(t),u="Part's onInputsSet promise failed.(id: "+FxImpl.Po.getMetadataId(i)+")",s=u+"\nError: "+e,f;if(t instanceof o.UnauthorizedDataError||l.Log.writeEntry(2,i._logArea,new o.Error({message:u,data:n.getObjectDescriptor(
i),innerErrors:t})),f=!i._currentOnInputsSetPromise||i._currentOnInputsSetPromise===r,f){if(t instanceof o.Error&&t.handled)return;t instanceof o.UnauthorizedDataError?i.container.unauthorized():i.container.fail(s)}}));return r},r.prototype.updatePartForUnauthorized=function(){var n=this._currentOnInputsSetPromise;this._currentOnInputsSetPromise=null;n&&this.container.operations.remove(n)},r.prototype.invokeClickHandler=function(n,t,i,r,u,e){if(i){var s=this.container,o=f.createClickContext(this.container,n,r,!!(s.flags&1),u,e),h=n===3?[u,o]:[o];f.setClickContext(this.container,o);try{i.apply(t,h)}finally{f.setClickContext(this.container,undefined)}}},r.prototype._onRevealContent=function(){var n=this._currentOnInputsSetPromise,t=n&&this.container.operations.getOptionsForOperation(n);t&&t.blockUi&&this.container.operations.update(n,{blockUi:!1})},r})(k);t.Part=y;p=(function(r){function o(u,f){var e=this,h,o,c;r.call(this,f||{});this.isSelectable=i(!0);this.clickableLink=null;this.failureMessage=
i();this.noDataMessage=i();this.height=i(0);this.width=i(0);this.size=i();this.mutate=i();this.menu=null;this._msPortalFxTriggerValidation=i();this._msPortalFxSuppressAlert=i(!1);this._msPortalFxConfigureAlert=i();this._partState=null;f=f||{};this._partState=i(n.Parts.PartState.Ready);this.partState=ko.pureComputed((function(){return e._partState()}));f.clickableLink&&(this.clickableLink=f.clickableLink);this.partTitle=i(f.partTitle||null);this.ariaLabel=i(f.partTitle||null);this.assetName=i(f.assetName||null);this.contentState=i(a.ContentState.None);this.operations=new t.PartOperationList(this);this.registerForDispose(this.operations);this._registeredSelectables=u.registeredSelectables;this._registeredSelectableOptions=u.registeredSelectableOptions;u._onInputValuesUpdated=this._updateConfiguration.bind(this);this._internalViewModel=u;this.location=f.location||v._Internal_None;h=s(this,{autoSize:i(!1),resize:i(null),selectables:i({}),closeBlade:i(null),menu:ko.observable(null)});this._config=
new w.Configuration(f||{},this._handleConfigurationChange.bind(this));f.flags&2&&(this.onLockedBlade={closeCurrentBlade:this.closeCurrentBlade.bind(this)});c=i(0);this.form={valid:c,validationState:c,dirty:i(!1),triggerValidation:function(){if(e._msPortalFxTriggerValidation())return Q(e._msPortalFxTriggerValidation()());var n=Q.defer(),t=e._msPortalFxTriggerValidation.subscribe(e,(function(i){i().then(n.resolve).catch(n.reject).finally((function(){return t.dispose()}))}));return n.promise},configureAlertOnClose:function(n){ko.isObservable(n)?(o&&o.dispose(),o=e.createChildLifetime(),n.subscribeAndRun(o,e._msPortalFxConfigureAlert)):e._msPortalFxSuppressAlert(n===1)}};f.flags&4&&(this.menu={switchItem:function(n){var i=h.menu(),t;i?i.switchItem(n):(t=e.createChildLifetime(),h.menu.subscribe(t,(function(i){i&&i.switchItem(n);t.dispose()})))}})}return __extends(o,r),o.prototype.autoSize=function(){s(this).autoSize(!0)},o.prototype.resizeTo=function(n,t){n=Math.min(Math.max(n,1),25);t=Math.min(Math.
max(t,1),25);s(this).resize({width:n,height:t})},o.prototype.fail=function(t){t||u.messageMissing();this.failureMessage(t);this._partState(n.Parts.PartState.Failed)},o.prototype.recover=function(){this._partState()===n.Parts.PartState.Failed&&(this.failureMessage(null),this._partState(n.Parts.PartState.Ready));this.unauthorizedMessage(null)},o.prototype.revealContent=function(){var n=this._internalViewModel._revealContentCallCount();this._internalViewModel._revealContentCallCount(n+1)},o.prototype.enableNotice=function(){u.enableNoticeInvoked()},o.prototype.registerSelectable=function(n,t,i,r){var h=this,f=this._registeredSelectables()||{},o=this._registeredSelectableOptions,s=o()||{},c=function(){return Object.keys(f).map((function(n){return f[n]})).some((function(n){return i===n}))};t&&i||u.identitySelectableMissing();f.hasOwnProperty(t)&&u.selectableRegistered(t);c()&&u.selectableInstanceRegistered();r&&(s=e(s,!1),s[t]=r,o(s));f=e(f,!1);f[t]=i;this._registeredSelectables(f);n.registerForDispose(
(function(){var n=e(h._registeredSelectables(),!1),i=e(o(),!1);delete n[t];delete i[t];h._registeredSelectables(n);o(i)}))},o.prototype.activateConfiguration=function(){return this._config},o.prototype.closeCurrentBlade=function(n){return n&&this.form.configureAlertOnClose(1),h(this,0,n)},o.prototype.closeChildBlade=function(){return h(this,1)},o.prototype.closeContextBlade=function(){return h(this,2)},o.prototype._updateConfiguration=function(t,i,r){var u={},e;n.forEachKey(t||{},(function(n,t){f.isBladeCallerInput(n)||n===g.EditScopeId||(u[n]=t)}));e={parameters:{values:u,metadata:r||{}},settings:i&&i.content||{}};this._config.setValues(e)},o.prototype._handleConfigurationChange=function(n,t){var i=n.parameters,r={inputs:i&&i.values,settings:n.settings,inputsMetadata:i&&i.metadata};return this._internalViewModel.updateConfigFn()(r,t)},o})(f.SelectableContainerViewModel);t.PartContainer=p})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;
(function(n){"use strict";function r(n,t){var i=t&&t.actionBar;i instanceof MsPortalFx.ViewModels.ActionBars.Base.ViewModel&&n._actionBar(i)}var t=MsPortalFx.ViewModels,i=(function(n){function t(t,i){n.call(this,t,i);this._actionBar=ko.observable()}return __extends(t,n),t})(t.PartContainer);n.BladeContainer=i;n.bindActionBar=r})(t=n.BladeContainer||(n.BladeContainer={}))})(t=n.Composition||(n.Composition={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";n.ManagementGroupId="management_group";n.SupportGroupId="support_group";n.QuickAccessGroupId="quickaccess_group";n.MonitoringGroupId="monitoring_group";n.EventLogsItemId="eventlogs";n.ExportTemplateItemId="exporttemplate";n.MyAccessItemId="access";n.ResourceProvidersItemId="resourceproviders";n.ResourceHealthItemId="resourcehealth";n.ResourceGroupsItemId="resourceGroups";n.ResourcesItemId="resources";n.SubscriptionCertsItemId="subcerts";n.SubscriptionQuotasItemId="quotas";n.SupportHelpRequestItemId="supportrequest";n.
TagsItemId="tags";n.LocksItemId="locks";n.TroubleshootItemId="troubleshoot";n.UsersItemId="users";n.PropertiesItemId="properties";n.AlertsItemId="alerts";n.DiagnosticsItemId="diagnostics";n.MetricsItemId="metrics";n.AppInsightsItemId="appinsights";n.LogAnalyticsItemId="loganalytics";n.LogSearchItemId="logsearch";n.ResourceAdvisorItemId="resourceadvisor"})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function c(n,t,r){var e,s=!1;return n.registerForDispose((function(){s=!0})),i.has(r)?e=i.get(r):(e=Q(u.acquireObject(f,h.getWindowId(t),{})).then((function(t){return n.registerForDispose(t),t.getValue()})),i.set(r,e),n.registerForDispose((function(){i.delete(r)}))),e.then((function(n){return s?Q.reject(new o.DisposedError({message:"supplyMenuDetailBladeReferenceAsync's input lifetime is already disposed",errorLevel:0})):Q(n.supplyBladeReferenceAsync(r))}))}var o=MsPortalFx.Errors,s=MsPortalFx.Base,r=s.Constants,h=n.Extension,u=n.Rpc.client,f=
"MenuDetailBladeReferenceLifeExtenderObject",i=new MsPortalFx.Map,e;t.supplyMenuDetailBladeReferenceAsync=c;e=(function(){function n(){this.value=ko.observable()}return n.prototype.supplyBladeReferenceAsync=function(n){var r=this,t=function(n){return r.value(n),n},i;return n.supplyBladeReference?(i=n.supplyBladeReference(),t(i)):n.supplyBladeReferenceAsync().then((function(n){return t(n)}))},n})();u.registerObjectFactory(f,{allowedOrigin:[r.ExtensionNames.Hubs,r.Shell],allowRemoteChanges:!0,handler:function(){return new e}})})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t;(function(n){function t(n,t,i,r,u){var e=function(n){if(n.length){var r=n.map((function(n){return n.resourceId.toLowerCase()})),t=i().filter((function(n){return r.indexOf(n.resourceId.toLowerCase())===-1}));t.push.apply(t,n);i(t)}},f=t.items.filter(n,r).map(n,(function(n,t){return ko.ignoreDependencies((function(){return u(t)}))}));f.subscribe(n,e).callback(f())}n.ConnectView=t}
)(t=n.SupplementalDataStreamHelper||(n.SupplementalDataStreamHelper={}))})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function f(n,t){return(n&t)===t}function o(n,t){return n&&n.viewModel&&f(n.contracts,t)}function i(n,t){return Q(new e.PdlBladeReference(n.detailBlade,n.extension,{parameters:n.detailBladeInputs,onClosed:t}))}function s(n){return t().mapAssetIdToResourceId(n)}function h(n){return t().mapResourceIdToAssetId(n)}function r(n,i){return i===void 0&&(i=!1),t().mapAssetIdToDynamicSelectionAndIcon(n,i)}function c(n,t){return t===void 0&&(t=!1),r(n,t).then((function(n){return n.selection}))}function l(n){return r(n,!0).then((function(n){return i(n.selection)}))}function u(n,i){return i===void 0&&(i=!1),t().mapResourceIdToDynamicSelectionAndIcon(n,i)}function a(n,t){return t===void 0&&(t=!1),u(n,t).then((function(n){return n.selection}))}function v(n,t){return u(n,!0).then((function(n){return i(n.selection,t)}))}function y(n,i){return t(
).getAssetTypeInformation(n,i)}function p(n){return t().getResourceTypeAssetTypeInformation(n)}function w(n){return t().getResourceAssetInformation(n)}function b(n){return t().signalResourcesChanged(n)}var e=FxImpl.Composition.Selectable,t=function(){return FxImpl.Assets.runtimeForTesting||FxImpl.Extension.getRuntime()};n.ResourceColumns={name:1,kind:2,resourceGroup:3,resourceGroupColumnId:3,location:4,locationColumnId:4,locationId:5,subscription:9,subscriptionName:9,subscriptionId:10,assetType:11};n.supportsContract=f;n.assetTypeInformationSupportsContract=o;n.mapDynamicBladeSelectionToBladeReference=i;n.mapAssetIdToResourceId=s;n.mapResourceIdToAssetId=h;n.mapAssetIdToDynamicSelectionAndIcon=r;n.mapAssetIdToDynamicSelection=c;n.mapAssetIdToBladeReference=l;n.mapResourceIdToDynamicSelectionAndIcon=u;n.mapResourceIdToDynamicSelection=a;n.mapResourceIdToBladeReference=v;n.getAssetTypeInformation=y;n.getResourceTypeAssetTypeInformation=p;n.getResourceAssetInformation=w;n.signalResourcesChanged=
b})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function f(n,t,u){return r(i({name:n,cloudName:t},{forceCloudName:!0}),u)}function r(n,t){return n+"_"+t}function e(n,t){return n?i({name:n,cloudName:t}):n}var u=n.Extension,i=u.getWindowId;t.getAssetTypeOrResourceTypeId=f;t.getAssetTypeOrResourceTypeIdByWindowId=r;t.addCloudNameToAssetTypeId=e})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){this._init()}return n.prototype.add=function(n,t){var i,r,u;return n&&(r=this._entries,t?(u=this._names,i=u[t],i===undefined&&(i=r.length,u[t]=i)):i=r.length,r[i]=n),this},n.prototype.remove=function(n){var t=this._entries,i,r;return typeof n=="string"?(i=this._names,r=i[n],isNaN(r)||(delete i[n],t[r]=null)):t.forEach((function(i,r){i===n&&(t[r]=null)})),this},n.prototype.clear=function(){return this._init(),this},n.prototype.fire=function(n){return this._entries.forEach(
(function(t){t&&t(n)})),this},n.prototype._init=function(){this._entries=[];this._names={}},n})();n.Callbacks=t})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=undefined,r=n.extendArrayIntoMap,u=n.extendStringMapIntoMap,f,e,o,s,h,c,l,a,v,y;t.Shell="fx";t.DefaultCloudName=window.fx.environment.defaultCloudName||"DefaultCloud";t.HubsCloudName="HubsCloud",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(f=t.ExtensionNames||(t.ExtensionNames={})),(function(n){n.Dashboard="Dashboard";n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseAllResources="BrowseAllResources";
n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseServiceBlade="BrowseService";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.BrowseResourceBlade="BrowseResource";n.BrowseInstanceLinkBlade="BrowseInstanceLink";n.Gallery="Gallery";n.StoreGallery="StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource="BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(e=t.AssetNames||(t.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(o=t.ResourceTypes||(t.ResourceTypes={})),(function(n){var t;(function(n){u(n,{BrowseServicePinnedPart:"BrowseServicePart",BrowseResourcePinnedPart:i,BrowseResourceGroupPinnedPart:i})}
)(t=n.Hubs||(n.Hubs={}))})(s=t.PartNames||(t.PartNames={})),(function(n){var t,f,e,o;(function(n){r(n,["SubscriptionsBlade"])})(t=n.Billing||(n.Billing={})),(function(n){u(n,{CreateHubBlade:"GalleryCreateBlade",BrowseAllResourcesBlade:i,BrowseLinkBlade:i,BrowseResourceBlade:i,BrowseResourceGroupBlade:i,BrowseServiceBlade:i,NotFoundAssetBlade:i,ResourceGroupMapBlade:i,ResourceMenuBlade:i,ResourceProperties:i,UnauthorizedAssetBlade:i,UnavailableAssetBlade:i})})(f=n.Hubs||(n.Hubs={})),(function(n){u(n,{GalleryFeaturedMenuItemBlade:i,GalleryResultsListBlade:i,LegalTermsV2Blade:"PCLegalTermsV2Blade"})})(e=n.Marketplace||(n.Marketplace={})),(function(n){r(n,["EventsBrowseBlade"])})(o=n.AzureMonitoring||(n.AzureMonitoring={}))})(h=t.BladeNames||(t.BladeNames={})),(function(n){n.ViewModel="viewModel";n.PartViewModel="partViewModel"})(c=t.ViewModelTypes||(t.ViewModelTypes={})),(function(n){r(n,["FeatureAdoption","FeatureObsolete"])})(l=t.Telemetry||(t.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";
n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(a=t.TelemetrySharing||(t.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(v=t.GalleryMenuItems||(t.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(y=t.BladeParameterNames||(t.BladeParameterNames={}))})(i=t.Constants||(t.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i,r={doubleclick:"dblclick",mousewheel:"wheel",fxpinblade:"pinblade",fxrightclick:"rightclick",animationstart:i,blur:i,change:i,click:i,contextmenu:i,dragover:i,dragstart:i,dragend:i,dragenter:i,dragleave:i,drop:i,focus:i,hashchange:i,input:i,keydown:i,keypress:i,keyup:i,mousedown:i,mouseenter:i,mouseleave:i,mousemove:i,mouseout:i,mouseover:i,mouseup:i,popstate:i,resize:i,rightclick:i,scroll:i,selectstart:i,transitionend:i,focusin:i,focusout:i,remove:i,fxactionbarclick:i,fxactionbarresize:i,fxactionbarvalidationtargetupdated:i,fxactionbarvalidationtargetmutated:
i,fxautosettings:i,fxbladestatusbarclicked:i,fxbreadcrumbclick:i,fxcollapsedstateupdated:i,fxcontextmenu:i,fxcontextmenurequest:i,fxcontextpaneclosing:i,fxcopybuttonclick:i,fxcreatepart:i,fxensurebladevisible:i,fxensureviewportvisible:i,fxenterorganizemode:i,fxerrorpartclicked:i,fxexitorganizemode:i,fxhomebuttonclick:i,fxopeninnewtab:i,fxnotificationclickinmenu:i,fxopenshortcutslegend:i,fxpartcreated:i,fxpartgallerypivotinitialized:i,fxportalcontrolloadfailed:i,fxreadyforfocus:i,fxrearrange:i,fxredrawblade:i,fxregistermenu:i,fxrotatetheme:i,fxsettingsbuttonclick:i,fxnotificationsbuttonclick:i,fxshowstartboard:i,fxsizechange:i,fxsizechanged:i,fxsummarycollapsed:i,fxtoastclick:i,fxunpin:i,touchcancel:i,touchend:i,touchmove:i,touchstart:i,lostpointercapture:i,pointercancel:i,pointerdown:i,pointermove:i,pointerup:i};n.forEachKey(r,(function(n,t){r[n]=t||n}));t.EventTypes=r})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function d(n){var t="task:";
try{t+=JSON.stringify(n,(function(n,t){var i=t;return n==="args"&&(i=undefined),typeof t=="function"&&(i=t+""),i}))}catch(i){t+="{\nname: "+n.name+" \nFunc: "+(n.scheduledTask+"")+" }"}return t}function v(){}function h(){var n,t,v,u,f;if(!r&&(n=i.first(),n)){var e=l(),s=[n],h=!1,c=1;for(t=1,v=i.length;t<v;t++)if(u=i[t],u.scheduledExecutionTime<=e)c++,u!==n?s.push(u):h=!0;else break;h&&(i=s.concat(i.slice(t)));f=0;a&&(f=(c>>>2)*1e3);r=setTimeout(k,Math.max(f,n.scheduledExecutionTime-e));o=n}}function g(n){return n===o&&r}function c(){r&&(clearTimeout(r),r=null,o=null)}function y(n,t){var i,u="Error executing \n'"+d(n)+"'"+t?"\nerror:"+t.message:"",r;return e.isInstanceOfErrorType(t,e.Error)?(t.message=u,i=t):(r=new e.Error(u),r.innerErrors.push(t),i=r),i}var e=n.Errors,p=new t.Diagnostics.Log("MsPortalFx/Base/Base.Scheduler"),l=Date.now,a=!n.isFeatureEnabled("nodataperf"),u="",w={recurring:u,autoRecurring:u,concurrent:u,positiveInt:u},f=FxImpl.getErrorMap(w),r,o,i=[],b=function(){var t,u,
n,f,r;try{if(u=i[0],c(u),n=i.shift(),n)if(v(n,!0),a)t=Q.fcall((function(){return n.scheduledTask.apply(n,n.args||[])})).catch((function(t){return Q.reject(y(n,t))})).finally((function(){n.recurring&&s.scheduleTask(n)}));else try{f=n.scheduledTask.apply(n,n.args||[]);t=Q(f)}catch(e){r=y(n,e);p.error(r);t=Q.reject(r)}finally{n.recurring&&s.scheduleTask(n)}}finally{h()}return t},k=b,s=(function(){function t(){}return t.scheduleTask=function(t,r){var s,u,a;t.recurring&&(t.absoluteTime&&f.recurring(),t.isAsync&&f.autoRecurring());!r&&i.indexOf(t)>=0&&f.concurrent();t.name||(t.name="Anonymous "+n.getUniqueId());var y=l(),e=t,o=e.absoluteTime;for(o||(s=e.delayInMs,(isNaN(s)||s<=0)&&f.positiveInt(),o=y+s),e.scheduledExecutionTime=o,u=0,a=i.length;u<a;u++)if(i[u].scheduledExecutionTime>o)break;i.splice(u,0,e);v(e);u===0&&c();h()},t.deleteTask=function(n){var t=i.filter((function(t){return t!==n}));t.length!==i.length&&(i=t,g(n)&&c(),h())},t})();t.Scheduler=s})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,t){return new FxImpl.Security.AuthTokenCacheImpl(n,t)}function r(n){return t.getRuntime().getAuthorizationToken(n)}function u(){return t.getRuntime().getUserInfo()}function f(n,i){return t.getRuntime().hasPermission(n,i,undefined)}function e(n,i){return t.getRuntime().assetHasPermission(n,i)}var t=FxImpl.Extension;n.createAuthTokenCache=i;n.getAuthorizationToken=r;n.getUserInfo=u;n.hasPermission=f;n.assetHasPermission=e})(t=n.Security||(n.Security={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function e(n,i){if(i?i.token=n:i={token:n},n&&n.expiresAt>0){var u=Date.now(),r=n.expiresAt-t.tokenRefreshBeforeExpiryTimespan;i.expiresAt=n.expiresAt;i.refreshAfter=r<u?-1:r}else i.expiresAt=-1,i.refreshAfter=-1;return i}function l(n,t,i){return u.getRuntime().hasPermission(n,t,i)}var s=MsPortalFx.Base,u=n.Extension,h=new s.Diagnostics.Log("MsPortalFx/Base/Internal/Base.Security"),
f=1e3,i=6e4,c=4,r,o;t.tokenRefreshBeforeExpiryTimespan=6e5;r=u.selfCloudName||"*";t.tokenErrors={unknown:"Unknown",accessDenied:"AccessDenied",sessionEnded:"SessionEnded",credentialsExpired:"CredentialsExpired",networkError:"NetworkError",requiresMFA:"RequiresMfa",accountDisabled:"AccountDisabled",nullToken:"NullToken"};o=(function(){function u(t,i){var u=this;this._cachedTokenMap=n.getCloudMap();this._getTokenWorker=t;i&&MsPortalFx.forEachKey(i,(function(n,t){u._cachedTokenMap.getOrSet(r,{})[n]=e(t)}))}return u.prototype.getToken=function(n){var s=this._stalledPromise,o;if(s)return s;n=n||{};var u={cloudName:n.cloudName||r,resourceName:n.resourceName||""},h=u.resourceName,c=this._cachedTokenMap.getOrSet(u.cloudName,{}),t=c[h],e=Date.now(),i;if(t){if(i=t.refreshAfter,t.token&&i>0&&i>e)return Q(t.token)}else t={token:null,expiresAt:-1,refreshAfter:-1},c[h]=t;return(o=t.expiresAt,!t.token||o>0&&o<e)?(t.token=null,t.expiresAt=-1,t.refreshAfter=-1,this._refreshTokenWorker(u,!1,f,t)):(i>0&&i<e&&
this._refreshTokenWorker(u,!0,f,t),Q(t.token))},u.prototype.getTokenExpiresAt=function(n,t){var i=this._cachedTokenMap.getOrSet(n,{})[t||""];return i&&i.expiresAt},u.prototype._refreshTokenWorker=function(n,t,i,r){if(r.tokenPromise)return r.tokenPromise;var u=MsPortalFx.extend(n,{isBackground:t,ignoreRejection:!1}),f=this._refreshTokenWorkerInternal(u,i,r);return r.tokenPromise=f.catch((function(n){var t=n,i;return u.ignoreRejection?(i=new MsPortalFx.Errors.CanceledError("GetAuthorizationTokenOptionsExtended2.ignoreRejection === true"),i.innerErrors.push(n),t=i):t&&t.message&&(t.message="Base.Security: Unexpected failure getting token. Error:"+t.message+"."),Q.reject(t)})).finally((function(){r.tokenPromise=null}))},u.prototype._refreshTokenWorkerInternal=function(n,r,u){var f=this;return Q(this._getTokenWorker(n)).then((function(o){var s=o||{},v=s.token,y,l,a;if(v)return e(v,u),v;if(n.isBackground)return n.ignoreRejection=!0,Q.reject(o);y=s.error;switch(y){case t.tokenErrors.sessionEnded:a=
f._stalledPromise;a||(f._stalledPromise=a=Q.defer().promise);l=a;break;case t.tokenErrors.accessDenied:n.ignoreRejection=!0;l=Q.reject(o);break;default:y===t.tokenErrors.unknown&&h.warning("FX failed to get token. Blocking extension token requests until issue resolves. ServerMessage:"+s.errorMessage+". ServerErrorCode:"+s.error+".");l=Q.delay(r).then((function(){var t=r>=i?i:Math.min(r*c,i);return u.tokenPromise=null,f._refreshTokenWorkerInternal(n,t,u)}))}return l}))},u})();t.AuthTokenCacheImpl=o;t.hasPermission=l})(t=n.Security||(n.Security={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Minimized=0]="Minimized";n[n.Normal=1]="Normal";n[n.Maximized=2]="Maximized"})(n.DisplayState||(n.DisplayState={}));var t=n.DisplayState})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Action=1]="Action";n[n.Info=2]="Info";n[n.Create=3]="Create";n[n.Context=4]="Context";n[n.Help=5]="Help";n[n.Basic=
6]="Basic";n[n.ContextAction=7]="ContextAction";n[n.BasicWithCommands=8]="BasicWithCommands";n[n.Hub=9]="Hub";n[n.HubSubMenu=10]="HubSubMenu";n[n.ResourceSetting=11]="ResourceSetting";n[n.App=12]="App"})(n.BladeStyle||(n.BladeStyle={}));var t=n.BladeStyle})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.Menu=51]="Menu";n[n.Expandable=101]="Expandable"})(n.BladeWidth||(n.BladeWidth={}));var t=n.BladeWidth})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=MsPortalFx.Base,f=MsPortalFx.Errors,r=MsPortalFx.Helpers.resolve(),u=ko.observable,e=(function(){function t(n,t,r){var f=this,e;this._loadedCacheEntry=u(null);this._isDisposed=!1;this._requestInProgress=u();this._dataSource=n;this._errorNotificationTarget=t;this._interceptNotFound=r&&r.interceptNotFound!==undefined?r.interceptNotFound:
!0;i.ProxiedObservables.markNonSerializable(this);e=this._lifetime=t;this._isLoading=ko.computed(e,(function(){return!!f._requestInProgress()}));e.registerForDispose((function(){f._isDisposed=!0;f._cancelInProgressRequest();f._releaseCurrentContents()}))}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0}),t.prototype.fetch=function(t){var f=this,e=this._requestInProgress,o,s,h,u;return this._isDisposed?r:(o=this._currentCacheEntryDisposer,s=function(){o&&o.dispose()},this._currentParams=t,this._cancelInProgressRequest(),this._currentParams===null||this._currentParams===undefined)?(this._loadedCacheEntry(null),s(),r):(this._currentCacheEntryDisposer=new n.TriggerableLifetimeManager,h=new i.Promises.CancelationToken,u={cancelationToken:h,cancelablePromise:i.Promises.wrapWithCancelablePromise(this._dataSource.fetch(t,this._currentCacheEntryDisposer),h),externalPromise:null},s(),e(u),u.cancelablePromise.then((function(n){f._loadedCacheEntry(
n);e(null)}),(function(){e(null);f._loadedCacheEntry(null)})),u.externalPromise=u.cancelablePromise.then((function(){})),u.externalPromise.then(null,(function(n){f._handleFetchRejections(n)})),u.externalPromise)},t.prototype._cancelInProgressRequest=function(){var n=this._requestInProgress;n()&&(n().cancelationToken.cancel(),n(null))},t.prototype._releaseCurrentContents=function(){this._currentCacheEntryDisposer&&(this._currentCacheEntryDisposer.dispose(),this._currentCacheEntryDisposer=null)},t.prototype._handleFetchRejections=function(n){if(n instanceof f.NotFoundDataError&&this._interceptNotFound!==!1){var t=n;t.handled=!0;typeof this._interceptNotFound=="function"?this._interceptNotFound(this._currentParams):this._errorNotificationTarget.notFound&&this._errorNotificationTarget.notFound()}},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],t)})();t.ObjectView=e})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var r=MsPortalFx.Base,i=MsPortalFx.
Data,u=(function(){function n(){r.ProxiedObservables.markNonSerializable(this);this._atomizationCache=new i.ObjectCache({serializeKey:function(n){return JSON.stringify([n.type,n.id])},supplyValue:function(){return null}})}return n.prototype.getEntity=function(n,t,i){var r={type:n,id:t},u;return this._atomizationCache.hasEntry(r)&&(u=this._atomizationCache.getValue(r,i)),u},n.prototype.addEntity=function(n,t,i,r){this._atomizationCache.insertValueIfNotPresent({type:n,id:t},i,r)},n.prototype.releaseEntities=function(){},n})(),f;t.RefCountingAtomizationContext=u,(function(t){function u(i){i=i||r;var u=t.atomizationContextCollection[i];return u||(u=n.Data.AtomizationContext.createInstance(),t.atomizationContextCollection[i]=u),u}function f(n){if(!n)return!1;var t=i.Metadata.getTypeMetadata(n);return!!(t&&t.hasGloballyUniqueId&&i.Metadata.typeHasId(n))}function e(){return new n.Data.RefCountingAtomizationContext}t.atomizationContextCollection={};var r="__default__";t.get=u;t.canAtomizeType=f;t.
createInstance=e})(f=t.AtomizationContext||(t.AtomizationContext={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var u=MsPortalFx.Base,f=MsPortalFx.Data,e=0,o=0,c=new u.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.DataCache"),i="",s={loaderConflict:i,getSerialize:i,dataCacheProps:i,establishDataSet:i},r=n.getErrorMap(s),h=(function(){function n(n){var t=this,i,o;u.ProxiedObservables.markNonSerializable(this);this._cacheName=[n.cacheName,n.entityTypeName,"DataCache",++e].filter((function(n){return!!n})).join(":");n.loader?(this._loader=n.loader,(n.sourceUri||n.httpMethod)&&r.loaderConflict(),this._logIgnoredDataCacheLoaderOptions(n)):n.sourceUri||n.supplyData&&n.serializeParams?(this._loader=new f.DataCacheLoader2(n),i=n.httpMethod&&n.httpMethod.toLowerCase()!=="get",i&&!n.serializeParams&&r.getSerialize()):r.dataCacheProps();o={collectEfficiencyTelemetry:!0,supplyValue:function(n,i){var r=t._createUniqueDataSetName();return t._supplyValue(
r,n,i)},tryFindValueInRelatedCache:function(n,i){var u=t._tryFindDataInRelatedCache(n,i);if(u){var e=ko.toJS(u),r=t._createUniqueDataSetName(),o=t._establishDataSet(r,n,e,i),f=Q(o);return f.dataSetName=r,t._doesPoll()&&t._supplyValue(r,n,i),{value:f}}return null},serializeKey:function(n){return t._loader.serializeParams(n)},evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n){var i=function(){t._loader.disposeDataSet(n)};n.state&&n.state()!=="pending"||n.isFulfilled&&n.isFulfilled()||n.isRejected&&n.isRejected()?i():n.then(i,i)}};this._cacheByParams=new f.ObjectCache(o)}return n.prototype.fetch=function(n,t){var i=this._cacheByParams,r=i.getValue(n,t);return r.then(null,(function(){i.immediatelyEvictEntry(n)})),r},n.prototype.refresh=function(n,t){var r=this._cacheByParams.hasEntry(n),i=this.fetch(n,t);return r?this._loader.refreshDataSet(i):i},n.prototype.refreshAll=function(n){var t=this;this._forEachEntry((function(i,r){var u=!n||n(i);u&&
t._loader.refreshDataSet(r)}))},n.prototype.forceRemove=function(n){this._cacheByParams.immediatelyEvictEntry(n)},n.prototype.applyChanges=function(n,t){var i=this;this._forEachEntry((function(t,r,u){u&&n(t,u);var e=r.dataSetName,f=i._loader;f.isLoadingDataSet(e)&&f.refreshDataSet(r)}),t)},n.prototype.dispose=function(){this._cacheByParams.dispose()},n.prototype._doesPoll=function(){return this._loader._doesPoll()},n.prototype._findEntity=function(n,t){var r=this,i;return this._forEachEntry((function(u,f,e){if(!i){var o=r._getDataFromDataSet(e);i=n(u,o,t)}})),i},n.prototype.dump=function(n){var t=[];if(this._forEachEntry((function(n,i,r){t.push(ko.toJS({key:n,data:!r?"<null dataSet>":r.data}))})),n)return t;console.log(JSON.stringify(t,null,4))},n.prototype._tryFindDataInRelatedCache=function(){return null},n.prototype._forEachEntry=function(n,t){var i=this;this._cacheByParams.forEachEntry((function(r,u){if(!t||t(r)){var f=u.dataSetName,e=i._loader.getLoadedDataSet(f);n(r,u,e)}}))},n.prototype.
_supplyValue=function(n,t,i){return this._loader.loadDataSetForParams(n,t,i)},n.prototype._establishDataSet=function(n,t,i,u){return this._loader.establishDataSet||r.establishDataSet(),this._loader.establishDataSet(n,t,i,u)},n.prototype._createUniqueDataSetName=function(){return this._cacheName+":"+ ++o},n.prototype._logIgnoredDataCacheLoaderOptions=function(){},n})();t.DataCache=h})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t=MsPortalFx.Base,i=MsPortalFx.Helpers.resolve(),r=ko.observableArray,f=new t.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.DataView"),u=(function(n){function u(t,i,u){var f=this;n.call(this,t,i,u);this._partialErrors=r();ko.reactor(i,(function(){var n=f._loadedCacheEntry();f._partialErrors(n&&n.partialErrors()||[])}))}return __extends(u,n),Object.defineProperty(u.prototype,"_refreshableDataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"partialErrors",
{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),u.prototype.refresh=function(){var n=this._requestInProgress,r,u,f;if(this._isDisposed||(r=this._currentCacheEntryDisposer,!r))return i;if(!n()){if(!this._loadedCacheEntry())return this.fetch(this._currentParams);u=new t.Promises.CancelationToken;n({cancelationToken:u,cancelablePromise:t.Promises.wrapWithCancelablePromise(this._refreshableDataSource.refresh(this._currentParams,r),u),externalPromise:null});f=function(){n(null)};n().cancelablePromise.then(f,f);n().externalPromise=n().cancelablePromise.then((function(){}))}return n().externalPromise},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],u)})(n.ObjectView);n.DataView=u})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var f=MsPortalFx,h=f.Base,e=f.Data,i=n.Rpc,a=n.Data,c=new h.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),o,s,l;t.saveSerializedEditScopeEndPoint=new i.ActionEndPointDefinition(
"FxImpl.Data.saveSerializedEditScope");t.loadSerializedEditScopeEndPoint=new i.FuncEndPointDefinition("FxImpl.Data.loadSerializedEditScope");t.onEditScopeDiscardedEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.onEditScopeDiscarded");t.updateEditScopeIsSavingStateEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.updateEditScopeIsSavingState");var r="",v={dataCachePolling:r,viewUnloaded:r,serializeParams:r,fetchPrereq:r,existingPrereq:r,newPrereq:r},u=n.getErrorMap(v);(function(n){n[n.LoadOriginalDataFailed=0]="LoadOriginalDataFailed";n[n.LoadEditsFailed=1]="LoadEditsFailed";n[n.ApplyEditsFailed=2]="ApplyEditsFailed"})(t.FetchEditScopeError||(t.FetchEditScopeError={}));o=t.FetchEditScopeError;s=(function(){function n(n){var r=this;n===void 0&&(n=i.client);this._caches=[];t.onEditScopeDiscardedEndPoint.register(n,["fx"],(function(n){r._caches.forEach((function(t){t.onEditScopeDiscarded(n)}))}))}return n.prototype.register=function(n){this._caches.push(n)},n.prototype.deregister=function(
n){this._caches.remove(n)},n})();t.EditScopeDiscardedReceiver=s;t.editScopeDiscardedReceiver=new s;l=(function(){function r(n,i){var o=this,c,s;this._editScopeEditsChangedSubs={};this._loadEdits=i&&i.loadEdits||r._remoteLoadEdits;this._saveEdits=i&&i.saveEdits||r._remoteSaveEditScope;this._updateEditScopeIsSavingState=i&&i.updateEditScopeIsSavingState||r._remoteUpdateEditScopeIsSavingState;this._entityTypeName=n.entityTypeName;c=this._options=f.clone(n);s=c.dataCache;s&&s._doesPoll()&&u.dataCachePolling();h.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new e.ObjectCache({supplyValue:function(n,t){return o._getEditScopeForKey(n,t)},serializeKey:function(n){return o._serializeKey(n)},onEntryDisposed:function(n,t){var i=o._serializeKey(t),r=o._editScopeEditsChangedSubs[i];r&&(delete o._editScopeEditsChangedSubs[i],r.dispose());n.then((function(n){n.dispose()}))}});t.editScopeDiscardedReceiver.register(this)}return r.prototype.createView=function(n,t){return new e.EditScopeView(
this,n,t||{})},r.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)},r.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,t)})))})),Q.all(t)},r.prototype.dispose=function(){var i=this._cacheByParams,n,r;if(i&&(i.dispose(),this._cacheByParams=null),n=this._editScopeEditsChangedSubs,n){for(r in n)n[r].dispose();this._editScopeEditsChangedSubs=null}t.editScopeDiscardedReceiver.deregister(this)},r.prototype.disposeAndDiscardEdits=function(n,t){var i=t.editScope();i||u.viewUnloaded();i.dispose();r._remoteSaveEdits(n,{edits:[]})},r.prototype.onEditScopeDiscarded=function(n){return this.forEachEditScope((function(t,i){t!==n||i.saving()||i.revertAll()}))},r._remoteSaveEditScope=function(n,t){r._remoteSaveEdits(n,t.getEdits())},r._remoteSaveEdits=function(n,i){t.saveSerializedEditScopeEndPoint.invoke(r._rpcClient,"fx",{editScopeId:n,edits:i})},r._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.
invoke(r._rpcClient,"fx",n).then(null,(function(n){c.error("Loading of EditScope edits from user settings service failed.");throw n;}))},r._remoteUpdateEditScopeIsSavingState=function(n,i){t.updateEditScopeIsSavingStateEndPoint.invoke(r._rpcClient,"fx",{editScopeId:n,isSaving:i})},Object.defineProperty(r.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!0,configurable:!0}),r.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,r,t,f;return i&&(r=this._options,t=r.serializeParams,t||(t=r.serializeKeyOrQuery,t||(f=typeof i,f==="number"||f==="string"?t=JSON.stringify:u.serializeParams())),e+=":"+t(i)),e},r.prototype._getEditScopeForKey=function(n,t){var r,i,f;return n.editScopeId||u.fetchPrereq(),i=this._options,f=n.params,f!==undefined?i.supplyExistingData?r=function(){return i.supplyExistingData(f,t)}:i.dataCache?r=function(){var n=i.dataCache.createView(t);return n.fetch(f).then((function(){return n.data}))}:u.existingPrereq():i.supplyNewData?
r=function(){return Q(i.supplyNewData())}:i.entityTypeName?r=function(){return Q(e.Metadata.createEmptyObject(i.entityTypeName))}:u.newPrereq(),this._acquireEditScope(n,r,t,i.entityTypeName)},r.prototype._acquireEditScope=function(t,i,r,u){var f=this,e=Q.defer();return i().then((function(i){var c,o,h,s;if(!f._isDisposed){if(o=f._options,o.refreshEditScope?c=function(i){var r=new n.TriggerableLifetimeManager;return o.refreshEditScope(t.params,r,i).finally((function(){r.dispose()}))}:o.dataCache&&(c=function(){var i=new n.TriggerableLifetimeManager,r=o.dataCache.createView(i);return r.fetch(t.params).then((function(){return r.data})).finally((function(){i.dispose()}))}),h=t.editScopeId,s=a.createEditScope(i,{kind:o.kind,typeName:u,refresh:c,save:o.saveEditScopeChanges&&function(i,r,u){f._updateEditScopeIsSavingState(h,!0);var e=new n.TriggerableLifetimeManager;return f._cacheByParams.getValue(t,e),i.saving.subscribe(e,(function(n){n||(e.dispose(),f._updateEditScopeIsSavingState(h,!1))})),o.saveEditScopeChanges(
t.params,i,r,e,u)}}),o.onEditScopeCreated)o.onEditScopeCreated(r,s);f._loadAndApplyEdits(s,h).then((function(){if(!f._isDisposed){var n=f._serializeKey(t);f._editScopeEditsChangedSubs[n]=s.editsChanged.subscribe((function(){f._saveEdits(h,s)}));e.resolve(s)}}),(function(n){e.reject(n)}))}}),(function(n){e.reject(n)})),e.promise},r.prototype._loadAndApplyEdits=function(n,t){var i=this;return this._loadEdits(t).then((function(t){if(!i._isDisposed)return t&&!n.applyEdits(t)?(c.warning("Application of EditScope edits from user settings service failed."),Q.reject(o.ApplyEditsFailed)):void 0}),(function(){return o.LoadEditsFailed}))},r._rpcClient=i.client,r=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],r)})();t.EditScopeCache=l})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var u=MsPortalFx,e=u.Base,a=n.Rpc,o=u.Helpers,s=o.resolve,h=o.Deferred,f=u.Data,c=new e.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),l=n.Data.editScopeDiscardedReceiver,
i="",v={noEditScope:i,missingSerializeParams:i,missingSupplyExistingData:i,fetchNewPrereq:i,fetchExistingPrereq:i},r=n.getErrorMap(v),y=(function(){function i(n,t){var r=this;this._editScopeEditsChangedSubs={};this._loadEdits=t&&t.loadEdits||i._remoteLoadEdits;this._saveEdits=t&&t.saveEdits||i._remoteSaveEditScope;this._entityTypeName=n.entityTypeName;this._options=u.clone(n);e.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new f.ObjectCache({supplyValue:function(n,t){return r._getEditScopeForKey(n,t)},serializeKey:function(n){return r._serializeKey(n)},onEntryDisposed:function(n,t){var i=r._serializeKey(t),u=r._editScopeEditsChangedSubs[i];u&&(delete r._editScopeEditsChangedSubs[i],u.dispose());n.then((function(n){n.dispose()}))}});l.register(this)}return i.prototype.createView=function(n,t){return new f.EditScopeView(this,n,t||{})},i.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)},i.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.
forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,t)})))})),Q.all(t)},i.prototype.dispose=function(){var t=this._cacheByParams,n,i;if(t&&(t.dispose(),this._cacheByParams=null),n=this._editScopeEditsChangedSubs,n){for(i in n)n[i].dispose();this._editScopeEditsChangedSubs=null}l.deregister(this)},i.prototype.disposeAndDiscardEdits=function(n,t){var u=t.editScope();u||r.noEditScope();u.dispose();i._remoteSaveEdits(n,{edits:[]})},i.prototype.onEditScopeDiscarded=function(n){return this._revertEditScope(n)},i._remoteSaveEditScope=function(n,t){i._remoteSaveEdits(n,t.getEdits())},i._remoteSaveEdits=function(n,r){t.saveSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",{editScopeId:n,edits:r})},i._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",n).then(null,(function(n){c.error("Loading of EditScope edits from user settings service failed.");throw n;}))},Object.defineProperty(i.prototype,"_isDisposed",{get:function(){return this._cacheByParams===
null},enumerable:!0,configurable:!0}),i.prototype._revertEditScope=function(n){return this.forEachEditScope((function(t,i){t===n&&i.revertAll()}))},i.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,u,t,f;return i&&(u=this._options,t=u.serializeParams,t||(t=u.serializeKeyOrQuery,t||(f=typeof i,f==="number"||f==="string"?t=JSON.stringify:r.missingSerializeParams())),e+=":"+t(i)),e},i.prototype._getEditScopeForKey=function(n,t){var e,i=this._options,u=n.params;return n.editScopeId&&(u||u===null)?(i.supplyExistingData||r.missingSupplyExistingData(),e=function(){return i.supplyExistingData(u,t)}):n.editScopeId&&u===undefined&&i.supplyNewData?e=function(){return s(i.supplyNewData())}:n.editScopeId&&!u&&i.entityTypeName?e=function(){return s(f.Metadata.createEmptyObject(i.entityTypeName))}:i.supplyNewData||i.entityTypeName?r.fetchExistingPrereq():r.fetchNewPrereq(),this._acquireEditScope(n,e,t,i.entityTypeName)},i.prototype._acquireEditScope=function(i,r,u,f){var e=this,o=h(),
c=o.promise(),s=i.editScopeId;return r().then((function(t){if(!e._isDisposed){var r=e._options,h=n.Data.createEditScope(t,{kind:r.kind,typeName:f,refresh:r.refreshEditScope&&function(t){var u=new n.TriggerableLifetimeManager;return r.refreshEditScope(i.params,u,t).finally((function(){u.dispose()}))},save:r.saveEditScopeChanges&&function(t,u,f){var e=new n.TriggerableLifetimeManager;return r.saveEditScopeChanges(i.params,t,u,e,f).finally((function(){e.dispose()}))}});if(r.onEditScopeCreated)r.onEditScopeCreated(u,h);e._loadAndApplyEdits(h,s).then((function(){if(!e._isDisposed){var n=e._serializeKey(i);e._editScopeEditsChangedSubs[n]=h.editsChanged.subscribe((function(){e._saveEdits(s,h)}));o.resolve(h)}}),(function(n){o.reject(n)}))}}),(function(){o.reject(t.FetchEditScopeError.LoadOriginalDataFailed)})),c},i.prototype._loadAndApplyEdits=function(n,i){var r=this;return this._loadEdits(i).then((function(i){if(!r._isDisposed){var u=h();return i?n.applyEdits(i)?u.resolve():(c.warning("Application of EditScope edits from user settings service failed."),
u.reject(t.FetchEditScopeError.ApplyEditsFailed)):u.resolve(),u.promise()}}),(function(){return t.FetchEditScopeError.LoadEditsFailed}))},i._rpcClient=a.client,i=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],i)})();t.EditScopeCacheOld=y})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function c(n){f.client.invokeRpc(e.RpcMethods.submitObjectCacheTelemetry,MsPortalFx.Base.Constants.Shell,n)}function l(n,t){if(u){i=[];var r=n||h,f=t||c,e=window.setInterval((function(){i.length>0&&(f(i),i=[])}),r);return{dispose:function(){window.clearInterval(e)}}}}function a(){f.client.registerRpcEndPoint(e.RpcMethods.submitObjectCacheTelemetry,{allowedOrigin:null,handler:function(n,t){n.forEach((function(n){o.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:"ObjectCacheRead",data:n})}))}})}var f=n.Rpc,e=n.Constants,o=MsPortalFx.Base.Diagnostics.Telemetry,i=[],h=5e3,u=MsPortalFx.isFeatureEnabled("dataobjectcachetelemetry"),r=Date.
now,s;t.beginTelemetrySubmission=l;t.registerTelemetrySubmissionHandler=a;s=(function(){function n(){this._evictedEntryDateValues={};this._evictedEntryCircularBuffer=[]}return Object.defineProperty(n,"maxTrackedEvictedEntries",{get:function(){return 1e3},enumerable:!0,configurable:!0}),n.prototype.recordCacheRead=function(n,t){u&&(t?this._recordCacheHit(n):this._recordCacheMiss(n))},n.prototype.recordEviction=function(n){u&&(this._ensureEntryNotTrackedAsEvicted(n),this._evictedEntryDateValues[n]=r(),this._evictedEntryCircularBuffer.push(n),this._pruneExcessiveEvictedEntries())},n._getCurrentTelemetrySource=function(){var n=o.Context.getCompositionItemContext();return n?n.id:null},n.prototype._recordCacheHit=function(t){this._ensureEntryNotTrackedAsEvicted(t);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!0,secondsSinceEviction:null})},n.prototype._recordCacheMiss=function(t){var u=null;this._evictedEntryDateValues.hasOwnProperty(t)&&(u=(r()-this._evictedEntryDateValues[
t])/1e3);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!1,secondsSinceEviction:u})},n.prototype._ensureEntryNotTrackedAsEvicted=function(n){if(this._evictedEntryDateValues.hasOwnProperty(n)){delete this._evictedEntryDateValues[n];var t=this._evictedEntryCircularBuffer.indexOf(n);t>=0&&this._evictedEntryCircularBuffer.splice(t,1)}},n.prototype._pruneExcessiveEvictedEntries=function(){while(this._evictedEntryCircularBuffer.length>n.maxTrackedEvictedEntries){var t=this._evictedEntryCircularBuffer.shift();delete this._evictedEntryDateValues[t]}},n})();t.ObjectCacheTelemetryCollector=s})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function h(n){return n.evictionDelay!==undefined&&n.extendEntryLifetimes&&r.delayAndLifetime(),n.extendEntryLifetimes?o.defaultCacheEvictionDelay||105e3:(n.evictionDelay>f&&r.maxEvictionDelay(f),n.evictionDelay)}var u=MsPortalFx.forEachKey,o=window.fx.environment,f=6e4,i="",s={delayAndLifetime:
i,maxEvictionDelay:i,nullKey:i,nullCreateCallback:i,cacheDisposed:i},r=n.getErrorMap(s),c=(function(){function n(n){this._isDisposed=!1;this._evictionDelayMilliseconds=null;this._evictionTimeoutHandlesByKey={};this._entriesByKey={};this._entriesByReferrerThenKey={};MsPortalFx.Base.ProxiedObservables.markNonSerializable(this);n&&(this._onDisposeEntryCallback=n.onEntryDisposed,this._evictionDelayMilliseconds=h(n))}return n.prototype.getEntry=function(n,t,i){n||r.nullKey();i||r.nullCreateCallback();this._isDisposed&&r.cacheDisposed();var u=this._entriesByKey[n];return u||(u=new e(n,i()),t&&(this._entriesByKey[n]=u)),t?(this._ensureReferenceExists(u,t),this._cancelAnyDelayedEviction(u.getKey())):this._entryHasDelayedEvictionInProgress(u)||this._immediateEvictEntryIfNoReferences(u),u.getValue()},n.prototype.hasEntry=function(n){return n in this._entriesByKey},n.prototype.dissociateEntry=function(n,t){var r=this._entriesByKey[n],i;r&&(r.dissociate(t),i=this._entriesByReferrerThenKey[t],i&&(delete
i[n],MsPortalFx.isEmptyObject(i)&&delete this._entriesByReferrerThenKey[t]),this._delayedEvictEntryIfNoReferences(r))},n.prototype.immediatelyEvictEntry=function(n){var r=this,t=this._entriesByKey[n],i;t&&(i=t.dissociateFromAllReferrers(),i.forEach((function(t){var i=r._entriesByReferrerThenKey[t];i&&delete i[n]})),this._immediateEvictEntryIfNoReferences(t))},n.prototype.disposeReferrer=function(n){var i=this,t=this._entriesByReferrerThenKey[n];t&&u(t,(function(t){i.dissociateEntry(t,n)}))},n.prototype.forEachEntry=function(n){var t=this;u(this._entriesByKey,(function(i){var r=t._entriesByKey[i].getValue();n(i,r)}))},n.prototype.dispose=function(){var n=this;this._isDisposed=!0;this._onDisposeEntryCallback&&u(this._entriesByKey,(function(t){var i=n._entriesByKey[t].getValue();n._onDisposeEntryCallback(i,t)}));this._entriesByKey={};this._entriesByReferrerThenKey={};u(this._evictionTimeoutHandlesByKey,(function(t){n._cancelAnyDelayedEviction(t)}))},n.prototype._ensureReferenceExists=function(n,t){
var i=this._entriesByReferrerThenKey[t],r;i||(i={},this._entriesByReferrerThenKey[t]=i);r=n.getKey();r in i||(i[r]=n,n.associate(t))},n.prototype._entryHasDelayedEvictionInProgress=function(n){return!!this._evictionTimeoutHandlesByKey[n.getKey()]},n.prototype._cancelAnyDelayedEviction=function(n){var t=this._evictionTimeoutHandlesByKey[n];t&&(delete this._evictionTimeoutHandlesByKey[n],window.clearTimeout(t))},n.prototype._delayedEvictEntryIfNoReferences=function(n){var i=this,t;n.hasNoReferences()&&(t=n.getKey(),this._cancelAnyDelayedEviction(t),this._evictionDelayMilliseconds===null||this._evictionDelayMilliseconds===undefined?this._immediateEvictEntryIfNoReferences(n):this._evictionTimeoutHandlesByKey[t]=window.setTimeout((function(){i._immediateEvictEntryIfNoReferences(n)}),this._evictionDelayMilliseconds))},n.prototype._immediateEvictEntryIfNoReferences=function(n){if(n.hasNoReferences()){var t=n.getKey(),i=n.getValue();delete this._entriesByKey[t];this._onDisposeEntryCallback&&this.
_onDisposeEntryCallback(i,t);this._cancelAnyDelayedEviction(t)}},n})(),e;t.RefCountCache=c;e=(function(){function n(n,t){this._referrerIds=new MsPortalFx.Map;this._key=n;this._value=t}return n.prototype.getKey=function(){return this._key},n.prototype.getValue=function(){return this._value},n.prototype.hasNoReferences=function(){return!this._referrerIds.size},n.prototype.associate=function(n){this._referrerIds.set(n,n)},n.prototype.dissociate=function(n){this._referrerIds.delete(n)},n.prototype.dissociateFromAllReferrers=function(){var n=[],t=this._referrerIds;return t.forEach((function(t,i){return n.push(i)})),t.clear(),n},n})()})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i){var r=n[i];return t(n,i)?r():r}function t(n,t){var i=n[t];return ko.isObservable(i)&&!MsPortalFx.isObservableArray(i)}function r(n){if(!MsPortalFx.isArrayOrObservableArray(n))throw new Error("Only an array or an observable array is expected here.");
return ko.unwrap(n)}n.isObject=MsPortalFx.isObject;n.isNullOrUndefined=MsPortalFx.isNullOrUndefined;n.equalDates=MsPortalFx.areEqualDates;n.isObservableArray=MsPortalFx.isObservableArray;n.unwrapObjectPropertyValue=i;n.isObservableObjectPropertyValue=t;n.unwrapArrayOrObservableArray=r;n.equalScalarValues=MsPortalFx.areEqual})(t=n.Shared||(n.Shared={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t=MsPortalFx,i=t.Data.Metadata,r=t.isArrayOrObservableArray,u=t.isObject,e=t.isObservableArray,f=(function(){function t(n,t){var i=this,r=t,u=this._callbacks={};["visitEntityArray","visitNonEntityArray","visitArray","visitArrayItem","visitEntity","visitNonEntityObject","visitObject","shouldVisitObjectProperty","visitEntityTypedObjectPropertyValue","visitNonEntityTypedObjectPropertyValue","visitObjectPropertyValue","visitDate","visitScalar","visitFunction"].forEach((function(n){u[n]=r[n]||function(){return i[n].apply(i,arguments)}}))}return t.prototype.
visit=function(n,t,i){return this._visit(n,t,i)},t.prototype.visitEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},t.prototype.visitNonEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},t.prototype.visitArray=function(t,i,r){for(var e=this._callbacks.visitArrayItem,f=n.Shared.unwrapArrayOrObservableArray(t),u=0,o=f.length;u<o;u++)e(f[u],u,i,r);return},t.prototype.visitArrayItem=function(n,t,i,r){if(ko.isObservable(n))throw new Error("Data can't include arrays whose items are observables.  Only scalar- and object-typed array items are supported.");return this._visit(n,i,r)},t.prototype.visitEntity=function(n,t,i){return this._callbacks.visitObject(n,t,i)},t.prototype.visitNonEntityObject=function(n,t,i){return this._callbacks.visitObject(n,t,i)},t.prototype.visitObject=function(n,t,i){for(var u=this.getObjectPropertiesToVisit(n,t),r=0,f=u.length;r<f;r++)this.visitObjectPropertyValueDispatch(u[r],n,t,i);return},t.prototype.shouldVisitObjectProperty=
function(n,t){return typeof ko.unwrap(t[n])!="function"},t.prototype.visitEntityTypedObjectPropertyValue=function(t,i,u,f){var e=n.Shared.unwrapObjectPropertyValue(i,t),o=r(e)?this._callbacks.visitEntityArray:e?this._callbacks.visitEntity:undefined;return o&&o(e,u,f)},t.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},t.prototype.visitObjectPropertyValue=function(t,i,r,u){return this._visit(n.Shared.unwrapObjectPropertyValue(i,t),r,u)},t.prototype.visitDate=function(){return},t.prototype.visitScalar=function(){return},t.prototype.visitFunction=function(){return},t.prototype.getObjectPropertiesToVisit=function(n,t){var i=this._callbacks.shouldVisitObjectProperty;return Object.keys(n).filter((function(r){return i(r,n,t)}))},t.prototype.visitObjectPropertyValueDispatch=function(n,t,r,u){var f=i.getPropertyTypeMetadata(r,n),o=i.typeIsEntityType(f),e=this._callbacks,s=o?e.visitEntityTypedObjectPropertyValue:e.visitNonEntityTypedObjectPropertyValue;
return s.call(null,n,t,f,u)},t.prototype._visit=function(n,t,i){var e=r(n)?this._visitArrayDispatch:u(n)?this._visitObjectDispatch:null,f,o;return e?e.call(this,n,t,i):(f=this._callbacks,o=n instanceof Date?f.visitDate:typeof n=="function"?f.visitFunction:f.visitScalar,o.call(null,n,i))},t.prototype._visitArrayDispatch=function(n,t,r){var f=i.typeIsEntityType(t),u=this._callbacks,e=f?u.visitEntityArray:u.visitNonEntityArray;return e.call(null,n,t,r)},t.prototype._visitObjectDispatch=function(n,t,r){var f=i.typeIsEntityType(t),u=this._callbacks,e=f?u.visitEntity:u.visitNonEntityObject;return e.call(null,n,t,r)},t})();n.Visitor=f})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var i=MsPortalFx,r=i.isObservableArray,t=ko.observable,u=ko.observableArray,f=(function(i){function f(n,t){i.call(this,n,t)}return __extends(f,i),f.prototype.clone=function(n,t){return this._visit(n,t)},f.prototype.visitArray=function(i,f){var o=this,e=n.Shared.unwrapArrayOrObservableArray(
i).map((function(n,t){return o._callbacks.visitArrayItem(n,t,f)}));return r(i)&&(e=i.splice?u(e):t(e)),e},f.prototype.visitObject=function(n,t){var r=this,i={};return this.getObjectPropertiesToVisit(n,t).forEach((function(u){i[u]=r.visitObjectPropertyValueDispatch(u,n,t)})),i},f.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i){return this._callbacks.visitObjectPropertyValue(n,t,i)},f.prototype.visitObjectPropertyValue=function(i,r,u){var f=r[i],e=n.Shared.isObservableObjectPropertyValue(r,i),o=this._visit(e?f():f,u);return e?t(o):o},f.prototype.visitDate=function(n){return new Date(n.getTime())},f.prototype.visitScalar=function(n){return n},f.prototype.visitFunction=function(){throw new Error("Cloning functions is not supported.");},f})(n.Visitor);n.CloneVisitor=f})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var i=MsPortalFx,f=i.Data.Metadata,e=ko.isObservable,a=i.areEqual,o=i.isArrayOrObservableArray,s=i.isObject,h=i.isObservableArray,
c=ko.utils,l=c.compareArrays,r="",v={cannotMerge:r,handleAddAndDeleteRequired:r,dataNotTypeCompatible:r,missingId:r},u=n.getErrorMap(v),y=(function(n){function r(t,i){n.call(this,t,i);this._clone=t.clone;this._onDetach=t.onDetach}return __extends(r,n),r.prototype.merge=function(t,i,r){var f=n.prototype._visit.call(this,t,r,i);f||u.cannotMerge()},r.prototype.visitObject=function(n,t,i){var r=this;return this.getObjectPropertiesToVisit(n,t).every((function(u){return r.visitObjectPropertyValueDispatch(u,n,t,i)}))},r.prototype.visitObjectPropertyValueDispatch=function(t,i,r,u){var f=n.prototype.visitObjectPropertyValueDispatch.call(this,t,i,r,u);return f||(f=this._cloneAndSetProperty(t,i,r,u)),f},r.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},r.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},r.prototype.visitObjectPropertyValue=function(n,i,
r,u){var f=t.Shared.unwrapObjectPropertyValue(i,n),e=t.Shared.unwrapObjectPropertyValue(u,n),h=!1;return o(f)?o(e)&&(h=this._visitArrayDispatch(f,r,e)):s(f)?s(e)&&(h=this._visitObjectDispatch(f,r,e)):typeof f=="function"?h=!0:a(f,e)&&(h=!0),h},r.prototype.visitArray=function(n,t,i){return this._mergeArray(n,t,i)},r.prototype._mergeArray=function(n,r,o,s){var h=this,a,v,b,tt;s=s||{};!!s.handleAdd!=!!s.handleDelete&&u.handleAddAndDeleteRequired();s.getEdits||(a=void 0,v=void 0,f.typeHasId(r)?(a=function(n,t){var u=n.map((function(n){return h._getItemId(n,r)})),f=t.map((function(n){return h._getItemId(n,r)})),i=l(f,u);return i.forEach((function(i){i.value=(i.status==="added"?n:t).first((function(n){return h._getItemId(n,r)===i.value}))})),i},v=function(n,t){var i=h._getItemId(n,r);return t.first((function(n){return h._getItemId(n,r)===i}))}):(a=function(n,t){return l(t,n)},v=null),i.extend(s,{getEdits:a,getSourceItem:v}));var d=t.Shared.unwrapArrayOrObservableArray(n),it=t.Shared.unwrapArrayOrObservableArray(
o),y=e(o),k=y&&o,p=k&&k(),w,rt=function(n){var t,i,u;switch(n.status){case"added":if(t=h._clone(n.value,r),s.handleAdd)s.handleAdd(t,n.index);else if(y)w=!0,p.splice(n.index,0,t);else return!1;break;case"deleted":if(i=n.value,u=n.index,s.handleDelete)s.handleDelete(i,u);else if(y)h._onDetach(i,r),w=!0,p.splice(u,1);else return!1;break;case"retained":if(s.getSourceItem){var f=n.value,e=s.getSourceItem(f,d),o=h._callbacks.visitObject(e,r,f);if(!o)if(y)h._onDetach(f,r),w=!0,p.splice(n.index,1,h._clone(e,r));else return!1}}return!0},g=c.adjustArrayEdits(s.getEdits(d,it)),nt=!0;for(b=0;b<g.length;b++)if(tt=g[b],!rt(tt)){nt=!1;break}return w&&k(p),nt},r.prototype._cloneAndSetProperty=function(n,i,r,o){var s=o[n],v=t.Shared.unwrapObjectPropertyValue(i,n),c=t.Shared.unwrapObjectPropertyValue(o,n),l,a,y;return e(s)&&h(v)!==h(c)&&u.dataNotTypeCompatible(),e(s)?(l=!0,c&&this._onDetach(c,a),a=f.getPropertyTypeMetadata(r,n),y=this._clone(v,a),s(y)):l=!1,l},r.prototype._getItemId=function(n,t){var i=
f.getItemId(n,t);return i===undefined&&u.missingId(),i},r})(t.Visitor);t.MergeVisitor=y})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.computed,r=(function(n){function r(r,u,f){var e=this;n.call(this,f);this._currentSkipTakeParams=i(null);this._allItems=u;this._itemsComputed=t((function(){var n=e._currentSkipTakeParams();return n&&e._allItems()?e._allItems().slice(n.skip,n.take?n.skip+n.take:undefined):[]}));this._metadataComputed=t((function(){return{totalItemCount:e._allItems().length}}));this.items=this._itemsComputed;this.metadata=this._metadataComputed;r.registerForDispose(this._itemsComputed);r.registerForDispose(this._metadataComputed)}return __extends(r,n),r.prototype.loadBySkipTake=function(n,t){return this._currentSkipTakeParams({skip:n||0,take:t}),Q(!0)},r})(n.DataNavigatorBase);n.LocalDataNavigator=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=(function(
t){function i(n,i,r,u,f){if(t.call(this,f),this._continuationTokenFilter=null,this._continuationTokenSort=[],this._continuationTokenResetRequested=!0,this._queryParams=null,!n)throw new Error("Argument cannot be null: lifetime");this.items=i;this.metadata=r;this._options=u;this._options.loadBySkipTake||(this.loadBySkipTake=null);this._options.loadByContinuationToken||(this.loadByContinuationToken=null)}return __extends(i,t),i.prototype.loadBySkipTake=function(n,t,i,r){if(!this._options.loadBySkipTake)throw new Error("This data navigator does not support skip/take.");return this._options.loadBySkipTake(this.metadata(),this._getClonedQuery(),n,t,i,r)},i.prototype.loadByContinuationToken=function(){if(!this._options.loadByContinuationToken)throw new Error("This data navigator does not support continuation tokens.");var n=this._continuationTokenResetRequested;return this._continuationTokenResetRequested=!1,this._options.loadByContinuationToken(this.metadata(),this._getClonedQuery(),n,this.
_continuationTokenFilter,this._continuationTokenSort)},i.prototype.resetLoadByContinuationToken=function(n,t){this._continuationTokenResetRequested=!0;this._continuationTokenFilter=n;this._continuationTokenSort=t},i.prototype.setQuery=function(n){return this._queryParams=n,this.resetNavigation()},i.prototype._getClonedQuery=function(){return n.clone(this._queryParams,!0)},i})(t.DataNavigatorBase);t.RemoteDataNavigator=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){"use strict";function r(i,u,f){Array.isArray(i)?i.forEach((function(n){r(n,u,f)})):n.isObject(i)&&Object.getOwnPropertyNames(i).forEach((function(n){var e=t.Metadata.getPropertyMetadata(u,n),o=e&&e.itemType;f(i,n,e)&&o&&r(i[n],o,f)}))}function u(n){return n.substr(0,6)==="/Date("?new Date(parseInt(n.substr(6),10)):new Date(n)}i.DataContractJsonSerializer={processResult:function(n,t,i,f,e){return e&&r(t.data,e,(function(n,t,i){var f=!0,r;return i&&(i.isDate||i.itemType==="System.DateTime")
&&(r=n[t],typeof r=="string"&&(n[t]=u(r)),f=!1),f})),!0}}})(i=t.DataProvider||(t.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){var r=n.property,u=n.operator,t=n.value,i;typeof t=="string"?t="'"+t+"'":t&&t instanceof Date&&(t="datetime'"+t.toISOString()+"'");switch(u){case"<":i=r+" lt "+t;break;case"<=":i=r+" le "+t;break;case"==":i=r+" eq "+t;break;case"!=":i=r+" ne "+t;break;case">=":i=r+" ge "+t;break;case">":i=r+" gt "+t;break;case"StartsWith":i="startswith("+r+","+t+") eq true";break;case"EndsWith":i="endswith("+r+","+t+") eq true";break;case"Contains":i="substringof("+t+","+r+") eq true";break;default:throw new Error("The operator '"+u+"' is not supported.");}return i}function i(n){return!n.descending?n.property:n.property+" desc"}n.OData={shapeQuery:function(n){var u={},e=n.filter,f,r;return e&&e.length&&(u.$filter=e.map(t).join(" and ")),f=n.sort,f&&f.length&&(u.$orderby=f.map(
i).join()),r=n.paging,r&&r.skip&&(u.$skip=r.skip),r&&r.take&&(u.$top=r.take),n.includeTotalCount&&(u.$inlinecount="allpages"),u}}})(t=n.DataProvider||(n.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function ht(n,t){k.data(n,g,t)}function y(n){return u(n)||c(n)?k.data(n,g):null}function ct(n){delete k.data(n,g)}function a(n){var t=i(n);return u(t)?n:t}function nt(n,t){var r=i(n[t]);return u(r)?n[t]:r}function kt(){return Date.now()}function dt(n,t){return n===t}function tt(n,i,r){var u=y(n);return u?r===1&&u.editKind===t.EditKind.Add?!1:!i||u.unlockedAt&&i>=u.unlockedAt:!0}function it(n,t){return t&&t.indexOf?t.indexOf(n):-1}function lt(n,t,r,u){l(t)&&p(n,u,(function(){t.valueWillMutate()}));var f=i(t);f.splice.apply(f,[0,f.length].concat(r));l(t)&&p(n,u,(function(){t.valueHasMutated()}))}function gt(n,t,i){for(var u,c=n.length,s,f,h,e,r=i-1;r>=0;r--)if(u=it(n[r],t),u>=0){s=u+1;f=i-r;break}for(r=i+1;r<c;r++)if(u=it(n[r],
t),u>=0){h=u;e=r-i;break}return o(f)&&o(e)?t.length:(f||1e5)<(e||1e5)?s:h}function ni(n,t,i,u){for(var h={},c=[],s,e,f=0,l=t.length;f<l;f++)s=t[f],e=r.getItemId(s,i),o(e)?b(n,u):(h[e]=s,c.push(e));return{index:h,ids:c}}function rt(n,t,r){var f=i(n),e,o,h,s;if(!et(f)){if(e=!1,r++,u(f)){for(o=0,h=f.length;o<h;o++)if(e=t(nt(f,o)),e||rt(nt(f,o),t,r),e)break}else if(c(f)&&(r===1&&(e=t(f)),!e))for(s in f)if(!s.match(/^jQuery\d+$/)&&(e=rt(nt(f,s),t,r),e))break;return e}}function ut(n,t,r,f,e,o){var s=!0,h=i(r);return u(h)?at(n,t,r,f,e,o):c(h)?v(n,t,r,f,e,o):s=!1,s}function at(n,t,i,u,f,e){var o=r.getArrayItemType(i)||u,s=r.typeHasId(o);f.preserveNewItemsOrdering?ii(n,t,i,o,s,f,e):ri(n,t,i,o,s,f,e)}function ii(n,t,u,f,e,s,h){for(var d=i(u),st=d.length,p,g,l=i(t),c,it=l.length,k,ft,ht=e&&l.map((function(t){var u=r.getItemId(i(t),f);return o(u)&&b(n,s),u})),ct=s.preventItemRemoval,at=s.fetchStart,rt,et,ut=[],nt,ot=l.slice(0),y=0;y<st;y++){if(p=d[y],g=undefined,rt=!1,e&&it>0)for(g=r.getItemId(i(p),
f),o(g)&&b(n,s),c=0;c<it;c++)k=l[c],ft=ht[c],dt(g,ft)&&(v(n,k,p,f,s,h),l.splice(c,1,p),ot[c]=null,rt=!0);rt||!ct&&tt(a(p),at,1)||ut.push(y)}for(c=0;c<it;c++)k=ot[c],k&&(l[c]=w(n,k,f,s,h));for(et=ut.length,nt=0;nt<et;nt++)y=ut[nt],p=d[y],c=gt(d,l,y),l.splice(c,0,p);lt(n,u,l,s)}function ri(n,t,u,f,e,s,h){for(var nt=i(u),p=nt.slice(0),k,d,g=i(t),y,c,ut=e&&ni(n,g,f,s),ft,st=s.preventItemRemoval,ht=s.fetchStart,it=[],et={},ot=0,rt=!1,l=nt.length-1;l>=0;l--)k=nt[l],c=null,e&&(d=r.getItemId(i(k),f),o(d)&&b(n,s),c=ut.index[d]),c?(v(n,c,k,f,s,h),et[d]=!0,ot++):!st&&tt(a(k),ht,1)&&(p.splice(l,1),rt=!0);if(ot!==g.length){for(y=0,ft=g.length;y<ft;y++)c=g[y],e&&et.hasOwnProperty(ut.ids[y])||it.push(w(n,c,f,s,h));it.length>0&&(p.push.apply(p,it),rt=!0)}rt&&lt(n,u,p,s)}function v(n,t,f,e,o,h){var y,w,b,l,d,k;if(tt(a(f),o.fetchStart,0)){ct(a(f));w=i(f);for(y in t)if(t.hasOwnProperty(y))if(b=i(w[y]),l=i(t[y]),d=r.getPropertyType(e,y),k=vt(n,y),l===null)b!==null&&p(k,o,(function(){w[y](null)}));else if(u(
l))u(b)?at(k,l,w[y],d||null,o,h):s(k,w,y,l,d,o,h);else if(c(l))et(b)?s(k,w,y,l,d,o,h):b instanceof Date?(b>l||b<l)&&s(k,w,y,l,d,o,h):v(k,l,b,d||null,o,h);else if(typeof l=="function")continue;else s(k,w,y,l,d,o,h)}}function s(n,t,r,u,f,e,o){var s=w(n,u,f,e,o),h;t[r]&&l(t[r])?p(n,e,(function(){t[r](i(s))})):(h=l(s)?s:d(s),t[r]=h)}function p(n,t,i){try{i()}catch(r){e.mergeSubscriberRaisedException(t.dataSetName,n,FxImpl.Diagnostics.getLogFriendlyMessage(r))}}function w(n,t,i,u,f){var e=ft(n,t,i,u,f);return r.decorateWithType(e,i),e}function ft(n,t,r,f,e){return u(i(t))?ot(i(t).map((function(t){return ft(n,t,r,f,e)}))):c(t)?ui(n,t,r,f,e):t}function ui(n,t,i,u,f){var e,a=f&&f.lifetime&&f._atomizationContext&&FxImpl.Data.AtomizationContext.canAtomizeType(i),c,s,o,h;if(a&&(c=r.getItemId(t,i),s=f._atomizationContext.getEntity(i,c,f.lifetime),s&&(v(n,t,s,i,u,f),e=s)),!e){e={};for(o in t)t.hasOwnProperty(o)&&(h=ft(vt(n,o),t[o],r.getPropertyType(i,o),u,f),e[o]=l(h)?h:d(h));a&&f._atomizationContext.addEntity(
i,c,e,f.lifetime)}return e}function vt(n,t){return n&&n+"/"+t}function b(n,t){e.missingId(t.dataSetName,n)}var yt=FxImpl.Data,pt=yt.AtomizationContext,h=n,r=h.Data.Metadata,k=h.Base.ProxiedObservables,o=h.isUndefined,c=h.isObject,et=h.isNullOrUndefined,d=ko.observable,ot=ko.observableArray,i=ko.unwrap,l=ko.isObservable,wt=window,fi=new n.Base.Diagnostics.Log("MsPortalFx/Data/Data.DataSet"),u=Array.isArray,ei=wt.fx.environment.isDevelopmentMode,g="aux-lockState",st=".",f="",bt={missingId:f,incorrectOptions:f,invalidEditKind:f,multipleIds:f,invalidMergeTarget:f,addToNonArray:f,removeFromNonArray:f,noObservableToReceiveMergeChange:f,mergeSubscriberRaisedException:f},e=FxImpl.getErrorMap(bt),ti=(function(){function f(t,i,r){this._data=null;this._navigationMetadata=d(null);this._partialErrors=ot();n.Base.ProxiedObservables.markNonSerializable(this);this._type=t||null;r&&!i&&e.incorrectOptions();this._lifetime=i;this._atomizationContext=r&&pt.get(r.atomizationContextId)}return Object.defineProperty(
f.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"navigationMetadata",{get:function(){return this._navigationMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),f.lockItem=function(n,i){t.EditKind[i]||e.invalidEditKind();ht(n,{editKind:i})},f.hasUnmergedClientChanges=function(n){return rt(n,(function(n){var t=y(n);return!!(t&&!!t.unlockedAt)}),0)},f.unlockItem=function(n,t){if(t=arguments.length===1?!0:t,t){var i=y(n);i&&(i.unlockedAt=kt())}else ct(n)},f.isLockedItem=function(n){var t=y(n);return!!(t&&!t.unlockedAt)},f.getIdPropertyNames=function(n){var t;return n instanceof f&&(n=n.data),
t=r.getArrayItemType(n),t&&r.getIdPropertyNames(t&&r.getTypeMetadata(t))},f.getIdPropertyName=function(n){var t=this.getIdPropertyNames(n),i=null;return t&&(t.length>1&&e.multipleIds(),i=t[0]||null),i},f.mergeWithoutAtomization=function(n,t,i){i=i||{};var u=i.type||r.getArrayItemType(t);ut(null,n,t,u,i,null)||e.invalidMergeTarget()},f.prototype.addItems=function(n,f,s,h,c){var y=this,l,v;s=s||{};c?l=s.type||r.getArrayItemType(c):(c=this.data,l=this.type);u(i(c))||e.addToNonArray();h=o(h)?!0:h;v=f.map((function(n){var i=w(null,n,l,s,y);return h&&ht(a(i),{editKind:t.EditKind.Add}),i}));c.splice.apply(c,[n,0].concat(v))},f.prototype.removeItems=function(n,t,f,o){o?f=f||r.getArrayItemType(o):(o=this.data,f=this.type);u(i(o))||e.removeFromNonArray();var s=o.splice(n,t);this._atomizationContext&&this._atomizationContext.releaseEntities(f,s,this.lifetime)},f.prototype.removeItem=function(n,t,r){r||(r=this.data);var u=it(n,i(r));u>=0&&this.removeItems(u,1,t,r)},f.prototype.setProperty=function(n,
t,i,r){i=i||{};var u;r?u=i.type:(r=this.data,u=this.type);ut(null,t,r[n],u,i,this)||s(null,r,n,t,u,i,this)},f.prototype.merge=function(n,t){t=t||{};ut(st,n,this.data,this.type,t,this)||s(st,this,"_data",n,this.type,t,this)},f.prototype.hasUnmergedClientChanges=function(){return f.hasUnmergedClientChanges(this.data)},f=__decorate([n.Composition.ProxyCompatibilityMode],f)})();t.DataSet=ti})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t,i,r;(function(n){n[n.Copy=0]="Copy";n[n.InPlace=1]="InPlace"})(n.EditScopeKind||(n.EditScopeKind={}));t=n.EditScopeKind,(function(n){n[n.None=0]="None";n[n.Created=1]="Created";n[n.Deleted=2]="Deleted";n[n.Updated=3]="Updated"})(n.EditState||(n.EditState={}));i=n.EditState,(function(n){n[n.AcceptClientChanges=0]="AcceptClientChanges";n[n.DiscardClientChanges=1]="DiscardClientChanges";n[n.RefreshFromServerImplicitly=2]="RefreshFromServerImplicitly";n[n.ServerChangesAppliedManually=3]="ServerChangesAppliedManually";
n[n.ServerDataReturned=4]="ServerDataReturned"})(n.AcceptEditScopeChangesAction||(n.AcceptEditScopeChangesAction={}));r=n.AcceptEditScopeChangesAction})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function pi(n,t){var i=t&&t.kind;return i===oi.InPlace?new ki(n,t):new bi(n,t)}function wi(n){var t=fi(n),r,u;t.length?(r=t.map((function(n){var t={state:i[n.state]},r=n.entityReference;return r&&r.type&&(t.entityType=r.type,t.entityId=r.id),n.entityPath&&(t.pathFromRoot=n.entityPath),n.encodedCreatedEntities&&(t.createdEntities=n.encodedCreatedEntities),n.entityUpdates&&(t.updates=n.entityUpdates),t})),u=JSON.stringify(ko.toJS(r),(function(n,t){return n&&wt(t)?"<undefined>":t}),4),console.debug(u)):console.debug("No edits")}function gt(){r.accessorLifetime()}function f(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),e.extend({shouldVisitObjectProperty:function(t,r,u){return ui(t,u)&&n().shouldVisitObjectProperty(t,r,u)&&(!i||!ut(k(u,t)))}},
t)}function vt(n){typeof n!="object"&&r.makeObs();ai(n,(function(t,i){if(rt(i))vt(i),n[t]=ht(i);else{var r=typeof i;r==="object"?vt(i):r!=="function"&&(n[t]=o(i))}}))}function ii(t){var i=n.toSerializableObject(t);return JSON.stringify(i)}function ri(t,i,r){if(r===0)return nr(t,i);var u=JSON.parse(t);return n.fromSerializableObject(u)}function nr(n,t){var i=JSON.parse(n);return t||vt(i),i}function yt(n,t){var i=nt(n.type)&&nt(t.type)&&nt(n.id)&&nt(t.id),r=n.type===t.type&&n.id===t.id;return i||r}function et(n){var t=0,r,i;if(n.length===0)return t+"";for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r|0;return t+""}function ui(n,t){return!(t&&t.properties&&t.properties[n]&&t.properties[n].trackEdits===!1)}function fi(n,t){t===void 0&&(t=!0);var r=n.version||0;return n.edits.map((function(n){var u={state:n.state,entityReference:n.entityReference};switch(n.state){case i.Created:u.entityPath=n.entityPath;u.encodedCreatedEntities=n.createdEntities.map((function(n){return ri(n,t,r)}));break;case
i.Updated:u.entityUpdates=ri(n.entityUpdates,t,r)}return u}))}function ei(n){return ut(n)?!0:n?c.getProperties(n).some((function(t){return ei(k(n,t))})):!1}var e=MsPortalFx,c=e.Data.Metadata,i=e.Data.EditState,ot=n.Data.Shared,w=e.Data.AcceptEditScopeChangesAction,l=n.Data.Visitor,g=n.Data.CloneVisitor,st=n.Data.MergeVisitor,oi=e.Data.EditScopeKind,h=e.isArrayOrObservableArray,pt=e.areEqual,wt=e.isUndefined,nt=e.isNullOrUndefined,s=e.isObject,o=ko.observable,ht=ko.observableArray,v=ko.isObservable,tt=ko.unwrap,it=ko.computed,bt=MsPortalFx.getUniqueId,kt=e.Data.DataSet,y=e.Base.ProxiedObservables,p=ot.unwrapArrayOrObservableArray,b=ot.unwrapObjectPropertyValue,si=ot.isObservableObjectPropertyValue,rt=Array.isArray,ut=c.typeIsEntityType,k=c.getPropertyTypeMetadata,ct=new e.Base.Diagnostics.Log("MsPortalFx/Data/Data.EditScope"),a=undefined,hi="aux-entityState",ci="aux-entityArrayState",li=window,d=li.fx.environment.isDevelopmentMode,dt="Turn on development mode to generate diagnostic information for this error.",
ai=e.forEachKey,vi=e.isEmpty,u="",yi={accessorLifetime:u,scopeInputType:u,scopeOptsTypes:u,missingMeta:u,noRefresh:u,noSave:u,entityDupe:u,saveInProg:u,nullMerge:u,resetInProg:u,noEntityRoot:u,resetType:u,newInputObs:u,newEditObs:u,diffEditInput:u,missingIdProp:u,targetArrObs:u,editsUnavail:u,mergeUnavail:u,noImpl:u,serialize:u,namedMeta:u,disposed:u,nestedEntities:u,makeObs:u,entityEdit:u,resetObs:u,moveEditState:u},r=n.getErrorMap(yi),ft,lt;t.allowNonPersistentEdits=!1;t.createEditScope=pi;t.logEditsToConsole=wi;t.nonPersistedPropertySentinel="EDITSCOPENOTPERSISTED";ft={entityType:!0};lt={registerForDispose:gt,createChildLifetime:gt};var ni=(function(){function u(n,t,i){var u=this,l,a,f;this._isDisposed=!1;this._initializing=o(!0);this._saving=o(!1);this._refreshing=o(!1);this._refreshInProgressCount=0;this._resettingValue=o(!1);this._dirty=o(!1);this._edits=o([]);this.editsChanged=o();y.markNonSerializable(this);this._createEditableAndOriginalData=i;l=h(n)&&tt(n);a=l&&(l.length===0||
s(l[0]));a||s(n)||r.scopeInputType();t=t||{};f=t.typeMetadata;f?t.typeName&&r.scopeOptsTypes():t.typeName&&(f=c.getTypeMetadata(t.typeName),f||r.missingMeta(t.typeName));this._hasMetadata=!!f;f?f.entityType||(f=e.extend2(f,{entityType:!0})):f=ft;this._inconsistent=ko.pureComputed((function(){return u._initializing()||u._refreshing()||u._saving()||u._resettingValue()}));this._getEditsVisitor=this._createGetEditsVisitor(!1);this._getPersistableEditsVisitor=this._createGetEditsVisitor(!0);this._applyEditsVisitor=this._createApplyPersistedEditsVisitor();this._revertAllVisitor=this._createRevertAllVisitor();this._generateValueBasedEntityIdVisitor=this._createGenerateValueBasedEntityIdVisitor();this._mergeToEditableVisitor=this._createMergeToEditableVisitor();this._getEditsReactor=it((function(){u._inconsistent()?u._edits(null):(u._edits(u._getEdits(!1)),u.editsChanged.valueHasMutated())}));this._entityStateKey=hi+bt();this._entityArrayStateKey=ci+bt();this._rootTypeMetadata=f;this._root=this._createEditableAndOriginalData(
n,this._rootTypeMetadata).editable;this._refreshCallback=t.refresh||function(){return r.noRefresh(),null};this._saveCallback=t.save||function(){return r.noSave(),null};this._dirtyReactor=it((function(){u._inconsistent()||u._dirty(u._edits().length>0)}));this._initializing(!1)}return u.prototype.dispose=function(){this._isDisposed||(this._isDisposed=!0,this._deregisterNestedEntities(this._root,this._rootTypeMetadata,!1),this._getEditsReactor.dispose(),this._dirtyReactor.dispose())},Object.defineProperty(u.prototype,"root",{get:function(){return this._assertNotDisposed(),this._root},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"refreshing",{get:function(){return this._refreshing},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"saving",{get:function(){return this._saving},enumerable:!0,configurable:!0}),u.prototype.markForDelete=function(n){this.
_assertNotDisposed();var r=this._getEntityState(n,!1),t=r.readOnlyEditState();t!==i.None&&this._revertEntity(n,r,t);t!==i.Created&&this._markAsDeletedOrUpdated(n,i.Deleted)},u.prototype.create=function(n){this._assertNotDisposed();var t=this._getEntityArrayType(n,!1);return c.createEmptyObject(t)},u.prototype.addCreated=function(n,t){var i,u;this._assertNotDisposed();i=this._getEntityState(n,!1,!1);i&&r.entityDupe();u=this._getCreatedEntities(t,!1);this._addEntityStateToCreatedEntity(n,t);u.push(n)},u.prototype.revert=function(n){this._assertNotDisposed();var t=this._getEntityState(n,!1),r=t.readOnlyEditState();this._revertEntity(n,t,r);t.writableEditState(i.None)},u.prototype.revertAll=function(){this._assertNotDisposed();this._revertAll()},u.prototype.getEditState=function(n){return this._assertNotDisposed(),this._getEditState(n,!1)},u.prototype.getOriginal=function(n){return this._assertNotDisposed(),h(n)?this._getEntityArrayState(n,!1).original:this._getEntityState(n,!1).original},
u.prototype.getCreated=function(n){return this._assertNotDisposed(),this._getCreatedEntities(n,!1)},u.prototype.mergeFromOriginal=function(){this._assertNotDisposed();this._mergeFromOriginal()},u.prototype.refresh=function(){var n=this;this._assertNotDisposed();this._refreshInProgressCount++;this._refreshing(!0);var r=this._refreshCallback(this._getRefreshableData())||Q(a),t=Q.defer(),i=function(){--n._refreshInProgressCount<=0&&(n._refreshInProgressCount=0,n._refreshing(!1))};return r.then((function(r){n._onRefreshComplete(r);n._isDisposed||(i(),t.resolve())})).catch((function(n){i();t.reject(n)})),t.promise},u.prototype.save=function(){this.mergeFromOriginal();this.revertAll()},u.prototype.saveChanges=function(){var n=this,t;if(this._assertNotDisposed(),this._inconsistent()&&r.saveInProg(),t=this._edits(),t.length===0)return Q();this._saving(!0);var e=MsPortalFx.mapMany(t,(function(n){switch(n.state){case i.Created:return n.createdEntities.map((function(t){return{editState:i.Created,entityTypeName:
n.typeMetadata.name,entity:t}}));case i.Updated:case i.Deleted:return[{editState:n.state,entityTypeName:n.typeMetadata.name,entity:n.updatedOrDeletedEntity}]}return[]})),o=this._saveCallback(this,e,this._getRefreshableData())||Q(a),u=Q.defer(),f=function(){n._revertAll();n._isDisposed||(n._saving(!1),u.resolve())};return o.then((function(t){var u=t&&t.action||w.AcceptClientChanges,i;switch(u){case w.AcceptClientChanges:n._acceptChanges();break;case w.RefreshFromServerImplicitly:return n.refresh().then((function(){f()}));case w.ServerChangesAppliedManually:n._onRefreshComplete(null);break;case w.ServerDataReturned:i=t.dataToMerge;i||r.nullMerge();n._onRefreshComplete(i)}f()})).catch((function(t){n._isDisposed||(n._saving(!1),u.reject(t))})),u.promise},u.prototype.resetValue=function(n,t){var y=this,e,p,o,i,w,c,a,h,u;this._assertNotDisposed();this._inconsistent.peek()&&r.resetInProg();e=function(n){var t="";n&&n.stack&&(t+="  Inner exception: "+n.stack);r.resetObs(t)};p=n;p.returnsObservablesFromEditScope||
e();try{o=n.getOriginalObservable(lt);i=n.getEditableObservable(lt)}catch(b){e(b)}(!o||!i||ko.isComputed(o)||ko.isComputed(i))&&e();w=function(n){var e=n,i,u,t=new l(null,f((function(){return t}),{visitObject:function(n,r){t.getObjectPropertiesToVisit(n,r).forEach((function(f){n[f]===e?(u=!0,i=k(r,f)):t.visitObjectPropertyValueDispatch(f,n,r)}))}}));return t.visit(y._root,y._rootTypeMetadata),u||r.noEntityRoot(),i};this._resettingValue(!0);try{c=w(i);ei(c)&&r.resetType();a=t.newInputValue;v(a)&&r.newInputObs();h=this._createEditableAndOriginalData(a,c);i(h.editable);o(h.original);t.hasOwnProperty("newEditableValue")&&(u=t.newEditableValue,v(u)&&r.newEditObs(),(rt(u)||s(u))&&u===h.original&&r.diffEditInput(),i(t.newEditableValue))}finally{this._resettingValue(!1)}},u.prototype.getEntityArrayWithEdits=function(n){var t=this,u=this._getCreatedEntities(n,!1)(),r=tt(n),f=r.filter((function(n){return t.getEditState(n)()!==i.Deleted})).concat(u),e=r.filter((function(n){return t.getEditState(n)()===i.
Updated})),o=r.filter((function(n){return t.getEditState(n)()===i.Deleted}));return{arrayWithEdits:f,createdEntities:u,updatedEntities:e,deletedEntities:o}},u.prototype.applyArrayAsEdits=function(n,t){var u=this,s=this._getEntityArrayState(t,!1,!1),i,o,l;if(s){i=t;o=s.typeMetadata;(!rt(o.idProperties)||o.idProperties.length<1)&&r.missingIdProp();var a=[],h=[],w=this._getCreatedEntities(t,!0)().slice(0);n.forEach((function(n){var t=c.getItemId(n,o);wt(t)?h.push(n):a.push(n)}));var y=function(n){v(i)?u.addCreated(n,i):u.addCreated(n,i)},b=e.extend({handleAdd:function(n){y(n)},handleDelete:function(n){u.markForDelete(n)}},this._createMergeEntityOnlyVisitorOptions()),p=new gi(b,f((function(){return p})));p.applyEntityArrayAsEdits(a,i,s.typeMetadata);h.length&&h.forEach((function(n){y(n)}));w.forEach((function(n){u.revert(n)}))}else v(t)||r.targetArrObs(),l=new g(null,f((function(){return l}))),t(l.clone(n,null))},u.prototype.getEdits=function(){this._inconsistent()&&r.editsUnavail();var n=this._getEdits(
!0).map((function(n){var t={state:n.state,entityReference:n.entityReference};switch(t.state){case i.Created:t.entityPath=n.entityPath;t.createdEntities=n.encodedCreatedEntities.map((function(n){return ii(n)}));break;case i.Updated:t.entityUpdates=ii(n.entityUpdates)}return t}));return{edits:n,version:1}},u.prototype.applyEdits=function(n){this._assertNotDisposed();var t=fi(n,this._hasMetadata);return this._applyEdits(t,this._applyEditsVisitor,!1),!0},Object.defineProperty(u.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),u.prototype._mergeFromOriginal=function(){r.mergeUnavail()},u.prototype._getRefreshableData=function(){return r.noImpl(),null},u.prototype._onRefreshComplete=function(){r.noImpl()},u.prototype._addEntityStateToEditableEntity=function(n,t,u){var f=this,e=this._addEntityState(n);e.original=t;e.typeMetadata=u;e.entityUpdateReactor=it((function(){if(!f._inconsistent()){var u=f._getEntityState(n,!0),t=u.readOnlyEditState.peek(),e=f.
_edits().some((function(t){return t.state===i.Updated&&t.updatedOrDeletedEntity===n}));e?t===i.None?f._markAsDeletedOrUpdated(n,i.Updated):t!==i.Updated&&r.moveEditState(i[t],i[i.Updated]):t===i.Updated&&u.writableEditState(i.None)}}))},u.prototype._addEntityStateToCreatedEntity=function(n,t){var r=this._addEntityState(n);r.containingArray=t;r.writableEditState(i.Created)},u.prototype._addEntityState=function(n){var t=o(i.None),r={writableEditState:t,readOnlyEditState:it((function(){return t()}))};return y.data(n,this._entityStateKey,r),r},u.prototype._getEntityState=function(n,t,i){var u,f,r;if(i===void 0&&(i=!0),u=n&&y.data(n,this._entityStateKey),!u&&i){f=!h(n)&&s(n);r="";r=t?"Entity-typed object is not known to this edit scope.  Such entity-typed objects can only be added via 'editScope.addCreated', 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such objects cannot be added due to the addition of some object/array that nests this object.":f?this._rootTypeMetadata===
ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":d?"":"Object passed as the 'entity' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entity' parameter must be an object.";d&&(r=this._addMetadataHelperMessage(r,n));d||(r=r+"  "+dt);throw new Error(r);}return u},u.prototype._deregisterNestedEntities=function(n,t,r){var e=this,u;r===void 0&&(r=!0);u=new at({getCreatedEntities:function(n){return e._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,t,i){u.visitEntityArray(n,t,i);e._disposeEntityArrayState(n)},visitEntity:function(n,t,r){if(u.visitEntity(n,t,r),r){var f=e._getEditState(n,!0)();f!==i.None&&ct.error("Edited entities are being disconnected from the EditScope, losing user-authored edits.")}
e._disposeEntityState(n)}}));u.visit(n,t,r)},u.prototype._addEntityArrayState=function(n,t,i){var r={typeMetadata:i,original:t};y.data(n,this._entityArrayStateKey,r)},u.prototype._createVisitorCallbacks=function(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),f(n,t,i)},u.prototype._rootIsEntity=function(){return s(this._root)},u.prototype._rootAsEntity=function(n){return n===void 0&&(n=!0),s(this._root)?n?this._root:this._getOriginalEntity(this._root):null},u.prototype._rootAsArray=function(n){return n===void 0&&(n=!0),h(this._root)?n?this._root:this._getOriginalArray(this._root):null},u.prototype._getOriginalEntity=function(n){return this._getEntityState(n,!0).original},u.prototype._getOriginalArray=function(n){return this._getEntityArrayState(n,!0).original},u.prototype._revertEntity=function(n,t,r){switch(r){case i.Updated:this._mergeToEditableVisitor.mergeEntity(t.original,n,t.typeMetadata);break;case i.Created:var u=this._getCreatedEntities(t.containingArray,!0);u.splice(u().indexOf(
n),1)}},u.prototype._getEntityArrayState=function(n,t,i){var u,f,r;if(i===void 0&&(i=!0),u=y.data(n,this._entityArrayStateKey),!u&&i){f=h(n);r="";r=t?"Entity-typed array is not known to this EditScope.  Such entity-typed arrays can only be added via 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such arrays cannot be added due to the addition of some object/array that nests this array.":f?this._rootTypeMetadata===ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":d?"":"Array passed as the 'entityArray' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entityArray' parameter must be an array or an observable array.";d&&(r=this._addMetadataHelperMessage(r,n));d||
(r=r+"  "+dt);throw new Error(r);}return u},u.prototype._disposeEntityArrayState=function(n){y.data(n,this._entityArrayStateKey,a)},u.prototype._disposeEntityState=function(n){var t=this._getEntityState(n,!0);t.entityUpdateReactor&&(t.entityUpdateReactor.dispose(),t.entityUpdateReactor=null);y.data(n,this._entityStateKey,a)},u.prototype._markAsDeletedOrUpdated=function(n,t){var f=this._getEntityState(n,!0),u=f.readOnlyEditState.peek();u!==i.None&&u!==t&&r.entityEdit(i[u]);f.writableEditState(t)},u.prototype._getEntityArrayType=function(n,t){return this._getEntityArrayState(n,t).typeMetadata},u.prototype._getCreatedEntities=function(n,t){var r=this._getEntityArrayState(n,t),i=r.createdEntities;return i||(i=r.createdEntities=ht()),i},u.prototype._revertAll=function(){this._revertAllVisitor.visit(this._root,this._rootTypeMetadata)},u.prototype._createRevertAllVisitor=function(){var n=this,t=new at({getCreatedEntities:function(t){return n._getCreatedEntities(t,!0)}},f((function(){return t}),
{visitEntityArray:function(i,r){t.visitArray(i,r);for(var u=n._getCreatedEntities(i,!0);u().length>0;)n.revert(u()[0])},visitEntity:function(i,r){t.visitEntity(i,r);n.revert(i)}}));return t},u.prototype._getEdits=function(n){var t=[],i=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,!1):null,r=n?this._getPersistableEditsVisitor:this._getEditsVisitor;return r.visit(this._root,this._rootTypeMetadata,{edits:t,entityReference:i,entityPath:""}),t},u.prototype._createGetEditsVisitor=function(n){var t=this,u=new at({getCreatedEntities:function(n){return t._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,i){t._getEntityArrayState(n,!0);u.visitEntityArray(n,i)},visitEntity:function(n,i){t._getEntityState(n,!0);u.visitEntity(n,i)}})),o=this._createComputeEntityUpdatesVisitor(n),e=function(n,t,i){return o.visit(n,t,i)},r=new l(null,f((function(){return r}),{shouldVisitObjectProperty:function(n,i,u){return ui(n,u)&&r.shouldVisitObjectProperty(
n,i,u)&&t._objectPropertyNestsEntities(i,n,u)},visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(n,f,o){var s;if(r.visitArray(n,f,o),s=t._getCreatedEntities(n,!0),s().length){var h=o.edits,c=o.entityReference,l=o.entityPath;h.push({state:i.Created,entityReference:c,entityPath:l,encodedCreatedEntities:s().map((function(n){return e(n,f)})),typeMetadata:f,createdEntities:s()});s().forEach((function(n){u.visit(n,f)}))}},visitObject:function(n,i,u){var f=ut(i),e=u.edits,o=u.entityReference,s=u.entityPath;r.getObjectPropertiesToVisit(n,i).forEach((function(u){r.visitObjectPropertyValueDispatch(u,n,i,{edits:e,entityReference:f?t._createEntityReference(n,i,!1):o,entityPath:f?u:s+"."+u})}))},visitEntity:function(n,u,f){var o=f.edits,h=t._getEditState(n,!0)(),s=e(n,u,t._getOriginalEntity(n));vi(s)?h===i.Deleted&&o.push({state:i.Deleted,entityReference:t._createEntityReference(n,u,!1),typeMetadata:
u,updatedOrDeletedEntity:n}):o.push({state:i.Updated,entityReference:t._createEntityReference(n,u,!1),entityUpdates:s,typeMetadata:u,updatedOrDeletedEntity:n});r.visitEntity(n,u,f)}}));return r},u.prototype._createApplyPersistedEditsVisitor=function(){var n=this;return this._createApplyEditsVisitor(!1,{applyCreate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!0);n.addCreated(i,t)},applyUpdate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!1);n._applyEntityUpdates(t,i,r)},applyDelete:function(t,r){n._markAsDeletedOrUpdated(r,i.Deleted)}})},u.prototype._createApplyEditsVisitor=function(n,t){var u=this,r=new l(null,f((function(){return r}),{visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(f,e,o){var s,c,h,p;for(r.visitArray(f,e,o),s=o.edits,c=tt(f),h=c.length-1;h>=0;h--){var a=c[h],w=u._createEntityReference(a,e,n),v=s.firstIndex((function(n){return n.
state===i.Deleted&&yt(w,n.entityReference)}));v>=0&&(s.splice(v,1),t.applyDelete(f,a))}var y=o.entityReference,b=o.entityPath,l=s.firstIndex((function(n){if(n.state===i.Created)if(y){if(n.entityReference&&yt(y,n.entityReference)&&b===n.entityPath)return!0}else if(!n.entityReference)return!0}));l>=0&&(p=s[l],s.splice(l,1),p.encodedCreatedEntities.forEach((function(n){t.applyCreate(f,n,e)})))},visitObject:function(f,e,o){var s=o.edits,c=o.entityReference,v=o.entityPath,l=ut(e),h,a;l&&(c=u._createEntityReference(f,e,n));r.getObjectPropertiesToVisit(f,e).forEach((function(n){r.visitObjectPropertyValueDispatch(n,f,e,{edits:s,entityReference:c,entityPath:l?n:v+"."+n})}));l&&(h=s.firstIndex((function(n){return n.state===i.Updated&&yt(c,n.entityReference)})),h>=0&&(a=s[h],s.splice(h,1),t.applyUpdate(f,a.entityUpdates,e)))}}));return r},u.prototype._acceptChanges=function(){var n=this._getEdits(!1);this._applyEdits(n.slice(0),this._createAcceptChangesVisitor(!0),!0);this._applyEdits(n,this._createAcceptChangesVisitor(
!1),!1)},u.prototype._createAcceptChangesVisitor=function(n){var t=this;return this._createApplyEditsVisitor(n,{applyCreate:function(i,r,u){if(!n){var f=i,e=t._createEditableAndOriginalData(r,u).editable,o=function(n,t){if(n.push)n.push(t);else{var i=n,r=i().slice(0);r.push(t);i(r)}};o(f,e);o(t._getOriginalArray(f),t._getOriginalEntity(e))}},applyUpdate:function(i,r,u){n&&t._applyEntityUpdates(i,r,u)},applyDelete:function(n,t){var u=tt(n).indexOf(t),i,r;n.splice?n.splice(u,1):(i=n,r=i().slice(0),r.splice(u,1),i(r))}})},u.prototype._applyEntityUpdates=function(n,t,i){this._mergeToEditableVisitor.mergeEntity(t,n,i)},u.prototype._removeNonPersistedPropertySentinels=function(n,i,r){var u=new l(null,{visitObjectPropertyValue:function(n,i,f){var e=b(i,n);e===t.nonPersistedPropertySentinel?v(i[n])?i[n](a):r?i[n]=a:delete i[n]:u.visitObjectPropertyValue(n,i,f)},visitArray:function(n,i){var r=p(n);r.length===1&&r[0]===t.nonPersistedPropertySentinel?r.splice(0,1):u.visitArray(n,i)}});u.visit(n,i)}
,u.prototype._generateValueBasedEntityId=function(n,t){return this._generateValueBasedEntityIdVisitor.visit(n,t)},u.prototype._createGenerateValueBasedEntityIdVisitor=function(){var n=new l(null,f((function(){return n}),{visitArray:function(t,i){var r="";return p(t).forEach((function(t,u){r+=n.visitArrayItem(t,u,i)})),et(r)},visitObject:function(t,i){var u=n.getObjectPropertiesToVisit(t,i).sort(),r="";return u.forEach((function(u){r+=n.visitObjectPropertyValueDispatch(u,t,i)})),et(r)},visitScalar:function(n){return et(""+n)},visitDate:function(n){return et(""+n)}},!0));return n},u.prototype._createEntityReference=function(n,t,i){var u,o,f,s,e;return i===void 0&&(i=!1),o=this._rootAsEntity(!i)===n,o?u={type:a,id:a}:(f=i?n:this._getOriginalEntity(n),t&&(t.name||t===this._rootTypeMetadata)||r.serialize(),s=c.typeHasId(t)?c.getItemId(f,t):this._generateValueBasedEntityId(f,t),e=t.name||null,e||t===this._rootTypeMetadata||r.namedMeta(),u={type:e,id:s}),u},u.prototype._createComputeEntityUpdatesVisitor=
function(n){var e=this,r=new g(null,f((function(){return r}),{visitObject:function(i,u){var f={};return r.getObjectPropertiesToVisit(i,u).forEach((function(s){var c=r.visit(b(i,s),k(u,s)),l,a,y;n&&(e._shouldPersistObjectPropertyEdits(s,u)||(c=t.nonPersistedPropertySentinel));l=i[s];si(i,s)?a=o(c):h(l)&&c===t.nonPersistedPropertySentinel?(y=[t.nonPersistedPropertySentinel],a=v(l)?!l.splice?o(y):ht(y):y):a=c;f[s]=a})),f}},!0)),i={},u=new l(null,f((function(){return u}),{visitObject:function(f,o,h){if(s(h)){var c;return e._enumeratePropertiesForUpdates(f,h,u,o,(function(r){var s=u.visit(b(f,r),k(o,r),b(h,r));s!==i&&(c||(c={}),n&&(e._shouldPersistObjectPropertyEdits(r,o)||(s=t.nonPersistedPropertySentinel)),c[r]=s)})),c||i}return r.visit(f,o)},visitArray:function(n,t,f){var e=!1,o;return h(f)?p(n).length!==p(f).length?e=!0:(o=p(f),e=p(n).some((function(n,r){return u.visitArrayItem(n,r,t,o[r])!==i}))):e=!0,e?r.visit(p(n),t):i},visitScalar:function(n,t){return pt(n,t)?i:n},visitDate:function(n,t){return pt(
n,t)?i:n}},!0));return u},u.prototype._shouldPersistObjectPropertyEdits=function(t,i){if(!n.Data.allowNonPersistentEdits)return!0;var r=i&&i.properties&&i.properties[t];return!r||r.persistEdits!==!1},u.prototype._enumeratePropertiesForUpdates=function(n,t,i,r,u){i.getObjectPropertiesToVisit(n,r).forEach((function(n){t.hasOwnProperty(n)?u(n):ct.warning("Encountered a property '"+n+"' on an editable object that is not present on the original object.  Updates to the property value are not being persisted along with other edits.")}));i.getObjectPropertiesToVisit(t,r).forEach((function(t){n.hasOwnProperty(t)||ct.warning("Encountered a property '"+t+"' on an original object that is not present on the editable object.  Updates to the property value are not being persisted along with other edits.")}))},u.prototype._assertNotDisposed=function(){this._isDisposed&&r.disposed()},u.prototype._objectPropertyNestsEntities=function(n,t,i){var r=n[t],u;return(v(r)&&(r=r.peek()),!(rt(r)||s(r)))?!1:(u=k(i,t),
!u)?!1:!0},u.prototype._getEditState=function(n,t){return this._getEntityState(n,t).readOnlyEditState},u.prototype._createMergeToEditableVisitor=function(){var n=new di(this._createMergeEntityOnlyVisitorOptions(),f((function(){return n})));return n},u.prototype._createMergeEntityOnlyVisitorOptions=function(){var n=new l(null,f((function(){return n}),{visitEntityTypedObjectPropertyValue:function(){r.nestedEntities()}})),t=new g(null,f((function(){return t})));return{onDetach:function(t,i){n.visit(t,i)},clone:function(n,i){return t.clone(n,i)}}},u.prototype._applyEdits=function(n,t,i){var r=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,i):null,u=i?this.getOriginal(this._root):this._root;t.visit(u,this._rootTypeMetadata,{edits:n,entityReference:r,entityPath:""})},u.prototype._addMetadataHelperMessage=function(n){return n},u.prototype._computeMetadataHelperMessage=function(){},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],u)})(),bi=(function(
n){function t(t,i){var r=this;n.call(this,t,i,(function(n,t){return{editable:r._getVisitor().clone(n,t),original:n}}))}return __extends(t,n),t.prototype._mergeFromOriginal=function(n){n===void 0&&(n=!0);var t=this._rootTypeMetadata,i=this._createMergeEntitiesVisitor(n);this._rootIsEntity()?i.mergeEntity(this._rootAsEntity(!1),this._rootAsEntity(),t):i.mergeEntityArray(this._rootAsArray(!1),this._rootAsArray(),t)},t.prototype._getRefreshableData=function(){return this.getOriginal(this._root)},t.prototype._onRefreshComplete=function(n){n&&kt.mergeWithoutAtomization(n,this.getOriginal(this._root),{type:this._rootTypeMetadata.name});this._mergeFromOriginal(!1)},t.prototype._getVisitor=function(){var t=this,n=this._visitor;return n||(this._visitor=n=new g(null,f((function(){return n}),{visitEntityArray:function(i,r){var u=n.visitEntityArray(i,r);return t._addEntityArrayState(u,i,r),u},visitEntity:function(i,r){var u=n.visitEntity(i,r);return t._addEntityStateToEditableEntity(u,i,r),u}}))),n},t.
prototype._createMergeEntitiesVisitor=function(n){var t=this,i=new ti({onDetach:function(i,r){t._deregisterNestedEntities(i,r,n)},clone:function(n,i){return t._getVisitor().clone(n,i)},getSourceEntity:function(n){return t._getOriginalEntity(n)},isSourceForTargetEntity:function(n,i){return t._getOriginalEntity(i)===n}},f((function(){return i})));return i},t})(ni),ki=(function(n){function t(t,i){var r=this;n.call(this,t,i,(function(n,t){return{editable:n,original:r._getVisitors().clone.clone(n,t)}}))}return __extends(t,n),t.prototype._getRefreshableData=function(){return this._root},t.prototype._onRefreshComplete=function(n){n&&kt.mergeWithoutAtomization(n,this._root,{type:this._rootTypeMetadata.name});this._mergeToOriginal()},t.prototype._getVisitors=function(){var t=this,i=this._visitors,n,r;return i||(n=new g(null,f((function(){return n}),{visitEntityArray:function(i,r,u){var f=n.visitEntityArray(i,r,u);return t._addEntityArrayState(i,f,r),f},visitEntity:function(i,r,u){var f=n.visitEntity(i,
r,u);return t._addEntityStateToEditableEntity(i,f,r),f}})),r=new ti({onDetach:function(){},clone:function(t,i){return n.clone(t,i)},getSourceEntity:function(n,i){return i.first((function(i){var r=t._getEntityState(i,!0,!1);return r&&r.original===n}))},isSourceForTargetEntity:function(n,i){var r=t._getEntityState(n,!0,!1);return r&&r.original===i}},f((function(){return r}))),this._visitors=i={clone:n,merge:r}),i},t.prototype._mergeToOriginal=function(){var n=this._rootTypeMetadata,t=this._getVisitors().merge;this._rootIsEntity()?t.mergeEntity(this._rootAsEntity(),this._rootAsEntity(!1),n):t.mergeEntityArray(this._rootAsArray(),this._rootAsArray(!1),n)},t})(ni),at=(function(n){function t(t,i){n.call(this,t,i);this._getCreatedEntities=t&&t.getCreatedEntities}return __extends(t,n),t.prototype.visitEntityArray=function(t,i,r){var u=this._getCreatedEntities(t);return n.prototype.visitEntityArray.call(this,u,i,r),n.prototype.visitEntityArray.call(this,t,i,r)},t})(l),di=(function(n){function t(t,i){n.
call(this,t,i)}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(){return!0},t})(st),gi=(function(n){function t(t,i){n.call(this,t,i);this._handleAdd=t.handleAdd;this._handleDelete=t.handleDelete}return __extends(t,n),t.prototype.applyEntityArrayAsEdits=function(n,t,i){var r=this;this._mergeArray(n,i,t,{handleAdd:function(n){r._handleAdd(n)},handleDelete:function(n){r._handleDelete(n)}})},t})(st),ti=(function(n){function t(t,i){n.call(this,t,i);this._getSourceEntity=t.getSourceEntity;this._isSourceForTargetEntity=t.isSourceForTargetEntity}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.mergeEntityArray=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){var o=this._callbacks,u=b(t,n),f=b(r,n),e=!1;return h(u)?h(f)&&(e=o.visitEntityArray(u,i,f)):s(u)&&s(f)&&this.
_isSourceForTargetEntity(u,f)&&(e=o.visitEntity(u,i,f)),e},t.prototype.visitEntityArray=function(n,t,i){var r=this;return this._mergeArray(n,t,i,{getEdits:function(n,t){var i=function(t){return r._getSourceEntity(t,n)},f=t.map((function(n){return i(n)})),u=ko.utils.compareArrays(f,n);return u.forEach((function(n){if(n.status==="deleted"||n.status==="retained"){var r=n.value;n.value=t.first((function(n){return i(n)===r}))}})),u},getSourceItem:function(n,t){return r._getSourceEntity(n,t)}})},t})(st)})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n){return new t.EditScopeCache(n)}function r(n){return new t.EditScopeCacheOld(n)}var t=FxImpl.Data;n.createNew=i;n.create=r})(t=n.EditScopeCache||(n.EditScopeCache={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=(function(t){function i(){t.apply(this,arguments)}return __extends(i,t),Object.defineProperty(i.prototype,"editScope",
{get:function(){return this._loadedCacheEntry},enumerable:!0,configurable:!0}),i.prototype.fetchForNewData=function(n){return this.fetch({editScopeId:n,params:undefined})},i.prototype.fetchForExistingData=function(t,i){return this.fetch({editScopeId:t,params:n.isNullOrUndefined(i)?null:i})},__decorate([n.Composition.ProxyCompatibilityMode],i)})(FxImpl.Data.ObjectView);t.EditScopeView=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i="",u={entityCacheWithLoader:i,missingObservableData:i},r=FxImpl.getErrorMap(u),f=(function(i){function u(t){i.call(this,n.clone(t));var u=t;u.findCachedEntity&&u.loader&&!u.loader.establishDataSet&&r.entityCacheWithLoader();this._findCachedEntity=u.findCachedEntity}return __extends(u,i),u.prototype.createView=function(n,i){return new t.EntityView(this,n,i)},u.prototype._tryFindDataInRelatedCache=function(n){var i,t=this._findCachedEntity,r,f,u,e;return t&&(t.hasOwnProperty("queryCache")?(r=t,f=r.queryCache,
i=f._findMatchingEntity(r.entityMatchesId,n)):(u=t,e=u.dataCache,i=e._findEntity(u.findMatchingEntityInCacheEntry,n))),i},u.prototype._getDataFromDataSet=function(n){var t=n.data;return ko.isObservable(t)||r.missingObservableData(),n.data()},u})(FxImpl.Data.DataCache);t.EntityCache=f})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(t){function r(n,r,u){var f=this,e;t.call(this,n,r,u||{});this._item=i(null);e=ko.computed((function(){var t=f._loadedCacheEntry(),n,i;if(t)if(n=t.data,ko.isObservable(n))i=n(),f._item(i);else throw new Error("DataSets used with EntityView must contain observable data.");else f._item(null)}));r.registerForDispose(e)}return __extends(r,t),Object.defineProperty(r.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this._item()},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],
r)})(FxImpl.Data.DataView);t.EntityView=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function ut(n,t){return r[n]=new ot(n,t)}function k(){return+new Date}function l(n,t){var i=n in u&&u[n]||w||b;return i[t]}function ft(){return yt||b.fastPollingInterval}function pt(t){var i=ft();return t=n.clone(t),(isNaN(t.pollingInterval)||t.pollingInterval<i)&&(t.pollingInterval=i),(isNaN(t.fastPollingInterval)||t.fastPollingInterval<i)&&(t.fastPollingInterval=i),(isNaN(t.slowPollingInterval)||t.slowPollingInterval<i)&&(t.slowPollingInterval=i),t.fastPollingInterval>t.pollingInterval&&(t.pollingInterval=t.fastPollingInterval),t.pollingInterval>t.slowPollingInterval&&(t.slowPollingInterval=t.pollingInterval),t}function et(n,t,i){n.fetchingSameData&&(n.fetchingSameData=i);t&&(n.isForcedCacheRefresh=!0)}function wt(t,i,r){if(i){var u=i.status;if(u===401||u===403)return new n.Errors.UnauthorizedDataError(t,i);if(u===404&&(!r||vt(i)))return new n.Errors.
NotFoundDataError(t,i)}return new n.Errors.FetchDataError(t,i)}var g=n.Base,st=n.Data,ht=g.Promises,a=g.Net2,o=n.Helpers.Deferred,nt=n.isObject,tt=n.deepEquals,i=null,s="",ct={earlyRefresh:s,unknownDataSet:s,modifyLifetime:s,unaccessedDataSet:s},h=FxImpl.getErrorMap(ct),v=window,y=new n.Base.Diagnostics.Log(""),r={},it={getFetchParameters:function(n,t,r){return r?{headers:t&&t.ajaxHeaders,data:t&&t.ajaxData}:i},fetchData:function(n,t,r,u,f,e){var h=i,o,s;return r&&(h=typeof r=="string"?r:JSON.stringify(r)),o="json",s=a.ajax({uri:t,type:f||"POST",dataType:o,cache:!1,headers:u,traditional:!0,contentType:"application/json",data:h,setAuthorizationHeader:e}),s.requestedDataType=o,s},processResult:[t.DataProvider.DataContractJsonSerializer.processResult]},p,w,u={},b={fastPollingInterval:1e4,pollingInterval:6e4,slowPollingInterval:3e5},f={slow:"slowPollingInterval",normal:"pollingInterval",fast:"fastPollingInterval"},e=0,lt=/^application\/json\b/,at=function(n){try{return JSON.parse(n),!0}catch(t)
{return!1}},vt=function(n){return lt.test(n.getResponseHeader("Content-Type"))&&at(n.responseText)},rt=v.fx.environment.features.tracefetch==="true",yt,c,ot,d;(function(n){n[n.Never=1]="Never";n[n.Normal=2]="Normal"})(t.PollFrequency||(t.PollFrequency={}));c=t.PollFrequency;ot=(function(){function t(n,t){var u=this,r;this._pollFrequency=c.Normal;this._fastPollingRefCount=0;this._pollCount=0;this._merged=!1;this._hasSnapshottedFetchOptions=!1;this._name=n;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;t&&(this._snapshotFetchOptions(t),r=t.type);this.dataSet=new st.DataSet(r||i,t.dataSetLifetime,t.atomizationOptions)}return t.prototype._hasRequestInFlight=function(){return!!this._currentFetchDeferred},t.prototype._getLastFetchState=function(){return this._lastFetchState},t.prototype.getCachedOrInFlightData=function(n){var u=n.uri,f=n.ajaxData,e=n.ajaxHeaders,t,r,s=n.httpMethod||i;return this._lastCompletedFetchStart&&u===this._uri&&s===this._httpMethod&&tt(f,this._ajaxData)&&
tt(e,this._ajaxHeaders)?!this._expiry||this._expiry>k()?(n.forceCacheRefresh&&this.debounceServerFetch(!0,!0),t=o().resolve({name:this._name,value:this.dataSet})):this._currentFetchDeferred&&!n.forceCacheRefresh?t=this._currentFetchDeferred:(y.verbose("Cached data expired: '"+this._name+"'"),r=!0):(this._tryExecuteDebouncedServerFetch(),this._snapshotFetchOptions(n)),{promise:t?t.promise():i,fetchingSameData:r}},t.prototype.forceRefresh=function(){return this._hasSnapshottedFetchOptions||h.earlyRefresh(),a.invalidateCacheHeader(this._ajaxHeaders),this._tryExecuteDebouncedServerFetch(!0)?this._currentFetchDeferred.promise():this.debounceServerFetch(!0,!0)},t.prototype.debounceServerFetch=function(t,r){var u=this,f;return this._debouncedFetch?et(this._debouncedFetch,r,t):(this._currentFetchDeferred=o(),this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask),f=function(){var n=u._debouncedFetch,t=n.isForcedCacheRefresh,r=n.fetchingSameData;u._debouncedFetch=i;u._fetchData(r,!0,t)}
,this._debouncedFetch={callback:f,timeoutId:v.setTimeout(f,0),isForcedCacheRefresh:r,fetchingSameData:t}),this._currentFetchDeferred.promise()},t.prototype.setFastPolling=function(n){n?this._fastPollingRefCount++:this._fastPollingRefCount>0&&this._fastPollingRefCount--},t.prototype.dispose=function(){this._lifetimeManager.dispose();delete u[this._name];this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask)},t.prototype._tryExecuteDebouncedServerFetch=function(n){var t=this._debouncedFetch;return t?(et(t,n,n),v.clearTimeout(t.timeoutId),t.callback(),!0):!1},t.prototype._snapshotFetchOptions=function(t){this._hasSnapshottedFetchOptions=!0;this._uri=t.uri;this._httpMethod=t.httpMethod||i;this._ajaxData=t.ajaxData;this._ajaxHeaders=t.ajaxHeaders;this._loaderOptions=t.loaderOptions;this._preserveNewItemsOrdering=t.preserveNewItemsOrdering;this._pollFrequency=t.pollFrequency||c.Normal;this._setAuthorizationHeader=t.setAuthorizationHeader;var r=t.fetchStartListener;this._fetchStartListener=
r?function(n){r.fire(n)}:n.noop},t.prototype._fetchData=function(t,r,u){var f=this,o=this._name,nt=this._getLoaderOptionFunction("getFetchParameters"),p=this._getLoaderOptionFunction("fetchData"),s=this._getLoaderOptionFunction("processResult"),c,v=k(),h=this._currentFetchDeferred,w=this._lastFetchState,b=n.Base.Diagnostics.Telemetry,d,tt=this.dataSet,l,g;rt&&(d=b.startTrace({source:"Data",action:"Fetch",name:this._name,data:this._uri}));u&&(this._lastForcedFetchStart=v);this._fetchStartListener({dataSetName:o,promise:h.promise(),isClientInitiated:r});c=nt(o,w,t)||{};l=n.clone(this._ajaxData,!1,!0)||i;c.data&&(l=n.extend(l,c.data));this._uri||p!==it.fetchData||y.error("Missing uri parameter in fetchData for '"+o+"' created by: "+(this._constructorCallStack||""));ht.cancelOnDispose(this._lifetimeManager,(function(){var t=p(o,f._uri,l,n.extend2(f._ajaxHeaders,c.headers),f._httpMethod,f._setAuthorizationHeader);return g=t.requestedDataType==="json",t})).then((function(n){var l=!0,u=n&&n.cachedAjax?
n:{cachedAjax:!1,modified:!0,data:n,cacheTagValue:i},p={data:u.data},c,k,g,nt,it;u.cacheTagValue&&(f._ajaxHeaders=a.setCacheHeader(f._ajaxHeaders,u.cacheTagValue));try{if(f._lifetimeManager.isDisposed())return;if(Array.isArray(s)||(s=[s]),u.modified)for(k=s.length,c=0;c<k;++c)if(!s[c](o,p,w,t,tt.type)){l=!1;break}g=!r&&e>0;f._onFetchCompleted(r,!0,h);u.modified&&l&&!g&&f._shouldAcceptFetchResult(v)&&f._acceptFetchResult(p,v)}catch(ut){nt=FxImpl.Diagnostics.getLogFriendlyMessage(ut);it="Data merge failed for data set '"+o+"'. The error message was: "+nt;y.error(it)}finally{rt&&b.completeTrace(d);h.resolve({name:o,value:f.dataSet})}})).catch((function(n){if(!f._lifetimeManager.isDisposed()){f._onFetchCompleted(r,!1,h);var t=wt(o,n&&n.jqXHR||n,g);h.reject(t)}}))},t.prototype._onFetchCompleted=function(n,t,r){var u=this,e=this._pollFrequency!==c.Never;n&&t&&e&&!this._pollingTask&&(this._pollingTask={name:"poll data set: "+this._name,scheduledTask:function(){u._pollData()},recurring:!1,isAsync:
!0,delayInMs:l(this._name,f.fast),silent:!0});r===this._currentFetchDeferred&&(this._currentFetchDeferred=i,this._reschedulePolling(!0))},t.prototype._reschedulePolling=function(t){this._pollingTask&&(t&&(this._pollCount=0),n.Base.Scheduler.scheduleTask(this._pollingTask))},t.prototype._shouldAcceptFetchResult=function(n){if(this._lastCompletedFetchStart){var t=n>this._lastCompletedFetchStart,i=this._lastForcedFetchStart&&n<this._lastForcedFetchStart;return t&&!i}return!0},t.prototype._acceptFetchResult=function(n,t){this.dataSet.merge(n.data,{type:n.type,fetchStart:t,preserveNewItemsOrdering:this._preserveNewItemsOrdering});var r=this.dataSet;r.navigationMetadata(n.navigationMetadata||i);r.partialErrors(n.partialErrors||[]);this._lastCompletedFetchStart=t;this._lastFetchState=n.fetchState;this._merged=!0;this._expiry=k()+l(this._name,f.slow)*3;$(r).trigger("mergeComplete")},t.prototype._determinePollingInterval=function(){return f.normal},t.prototype._pollData=function(){var n,t,i,r,u;
if(!this._lifetimeManager.isDisposed())return this._currentFetchDeferred||e||(this._pollCount++,this._isFastPollNeeded()?(n=!0,u="Client side locking or mutation flags detected",t=f.fast):(n=!0,u="Poll is needed",t=this._determinePollingInterval()),t&&(i=l(this._name,t)),n&&(r=Math.ceil(i/l(this._name,f.fast)),n=this._pollCount%r==0)),n?(this._currentFetchDeferred=o(),this._fetchData(!0),this._currentFetchDeferred.promise()):(this._reschedulePolling(),o().resolve(null))},t.prototype._isFastPollNeeded=function(){return this._fastPollingRefCount>0||this.dataSet.hasUnmergedClientChanges()},t.prototype._getLoaderOptionFunction=function(n){var t;return this._loaderOptions&&(t=this._loaderOptions[n]),!t&&p&&(t=p[n]),t||it[n]},t})();d=(function(){function n(){}return n.getData=function(n,t){var i,u,e,f;return nt(n)&&(t=n,n=t.dataSetName||t.uri),i=r[n],i?(f=i.getCachedOrInFlightData(t),u=f.promise,e=f.fetchingSameData):i=ut(n,t),u||(u=i.debounceServerFetch(e,t.forceCacheRefresh)),u},n.forceRefresh=
function(n){var t=r[n];if(t)return t.forceRefresh();h.unknownDataSet()},n.getDataSet=function(t,i,r,u,f){var e=!1,o={dataSetLifetime:u,atomizationOptions:f,uri:undefined};return typeof i=="boolean"?e=i:typeof i=="string"&&(e=!0,o.type=i),n.getDataSet2(t,e,o,r)},n.getDataSet2=function(n,t,u,f){var e=r[n],s=u.dataSetLifetime,o;return e&&s&&s!==e.dataSet.lifetime&&h.modifyLifetime(),!e&&t&&(e=ut(n,u)),o=e?e.dataSet:i,o&&f&&o.merge(f),o},n.hasRequestInFlight=function(n){var t=r[n];return t&&t._hasRequestInFlight()},n.disposeDataSet=function(n){var t=r[n];t&&(t.dispose(),delete r[n])},n.setFastPolling=function(n,t){var i=r[n];i?i.setFastPolling(t):h.unaccessedDataSet()},n.pausePolling=function(){e++},n.resumePolling=function(){e>0&&e--},n.setDefaultLoaderOptions=function(n){p=n},n.getMinPollingInterval=function(){return ft()},n.setPollingIntervals=function(n,t){var r=n;nt(n)&&(t=n,r=i);t=pt(t);r?u[r]=t:w=t},n.resetPollingIntervals=function(n){typeof n=="string"?u[n]=null:w=null},n._internal=
{setDefaultPollingIntervals:function(n){b=n}},n})();t.Loader=d,(function(n){var t;(function(n){function t(){Object.getOwnPropertyNames(r).forEach((function(n){var t=r[n];t&&(t.dispose(),delete r[n])}))}n.disposeAllCachedDataSetsForTests=t})(t=n.Internal||(n.Internal={}))})(d=t.Loader||(t.Loader={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=t.Loader,f=n.Data.PollFrequency,s="GET",r="",h={needBothOptions:r,minimumPoll:r,incompatibleOptions:r},u=FxImpl.getErrorMap(h),e=(function(){function r(i){i.atomizationOptions&&!i.entityTypeName?u.needBothOptions():!i.atomizationOptions&&i.entityTypeName&&(i.atomizationOptions={});this._dataType=i.entityTypeName;this._uriForParams=i.sourceUri;this._httpMethod=i.httpMethod;this._polls=!!i.poll;this._pollInterval=i.pollInterval||null;this._serializeParams=i.serializeParams;this._supplyData=i.supplyData;this._atomizationOptions=i.atomizationOptions;this._processServerResponse=i.processServerResponse;
this._preservesClientOrder=!!i.pollPreservesClientOrdering;this._setAuthHeader=i.setAuthorizationHeader;n.Base.ProxiedObservables.markNonSerializable(this);var r=t.Loader.getMinPollingInterval();this._polls&&this._pollInterval!==null&&this._pollInterval<r&&u.minimumPoll(r);this._setAuthHeader!==undefined&&this._supplyData&&u.incompatibleOptions()}return r.prototype._doesPoll=function(){return this._polls},r.prototype.serializeParams=function(n){return this._serializeParams?this._serializeParams(n):this._uriForParams(n)},r.prototype.loadDataSetForParams=function(n,t,i){var r=this._getDataSetLoaderOptions(n,t,i);return this.loadDataSet(n,r)},r.prototype.loadDataSet=function(n,t){var u=i.getData(n,t),r=u.then((function(n){return n.value}));return r.dataSetName=n,r},r.prototype.refreshDataSet=function(n){return i.forceRefresh(n.dataSetName)},r.prototype.disposeDataSet=function(n){i.disposeDataSet(n.dataSetName)},r.prototype.getLoadedDataSet=function(n){var t=i.getDataSet(n);return t&&t.data?
t:null},r.prototype.isLoadingDataSet=function(n){return i.hasRequestInFlight(n)},r.prototype._getDataSetLoaderOptions=function(n,r,u){var h=this,o={uri:this._uriForParams?this._uriForParams(r):null,type:this._dataType,httpMethod:this._httpMethod||s,pollFrequency:this._polls?f.Normal:f.Never,atomizationOptions:this._atomizationOptions,dataSetLifetime:u,preserveNewItemsOrdering:!this._preservesClientOrder,setAuthorizationHeader:this._setAuthHeader,loaderOptions:{processResult:[t.DataProvider.DataContractJsonSerializer.processResult]}},e=this._pollInterval,c;return this._polls&&e!==null&&i.setPollingIntervals(n,{slowPollingInterval:e,pollingInterval:e,fastPollingInterval:e}),this._supplyData&&(o.loaderOptions.fetchData=function(n,t,i,f,e){return h._supplyData(e,t,f,i,r,u)}),this._processServerResponse&&(c=function(n,t){var i=h._processServerResponse(t.data);return i&&(t.data=i.data,t.navigationMetadata=i.navigationMetadata,t.partialErrors=i.partialErrors),!0},o.loaderOptions.processResult.
unshift(c)),o},r})(),o;t.DataCacheLoader=e;o=(function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.establishDataSet=function(n,t,r,u){var f=this._getDataSetLoaderOptions(n,t,u);return i.getDataSet2(n,!0,f,r)},t})(e);t.DataCacheLoader2=o})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Add=0]="Add";n[n.Update=1]="Update"})(n.EditKind||(n.EditKind={}));var t=n.EditKind})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=FxImpl.Data,i=0,r=(function(){function n(n){var u=this,r,f;this._referrerUniqueId=0;r=n.onEntryDisposed;this._referrerPropertyName="_objectCache_"+ ++i;this._serializeKey=n.serializeKey;this._supplyValue=n.supplyValue;this._tryFindValueInRelatedCache=n.tryFindValueInRelatedCache;this._entries=new t.RefCountCache({evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n,t){u._telemetryCollector&&
u._telemetryCollector.recordEviction(t);n.lifetime&&n.lifetime.dispose();r&&r(n.value,n.key)}});f=n;f.collectEfficiencyTelemetry&&(this._telemetryCollector=new t.ObjectCacheTelemetryCollector)}return n.prototype.getValue=function(n,t){var i=this,r=this._serializeKey(n),s=t?this._getOrCreateReferrerId(t):null,f,u,e,o;return this._telemetryCollector&&(f=this._entries.hasEntry(r)),e=function(){var t=new FxImpl.TriggerableLifetimeManager,r,f;return i._tryFindValueInRelatedCache&&(f=i._tryFindValueInRelatedCache(n,t),f&&(r=f.value,u=!0)),u||(r=i._supplyValue(n,t)),{key:n,value:r,lifetime:t}},o=this._entries.getEntry(r,s,e).value,this._telemetryCollector&&this._telemetryCollector.recordCacheRead(r,f||u),o},n.prototype.insertValueIfNotPresent=function(n,t,i){var r=this._serializeKey(n),u=this._getOrCreateReferrerId(i);this._entries.getEntry(r,u,(function(){return{key:n,value:t,lifetime:null}}))},n.prototype.hasEntry=function(n){var t=this._serializeKey(n);return this._entries.hasEntry(t)},n.prototype.
dissociateEntry=function(n,t){var r=this._serializeKey(n),i=this._getOrCreateReferrerId(t);i&&this._entries.dissociateEntry(r,i)},n.prototype.immediatelyEvictEntry=function(n){var t=this._serializeKey(n);this._entries.immediatelyEvictEntry(t)},n.prototype.forEachEntry=function(n){this._entries.forEachEntry((function(t,i){n(i.key,i.value)}))},n.prototype.dispose=function(){this._entries.dispose()},n.prototype._getOrCreateReferrerId=function(n){var r=this,t=n,i=t[this._referrerPropertyName];return this._referrerPropertyName in t||(t[this._referrerPropertyName]=i="referrer"+ ++this._referrerUniqueId,n.registerForDispose((function(){delete t[r._referrerPropertyName];r._entries.disposeReferrer(i);i=null}))),i},n})();n.ObjectCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.clone,r=(function(r){function u(n){r.call(this,n);this._navigationOptions=n.navigation?i(n.navigation):null}return __extends(u,r),u.prototype.createView=function(
n,i){return new t.QueryView(this,n,i)},u.prototype.createNavigator=function(n){return this.createNavigatorWithOptions(n,null)},u.prototype.createNavigatorWithOptions=function(n,i){var u=this._navigationOptions,f,r,e;if(u)return f={},r=this.createView(n),e=i&&i.createMapping?i.createMapping(n,r.items):r.items,u.loadBySkipTake&&(f.loadBySkipTake=function(n,t,i,f,e,o){return u.loadBySkipTake(r,t,i,f,e,o)}),u.loadByContinuationToken&&(f.loadByContinuationToken=function(n,t,i,f,e){return u.loadByContinuationToken(r,t,i,f,e)}),new t.RemoteDataNavigator(n,e,r.metadata,f,r.partialErrors);throw new Error("Cannot create a DataNavigator, because the QueryCache has no navigation options configured.");},Object.defineProperty(u.prototype,"navigationOptions",{get:function(){return this._navigationOptions},enumerable:!0,configurable:!0}),u.prototype._findMatchingEntity=function(n,t){var i;return this._forEachEntry((function(r,u,f){if(f&&!i){var e=ko.unwrap(f.data);e&&(i=e.first((function(i){return n(i,t)})
))}})),i},u.prototype._getDataFromDataSet=function(n){var t=n.data;if(!ko.isObservable(t)||!Array.isArray(t()))throw new Error("DataSets used with QueryCache must contain an observable-wrapped array.");return n.data},__decorate([n.Composition.ProxyCompatibilityMode],u)})(FxImpl.Data.DataCache);t.QueryCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=ko.observable,u=ko.observableArray,i=ko.computed,f=(function(t){function f(n,f,e){var o=this;t.call(this,n,f,e||{});this._items=u();this._metadata=r(null);i(f,(function(){var i=o._loadedCacheEntry(),r=o._items,n,t;if(i)if(n=i.data,ko.isObservable(n)){if(t=n(),!Array.isArray(t))throw new Error("DataSets used with QueryView must contain arrays.");r(t)}else throw new Error("DataSets used with QueryView must contain observable data.");else r([])}));i(f,(function(){var n=o._loadedCacheEntry(),t=o._metadata;n?t(n.navigationMetadata()||null):t(null)}))}return __extends(f,t),Object.defineProperty(
f.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"metadata",{get:function(){return this._metadata},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"data",{get:function(){return this._items},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],f)})(FxImpl.Data.DataView);t.QueryView=f})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n,t){var i=t?encodeURIComponent:null;return function(t){var r=typeof t,u=r==="string"||r==="number"?{id:t}:t;return n.format(u,i)}}n.uriFormatter=t})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t=FxImpl.Constants.RpcMethods,i=FxImpl.Rpc.ActionEndPointDefinition;n.updateTenantInfoEndPoint=new i(t.updateTenantInfo);n.updateSubscriptionInfoEndPoint=new i(t.updateSubscriptionInfo);n.getRegisteredResourceProviderInfoEndPoint=
new i(t.getRegisteredResourceProviderInfo)})(t=n.Azure||(n.Azure={}))})(t=n.Internal||(n.Internal={}))})(HubsExtension||(HubsExtension={})),(function(n){var t;(function(n){"use strict";function i(n){return n.toLowerCase()}function nt(n,t,r){var u=n[i(t)];return u?(r(u),!0):!1}function tt(n,t,r,u){var f=n[i(t)],e;return f&&(e=f.kinds[i(r)],e)?(u(f,e),!0):!1}function it(n,t,u){var h=function(n,t){var o=u||window.location.protocol==="https:"?p:y,e;return o.test(n)?{type:2,data:n,options:{isLogo:!0}}:w.test(n)?{type:1,data:n,options:{isLogo:!0}}:(t=i(t||""),f[t]||(e=r.getCurrentCallStack(!0),b.warning("Invalid resource type metadata ("+t+"), icon must be inline SVG or a URL: "+n.substr(0,50)+"\n"+e),f[t]=!0),null)},c=t&&t.icon,l=n&&n.resourceType,e,o,s;return c&&(e=h(c,l+":"+t.kind),e)?e:(o=n&&n.icon,o&&(s=h(o,l),s))?s:null}var r=MsPortalFx,u=r.Base,y=/^(https\:\/\/|http\:\/\/|\/\/)/i,p=/^(https\:\/\/|\/\/)/i,w=/^(\<svg(\>|\ )|\<\?xml\ ([a-z][^(\=|\ |\")]*\=\"(?:[^\"\\]|\\.)*?\"\ ?)*\?\>[\s]*\<svg(\>|\ ))/i,
b=new u.Diagnostics.Log("MsPortalFx/Observables/AzureObservables"),f={},t=ko.observable,k=(function(){function n(){}return n})(),e,o,s,h,c,l,a,v,d,g;n.Subscription=k;e=(function(){function n(){}return n})();n.SubscriptionPolicies=e;o=(function(){function n(){}return n})();n.SubscriptionList=o;s=(function(){function n(){}return n})();n.TenantInfo=s;h=(function(){function n(){}return n})();n.Tenant=h;c=(function(){function n(){this.regionPicker={regionId:t()}}return n})();n.RegionPickerDataModel=c;l=(function(){function n(){this.subscriptionPicker={subscriptionId:t(),subscriptionName:t()}}return n})();n.SubscriptionPickerDataModel=l;a=(function(){function n(){this.resourceGroup={resourceGroupName:t(),subscriptionId:t()}}return n})();n.ResourceGroupDataModel=a;v=(function(){function n(){this.resourceGroupPicker={resourceGroupName:t(),resourceGroupLocation:t(),subscriptionId:t(),isNewResourceGroup:t()}}return n})();n.ResourceGroupPickerDataModel=v,(function(n){var t=u.Constants.ExtensionNames,i;(function(n){
n.PricingSummaryBlade={displayText:r.Resources.Strings.Services.Gallery.viewPricingSummaryLabel,bladeName:"PricingSummaryBlade",bladeExtension:t.Marketplace};n.LegalTermsBlade={bladeName:"LegalTermsBlade",bladeExtension:t.Marketplace};n.ChannelType={directEA:"DirectEA",indirectEA:"IndirectEA",direct:"Direct",csp:"CSP"}})(i=n.Constants||(n.Constants={}))})(d=n.Pricing||(n.Pricing={})),(function(n){n.defaultVisibility="default";n.hiddenVisibility="hidden"})(g=n.KindMetadataVisibility||(n.KindMetadataVisibility={}));n.withResourceType=nt;n.withResourceTypeKind=tt;n.getResourceKindIconAsImage=it})(t=n.Azure||(n.Azure={}))})(HubsExtension||(HubsExtension={})),(function(n){var t;(function(n){var t;(function(n){"use strict";n.CellWidth=85;n.CellHeight=85;n.CellSpacingWidth=5;n.CellSpacingHeight=5;n.GridSpacingWidth=n.CellWidth+n.CellSpacingWidth;n.GridSpacingHeight=n.CellHeight+n.CellSpacingHeight})(t=n.AzureGrid||(n.AzureGrid={}))})(t=n.Widgets||(n.Widgets={}))})(MsPortalFx||(MsPortalFx={})),(function(
n){var t;(function(n){"use strict";(function(n){n[n.Theme=0]="Theme";n[n.Blue=1]="Blue";n[n.Green=2]="Green";n[n.Orange=3]="Orange";n[n.Pink=4]="Pink";n[n.Purple=5]="Purple";n[n.Azure=6]="Azure";n[n.Dark=7]="Dark";n[n.Red=8]="Red"})(n.PartColor||(n.PartColor={}));var t=n.PartColor})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Custom=0]="Custom";n[n.CollectionSummary=1]="CollectionSummary";n[n.Error=3]="Error";n[n.ItemSummary=4]="ItemSummary";n[n.Settings=7]="Settings";n[n.SingleSetting=8]="SingleSetting";n[n.LogStream=11]="LogStream";n[n.Grid=14]="Grid";n[n.Editor=15]="Editor";n[n.DiffEditor=16]="DiffEditor";n[n.Provisioning=17]="Provisioning";n[n.Unavailable=18]="Unavailable";n[n.Create=19]="Create";n[n.Button=20]="Button";n[n.QuickStart=21]="QuickStart";n[n.Asset=22]="Asset";n[n.InfoList=23]="InfoList";n[n.Properties=24]="Properties";n[n.Collection=25]="Collection";n[n.Chart=26]="Chart";n[n.SingleValueGauge=27]="SingleValueGauge";
n[n.Donut=28]="Donut";n[n.QuotaGauge=29]="QuotaGauge";n[n.ResourceSummary=30]="ResourceSummary";n[n.Frame=31]="Frame"})(n.PartKind||(n.PartKind={}));var t=n.PartKind})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Mini=0]="Mini";n[n.Small=1]="Small";n[n.Normal=2]="Normal";n[n.Wide=3]="Wide";n[n.Tall=4]="Tall";n[n.HeroWide=5]="HeroWide";n[n.HeroTall=6]="HeroTall";n[n.HeroWideFitHeight=7]="HeroWideFitHeight";n[n.FullWidthFitHeight=8]="FullWidthFitHeight";n[n.FitToContainer=9]="FitToContainer";n[n.Large=10]="Large";n[n.Hero=11]="Hero";n[n.Custom=99]="Custom"})(n.PartSize||(n.PartSize={}));var t=n.PartSize})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function u(n,t){var i=function(n,t,i){return n<0?-1:n===0?0:Math.max(0,n*t+(n-1)*i)};return{width:i(n,r.CellWidth,r.CellSpacingWidth),height:i(t,r.CellHeight,r.CellSpacingHeight)}}function f(n,t){var i=function(n,t,i){return Math.
ceil(n/(t+i))};return{colSpan:i(n,r.CellWidth,r.CellSpacingWidth),rowSpan:i(t,r.CellHeight,r.CellSpacingHeight)}}var i=n.Parts.PartSize,r=n.Widgets.AzureGrid,e;(function(t){function o(n,t){var i=function(n){return Math.ceil(Math.min(Math.max(n,1),25))};return u(i(n),i(t))}function s(u,e){var o=n.find(t.AllSizes,(function(n){var t=n&&n.size;return n&&t.width===u&&t.height===e}));return o||(o=r(i.Custom),o.size={width:u,height:e},o.span=f(u,e)),$.extend(!0,{},o)}function h(){return r(i.Normal)}function r(i){return $.extend(!0,{},n.find(t.AllSizes,(function(n){return n&&n.name===i})))}function e(n){return function(t){return t===n}}function c(n){var t=e(n),r=[i.Mini,i.Small,i.Normal,i.Wide,i.Tall,i.Large,i.HeroWide,i.HeroTall,i.Hero,i.Custom];return r.some(t)}function l(n){var t=e(n),r=[i.HeroWideFitHeight,i.FullWidthFitHeight,i.FitToContainer];return r.some(t)}function a(n){var t=e(n),r=[i.FullWidthFitHeight,i.FitToContainer];return r.some(t)}t.AllSizes=(function(){var t=[],n=function(n,r,f){t[
n]={name:n,css:"fxs-tilesize-"+i[n].toLowerCase(),size:u(r,f),span:{colSpan:r,rowSpan:f}}};return n(i.Mini,1,1),n(i.Small,2,1),n(i.Normal,2,2),n(i.Wide,4,2),n(i.Tall,2,4),n(i.HeroWide,6,4),n(i.HeroTall,4,6),n(i.HeroWideFitHeight,6,0),n(i.FullWidthFitHeight,-1,0),n(i.FitToContainer,-1,-1),n(i.Large,4,4),n(i.Hero,6,6),n(i.Custom,0,0),t})();t.AllCssClasses=t.AllSizes.map((function(n){return n.css}));t.getGridPixelSize=o;t.getCorrespondingStandardSize=s;t.getDefaultSize=h;t.getSize=r;t.isFixedSize=c;t.isVariableSize=l;t.isAdaptiveWidth=a})(e=t.PartSizeHelper||(t.PartSizeHelper={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed"})(n.PartState||(n.PartState={}));var t=n.PartState})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function i(t,i,u){var f=n.clone(t);return r.addAssetExpansion(f,i(f,u)),f}function u(n,t,r,u){var f=i(n,r,u);
return t.push(f),f}var r,f;(function(n){function r(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]!==undefined}function u(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]}function f(n,r){var u=r.icon,f=[r,r.title,r.description,u,r.assetId,r.assetType||""];t.forEach((function(t,r){i(n,t,f[r])}))}function e(n){r(n)&&t.forEach((function(t){i(n,t,undefined)}))}n.assetDetailsPropertyPrefix="$$MSPORTALFX";n.assetDetailsPropertyName=n.assetDetailsPropertyPrefix+"$assetDetails";n.titlePropertyName=n.assetDetailsPropertyName+"$title";n.descriptionPropertyName=n.assetDetailsPropertyName+"$description";n.iconPropertyName=n.assetDetailsPropertyName+"$icon";n.assetTypeStringPropertyName=n.assetDetailsPropertyName+"$assetTypeString";n.assetIdPropertyName=n.assetDetailsPropertyName+"$assetId";var t=[n.assetDetailsPropertyName,n.titlePropertyName,n.descriptionPropertyName,n.iconPropertyName,n.assetIdPropertyName,n.assetTypeStringPropertyName],
i=function(n,t,i){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!1,value:i})};n.isAssetExpanded=r;n.getAssetExpansion=u;n.addAssetExpansion=f;n.removeAssetExpansion=e})(r=t.AssetExpansion||(t.AssetExpansion={}));t.assetExpandItem=i;t.assetExpandItemAndAddToResultSet=u,(function(n){function t(n,t,r,u){var f=n.map((function(n){return i(n,r,u)}));return t(f()),f.subscribe(t)}n.connectDataSet=t})(f=t.DataSetAssetExpansionMapper||(t.DataSetAssetExpansionMapper={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.subscribeDataSet=function(n,t,i,r){n().forEach((function(n,i){t(n,i,r)}));var u="Subscription does not handle ";return n.subscribeArrayEdits(null,(function(n){n=ko.utils.adjustArrayEdits(n);n.forEach((function(n){switch(n.status){case"added":if(t)t(n.value,n.index,r);else throw new Error(u+"insert.");break;case"deleted":if(i)i(n.value,n.index,r);else throw new Error(u+"remove.");
}}))}))},n.insertItem=function(n,t,i){n.splice(i,0,t)},n.removeItem=function(n,t,i){n.splice(i,1)},n})();n.DataSetSubscription=t})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t,u,i,f,r;n.noSubCreateCategoryId="hidden_nosubcreate";t=ko.observable,(function(n){n.GalleryParametersKey="galleryParameters";n.GalleryOptionsKey="galleryOptions"})(u=n.Constants||(n.Constants={}));i=(function(){function n(){}return n.prototype.galleryCreatePreCheck=function(){return null},n})();n.BaseGalleryServiceViewModel=i,(function(n){n[n.template=0]="template";n[n.fragment=1]="fragment";n[n.custom=3]="custom";n[n.metadata=4]="metadata"})(n.ArtifactType||(n.ArtifactType={}));f=n.ArtifactType;r=(function(){function n(){this.galleryParameters={selectedTemplateId:t(),templateJson:t(),subscriptionId:t(),resourceGroupName:t(),resourceGroupLocation:t(),resourceProviders:t(),primaryResourceId:t(),deploymentName:t()}}return n})();n.GalleryDataModel=
r})(t=n.Gallery||(n.Gallery={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function r(){return FxImpl.Rpc.client.acquireObject(FxImpl.Constants.RpcMethods.getSettings,i.Constants.Shell,null).then((function(n){return n.getValue()}))}var i=n.Base;t.getSettings=r})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function u(n){return{trace:n,flush:function(){return f}}}function s(n,t){return n?new o(n,t):u(e)}function h(){return u((function(t){t.actionModifier!==n.Base.Diagnostics.Telemetry.ActionModifier.Start&&console.log("[PERF] "+JSON.stringify(t))}))}var i=n,r=window,f=n.Helpers.resolve(),e=i.noop,c=i.forEachKey,o=(function(){function n(n,t){r.location.search&&n.indexOf("?")===-1&&(n+=r.location.search);var i=FxImpl.getStandardDebouncer(n,!0,t);this.trace=function(n){n&&i.execute([n],n.optional)};this.flush=function(){return i.flush()}}return n})();t.getTelemetryEventProcessor=
s;t.getConsoleTelemetryEventProcessor=h})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(t,i){if(r(u(t))||r(u(i)))throw new Error("compareIds requires ids for comparison.");return n.deepEquals(t,i,!0)}var r=n.isNullOrUndefined,e=n.initObservable,i=n.initObservableArray,u=ko.utils.peekObservable,f;t.compareIds=o;f=(function(){function t(n,t){t===void 0&&(t={});this._lifetime=n.createChildLifetime();this._msPortalFxSelectableSet=!0;this.dynamicSelectionProvider=t.dynamicSelectionProvider;this.commandGroupProvider=t.commandGroupProvider;this.selectionMode=t.selectionMode||2;this.activationMode=t.activationMode||2;this.selectedIds=i(t.selectedIds);this.selectedAll=e(t.selectedAll,!1);this.unselectedIds=i(t.unselectedIds);this.activatedIds=i(t.activatedIds)}return t.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},Object.defineProperty(t.prototype,
"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.SelectableSet=f})(i=t.Selection2||(t.Selection2={}))})(i=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function a(t,i){if(i){var u=t.peek(),r=u.slice();n.pushUnique(r,i,null,!0);r.length!==u.length&&t(r)}}var u=n.isUndefined,h=n.isNullOrUndefined,c=ko.unwrap,i=ko.observable,f=ko.observableArray,e=ko.computed,r="added",l="deleted",v="_lifetime",y=FxImpl.TriggerableLifetimeManager,o="",w={noCreateSelection:o,noMatchesSelection:o,badSelectableValue:o,readOnlyEdits:o},s=FxImpl.getErrorMap(w),k=window.fx.environment.isDevelopmentMode,b=(function(){function t(t,o,p,w,b,k,d){var g=this,tt,nt;this.selectedItems=f();this.activatedItems=f();this.itemsWithChildEdits=f();this.itemsArePinnable=i(!0);this._msPortalFxCurrentCommands=i();this._isDisposed=!1;ko.isObservable(
t)&&typeof t!="object"||(o=t.itemMatchesSelection,p=t.createSelection,w=t.initialState,b=t.supplyCommands,k=t.keepDeselectedItemsActivated,d=t.leaveSelectionOnDeactivation,t=t.items);o&&!p&&s.noCreateSelection();p&&!o&&s.noMatchesSelection();tt=this._lifetime=new y;this._msPortalFxHasCreateSelection=!0;o||p||(o=function(n,t){return n===t},p=function(n){return n},this._msPortalFxHasCreateSelection=!1);nt=function(n,t){return ko.ignoreDependencies((function(){return o(n,t)}))};this.itemMatchesSelection=nt;this.createSelection=p;this._msPortalFxFindDataItem=function(i,r){var u=!(r&&r.length),f=u?nt:function(t,i){var u=p(t);return n.find(r,(function(t){return!n.deepEquals(u[t],i[t])}))===undefined};return t().first((function(n){return f(n,i)}))};this._msPortalFxSupplyCommands=b?function(n){var t=b(n);return g._msPortalFxCurrentCommands(t),t}:undefined;this._msPortalFxDelayedBladeSelection=i();var it,at=this,vt=function(n){return n.data===it},et=function(n){return n.some((function(n){return nt(it,
n)}))},ot=function(){return et(g.activatedItems.peek())},st=function(){return et(g.selectedItems.peek())},yt=function(n){return function(){return at.itemsWithChildEdits().some((function(t){return nt(n,t.item)}))}},ut=e(tt,(function(){for(var u,o,y,h,r=ut?ut.peek():[],c=r.map((function(n,t){return t})),l=[],a=t(),n,f=0,p=a.length;f<p;f++)it=a[f],u=r.firstIndex(vt),u>=0?(n=r[u],c[u]=-1,o=ot(),y=o||st(),n.isActivated(o),n.isSelected(y)):(h=tt.createChildLifetime(),n={data:it,isSelected:i(st()),isActivated:i(ot()),hasChildEdits:e(h,{read:yt(it),write:function(){s.readOnlyEdits()}})},n[v]=h),l.push(n);return c.forEach((function(n){if(n>=0){var t=r[n],i=t&&t[v];i&&i.dispose()}})),l}));this.selectableItems=f(ut());ut.subscribe(tt,(function(n){(g.selectableItems().length!==0||n.length!==0)&&g.selectableItems.splice.apply(g.selectableItems,[0,g.selectableItems().length].concat(n))}));var ft=this.selectableItems(),ht=function(n){var i=g.selectedItems().first((function(t){return nt(n.data,t)})),f=g.activatedItems(
).first((function(t){return nt(n.data,t)})),e=g.selectableItems().indexOf(n)<0,r,u,t;!e&&n.isSelected()?i||(r=function(n){h(n)||g.selectedItems.splice(0,0,n)},f||!g._createDelayedBladeSelection?(u=f||p(n.data),r(u)):(t=g._createDelayedBladeSelection(n.data),t&&t.preventActivation!==!0&&t.selectedValuePromise.then((function(){var t=g._isDisposed||!n.isSelected()||!g.selectableItems().first((function(t){return n===t}));t||r(u)})))):(i&&g.selectedItems.remove(i),k||n.isActivated(!1))},ct=function(n){var u=g.selectedItems().first((function(t){return nt(n.data,t)})),i=g.activatedItems().first((function(t){return nt(n.data,t)})),f=g.selectableItems().indexOf(n)<0,r,t;!f&&n.isActivated()?i||(u||!g._createDelayedBladeSelection?(r=u||p(n.data),h(r)||g.activatedItems.splice(0,0,r)):(t=g._createDelayedBladeSelection(n.data),t&&t.preventActivation!==!0&&g._msPortalFxDelayedBladeSelection(t))):(i&&g.activatedItems.remove(i),d||n.isSelected(!1))},rt,lt=function(){rt&&rt.dispose();rt=tt.createChildLifetime();ft.
forEach((function(n){n.isSelected.subscribe(rt,(function(){ht(n)}));n.isActivated.subscribe(rt,(function(){ct(n)}))}))};this.selectableItems.subscribeArrayEdits(tt,(function(n){n.forEach((function(n){if(u(n.moved)&&!h(n.value))switch(n.status){case r:case l:ht(n.value);ct(n.value)}}));lt()}));lt();this.selectedItems.subscribeArrayEdits(tt,(function(n){n.forEach((function(n){if(u(n.moved))switch(n.status){case r:case l:ft.some((function(t){return nt(t.data,n.value)?(t.isSelected(n.status===r),!0):!1}))}}))}));this.activatedItems.subscribeArrayEdits(tt,(function(n){n.forEach((function(n){if(u(n.moved))switch(n.status){case r:case l:ft.some((function(t){return nt(t.data,n.value)?(t.isActivated(n.status===r),!0):!1}))}}))}));w&&(a(this.selectedItems,c(w.selectedItems)),a(this.activatedItems,c(w.activatedItems)),a(this.itemsWithChildEdits,c(w.itemsWithChildEdits)))}return t.prototype.activateAllSelectedItems=function(){this.activatedItems(this.selectedItems.slice(0))},t.prototype.dispose=function(){this._lifetime&&
(this._lifetime.dispose(),this._lifetime=null);this._isDisposed=!0},t.prototype._setCreateDelayedBladeSelection=function(n){var t=this;this._createDelayedBladeSelection=n;this._msPortalFxCreateSelectionAsync=function(n){var i=t._createDelayedBladeSelection(n);return i?i.selectedValuePromise:Q(null)};this.createSelection=null},t})(),p;t.SelectableSet=b;p=(function(){function n(n){var t=this;n===void 0&&(n={});var o=!1,r=i(n.selectedValue),f=this,h=this._lifetime=new y;f.lock=function(){o=!0};f.setInternalSelectedValue=function(n){r(n)};f.isLocked=function(){return o};this.selectedValue=e(h,{read:function(){return r()},write:function(n){r(n)}});this.isSelected=i(!!n.isSelected);this.isCommandSelected=i(!!n.isCommandSelected);this.hasChildEdits=i(!1);this.isActivated=i(!!n.isActivated);this.isClickable=ko.pureComputed((function(){return!t.isSelected()}));this.value=e(h,{read:function(){return t.isSelected()?t.selectedValue():undefined},write:function(n){u(n)?(t.isSelected(!1),t.isActivated(!1)):
s.badSelectableValue()}})}return n.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},n.prototype.setIsSelected=function(n,t){n&&n.container&&n.container.selectable?this.isSelected(!!n.container.selectable.isSelected):this.isSelected(t)},n.prototype.onClick=function(){this.isSelected(!0)},n})();t.Selectable=p})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function i(n,t,i){return{extension:n,detailBlade:t,detailBladeInputs:i}}function r(n,t,i){return{extension:n,assetType:t,detailBladeInputs:i}}function f(n,t){return n&&t?u.every((function(i){var e=i.name,r=n[e],u=t[e],f;return r&&u?(f=i.value,f?f(r,u):r===u):!r==!u})):!n==!t}t.getBladeSelection=i;t.getAssetSelection=r;var u=[{name:"extension"},{name:"detailBlade"},{name:"assetType"},{name:"resourceId"},{name:"cloudName",value:FxImpl.Extension.isEqualCloudName},{name:"detailBladeInputs",value:n.deepEquals}];t.equalDynamicSelections=f}
)(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n,t,i,r){return{cloudName:n,extension:t,assetType:i,detailBladeInputs:r}}function i(n,t,i,r){return{cloudName:n,extension:t,detailBlade:i,detailBladeInputs:r}}n.getAssetSelection=t;n.getBladeSelection=i})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){t===void 0&&(t={});n.call(this,t);this.delayedBladeSelection=i()}return __extends(t,n),t})(n.ViewModels.Selectable);t.Selectable=r})(i=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t){n._setCreateDelayedBladeSelection(t)}n.setCreateDelayedBladeSelection=t})(t=n.SelectableSet||(n.SelectableSet={}))})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels=
{}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(){function t(n){if(this.controlType=0,n){var t=this._lifetimeManager=n.createChildLifetime();t.registerForDispose(this)}else this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this._disposed=!1}return t.prototype.dispose=function(){var n=this._lifetimeManager;n&&(n.dispose(),this._lifetimeManager=null);this._disposed=!0},Object.defineProperty(t.prototype,"lifetimeManager",{get:function(){return this._lifetimeManager},enumerable:!0,configurable:!0}),t.prototype.populateFromObject=function(n){var r=this,t=n;for(var i in t)t.hasOwnProperty(i)&&t[i]!==undefined&&(r[i]=t[i])},t.prototype._addDisposablesToCleanUp=function(n){this.lifetimeManager.registerForDispose(n)},__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.ViewModel=i})(i=t.Base||(t.Base={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.initObservable,r=ko.observable,u=(function(n){function t(t,u){t&&t.createChildLifetime||(t=undefined,u=arguments[0]);n.call(this,t);u===!1||u===!0?u={loading:r(u)}:(u===null||u===undefined)&&(u={});this.disabled=i(u.disabled,!1);this.loading=i(u.loading,!1)}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=u})(i=t.Loadable||(t.Loadable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.name=null;this.value=i();this.dirty=i()}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.EditableControl||(n.EditableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(
n){var t;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u;t.DefaultDelayValidationTimeout=500;u=(function(n){function t(t){var u=this;n.call(this,t);this.enableValidation=i(!0);this.delayValidationTimeout=i(0);this.validationState=i(0);this.validators=r();this.validationResults=r();this.valid=ko.computed((function(){return!u.enableValidation()||u.validators().length===0||u.enableValidation()&&u.validators().length>0&&(u.validationState()===0||u.validationState()===2)}))}return __extends(t,n),t})(n.EditableControl.ViewModel);t.ViewModel=u})(t=n.ValidatableControl||(n.ValidatableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";t.DefaultValidationDelay=500;var i=(function(n){function i(){n.apply(this,arguments);this.delayValidationTimeout=ko.observable(t.DefaultValidationDelay);this.valueUpdateTrigger=0}return __extends(i,n),i})(n.
ValidatableControl.ViewModel);t.ViewModel=i})(t=n.TypableControl||(n.TypableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var f=ko.observable,i,r,u,e;(function(n){n[n.LeftTop=3]="LeftTop";n[n.RightTop=5]="RightTop";n[n.LeftBottom=10]="LeftBottom";n[n.RightBottom=12]="RightBottom"})(i||(i={}));t.PositioningAlignment=i,(function(n){n[n.BottomRight=0]="BottomRight";n[n.TopRight=1]="TopRight";n[n.BottomLeft=2]="BottomLeft";n[n.TopLeft=3]="TopLeft"})(r||(r={}));t.DropDownPositioning=r,(function(n){n[n.Default=0]="Default";n[n.Full=1]="Full";n[n.MinWidgetMaxContent=2]="MinWidgetMaxContent"})(u||(u={}));t.DropDownWidth=u;e=(function(n){function t(t){n.call(this,t);this.popupAlignment=5;this.inputAlignment=12;this.dropDownPositioning=f(0);this.dropDownWidth=f(1)}return __extends(t,n),t})(n.ValidatableControl.ViewModel);t.ViewModel=e})
(i=t.EditableCombo||(t.EditableCombo={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Forms,i=ko.observable,u,f,e;(function(n){n[n.Top=0]="Top";n[n.Left=1]="Left";n[n.Hidden=2]="Hidden"})(t.LabelPosition||(t.LabelPosition={}));u=t.LabelPosition,(function(n){n[n.Bottom=0]="Bottom";n[n.Right=1]="Right"})(t.SubLabelPosition||(t.SubLabelPosition={}));f=t.SubLabelPosition,(function(t){var u;(function(t){var u=(function(t){function u(u,f){t.call(this,u,f);f=f||{};this.label=n.isNullOrUndefined(f.label)?i():f.label;this.subLabel=f.subLabel;this.labelPosition=n.isNullOrUndefined(f.labelPosition)?i(r.LabelPosition.Top):f.labelPosition;this.subLabelPosition=n.isNullOrUndefined(f.subLabelPosition)?i(r.SubLabelPosition.Bottom):f.subLabelPosition;this.infoBalloonContent=n.isNullOrUndefined(f.infoBalloonContent)?i():f.infoBalloonContent;this.
infoBalloonLinkContent=f.infoBalloonLinkContent||i();this.hideValidationCheck=f.hideValidationCheck||!1}return __extends(u,t),u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(u=t.LabelAndBalloon||(t.LabelAndBalloon={}))})(e=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n,o=f.Base.Diagnostics,c=f.Base.Promises.cancelOnDispose,u=f.isNullOrUndefined,r=ko.observable,e=ko.computed,l=ko.ignoreDependencies,y=window,s=2,h=window.navigator.userAgent,a=!/MSIE /i.test(h)&&/Trident[\/]/i.test(h)&&!/Edge\//i.test(h),v=(function(t){function i(i,f,e,h){var y=this,c=null,l=null,a=null,v;u(f)||f.valid&&f.sections?!u(f)&&f.valid&&f.sections&&(c=f):h=f;typeof e=="string"?l=e:e&&(a=e);e&&h&&h.defaultValue&&o.Log.writeEntry(s,"Forms","Both edit scope and default value are set.  Forms should only specify one of the two.  The default value will be ignored.");
h=h||{};t.call(this,i,h);this._options=h;this._msPortalFxViewModelValueChangesAreClean=!!this._options.viewModelValueChangesAreClean;this._form=c;this.controlType=0;this.enableValidation=r(!1);this.valid=r(!0);this.validate=r(0);this.delayValidationTimeout=r(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout);this.performValidation=r(null);this.ensureValidation=r(0);this.validations=h.validations||ko.observableArray();this.defaultValue=h.defaultValue||r(null);this.initialValue=r(null);this._previousEditScope=null;this.telemetryKeys=h.telemetryKeys;this._msPortalFxWidgetValue=r();this.enabled=r(!this.disabled());this.enabled.subscribe(this.lifetimeManager,(function(n){y.disabled(!n)}));this.disabled.subscribe(this.lifetimeManager,(function(n){y.enabled(!n)}));this.dirty=r(!1);this._originalDirty=this.dirty;u(c)?(v=this.defaultValue(),this.value=r(v),this.initialValue(v),this.enableValidation(!0)):l?this._setEditScopeAccessors(c._createEditScopeAccessorFromPath(l),c):a?this.
_setEditScopeAccessors(a,c):this.value=r(this.defaultValue());this.createValueSubscriptions();this._msPortalFxClearValidation=r();this._msPortalFxTriggerValidation=r();this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){if(u(this._editScopeAccessors))if(n.createdByBaseFormClass)this._editScopeAccessors=n,this._initializeFieldStateObservables();else{o.Log.writeEntry(s,"Forms","Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");throw new Error("Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");}else{o.Log.writeEntry(s,"Forms","Field._setEditScopeAccessors can only be called once.");throw new Error("Field._setEditScopeAccessors can only be called once.");}},i.prototype.clearValidation=function(){var n=this;return l((function(){var t=n._msPortalFxClearValidation(
);return c(n.lifetimeManager,t||Q())}))},i.prototype.triggerValidation=function(){var t=this;return l((function(){var i=t._msPortalFxTriggerValidation,r=i();return c(t.lifetimeManager,r?r:function(){var r=Q.defer(),u=t.lifetimeManager.createChildLifetime();return i.subscribe(u,(function(t){u.dispose();t?Q.fcall(t).then(r.resolve).catch(r.reject):r.reject(new n.Errors.Error("Invalid validating Function detected."))})),r.promise})}))},i.prototype._initializeFieldStateObservables=function(){var n=this,t,o,s,i=this._editScopeAccessors,r=this.lifetimeManager;this.initialValue=e(r,{read:function(){t&&t.dispose();t=r.createChildLifetime();var u=i.getOriginalObservable(t);return u?u():n.defaultValue()},write:function(n){i.getOriginalObservable(t)(n)}});this.value=e(r,{read:function(){var t,f;return o&&o.dispose(),o=r.createChildLifetime(),t=i.getEditableObservable(o),n._form&&(f=n._form.editScope(),n._previousEditScope!==f&&(n.enableValidation(!1),n._previousEditScope=f)),u(t)?n.defaultValue.peek():
t()},write:function(n){s&&s.dispose();s=r.createChildLifetime();var t=i.getEditableObservable(s);if(t)t(n);else if(!(a&&!n))throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.createValueSubscriptions();this._dirtyComputed=e(this.lifetimeManager,(function(){n.setDirty(!f.deepEquals(n.value(),n.initialValue()))}));this._enableValidationReactor=e(r,(function(){n._form&&n._form.editScope();n.enableValidation(!!(i.getOriginalObservable(t)&&i.getEditableObservable(o)))}))},i.prototype.createValueSubscriptions=function(){var t=this,r=!1,i=!1,u=this.value;Q.nextTick((function(){var i=t.value;i!==u&&t.lifetimeManager&&(n.disposeDisposable(t._newThisValueBinding),t._newThisValueBinding=i.subscribeAndRun(t.lifetimeManager,u))}));this._msPortalFxWidgetValue(this.value());this.value.subscribe(this.lifetimeManager,(function(n){i?t._msPortalFxViewModelValueChangesAreClean&&i&&t.setDirty(!0):(r=!0,t._msPortalFxWidgetValue(n),r=!1,t._form&&t._form.viewModelValueChangesSetDefaultValues&&
t.initialValue(n))}));this._msPortalFxWidgetValue.subscribe(this.lifetimeManager,(function(n){if(!r){if(i=!0,ko.isComputed(t.value)&&t.value()===n){if(!t._form)try{t.value(n)}catch(u){}}else t.value(n);i=!1}}))},i.prototype.setDirty=function(n){this.dirty===this._originalDirty&&this.dirty(n)},i})(t.LabelAndBalloon.ViewModel);i.ViewModel=v})(i=t.Input||(t.Input={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){var f=this;n.call(this,t,i,r,u);this.empty=ko.computed((function(){return!f.value()}))}return __extends(t,n),t.prototype.dispose=function(){this.empty&&this.empty.dispose();n.prototype.dispose.call(this)},t})(n.Input.ViewModel);t.ViewModel=i})(t=n.Nullable||(n.Nullable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.emptyValueText=this._options.emptyValueText||i("");this.editing=i(!1)}return __extends(t,n),t})(n.Nullable.ViewModel);t.ViewModel=r})(t=n.Editable||(n.Editable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.valueUpdateTrigger=this._options.valueUpdateTrigger||0;this.delayValidationTimeout=this._options.delayValidationTimeout||i(500)}return __extends(t,n),t})(n.Editable.ViewModel);t.ViewModel=r})(t=n.Typable||(n.Typable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n)
{var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n.ViewModels.Controls.Forms.EditableCombo,r=ko.observable,u=(function(n){function t(t,i,u,f){n.call(this,t,i,u,f);this.dropDownWidth=r(1);this.popupAlignment=3;this.inputAlignment=10;this.showValidationMessagesBelowControl=!!(f&&f.showValidationMessagesBelowControl||i&&i.showValidationMessagesBelowControl)}return __extends(t,n),t})(t.Editable.ViewModel);i.ViewModel=u})(i=t.EditableComboBox||(t.EditableComboBox={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(t,u,e){e===void 0&&(e=".");var s,h,o;try{for(u=u.replace(/\[/g,e).replace(/\]/g,""),u=u.charAt(0)===e?u.substr(1):u,s=u.split(e),o=i.unwrap(t)[s[0]],h=1;h<s.length;h++)o=i.unwrap(o)[s[h]]}catch(c){r.invalidPath()}return(n.isNullOrUndefined(o)||!ko.isObservable(o))&&(f.writeEntry(
2,"MsPortalFx.ViewModels.Forms.EditScopeAccessors.InvalidObservablePath","'observablePath' does not identify a non-null observable (observablePath: "+u+")."),r.observablePathInvalid()),o}var f=n.Base.Diagnostics.Log,i=ko,h=window,l=h.fx.environment.isDevelopmentMode,u="",c={invalidPath:u,observablePathInvalid:u,setOnce:u,editScopeNotSet:u,obsMissing:u},r=FxImpl.getErrorMap(c),e,s;(function(n){n[n.Original=0]="Original";n[n.Editable=1]="Editable"})(t.EditScopeObservableType||(t.EditScopeObservableType={}));e=t.EditScopeObservableType;s=(function(){function t(n,t,r){var u=this;this.sections=i.observableArray();this.viewModelValueChangesSetDefaultValues=!1;t&&(this.editScope=t);this._getNestedData=r;n.registerForDispose(this);this._lifetimeManager=n.createChildLifetime();this.valid=i.computed((function(){return!u.sections().some((function(n){return!n.valid()}))}));this._lifetimeManager.registerForDispose(this.valid);this.createFieldValueAccessor=function(n){var i,t;return typeof n=="string"?(i=
n,t=function(n){return o(n,i)}):t=n,this.createCustomEditScopeAccessor(t)}}return Object.defineProperty(t.prototype,"editScope",{get:function(){return this._editScope||r.editScopeNotSet(),this._editScope},set:function(n){this._editScope&&r.setOnce();this._editScope=n},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._lifetimeManager&&(this._lifetimeManager.dispose(),this._lifetimeManager=null)},t.prototype._createEditScopeAccessorFromPath=function(n){var t=function(t){return o(t,n)};return this._createEditScopeAccessorFromAccessorFunction(t,!0)},t.prototype.createEditScopeAccessor=function(n){var t,i,r,u;return n.writeToEditScope?(r=n,u=this._sanitizeAccessorOptions(r),this._createEditScopeAccessorFromOptions(u)):(t=n,i=this._sanitizeAccessorFunction(t),this._createEditScopeAccessorFromAccessorFunction(i,!0))},t.prototype.createCustomEditScopeAccessor=function(n){var t,i;return n.writeToEditScope?(i=n,this._createEditScopeAccessorFromOptions(i)):(t=n,this._createEditScopeAccessorFromAccessorFunction(
t,!1))},t.prototype._sanitizeAccessorFunction=function(n){return this._sanitizeAccessorLambda(n)},t.prototype._sanitizeAccessorOptions=function(n){return{readFromEditScope:this._sanitizeAccessorLambda(n.readFromEditScope),writeToEditScope:this._sanitizeAccessorLambda(n.writeToEditScope)}},t.prototype._sanitizeAccessorLambda=function(n){return n},t._logEditScopeAccessorError=function(n){f.writeEntry(2,"EditScopeAccessor",n)},t.prototype._createEditScopeAccessorFromAccessorFunction=function(n,t){var i=this;return{getOriginalObservable:function(t){var u=i.editScope(),o,s,h;return u&&(s=u.getOriginal(u.root),h=i._getNestedData?i._getNestedData(s):s,o=n(h,t,e.Original),o||(f.writeEntry(2,_formsArea.format(_original),_obsMissingMessage.format(_original)),r.obsMissing(_original))),o},getEditableObservable:function(t){var s=i.editScope(),u,o,h;return s&&(o=s.root,h=i._getNestedData?i._getNestedData(o):o,u=n(h,t,e.Editable),u||(f.writeEntry(2,_formsArea.format(_editable),_obsMissingMessage.format(
_editable)),r.obsMissing(_editable))),u},createdByBaseFormClass:!0,returnsObservablesFromEditScope:t}},t.prototype._createEditScopeAccessorFromOptions=function(n){var t=this;return{getOriginalObservable:function(r){if(!t.editScope())return null;var u=i.computed((function(){return n.readFromEditScope(t.editScope().getOriginal(t.editScope().root))}));return r.registerForDispose(u),u},getEditableObservable:function(r){if(!t.editScope())return null;var u=i.computed({read:function(){return n.readFromEditScope(t.editScope().root)},write:function(i){n.writeToEditScope(t.editScope().root,i)}});return r.registerForDispose(u),u},createdByBaseFormClass:!0,returnsObservablesFromEditScope:!1}},__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.ViewModel=s})(i=t.Form||(t.Form={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.observableArray,
f=(function(n){function t(t,i,f,e){n.call(this,t,i,f,e);this.groups=this._options.groups||u();this.groups().length===0||this.groups()[0].options().length===0||r.isNullOrUndefined(this.defaultValue())&&this.defaultValue(this.groups()[0].options()[0].value)}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=f})(i=t.Groups||(t.Groups={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observableArray,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.options=this._options.options||i()}return __extends(t,n),t})(n.Input.ViewModel);t.ViewModel=r})(t=n.Options||(n.Options={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n,r=
ko.observable,f=(function(n){function t(t,i,f,e){var o=e||{};u.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(o=i);n.call(this,t,i,f,e);this.min=o.min||r(0);this.max=o.max||r(10);this.step=o.step||r(1);this.showStepMarkers=o.showStepMarkers||r(!0)}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=f})(i=t.Slider||(t.Slider={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=ko.observableArray,r=n.initObservable,e=(function(){function n(n,t,i,u){this.text=r(n);this.value=r(t);this.selected=r(i,!1);this.disabled=r(u,!1)}return n})(),u;i.ItemValue=e;u=(function(n){function t(){n.apply(this,arguments);this.label=null;this.values=f()}return __extends(t,n),t})(t.ValidatableControl.ViewModel);i.ViewModel=u})(i=t.ItemList||(t.ItemList={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||
(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f=ko.pureComputed,o=f((function(){return!0})),r,e,u;(function(n){n[n.None=0]="None";n[n.Pending=1]="Pending";n[n.Success=2]="Success";n[n.Failure=3]="Failure"})(t.Status||(t.Status={}));r=t.Status;e=(function(n){function t(t,u,f,e){n.call(this,t);this.text=i(u||"");this.visible=i(!0);this.afterExecute=null;this.status=i(r.None);this.error=i(null);this.handler=i(null);this.attach(f,e)}return __extends(t,n),t.prototype.execute=function(){var o=this,u=!1,n,f=this.error,t=this.status,i,e;try{if(f(null),t(r.Pending),i=this.handler(),!i)throw new Error("Command does not have handler.");e=i.execute();n=Q(e).then((function(){u=!0}))}catch(s){n=Q.reject(s)}return n.finally((function(n){u?t(r.Success):(f(n),t(r.Failure));var i=o.afterExecute;i&&i()}))},t.prototype.attach=function(n,t){if(n){var i=new u(n,t);this.attachHandler(i)}},t.prototype.attachHandler=function(n){this.handler(n)},
t.prototype.detach=function(){this.handler(null)},t})(n.Loadable.ViewModel);t.ViewModel=e;u=(function(){function n(n,t,i){this.execute=i?n.bind(i):n;this.canExecute=t?f(t,i):o}return n})();t.DelegatingHandler=u})(t=n.Command||(n.Command={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n,e=n.ViewModels,o=e.Controls,s=n.isNullOrWhiteSpace,r=ko,c=f.Resources.Strings,u=c.DeleteAssetConfirmation,l=f.disposeDisposable,a=(function(n){function t(t,i){var l=this,v,e,a;if(n.call(this,t),this.selectedItems=r.observableArray(),this._gridItems=null,this._options=null,this._assetName=r.observable(),this._assetTypeDisplayName=r.observable(),this.affectedItemsLabel=r.observable(u.affectedItemsLabel),this.controlType=76,this._options=i,v=this.lifetimeManager,this._assetTypeDisplayName(i.assetTypeDisplayName),e=i.grid,e){var y=e.selectableRowExtensionOptions,p=y?o.Lists.
Grid.Extensions.SelectableRow:null,c=this.grid=new o.Lists.Grid.ViewModel(v,e.items,p,y);c.columns=e.columns;c.noRowsMessage=e.noRowsMessage;c.showHeader=f.isNullOrUndefined(e.showHeader)?!0:e.showHeader;y&&(this.selectedItems=c.selectableData.selectedItems);this._gridItems=c.items}a=this._assetName;this._addDisposablesToCleanUp([this.grid,this.confirmationEditor=new h(v,a),this.warning=r.computed((function(){return l._onUpdateWarningText(a())})),this.confirmationLabel=r.computed((function(){return l._onUpdateConfirmationLabel(l._assetTypeDisplayName())})),this.valid=r.computed((function(){var n=a(),t=l.confirmationEditor.textBox.valid();return s(n)?!1:t})),])}return __extends(t,n),t.prototype._onUpdateWarningText=function(n){return u.warningText.format(n)},t.prototype._onUpdateConfirmationLabel=function(n){return u.confirmationLabel.format(n)},t.prototype._selectAll=function(){var n=this.grid&&this.grid.selectableData;n&&n.selectableItems().forEach((function(n){return n.isSelected(!0)}))},t})(
t.Loadable.ViewModel),h;i.ViewModel=a;h=(function(){function n(n,t){var i=this.textBox=new e.Forms.TextBox.ViewModel(n);i.disabled(!0);i.valueUpdateTrigger=4;this._disposables=[i,r.computed((function(){var n=t();s(n)?(i.disabled(!0),i.validations([])):(i.disabled(!1),i.validations([new e.EqualsValidation(n,u.assetNameValidationFailureMessage.format(n))]),i.value(""))})),]}return n.prototype.dispose=function(){l(this._disposables)},n})()})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.galleryItem=i();this.bladeSelection=i();this.bannerClicked=i();this.createClicked=i();this.controlType=77;this.cloudName=FxImpl.Extension.selfCloudName}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.HeroBanner||(n.HeroBanner={}))}
)(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t){n.call(this,t);this.disabled=ko.observable(!1);this.controlType=84}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.BaseViewModel=i})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=n.ViewModels.Controls.HotSpot.BaseViewModel,u=(function(n){function i(i){n.call(this,i);this.selectable=t.Part.createSelectableViewModel();this.clickableDuringCustomize=!1}return __extends(i,n),i})(r);i.ViewModel=u})(r=i.HotSpot||(i.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";
var i=ko.observable,r=(function(n){function t(t,r){n.call(this,t);this.controlType=88;this.clickableLink=r?r.clickableLink:i()}return __extends(t,n),t})(n.ViewModels.Controls.HotSpot.BaseViewModel);t.LinkViewModel=r})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Small=0]="Small";n[n.Normal=1]="Normal"})(t.Size||(t.Size={}));r=t.Size;u=(function(n){function t(t,u){n.call(this,t,!1);this.image=u?u.image:i();this.text=u?u.text:i();this.size=u&&u.size?u.size:i(r.Normal)}return __extends(t,n),t})(n.Loadable.ViewModel);t.BaseViewModel=u})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t){var i=this;t===
void 0&&(t={});n.call(this,t);this.isClickable&&this.isClickable.dispose();this.isClickable=ko.pureComputed((function(){return i.isSelected()&&!!i.selectedValue()}))}return __extends(t,n),t})(n.ViewModels.Selectable),r=(function(n){function t(t,r,u,f){n.call(this,t,f);this.controlType=78;this.selectable=new i({isSelected:r&&r.isSelected})}return __extends(t,n),t})(t.BaseViewModel);t.ViewModel=r})(i=t.InfoBox||(t.InfoBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r){n.call(this,i,r);this.controlType=87;this.clickableLink=r?r.clickableLink:t()}return __extends(i,n),i})(n.BaseViewModel);n.LinkViewModel=i})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";
var i=ko.observable,r,u;(function(n){n[n.Default=0]="Default";n[n.ComingSoon=1]="ComingSoon";n[n.NoSubscription=2]="NoSubscription";n[n.Unauthorized=3]="Unauthorized"})(r||(r={}));t.ImageType=r;u=(function(n){function t(t){n.call(this,t);this.header=i("");this.title=i("");this.description=i("");this.callToActionText=i("");this.callToActionUri=i("");this.callToSecondaryActionText=i("");this.callToSecondaryActionUri=i("");this.imageType=i(0);this.controlType=79}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=u})(t=n.Notice||(n.Notice={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var v=n.Base,r=ko.observable,c=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/ViewModels.Wizard"),l=ko.observableArray,a,e,u,f,o,s,h;(function(n){n[n.Sequential=0]="Sequential";n[n.NonSequential=1]="NonSequential"})(i.WizardMode||(i.WizardMode={}));e=i.
WizardMode,(function(n){n[n.Form=0]="Form";n[n.Selector=1]="Selector"})(i.StepType||(i.StepType={}));u=i.StepType;f=(function(){function t(t,i,f,e,o){this.description=r("");this.iconUri=r();this.status=r();this.stepId=t;this.stepType=n.isNullOrUndefined(i)?u.Form:i;this.title=r(f);this.formBlade=e;this.extension=o}return t})();i.WizardStepBase=f;o=(function(t){function i(i,u){var f,o;i&&i.createChildLifetime||(a&&(f=new n.Errors.Error("MsPortalFx.ViewModels.Controls.Wizard.ViewModel's constructor first argument must be lifetimeManager."),c.error(f)),i=undefined,u=arguments[0]);t.call(this,i);this.controlType=107;this.mode=e.Sequential;this.steps=l();this.selection=r();o=this.savedState=r();this.currentState=r();this.stepOutput=r();this.beginExecuteCommand=r();this._autoOpenFirstStep=!1;u&&u.currentState!==undefined?o(u.currentState):this._autoOpenFirstStep=!0}return __extends(i,t),i.prototype.initialize=function(){this._autoOpenFirstStep&&(this.savedState({stepStatuses:[]}),this._autoOpenFirstStep=
!1)},i})(t.Loadable.ViewModel);i.ViewModel=o;s=(function(n){function t(t,i,r,f,e,o){n.call(this,t,u.Form,i,r,o);this.status(f);this.isOptional=!!e}return __extends(t,n),t})(f);i.WizardStep=s;h=(function(n){function t(t,i,f,e){n.call(this,t,u.Selector,i,f,e);this.value=r();this.defaultValue=r();this.displayText=r("");this.locked=r(!1);this.infoBalloonText=r("");this.lockedBalloonText=r("")}return __extends(t,n),t})(f);i.SelectorStep=h})(i=t.Wizard||(t.Wizard={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f,e,r,u,o;(function(n){n[n.Top=0]="Top";n[n.Right=1]="Right";n[n.Bottom=2]="Bottom";n[n.Left=3]="Left"})(t.Position||(t.Position={}));f=t.Position;e=(function(){function n(n,t){this.linkText=n||"";this.linkUri=t||""}return n})();t.Link=e;r=(function(){function n(n,t){this.preferred=n||0;this.alternate=t||0}return n})();t.Offset=r;u=(function(
){function n(n,t,i,r){this.top=n||0;this.left=t||0;this.width=i||0;this.height=r||0}return n})();t.Box=u;o=(function(n){function t(t){n.call(this,t);this.visible=i(!1);this.box=i(new u);this.content=i("");this.link=i();this.position=i(f.Top);this.horizontalOffset=new r;this.verticalOffset=new r;this.appendTo="body";this.closeOtherBalloons=!1}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=o})(t=n.Balloon||(n.Balloon={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,f,u;(function(n){n[n.Normal=0]="Normal";n[n.Emphasized=1]="Emphasized";n[n.Strong=2]="Strong"})(i.Emphasis||(i.Emphasis={}));f=i.Emphasis;u=(function(t){function i(i){t.call(this,i);this.max=r(2e5);this.wrap=r(!0);this.click=$.noop;this.clear=new n.ViewModels.Controls.Command.ViewModel(i,"");this.scrollbars=!0;this.write=r().extend({notify:"always"});this.writeLine=
r().extend({notify:"always"});this.writeText=r().extend({notify:"always"});this.writeTextLine=r().extend({notify:"always"});this.writeTextArray=r().extend({notify:"always"})}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.TextStream||(t.TextStream={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;(function(n){n[n.Text=0]="Text";n[n.Information=1]="Information";n[n.Success=2]="Success";n[n.Warning=3]="Warning";n[n.Error=4]="Error"})(t.LogItemType||(t.LogItemType={}));f=t.LogItemType;r=(function(n){function t(t){n.call(this,t);this.controlType=58;this.paused=i(!1);this.filters=u();var r=this.log=i(),f=this.logItem=i(),e=this.logItems=i();r.extend({notify:"always"});f.extend({notify:"always"});e.extend({notify:"always"})}return __extends(t,n),t})(n.TextStream.ViewModel);t.ViewModel=r})(t=n.LogStream||
(n.LogStream={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(t){function i(i){var f=this;t.call(this,i);this.controlType=75;this.isReady=r(!1);this.prompt=r("> ");this.clear=new n.ViewModels.Controls.Command.ViewModel(i);this.command=r("");this.text=r("");this.info=r("");this.success=r("");this.warning=r("");this.error=r("");this.command.extend({notify:"always"});this.text.extend({notify:"always"});this.info.extend({notify:"always"});this.success.extend({notify:"always"});this.warning.extend({notify:"always"});this.error.extend({notify:"always"});var u=i.createChildLifetime(),e=[];["command","text","info","success","warning","error"].forEach((function(n){f[n].subscribe(u,(function(t){e.push({type:n,data:t})}))}));this.isReady.subscribe(u,(function(){u.dispose();e.forEach((function(n){f[n.type](n.data)}))}))}return __extends(i,
t),i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.Console||(t.Console={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var u=n,r=ko.observable,e,o,f;(function(n){n[n.TextBackground=1]="TextBackground";n[n.Text=2]="Text";n[n.Debug=3]="Debug";n[n.Informational=4]="Informational";n[n.Warning=5]="Warning";n[n.Error=6]="Error";n[n.Black=101]="Black";n[n.DarkBlue=102]="DarkBlue";n[n.Blue=103]="Blue";n[n.Green=104]="Green";n[n.Cyan=105]="Cyan";n[n.DarkGreen=106]="DarkGreen";n[n.DarkCyan=107]="DarkCyan";n[n.Gray=108]="Gray";n[n.DarkRed=109]="DarkRed";n[n.DarkMagenta=110]="DarkMagenta";n[n.DarkYellow=111]="DarkYellow";n[n.DarkGray=112]="DarkGray";n[n.Red=113]="Red";n[n.Magenta=114]="Magenta";n[n.Yellow=115]="Yellow";n[n.White=116]="White";n[n.LightSteelBlue=201]="LightSteelBlue";n[n.LightCyan=202]="LightCyan";n[n.Violet=203]="Violet";n[n.Moccasin=
204]="Moccasin";n[n.PaleGreen=205]="PaleGreen";n[n.Bisque=206]="Bisque";n[n.LightGray=207]="LightGray";n[n.PaleVioletRed=208]="PaleVioletRed";n[n.DarkSeaGreen=209]="DarkSeaGreen";n[n.OrangeRed=210]="OrangeRed";n[n.DarkOrange=211]="DarkOrange";n[n.WhiteSmoke=212]="WhiteSmoke";n[n.PowerShellBackground=213]="PowerShellBackground"})(i.Color||(i.Color={}));e=i.Color,(function(n){n[n.Enter=1]="Enter";n[n.Tab=2]="Tab";n[n.ShiftTab=3]="ShiftTab";n[n.Cancel=4]="Cancel"})(i.CommandMode||(i.CommandMode={}));o=i.CommandMode;f=(function(n){function t(t,i){n.call(this,t);this.controlType=90;u.isNullOrUndefined(i)&&(i={});this.command=i.command||r();this.write=i.write||r(null);this.progress=i.progress||r(null);this.prompt=i.prompt||r({text:"> "});this.input=i.input||r({text:"",position:0});this.maxLines=i.maxLines||r(200);this.colorPalette=i.colorPalette;this.clear=i.clear||new u.ViewModels.Controls.Command.ViewModel(t)}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=f})(r=i.ConsoleV2||(i.ConsoleV2=
{}))})(i=t.Unsupported||(t.Unsupported={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Auto=1]="Auto";n[n.Yes=2]="Yes";n[n.No=3]="No"})(t.Scroll||(t.Scroll={}));r=t.Scroll;u=(function(n){function t(t,u){n.call(this,t);this.controlType=108;this.src=u.src;this.scrolling=u.scrolling||r.Auto;this.postMessage=u.postMessage||i("Initialized");this.receiveMessage=u.receiveMessage||i()}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=u})(i=t.IFrame||(t.IFrame={}))})(t=n.Internal||(n.Internal={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r){n.call(this,t);this.controlIsReady=i(!1);this.controlType=
113;this.src=r.src;this.postMessage=r.postMessage||i();this.receiveMessage=r.receiveMessage||i()}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=r})(i=t.IFrameV2||(t.IFrameV2={}))})(t=n.Internal||(n.Internal={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var s=n.ViewModels,u=s.Controls.Command.ViewModel,r=ko.observable,h=ko.observableArray,f,c,e,o;(function(n){n[n.NotLoading=0]="NotLoading";n[n.Loading=1]="Loading";n[n.Failed=2]="Failed"})(i.QueryLoadingStatus||(i.QueryLoadingStatus={}));f=i.QueryLoadingStatus,(function(n){n[n.Operator=0]="Operator";n[n.Operand=1]="Operand"})(i.CallbackMethodType||(i.CallbackMethodType={}));c=i.CallbackMethodType;e=(function(){function n(){}return Object.defineProperty(n,"Group",{get:function(){return"group"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Predicate",{get:function(){
return"predicate"},enumerable:!0,configurable:!0}),n})();i.QueryExpressionType=e;o=(function(n){function t(t,i){t&&t.createChildLifetime||(t=undefined,i=arguments[0]);n.call(this,t);this.controlType=31;this.schema=r(i);this.title=r("");this.query=r(null);this.queryViewModel=r();this.savedQuery=r(null);this.callback=null;this.showHeader=r(!0);this.showFooter=r(!0);this.add=new u(t);this.insert=new u(t);this.remove=new u(t);this.group=new u(t);this.ungroup=new u(t);this.save=new u(t);this.queryLoading=r({status:f.NotLoading});this._msPortalFxOperandControls=h()}return __extends(t,n),t})(t.Loadable.ViewModel);i.ViewModel=o})(r=i.QueryBuilder||(i.QueryBuilder={}))})(i=t.Data||(t.Data={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u,f;(function(n){n[n.Info=0]="Info";n[n.Validation=2]="Validation"})(i.Type||(i.Type={}));u=i.Type;f=(function(
t){function i(i){t.call(this,i);this.type=u.Info;this.position=r(n.ViewModels.Controls.Balloon.Position.Top);this.content=r("");this.link=r();this.balloonVisible=r(!1);this.stopClickPropagation=r(!0);this.controlType=32}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=f})(i=t.DockedBalloon||(t.DockedBalloon={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){u.push(n)}function s(){return u}var i=n.ViewModels.Controls.Command.Status,r=ko.observable,e,f,u;(function(n){n[n.None=0]="None"})(t.Extensions||(t.Extensions={}));e=t.Extensions;f=(function(){function t(n){this.handler=r(n);this.status=r(i.None);this.error=r(null);this.errorMessage=r(null)}return t.prototype.execute=function(t){var r=n.Helpers.Deferred(),s=this.handler(),e=this.status,o=this.error,u=this.errorMessage,f;return e(i.Pending),o(null),u(null),s?
s(t).then((function(n){e(i.Success);r.resolve(n)}),(function(n){e(i.Failure);o(n);n&&(n.message?u(n.message):n.toString&&u(n.toString()));r.reject(n)})):(f=new Error("Command is not available for execution."),r.reject(f),o(f),u(f.message)),r.promise()},t})();t.ExtensionCommand=f;u=[];t.registerExtensionSetup=o;t.getExtensionSetups=s})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.Documents.Editor.ExtensionCommand,i=ko.observable,f=ko.observableArray,e=(function(){function n(n,t,u){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.parentId=i(-1);this.threadId=i(-1);this.author=i(u);this.content=i(t||"");this.canDelete=i(!1);this.isEditable=i(!1);this.save=new r}return n})(),u;t.DiscussionCommentViewModel=e;u=(function(){function n(
n,t){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.comments=f(t);this.save=new r;this.addComment=new r;this.deleteComment=new r}return n})();t.DiscussionThreadViewModel=u})(i=t.DiscussionThread||(t.DiscussionThread={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.Helpers,s=ko.observable,o=r.resolve(),u,f,e;(function(n){n[n.Discussion=1]="Discussion"})(i.Extensions||(i.Extensions={}));u=i.Extensions;f=(function(n){function t(t,i,r){n.call(this,t,i);this.position=s(r)}return __extends(t,n),t})(n.ViewModels.Controls.Documents.DiscussionThread.DiscussionThreadViewModel);i.EditorThreadViewModel=f;e=(function(){function i(n){var t=this;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this.options=n;this._attachAddThreadHandler();n.threads.subscribeArrayAdds(
this._lifetimeManager,(function(n){t._addThreadHandlers(n)}));n.threads().forEach((function(n){t._addThreadHandlers(n)}))}return i.prototype.dispose=function(){this.options=null;this._lifetimeManager.dispose()},i.prototype._attachAddThreadHandler=function(){var i=this.options,r;i.addThread||(i.addThread=new n.ViewModels.Controls.Documents.Editor.ExtensionCommand);r=function(n){var r,u;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.author()),r.canDelete(!0),r.isEditable(!0),u=new f(-(new Date).getTime(),[r],n),i.threads.push(u),o};i.addThread.handler(r)},i.prototype._addThreadHandlers=function(n){var t=this;this._attachSaveThreadHandler(n);this._attachAddCommentHandler(n);this._attachDeleteCommentHandler(n);n.comments().forEach((function(n){t._attachSaveCommentHandler(n)}))},i.prototype._attachSaveThreadHandler=function(n){var t=this,i=function(i){var u=t.options,f;return u.saveThread&&(f=u.saveThread(i,n,u.containerName),f)?f:r.reject("No save handler found.")};n.save.handler(
i)},i.prototype._attachAddCommentHandler=function(n){var i=this,r=function(){var r;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.options.author()),r.canDelete(!0),r.isEditable(!0),r.threadId(n.id()),i._attachSaveCommentHandler(r),n.comments.push(r),o};n.addComment.handler(r)},i.prototype._attachDeleteCommentHandler=function(n){var t=this,i=function(i){var u,f=n.comments().first((function(n){return n.id()===i})),e=t.options;return f&&e.deleteComment&&(u=e.deleteComment(n.id(),i),u)?u.then((function(){n.comments.remove(f)})):r.reject("No save handler found.")};n.deleteComment.handler(i)},i.prototype._attachSaveCommentHandler=function(n){var t=this,i=function(i){var f=t.options,u;return f.saveComment&&(u=f.saveComment(i,n),u)?u:r.reject("No save handler found.")};n.save.handler(i)},i})();i.DiscussionCommandHandler=e;i.registerExtensionSetup((function(n,t){var i;return(n&u.Discussion)!==u.None&&!!t.discussion?(i=new e(t.discussion),[i]):null}))})(i=t.Editor||(t.Editor={}))})(
i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAH5SURBVDhPpVJNaxNRFD3vzbyZaRqbtIGEkBYXVpeK0m6sdCWIv0JEUBctBcGFf0Nw41bBbYu4Utx0U1ChihWFQgraNqTVmKT5mpnM8943MxHswq8zDO/j3nvuufddsfS0pvEfkMn6zzhGoElPGGn0gggdP/55Hww12Y6LFbfXatomGjYGQ6AfRjiZVzhXdlHK2hgj4347wPsDHx/rPpQl4FoUKERMcGt1TytLYhBqTE/YuDGXR4VWxrfuEJ4SyKhY6Fc6P3z1HdVGACchMRaf5M3kbdxZmBwFMx69bWF9p5ucgELGwsrFSZyaUhQT3xmCfqBxcy6HLGsjpLXapNKSsdQouWM11y/kjGL2M+nYpZRVvEWrP8T9jQYOSS437tOhj9UPbcxPe7h2Pm98itSbhDcm0EJjvxWiTPJPeBJ3LxXgUPoHRDRbcHDl9DiRRSaAUWuHSE+mBEXNeFntmAtBn0vBnMDIpI/3DjU6xZN3LTgkYdREz5F4sd3F6y8945Di8mwGZ4uu2XcGEd7s9rD8rIat+sC8DsM8o20KEri3OIVKTuH59hG61FiPZmBA0g86ET43fexSmRZl5VlIYQi40xOuxNUzWTzebKJH0lMfXqSU4FHggUsHKMVokPiReITZHCv6M/zsDL8pxf1NMEMm82Gk/Srv9wB+ALD6wSjYZ9JHAAAAAElFTkSuQmCC",
e,u;(function(n){n[n.None=0]="None";n[n.Add=1]="Add";n[n.Delete=2]="Delete";n[n.Edit=3]="Edit"})(t.DiffBlockChangeType||(t.DiffBlockChangeType={}));e=t.DiffBlockChangeType;u=(function(t){function u(i,f,e){i&&i.createChildLifetime||(i=undefined,f=arguments[0],e=arguments[1]);t.call(this,i);this.controlType=35;this.blocks=r(f);this.discussionOptions=e?e:u.getDefaultDiscussionOptions();this.lifetimeManager.registerForDispose(new n.ViewModels.Controls.Documents.Editor.DiscussionCommandHandler(this.discussionOptions))}return __extends(u,t),u.getDefaultDiscussionOptions=function(){var n=i({id:i("0"),displayName:i("me"),image:i("")});return{enabled:i(!0),addIcon:i(f),addIconOnLeft:i(!0),threads:r(),author:n}},u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.DiffView||(t.DiffView={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(
t){var i;(function(t){"use strict";var c=n.ViewModels,r=c.Controls,f=n.Helpers,e=r.Documents.DiffView,o=r.Documents.Editor,i=ko.observable,u=ko.observableArray,l=15,s,h;(function(n){n[n.Name=0]="Name";n[n.Path=1]="Path";n[n.Type=2]="Type"})(t.DiffListGroupBy||(t.DiffListGroupBy={}));s=t.DiffListGroupBy;h=(function(n){function t(t,r,f,o,h,c){t&&t.createChildLifetime||(t=undefined,r=arguments[0],f=arguments[1],o=arguments[2],h=arguments[3],c=arguments[4]);n.call(this,t);this.controlType=34;r=r||[];this.items=u(r);this.fetchDiff=f;this.groupBy=i(o||s.Name);this.expandLimit=i(h||l);this.expandAll=i(r.length<=this.expandLimit());this.filterPath=i("");this.diffViewModels=u();this.discussionOptions=c?c:e.ViewModel.getDefaultDiscussionOptions();this._ensureFetchCommand();this._ensureItemClickCommand()}return __extends(t,n),t.prototype._ensureFetchCommand=function(){var n=this,i=function(t){var i;return n.fetchDiff&&(i=n.fetchDiff(t.name(),t.path()),i)?i.then((function(i){return i.blocks?(n.diffViewModels.
push(n._createDiffViewModel(n.lifetimeManager,t.path()+t.name(),i.blocks,i.threads)),null):i})):f.reject("No fetch handler found.")},t=function(n){n.fetch||(n.fetch=new o.ExtensionCommand(i))};this.items().forEach((function(n){t(n)}));this.items.subscribeArrayAdds(this.lifetimeManager,(function(n){t(n)}))},t.prototype._ensureItemClickCommand=function(){var n=this,t=function(t){return n.itemClick&&n.itemClick(t.name(),t.path()),f.resolve()};this.click=new o.ExtensionCommand(t)},t.prototype._createDiffViewModel=function(n,t,i,r){var f=this.discussionOptions,o={containerName:t,author:f.author,addIcon:f.addIcon,enabled:f.enabled,addIconOnLeft:f.addIconOnLeft,saveThread:f.saveThread,saveComment:f.saveComment,deleteComment:f.deleteComment,threads:u(r||[])};return new e.ViewModel(n,i,o)},t})(r.Loadable.ViewModel);t.ViewModel=h})(i=t.DiffList||(t.DiffList={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(
n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,e=n.ViewModels.Controls.Documents,u=(function(n){function t(t,i,u,f,e,o){n.call(this,t,i,u);this.itemName=r(f||null);this.itemPath=r(e||null);this.isSystemMessage=r(o===!0)}return __extends(t,n),t})(e.Editor.EditorThreadViewModel),f;i.TimelineThreadViewModel=u;f=(function(i){function f(t,u,f,e,o){t&&t.createChildLifetime||(t=undefined,u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3]);i.call(this,t);this.controlType=36;this.discussionOptions=u;this.sortChronologically=r(f!==!1);this.showSystemMessages=r(e!==!1);this.groupFormat=r(o||"M");this.lifetimeManager.registerForDispose(new n.ViewModels.Controls.Documents.Editor.DiscussionCommandHandler(this.discussionOptions));this._ensureItemClickCommand()}return __extends(f,i),f.prototype.addNewThread=function(){var i=this.discussionOptions,f=i.threads().first((function(n){return n.id()<0})),n,r;f||(n=new t.DiscussionThread.DiscussionCommentViewModel(
-1,"",i.author()),n.canDelete(!0),n.isEditable(!0),r=new u(-(new Date).getTime(),[n]),i.threads.push(r))},f.prototype._ensureItemClickCommand=function(){var i=this,r=function(t){return i.itemClick&&i.itemClick(t.itemPath(),t.position()),n.Helpers.resolve()};this.click=new t.Editor.ExtensionCommand(r)},f})(n.ViewModels.Controls.Loadable.ViewModel);i.ViewModel=f})(i=t.DiscussionTimeline||(t.DiscussionTimeline={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.Command.ViewModel,i=ko.observable,f=ko.observableArray,e,o,u;(function(n){n[n.Text=0]="Text";n[n.Custom=1]="Custom";n[n.Bat=2]="Bat";n[n.C=3]="C";n[n.CoffeeScript=4]="CoffeeScript";n[n.Cpp=5]="Cpp";n[n.CSharp=6]="CSharp";n[n.CSHtml=7]="CSHtml";n[n.Css=8]="Css";n[n.Dockerfile=9]="Dockerfile";n[n.FSharp=10]="FSharp";n[n.Go=
11]="Go";n[n.Handlebars=12]="Handlebars";n[n.Html=13]="Html";n[n.Ini=14]="Ini";n[n.Jade=15]="Jade";n[n.Java=16]="Java";n[n.JavaScript=17]="JavaScript";n[n.JSHtm=18]="JSHtm";n[n.Json=19]="Json";n[n.Less=20]="Less";n[n.Lua=21]="Lua";n[n.MarkDown=22]="MarkDown";n[n.ObjectiveC=23]="ObjectiveC";n[n.Php=24]="Php";n[n.PowerShell=25]="PowerShell";n[n.Python=26]="Python";n[n.R=27]="R";n[n.Ruby=28]="Ruby";n[n.Sql=29]="Sql";n[n.Swift=30]="Swift";n[n.TypeScript=31]="TypeScript";n[n.VisualBasic=32]="VisualBasic";n[n.Xaml=33]="Xaml";n[n.Xml=34]="Xml"})(t.ContentType||(t.ContentType={}));e=t.ContentType,(function(n){n[n.Ignore=0]="Ignore";n[n.Info=1]="Info";n[n.Warning=2]="Warning";n[n.Error=3]="Error"})(t.MarkerSeverity||(t.MarkerSeverity={}));o=t.MarkerSeverity;u=(function(n){function u(u,e,o,s,h,c,l,a){s===void 0&&(s={});h===void 0&&(h=null);c===void 0&&(c=t.Extensions.None);l===void 0&&(l=null);a===void 0&&(a=null);u&&u.createChildLifetime||(u=undefined,e=arguments[0],o=arguments[1],s=arguments[2],h=
arguments[3],c=arguments[4],l=arguments[5],a=arguments[6]);n.call(this,u);this.controlType=37;this.contentType=i(e);this.customContentType=i(h);this.content=i(o);this.contentUri=i();this.selectedContent=i("");this.selectedRange=i({startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1});this.markers=f();this.position=i({lineNumber:1,column:1});this.options=i(s);this.dirty=i(!1);this.visible=i(!0);this.save=new r(u,"");this.refresh=new r(u,"");this.autoSaveTimeout=i(0);this.extensions=c;this.extensionOptions=l;this.configuration=a;this.content.extend({notify:"always"});this._setupExtensions()}return __extends(u,n),u.prototype._setupExtensions=function(){for(var i,f=t.getExtensionSetups(),r,n=0,u=f.length;n<u;n++)i=f[n],i&&(r=i(this.extensions,this.extensionOptions),r&&this._addDisposablesToCleanUp(r))},u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels=
{}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(n){function i(i,u,f,e,o,s,h){o===void 0&&(o={});s===void 0&&(s=t.Editor.Extensions.None);h===void 0&&(h=null);i&&i.createChildLifetime?n.call(this,i,u,e,o,null,s,h):(i=undefined,u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3],s=arguments[4],h=arguments[5],o===void 0&&(o={}),s===void 0&&(s=t.Editor.Extensions.None),h===void 0&&(h=null),n.call(this,u,e,o,null,s,h));this.controlType=33;this.originalContent=r(f);this.originalContent.extend({notify:"always"})}return __extends(i,n),i})(n.ViewModels.Controls.Documents.Editor.ViewModel);i.ViewModel=u})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";
var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.submit=!1;this.selector=i();this.click=$.noop;this.uri=i();this.text=i();this.visible=i(!0);this.isDefault=i(!1);this.controlType=38}return __extends(t,n),t})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=r})(i=t.Button||(t.Button={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=ko.observable,i=n,u=i.ViewModels.Forms.Base.LabelAndBalloon,f=(function(n){function t(t,u){n.call(this,t,u);this.value=r();this.controlType=40;this.hideTextbox=u&&u.hideTextbox;this.ariaLabel=i.initObservable(u&&u.ariaLabel,"")}return __extends(t,n),t})(u.ViewModel);t.ViewModel=f})(i=t.CopyableLabel||(t.CopyableLabel={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(
n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.formatString=i("D");this.controlType=41;this.value(null)}return __extends(t,n),t})(n.ViewModels.Controls.Forms.EditableCombo.ViewModel);t.ViewModel=r})(i=t.DateTimeCombo||(t.DateTimeCombo={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observable,i,r;(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete"})(i||(i={}));r=(function(n){function t(t){n.call(this,t);this.accept="";this.maxFiles=1;this.sizeLimit=209715200;this.showProgressBars=u(!0);this.files=u([]);this.controlType=28}return __extends(
t,n),t})(n.ViewModels.Controls.ValidatableControl.ViewModel);t.ViewModel=r;n.ViewModels.Controls.Forms.FileUpload={UploadStatus:i,ViewModel:r}})(i=t.FileUpload||(t.FileUpload={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u=(function(n){function t(t){n.call(this,t);this.groupInfos=[];this.itemsDataArray=[];this.areItemsInitialized=i(!1);this.items=r();this.controlType=44}return __extends(t,n),t})(n.ValidatableControl.ViewModel);t.ViewModel=u})(i=t.GroupDropDown||(t.GroupDropDown={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.SpinnerSmall=
0]="SpinnerSmall"})(n.Type||(n.Type={}));var t=n.Type})(t=n.ProgressOverlay||(n.ProgressOverlay={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=(function(i){function u(u,f,e){u&&u.createChildLifetime||(u=undefined,f=arguments[0],e=arguments[1]);i.call(this,u);this.controlType=51;this.label=r("");this.defaultValue=r();this.showValue=r(!0);this.displayText=r("");this.icon=r();this.locked=r(!1);this.infoBalloonText=r("");this.lockedBalloonText=r("");this.infoBalloonLink=r(new n.ViewModels.Controls.Balloon.Link);this.selectable=new t.Selectable({allowUnselect:!1,selectedValue:e!==undefined?e:null,isSelected:f&&f.selectable&&f.selectable.isSelected,isActivated:f&&f.selectable&&f.selectable.isActivated})}return __extends(u,i),u.prototype.dispose=function(){this.selectable&&
this.selectable.dispose();i.prototype.dispose.call(this)},u})(n.ViewModels.Controls.ValidatableControl.ViewModel);i.ViewModel=u})(r=i.Selector||(i.Selector={}))})(r=i.Forms||(i.Forms={}))})(r=i.Controls||(i.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var u=ko.observable,f,i,r;(function(n){n[n.Default=0]="Default";n[n.AfterKeyDown=1]="AfterKeyDown";n[n.KeyPress=2]="KeyPress";n[n.Blur=3]="Blur";n[n.Input=4]="Input"})(t.ValueUpdateTrigger||(t.ValueUpdateTrigger={}));f=t.ValueUpdateTrigger;i=(function(){function n(){this.enterPressed=$.noop}return n})();t.Events=i;r=(function(n){function t(t){n.call(this,t);this.placeholder=u();this.events=new i;this.controlType=53;var r=this.valid;this.valid=ko.computed(t,{read:r,write:function(){}})}return __extends(t,n),t})(n.TypableControl.ViewModel);t.ViewModel=r})(i=t.TextBox||(t.TextBox=
{}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.SortableColumn=1]="SortableColumn";n[n.SelectableRow=2]="SelectableRow";n[n.RightClickableRow=4]="RightClickableRow";n[n.Groupable=8]="Groupable";n[n.EditableRow=16]="EditableRow";n[n.Filterable=32]="Filterable";n[n.ReorderRow=64]="ReorderRow";n[n.ContextMenuShortcut=128]="ContextMenuShortcut";n[n.Pageable=256]="Pageable";n[n.Hierarchical=512]="Hierarchical";n[n.Scrollable=1024]="Scrollable";n[n.Hoverable=2048]="Hoverable";n[n.ResizableColumn=4096]="ResizableColumn"})(n.Extensions||(n.Extensions={}));var t=n.Extensions})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;
(function(n){"use strict";var t,i;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.ShortTime=100]="ShortTime";n[n.LongTime=101]="LongTime";n[n.ShortDate=102]="ShortDate";n[n.LongDate=103]="LongDate";n[n.MonthDay=104]="MonthDay";n[n.YearMonth=105]="YearMonth";n[n.CustomDate=106]="CustomDate";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.PercentageBar=113]="PercentageBar";n[n.Number=114]="Number";n[n.HtmlBindings=1e3]="HtmlBindings"})(n.Format||(n.Format={}));t=n.Format,(function(n){n[n.Default=0]="Default";n[n.CheckBox=1]="CheckBox";n[n.TextBox=2]="TextBox";n[n.MultiselectDropDown=3]="MultiselectDropDown";n[n.CheckBoxRowSelection=4]="CheckBoxRowSelection";n[n.DropDown=5]="DropDown";n[n.GroupDropDown=6]="GroupDropDown"})(n.HtmlBindingsType||(n.HtmlBindingsType={}));i=n.HtmlBindingsType})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.
Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Bottom=0]="Bottom";n[n.Top=1]="Top"})(n.EditableRowPlacement||(n.EditableRowPlacement={}));var t=n.EditableRowPlacement})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.DateTime=1]="DateTime";n[n.SettingListGroupOrder=9999]="SettingListGroupOrder"})(n.SortFunction||(n.SortFunction={}));var t=n.SortFunction})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";
(function(n){n[n.Sequential=0]="Sequential";n[n.Pageable=1]="Pageable"})(n.PageableType||(n.PageableType={}));var t=n.PageableType})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Off=0]="Off";n[n.Single=1]="Single";n[n.Multiple=2]="Multiple";n[n.MultipleToggle=3]="MultipleToggle"})(t||(t={}));n.RowSelectionMode=t,(function(n){n[n.Default=0]="Default";n[n.Checked=1]="Checked"})(i||(i={}));n.SelectionStyle=i})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(n.SortOrder||
(n.SortOrder={}));var t=n.SortOrder})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function l(n,t){return i.computed((function(){var i=t(),r=i?i():[];n.splice.apply(n,[0,n().length].concat(r))}))}function o(n,t){return t(n)}function s(n){var t=n();return t||f.blockInteractionUntilEditScopeLoads(),t}function y(n){a.Log.writeEntry(2,"Grid",n)}var u=n,a=n.Base.Diagnostics,h=n.ViewModels,r=h.Controls.Lists.Grid.Extensions,i=ko,c=u.disposeDisposable,e="",v={itemsSuppliedWithEditableRow:e,editScopeRoot:e,pageableEditableRowMismatch:e,pageableScrollableMismatch:e,missingValidDataNavigator:e,itemsSuppliedWithPageableExtensionWithDataNav:e,blockInteractionUntilEditScopeLoads:e,itemsSuppliedWithScrollableExtensionWithDataNav:e,sortCallbackWithDataNav:e,loadBySkipTakeMissing:e,loadByContinuationTokenMissing:
e,scrollableEditableRowMismatch:e},f=FxImpl.getErrorMap(v),p=(function(e){function a(c,a,v,y){var p=this,k,hi,ci,li,ai,at,vi,pt,wt,d,ot,vt,bt,tt,st,kt,dt,gt,ti,ii;c&&c.createChildLifetime||(c=undefined,a=arguments[0],v=arguments[1],y=arguments[2]);e.call(this,c);c=this.lifetimeManager;this.controlType=54;this.addEmptyRow=i.observable();this.summary=i.observable();this.columns=i.observableArray();this.resetCallback=i.observable();this.noRowsMessage=i.observable(u.Resources.Strings.ViewModels.Controls.noRowsMessage);this.sortByList=i.observableArray();this.showHeader=!0;this._resetHandler=null;this._addCreatedLocked=!1;this._pendingResetCallbackPromise=null;this._pendingResetCallbackSubscription=null;this._msPortalFxActions={};var g=this.items=a||i.observableArray(),ht=this.createdItems=i.observableArray(),w=y||{},b=this.extensionsOptions={},nt=[],ri=v&r.ContextMenuShortcut,rt=v&r.EditableRow,ui=v&r.Filterable,fi=v&r.Groupable,ei=v&r.Hierarchical,oi=v&r.Hoverable,ct=v&r.Pageable,si=v&r.ReorderRow,
lt=v&r.ResizableColumn,ut=v&r.RightClickableRow,ft=v&r.Scrollable,et=v&r.SelectableRow,ni=v&r.SortableColumn;if(lt||(v|=lt=r.ResizableColumn),rt&&(v|=et=r.SelectableRow,v|=ut=r.RightClickableRow),ri&&(v|=ut=r.RightClickableRow),ut&&(v|=et=r.SelectableRow),et&&(v|=ut=r.RightClickableRow),this.extensions=v,rt&&(k=b.editableRow=u.clone(w.editableRow)),ui&&(hi=b.filterable=u.clone(w.filterable)),fi&&(ci=b.groupable=u.clone(w.groupable)),ei&&(li=b.hierarchical=u.clone(w.hierarchical)),oi&&(ai=b.hoverable=u.clone(w.hoverable)),ct&&(at=b.pageable=u.clone(w.pageable)),si&&(vi=b.reorderRow=u.clone(w.reorderRow)),lt&&(pt=b.resizableColumn=u.clone(w.resizableColumn)),ut&&(b.controlCommands=w.controlCommands),ft&&(wt=b.scrollable=u.clone(w.scrollable)),et&&(d=b.selectableRow=u.clone(w.selectableRow),b.onRowClicked=w.onRowClicked),ni&&(ot=b.sortableColumn=u.clone(w.sortableColumn)),rt&&(vt=k.editScope,vt&&a&&f.itemsSuppliedWithEditableRow(),vt&&(this._editScope=vt,k.editScope=null,k.getItems||(k.getItems=
function(n){return ko.isObservable(n.root)&&Array.isArray(n.root())&&n.root.splice||f.editScopeRoot(),n.root}),nt.push(l(g,(function(){var n=p._editScope();return n&&o(n,k.getItems)}))),nt.push(l(ht,(function(){var n=p._editScope();return n&&n.getCreated(o(n,k.getItems))}))),bt=i.computed((function(){return!!p._editScope()})),nt.push(bt),u.extend(k,{create:function(){return p._create(s(p._editScope),k.getItems)},addCreated:function(n){p._addCreated(s(p._editScope),k.getItems,n)},markForDelete:function(n){p._markForDelete(s(p._editScope),n)},enableValidation:bt}),k.enableRowAdd!==!1&&this._addInitialCreatedRow(this._editScope,k.getItems))),ct&&(rt&&f.pageableEditableRowMismatch(),ft&&f.pageableScrollableMismatch(),tt=at.dataNavigator,tt||f.missingValidDataNavigator(),tt&&a&&f.itemsSuppliedWithPageableExtensionWithDataNav(),st=at.type,st!==t.PageableType.Pageable&&st===t.PageableType.Sequential,st!==t.PageableType.Sequential||tt.loadByContinuationToken||f.loadByContinuationTokenMissing(),st!==
t.PageableType.Pageable||tt.loadBySkipTake||f.loadBySkipTakeMissing(),this._resetHandler=function(){return p.reset()},tt.addResetNavigationListener(this._resetHandler)),lt&&ft&&!pt.resizeToPercent&&(pt.resizeToPercent=i.observable(!1)),ni){var it=ot.dataNavigator,yi=this.sortByList,yt=ot.sortCallback;it||(it=ot.dataNavigator=ct&&at.dataNavigator||ft&&wt.dataNavigator);it&&yt&&f.sortCallbackWithDataNav();it||yt||(yt=ot.sortCallback=function(n){var i=g().slice(0);n&&n.length&&i&&i.length&&i.sort((function(i,r){var f=0;return n.some((function(n){var e=i[n.itemKey],o=r[n.itemKey];return f=u.compare(e,o),f&&n.sortOrder===t.SortOrder.Descending&&(f=-f),f!==0})),f}));g(i)});this._msPortalFxActions.sort=function(n){return(yi(n),it)?it.resetNavigation():Q(yt(n))}}ft&&(rt&&f.scrollableEditableRowMismatch(),ct&&f.pageableScrollableMismatch(),kt=wt.dataNavigator,kt&&(a&&f.itemsSuppliedWithScrollableExtensionWithDataNav(),this._resetHandler=function(){return p.reset()},kt.addResetNavigationListener(this.
_resetHandler)));et&&(dt=g,n.isUndefined(d.selectionMode)&&(d.selectionMode=1),n.isUndefined(d.leaveSelectionOnDeactivation)&&(d.leaveSelectionOnDeactivation=d.selectionMode!==1),ht&&(gt=i.computed((function(){return g().concat(ht())})),dt=gt,nt.push(gt)),this.selectableData=new h.SelectableSet(dt,d.itemMatchesSelection,d.createSelection,d.initialSelection,d.supplyCommands,!0,d.leaveSelectionOnDeactivation));ti=g.map(c,(function(n,t){return i.ignoreDependencies((function(){return p._createMetadataForItem(n,t)}))}));ii=ht.map(c,(function(n,t){return i.ignoreDependencies((function(){return p._createMetadataForItem(n,t)}))}));this.rowMetadata=i.observableArray();nt.push(i.computed((function(){p.rowMetadata(ti().concat(ii()))})));this._addDisposablesToCleanUp(nt)}return __extends(a,e),a.prototype.getRowMetadata=function(n){return this.rowMetadata().first((function(t){return t.item===n}))},a.prototype.reset=function(){var t=this,i=this.resetCallback(),n;return i?Q(i()):(this._pendingResetCallbackPromise||
(n=Q.defer(),this._pendingResetCallbackPromise=n.promise,this._pendingResetCallbackSubscription=this.resetCallback.subscribe((function(i){i&&(t._pendingResetCallbackPromise?Q(i()).then((function(t){n.resolve(t)}),(function(t){n.reject(t)})).finally((function(){c(t._pendingResetCallbackSubscription);t._pendingResetCallbackSubscription=null;t._pendingResetCallbackPromise=null})):n.reject())}))),this._pendingResetCallbackPromise)},a.prototype.dispose=function(){if(this._resetHandler){var n=this.extensionsOptions.pageable;n&&n.dataNavigator&&n.dataNavigator.removeResetNavigationListener(this._resetHandler);this._resetHandler=null}this._pendingResetCallbackSubscription=null;this._pendingResetCallbackPromise&&(this._pendingResetCallbackPromise=null);c(this._pendingResetCallbackSubscription,this.selectableData);e.prototype.dispose.call(this)},a.prototype._createMetadataForItem=function(n,t){var u={item:t,cssClass:i.observable("")},e,f;return this.extensions&r.EditableRow&&(e=this.extensionsOptions.editableRow,
e&&(u.editState=s(this._editScope).getEditState(t))),this.extensions&r.SelectableRow&&(f=this.extensionsOptions.selectableRow,u.selected=i.observable(!1),u.disabled=i.observable(!1),u.activated=i.observable(null),u.activatedInfo=i.observable(null),u.useDefaultActivation=i.observable(!0),f&&f.linkProvider&&(u.link=f.linkProvider(n,t))),this.extensions&r.Groupable&&(u.groupId=i.observable("")),u},a.prototype._create=function(n,t){var i=n.create(o(n,t)),r=this.extensionsOptions.editableRow;return r&&r.created&&r.created(i),this.addEmptyRow(i),u.Helpers.resolve(i)},a.prototype._addCreated=function(n,t,i){if(!this._addCreatedLocked)try{this._addCreatedLocked=!0;var r=this.createdItems().some((function(n){return n&&i&&n===i}));i&&!r&&n.addCreated(i,o(n,t))}finally{this._addCreatedLocked=!1}},a.prototype._markForDelete=function(n,t){var r=function(n){return n===t},i=this.items().first(r);if(i){n.markForDelete(i);return}if(i=this.createdItems().first(r),i){n.revert(i);return}y("The item marked for deletion could not be found.")}
,a.prototype._addInitialCreatedRow=function(n,t){var i=this,r=function(n){i._create(n,t)};n.fxOnceAndRun(this.lifetimeManager,(function(n){return r(n)}))},a})(u.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=p})(i=t.Grid||(t.Grid={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,s=ko.observableArray,u,e,f,o;(function(n){n[n.Selectable=1]="Selectable";n[n.Groupable=2]="Groupable";n[n.ContextMenu=4]="ContextMenu";n[n.Filterable=8]="Filterable"})(i.Extensions||(i.Extensions={}));u=i.Extensions,(function(n){n[n.Collection=0]="Collection";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(i.GroupOrder||(i.GroupOrder={}));e=i.GroupOrder,(function(n){n[n.Single=0]="Single";n[n.Multiple=1]="Multiple"})(i.SelectionMode||(i.SelectionMode={}));f=i.SelectionMode;o=(function(t){function i(i,
o,h){o===void 0&&(o=0);h===void 0&&(h={});i&&i.createChildLifetime||(i=undefined,o=arguments[0],h=arguments[1],o===void 0&&(o=0),h===void 0&&(h={}));t.call(this,i);this.controlType=56;this.items=s();this.events=$.noop;this.noItemsMessage=r("");this.extensions=o;this.extensionOptions=h;this.extensions&u.Selectable&&(this.extensionOptions.selectable||(this.extensionOptions.selectable={}),(this.extensionOptions.selectable.selectionMode===undefined||this.extensionOptions.selectable.selectionMode===null)&&(this.extensionOptions.selectable.selectionMode=f.Single),this.extensionOptions.selectable.selectedItem||this.extensionOptions.selectable.selectionMode!==f.Single||(this.extensionOptions.selectable.selectedItem=r()),this.extensionOptions.selectable.selection||(this.extensionOptions.selectable.selection=new n.ViewModels.SelectableSet(this.items)),(this.extensionOptions.selectable.activateOnSelected===undefined||this.extensionOptions.selectable.activateOnSelected===null)&&(this.extensionOptions.
selectable.activateOnSelected=!0));this.extensions&u.Groupable&&(this.extensionOptions.groupable||(this.extensionOptions.groupable={}),this.extensionOptions.groupable.groupKey||(this.extensionOptions.groupable.groupKey=r("")),this.extensionOptions.groupable.headerTemplate||(this.extensionOptions.groupable.headerTemplate=null),this.extensionOptions.groupable.groups||(this.extensionOptions.groupable.groups=null),this.extensionOptions.groupable.noGroupLabel||(this.extensionOptions.groupable.noGroupLabel=""),this.extensionOptions.groupable.order||(this.extensionOptions.groupable.order=r(e.Collection)))}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=o})(r=i.ListView||(i.ListView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r){t&&t.createChildLifetime?n.call(this,
t,i,r):(t=undefined,i=arguments[0],r=arguments[1],n.call(this,i,r));this.controlType=55}return __extends(t,n),t})(n.ListView.ViewModel);t.ViewModel=i})(t=n.Gallery||(n.Gallery={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u,f;(function(n){n[n.Selectable=1]="Selectable";n[n.OnDemandLoadable=2]="OnDemandLoadable";n[n.RightClickable=4]="RightClickable";n[n.LoadableByContinuationToken=8]="LoadableByContinuationToken"})(u||(u={}));t.Extensions=u;f=(function(t){function u(n,u,f,e){var o=this;n&&n.createChildLifetime||(n=undefined,u=arguments[0],f=arguments[1],e=arguments[2]);t.call(this,n);this.controlType=57;this.padding=i(16);this.alwaysExpanded=i(!1);this.htmlTemplates=[];this.toggleNodeCallback=i();this._tokenStorage={};this.pathSeparator="/";this.items=u||r();this.
extensions=f||0;this.extensionsOptions=e;this._processCallBack=function(n){if(n)for(var t=0,i=n.length;t<i;t++)o._processItem(n[t])};this._processItems(this.items);this._selectableExists&&this._setupSelectable(e.selectable);this._loadableExists&&this._setupOnDemandLoadable();this._selectableExists&&this.extensionsOptions.selectable.selectionMode===1&&this.selectableData.selectedPaths.subscribeArrayChanges(this.lifetimeManager,(function(n){o.findItemByPath(n).metadata.selected(!0)}),(function(n){o.findItemByPath(n).metadata.selected(!1)}))}return __extends(u,t),u.prototype.loadMoreNode=function(n,t){return this.extensionsOptions.loadableByContinuationToken.loadMoreNode(n,t)},u.prototype.syncToken=function(n,t){this._tokenStorage[n]=t},u.prototype.getTokenByPath=function(n){return this._tokenStorage[n]},u.prototype.expandNode=function(n){this.toggleNode(n,!0)},u.prototype.collapseNode=function(n){this.toggleNode(n,!1)},u.prototype.toggleNode=function(n,t){t===undefined&&(t=!n.metadata.expanded(
));var i=this.toggleNodeCallback();i&&i(n,t)},u.prototype.findItemByPath=function(t){var c=this.items,e=c,i=null,f,o,u,s,h;if(t)for(f=t.split(this.pathSeparator),o=function(){var t=f[u].toLowerCase();if(i=n.find(e(),(function(n){return t===n.text().toLowerCase()})),i)e=i.items||r();else return"break"},u=0,s=f.length;u<s;u++)if(h=o(),h==="break")break;return i},Object.defineProperty(u.prototype,"_selectableExists",{get:function(){return(this.extensions&1)>0&&!!this.extensionsOptions.selectable},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"_loadableExists",{get:function(){return(this.extensions&2)>0&&!!this.extensionsOptions.onDemandLoadable},enumerable:!0,configurable:!0}),u.prototype._processItems=function(n){this._processCallBack(n());n.subscribeArrayBulkChanges(this.lifetimeManager,this._processCallBack)},u.prototype._processItem=function(n){var t=n.metadata||(n.metadata={});t.disabled=t.disabled||i(!1);t.expanded=t.expanded||i(!1);this._selectableExists&&(t.selected=
t.selected||i(!1),t.selectable=t.selectable||i(!0),t.focused=t.focused||i(!1));this._loadableExists&&(t.loadable=t.loadable||i());n.items=n.items||r();this._processItems(n.items)},u.prototype._setupSelectable=function(n){var t=this;this.selectableData={selectedItem:i(),selectedPath:i(),selectionMode:n.selectionMode||0,selectedItems:r(),selectedPaths:r()};this.selectableData.selectedPath.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.selectableData.selectedItem(t.extensionsOptions.selectable.createSelection(i,n))}));this.selectableData.selectedPaths.subscribe(this.lifetimeManager,(function(n){var i=n.map((function(n){var i=t.findItemByPath(n);return t.extensionsOptions.selectable.createSelection(i,n)}));t.selectableData.selectedItems(i)}))},u.prototype._setupOnDemandLoadable=function(){var t=this,n=i();n.extend({notify:"always"});n.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.extensionsOptions.onDemandLoadable.loadItem(i,n)}));this.onDemandLoadableData=
{loadingPath:n}},__decorate([n.Composition.ProxyCompatibilityMode],u)})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=f})(i=t.TreeView||(t.TreeView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservable,u=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.controlType=110;this.markdown=r(i.markdown,"")}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=u})(i=t.Markdown||(t.Markdown={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i){n.call(this,t);this.controlType=112;this.options=i}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.PartPinner||(n.PartPinner={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||
(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.show=i(!1);this.darkText=i(!1);this.controlType=89}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=r})(t=n.PreviewTag||(n.PreviewTag={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t){n.call(this,t);this.autoRefreshContent=!0;this.refreshContainerOnResize=!0;this.scrollIntoViewVertical=!0;this.scrollIntoViewHorizontal=!0;this.fitContainer=!1;this.controlType=59}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=i})(t=n.Scrollbar||(n.Scrollbar={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(
i){"use strict";var r=n.initObservable,u=n.initValue,f=(function(t){function i(i,f){t.call(this,i);this.controlType=93;this.defaultText=f.defaultText;this.submit=f.submit;this.update=f.update;this.placeholder=r(f.placeholder,n.Resources.Strings.ViewModels.Controls.search);this.updateFrequency=u(f.updateFrequency,400);this.resultLimit=f.resultLimit;this.disabled=r(f.disabled,!1);this.ariaLabel=r(f.ariaLabel,"");this._msPortalFxresetTrigger=r()}return __extends(i,t),i.prototype.reset=function(){var n=this._msPortalFxresetTrigger;if(n())return n()();Q()},i})(t.Base.ViewModel);i.ViewModel=f})(i=t.SearchBox||(t.SearchBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f=ko.observableArray,r,u;(function(n){n[n.Small=2]="Small";n[n.Large=3]="Large"})(t.Size||(t.Size={}));r=t.Size;u=(function(n){function t(t){n.call(this,t);this.items=f();this.
maxItems=i();this.size=i(r.Small);this.controlType=60}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=u})(t=n.Settings||(n.Settings={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r){r===void 0&&(r={});t.call(this,i);this.controlType=100;this.onClick=r.onClick;this.text=r.text||"";this.disabled=r.disabled||!1;this.primary=r.primary||!1;this.ariaLabel=n.initObservable(r.ariaLabel,"")}return __extends(i,t),i})(t.Base.ViewModel);i.ViewModel=r})(i=t.SimpleButton||(t.SimpleButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.value=i();this.unit=i();this.caption=i();this.infoBalloon=i();this.hideInfoBalloon=i(
!1);this.controlType=61}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.SingleSetting||(n.SingleSetting={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservableArray,f,u;(function(n){n[n.Orange=0]="Orange";n[n.DarkOrchid=1]="DarkOrchid";n[n.YellowGreen=2]="YellowGreen";n[n.MediumBlue=3]="MediumBlue"})(i.Colors||(i.Colors={}));f=i.Colors;u=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.controlType=95;this.headers=r(i.headers,[]);this.rows=r(i.rows,[])}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=u})(i=t.SpecComparisonTable||(t.SpecComparisonTable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i){i===void 0&&(i={});n.call(
this,t);this.controlType=101;this.text=i.text||""}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.TextBlock||(n.TextBlock={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r){r===void 0&&(r={});n.call(this,t);this.controlType=102;this.input=i().extend({notify:"always"});this.write=i().extend({notify:"always"});this.resize=r.resize||i({cols:100,rows:80})}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=r})(i=t.TerminalEmulator||(t.TerminalEmulator={}))})(t=n.Unsupported||(n.Unsupported={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=ko.computed,i=[],e="azc-validatableControl-none",o="azc-validatableControl-invalid",s="azc-validatableControl-pending",
u="azc-validatableControl-valid-validated",h="data-validatable-control-valid",l="data-validatable-control-validation-state",f,c;i[0]="none";i[1]="invalid";i[2]="valid";i[3]="pending";f=(function(){function t(){this._destroyIds=[]}return t.prototype._checkExistsOrRegisterDestroyId=function(n){var t=this._destroyIds.indexOf(n)<0;return t&&this._destroyIds.push(n),!t},t.prototype.isDestroyed=function(){return this._destroyIds.length>0},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(null)||(this._errorMessage&&(this._errorMessage.dispose(),this._errorMessage=null),this._disposeSubscriptions())},t.prototype.initialize=function(n,t){var i=this;this._element=n;this._validatable={enableValidation:t.enableValidation,valid:t.valid,validationState:t.validationState,validators:t.validators};this._errorMessage||(this._errorMessage=r((function(){var u="",r=i._validatable.validators(),n,t;if(r)for(n=0;n<r.length;n++)if(t=r[n],!t.valid()&&t.message()){u=t.message();break}return u})));
this._subscriptions||this._initializeSubscriptions()},t.prototype.onErrorMessageChanged=function(){},t.prototype.onValidationStateChanged=function(){},t.prototype._initializeSubscriptions=function(){var n,t;this._subscriptions=this._subscriptions||[];this._disposeSubscriptions();n=this._validatable.validationState;this.onValidationStateChanged(n());this._subscriptions.push(n.subscribe(this.onValidationStateChanged));t=this._errorMessage;this.onErrorMessageChanged(t());this._subscriptions.push(t.subscribe(this.onErrorMessageChanged))},t.prototype._disposeSubscriptions=function(){var t=this._subscriptions;this._subscriptions=[];t&&n.disposeDisposable(t)},t})();t.ValidationPlacementBase=f;c=(function(n){function t(){n.apply(this,arguments);this._input=null;this._valid=r($.noop)}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._element&&this._element.removeClass([e,o,s,u].join(" ")),this._input&&
this._input.removeAttr(h),this._valid&&(this._valid.dispose(),this._valid=null))},t.prototype.initialize=function(t,i){var f=this;n.prototype.initialize.call(this,t,i);this._valid=r((function(){return f._validatable.enableValidation()&&f._validatable.validators().length>0&&f._validatable.validationState()===2}));this._subscriptions.push(this._valid.subscribe((function(n){f._element.toggleClass(u,n)})));this._input=this._element.find("input, select, textarea");this._validatable.validationState.notifySubscribers(this._validatable.validationState());this._setValidationAttribute(this._validatable.validationState())},t.prototype.onValidationStateChanged=function(n){var t=this._element;t.toggleClass(e,n===0);t.toggleClass(o,n===1);t.toggleClass(s,n===3);this._element.toggleClass(u,this._valid());this._setValidationAttribute(n)},t.prototype._setValidationAttribute=function(n){var t=this._input;t&&(t.attr(h,n===2||this._validatable.validators().length===0),t.attr(l,i[n]))},t})(f);t.Css=c})(i=t.ValidationPlacements||
(t.ValidationPlacements={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function v(n){return(n||"").toLowerCase()}function y(n){return(n||"").toLocaleLowerCase()}var yt=n.Base,pt=yt.Diagnostics,i=n.isNullOrUndefined,o=ko.observable,wt=new pt.Log("MsPortalFx.ViewModels.Controls.Validators"),u=jQuery,r,f,s,p,w,l,b,k,d,g,nt,tt,e,it,rt,ut,h,a,ft,et,ot,st,c,ht,ct,lt,at,vt;t.escapeRegExpOperators=n.regexEscape;r=(function(){function n(n){var t=this;this.message=o(n);this.validationState=o(0);this.validate=o();this.isEmptyValid=o(!1);this.valid=ko.computed((function(){return t.validationState()===2}));this._sub=this.validate.subscribe((function(n){t.validationState(t._validate(n))}))}return n.prototype.dispose=function(){this._sub&&(this._sub.dispose(),this._sub=null)},n.prototype._validate=function(){return 0},n})();t.Validator=r;f=(function(n){function t(t,i){n.
call(this,i||"The value must match the expression '"+t+"'.");this._expression=t}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:this._expression.test(n||"")?2:1},t})(r);t.Match=f;s=(function(n){function t(t,i){n.call(this,i||"The value must not match the expression '"+t+"'.");this._expression=t}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:this._expression.test(n||"")?1:2},t})(r);t.NotMatch=s;p=(function(n){function i(i,r){n.call(this,new RegExp(t.escapeRegExpOperators(i),"i"),r||"The value must contain at least one case insensitive match of '"+i+"'.")}return __extends(i,n),i})(f);t.Contains=p;w=(function(n){function i(i,r){n.call(this,new RegExp(t.escapeRegExpOperators(i),"i"),r||"The value must not contain a case insensitive match of '"+i+"'.")}return __extends(i,n),i})(s);t.NotContains=w;l=(function(n){function i(i,r){n.call(this,new RegExp("["+t.escapeRegExpOperators(i)+
"]",""),r||"The value must contain at least one character from '"+i+"'.")}return __extends(i,n),i})(f);t.ContainsCharacters=l;b=(function(n){function i(i,r){n.call(this,new RegExp("["+t.escapeRegExpOperators(i)+"]",""),r||"The value must not contain characters from '"+i+"'.")}return __extends(i,n),i})(s);t.NotContainsCharacters=b;k=(function(n){function t(t){n.call(this,/[0-9]/,t||"The value must have at least one digit from 0 to 9.")}return __extends(t,n),t})(f);t.HasDigit=k;d=(function(n){function t(t){n.call(this,/[A-Za-z]/,t||"The value must have at least one upper or lower case letter from A to Z or a to z.")}return __extends(t,n),t})(f);t.HasLetter=d;g=(function(n){function t(t){n.call(this,/[A-Z]/,t||"The value must have at least one upper case letter from A to Z.")}return __extends(t,n),t})(f);t.HasUpperCaseLetter=g;nt=(function(n){function t(t){n.call(this,/[a-z]/,t||"The value must have at least one lower case letter from a to z.")}return __extends(t,n),t})(f);t.HasLowerCaseLetter=nt;tt=
(function(n){function t(t){n.call(this,"!@#$%^&*()_+-={}|[]\\:\";'<>,.?/~`",t||"The value must contain at least one punctuation character from '!@#$%^&*()_+-={}|[]\\:\";'<>,.?/~`'.")}return __extends(t,n),t})(l);t.HasPunctuation=tt;e=(function(n){function t(t,i){n.call(this,i);this._compareTo=u.isFunction(t)?t:function(){return t}}return __extends(t,n),t.prototype._validate=function(n){return this._compare(n,this._compareTo())?2:1},t.prototype._compare=function(){return!1},t})(r);t.Compare=e;it=(function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(n,t){return n===t},t})(e);t.Equals=it;rt=(function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(n,t){return v(n)===v(t)},t})(e);t.CaseInsensitiveCompare=rt;ut=(function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype.
_compare=function(n,t){return y(n)===y(t)},t})(e);t.LocaleAwareCaseInsensitiveCompare=ut;h=(function(n){function t(t,i,r){n.call(this,r||"The value must be between "+t+" and "+i+" characters long.");this._min=t;this._max=i}return __extends(t,n),t.prototype._validate=function(n){var t,r;return(n=u.trim(n),(i(n)||u.trim(n)==="")&&this.isEmptyValid())?2:(t=0,i(n)||(t=n.length),r=0,i(this._min)||(r=this._min),t>=r&&(i(this._max)||t<=this._max))?2:1},t})(r);t.LengthRange=h;a=(function(n){function t(t,i){n.call(this,t,null,i||"The value must have a length of at least "+t+".")}return __extends(t,n),t})(h);t.MinLength=a;ft=(function(n){function t(t,i){n.call(this,0,t,i||"The value must have a length of at most "+t+".")}return __extends(t,n),t})(h);t.MaxLength=ft;et=(function(n){function t(t){n.call(this,1,t||"The value should not be empty.")}return __extends(t,n),t})(a);t.Required=et;ot=(function(n){function t(t){n.call(this,t||"The input value must be a non-null value.")}return __extends(t,n),t.prototype.
_validate=function(n){return i(n)?1:2},t})(r);t.NotNull=ot;st=(function(n){function t(t){n.call(this,t||"The input value must be a number.")}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:!i(n)&&n!==""?isNaN(+n)?1:2:1},t})(r);t.Numeric=st;c=(function(n){function t(t,i,r){var e=t,f;u.isFunction(t)||(e=function(){return t});f=i;u.isFunction(i)||(f=function(){return i});n.call(this,r||"The value must be between "+e()+" and "+f()+".");this.min=e;this.max=f}return __extends(t,n),t.prototype._validate=function(n){var t;return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:(i(n)||n==="")&&i(this.min())&&i(this.max())?2:!i(n)&&(typeof n=="string"||typeof n=="number")&&n!==""&&(t=+n,!isNaN(t))?!i(this.min())&&t<this.min()?1:!i(this.max())&&t>this.max()?1:2:1},t})(r);t.ValueRange=c;ht=(function(n){function t(t,i){n.call(this,t,null,i||"The value must be at least "+t+".")}return __extends(t,n),t})(c);t.MinValue=ht;ct=(function(n){function t(t,i){
n.call(this,null,t,i||"The value must be at most "+t+".")}return __extends(t,n),t})(c);t.MaxValue=ct;lt=(function(){function n(n,t){this.promise=n;this.asyncRequestId=t}return n})();at=(function(t){function i(n,i,r){t.call(this,n);this._validationHandler=i;this._context=r||null;this._pendingAsyncRequests=[];this._latestValidationAsyncRequestId=null}return __extends(i,t),i.prototype._validate=function(t){var r=this,u=!1,i;return this._validationHandler?(this._latestValidationAsyncRequestId=n.getUniqueId(),i=this._validationHandler(t,this._context),!i)?(wt.error("Extension validation handler did not return a promise"),3):(this._pendingAsyncRequests.push(new lt(i,this._latestValidationAsyncRequestId)),i.then((function(n){r._updateValidationResult(i,n,2)}),(function(n){r._updateValidationResult(i,n,1)})).finally((function(){u=!0})),u)?(this._removePendingAsyncRequest(i),this.validationState()):3:2},i.prototype._updateResult=function(n,t){n&&this.message(n);this.validationState(t)},i.prototype._updateValidationResult=
function(n,t,i){var r;r=this._pendingAsyncRequests.length<=1?this._pendingAsyncRequests.pop():this._removePendingAsyncRequest(n);r&&r.asyncRequestId===this._latestValidationAsyncRequestId&&this._updateResult(t,i)},i.prototype._removePendingAsyncRequest=function(n){for(var t=0,i=-1,r=null,t=0;t<this._pendingAsyncRequests.length;t++)if(this._pendingAsyncRequests[t].promise===n){i=t;break}return i>=0?(r=this._pendingAsyncRequests[i],this._pendingAsyncRequests.splice(i,1),r):null},i})(r);t.CustomAsyncValidator=at;vt=(function(n){function t(t){n.call(this,t||"The value is invalid.")}return __extends(t,n),t.prototype._validate=function(){return 1},t})(r);t.Invalid=vt})(i=t.Validators||(t.Validators={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Default=0]="Default";n[n.AfterKeyDown=1]="AfterKeyDown";n[n.KeyPress=2]="KeyPress";n[n.Blur=3]="Blur";n[n.Input=
4]="Input"})(t||(t={}));n.ValueUpdateTrigger=t})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=ko.observableArray,wt=n.shallowCopyFromObject,bt=0,a,v,y,p,w,b,k,kt,d,g,nt,tt,it,rt,ut,ft,et,ot,st,dt,c,gt,ni,h,ti,ii,ri,ui,fi,ht,ei,ct,e,lt,oi,o,f,at,l,vt,yt,s,pt,si,hi,ci,li,ai,vi,yi;(function(n){n[n.Line=0]="Line";n[n.Area=1]="Area";n[n.Scatter=2]="Scatter";n[n.StackedBar=3]="StackedBar";n[n.GroupedBar=4]="GroupedBar";n[n.SplitBar=5]="SplitBar";n[n.StackedArea=6]="StackedArea"})(a||(a={}));i.ChartType=a,(function(n){n[n.Linear=0]="Linear";n[n.Monotone=1]="Monotone";n[n.StepAfter=2]="StepAfter"})(v||(v={}));i.Interpolation=v,(function(n){n[n.Solid=0]="Solid";n[n.Dotted=1]="Dotted";n[n.Dashed=2]="Dashed";n[n.Trendline=3]="Trendline";n[n.UsageThreshold=4]="UsageThreshold";n[n.WarningThreshold=5]="WarningThreshold"})(y||(y={})
);i.LineStyle=y,(function(n){n[n.ShowLineWithPoints=0]="ShowLineWithPoints";n[n.HideLine=1]="HideLine";n[n.ShowLineWithXHoverPoint=2]="ShowLineWithXHoverPoint"})(p||(p={}));i.LineState=p,(function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"})(w||(w={}));i.AreaHatchingPattern=w,(function(n){n[n.Stacked=0]="Stacked";n[n.Grouped=1]="Grouped";n[n.Split=2]="Split"})(b||(b={}));i.BarChartType=b,(function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"})(k||(k={}));i.AxisPosition=k,(function(n){n[n.All=0]="All";n[n.XSlider_Off=1]="XSlider_Off";n[n.XSlider_noCallout=2]="XSlider_noCallout";n[n.ChartArea_Off=4]="ChartArea_Off";n[n.ChartArea_noClick=8]="ChartArea_noClick";n[n.ChartArea_noHover=16]="ChartArea_noHover"})(i.InteractionBehavior||(i.InteractionBehavior={}));kt=i.InteractionBehavior,(function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";
n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"})(d||(d={}));i.LegendPosition=d,(function(n){n[n.Max=0]="Max";n[n.Min=1]="Min";n[n.First=2]="First";n[n.Last=3]="Last";n[n.Every=4]="Every";n[n.Custom=5]="Custom"})(g||(g={}));i.DataLabelContext=g,(function(n){n[n.Callout=0]="Callout";n[n.Badge=1]="Badge"})(nt||(nt={}));i.DataLabelStyle=nt,(function(n){n[n.Ordinal=0]="Ordinal";n[n.Linear=1]="Linear";n[n.Time=2]="Time";n[n.Log=3]="Log"})(tt||(tt={}));i.Scale=tt,(function(n){n[n.None=0]="None";n[n.Low=1]="Low";n[n.High=2]="High"})(it||(it={}));i.AxisLabelPosition=it,(function(n){n[n.GreaterThan=0]="GreaterThan";n[n.LessThan=1]="LessThan"})(rt||(rt={}));i.ConditionOperator=rt,(function(n){n[n.General=0]="General";n[n.HorizontalLine=1]="HorizontalLine";n[n.VerticalLine=2]="VerticalLine";n[n.Uniform=3]="Uniform"})(ut||(ut={}));i.SeriesType=ut,(function(n){n[n.Default=0]="Default";n[n.Point=2]="Point";n[n.MultiplePointsSingleSeries=3]="MultiplePointsSingleSeries";n[n.MultiplePointsMultipleSeries=4]="MultiplePointsMultipleSeries"})
(ft||(ft={}));i.MetricRuleScope=ft,(function(n){n[n.AllTogether=0]="AllTogether";n[n.AllSeparately=1]="AllSeparately";n[n.SingleSeries=2]="SingleSeries"})(et||(et={}));i.MetricRuleAggregationScope=et,(function(n){n[n.CurrentXValue=0]="CurrentXValue";n[n.CurrentYValue=1]="CurrentYValue";n[n.MinY=2]="MinY";n[n.MaxY=3]="MaxY";n[n.AverageY=4]="AverageY";n[n.SumY=5]="SumY";n[n.Count=6]="Count";n[n.CustomValue=7]="CustomValue"})(ot||(ot={}));i.MetricRuleAggregationType=ot;st=(function(){function n(){this.context=r(0);this.style=r(0);this.formatter=r(null)}return n})();i.DataLabel=st;dt=(function(n){function t(){n.apply(this,arguments);this.chartItems=u();this.context=r(5)}return __extends(t,n),t})(st);i.CustomDataLabel=dt;c=(function(){function t(t,i){this.name=r("");this.scale=r(0);this.reverseDomain=r(!1);this.ticks=r(0);this.position=r(3);this.positionIndex=r(0);this.showAxis=r(!0);this.autoScaleUnit=r(!0);this.showName=r(!1);this.showLabel=r(1);this.labelPadding=r(50);this.rotateLabel=r(0);this.showAxisLine=
r(!1);this.showTickMarks=r(!1);this.showGridLines=r(!1);this.inputFormat=r("");this.outputFormat=r("");this.formatOptions=r(null);this.xSliderOutputFormat=r(null);this.xSliderFormatOptions=r(null);this.displayLabelFormatter=r("");this.xSliderCalloutDisplayFormatter=r("");this.min=r(null);this.max=r(null);this.unit=r(n.UnitConversion.Unit.None);this.displaySIUnit=r(!1);this.defaultAxisPadding=r(null);this.customAxisPadding=r(null);t&&this.position(t);i&&this.scale(i)}return t})();i.Axis=c;gt=(function(){function n(n,t,i,r,u,f,e){this.years=n;this.months=t;this.days=i||0;this.hours=r||0;this.minutes=u||0;this.seconds=f||0;this.milliseconds=e||0}return n})();i.DateSpan=gt;ni=(function(){function n(n){this.value=n}return n})();i.NumberSpan=ni;h=(function(){function n(){this.type=r(0);this.name=r(String(bt=bt+1&65535))}return n})();i.SeriesBase=h;ti=(function(n){function t(){n.apply(this,arguments);this.values=u();this.xAxisName=r("");this.yAxisName=r("")}return __extends(t,n),t})(h);i.Series=ti;ii=
(function(n){function t(){n.apply(this,arguments);this.type=r(3);this.startXValue=r(null);this.span=r(null);this.yValues=u();this.xAxisName=r("");this.yAxisName=r("")}return __extends(t,n),t})(h);i.UniformSeries=ii;ri=(function(n){function t(){n.apply(this,arguments);this.type=r(1);this.value=r(null);this.axisName=r("")}return __extends(t,n),t})(h);i.LineSeries=ri;ui=(function(){function n(n){n?this._initOptions(n):this._initLegacyDefaults()}return n.prototype._initOptions=function(n){wt(this,n,["scope","scopeSeriesName","metrics"])},n.prototype._initLegacyDefaults=function(){this.scope=r(null);this.scopeSeriesName=r(null);this.metrics=u()},n})();i.MetricRule=ui;fi=(function(){function n(n){n?this._initOptions(n):this._initLegacyDefaults()}return n.prototype._initOptions=function(n){wt(this,n,["aggregationScope","aggregationType","aggregationSeriesName","showBarColor","colorCode","hatchingPattern","formatOptions","title","unit","customValue","defaultInfoBalloon"])},n.prototype._initLegacyDefaults=
function(){this.aggregationScope=r(2);this.aggregationType=r(4);this.aggregationSeriesName=r(null);this.showBarColor=r(!0);this.colorCode=r(null);this.hatchingPattern=r(null);this.outputFormat=r(null);this.formatOptions=r(null);this.title=r(null);this.unit=r(null);this.customValue=r(null);this.defaultInfoBalloon=r(null)},n})();i.MetricRuleMetric=fi;ht=(function(){function n(){this.chartViewIndex=r(null);this.seriesViewIndex=r(null)}return n})();i.SeriesId=ht;ei=(function(n){function t(){n.apply(this,arguments);this.chartItems=u()}return __extends(t,n),t})(ht);i.SeriesSubset=ei;ct=(function(){function n(){}return n})();i.Events=ct;e=(function(){function n(){}return n})();i.SeriesChartEvents=e;lt=(function(){function n(){}return n})();i.BarChartEvents=lt;oi=(function(){function n(){this.seriesName=r("");this.conditionOperator=r(0);this.interpolation=r(0)}return n})();i.RenderingCondition=oi;o=(function(){function n(){this.seriesName=r("");this.displayName=r("");this.cssClass=r("");this.dataLabels=u();
this.showTooltip=r(!1);this.tooltipFormatter=r("Series: '{0}' Point: {1} Value: {2}");this.renderingConditions=u();this.selectable=r(!0);this.hoverable=r(!0);this.hideFromLegend=r(!1);this.autoGenerated=!1}return n})();i.SeriesView=o;f=Object.create(null);at=(function(n){function t(){n.apply(this,arguments);this.interpolation=r(0);this.lineStyle=r(0);this.showTooltip=r(!1);this.showDataPoints=r(!0)}return __extends(t,n),t})(o);i.LineChartSeriesView=at;l=(function(n){function t(){n.apply(this,arguments);this.interpolation=r(0);this.areaHatchingPattern=r(0);this.showTooltip=r(!1)}return __extends(t,n),t})(o);i.AreaChartSeriesView=l;vt=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(l);i.StackedAreaChartSeriesView=vt;yt=(function(n){function t(){n.apply(this,arguments);this.radius=r(2);this.showTooltip=r(!1)}return __extends(t,n),t})(o);i.ScatterChartSeriesView=yt;s=(function(){function n(){this.chartType=r(undefined);this.seriesView=u()}return n.prototype.newSeriesView=
function(){return null},n})();i.View=s;pt=(function(n){function t(){n.apply(this,arguments);this.chartType=r(0);this.seriesView=u();this.events=new e}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=0,t})(s);i.LineChartView=pt;f[pt.defaultChartType]=function(n){var t=new at;return n&&t.seriesName(n.name()),t};si=(function(n){function t(){n.apply(this,arguments);this.chartType=r(1);this.seriesView=u();this.events=new e}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=1,t})(s);i.AreaChartView=si;f[1]=function(n){var t=new l;return n&&t.seriesName(n.name()),t};hi=(function(){function n(){this.enableSparseSeries=r(!0);this.chartType=r(undefined);this.seriesView=u()}return n.prototype.newSeriesView=function(){return null},n})();i.StackedChartView=hi;ci=(function(){function n(){this.chartType=r(6);this.seriesView=u();this.events=new e;this.lineState=r(0);this.enableSparseSeries=r(
!0)}return n.prototype.newSeriesView=function(n){return f[this.chartType()](n)},n.defaultChartType=6,n})();i.StackedAreaChartView=ci;f[6]=function(n){var t=new vt;return n&&t.seriesName(n.name()),t};li=(function(n){function t(){n.apply(this,arguments);this.chartType=r(2);this.seriesView=u();this.events=new e}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=2,t})(s);i.ScatterChartView=li;f[2]=function(n){var t=new yt;return n&&t.seriesName(n.name()),t};ai=(function(n){function t(t){n.call(this);this.barPaddingRatio=r(.3);this.enableSparseSeries=r(!0);this.barChartType=r(0);this.xAxisSpan=r(null);this.events=new lt;this.barChartType(t);switch(t){case 0:this.chartType(3);break;case 1:this.chartType(4);break;case 2:this.chartType(5)}}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t})(s);i.BarChartView=ai;f[3]=f[4]=f[5]=function(n){var t=new o;return n&&t.seriesName(n.name()),t};vi=(function()
{function n(n,t){this.xValue=n;this.yValue=t}return n})();i.ChartItem=vi;yi=(function(t){function i(f){var e=this;t.call(this,f);this.title=r("");this.showTitle=r(!1);this.width=r(0);this.height=r(0);this.noDataMessage="No data to display";this.series=u();this.xAxis=new c;this.yAxis=new c(4,1);this.secondaryXAxes=u();this.secondaryYAxes=u();this.views=u();this.legendPosition=r(0);this.interactionBehavior=r(kt.All);this.autogenerateSeriesViews=r(!0);this.events=new ct;this.seriesSelections=u();this.seriesHovers=u();this.hoveredID=u();this.metricsRules=u();this.enableTrackXSlider=r();this.xSliderCoordinate=r();this.xSliderFilterHoverThreshold=r();this.noData=r(!1);this.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(f);this.controlType=63;this.xAxis.showTickMarks(!0);this.yAxis.labelPadding(i.defaultYAxisLabelPadding);ko.reactor(this.lifetimeManager,(function(){if(e.autogenerateSeriesViews()){var n=e.series()||[],t=e.views();t.forEach((function(t){var r=t.seriesView.peek(),
u=r.filter((function(n){return n.autoGenerated})),f=u.filter((function(t){return n.some((function(n){return n.name.peek()===t.seriesName.peek()}))})),e=u.filter((function(n){return f.indexOf(n)<0})),o=n.filter((function(n){var t=n.name();return!f.some((function(n){return t===n.seriesName.peek()}))}));e.forEach((function(n){return r.remove(n)}));o.forEach((function(n){var u=i.getDefaultSeriesViewCreator(t.chartType())(n,t);u.autoGenerated=!0;r.push(u)}));t.seriesView(r)}))}}))}return __extends(i,t),i.getDefaultSeriesViewCreator=function(n){return f[n]},i.defaultYAxisLabelPadding=38,i})(t.Loadable.ViewModel);i.ViewModel=yi})(r=i.Chart||(i.Chart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){"use strict";var o=n,s=ko.observable,h=ko.observableArray,u,r,f,e;(function(n){n[n.Circle=1]="Circle"})(i.EntityType||
(i.EntityType={}));u=i.EntityType;r=(function(){function n(n){this.entityType=n}return n})();i.Entity=r;f=(function(n){function t(t){n.call(this,u.Circle);this.accesses=t.accesses;this.location=t.location;this.cssColorClass=t.cssColorClass;this.city=t.city;this.country=t.country}return __extends(t,n),t})(r);i.Circle=f;e=(function(n){function t(t,i){n.call(this,t);this.controlType=96;o.isNullOrUndefined(i)&&(i={});this.entities=i.entities||h();this.showMetrics=i.showMetrics||s(!0)}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=e})(r=i.MapV2||(i.MapV2={}))})(r=i.Unsupported||(i.Unsupported={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u=(function(n){function t(t){n.call(this,t);this.gaugeSize=i(0);this.groupInfos=r();this.itemsDataArray=r();this.
itemSetting=i();this.resetItems=i(!0);this.valueInitialized=!1;this.total=i(100);this.startOffset=i(-90);this.totalFormat=i("{0}");this.unitFormat=i("");this.infoFormat=i("");this.numberFormatOptions=i({minimumFractionDigits:0,maximumFractionDigits:1});this.hoverInfoFormat=i("{0} {1}{2}");this.selectedInfoFormat=i("{0}/{1}{2}");this.hoveredUnit=i("%");this.disableSelectOnClick=i(!1);this.showCenter=i(!0);this.noData=i(!1);this._msPortalFxRerenderTrigger=i(0);this.controlType=65}return __extends(t,n),t.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},t})(n.Loadable.ViewModel);t.ViewModel=u})(i=t.Donut||(t.Donut={}))})(t=n.Visualization||(n.Visualization={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f=(function(){function n(n){this.limit=i(
);this.cssClass=i();this.limit(n)}return n})(),r;t.Threshold=f;r=(function(n){function t(t){n.call(this,t);this.value=i();this.unit=i();this.caption=i();this.footerValue=i();this.footerUnit=i();this.footerCaption=i();this.gaugeValue=i(0);this.gaugeMaxValue=i(100);this.gaugePresentationArc=i(270);this.gaugeThresholds=u();this.controlType=66}return __extends(t,n),t})(n.ViewModels.Controls.SingleSetting.ViewModel);t.ViewModel=r})(i=t.Gauge||(t.Gauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,h=ko.observableArray,c=n.Base.Internal,l=n.Helpers,ft=n.ViewModels,a=c.ObservableMap,v=ft.SelectableSet,et=l.resolve,y=l.reject,p=ko.unwrap,u=et(),e,w,b,k,d,g,ot,nt,tt,o,st,it,f,s,rt,ut;(function(n){n[n.None=0]="None";n[n.Horizontal=1]="Horizontal";n[n.Vertical=2]="Vertical"})(i.GraphScrollBars||
(i.GraphScrollBars={}));e=i.GraphScrollBars,(function(n){n[n.AlwaysVisible=0]="AlwaysVisible";n[n.AlwaysHidden=1]="AlwaysHidden";n[n.AppearWhenNodesOutsideOfTheView=2]="AppearWhenNodesOutsideOfTheView"})(i.GraphScrollBarsVisibilityMode||(i.GraphScrollBarsVisibilityMode={}));w=i.GraphScrollBarsVisibilityMode,(function(n){n[n.Blade=0]="Blade";n[n.Document=1]="Document";n[n.Document2=2]="Document2";n[n.Document3=3]="Document3"})(i.GraphEditorSkinStyle||(i.GraphEditorSkinStyle={}));b=i.GraphEditorSkinStyle,(function(n){n[n.NodeCenter=0]="NodeCenter";n[n.NodePort=1]="NodePort"})(i.EdgeConnectionStrategy||(i.EdgeConnectionStrategy={}));k=i.EdgeConnectionStrategy,(function(n){n[n.None=0]="None";n[n.MoveEntities=1]="MoveEntities";n[n.AddRemoveEntities=2]="AddRemoveEntities"})(i.GraphEditorCapabilities||(i.GraphEditorCapabilities={}));d=i.GraphEditorCapabilities,(function(n){n[n.Rebuild=0]="Rebuild";n[n.Incremental=1]="Incremental"})(i.EntityRenderMode||(i.EntityRenderMode={}));g=i.EntityRenderMode,(function(
n){n[n.Normal=1]="Normal";n[n.Strong=2]="Strong"})(i.EdgeStrength||(i.EdgeStrength={}));ot=i.EdgeStrength,(function(n){n[n.Single=1]="Single";n[n.Double=2]="Double"})(i.EdgeType||(i.EdgeType={}));nt=i.EdgeType,(function(n){n[n.Solid=1]="Solid";n[n.Dotted=2]="Dotted";n[n.Dashed=3]="Dashed"})(i.EdgeStyle||(i.EdgeStyle={}));tt=i.EdgeStyle,(function(n){n[n.None=1]="None";n[n.Arrow=2]="Arrow";n[n.Circle=3]="Circle"})(i.EdgeMarker||(i.EdgeMarker={}));o=i.EdgeMarker,(function(n){n[n.GraphNode=0]="GraphNode";n[n.GraphEdge=1]="GraphEdge"})(i.GraphEntityType||(i.GraphEntityType={}));st=i.GraphEntityType;it=(function(){function n(n,t,i,r,u){u===void 0&&(u=null);this.id=n;this.entityType=t;this.detailBlade=i;this.detailBladeInputs=r;u&&(this.extension=u)}return n})();i.SelectedGraphEntity=it;f=(function(){function t(t){t===void 0&&(t=n.getUniqueId());this.commandGroup=r("");this.selected=r(!1);this.selectable=r(!0);this.id=r(t);this.dimmed=r(!1)}return t})();i.GraphEntity=f;s=(function(n){function t(t,i){n.call(
this);this.strength=r(1);this.type=r(nt.Single);this.style=r(tt.Solid);this.startMarker=r(o.Circle);this.endMarker=r(o.Arrow);this.startNodePadding=r(7);this.endNodePadding=r(7);this.selectable(!1);this.startNodeId=r(t.id());this.endNodeId=r(i.id())}return __extends(t,n),t})(f);i.GraphEdge=s;rt=(function(n){function t(t){var i,r;(n.call(this),this.extensionViewModel=null,this.extensionTemplate="",this.detailBlade=null,this.detailBladeInputs=null,this.initialRect={x:0,y:0,height:85,width:85},i=this.initialRect,t)&&(r=undefined,t.x!==r&&(i.x=t.x),t.y!==r&&(i.y=t.y),t.height!==r&&(i.height=t.height),t.width!==r&&(i.width=t.width))}return __extends(t,n),t})(f);i.GraphNode=rt;ut=(function(n){function t(f,o){var l=this,p;o===void 0&&(o=b.Blade);n.call(this,f);this.scrollBars=r(e.Horizontal|e.Vertical);this.scrollBarsVisibilityMode=r(w.AlwaysVisible);this.edgeConnectionStrategy=r(k.NodeCenter);this.editorCapabilities=r(d.None);this.graphNodes=new a;this.edges=new a;this.gridResolution=r(10);this.
widgetAttached=r(!1);this.layoutChanged=r(0);this.getLayoutNoOverlaps=r(null);this.setNodeRects=r((function(){throw new Error("Function called before widget was initialized.");}));this.getNodeRects=r((function(n){n===void 0&&(n=[]);throw new Error("Function called before widget was initialized.");}));this.rectSelectionMode=r(!1);this.entityRenderMode=r(g.Rebuild);this.zoomToFit=r((function(){return u}));this.zoomToFitPadding=r(100);this.zoomIn=r((function(){return u}));this.zoomOut=r((function(){return u}));this.zoomTo100Percent=r((function(){return u}));this.focusOnNode=r((function(){return Q(!0)}));this.focusOnEdge=r((function(){return Q(!0)}));this.bringRectIntoView=r((function(){return Q(!0)}));this.disableMouseWheelZoom=r(!1);this.enableLineage=r(!1);this.controlType=67;this.styleSkin=o;var nt=new c.ObservableMapUnion(this.lifetimeManager,this.graphNodes,this.edges),tt=t.itemMatchesSelection,it=t.createSelection;this.selectableSet=new v(h(),tt,it);p=this.selectableSet;this.selection=new v(h(),tt,it);
p.selectedItems.subscribe(f,(function(n){var t=[];n.forEach((function(n){var i=nt.lookup(n.id);i&&t.push(i)}));l.selection.selectedItems(t)}));p.activatedItems.subscribe(f,(function(n){var t=[];n.forEach((function(n){var i=nt.lookup(n.id);i&&t.push(i)}));l.selection.activatedItems(t)}));this.addEdge=function(n){return u.then((function(){try{var i=l.graphNodes,t,u,f;if(n)if(i.lookup(n.startNodeId))if(i.lookup(n.endNodeId))u={id:r(n.startNodeId)},f={id:r(n.endNodeId)},t=new s(u,f),l.edges.put(t.id(),t);else throw"The edge end node is not present in the list of the view model graph nodes.";else throw"The edge start node is not present in the list of the view model graph nodes.";else throw"The edge is null or undefined.";}catch(e){return y(e)}}))};this.deleteEntities=function(n,t){return u.then((function(){try{i.GraphEntitiesDeletion.run(l,n,t)}catch(r){return y(r)}}))}}return __extends(t,n),t.itemMatchesSelection=function(n,t){return p(n.id)===p(t.id)},t.createSelection=function(n){return n},t})(t.Loadable.
ViewModel);i.ViewModel=ut})(r=i.Graph||(i.Graph={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.Base.Internal.ObservableMap,r=(function(){function n(){}return n.run=function(n,t,r){if(t.length>0||r.length>0){var f=new i,u=new i,e=n.edges,o=n.graphNodes;t.forEach((function(t){if(n.graphNodes.lookup(t.id))u.put(t.id,t);else throw"The node "+t.id+" is not present at the graphNodes map.";}));r.forEach((function(t){if(n.edges.lookup(t.id))f.put(t.id,t);else throw"The edge "+t.id+" is not present at the edges map.";}));(f.count>0||u.count>0)&&e.modify((function(){e.toArray().forEach((function(n){var t=n.id();(u.lookup(n.startNodeId())||u.lookup(n.endNodeId()))&&f.put(t,{id:t});f.lookup(t)&&e.remove(t)}))}));u.count>0&&o.modify((function(){u.forEach((function(n){o.remove(n.id)}))}));f.dispose();u.dispose(
)}},n})();t.GraphEntitiesDeletion=r})(i=t.Graph||(t.Graph={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,l=70,a=120,v=16,y=16,e,u,p,o,s,r,h,f,c;(function(n){n[n.HexagonLayout=1]="HexagonLayout"})(t.Extensions||(t.Extensions={}));e=t.Extensions;u=(function(){function n(n,t){this.latitude=n;this.longitude=t}return n})();t.Location=u,(function(n){n[n.Solid=0]="Solid";n[n.AnimatedDashed=1]="AnimatedDashed"})(t.LinkType||(t.LinkType={}));p=t.LinkType;o=(function(){function n(){this.id="";this.location=new u(0,0);this.metadata=new r}return n})();t.Item=o,(function(n){n[n.Source=0]="Source";n[n.Target=1]="Target";n[n.IconOnly=2]="IconOnly"})(t.ItemType||(t.ItemType={}));s=t.ItemType;r=(function(){function n(){this.icon=i({type:0,data:"",palette:0});this.iconWidth=i(y);this.iconHeight=
i(v)}return n})();t.ItemMetadata=r;h=(function(n){function t(){n.apply(this,arguments);this.type=s.Target;this.text=i("");this.hasFill=i(!1);this.itemScale=i(1)}return __extends(t,n),t})(r);t.HexagonLayoutItemMetadata=h;f=(function(){function n(){}return n})();t.Events=f;c=(function(n){function t(t,r,u,o){r===void 0&&(r=i([]));u===void 0&&(u=0);o===void 0&&(o={});t&&t.createChildLifetime||(t=undefined,r=arguments[0],u=arguments[1],o=arguments[2],r===void 0&&(r=i([])),u===void 0&&(u=0),o===void 0&&(o={}));n.call(this,t);this.controlType=68;this.events=new f;this.width=i(505);this.height=i(319);this.items=r;this.extensions=u;this.extensionOptions=o;this.extensions&e.HexagonLayout&&(this.extensionOptions.hexagonLayout=$.extend(this._getDefaultOptions(),this.extensionOptions.hexagonLayout))}return __extends(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this)},t.prototype._getDefaultOptions=function(){return{showLinks:i(!1),links:i(),rows:i(l),columns:i(a)}},t})(n.Loadable.ViewModel);
t.ViewModel=c})(i=t.Map||(t.Map={}))})(t=n.Visualization||(n.Visualization={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,h=ko.observableArray,f,e,u,c,o,s;(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.ExtraSmall=4]="ExtraSmall"})(i.Size||(i.Size={}));f=i.Size,(function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"})(i.Orientation||(i.Orientation={}));e=i.Orientation,(function(n){n[n.Top=1]="Top";n[n.Left=2]="Left";n[n.Right=4]="Right";n[n.Bottom=8]="Bottom"})(i.Alignment||(i.Alignment={}));u=i.Alignment,(function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"})(i.HatchingPattern||(i.HatchingPattern={}));c=i.HatchingPattern;o=(function(t){function i()
{t.apply(this,arguments);this.barCssClass=r("");this.showBarColor=r(!0);this.hatchingPattern=r(n.ViewModels.Controls.Visualization.Metrics.HatchingPattern.Solid);this.unitAlignment=r(u.Right);this.captionAlignment=r(u.Top);this.hide=r(!1);this.prioritized=r(!1)}return __extends(i,t),i})(n.ViewModels.Controls.SingleSetting.ViewModel);i.SingleMetric=o;s=(function(n){function t(t){n.call(this,t);this.items=h();this.orientation=r(e.Horizontal);this.size=r(f.Large);this.visible=r(!0);this.controlType=69}return __extends(t,n),t})(t.Loadable.ViewModel);i.ViewModel=s})(r=i.Metrics||(i.Metrics={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var o=n.Base.Diagnostics,u=new o.Log("MsPortalFx/ViewModels/Controls/ProgressBar"),f=ko.observable,r,e;(function(n){n[n.InProgress=0]="InProgress";n[n.Error=1]="Error";
n[n.Warning=2]="Warning";n[n.Success=3]="Success";n[n.Indeterminate=4]="Indeterminate";n[n.IndeterminateVertical=5]="IndeterminateVertical"})(i.StatusType||(i.StatusType={}));r=i.StatusType;e=(function(n){function t(t){var i=this;n.call(this,t);this.valuePercentage=f(0);this.status=f(r.InProgress);this.controlType=71;this.valuePercentage.subscribe(t,(function(n){i.status()!==r.Indeterminate&&((isNaN(n)||n===null)&&u.error("View model valuePercentage is "+n+" which is not number."),(n>100||n<0)&&u.error("View model valuePercentage is "+n+" which is not between 0 to 100."))}))}return __extends(t,n),t})(t.Loadable.ViewModel);i.ViewModel=e})(r=i.ProgressBar||(i.ProgressBar={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.errorWarningShape=
i(0);this.gaugeSize=i(0);this.instance=i(55);this.instanceQuota=i(65);this.total=i(75);this.totalQuota=i(80);this.totalCaption=i("total is {2}");this.showCenter=i(!0);this.omitTotal=i(!1);this.noQuota=i(!1);this.maximum=i(100);this.startOffset=i(-90);this.unit=i("%");this.valueDisplayFormat=i("{0}");this.hideTick=i(!1);this.controlType=72}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(i=t.QuotaGauge||(t.QuotaGauge={}))})(t=n.Visualization||(n.Visualization={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observableArray,u=n.shallowCopyFromObject,f=0,o=(function(){function n(n){var n=$.extend(this._getDefaultOptions(),n);this._initOptions(n)}return n.prototype._getDefaultOptions=function(){return{name:String(f=f+1&65535),values:r()}},n.prototype._initOptions=function(n){var t=this,i=n;u(t,i,["name","values","viewOptions"])}
,n})(),e;i.Series=o;e=(function(n){function t(t,i){n.call(this,t);this.controlType=97;var i=$.extend(this._getDefaultOptions(),i);this._initOptions(i)}return __extends(t,n),t.prototype._getDefaultOptions=function(){return{series:r()}},t.prototype._initOptions=function(n){var t=this,i=n;u(t,i,["series","xAxis","yAxis","chartType","viewOptions","metricsRules","legendPosition"])},t})(t.Loadable.ViewModel);i.ViewModel=e})(r=i.SimpleChart||(i.SimpleChart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.gaugeSize=i(0);this.hideTick=i(!0);this.maximum=i(100);this.startOffset=i(-90);this.unit=i("");this.current=i(55);this.captionDisplayFormat=i("");this.valueDisplayFormat=i("{0}");this.controlType=73}return __extends(t,n),t})(n.ViewModels.
Controls.Loadable.ViewModel);t.ViewModel=r})(i=t.SingleValueGauge||(t.SingleValueGauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var e=FxImpl.Extension,i=ko.observable,u=n.Resources.Strings,o=412,f,r,s;(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(f||(f={}));t.Type=f;r=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})();t.Status=r;s=(function(){function n(n){var t=this,f,s;this.downloadStatus=i();f=n.addDefaultAuthorizationToken;f&&(this.authorizationOptions={resourceName:f!==!0?n.addDefaultAuthorizationToken.resourceName:""});this.authorizationToken=n.authorizationToken||i("");this.downloadType=n.downloadType||i(1);this.headers=n.headers||i({});this.httpMethod=n.httpMethod||i("GET");this.httpRequestContent=n.httpRequestContent||i("");this.httpRequestContentType=
n.httpRequestContentType||i("application/json");this.targetFileName=n.targetFileName||i("");this.targetUri=n.targetUri||i("");this.errorMessage=n.errorMessage||i("");this.targetUriCallback=n.targetUriCallback;this.showUriCallbackConfirmationDialog=n.showUriCallbackConfirmationDialog;this.uriCallbackConfirmationDialogOptions=n.uriCallbackConfirmationDialogOptions;this.showDownloadProgressDialog=n.showDownloadProgressDialog||i(!1);this.downloadProgressDialogOptions=n.downloadProgressDialogOptions;this.onStart=n.onStart;this.onEnd=n.onEnd;this.authorizationOptions&&(s={resourceName:this.authorizationOptions.resourceName||"",cloudName:e.selfCloudName},e.getRuntime().getAuthorizationToken(s).then((function(n){n&&n.header?t.authorizationToken(n.header):t.downloadStatus(new r(u.FileDownloadCommand.fileDownloadErrorStatus,o,u.FileDownloadCommand.authTokenNotAvailable))}),(function(n){t.downloadStatus(new r(u.FileDownloadCommand.fileDownloadErrorStatus,o,n))})))}return n})();t.Context=s})(i=t.FileDownload||
(t.FileDownload={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.Resources.Strings.FileDownload,f=ko.observable,u=(function(t){function i(i,u){i&&i.createChildLifetime||(i=undefined,u=arguments[0]);t.call(this,i);this.controlType=82;this.type=n.ViewModels.Toolbars.ToolbarItemType.FileDownloadButton;this.context=u.context;this.label=n.initObservable(u.label,"");this.disabled=n.initObservable(u.disabled,!1);this.unauthorizedMessage=n.initObservable(u.unauthorizedMessage,r.unauthorizedText);this.asLink=u.asLink;this.ariaLabel=u.ariaLabel?n.initObservable(u.ariaLabel):this.label}return __extends(i,t),i.prototype.unauthorized=function(n){this.unauthorizedMessage(n||r.unauthorizedText);this.disabled(!0)},i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.FileDownloadButton||(t.FileDownloadButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels=
{}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var r,u,i;(function(n){n[n.PlayReady=0]="PlayReady";n[n.Widevine=1]="Widevine";n[n.AES=2]="AES"})(t.ProtectionType||(t.ProtectionType={}));r=t.ProtectionType,(function(n){n[n.Smooth=0]="Smooth";n[n.Dash=1]="Dash";n[n.HLS=2]="HLS";n[n.ProgressiveMP4=3]="ProgressiveMP4"})(t.StreamingFormatMimeType||(t.StreamingFormatMimeType={}));u=t.StreamingFormatMimeType;i=(function(n){function t(t,i){n.call(this,t);this.controlType=109;i=i||{source:{url:""}};this.autoplay=i.autoplay||!1;this.controls=i.controls||!0;this.poster=i.poster||"";this.logo=i.logo||{enabled:!1};this.source=i.source}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(i=t.AzureMediaPlayer||(t.AzureMediaPlayer={}))})(t=n.Unsupported||(n.Unsupported={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t;(function(
t){var i;(function(t){var i=MsPortalFx.ViewModels.Controls.HotSpot.BaseViewModel,r=n.Composition.Selectable,u=(function(n){function t(t,i,u){n.call(this,t);i&&(this.selectable=new r.Selectable2(i));this.clickableDuringCustomize=!!u}return __extends(t,n),t})(i);t.ViewModel2=u})(i=t.HotSpot||(t.HotSpot={}))})(t=n.Controls||(n.Controls={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var r=ko.computed,i=ko.observable,f=ko.observableArray,e=ko.utils.arrayPushAll,u=(function(t){function u(u,o,s,h,c,l){var a=this;l===void 0&&(l=null);t.call(this,u);this.enableValidation=i(!1);this.valid=i(!0);this.validate=i(0);this.label=i();this.labelPosition=i();this.validations=f();this.validationResults=f();this.delayValidationTimeout=i(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout);this.enabled=i(!0);this.infoBalloonContent=i(c);this.initialValue=r((function(){var n=o.getOriginalObservable();return n?n():l}));this.value=r({read:function(){var n=o.getEditableObservable(
);return n?n():l},write:function(n){var t=o.getEditableObservable();if(t)t(n);else throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.label(s);this.labelPosition(n.ViewModels.Forms.LabelPosition.Top);h&&e(this.validations,h);c&&(this.infoBalloonContent=i(c));this.dirty=ko.observable(!1);r(this.lifetimeManager,(function(){a.setDirty(a.value()!==a.initialValue())}));this._enableValidationReactor=r((function(){a.enableValidation(!!(o.getOriginalObservable()&&o.getEditableObservable()))}));this.performValidation=i(null);this.ensureValidation=i(0);this._msPortalFxClearValidation=i();this._msPortalFxTriggerValidation=i()}return __extends(u,t),u.prototype.dispose=function(){this.initialValue&&this.initialValue.dispose();this.value&&this.value.dispose();var n=this._enableValidationReactor;n&&(n.dispose(),this._enableValidationReactor=null);t.prototype.dispose.call(this)},u.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();if(n)return n(
);Q()},u.prototype.triggerValidation=function(){var n=this._msPortalFxTriggerValidation;return n.fxAwaitAndRun(this.lifetimeManager,(function(n){return!!n})).then((function(n){return n()}))},u.prototype.setDirty=function(n){try{this.dirty(n)}catch(t){}},u})(n.ViewModels.Controls.Loadable.ViewModel),o,s,h,c,l,a;t.Field=u;o=(function(n){function t(t,i,u,f,e){var o=this;n.call(this,t,i,u,f,e);this.empty=r((function(){return!o.value()}))}return __extends(t,n),t.prototype.dispose=function(){this.empty&&this.empty.dispose();n.prototype.dispose.call(this)},t})(u);t.NullableField=o;s=(function(n){function t(t,r,u,f,e){n.call(this,t,r,u,f,e);this.editing=i(!1)}return __extends(t,n),t})(o);t.EditableField=s;h=(function(n){function t(t,i,r,u,o,s){n.call(this,t,i,r,o,s,u.length===0||u[0].options().length===0?undefined:u[0].options()[0].value);this.groups=f();e(this.groups,u)}return __extends(t,n),t})(u);t.GroupsField=h;c=(function(n){function t(t,i,r,u,o,s){if(u.length===0)throw new Error("'values' array must contain one or more FormOption values.");
n.call(this,t,i,r,o,s,u[0].value);this.options=f();e(this.options,u)}return __extends(t,n),t})(u);t.OptionsField=c;l=(function(n){function t(t,r,u,f,e,o,s,h,c,l){r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=0);e===void 0&&(e=10);o===void 0&&(o=[]);s===void 0&&(s=!1);h===void 0&&(h=null);c===void 0&&(c=null);l===void 0&&(l=1);n.call(this,t,r,u,o,h,c);this.showStepMarkers=i(s);this.min=i(f);this.max=i(e);this.step=i(l)}return __extends(t,n),t})(u);t.SliderBaseField=l;a=(function(n){function t(t,r,u,f,e){n.call(this,t,r,u,f,e);this.editing=i(!1);this.valueUpdateTrigger=0}return __extends(t,n),t})(s);t.TypableField=a})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var u=n.ViewModels.Controls.Forms.EditableCombo,i=ko.observable,r=(function(n){function t(t,r,u,f,e,o){n.call(this,t,r,u,f,o);this.dropDownWidth=i(1);this.emptyValueText=i(e);this.popupAlignment=3;this.inputAlignment=10}return __extends(t,n),t})(t.EditableField);
t.EditableComboField=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.isObservable,r=(function(){function n(n,r){this.text=t(n)?n:i(n);this.value=t(r)?r():r}return n})(),u;n.Option=r;u=(function(n){function r(r,u,f){n.call(this,r,u);f!==undefined&&(this.disabled=t(f)?f:i(f))}return __extends(r,n),r})(r);n.DisablableOption=u})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r,u,f){n.call(this,i,r,u);f!==undefined&&(this.selected=ko.isObservable(f)?f:t(f))}return __extends(i,n),i})(n.DisablableOption);n.SelectableOption=i})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Invalid=0]="Invalid";n[n.Section=1]="Section";n[n.TextBox=
2]="TextBox";n[n.DropDown=3]="DropDown";n[n.OptionsGroup=4]="OptionsGroup";n[n.Password=5]="Password";n[n.Slider=6]="Slider";n[n.CheckBox=7]="CheckBox";n[n.MultiselectDropDown=8]="MultiselectDropDown";n[n.RangeSlider=9]="RangeSlider";n[n.NumericTextBox=10]="NumericTextBox";n[n.Selector=11]="Selector";n[n.FilterCombo=12]="FilterCombo";n[n.MultiLineTextBox=13]="MultiLineTextBox";n[n.DateTimeCombo=14]="DateTimeCombo";n[n.DynamicSection=15]="DynamicSection";n[n.Attachment=16]="Attachment";n[n.StringList=17]="StringList";n[n.HtmlEditor=18]="HtmlEditor";n[n.History=19]="History";n[n.ArtifactLinks=20]="ArtifactLinks";n[n.Splitter=21]="Splitter";n[n.TriStateCheckBox=22]="TriStateCheckBox";n[n.CustomHtml=23]="CustomHtml";n[n.TimePicker=24]="TimePicker";n[n.DatePicker=25]="DatePicker";n[n.DateTimePicker=26]="DateTimePicker";n[n.DateTimeRangePicker=27]="DateTimeRangePicker";n[n.FileUpload=28]="FileUpload";n[n.OAuthButton=29]="OAuthButton";n[n.TokenComboBox=30]="TokenComboBox";n[n.QueryBuilder=31]=
"QueryBuilder";n[n.DockedBalloon=32]="DockedBalloon";n[n.DiffEditor=33]="DiffEditor";n[n.DiffList=34]="DiffList";n[n.DiffView=35]="DiffView";n[n.DiscussionTimeline=36]="DiscussionTimeline";n[n.Editor=37]="Editor";n[n.Button=38]="Button";n[n.pcCheckBox=39]="pcCheckBox";n[n.CopyableLabel=40]="CopyableLabel";n[n.pcDateTimeCombo=41]="pcDateTimeCombo";n[n.pcDropDown=42]="pcDropDown";n[n.pcFilterCombo=43]="pcFilterCombo";n[n.pcGroupDropDown=44]="pcGroupDropDown";n[n.pcMultiLineTextBox=45]="pcMultiLineTextBox";n[n.pcMultiselectDropDown=46]="pcMultiselectDropDown";n[n.pcNumericTextBox=47]="pcNumericTextBox";n[n.pcOptionPicker=48]="pcOptionPicker";n[n.pcPassword=49]="pcPassword";n[n.pcRangeSlider=50]="pcRangeSlider";n[n.pcSelector=51]="pcSelector";n[n.pcSlider=52]="pcSlider";n[n.pcTextBox=53]="pcTextBox";n[n.pcGrid=54]="pcGrid";n[n.Gallery=55]="Gallery";n[n.pcListView=56]="pcListView";n[n.pcTreeView=57]="pcTreeView";n[n.LogStream=58]="LogStream";n[n.Scrollbar=59]="Scrollbar";n[n.Settings=60]="Settings";
n[n.SingleSetting=61]="SingleSetting";n[n.Toolbar=62]="Toolbar";n[n.Chart=63]="Chart";n[n.CsmTopology=64]="CsmTopology";n[n.Donut=65]="Donut";n[n.Gauge=66]="Gauge";n[n.Graph=67]="Graph";n[n.Map=68]="Map";n[n.Metrics=69]="Metrics";n[n.PairedTimeline=70]="PairedTimeline";n[n.ProgressBar=71]="ProgressBar";n[n.QuotaGauge=72]="QuotaGauge";n[n.SingleValueGauge=73]="SingleValueGauge";n[n.StepGauge=74]="StepGauge";n[n.Console=75]="Console";n[n.DeleteAssetConfirmation=76]="DeleteAssetConfirmation";n[n.HeroBanner=77]="HeroBanner";n[n.InfoBox=78]="InfoBox";n[n.Notice=79]="Notice";n[n.Picker=80]="Picker";n[n.FileUploadWidget=81]="FileUploadWidget";n[n.FileDownloadButton=82]="FileDownloadButton";n[n.CreatorAndSelector=83]="CreatorAndSelector";n[n.HotSpot=84]="HotSpot";n[n.CreatorAndSelectorV2=85]="CreatorAndSelectorV2";n[n.RangeSelection=86]="RangeSelection";n[n.LinkInfoBox=87]="LinkInfoBox";n[n.LinkHotSpot=88]="LinkHotSpot";n[n.PreviewTag=89]="PreviewTag";n[n.ConsoleV2=90]="ConsoleV2";n[n.CustomValueSlider=
91]="CustomValueSlider";n[n.DayPicker=92]="DayPicker";n[n.SearchBox=93]="SearchBox";n[n.PairedTimelineBadges=94]="PairedTimelineBadges";n[n.SpecComparisonTable=95]="SpecComparisonTable";n[n.MapV2=96]="MapV2";n[n.SimpleChart=97]="SimpleChart";n[n.GroupDropDown=98]="GroupDropDown";n[n.DurationPicker=99]="DurationPicker";n[n.SimpleButton=100]="SimpleButton";n[n.TextBlock=101]="TextBlock";n[n.TerminalEmulator=102]="TerminalEmulator";n[n.Grid2=103]="Grid2";n[n.List2=104]="List2";n[n.Tree2=105]="Tree2";n[n.AsyncFileUpload=106]="AsyncFileUpload";n[n.Wizard=107]="Wizard";n[n.IFrame=108]="IFrame";n[n.MediaPlayer=109]="MediaPlayer";n[n.Markdown=110]="Markdown";n[n.CustomRangeSlider=111]="CustomRangeSlider";n[n.PartPinner=112]="PartPinner";n[n.IFrameV2=113]="IFrameV2";n[n.ResourceFilter=114]="ResourceFilter";n[n.Menu=115]="Menu";n[n.Video=116]="Video";n[n.CustomControl=117]="CustomControl";n[n.Legend=118]="Legend";n[n.HeatMap=119]="HeatMap";n[n.Essentials=120]="Essentials";n[n.IntuneAppFileUpload=
121]="IntuneAppFileUpload";n[n.MonitorChart=122]="MonitorChart"})(t||(t={}));n.ControlType=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Invalid=0]="Invalid";n[n.Required=1]="Required";n[n.RegExMatch=2]="RegExMatch";n[n.NotRegExMatch=3]="NotRegExMatch";n[n.Contains=4]="Contains";n[n.NotContains=5]="NotContains";n[n.ContainsCharacters=6]="ContainsCharacters";n[n.NotContainsCharacters=7]="NotContainsCharacters";n[n.HasDigit=8]="HasDigit";n[n.HasLetter=9]="HasLetter";n[n.HasUpperCaseLetter=10]="HasUpperCaseLetter";n[n.HasLowerCaseLetter=11]="HasLowerCaseLetter";n[n.HasPunctuation=12]="HasPunctuation";n[n.Equals=13]="Equals";n[n.LengthRange=14]="LengthRange";n[n.MinLength=15]="MinLength";n[n.MaxLength=16]="MaxLength";n[n.Numeric=17]="Numeric";n[n.Range=18]="Range";n[n.MinValue=19]="MinValue";n[n.MaxValue=20]="MaxValue";n[n.Custom=21]="Custom";n[n.CaseInsensitiveComparison=22]="CaseInsensitiveComparison";n[n.
LocaleAwareCaseInsensitiveComparison=23]="LocaleAwareCaseInsensitiveComparison";n[n.Uri=24]="Uri"})(n.FormValidationType||(n.FormValidationType={}));var t=n.FormValidationType})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n){var t=typeof n!="string";return t&&(n=undefined),{valid:t,message:n}}function i(n){return Q(t(n))}n.getValidationResult=t;n.getValidationResultPromise=i;var r=(function(){function n(n){this.type=n}return n})();n.Validation=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r){n.call(this,i);this.message=r;this.isEmptyValid=t(!1)}return __extends(i,n),i})(n.Validation);n.StaticMessageValidation=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.CaseInsensitiveComparison,
r);this.compareTo=i}return __extends(i,t),i})(n.StaticMessageValidation);n.CaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.ContainsCharacters,r);this.characters=i}return __extends(i,t),i})(n.StaticMessageValidation);n.ContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Contains,r);this.searchString=i}return __extends(i,t),i})(n.StaticMessageValidation);n.ContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Custom);this.message=i;this.validate=r}return __extends(i,t),i})(n.Validation);n.CustomValidation=t})(t=n.ViewModels||(n.ViewModels=
{}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Equals,r);this.compareTo=i}return __extends(i,t),i})(n.StaticMessageValidation);n.EqualsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasDigit,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasDigitValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasLetter,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasLowerCaseLetter,i)}return __extends(i,t),i})(n.StaticMessageValidation);
n.HasLowerCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasPunctuation,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasPunctuationValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasUpperCaseLetter,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasUpperCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.Invalid,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.InvalidValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r,u){t.
call(this,n.FormValidationType.LengthRange,u);this.min=i;this.max=r}return __extends(i,t),i})(n.StaticMessageValidation);n.LengthRangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.LocaleAwareCaseInsensitiveComparison,r);this.compareTo=i}return __extends(i,t),i})(n.StaticMessageValidation);n.LocaleAwareCaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MaxLength,r);this.max=i}return __extends(i,t),i})(n.StaticMessageValidation);n.MaxLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MaxValue,r);this.max=i}return __extends(i,t),i})(n.StaticMessageValidation);
n.MaxValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MinLength,r);this.min=i}return __extends(i,t),i})(n.StaticMessageValidation);n.MinLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MinValue,r);this.min=i}return __extends(i,t),i})(n.StaticMessageValidation);n.MinValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.NotContainsCharacters,r);this.characters=i}return __extends(i,t),i})(n.StaticMessageValidation);n.NotContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var
t=(function(t){function i(i,r){t.call(this,n.FormValidationType.NotContains,r);this.searchString=i}return __extends(i,t),i})(n.StaticMessageValidation);n.NotContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r,u){t.call(this,n.FormValidationType.NotRegExMatch,r);this.pattern=i;this.successMessage=u||undefined}return __extends(i,t),i})(n.StaticMessageValidation);n.NotRegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.Numeric,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.NumericValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r,u){t.call(this,n.FormValidationType.Range,u);this.min=i;this.max=r}return __extends(i,t),i})(n.
StaticMessageValidation);n.RangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r,u){t.call(this,n.FormValidationType.RegExMatch,r);this.pattern=i;this.successMessage=u||undefined}return __extends(i,t),i})(n.StaticMessageValidation);n.RegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.Required,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.RequiredValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Uri,i);this.options=r||{}}return __extends(i,t),i})(n.StaticMessageValidation);n.UriValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var
t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){var t,i,u,f,e,o,s,h,c,l,a,v,y,r,p,w,b,k,d;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.Date=113]="Date";n[n.Number=114]="Number";n[n.HtmlTemplate=1e3]="HtmlTemplate";n[n.CheckBox=1001]="CheckBox";n[n.TextBox=1002]="TextBox";n[n.MultiselectDropDown=1003]="MultiselectDropDown";n[n.CheckBoxRowSelection=1004]="CheckBoxRowSelection";n[n.DropDown=1005]="DropDown"})(n.FormatType||(n.FormatType={}));t=n.FormatType;i=(function(){function n(n){this.type=n}return n})();n.BaseFormat=i;u=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.Html)}return __extends(i,n),i})(i);n.Html=u;f=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.Text)}return __extends(i,n),i})(i);n.Text=f;e=(function(n){function i(i){i===void 0&&(i={});n.
call(this,t.Date);this.dateFormat=i.dateFormat}return __extends(i,n),i})(i);n.Date=e;o=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.Number);this.numberFormat=i.numberFormat}return __extends(i,n),i})(i);n.Number=o;s=(function(n){function i(){n.call(this,t.Uri)}return __extends(i,n),i})(i);n.Uri=s;h=(function(n){function i(){n.call(this,t.Icon)}return __extends(i,n),i})(i);n.Icon=h;c=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.IconLookup);this.iconLookup=i.iconLookup}return __extends(i,n),i})(i);n.IconLookup=c;l=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.TextLookup);this.textLookup=i.textLookup}return __extends(i,n),i})(i);n.TextLookup=l;a=(function(n){function i(i){n.call(this,t.SvgIcon);i&&(this.height=i.height,this.width=i.width)}return __extends(i,n),i})(i);n.SvgIcon=a;v=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.SvgIconLookup);this.svgIconLookup=i.svgIconLookup;this.height=i.height;this.width=i.width}return __extends(i,n),i})(i);n.SvgIconLookup=
v;y=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.HtmlTemplate);this.template=i.template}return __extends(i,n),i})(i);n.HtmlTemplate=y;r=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.label=i.label;this.validations=i.validations;this.validate=i.validate;this.infoBalloonContent=i.infoBalloonContent}return __extends(t,n),t})(i);n.FieldFormat=r;p=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.CheckBox,i)}return __extends(i,n),i})(r);n.CheckBox=p;w=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.TextBox,i);this.emptyValueText=i.emptyValueText}return __extends(i,n),i})(r);n.TextBox=w;b=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.MultiselectDropDown,i);this.displaySeparator=i.displaySeparator;this.groups=i.groups;this.maxSelectAllowed=i.maxSelectAllowed;this.multiItemsDisplayFormat=i.multiItemsDisplayFormat;this.multiItemsMaxDisplayFormat=i.multiItemsMaxDisplayFormat;this.multiselect=i.multiselect;this.valueSeparator=i.valueSeparator}
return __extends(i,n),i})(r);n.MultiselectDropDown=b;k=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.CheckBoxRowSelection,i)}return __extends(i,n),i})(r);n.CheckBoxRowSelection=k;d=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.DropDown,i);this.options=i.options}return __extends(i,n),i})(r);n.DropDown=d})(t=n.Formatters||(n.Formatters={}))})(t=n.Grid2||(n.Grid2={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var i=MsPortalFx.ViewModels.Internal.Selection2.SelectableSet,r=MsPortalFx.initValue,u=(function(n){function t(t,i){n.call(this,t,i);this.enabled=r(i.enabled,!0)}return __extends(t,n),t})(i),t;n.SelectionViewModel=u;t=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t,i);this.dataNavigator=i.dataNavigator;this.loading=ko.observable(!1)}return __extends(t,n),t})(MsPortalFx.ViewModels.
Controls.Loadable.ViewModel);n.ViewModel=t})(t=n.Base||(n.Base={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function p(n,t,i){return FxImpl.FileUpload.getUploadInfos(n,t,i)}function w(n,t,i){return FxImpl.FileUpload.getResumableUploadInfos(n,t,i)}function b(n,t,i){return FxImpl.FileUpload.getAsyncUploadTasks(n,t,i)}function k(n,t,i){return FxImpl.FileUpload.invokeUploadAction(n,t,i)}function d(n,t,i){return FxImpl.FileUpload.getNextChunk(n,t,i)}var i=ko.observable,r,f,e,o,s,u,h,c,l,a,v,y;t.defaultFullFileUploadMaxSize=2097152;t.defaultFullFileUploadChunkSize=t.defaultFullFileUploadMaxSize;t.defaultStreamFileUploadMaxSize=10737418240;t.defaultStreamFileUploadChunkSize=1048576;t.defaultBlobStoreUploadMaxSize=53687091200;t.defaultBlobStoreUploadChunkSize=t.defaultFullFileUploadMaxSize;t.pageBlobPageSize=512;t.defaultResumableTrackingChunkSize=t.defaultBlobStoreUploadChunkSize*
4;r=n.Resources.Strings.FileUpload,(function(n){n[n.Full=0]="Full";n[n.Stream=1]="Stream";n[n.BlockBlobStore=2]="BlockBlobStore";n[n.PageBlobStore=3]="PageBlobStore";n[n.AppendBlobStore=4]="AppendBlobStore";n[n.FileService=5]="FileService"})(f||(f={}));t.UploadType=f,(function(n){n[n.Default=0]="Default";n[n.Text=1]="Text";n[n.ArrayBuffer=2]="ArrayBuffer";n[n.DataUri=3]="DataUri"})(e||(e={}));t.ContentType=e,(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete";n[n.Canceled=5]="Canceled";n[n.Aborted=6]="Aborted"})(o||(o={}));t.UploadStatus=o,(function(n){n[n.None=0]="None";n[n.Pause=1]="Pause";n[n.Resume=2]="Resume";n[n.Cancel=3]="Cancel";n[n.Dispose=4]="Dispose";n[n.AddUploadTasks=5]="AddUploadTasks";n[n.ResetUploadTasks=6]="ResetUploadTasks";n[n.Complete=7]="Complete";n[n.Abort=8]="Abort";n[n.GetNextChunk=9]="GetNextChunk"})(t.ObsoleteUploadAction||(t.ObsoleteUploadAction={}));s=t.ObsoleteUploadAction;t.UploadAction=
s;t.getUploadInfos=p;t.getResumableUploadInfos=w;t.getAsyncUploadTasks=b;t.invokeUploadAction=k;t.getNextChunk=d;u=(function(){function n(){this.type=0;this.contentType=0;this.encoding=null;this.maxFileSize=t.defaultFullFileUploadMaxSize;this.chunkSize=t.defaultFullFileUploadChunkSize;this.category=null;this.uploadTarget=null;this.notificationBlade=null;this.resumable=!1;this.disableNotifications=!1}return n})();t.FullFileUploadContext=u;h=(function(n){function i(){n.call(this);this.type=1;this.maxFileSize=t.defaultStreamFileUploadMaxSize;this.chunkSize=t.defaultStreamFileUploadChunkSize}return __extends(i,n),i})(u);t.StreamFileUploadContext=h;c=(function(n){function r(){n.call(this);this.sasUriCommand=i();this.type=2;this.maxFileSize=t.defaultBlobStoreUploadMaxSize;this.chunkSize=t.defaultBlobStoreUploadChunkSize;this.context=i();this.addFilenameToSasUri=i(!1);this.useDefaultFileInfoContext=i(!0)}return __extends(r,n),r})(u);t.BlobStoreFileUploadContext=c;l=(function(){function n(){this.uploadResult=
i(null);this._msPortalFxUploadAction=i(0);this._msPortalFxActionTrigger=i(0)}return n.prototype.resume=function(){this._msPortalFxUploadAction(2);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.pause=function(){this._msPortalFxUploadAction(1);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.cancel=function(){this._msPortalFxUploadAction(3);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.dispose=function(){this._msPortalFxUploadAction(4);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n})();t.UploadTask=l;a=(function(){function n(n){this.uploadInfo=n}return n.prototype.resume=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},2,n)},n.prototype.pause=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},1)},n.prototype.cancel=function(){var n=this.uploadInfo;return FxImpl.
FileUpload.invokeUploadAction({id:n.id(),name:n.name},3)},n.prototype.complete=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},7)},n.prototype.abort=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},8,n)},n.prototype.dispose=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},4)},n.prototype.getNextChunk=function(n,t){var i=this.uploadInfo;if(i.type()!==1)throw new Error(r.notSupported);return FxImpl.FileUpload.getNextChunk({id:i.id(),name:i.name},n,t)},n})();t.AsyncUploadTask=a;v=(function(){function n(n,t,r){this.uploadInfo=n;this._msPortalFxActionCallback=i(t);this._msPortalFxGetNextChunkCallback=i(r)}return n.prototype.resume=function(n){return this._invoke(2,n)},n.prototype.pause=function(){return this._invoke(1)},n.prototype.cancel=function(){return this._invoke(3)},n.prototype.complete=function(){return this._invoke(7)},n.prototype.
abort=function(n){return this._invoke(8,n)},n.prototype.dispose=function(){return this._invoke(4)},n.prototype.getNextChunk=function(n,t){if(this._msPortalFxGetNextChunkCallback()){var i=this.uploadInfo;return this._msPortalFxGetNextChunkCallback()({id:i.id(),name:i.name},n,t)}return Q.reject(r.notReady)},n.prototype._invoke=function(n,t){if(this._msPortalFxActionCallback()){var i=this.uploadInfo;return this._msPortalFxActionCallback()([{id:i.id(),name:i.name}],n,t)}return Q.reject(r.notReady)},n})();t.AsyncUploadWidgetTask=v;y=(function(){function n(n){this.id=n.id;this.name=n.name;this.mimetype=n.mimetype;this.size=n.size;this.valid=i(!0)}return n})();t.SelectedFile=y})(i=t.FileUpload||(t.FileUpload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function e(n,r,u){var f=u?{uploadKey:n,action:r,context:u}:{uploadKey:n,action:r};return t.uploadActionEndPoint.invoke(i.client,"fx",f)}function u(n,t,u){var f=Q.defer();return i.
client.acquireObject(r,"fx",{uploadKeys:t,category:u}).then((function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)})),f.promise}function o(n,t,u){var f=Q.defer();return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u,resumable:!0}).then((function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)})),f.promise}function s(n,t,i){var r=Q.defer();return u(n,t,i).then((function(n){var t=[];n&&n.length>0&&(t=n.map((function(n){return new f.AsyncUploadTask(n)})));r.resolve(t)})),r.promise}function h(t,i,r){var u;return(i!==undefined||r!==undefined)&&(u={startByte:i,chunkSize:r}),n.FileUpload.invokeUploadAction(t,9,u)}var f=MsPortalFx.ViewModels.FileUpload,i=n.Rpc,r="FxImpl.FileUpload.getUploadInfos";t.getUploadInfosEndPoint=new i.ProxiedObjectTypeDefinition(r);t.uploadActionEndPoint=new i.ActionEndPointDefinition("FxImpl.FileUpload.uploadActionMethodName");t.invokeUploadAction=e;t.getUploadInfos=u;t.getResumableUploadInfos=o;t.getAsyncUploadTasks=s;t.getNextChunk=
h})(t=n.FileUpload||(n.FileUpload={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.FileDownload,e=ko.observable,o=n.Resources.Strings.FileDownloadCommand,i,u,f;(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(i||(i={}));t.Type=i;u=(function(n){function t(t,i,r){n.call(this,t,i,r)}return __extends(t,n),t})(r.Status);t.Status=u;f=(function(n){function t(t){n.call(this,t)}return __extends(t,n),t})(r.Context);t.Context=f})(i=t.FileDownload||(t.FileDownload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=7;var e=this._options;this.inlineLabel=e.inlineLabel||!1;this.ariaLabel=n.initObservable(e.ariaLabel,"");this.showValidationMessagesBelowControl=e.showValidationMessagesBelowControl||!1}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=
r})(i=t.CheckBox||(t.CheckBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.initObservable,f=(function(n){function t(t,i){n.call(this,t,i);this.controlType=23;this.htmlTemplate=u(i.htmlTemplate);this.innerViewModel=i.innerViewModel;this.isolated=i.isolated!==!1;this.validate=r(0);this.valid=r(!0);this.dirty=r(!1);this.loading=r(!1);this._msPortalFxClearValidation=r();this._msPortalFxTriggerValidation=r()}return __extends(t,n),t.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();return n?n():Q()},t.prototype.triggerValidation=function(){var t=this._msPortalFxTriggerValidation,i=t(),n,r;return i?i():(n=Q.defer(),r=t.subscribe(this.lifetimeManager,(function(t){t().then(n.resolve).catch(n.reject).finally((function(){return r.dispose()}))})),n.promise)},t})(t.Base.LabelAndBalloon.ViewModel);i.ViewModel=f})(i=t.CustomHtml||
(t.CustomHtml={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n,r=ko,f=(function(n){function t(t,i,f,e){var o=e||{};u.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(o=i);n.call(this,t,i,f,e);this.controlType=91;this.showStepMarkers=o.showStepMarkers||r.observable(!0);this.customValues=o.customValues||r.observableArray([1,2,3,4,5,6,7,8,9,10])}return __extends(t,n),t})(t.Base.Input.ViewModel);i.ViewModel=f})(i=t.CustomValueSlider||(t.CustomValueSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.computed,u=(function(t){function i(i,u,f,e){var o=this,s=e||{},h;n.isNullOrUndefined(u)||typeof u.createEditScopeAccessor=="function"||(s=u);t.call(this,i,u,f,e);this.valueSeparator=";";this.controlType=
111;this.showStepMarkers=s.showStepMarkers||s.showStepMarkers===!1?s.showStepMarkers:!0;this.customValues=s.customValues;h=this.valueSeparator;this.start=r(i,{read:function(){var i=o.value()?o.value():"",n=i.split(h),t;return n.length===2&&(t=parseInt(n[0],10)),t},write:function(n){o.value(n+h+o.end())}});this.end=r(i,{read:function(){var i=o.value()?o.value():"",n=i.split(h),t;return n.length===2&&(t=parseInt(n[1],10)),t},write:function(n){o.value(o.start()+h+n)}})}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=u})(i=t.CustomRangeSlider||(t.CustomRangeSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=ko.computed,f=(function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.controlType=25;var o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||r(new n.DateUtil.DateTimeRange);this.allowEmpty=!!o.allowEmpty;
this.showValidationMessagesBelowControl=o.showValidationMessagesBelowControl||!1;this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(i){var r=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=u(this.lifetimeManager,(function(){var n=r.value(),t=r.initialValue();n||t?n&&t?r.setDirty(n.getFullYear()!==t.getFullYear()||n.getMonth()!==t.getMonth()||n.getDate()!==t.getDate()):r.setDirty(!0):r.setDirty(!1)})))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=f})(i=t.DatePicker||(t.DatePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.DateUtil.DateTimeRange,i=ko.observable,u=ko.computed,f=(function(t){function f(n,u,f,e){t.call(this,n,u,f,
e);this.controlType=14;this.formatString=this._options.formatString||i("D");this.enabledDateTimeRange=this._options.enabledDateTimeRange||i(new r);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(f,t),f.prototype._setEditScopeAccessors=function(i,r){var f=this;t.prototype._setEditScopeAccessors.call(this,i,r);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=u((function(){var n=f.value(),t=f.initialValue();n||t?n&&t?f.setDirty(n.getTime()!==t.getTime()):f.setDirty(!0):f.setDirty(!1)})))},f})(n.ViewModels.Forms.Base.EditableComboBox.ViewModel);t.ViewModel=f})(i=t.DateTimeComboBox||(t.DateTimeComboBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,f=ko.computed,u=Math.floor,e=(function(t){function i(i,u,f,e){var o,
s;t.call(this,i,u,f,e);this.showSeconds=!0;this.controlType=26;o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||r(new n.DateUtil.DateTimeRange);this.showTimezoneDropdown=o.showTimezoneDropdown||r(!1);this.timezoneOffset=o.timezoneOffset||this.value()&&r(-this.value().getTimezoneOffset())||r(-(new Date).getTimezoneOffset());this.allowEmpty=!!o.allowEmpty;this.emptyTimeValueText=o.emptyTimeValueText||r("");this.showValidationMessagesBelowControl=o.showValidationMessagesBelowControl||!1;s=o.showSeconds;n.isNullOrUndefined(s)||(this.showSeconds=s);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(i){var r=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=f(this.lifetimeManager,(function(){var n=r.value(),t=r.initialValue();n||t?n&&t?r.setDirty(u(n.getTime()/1e3)!==u(t.getTime()/1e3)):
r.setDirty(!0):r.setDirty(!1)})))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=e})(i=t.DateTimePicker||(t.DateTimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n.DateUtil.DateTimeRange,e=ko.computed,r=n.initObservable,u=Math.floor,o=(function(t){function i(n,i,u,e){t.call(this,n,i,u,e);this.controlType=27;var o=this._options;this.startDateTimeEnabledRange=r(o.startDateTimeEnabledRange,new f);this.endDateTimeEnabledRange=r(o.endDateTimeEnabledRange,new f);this.showTimezoneDropdown=r(o.showTimezoneDropdown,!1);this.timezoneOffset=r(o.timezoneOffset,-(new Date).getTimezoneOffset());this.displayFieldsInline=r(o.displayFieldsInline,!1);this.emptyValueText=r(o.emptyValueText,"");this.showValidationMessagesBelowControl=o.showValidationMessagesBelowControl||!1;this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(
i,t),i.prototype._setEditScopeAccessors=function(i){var r=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=e(this.lifetimeManager,(function(){var n=r.value(),t=r.initialValue();n||t?n&&t?r.setDirty(u(n.startDateTime().getTime()/1e3)!==u(t.startDateTime().getTime()/1e3)||u(n.endDateTime().getTime()/1e3)!==u(t.endDateTime().getTime()/1e3)):r.setDirty(!0):r.setDirty(!1)})))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=o})(i=t.DateTimeRangePicker||(t.DateTimeRangePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=92}return __extends(t,n),t})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})(i=t.DayPicker||(t.DayPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||
(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Forms.Base,i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this._msPortalFxLogValidation=ko.observable();this.controlType=3;this.showValidationMessagesBelowControl=!!(u&&u.showValidationMessagesBelowControl||i&&i.showValidationMessagesBelowControl)}return __extends(t,n),t})(r.Options.ViewModel);t.ViewModel=i;n.ViewModels.Forms.DropDown={};n.ViewModels.Forms.DropDown.ViewModel=i})(i=t.DropDown||(t.DropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=ko.observableArray,i=(function(n){function t(t,i,u,f){n.call(this,t,i,u,f);this.controlType=98;var e=this._options;this.items=e.items||r();this.filter=e.filter||!1;this.customFilter=
e.customFilter;this.filterPlaceholder=e.filterPlaceholder||"";this.isPopUpOpen=ko.observable(!1);this.multiselect=e.multiselect||!1;this.selectAll=e.selectAll||!1;this.selectAllOverride=e.selectAllOverride;this.showValidationMessagesBelowControl=!!(f&&f.showValidationMessagesBelowControl||i&&i.showValidationMessagesBelowControl)}return __extends(t,n),t})(n.ViewModels.Forms.Base.Input.ViewModel);t.ViewModel=i;n.ViewModels.Forms.GroupDropDown={};n.ViewModels.Forms.GroupDropDown.ViewModel=i})(i=t.GroupDropDown||(t.GroupDropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=99;this.showValidationMessagesBelowControl=this._options.showValidationMessagesBelowControl||!1}return __extends(t,n),t})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})
(i=t.DurationPicker||(t.DurationPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function g(n,t){var u=n.items();if(u.length===1){for(var i=u[0],f=[],r=[];i;)f.push(new o(i.text(),i.value)),i.children&&(r=r.concat(i.children.map((function(n){return n.text(i.text()+t+n.text()),n})))),i=r.shift();n.items(f)}}function w(n){return(n.text()||"").toLocaleLowerCase()}function nt(n,t){var i=w(n),r=w(t);return i===r?0:i>r&&1||-1}function tt(n){return n.sort(nt)}function l(n,t,i){var r=n[i];r?~r.indexOf(t)||r.push(t):n[i]=[t]}function a(n,t,i,r){var o,u,f,e;for(r===void 0&&(r=" "),o=t.length,u=0;u<o;u++)for(f=t[u],n.addWord(f,i),e=u+1;e<o;e++)f=f+r+t[e],n.addWord(f,i)}function it(n,t,i,r){a(n,t.split(" "),i);a(n,t.split(r),i,r)}function rt(n){var t={},i=[];return n.forEach((function(n){var r=n.text();t.hasOwnProperty(r)||(t[r]=i.push(n))})),i}function k(
n){return n?(t=n.lineMatches).concat.apply(t,n.children.map(k)):[];var t}var d=n.ViewModels.Forms,e=ko.observable,y=ko.observableArray,p=ko.computed,o=(function(n){function t(t,i,r){n.call(this,t,i);this.children=r||[]}return __extends(t,n),t})(n.ViewModels.Forms.Option),r,u,s,f,h,b,c,i,v;t.HierarchicalFormOptionItem=o;r=(function(){function n(n){this.children=[];this.lineMatches=[];this._value=n&&n.toLocaleLowerCase()}return n.prototype.getChild=function(n){return this.children.first((function(t){return t._value===n.toLocaleLowerCase()}))},n.prototype.matchesValue=function(n){return this._value&&this._value===n.toLocaleLowerCase()},n})();t.Node=r;u=(function(){function t(n,t,i){var r=this;this._filterInProgress=!1;this._disposables=[];n.registerForDispose(this);this._viewModel=t;this._filterOptions=i;ko.reactor(n,(function(){r._filterInProgress=!0;var n=r.filterData(t.filterText());t.filterInProgress(r._viewModel.items().length!==n.length);t.filteredItems(n);r._filterInProgress=!1}))}return t.
prototype.dispose=function(){this._disposables&&(n.disposeDisposable(this._disposables),this._disposables=void 0)},t.prototype.filterData=function(n){return this._viewModel.items().filter((function(t){var i;return ko.unwrap(t.doNotFilter)||(i=t.text())&&!!~i.toLowerCase().indexOf(n.toLowerCase())}))},t.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},t})();t.SearchFilter=u;s=(function(n){function t(t,i,r){var u=r.delimiter||"\\";i.items.subscribe((function(){g(i,u)})).callback([]);n.call(this,t,i,r)}return __extends(t,n),t})(u);t.TreeSearchFilter=s;f=(function(){function n(n,t,r){var u=this;this._filterInProgress=!1;this._directMatchDictionary={};this._viewModel=t;this._filterOptions=r;this._prefixTree=new i;p(n,(function(){u._filterInProgress||(u._directMatchDictionary={},u._prefixTree=new i,u._setFilteredItems(u._viewModel.items()))}));t.filterText.subscribe(n,(function(n){u._filterInProgress=!0;var i=u.filterData(n);t.filterInProgress(u._viewModel.items().length!==i.length);
t.filteredItems(i);u._filterInProgress=!1}))}return n.prototype.filterData=function(n){var r=this,t=[],i={};return this._prefixTree.getMatches(n).forEach((function(n){i[n]||(t=t.concat(r._directMatchDictionary[n]),i[n]=!0)})),tt(t)},n.prototype._setFilteredItems=function(n){var t=this;n.forEach((function(n){return t._addToSearchOnInitialize(n,n.text())}));this._viewModel.filteredItems(n);this._viewModel.filterText("")},n.prototype._addToSearchOnInitialize=function(n,t){l(this._directMatchDictionary,n,t);a(this._prefixTree,t.split(" "),t)},n.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},n})();t.SearchFilterPrefixTree=f;h=(function(n){function t(t,r,u){n.call(this,t,r,u);this._childPrefixTree=new i;this._childMatchDictionary={}}return __extends(t,n),t.prototype.filterData=function(n){var t=this._prefixTree.getMatches(n),i=this._childPrefixTree.getMatches(n);return rt(this._processMatches(t,i))},t.prototype._setFilteredItems=function(t){this._directMatchDictionary={};
this._childMatchDictionary={};this._childPrefixTree=new i;t.length===1&&(this._filterOptions.delimiter=this._filterOptions.delimiter||"\\",t=this._flattenTree(t[0]),this._viewModel.items(t));n.prototype._setFilteredItems.call(this,t)},t.prototype._addToSearchOnInitialize=function(){},t.prototype._processMatch=function(n,t){var i=this,r=[],u=[],f,e;return n.forEach((function(n){t[n]||(r.push(i._directMatchDictionary[n]||[]),u.push(i._childMatchDictionary[n]||[]),t[n]=!0)})),{filteredResults:(f=[]).concat.apply(f,r),filteredChildResults:(e=[]).concat.apply(e,u),isResultProcessed:t}},t.prototype._processMatches=function(n,t){var i=this._processMatch(n,{}),r=this._processMatch(t,i.isResultProcessed);return[].concat(i.filteredResults,r.filteredResults,i.filteredChildResults,r.filteredChildResults)},t.prototype._flattenTree=function(n){for(var i=this,t=n,f=[],r=[],e=function(){var e=new o("",""),s=t===n;u._updateCurrentItem(e,e,t.text(),t.text(),s?0:1);l(s?u._directMatchDictionary:u._childMatchDictionary,
e,e.text());f.push(e);t.children&&(r=r.concat(t.children.map((function(n){var r=n.text(),u=t.text()+i._filterOptions.delimiter+r;return i._updateCurrentItem(n,t,r,u,0),l(i._directMatchDictionary,e,t.text()),n}))));t=r.shift()},u=this;t;)e();return f},t.prototype._updateCurrentItem=function(n,t,i,r,u){var f=u===0&&this._prefixTree||u===1&&this._childPrefixTree;f&&it(f,i,r,this._filterOptions.delimiter);n.text(n.value=r)},t})(f);t.TreeSearchFilterPrefixTree=h;b=[function(n,t,i){var r=i.algorithmType===1?f:u;return new r(n,t,i)},function(n,t,i){var r=i.algorithmType===1?h:s;return new r(n,t,i)}];c=(function(){function n(){}return n.prototype.getSearchFilter=function(n,t,i){i||(t.filterOptions=i={datasetType:0});var r=b[i.datasetType];return r?r(n,t,i):null},n})();t.FilterFactory=c;i=(function(){function n(){this._root=new r}return n.prototype.addWord=function(n,t){var i=this._root.lineMatches;n.split("").reduce((function(n,t){var i=n.getChild(t);return i||n.children.push(i=new r(t)),i}),this._root);
~i.indexOf(t)||i.push(t)},n.prototype.getMatches=function(n){var t=this._root,i,r=n.split("").first((function(n){return i=t.getChild(n),!i||!(t=i)}));return r?k(t):[]},n})();t.PrefixTree=i;v=(function(t){function i(n,i,r,u){var f,o,s;t.call(this,n,i,r,u);this._msPortalFxLogValidation=e();this.filteredItems=y();this.filterText=e("");this.noRowsMessage=e("");this.filterInProgress=e(!1);this.controlType=12;f=this._options;f.options||(f.options=y());o=this.value();o&&this.filterText(o);s=this._values=f.options;this.populated=p(n,(function(){return!!s().length}));(new c).getSearchFilter(n,this,this._options.filterOptions)}return __extends(i,t),Object.defineProperty(i.prototype,"items",{get:function(){return this._values},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],i)})(d.Base.EditableComboBox.ViewModel);t.ViewModel=v;n.ViewModels.Forms.FilterComboBox={};n.ViewModels.Forms.FilterComboBox.HierarchicalFormOptionItem=o;n.ViewModels.Forms.FilterComboBox.Node=r;n.ViewModels.
Forms.FilterComboBox.SearchFilter=u;n.ViewModels.Forms.FilterComboBox.TreeSearchFilter=s;n.ViewModels.Forms.FilterComboBox.SearchFilterPrefixTree=f;n.ViewModels.Forms.FilterComboBox.TreeSearchFilterPrefixTree=h;n.ViewModels.Forms.FilterComboBox.FilterFactory=c;n.ViewModels.Forms.FilterComboBox.PrefixTree=i;n.ViewModels.Forms.FilterComboBox.ViewModel=v})(i=t.FilterComboBox||(t.FilterComboBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=18}return __extends(t,n),t})(n.Base.Editable.ViewModel);t.ViewModel=i})(t=n.HtmlEditor||(n.HtmlEditor={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.observable,f=(function(
n){function t(t,i,f,e){n.call(this,t,i,f,e);this.controlType=13;var o=this._options;this.rows=o.rows||u(7);this.showValidationMessagesBelowControl=o.showValidationMessagesBelowControl||!1;this.ariaLabel=r.initObservable(o.ariaLabel,"")}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=f})(i=t.MultiLineTextBox||(t.MultiLineTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=n.ViewModels.Forms,i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this._msPortalFxLogValidation=ko.observable();this.controlType=8;var e=this._options;this.valueInitialized=!1;this.valueSeparator=";";this.popupShown=i(!1);this.multiselect=e.multiselect||i(!0);this.showSelectAll=e.showSelectAll||i(!1);this.showTotal=e.showTotal||!1;this.formatSetting=e.formatSetting||null;this.maxSelectAllowed=e.maxSelectAllowed||i();this.
multiItemsDisplayFormat=e.multiItemsDisplayFormat||i("");this.multiItemsMaxDisplayFormat=e.multiItemsMaxDisplayFormat||i("");this.filter=e.filter;this.filterPlaceholder=e.filterPlaceholder;this.customFilter=e.customFilter;this.showValidationMessagesBelowControl=!!(f&&f.showValidationMessagesBelowControl||r&&r.showValidationMessagesBelowControl)}return __extends(t,n),t})(u.Base.Groups.ViewModel);t.ViewModel=r;n.ViewModels.Forms.MultiSelectDropDown={};n.ViewModels.Forms.MultiSelectDropDown.ViewModel=r})(i=t.MultiSelectDropDown||(t.MultiSelectDropDown={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n.initValue,r=n.initObservable,f=(function(t){function i(i,f,e,o){t.call(this,i,f,e,o);this.controlType=10;var s=this._options;this.min=r(s.min,null);this.max=r(s.max,null);this.decimalPoint=r(s.decimalPoint,2);this.invalidText=
u(s.invalidText,n.Resources.Strings.NumericTextBox.invalidText);this.placeholder=r(s.placeholder,null);this.allowEmpty=u(s.allowEmpty,!1)}return __extends(i,t),i})(t.Base.Typable.ViewModel);i.ViewModel=f})(i=t.NumericTextBox||(t.NumericTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=ko.observable,r=(function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=29;this.showValidationMessagesBelowControl=!0;var e=this._options;this.requestUrl=n.initObservable(e.requestUrl,null);this.buttonText=n.initObservable(e.buttonText,null);this.popupWidth=n.initObservable(e.popupWidth,null);this.popupHeight=n.initObservable(e.popupHeight,null);this.primary=n.initObservable(e.primary,!0);this.ariaLabel=e.ariaLabel?n.initObservable(e.ariaLabel):this.buttonText;this.beforeRequest=e.beforeRequest||function(){return Q()}}return __extends(i,t),i})(t.Base.
Input.ViewModel);i.ViewModel=r})(i=t.OAuthButton||(t.OAuthButton={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(i,r,u,f){t.call(this,i,r,u,f);this.controlType=4;this.showValidationMessagesBelowControl=!0;f=this._options;this.sizeToContent=f.sizeToContent!==undefined?f.sizeToContent:!0;this.radioButtonStyle=!!f.radioButtonStyle;this.singleItemPerLine=!!f.singleItemPerLine;this.ariaLabel=n.initObservable(f.ariaLabel,"")}return __extends(i,t),i})(t.Base.Options.ViewModel);i.ViewModel=r})(i=t.OptionsGroup||(t.OptionsGroup={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n.ViewModels,r=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=5;this.emptyValueText=this._options.emptyValueText||
ko.observable();this.showValidationMessagesBelowControl=!!(this._options&&this._options.showValidationMessagesBelowControl);this.showValidationsAsPopup=!!(this._options&&this._options.showValidationsAsPopup);this.showValidationsAsPopup&&(this.showValidationMessagesBelowControl=!0,this.valueUpdateTrigger=4)}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=r})(i=t.PasswordBox||(t.PasswordBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.computed,r=(function(n){function t(t,r,u,f){var e=this;n.call(this,t,r,u,f);this.controlType=9;this.valueSeparator=";";this.start=i(this.lifetimeManager,{read:function(){var u=e.value()?e.value():"",t=u.split(e.valueSeparator),i=e.min(),r=i,n=NaN;return t.length===2&&(n=parseFloat(t[0]),isNaN(n)||(r=n)),Math.max(r,i)},write:function(n){e.value(n+e.valueSeparator+e.end())}});this.end=i(this.lifetimeManager,
{read:function(){var u=e.value()?e.value():"",t=u.split(e.valueSeparator),i=e.max(),r=i,n=NaN;return t.length===2&&(n=parseFloat(t[1]),isNaN(n)||(r=n)),Math.min(r,i)},write:function(n){e.value(e.start()+e.valueSeparator+n)}})}return __extends(t,n),t})(n.Base.Slider.ViewModel);t.ViewModel=r})(t=n.RangeSlider||(n.RangeSlider={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var o=n,r=ko.unwrap,i=ko.observable,s=ko.observableArray,h=ko.computed,u,f,e;(function(n){n[n.Column=0]="Column";n[n.Default=1]="Default";n[n.Dependent=2]="Dependent";n[n.Row=3]="Row";n[n.Tabs=4]="Tabs";n[n.Wrapper=5]="Wrapper";n[n.SingleControl=6]="SingleControl"})(u||(u={}));t.SectionStyle=u,(function(n){n[n.Line=0]="Line";n[n.Block=1]="Block"})(f||(f={}));t.TabStyle=f;e=(function(n){function t(t,u){var f=this;n.call(this,t);this.active=i(!1);this.children=s();this.dirty=i(!1);this.name=i();
this.width=i();this.submit=i();this.populateSection=i();this.style=i(1);this.valid=i(!0);this.validate=null;this.tabSection=i();this.tabHasBeenLoaded=i(!1);this.cssClass=i();this.controlType=15;o.isNullOrUndefined(u)&&(u={});this.name=u.name||this.name;this.children=u.children||this.children;this.submit=u.submit||this.submit;this.populateSection=u.populateSection||this.populateSection;this.style=u.style||this.style;this.width=u.width||this.width;this.cssClass=ko.isObservable(u.cssClass)?u.cssClass:i(u.cssClass)||this.cssClass;this.minHeight=u.minHeight;this.tabStyle=u.tabStyle||0;h(this.lifetimeManager,(function(){var n=f.children(),e=n.some((function(n){var t=r(n);return t.dirty?t.dirty():!1})),t,i,u;f.tabSection&&f.tabSection()&&(t=f.tabSection().children().some((function(n){var t=r(n);return t.dirty?t.dirty():!1})));i=n.some((function(n){var t=r(n);return t.valid?!t.valid():!1}));u=n.some((function(n){var t=r(n);return t.loading?t.loading():!1}));f.dirty(e||t);f.valid(!i);f.loading(u)}))}return __extends(
t,n),t.prototype.clearValidation=function(){var n=[];return this.children().forEach((function(t){var i=t.clearValidation();i&&n.push(i)})),Q.all(n)},t.prototype.triggerValidation=function(){var n=[];return this.children().forEach((function(t){if(typeof t.triggerValidation=="function"){var i=t.triggerValidation();i&&n.push(i)}})),Q.all(n)},t})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=e})(i=t.Section||(t.Section={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(r){"use strict";var u=ko.observable,s=ko.computed,f=(function(t){function i(i,r,f,e){var s=this,o;t.call(this,i,r,f,e);this.defaultValue=u();this.showValue=u(!0);this.displayText=u("");this.icon=u();this.locked=u(!1);this.infoBalloonText=u("");this.lockedBalloonText=u("");this.controlType=11;o=this._options;this.defaultValue=o.defaultValue||u();this.showValue=o.showValue||u(!0);this.displayText=o.displayText||u(
"");this.icon=o.icon||u();this.locked=o.locked||u(!1);this.infoBalloonText=o.infoBalloonText||u("");this.lockedBalloonText=o.lockedBalloonText||u("");this.infoBalloonLink=o.infoBalloonLink||u(new n.ViewModels.Controls.Balloon.Link);this.isDefault=ko.computed(i,(function(){return s.defaultValue()===s.value()}))}return __extends(i,t),i})(i.Base.Editable.ViewModel),e,o;r.ViewModelBase=f;e=(function(i){function r(r,u,f,e){var o=this;i.call(this,r,u,f,e);this.selectable=new t.Selectable({allowUnselect:!1,selectedValue:this._options.selectedValue||!0,isSelected:this._options.initialState&&this._options.initialState.selectable&&this._options.initialState.selectable.isSelected,isActivated:this._options.initialState&&this._options.initialState.selectable&&this._options.initialState.selectable.isActivated});this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=s(this.lifetimeManager,(function(){o.setDirty(!n.deepEquals(o.value(),o.initialValue()))})
))}return __extends(r,i),r})(f);r.ViewModel=e;o=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=11;this.selectable=new FxImpl.Composition.Selectable.Selectable2({supplyBladeReference:u.supplyBladeReference})}return __extends(t,n),t})(f);r.ViewModel2=o})(r=i.Selector||(i.Selector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,f,e;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(i.Mode||(i.Mode={}));f=i.Mode;e=(function(n){function t(t,i,e,o){n.call(this,t,i,e,o);this.textBoxLabel=r("");this.selectExistingLinkDisplayText=r("");this.createNewLinkDisplayText=r("");this.controlType=83;var s=this._options;this.createNew=s.createNew||r(!0);this.textBoxLabel=s.textBoxLabel||r("");this.selectExistingLinkDisplayText=
s.selectExistingLinkDisplayText||r(u.selectExisting);this.createNewLinkDisplayText=s.createNewLinkDisplayText||r(u.createNew);this.displayMode=s.displayMode||r(f.CreateOrSelect);this.valueUpdateTrigger=s.valueUpdateTrigger||4}return __extends(t,n),t})(t.Selector.ViewModel);i.ViewModel=e})(i=t.CreatorAndSelector||(t.CreatorAndSelector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,o=ko.computed,u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,s=n.ViewModels,f,e;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(i.Mode||(i.Mode={}));f=i.Mode;e=(function(t){function i(i,e,s,h){var a=this,l,c;e||(h={defaultValue:r({value:"",createNew:!0})});!e||e.valid&&e.sections||(l=e.defaultValue,l?l()||l({value:"",createNew:!0}):l=r({value:"",createNew:!0}));t.call(this,i,e,s,h);
this.controlType=85;e.valid&&e.sections&&!this._msPortalFxViewModelValueChangesAreClean&&(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=o(this.lifetimeManager,(function(){var n=a.value(),t=a.initialValue();n&&t?a.setDirty(t.value!==n.value||t.createNew!==n.createNew):a.setDirty(n!==t)})));c=this._options;this.textBoxLabel=c.textBoxLabel||r("");this.selectExistingLinkDisplayText=c.selectExistingLinkDisplayText||r(u.selectExisting);this.createNewLinkDisplayText=c.createNewLinkDisplayText||r(u.createNew);this.displayMode=c.displayMode||r(f.CreateOrSelect);this.valueUpdateTrigger=c.valueUpdateTrigger||4}return __extends(i,t),i})(t.Selector.ViewModel);i.ViewModel=e})(i=t.CreatorAndSelectorV2||(t.CreatorAndSelectorV2={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var f=MsPortalFx.Resources.Strings.ViewModels.Controls.CreatorAndComboBox,e=MsPortalFx.
ViewModels,o=e.Forms,s=MsPortalFx.ViewModels.Obsolete.Forms.FilterComboBox,u=o.Section,t=ko.observable,r=ko.observableArray,h=ko.reactor,l,i,c;(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew"})(n.Mode||(n.Mode={}));l=n.Mode,(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew";n[n.Both=2]="Both"})(n.AllowedMode||(n.AllowedMode={}));i=n.AllowedMode;c=(function(n){function c(c,l){var k=this,a=l.filterComboOptions=MsPortalFx.clone(l&&l.filterComboOptions),it=l.children,d=a.filterOptions,ut=d&&d.algorithmType,p,w,b;l.allowedMode||(l.allowedMode=t(i.Both));var v,g,nt,tt=[g={text:t(f.createNew),value:!0},nt={text:t(f.useExisting),value:!1}],rt={label:a.label,options:v=r(tt),defaultValue:t(!0),validations:r([new e.RequiredValidation]),radioButtonStyle:!0,infoBalloonContent:a.infoBalloonContent,infoBalloonLinkContent:a.infoBalloonLinkContent,viewModelValueChangesAreClean:a.viewModelValueChangesAreClean},y=new o.OptionsGroup.ViewModel(c,rt);a.label=undefined;
a.labelPosition=undefined;a.infoBalloonContent=undefined;a.infoBalloonLinkContent=undefined;p=l.accessor?new s.ViewModel(c,l.form,l.accessor,a):new s.ViewModel(c,a);w=new u.ViewModel(c,{children:it,style:t(1)});b=new u.ViewModel(c,{children:r([p]),style:t(1)});l.children=r([y]);h(c,(function(){var n=l.children;n().length>1&&n.pop();y.value()?n.push(w):n.push(b)}));n.call(this,c,l);this.control=p;this.createOrSelectControl=y;this.allowedMode=l.allowedMode;this._newSection=w;this._selectSection=b;this._options=l;h(c,(function(){switch(l.allowedMode()){case i.CreateNew:v([g]);k.toggleNewOrExisting();break;case i.UseExisting:v([nt]);k.toggleNewOrExisting();break;default:v(tt)}}))}return __extends(c,n),c.prototype.toggleNewOrExisting=function(n){var r=this.createOrSelectControl.value,u=this._options.allowedMode(),t=n===undefined?!r():!!n;switch(u){case i.CreateNew:t=!0;break;case i.UseExisting:t=!1}r(t)},c})(u.ViewModel);n.ViewModel=c})(t=n.CreatorAndComboBox||(n.CreatorAndComboBox={}))})(t=n.Forms||
(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=6}return __extends(t,n),t})(n.Base.Slider.ViewModel);t.ViewModel=i})(t=n.Slider||(n.Slider={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observable,i,r;(function(n){n[n.Primary=0]="Primary";n[n.Secondary=1]="Secondary";n[n.Both=2]="Both"})(t.Panes||(t.Panes={}));i=t.Panes;r=(function(n){function t(t,r){n.call(this,t);this.controlType=21;var r=r||{};this.primaryPaneSize=r.primaryPaneSize||300;this.showPanes=r.showPanes||u(i.Both);this.vertical=r.vertical||!1;this.reversed=r.reversed||!1;this.minPaneSizes=r.minPaneSizes||{primaryPaneSize:0,secondaryPaneSize:0}}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);
t.ViewModel=r})(i=t.Splitter||(t.Splitter={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,r=ko.computed,f=(function(n){function t(t,f){var e=this;n.call(this,t);this.disabled=i(!1);this.loading=i(!1);this.controlType=1;this.validate=i(0);this.fields=u();this._subs=[];this.dirty=r((function(){return e.fields().some((function(n){return n.dirty()}))}));this.valid=r((function(){var n=e.fields().some((function(n){return!n.valid()}));return!n}));this._subs.push(this.validate.subscribe((function(n){e.fields().forEach((function(t){t.validate(n)}))})));f&&ko.utils.arrayPushAll(this.fields,f)}return __extends(t,n),t.prototype.dispose=function(){this._subs.length>0&&(this._subs.forEach((function(n){n.dispose()})),this._subs=[]);this.dirty&&this.dirty.dispose();this.valid&&this.valid.dispose()},t.prototype.clearValidation=function(){var
n=[];return this.fields().forEach((function(t){var i=t.clearValidation();i&&n.push(i)})),Q.all(n)},t.prototype.triggerValidation=function(){var n=[];return this.fields().forEach((function(t){var i=t.triggerValidation();i&&n.push(i)})),Q.all(n)},t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=f})(i=t.StaticSection||(t.StaticSection={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels,e=r.Forms,o=r.Obsolete.Forms.FilterComboBox,i=ko.observable,s=ko.computed,u=(function(){function n(n,t){t===void 0&&(t={});this.separator=t.separator||i(";");this.viewModel=new o.ViewModel(n,t.viewModel)}return n})(),f;t.StringListBoxNewValueOptions=u;f=(function(t){function r(n,r,f,e){t.call(this,n,r,f,e);this.controlType=17;var o=this._options;this.values=o.values||i([]);this.selected=o.selected||i(null);this.newValueOptions=new u(n,o.newValueOptions);
this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(r,t),r.prototype._setEditScopeAccessors=function(i,r){var u=this;t.prototype._setEditScopeAccessors.call(this,i,r);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=s(this.lifetimeManager,(function(){u.setDirty(!u._compareValues(u.value(),u.initialValue()))})))},r.prototype._getUniqueValues=function(n){var t=n.slice(0);return t.sort((function(n,t){return n.localeCompareIgnoreCase(t)})),t.reduce((function(n,t){return(n.length===0||t.localeCompareIgnoreCase(n[n.length-1])!==0)&&n.push(t),n}),[])},r.prototype._compareValues=function(n,t){var r,u,i;if(n&&!t||!n&&t)return!1;if(!n&&!t)return!0;if(r=this._getUniqueValues(n),u=this._getUniqueValues(t),r.length!==u.length)return!1;for(i=0;i<r.length;i++)if(r[i].localeCompareIgnoreCase(u[i])!==0)return!1;return!0},r})(e.Base.Editable.ViewModel);t.ViewModel=f})(i=t.StringListBox||(t.StringListBox={}))})(i=t.Forms||
(t.Forms={}))})(i=t.Vso||(t.Vso={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={}));ko_observable=ko.observable,(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=(function(n){function t(t,i,u,f){n.call(this,t,i,u,f);this.controlType=2;this.readonly=this._options.readonly||!1;this.actionHandler=f?f.actionHandler:i?i.actionHandler:null;this.showValidationMessagesBelowControl=!!(this._options&&this._options.showValidationMessagesBelowControl);this.actionsEnabled=ko_observable(!0);this.ariaLabel=r.initObservable(this._options.ariaLabel,"")}return __extends(t,n),t})(t.Base.Typable.ViewModel);i.ViewModel=u})(i=t.TextBox||(t.TextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=ko.observable,f=ko.computed,r=Math.floor,e=(function(t){function i(i,r,f,e){var o,s;t.call(this,i,r,f,e);this.showSeconds=
!0;this.controlType=24;o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||u(new n.DateUtil.DateTimeRange);this.allowEmpty=!!o.allowEmpty;this.showValidationMessagesBelowControl=o.showValidationMessagesBelowControl||!1;s=this._options.showSeconds;n.isNullOrUndefined(s)||(this.showSeconds=s);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(i){var u=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=f(this.lifetimeManager,(function(){var n=u.value(),t=u.initialValue();n||t?n&&t?u.setDirty(r(n.getTime()/1e3)!==r(t.getTime()/1e3)):u.setDirty(!0):u.setDirty(!1)})))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=e})(i=t.TimePicker||(t.TimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(
t){var i;(function(i){"use strict";var e=n.isNullOrUndefined,r=n.Resources.Strings.FileUpload,u=ko.observable,f=ko.observableArray,o=ko.computed,s=(function(t){function i(i,r,s,h){var l=this,c;t.call(this,i,r,s,h);this.controlType=106;c=this._options;this.accept=c.accept||null;this.allowedFileExtensions=c.allowedFileExtensions||null;this.maxFiles=c.maxFiles||1;this.uploadContext=c.uploadContext||u();this.showValidationMessagesBelowControl=!!(c&&c.showValidationMessagesBelowControl);this.selectedFiles=f();this.uploadTasks=f();this.autoAddUploadTasks=n.isNullOrUndefined(c.autoAddUploadTasks)?!0:c.autoAddUploadTasks;this._msPortalFxUploadActionCallback=u(null);e(r)||r.valid&&r.sections||this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=o(this.lifetimeManager,(function(){l.setDirty(!n.deepEquals(l.value(),l.initialValue()))})))}return __extends(i,t),i.prototype.addUploadTasks=function(n){var t=this._msPortalFxUploadActionCallback(),i=n.
map((function(n){return{id:n.id,name:n.name}}));return t?t(i,5):Q.reject(r.notReady)},i.prototype.resetUploadTasks=function(){var n=this._msPortalFxUploadActionCallback();return n?n([],6):Q.reject(r.notReady)},i})(t.Base.Editable.ViewModel);i.ViewModel=s})(i=t.AsyncFileUpload||(t.AsyncFileUpload={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=2097152,l=u,a=209715200,v=1048576,y=53687091200,p=u,i=ko.observable,f,e,o,r,s,h,c;(function(n){n[n.Full=0]="Full";n[n.Stream=1]="Stream";n[n.BlobStore=2]="BlobStore"})(f||(f={})),(function(n){n[n.Default=0]="Default";n[n.Text=1]="Text";n[n.ArrayBuffer=2]="ArrayBuffer";n[n.DataUri=3]="DataUri"})(e||(e={})),(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete";n[n.Canceled=5]="Canceled"})(o||(o={}));r=(function(){function n(
){this.type=0;this.contentType=0;this.encoding=null;this.maxFileSize=u;this.chunkSize=l}return n})();t.FullFileUploadContext=r;s=(function(n){function t(){n.call(this);this.type=1;this.maxFileSize=a;this.chunkSize=v}return __extends(t,n),t})(r);t.StreamFileUploadContext=s;h=(function(n){function t(){n.call(this);this.context=i();this.sasUriCommand=i();this.type=2;this.maxFileSize=y;this.chunkSize=p;this.skipSasUriUpdateWithSelectedFile=i(!1)}return __extends(t,n),t})(r);t.BlobStoreFileUploadContext=h;c=(function(n){function t(t,u,f,e){n.call(this,t,u,f,e);this.controlType=81;var o=this._options;this.accept=o.accept||"";this.maxFiles=o.maxFiles||1;this.uploadContext=o.uploadContext||i(new r);this.cancelAllUploads=o.cancelAllUploads||i(!1);this.showProgressBars=o.showProgressBars||i(!0);this.files=i([]);this.showValidationMessagesBelowControl=!!(o&&o.showValidationMessagesBelowControl)}return __extends(t,n),t})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=c;n.ViewModels.Forms.FileUpload=
{ContentType:e,FileUploadType:f,FullFileUploadContext:r,StreamFileUploadContext:s,BlobStoreFileUploadContext:h,UploadStatus:o,ViewModel:c}})(i=t.FileUpload||(t.FileUpload={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u,f;(function(n){n[n.Allow=0]="Allow";n[n.Disallow=1]="Disallow";n[n.Ignore=2]="Ignore"})(t.UnrecognizedTokenBehavior||(t.UnrecognizedTokenBehavior={}));u=t.UnrecognizedTokenBehavior;f=(function(n){function t(t,f,e,o){n.call(this,t,f,e,o);this.tokenStartAndEndCharacters=i({tokenStart:"[",tokenEnd:"]"});this.items=r();this.unrecognizedTokenBehavior=i(u.Disallow);this.removeTokenOnDelete=i(!1);this.valueKey=i("name");this.columns=r();this.rowsCount=i(7);this.defaultColumnWidth=i("150px");this.noRowsMessage=i("");this.controlType=30;this._setDefaults(this._options)}return __extends(
t,n),t.prototype._setDefaults=function(n){for(var t in n)this[t]=n[t]||this[t]},t})(n.Base.Editable.ViewModel);t.ViewModel=f})(t=n.TokenComboBox||(n.TokenComboBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=ko.observable,f,r;(function(n){n[n.Unchecked=0]="Unchecked";n[n.Checked=1]="Checked";n[n.Indeterminate=2]="Indeterminate"})(i.Value||(i.Value={}));f=i.Value;r=(function(t){function i(i,r,f,e){t.call(this,i,r,f,e);this.controlType=22;var o=this._options;this.inlineLabel=o.inlineLabel||!1;this.ariaLabel=n.initObservable(o.ariaLabel,"");this.canUserSetIndeterminate=o.canUserSetIndeterminate||u(!0);this.showValidationMessagesBelowControl=o.showValidationMessagesBelowControl||!1}return __extends(i,t),i})(t.Base.Input.ViewModel);i.ViewModel=r})(i=t.TriStateCheckBox||(t.TriStateCheckBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={})
)})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){"use strict";var h=n.ViewModels,it=h.FileDownload,rt=it.Context,c=n.Base.Images,e=ko.observable,l=ko.observableArray,u=n.initObservable,r,s,a,f,v,o,y,p,w,b,k,d,g,nt,tt;(function(n){n[n.None=0]="None";n[n.Group=1]="Group";n[n.OpenLinkButton=2]="OpenLinkButton";n[n.OpenBladeButton=3]="OpenBladeButton";n[n.CommandButton=4]="CommandButton";n[n.DialogButton=5]="DialogButton";n[n.ToggleButton=6]="ToggleButton";n[n.FileDownloadButton=7]="FileDownloadButton";n[n.FileUploadButton=8]="FileUploadButton";n[n.OAuthButton=9]="OAuthButton";n[n.OpenBladeButton2=10]="OpenBladeButton2";n[n.MoveResourceButton=11]="MoveResourceButton"})(i.ToolbarItemType||(i.ToolbarItemType={}));r=i.ToolbarItemType;s=(function(){function n(n,t){t===void 0&&(t={});this.type=n;this.name=t.name||"";this.disabled=u(t.disabled,!1);this.unauthorizedMessage=u(t.unauthorizedMessage,"")}return n.prototype.unauthorized=function(n){n||(n="No access");this.
unauthorizedMessage(n)},n})();i.ToolbarItem=s;a=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t,i);this.controlType=62;this.showLabels=u(i.showLabels,!1);this.items=l()}return __extends(t,n),t.prototype.setItems=function(n){this.items(n)},t})(t.Controls.Loadable.ViewModel);i.Toolbar=a;f=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t,i);this.label=u(i.label,"");this.icon=u(i.icon,{type:1,data:""})}return __extends(t,n),t})(s);i.ToolbarButton=f;v=(function(n){function t(t){n.call(this,r.Group);this.items=t}return __extends(t,n),t})(s);i.ToolbarGroup=v;o=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t,i);this.command=i.command}return __extends(t,n),t})(f);i.ExecutableButtonBase=o;y=(function(n){function t(t){t===void 0&&(t={});n.call(this,r.CommandButton,t);this.commandContext=t.commandContext||e()}return __extends(t,n),t})(o);i.CommandButton=y;p=(function(n){function t(t){var i;i=typeof t=="string"?{optionGroupName:t}:t||{};n.call(this,r.ToggleButton,i);this.
optionGroupName=i.optionGroupName||"";this.checked=u(i.checked,!1);this.commandContext=i.commandContext||e()}return __extends(t,n),t})(o);i.ToggleButton=p;w=(function(n){function t(t){var i;typeof t=="number"?i={type:t}:(i=t||{},i.type=i.type||r.DialogButton);n.call(this,i.type,i);this.dialogOptions=i.dialogOptions}return __extends(t,n),t})(o);i.DialogButton=w;b=(function(n){function t(t){t===void 0&&(t={});n.call(this,r.FileUploadButton,t);this.icon(c.Upload());this.accept=t.accept||"";this.maxFiles=t.maxFiles||1;this.uploadContext=t.uploadContext||e(new h.FileUpload.FullFileUploadContext);this.cancelAllUploads=t.cancelAllUploads||e(!1);this.cancelAllUploadsOnFileSelection=t.cancelAllUploadsOnFileSelection||e(!0);this.uploadTasks=l()}return __extends(t,n),t})(f);i.FileUploadButton=b;k=(function(n){function t(t){n.call(this,r.FileDownloadButton,t);this.icon(c.Download());this.context=e(new rt(t))}return __extends(t,n),t})(f);i.FileDownloadButton=k;d=(function(n){function t(t){t===void 0&&(t={});
n.call(this,r.OAuthButton,t);this.icon(c.Link());this.requestUrl=u(t.requestUrl,null);this.popupWidth=u(t.popupWidth,800);this.popupHeight=u(t.popupHeight,600)}return __extends(t,n),t})(f);i.OAuthButton=d;g=(function(n){function t(t){n.call(this,r.OpenBladeButton,t);var i=this.selectable=new h.Selectable(t);t||i.selectedValue()!==undefined||i.selectedValue(null)}return __extends(t,n),t})(f);i.OpenBladeButton=g;nt=(function(n){function t(t){n.call(this,r.OpenBladeButton2,t);t&&(this.selectable=new FxImpl.Composition.Selectable.Selectable2(t))}return __extends(t,n),t})(f);i.OpenBladeButton2=nt;tt=(function(n){function i(i,u){var f;typeof i=="string"?f={uri:i,target:u||"_blank"}:(f=i,f.target=f.target||"_blank");n.call(this,r.OpenLinkButton,f);this.clickableLink=new t.ClickableLink(e(f.uri),e(f.target))}return __extends(i,n),i})(f);i.OpenLinkButton=tt})(i=t.Toolbars||(t.Toolbars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(
t){var i;(function(t){"use strict";function e(n){return!!n&&n.status===3&&(n.action===2||n.action===4)}var i=ko.observable,r,u,f;(function(n){n[n.NotStarted=0]="NotStarted";n[n.InProgress=1]="InProgress";n[n.Error=2]="Error";n[n.Completed=3]="Completed"})(r||(r={}));t.Status=r,(function(n){n[n.None=0]="None";n[n.Previous=1]="Previous";n[n.Next=2]="Next";n[n.Skip=3]="Skip";n[n.Complete=4]="Complete";n[n.Cancel=5]="Cancel"})(u||(u={}));t.Action=u;t.isCompleted=e;f=(function(n){function t(){n.apply(this,arguments);this.valid=i();this.input=i();this.output=i({status:1,action:0})}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.input(n.input),n.valid!==undefined&&this.valid(n.valid),Q()},t})(n.Controls.Loadable.ViewModel);t.ViewModel=f})(i=t.Base||(t.Base={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(
n){function t(){n.apply(this,arguments);this.enableErrorInfoBox=i(!0);this._msPortalFxClearGroupValidationMessage=i((function(){}));this.asyncValidations=[]}return __extends(t,n),t.prototype.clearGroupValidationMessage=function(){this._msPortalFxClearGroupValidationMessage()()},t})(n.Base.ViewModel);t.ViewModel=r})(t=n.ErrorInfoBoxActionBar||(n.ErrorInfoBoxActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,u,r,f;(function(n){n[n.Default=0]="Default";n[n.Purchase=1]="Purchase"})(t.ActionButtonText||(t.ActionButtonText={}));u=t.ActionButtonText,(function(n){n[n.Unstyled=0]="Unstyled";n[n.BottomBanner=1]="BottomBanner"})(t.SecondaryLinkStyle||(t.SecondaryLinkStyle={}));r=t.SecondaryLinkStyle;f=(function(n){function t(t,f){n.call(this,t);this.actionInProgress=i(!1);this.input=i();this.isProvisioningBlade=i();this.provisionOnStartboardPart=
i();this.masterIsProvisioningPart=i(!1);this.eula=i();this.secondaryLinkDisplayText=i();this.secondaryLinkTriggerValidation=i(!1);this.secondaryLinkStyle=i(r.Unstyled);this.disablePrimaryButton=i(!0);this.triggerSelectAction=i("");this.forceInProgressStatus=i();this.dropDown=i();this.showActionBar=i(!0);this.actionButtonUri=i();this.actionButtonLabel=i(u.Default);f&&typeof f.hideActionBar=="boolean"&&this.showActionBar(!f.hideActionBar)}return __extends(t,n),t.prototype.onInputsSet=function(t){var i=this;return"actionInProgress"in t&&this.actionInProgress(!!t.actionInProgress),n.prototype.onInputsSet.call(this,t).then((function(){i.eula(t.eula);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.isProvisioningBlade&&i.isProvisioningBlade(t.isProvisioningBlade);i.masterIsProvisioningPart(t.input&&!!t.input.masterIsProvisioningPart);i.forceInProgressStatus(t.forceInProgressStatus);t.suppressErrorInfoBox&&i.enableErrorInfoBox(!1);i.disablePrimaryButton(!!t.
disablePrimaryButton);r[t.secondaryLinkStyle]&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.dropDown&&i.dropDown(t.dropDown);t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t})(n.ErrorInfoBoxActionBar.ViewModel);t.ViewModel=f})(t=n.CreateActionBar||(n.CreateActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.deleteButtonClick=function(){this._onButtonClicked(!0)},i.prototype.cancelButtonClick=function(){this._onButtonClicked(!1)},i.prototype._onButtonClicked=function(t){var i=t?3:0,r=t?4:5;this.output({status:i,action:r,userActionId:n.getUniqueId()})},i})(t.Base.ViewModel);i.ViewModel=r})(i=t.DeleteActionBar||(t.DeleteActionBar={}))})(i=t.ActionBars||(t.ActionBars={}))})(t=n.ViewModels||(n.ViewModels=
{}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.updateButtonClick=function(){},t.prototype.resetButtonClick=function(){},t})(n.Base.ViewModel);t.ViewModel=i})(t=n.FilterActionBar||(n.FilterActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.saveButtonClick=function(){},t.prototype.discardButtonClick=function(){},t})(n.Base.ViewModel);t.ViewModel=i})(t=n.FormActionBar||(n.FormActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(
n){function t(){n.apply(this,arguments);this.enableErrorInfoBox=i(!1);this.actionButtonLabel=i();this.actionButtonUri=i();this.actionButtonUriWindowFeatures=i();this.actionSummaryHtml=i();this.allowToggleProvisioningLocation=i(!1);this.secondaryLinkDisplayText=i();this.secondaryLinkTriggerValidation=i(!1);this.secondaryLinkStyle=i(0)}return __extends(t,n),t.prototype.actionButtonClick=function(){},t.prototype.onInputsSet=function(t){var i=this;return n.prototype.onInputsSet.call(this,t).then((function(){t.actionButtonLabel&&i.actionButtonLabel(t.actionButtonLabel);t.actionSummaryHtml&&i.actionSummaryHtml(t.actionSummaryHtml);t.allowToggleProvisioningLocation&&i.allowToggleProvisioningLocation(t.allowToggleProvisioningLocation);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.secondaryLinkStyle!==undefined&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},
t})(n.ErrorInfoBoxActionBar.ViewModel);t.ViewModel=r})(t=n.GenericActionBar||(n.GenericActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(){n.apply(this,arguments);this.triggerSelectAction=i("");this.eula=i();this.showSelectButton=i();this.selectButtonText=i()}return __extends(t,n),t.prototype.onInputsSet=function(t){"triggerSelectAction"in t&&this.triggerSelectAction(t.triggerSelectAction);"eula"in t&&this.eula(t.eula);"selectButtonText"in t&&this.selectButtonText(t.selectButtonText);var i=this.showSelectButton;return"showSelectButton"in t?i(!!t.showSelectButton):i()===undefined&&i(!0),n.prototype.onInputsSet.call(this,t)},t})(n.Base.ViewModel);t.ViewModel=r})(t=n.PickerActionBar||(n.PickerActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){this.type=0;this.title=n}return n})();n.Dialog=t})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Abort=0]="Abort";n[n.Cancel=1]="Cancel";n[n.Ignore=2]="Ignore";n[n.No=3]="No";n[n.Ok=4]="Ok";n[n.Retry=5]="Retry";n[n.Yes=6]="Yes"})(t||(t={}));n.DialogResult=t})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Invalid=0]="Invalid";n[n.MessageBox=1]="MessageBox";n[n.ProgressBox=2]="ProgressBox";n[n.Form=3]="Form";n[n.List=4]="List"})(t||(t={}));n.DialogType=t})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";
function tt(n){var t=window.fx.environment;return t.extensionName===o.Constants.ExtensionNames.Hubs?l.CloudName.readFromInputs(n):l.selfCloudName}var o=n.Base,f=n.Helpers,c=n.Services.Gallery,l=FxImpl.Extension,a=c.Constants,r=undefined,i=ko.observable,v=ko.toJS,k=o.Constants.ExtensionNames.Hubs,y=new o.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/Internal/Provisioner"),d=a.GalleryParametersKey,e=a.GalleryOptionsKey,s="",g={provEntityUndefined:s,notEnabled:s,unableToLocatePart:s},h=FxImpl.getErrorMap(g),nt=(function(){function n(){this.inputs=i();this.errors=i([])}return n})(),p,w,u,b;t.CollectorBindingInternals=nt;p=(function(){function n(){this.outputs=i();this.commit=i()}return n})();t.ProviderBindingInternals=p;w=(function(){function i(n){this._provisioningEntity=r;this._data=r;this._options=r;this._executionDeferred=r;this._provisioningCommandSubscription=r;this._mappedOutputs=r;n||h.provEntityUndefined();this._provisioningEntity=n;this._executionDeferred=f.Deferred()}return Object.
defineProperty(i.prototype,"mappedOutputs",{get:function(){return this._mappedOutputs},enumerable:!0,configurable:!0}),i.prototype.executeProvisioning=function(n,t){var p=this,i=this._provisioningEntity,tt,l,a,it,u;i.enableProvisioning()||h.notEnabled();var w=n,b=i.executeProvisioning&&i.executeProvisioning.bind(i),k=i.mapOutputsForProvisioning&&i.mapOutputsForProvisioning.bind(i),o=!!b,d=!!k;if(o&&d)return y.error("Override 'executeProvisioning' or 'mapOutputsForProvisioning' but not both."),f.reject();if(!o){var g=t&&t[e],s=g&&g.galleryItem,nt=s&&s.categoryIds||[];if(nt.length>0&&(tt=nt.some((function(n){return n.toLowerCase()===c.noSubCreateCategoryId})),tt))return y.error("The gallery item '"+s.itemDisplayName+"' requires no subscriptions, which requires custom provisioning. Override 'executeProvisioning'"),f.reject()}return(d&&(n=k(w)),l=i.provisionOnStartboardPart,a=i.privatePcPrBI,l&&l())?(a.masterIsProvisioningPart()?this._mappedOutputs=n:(this._initializeProvisioningEntity(t[e]),
it={provisioningOptions:{originalData:w,data:v(n),options:v(t)}},a.triggerProvisioningInStartboardPart(it)),f.resolve()):o?(this._traceProvisioningStarted(),u=b(n),u?u.then((function(){p._traceProvisioningEnded(!0)}),(function(){p._traceProvisioningEnded(!1)})):this._traceProvisioningEnded(r),u):this._beginExecution(n,t)},i.prototype.dispose=function(){var n=this._provisioningCommandSubscription;n&&!n.isDisposed&&n.dispose()},i.prototype._initializeProvisioningEntity=function(n){var u=n.uiDefinition.markup.reference,t=u.provisioningPartName,i=u.provisioningPartExtension,r;t||i?t&&i||h.unableToLocatePart():(t="ProvisionerPart",i=k);r=this._provisioningEntity.privatePcPrBI;r.provisioningPartName(t);r.provisioningPartExtensionName(i)},i.prototype._beginExecution=function(t,i){var f=this,r;return this._data=t,this._options=i,r=this._provisioningEntity.privatePcPrBI,this._provisioningCommandSubscription=r.provisioningCommand.subscribe((function(n){n.status(u.Idle);f._executeProvisioning(n);var t=
f._provisioningCommandSubscription;t&&!t.isDisposed&&t.dispose()})),r.triggerProvisioningCommand(n.getUniqueId()),this._executionDeferred.promise()},i.prototype._executeProvisioning=function(n){var t=this,f,i;n.status(u.InProgress);this._traceProvisioningStarted();f=n.execute({options:this._options,data:this._data});i=this._executionDeferred;f?f.then((function(r){t.deploymentResponse=r;t._provisioningEntity.privatePcPrBI.provisioningStarted({galleryParameters:t._data.outputParameters[d],configurationOptions:t._options[e],deploymentResponse:r});n.status(u.Succeeded);t._traceProvisioningEnded(!0);i.resolve()}),(function(){n.status(u.Failed);t._traceProvisioningEnded(!1);i.reject()})):(this._traceProvisioningEnded(r),i.resolve())},i.prototype._createEventBase=function(){var i=this._options,u=i&&i[e],n=u&&u.launchingContext,t={name:r,data:{oldCreateApi:!0}};return n&&(t.name=n.galleryItemId,t.data.launchingContext=n),t},i.prototype._traceProvisioningStarted=function(){return t.ProvisioningTelemetry.
traceProvisioningStarted(this._createEventBase())},i.prototype._traceProvisioningEnded=function(n){var f=this._createEventBase(),e=t.ProvisioningTelemetry.ActionModifier,o=t.ProvisioningTelemetry.ProvisioningStatus,i,u;return n===r?(i=e.Succeeded,u=o.NoPromise):n?(i=e.Succeeded,u=o.Resolved):(i=e.Failed,u=o.UnknownFailure),f.actionModifier=i,f.data.provisioningStatus=u,t.ProvisioningTelemetry.traceProvisioningEnded(f)},__decorate([n.Composition.ProxyCompatibilityMode],i)})();t.Provisioner=w,(function(n){n[n.Idle=0]="Idle";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed"})(t.ProvisioningCommandStatus||(t.ProvisioningCommandStatus={}));u=t.ProvisioningCommandStatus;b=(function(){function n(){this.triggerProvisioningCommand=i();this.provisioningPartExtensionName=i();this.provisioningPartName=i();this.triggerProvisioningInStartboardPart=i();this.masterIsProvisioningPart=i(!1);this.forceDiscardJourney=i(!0);this.provisioningCommand=i();this.provisioningAttempted=
i();this.provisioningStarted=i();this.provisioningCompleted=i()}return n})();t.ProvisioningEntityBindingInternals=b;t.getCloudNameFromInputs=tt})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){var t=n.data||{},i=t.launchingContext||{};return i.telemetryId&&(t.telemetryId=i.telemetryId),n}function r(n){f.client.invokeRpc(u.submitProvisionerTelemetry,s.Shell,n)}function a(){f.client.registerRpcEndPoint(u.submitProvisionerTelemetry,{allowedOrigin:null,handler:function(n,t){n.extension=t.srcWindowId;h.trace(n)}})}function v(n){return n||(n={}),n.source=e,n.action=i.ProvisioningStarted,r(o(n)),n}function y(n){return n||(n={}),n.source=e,n.action=i.ProvisioningEnded,r(o(n)),n}var s=n.Base.Constants,u=FxImpl.Constants.RpcMethods,f=FxImpl.Rpc,h=n.Base.Diagnostics.Telemetry,e="Provisioner",
i,c,l;(function(n){n.ProvisioningEnded="ProvisioningEnded";n.ProvisioningStarted="ProvisioningStarted"})(i||(i={})),(function(n){n.Failed="Failed";n.Succeeded="Succeeded"})(c=t.ActionModifier||(t.ActionModifier={})),(function(n){n.NoPromise="NoPromise";n.Resolved="Resolved";n.UnknownFailure="UnknownFailure"})(l=t.ProvisioningStatus||(t.ProvisioningStatus={}));t.registerTelemetrySubmissionHandler=a;t.traceDeployment=r;t.traceProvisioningStarted=v;t.traceProvisioningEnded=y})(i=t.ProvisioningTelemetry||(t.ProvisioningTelemetry={}))})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var k=n.Base,o=FxImpl.Extension,d=k.Images,i=ko.observable,g=ko.observableArray,nt=n.Resources.Strings,s="error",h=412,c=FxImpl.getErrorMap({hasNotBeenImplemented:""}),f,e,r,l,a,v,y,p,u,w,b,tt;(function(n){n[n.None=0]="None";n[n.Executing=1]="Executing"})(f||(f={}));t.
CommandStatus=f,(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(e||(e={}));t.FileDownloadType=e;r=(function(){function n(){this.enabled=i(!0);this.icon=i();this.text=i()}return n})();t.CommandBase=r;l=(function(n){function t(){n.apply(this,arguments);this.status=i(0);this.dialog=i()}return __extends(t,n),t.prototype.execute=function(){c.hasNotBeenImplemented("execute")},t.prototype.dialogClick=function(){c.hasNotBeenImplemented("dialogClick")},t})(r);t.Command=l;a=(function(n){function t(){n.apply(this,arguments);this.navigateUri=i("");this.navigateTarget=i("_blank")}return __extends(t,n),t})(r);t.UriCommand=a;v=(function(n){function t(){n.apply(this,arguments);this.navigateUri=i("");this.navigateUriCallback=i(null);this.navigateTarget=i("_blank");this.showUriCallbackConfirmationDialog=i(!1)}return __extends(t,n),t})(r);t.UriCallbackCommand=v;y=(function(n){function t(){n.apply(this,arguments);this.listItems=g();this.selectedItem=i("")}return __extends(t,n),t})(r);t.ListCommand=y;p=(function(
n){function t(){n.apply(this,arguments);this.viewModel=i(null)}return __extends(t,n),t})(r);t.DynamicCommand=p;u=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})();t.FileDownloadStatus=u;w=(function(n){function t(t){var f=this,r,e;n.call(this);this.targetUri=i("");this.targetUriCallback=i(null);this.httpMethod=i("GET");this.httpRequestContent=i("");this.httpRequestContentType=i("application/json");this.headers=i({});this.authorizationToken=i(null);this.targetFileName=i("");this.errorMessage=i("");this.downloadType=i(1);this.downloadStatus=i();this.showUriCallbackConfirmationDialog=i(!1);this.uriCallbackConfirmationDialogOptions=null;this.showDownloadProgressDialog=i(!1);this.downloadProgressDialogOptions=null;this.icon(d.Download());t===!0?r={resourceName:""}:t&&(r=t.authorizationOptions);r&&(e={resourceName:r.resourceName,cloudName:o.selfCloudName},o.getRuntime().getAuthorizationToken(e).then((function(n){n&&n.header?f.authorizationToken(n.header):
f.downloadStatus(new u(s,h,nt.FileDownloadCommand.authTokenNotAvailable))}),(function(n){f.downloadStatus(new u(s,h,n))})))}return __extends(t,n),t})(r);t.FileDownloadCommand=w;b=(function(n){function i(t){n.call(this);var r=t.selectable;r&&r.selectedValue||(t.selectable=i.createSelectableViewModel())}return __extends(i,n),i.createSelectableViewModel=function(n){return new t.Selectable({selectedValue:arguments.length===1?n:{}})},i})(r);t.OpenBladeCommand=b,(function(t){var r;(function(t){function u(n){n.enabled(null);(n.icon||f)(null);(n.text||f)(null)}var r=n.ViewModels,f=i(""),c=(function(n){function t(t){n.call(this,t);u(this)}return __extends(t,n),t})(r.OpenBladeCommand),e,o,s,h;t.OpenBladeCommand=c;e=(function(n){function t(){n.call(this);u(this)}return __extends(t,n),t})(r.FileDownloadCommand);t.FileDownloadCommand=e;o=(function(n){function t(){n.call(this);u(this)}return __extends(t,n),t})(r.Command);t.ExecutableCommand=o;s=(function(n){function t(){n.call(this);u(this)}return __extends(t,n),
t})(r.UriCallbackCommand);t.UriCallbackCommand=s;h=(function(n){function t(){n.call(this);u(this)}return __extends(t,n),t})(r.UriCommand);t.UriCommand=h})(r=t.Dynamic||(t.Dynamic={}))})(tt=t.Commands||(t.Commands={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.title=i();this.shortTitle=i();this.description=i();this.icon=i(n.Base.Images.Shell.DefaultBlade());this.size=i(n.Parts.PartSize.Small)}return t})();t.ButtonPart=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.observable,u=(function(){function n(){this.inputParameters={};this.inputMetadata={};this.options={}}return n})(),t,i;n.ParameterCollectionInput=u;t=(function(){function n(){this.outputParameters={}}return n})();n.ParameterCollectionOutput=t;i=(function(){function n(){}return n.modelToParameters=function(n){var i={},t,r;for(t in
n){t in i||(i[t]={});for(r in n[t])i[t][r]=n[t][r]()||""}return i},n.parametersToModel=function(n){var u={},t,i;for(t in n)for(i in n[t]){if(t in u||(u[t]={}),ko.isObservable(n[t][i])||ko.isComputed(n[t][i]))throw new Error("Parameters cannot be knockout observables.");u[t][i]?u[t][i](n[t][i]):u[t][i]=r(n[t][i])}return u},n})();n.Models=i})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.unwrap,t="",u={onProviderCommitMissing:t,onCommitSuccessActionMissing:t,onCommitFailedActionMissing:t},i=FxImpl.getErrorMap(u),f=(function(){function n(n){this._provisioner=null;this._previousOutputs=null;this._previousCommit="";this._previousDetailBladeOutput=null;this._provisioner=n}return n.prototype.onProviderBindingInternalsReceived=function(n,t,u,f,e,o){var a=this,c;if(f||i.onProviderCommitMissing(),e||i.onCommitSuccessActionMissing(),o||
i.onCommitFailedActionMissing(),n){var h=r(n.commit),s=r(n.outputs),l=function(){e();a._provisioner.executeProvisioning(s,t)};!h||h===this._previousCommit||!s||s===this._previousOutputs||!u||u===this._previousDetailBladeOutput||(this._previousOutputs=s,this._previousCommit=h,c=f(null,s),c?c.then((function(n){n?l():o()}),(function(){o()})):l())}},n})();n.CollectorBase=f})(t=n.Internal||(n.Internal={}))})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t,r){var u=n&&n.stepStatuses,f=u&&u.length?u[0].status:0;return i({stepId:"NoWizardStep",status:f,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:r})}var r=n.ViewModels,i=ko.observable,u=" is not implemented",e=(function(n){function e(u,e,o,s){var c;n.call(this);this.editScopeId=i();this.cloudName=i();this._commit=i();this._baseButtonContainer=
null;this._basePartSubscriptions=[];this._baseProviderCommit=null;this._initialLoadComplete=!1;c=e&&e.container;u.selectable=new r.Internal.Selectable({selectedValue:!0,isSelected:!!c&&c.selectable.isSelected});var h={stepStatuses:[]},l=e&&e.content,a=l&&l.currentState;a&&(h=a);this.beginExecuteCommand=i(!1);this.savedState=i(h);this.currentState=i(h);this.stepInput=f(h,o!==!1,s);this.stepOutput=i();this.parameterCollectionErrors=i();this.privateFcTpBI=new t.Internal.CollectorBindingInternals;this._baseButtonContainer=u}return __extends(e,n),e.prototype.onInputsSet=function(n){var i=this,f,u,r,s,e,o;return this.cloudName(t.Internal.getCloudNameFromInputs(n)),f=this.privateFcTpBI,f.inputs(this.getProviderInputs(null)),this._initialLoadComplete||(this._basePartSubscriptions.push(this.parameterCollectionErrors.subscribe((function(n){var t=f.errors;t(n);t([])}))),this._basePartSubscriptions.push(this.stepOutput.subscribe((function(n){i._processStepOutput(n)}))),this._basePartSubscriptions.push(
this._baseButtonContainer.selectable.isSelected.subscribe((function(){i.savedState(i.currentState())}))),this._initialLoadComplete=!0),u=n.fromProviderBindingInternals,u&&(r=u.commit,!r||r===this._baseProviderCommit||(this._baseProviderCommit=r,s=this.onProviderCommit(null,u.outputs),s.then((function(n){n?(i._baseButtonContainer.selectable.isSelected(!1),i._commit(r)):i.parameterCollectionErrors([{errorMessage:"Parameter Collection failed!"}])})))),e=n.stepOutput,e&&this.stepOutput(e),o=this.savedState,o()||o(n.savedState),null},e.prototype.getProviderInputs=function(){throw new Error("'getProviderInputs'"+u);},e.prototype.onProviderCommit=function(){throw new Error("'onProviderCommit'"+u);},e.prototype.dispose=function(){while(this._basePartSubscriptions.length){var n=this._basePartSubscriptions.splice(0,1)[0];n&&!n.isDisposed&&n.dispose()}},e.prototype._processStepOutput=function(n){n&&(this.currentState({stepStatuses:[{stepId:n.stepId,status:n.status}],selectedStepId:n.stepId}),this.beginExecuteCommand(
n.status===3))},e})(r.ButtonPart);t.BaseGalleryButtonPartViewModel=e})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.assetType=i();this.assetName=i();this.icon=i();this.assetId=i();this.status=i();this.state=i();this.size=i(n.Parts.PartSize.Small)}return t})();t.AssetPart=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=t.Controls.Visualization.Chart.InteractionBehavior,i=n.Parts.PartSize,u=ko.observable,f=(function(t){function f(f){t.call(this,f);this.size=u(i.Small);this.editButtonText=u(n.Resources.Strings.Part.Chart.editButtonText);var e=this.size,o=this.interactionBehavior;e.subscribe(f,(function(n){switch(n){case i.Normal:case i.Small:case i.Wide:o(r.ChartArea_Off|r.XSlider_Off);break;default:o(r.All)}}));e.notifySubscribers(e())}return __extends(f,t),
f})(n.ViewModels.Controls.Visualization.Chart.ViewModel);t.ChartPart=f})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function p(n,t,r){var u;switch(n){case i.FullWidthFitHeight:case i.FitToContainer:case i.HeroWideFitHeight:u=y;break;case i.HeroTall:u=v;break;case i.Large:case i.HeroWide:case i.Tall:u=a;break;case i.Wide:case i.Normal:default:u=l}return u=t?u-1:u,r?u-1:u}function w(n){return n===i.Mini||n===i.Small}function b(n){return n===i.Normal||n===i.Wide}var r=ko.observable,o=ko.observableArray,f=ko.computed,e=n,i=e.Parts.PartSize,c=e.ViewModels,s=c.Controls.Lists.Grid,l=3,a=9,v=14,y=20,u,h;(function(n){n[n.None=0]="None";n[n.Data=1]="Data";n[n.Rollup=2]="Rollup"})(t.GridMode||(t.GridMode={}));u=t.GridMode;h=(function(){function n(n,t){var h=this,c;this.size=r(i.Normal);this.alwaysShowRollupCount=r(!1);this.rollupCount=r();this.rollupCountIconUri=r();this.rollupCountIcon=r();this.
rollupCountLabel=r();this._options=null;this._container=null;this._container=n;this._options=t;this.gridMode=r(u.None);this.hasMoreData=r(!1);c=t.selectableRowExtensionOptions?s.Extensions.SelectableRow:null;this.grid=new s.ViewModel(n,o(),c,t.selectableRowExtensionOptions);this.grid.showHeader=!!t.showHeader;this.grid.columns=o();n.registerForDispose(this.grid);this.emptyGrid=r(!0);this.noRowsHtml=t.noRowsHtml?t.noRowsHtml:r(null);t.noRowsMessage&&(this.grid.noRowsMessage||(this.grid.noRowsMessage=r()),f(n,(function(){h.grid.noRowsMessage(t.noRowsMessage())})));this.selectableData=this.grid.selectableData;this._reactToDataChange(n,t.data,(function(n){return n===u.Data}));this._reactToDataChange(n,t.rollupData,(function(n){return n===u.Rollup}));this._reactToSizeChange();this.noRollupCount=f(n,(function(){return e.isNullOrUndefined(h.rollupCount())}))}return n.prototype._reactToDataChange=function(n,t,i){var r=this;t&&(t.items.subscribe(n,(function(n){r.emptyGrid(!n.length);i(r.gridMode())&&r._updateGrid(
t)})),f(n,(function(){if(i(r.gridMode())){var n=t.columns();r.grid.columns(n)}})))},n.prototype._reactToSizeChange=function(){var n=this;f(this._container,(function(){var t=n._options,i=n.size();n.alwaysShowRollupCount();!w(i)&&(t.data||t.rollupData)?t.rollupData&&b(i)||t.rollupData&&!t.data?n.gridMode(u.Rollup):t.data&&n.gridMode(u.Data):n.gridMode(u.None);ko.ignoreDependencies((function(){switch(n.gridMode()){case u.Data:n._updateGrid(t.data);break;case u.Rollup:n._updateGrid(t.rollupData)}}))}))},n.prototype._updateGrid=function(n){if(n){var t=n.items(),r=this.size(),o=e.Parts.PartSizeHelper.isFixedSize(r),u=o?p(r,this._options.showHeader,this.alwaysShowRollupCount()):t.length;this.hasMoreData(t.length>u);var i=t.slice(0,u),f=this.grid.items.peek(),s=f.length!==i.length||ko.utils.compareArrays(f,i,{sparse:!0}).length>0;s&&this.grid.items(i)}},n})();t.ViewModel=h})(i=t.Collection||(t.Collection={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),
(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.resourceCount=i(0);this.countIsMinimum=i(!1);this.description=i("");this.icon=i(n.Base.Images.Shell.DefaultBlade());this.label=i("");this.size=i(n.Parts.PartSize.Normal)}return t})();t.CollectionSummary=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(){n.apply(this,arguments);this.createName=t("")}return __extends(i,n),i})(n.ButtonPart);n.CreatePart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(t){function r(r){t.call(this,r,n.ViewModels.Controls.Documents.Editor.ContentType.Text,null,null);this.size=i(n.Parts.PartSize.Normal)}return __extends(r,t),r})(n.ViewModels.Controls.Documents.DiffEditor.ViewModel);t.ViewModel=r})(i=t.DiffEditor||(t.DiffEditor={})
)})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u=(function(){function t(t){this.groupInfos=r();this.itemsDataArray=r();this.itemSetting=i();this.valueInitialized=!1;this.resetItems=i(!0);this.total=i(null);this.startOffset=i(-90);this.totalFormat=i("{0}");this.unitFormat=i("");this.infoFormat=i("");this.numberFormatOptions=i({minimumFractionDigits:0,maximumFractionDigits:1});this.hoveredUnit=i("%");this.hoverInfoFormat=i("{0} {1}{2}");this.selectedInfoFormat=i("{0}/{1}{2}");this.disableSelectOnClick=i(!1);this.showLegend=i(!0);this.size=i(n.Parts.PartSize.Normal);this._msPortalFxRerenderTrigger=i(0);this.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(t)}return t.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},t})();t.ViewModel=u})(i=t.Donut||(t.Donut=
{}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls.Documents.Editor,r=ko.observable,u=(function(t){function u(u){t.call(this,u,i.ContentType.Text,null);this.size=r(n.Parts.PartSize.Normal)}return __extends(u,t),u})(i.ViewModel);t.ViewModel=u})(i=t.Editor||(t.Editor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observableArray,o=ko.isObservable,i=ko.utils.wrap,f="string",r=(function(){function n(n,t){this.text=i(n);typeof t===f||o(t)&&typeof t()===f?this.uri=i(t):this.bladeSelection=i(t)}return n})(),e;t.Link=r;e=(function(){function t(t){this.sections=u();this.bladeLinks=u();this.selection=new n.ViewModels.SelectableSet(this.bladeLinks,function(n,t){return n.bladeSelection().detailBlade===t.detailBlade}
,function(n){return n.bladeSelection()},t&&t.content&&t.content.selection)}return t.prototype.dispose=function(){this.selection.dispose()},t.prototype.addSection=function(n,t,u,f){var o=this,e;e=Array.isArray(u)?new r("",undefined):new r("",u);this.sections.push({title:i(n),description:i(t),selection:e,links:Array.isArray(u)?u:null,icon:f});(Array.isArray(u)?u:[e]).forEach((function(n){n.bladeSelection&&o.bladeLinks.push(n)}))},t})();t.ViewModel=e})(i=t.InfoList||(t.InfoList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function f(n){return typeof n=="object"}var h=n,rt=h.Base,c=h.ViewModels,p=c.equalDynamicSelections,l=c.SelectableSet,ut=ko.observable,e=ko.observableArray,o=ko.unwrap,a=ko.pureComputed,r=ko.utils.wrap,v,w="_msPortalFxPropertiesPartSelectionKey",ft=h.Resources.Strings.Part.PropertiesPart,et=new rt.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.PropertiesPart"),
ot=(function(){function n(n){var i=this;this._openBladeProperties=null;this._openBladeAsyncProperties=null;this._moveResourceProperties=null;this.properties=e();this.addProperty=function(n){i._addProperty(n)};this._openBladeProperties=e();this.selection=new l(this._openBladeProperties,function(n,t){return p(n.bladeSelection(),t)},function(n){return n.bladeSelection()},n&&n.content&&n.content.selection);this._moveResourceProperties=e();this.moveResourceSelection=new l(this._moveResourceProperties,function(n,t){var i=o(n.editBlade.bladeSelection);return p(i,t)},function(n){return o(n.editBlade.bladeSelection)},n&&n.content&&n.content.moveResourceSelection);var t=function(n){return n.label},r=function(n,i){n[w]=t(i)},u=function(n){return n[w]};this._openBladeAsyncProperties=e();this.asyncSelection=new l(this._openBladeAsyncProperties,function(n,i){return u(i)===t(n)},function(){return null},n&&n.content&&n.content.asyncSelection);c.Internal.SelectableSet.setCreateDelayedBladeSelection(this.
asyncSelection,(function(n){return{bladeWidth:h.Blades.BladeWidth.Medium,selectedValuePromise:n.resolveBlade().then((function(t){return r(t,n),t}))}}))}return n.prototype._addProperty=function(n){var t=this;this.properties.push(n);switch(n.getType()){case i.MultiOpenBlades:n.bladeLinks().forEach((function(n){t._openBladeProperties.push(n)}));break;case i.OpenBladeAsync:this._openBladeAsyncProperties.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&this._moveResourceProperties.push(n);break;default:n.bladeSelection&&this._openBladeProperties.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&this._moveResourceProperties.push(n)}return},n.prototype.setProperties=function(n){var t=[],u=[],r=[];n.forEach((function(n){switch(n.getType()){case i.MultiOpenBlades:n.bladeLinks().forEach((function(n){t.push(n)}));break;case i.OpenBladeAsync:u.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&r.push(n);break;default:n.bladeSelection&&t.push(n);n.editBlade&&n.editBlade.editType===
s.MoveResource&&r.push(n)}}));this.properties(n);this._openBladeProperties(t);this._openBladeAsyncProperties(u);this._moveResourceProperties(r)},n.prototype.removeAllProperties=function(){this.properties([]);this._openBladeProperties([]);this._openBladeAsyncProperties([]);this._moveResourceProperties([])},n.prototype.dispose=function(){this.properties().forEach((function(n){n.dispose()}));this.selection.dispose();this.moveResourceSelection.dispose()},n})(),i,s,u,b,k,d,g,y,nt,tt,it;t.ViewModel=ot,(function(n){n[n.Text=0]="Text";n[n.Link=1]="Link";n[n.CopyField=2]="CopyField";n[n.Callback=3]="Callback";n[n.OpenBlade=4]="OpenBlade";n[n.MultiLinks=5]="MultiLinks";n[n.Image=6]="Image";n[n.MultiOpenBlades=7]="MultiOpenBlades";n[n.OpenBladeAsync=8]="OpenBladeAsync"})(t.PropertyType||(t.PropertyType={}));i=t.PropertyType,(function(n){n[n.Unknown=0]="Unknown";n[n.MoveResource=1]="MoveResource"})(t.EditType||(t.EditType={}));s=t.EditType;u=(function(){function n(n){var h=this,t,f,e,u,o,s;this.displayValue=
ut("");this.editBladeText=ft.changeLabel;this.label=n.label;this.value=r(n.value);t=n.blade;f=t&&t.displayValue;this.displayValue=f?r(f):r(n.displayValue);this.copyableValue=r(n.copyableValue);this.visible=r(n.visible===v?!0:n.visible);this.wrappable=r(n.wrappable===v?!1:n.wrappable);e=t&&t.bladeSelection;this.bladeSelection=e?r(e):null;this.infoBalloon=n.infoBalloon;this.editBlade=n.editBlade;u=n.isLoading;this.isLoading=a((function(){return u&&u()}));this._supportsIsLoading=!!u;this.type=this.getType();o=this.hasValidBladeSelection=a((function(){var n=h.bladeSelection;return!!(n&&n())||h.type===i.OpenBladeAsync}));s=o();this._bladeSelectionSub=o.subscribe((function(n){s&&!n&&et.error("A property's bladeSelection should never be updated from a non-null/non-empty value to a null/empty value.");s=n}))}return n.prototype.getType=function(){throw new Error("Subclass needs to provide the property type.");},n.prototype.dispose=function(){this._bladeSelectionSub&&this._bladeSelectionSub.dispose();
this.hasValidBladeSelection&&this.hasValidBladeSelection.dispose()},n})();t.Property=u;b=(function(n){function t(t,i){var u;u=f(t)?t:{label:t,value:i};u.copyableValue=u.value;n.call(this,u);this.icon=r(u.icon)}return __extends(t,n),t.prototype.getType=function(){return i.Text},t})(u);t.TextProperty=b;k=(function(t){function r(i,r,u){var s=this,e;f(i)?(e=i,e.displayValue||(e.displayValue=e.value)):e={label:i,value:r,displayValue:!u?r:u};t.call(this,e);this.copyableValue=a((function(){var t=o(s.displayValue),i=o(s.value);return n.isNullOrWhiteSpace(t)?i:i&&t.toLowerCase()===i.toLowerCase()?t:t+" <"+i+">"}))}return __extends(r,t),r.prototype.getType=function(){return i.Link},r})(u);t.LinkProperty=k;d=(function(n){function t(t,i,r){var u,e=new c.Controls.Forms.CopyableLabel.ViewModel(t);e.disabled(!0);f(i)?u=i:(t&&t.createChildLifetime||(t=v,i=arguments[0],r=arguments[1]),u={label:i,value:r});u.copyableValue=u.value;n.call(this,u);this._valueResponder=ko.computed((function(){var n=o(u.value);e.value(
n)}));this.value=e}return __extends(t,n),t.prototype.getType=function(){return i.CopyField},t.prototype.dispose=function(){n.prototype.dispose.call(this);this._valueResponder.dispose();this.value.dispose()},t})(u);t.CopyFieldProperty=d;g=(function(n){function t(t,i,u,e){var s=this,o;o=f(t)?t:{label:t,displayValue:i,callback:u,icon:e};o.copyableValue=o.displayValue;n.call(this,o);this.callback=o.callback;this.icon=r(o.icon);this.callbackWrapper=function(){return s.callback(),!1}}return __extends(t,n),t.prototype.getType=function(){return i.Callback},t})(u);t.CallbackProperty=g;y=(function(t){function u(i,u,e){var o,s;o=f(i)?i:{label:i,displayValue:u,bladeSelection:e};s=n.extend2({blade:{displayValue:o.displayValue,bladeSelection:o.bladeSelection}},o);t.call(this,s);this.copyableValue=r(o.displayValue)}return __extends(u,t),u.prototype.getType=function(){return i.OpenBlade},u})(u);t.OpenBladeProperty=y;nt=(function(n){function t(t,i,r){var u,o;u=f(i)?i:{label:i,bladeLinks:r};n.call(this,u);this.
bladeLinks=e();o=u.bladeLinks.map((function(n){return new y({label:"",displayValue:n.displayValue,bladeSelection:n.bladeSelection})}));o.subscribe(t,this.bladeLinks);this.bladeLinks(o())}return __extends(t,n),t.prototype.getType=function(){return i.MultiOpenBlades},t})(u);t.MultiOpenBladeProperty=nt;tt=(function(n){function t(t,i){var r;r=f(t)?t:{label:t,links:i};n.call(this,r);this.links=r.links}return __extends(t,n),t.prototype.getType=function(){return i.MultiLinks},t})(u);t.MultiLinksProperty=tt;it=(function(n){function t(t,i){var u;u=f(t)?t:{label:t,icon:i};n.call(this,u);this.icon=r(u.icon)}return __extends(t,n),t.prototype.getType=function(){return i.Image},t})(u);t.ImageProperty=it})(i=t.Properties||(t.Properties={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels.Parts.Properties,i=ko.utils.wrap,r=(function(n){function r(t){var r=
MsPortalFx.extend2({blade:{displayValue:t.displayValue,resolveBlade:t.resolveBlade}},t);n.call(this,r);this.resolveBlade=t.resolveBlade;this.copyableValue=i(t.displayValue)}return __extends(r,n),r.prototype.getType=function(){return t.PropertyType.OpenBladeAsync},r})(t.Property);n.OpenBladeAsyncProperty=r})(t=n.Properties||(n.Properties={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var r=n.Base.Images,i=ko.observable,u=n.Resources.Strings.Part.Provisioning.description,f=(function(n){function t(t,f,e){n.call(this,t,f,e!==!1,!0);this._partContainer=null;this.title=i("");this.description=i(u);this.icon=i(r.Shell.DefaultBlade());this.errorMessage=i();this._partContainer=t;this.icon=i(r.Gear())}return __extends(t,n),t.prototype.onInputsSet=function(t){return n.prototype.onInputsSet.call(this,t)},t.prototype.mutate=function(n){this._partContainer.mutate({containerModel:n})},t})(n.ViewModels.
ParameterCollection.BaseGalleryButtonPartViewModel);t.ContentViewModel=f})(i=t.ProvisioningPart||(t.ProvisioningPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=(function(t){function i(){t.call(this);this.backgroundColor=n.Parts.PartColor.Theme;this.title(n.Resources.Strings.Part.Quickstart.title);this.icon(n.Base.Images.AzureQuickstart())}return __extends(i,t),i})(t.ButtonPart);t.QuickStartPart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground";n[n.TotalValue=3]="TotalValue"})(t.MetricColorBarKind||(t.MetricColorBarKind={}));f=t.MetricColorBarKind;r=(function(){function t(){this.instance=i(0);this.total=i(0);this.instanceQuota=i(100);this.totalQuota=i(100);this.unit=
i("");this.hideTotal=i(!1);this.hideQuota=i(!1);this.hideTick=i(!1);this.maximum=i(100);this.startOffset=i(-90);this.totalArc=i(355);this.captionDisplayFormat=i("{2}");this.valueDisplayFormat=i("{0}");this.metrics=u();this.size=i(n.Parts.PartSize.Normal)}return t})();t.ViewModel=r})(i=t.QuotaGauge||(t.QuotaGauge={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function u(n,t,i,r){return{key:n,extension:t,name:i,name2:r}}function rt(n){return ii.some((function(t){return n.key===t.key}))}function vi(n){var r="<div data-bind='image: {0}' style='height: {1}px; width: {1}px; padding: {2};' alt=''/>",t=function(n,t,r){var u=p.Format.HtmlBindings,f={htmlBindingsTemplate:t};return{itemKey:n,template:t,format:u,formatOptions:f,filterableFormat:u,filterableFormatOptions:f,width:r?i(r):null}},u=[t("icon",r.format("value",15,0),"25px"),t("displayText","<div data-bind='text: value' class='msportalfx-text-small msportalfx-text-ellipsis'/>"),
t("",r.format("MsPortalFx.Base.Images.Shell.Chevron()",14,"8px 0 9px 3px"),"30px"),];return n&&u.unshift(t("__placeholder__","","1px")),u}function ft(t){n.isNullOrWhiteSpace(t.group())&&t.group(nt.general)}function ui(n,t){var i=n[ct];ko.reactor(t,(function(){var t=n.displayText()+" "+n.group()+" "+(n.keywords()||[]).join(" ");i(t)}))}var h=n,v=h.Base,k=v.Constants,d=FxImpl.Extension.CloudName,s=k.ExtensionNames,y=h.ViewModels,et=y.Selectable,p=y.Controls.Lists.Grid,g=p.Extensions,f=y.Services.ResourceTypes,oi=v.Diagnostics.Telemetry,r=h.Resources.Strings.Part.SettingList,nt=r.Group,c=r.Keywords,e=v.Images,si=e.Polychromatic,l=h.isNullOrUndefined,tt=ko.utils,i=ko.observable,it=ko.observableArray,hi=k.ResourceTypes.ResourceGroups,ot=FxImpl.Azure,ci=window,st=tt.wrap,ht=tt.arrayFirst,li=v.ImagePalette.Blue,yi=r.resources,pi=r.resourceGroups,ct="aggregatedKeywords",lt="Resource",o=s.Hubs,wi=s.Resources,a=s.Support,at="AzureDiagnosticsBlade",ai=ci.fx.environment.features,vt=ai.newauditlogs===
"true",yt=u("__users",s.ActiveDirectory,"UserAssignmentsBlade"),pt=u("__tags",o,lt+"TagsListBlade"),wt=u("__locks",o,"LocksBlade"),bt=u("__exportTemplate",o,"TemplateViewerBlade"),kt=u("__troubleshoot",a,"TroubleshootBlade"),dt=u("__troubleshootV2",a,"TroubleshootV2Blade"),gt=u("__supportRequest",a,"NewSupportRequestBlade"),ni=u("__resourceHealth",a,lt+"HealthDetailBlade"),ti=vt?u("__eventLogs",s.AzureMonitoring,"EventsBrowseBlade"):u("__eventLogs",s.AzureInsights,at+"FromSettings",at+"WithParameter"),bi=u("__accessDetails",o,"MyAccessBlade"),ki=u("__resourceProviders",o,"RPStatusBlade"),di=u("__resources",o,"Resources"),gi=u("__subCerts",o,"SubCertsBlade"),ii=[yt,pt,wt,bt,kt,dt,gt,ni,ti],w=n.isFeatureEnabled("hidesupport"),ut=(function(){function t(n,t,r,u,f){this.displayText=i("");this.icon=i();this.keywords=it();this.group=i(" ");this.aggregatedKeywords=i("");this._key=n;this._blade=st(t);this._bladeInputs=r;this._extension=st(u);this._options=f}return Object.defineProperty(t.prototype,
"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),t.prototype.getOptions=function(){return this._options},t.prototype.toSelection=function(){var n=this._options;return{key:this._key,detailBlade:this._blade.peek(),detailBladeInputs:this._bladeInputs.peek(),extension:this._extension.peek(),isParameterCollector:!!(n&&n.parameterCollector)}},__decorate([n.Composition.ProxyCompatibilityMode],t)})(),ri,b,fi,ei;t.Setting=ut;ri=(function(n){function t(){n.apply(this,arguments);this._cloudName=k.EmptyCloudName}return __extends(t,n),t.prototype.toSelection=function(){var t=n.prototype.toSelection.call(this),i=this._cloudName,r=this._bladeInputs.peek();return this._extension.peek()===o?d.readFromInputs(r)||this._bladeInputs(d.addToModel(i,r)):t.cloudName=i,t},t})(ut);b=(function(){function t(n,t,u,e){var o=this,b,h,k,a,v,s,c,y,w;this._cloudAwareSettings=[];b=this.resourceId=i();this.searchBoxPlaceholder=i(r.searchBoxPlaceholder);h=tt.wrapArray(u);e=e||{};a=function(){o._updateSettings(
n,h,e,k);o._processSettings(n)}.bind(this);b.subscribe(n,(function(n){v=(v||Q()).then((function(){var i=f.isSubscriptionId(n),t=Q();return i&&(t=ot.getSubscriptionInfo(FxImpl.Rpc.client,f.parseSubscriptionDescriptor(n).subscription,o._cloudName).then((function(n){k=n}),(function(){}))),t.then((function(){a()}))}))}));var nt=g.SelectableRow|g.Filterable,st=this._searchText=i(""),ut={selectableRow:{selectionMode:1,itemMatchesSelection:function(n,t){return n.key===t.key},createSelection:function(n){return n.toSelection()},activateOnSelected:i(!0),initialSelection:t&&t.content&&t.content.settingList&&t.content.settingList.selectableData},filterable:{searchableColumns:it([ct]),searchBoxCloseButtonVisible:i(!1),searchBoxPlaceholder:this.searchBoxPlaceholder,queryString:st}},et=e&&!l(e.groupable)?e.groupable:!0;et&&(nt|=g.Groupable,ut.groupable={groupKey:i("group"),sortFunction:p.SortFunction.SettingListGroupOrder},h().forEach((function(n){ft(n)})));s=new p.ViewModel(n,h,nt,ut);this.settingList=s;s.columns=
it(vi(et));s.showHeader=!1;s.selectableData.activatedItems.subscribe(n,(function(n){if(n&&n.length>0){var t=n[0];o._trace(t)}}));c=s.items;y=[];c.subscribe(n,(function(n){y=n}),null,"beforeChange");c.subscribe(n,(function(n){(v||Q()).then((function(){var t=!l(ht(y,rt)),i=!l(ht(n,rt));t&&!i&&a()}))}));c.subscribeArrayChanges(n,(function(t){o._removeSetting(t)||(ui(t,n),ft(t))}),null);this._processSettings(n);w=function(t){n.onInputsSetCallbacks.remove(w);o._cloudName=d.readFromInputs(t);o._cloudAwareSettings.forEach((function(n){n._cloudName=o._cloudName}))};n.onInputsSetCallbacks.add(w)}return t.prototype.isPCv3=function(){return!1},t.prototype._updateSettings=function(n,t,u,o){var it=this,k=t().slice(),s=this.resourceId();if(h.remove(k,rt),!l(s)){var ft=f.isTenantResource(s),p=f.isSubscriptionId(s),d=f.isResourceGroupId(s),g=f.isResourceId(s),y=p||d||g&&!ft,ht=d?s:g?f.buildResourceGroupIdFromResourceId(s):null,tt=d?hi:g?f.buildResourceTypeFromResourceId(s):null,et=tt&&tt.toLowerCase().startsWith(
"microsoft.classic"),ct=i({scope:s}),b=i({resourceId:s}),st=i({assetId:s}),v=!l(u),lt=p&&o&&ot.isZeroCapSubscription(o),a=function(n,t,i,r,u,f,e,o,s){var h=new(o?ri:ut)(n.key,n.name,f,n.extension,s);return h.displayText(r),h.icon(i),h.group(t?nt.support:nt.resourceManagement),h.keywords([u]),k[e?"unshift":"push"](h),o&&(h._cloudName=it._cloudName,it._cloudAwareSettings.push(h)),h};!this.isPCv3()||w||v&&u.enableSupportHelpRequest===!1||a(gt,!0,e.Support(),r.helpRequest,c.helpRequest,st,!1,!1,{parameterCollector:{supplyInitialData:function(){return""},receiveResult:function(){return{}},supplyProviderConfig:function(){return{provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}}}}});!w&&v&&u.enableSupportResourceHealth&&a(ni,!0,e.HeartPulse(),r.resourceHealth,c.resourceHealth,b,!0);y&&(!v||u.enableSupportEventLogs!==!1)&&a(ti,!0,si.Log(),r.eventLogs,c.eventLogs,vt?i({queryInputs:{id:s}}):b,!0);y&&!et&&v&&u.enableTags&&a(pt,!1,e.Tag(),r.tags,"",b,!1,!0);y&&!lt&&a(wt,!1,e.Lock(),
p?r.locksForSubscriptions:r.locks,"",b,!1,!0);(y||ft)&&(!v||u.enableRbac!==!1)&&a(yt,!1,e.PersonWithFriend(li),r.users,r.access,ct,!1,!0);!y||et||p||u.enableExportTemplate===!1||a(bt,!1,e.Polychromatic.Download(),r.exportTemplate,c.exportTemplate,i({options:{resourceGroup:ht,telemetryId:tt}}),!1,!0);!w&&v&&(u.enableSupportTroubleshoot||u.enableSupportTroubleshootV2)&&a(u.enableSupportTroubleshootV2?dt:kt,!0,e.Tools(),r.troubleshoot,c.troubleshoot,st,!0);t(k)}},t.prototype._processSettings=function(n){var t=this;this.settingList.items().slice().forEach((function(i){t._removeSetting(i)||(ui(i,n),ft(i))}))},t.prototype._removeSetting=function(n){var f=this,t=n.toSelection(),i=t.extension,r=t.detailBlade,e=t.key,u=!1;return ii.forEach((function(t){var o=f.settingList.items,s=o().some((function(n){return n.key===t.key}));(w&&i===a||i===t.extension&&(r===t.name||r===t.name2)&&e!==t.key&&s)&&(o.remove(n),u=!0)})),u},t.prototype._trace=function(t){var i={extension:t.extension,detailBlade:t.detailBlade},
r=this._searchText.peek();n.isNullOrWhiteSpace(r)||(i.searchText=r);oi.trace({source:"MsPortalFx.ViewModels.Parts.SettingList",action:"OpenSetting",name:t.key,data:i})},t})();t.BaseViewModel=b;fi=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u)}return __extends(t,n),t})(b);t.ViewModel=fi;ei=(function(n){function t(t,i,r,u){var f=this,o,s,e;n.call(this,t,i,r,u);o=this.selectable=new et;s=this.pcSelectable=new et;this.settingList.selectableData.selectedItems.subscribe(t,(function(n){var r=f.pcSelectable,u=f.selectable,t,i;n.length<1?(u.isSelected(!1),r.isSelected(!1)):(t=n[0],i=t.isParameterCollector?r:u,i.selectedValue(t),i.isSelected(!0))}));e=function(){var n=f.settingList.selectableData;n.selectedItems([]);n.activatedItems([])};o.isSelected.subscribe(t,(function(n){n||e()}));s.isSelected.subscribe(t,(function(n){n||e()}));this._initParameterCollector(t)}return __extends(t,n),t.prototype.isPCv3=function(){return!0},t.prototype._initParameterCollector=function(n){var t=this,i=this._getCurrentSetting.
bind(this),r={selectable:this.pcSelectable,supplyInitialData:function(){var n=i(t.pcSelectable);return n.getOptions().parameterCollector.supplyInitialData()},receiveResult:function(n){var r=i(t.pcSelectable);r.getOptions().parameterCollector.receiveResult(n)},supplyProviderConfig:function(){var r=i(t.pcSelectable),n=r.getOptions().parameterCollector;return n.supplyProviderConfig?n.supplyProviderConfig():null}};this.parameterCollector=new y.ParameterCollector(n,r)},t.prototype._getCurrentSetting=function(n){var t=n.selectedValue.peek();return this.settingList.items.peek().first((function(n){return n.key===t.key}))},t})(b);t.ViewModelV2=ei})(i=t.SettingList||(t.SettingList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){"use strict";var r=n.ViewModels.ParameterCollection.Internal,u=ko.observable,f=n.ViewModels.ContentState,e=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.SetupPart"),
o=n.Services.Gallery.Constants.GalleryOptionsKey,s=(function(i){function s(n,t){i.call(this,n,t,!1);this._setupPartContainer=null;this._previousCommit=null;this._outputs=null;this._setupPartContainer=n;this.provisioningEntity={cloudName:u(),enableProvisioning:u(!0),privatePcPrBI:new r.ProvisioningEntityBindingInternals}}return __extends(s,i),s.prototype.onInputsSet=function(n){return this.provisioningEntity.cloudName(r.getCloudNameFromInputs(n)),this._loadContent(),i.prototype.onInputsSet.call(this,n)},s.prototype.mutateOnLoad=function(){return null},s.prototype.mutate=function(n,t){this._setupPartContainer.mutate({partName:n,extensionName:t})},s.prototype.onProviderCommit=function(t,i){return this._outputs=i,n.Helpers.resolve(!0)},s.prototype._loadContent=function(){var i=this,n=this._setupPartContainer,r=this.mutateOnLoad(),t=function(){i._commit.subscribe(n,(function(n){i._executeProvisioningIfApplicable(n)}))};r?r.then((function(i){i?typeof i=="string"?n.mutate({partName:i}):n.mutate(i):
t()}),(function(){e.error("mutateOnLoad() returned a failed promise");t()})):t()},s.prototype._executeProvisioningIfApplicable=function(i){var a=this,s,u;if(this._outputs&&(s=this._previousCommit,this._previousCommit=i,!n.deepEquals(s,i)&&t.ActionBars.Base.isCompleted(this.stepOutput()))){u=this._setupPartContainer;u.selectable.isSelected(!1);u.contentState(f.None);var v=new r.Provisioner(this.provisioningEntity),y=this._outputs,h=this.privateFcTpBI.inputs().options,c=v.executeProvisioning(y,h);u.operations.add(c,{blockUi:!0});var p=h[o].uiDefinition,l=p.markup.reference,w=l.partName,b=l.partExtension;c.then((function(){u.mutate({partName:w,extensionName:b})}),(function(){e.error("executeProvisioning callback failed.");u.contentState(f.Error);a.beginExecuteCommand(!1)}))}},s})(t.ProvisioningPart.ContentViewModel);i.Content=s})(i=t.SetupPart||(t.SetupPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function r(){return{size:
i(n.Parts.PartSize.HeroWide),editButtonText:n.Resources.Strings.Part.Chart.editButtonText}}var i=ko.observable,u=(function(t){function i(n,i){var i=$.extend(r(),i);t.call(this,n,i);this._initSimpleChartPartOptions(i)}return __extends(i,t),i.prototype._initSimpleChartPartOptions=function(t){var i=this,r=t;n.shallowCopyFromObject(i,r,["size","editButtonSelectable","editButtonText"])},i})(n.ViewModels.Controls.Visualization.SimpleChart.ViewModel);t.SimpleChartPart=u})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground"})(t.MetricColorBarKind||(t.MetricColorBarKind={}));f=t.MetricColorBarKind;r=(function(){function t(){this.maximum=i(100);this.current=i(0);this.unit=i("");this.metrics=u();this.size=i(n.Parts.PartSize.Normal)}return t})();t.ViewModel=
r})(i=t.SingleValueGauge||(t.SingleValueGauge={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var o=n.Data,i=ko.observable,r=FxImpl.fromSerializableObject,u=FxImpl.isSerializedObject,f="",s={bothCallbacks:f,alreadySubscribed:f},e=FxImpl.getErrorMap(s),h=(function(){function f(n,t){this.defaultActionBarInput=i({isLastStep:!0,allowToggleProvisioningLocation:!0,status:null});this._configFromCollector=i();this._hasSentResult=!1;this._getResultSubscribers=[];!t.mapIncomingDataForEditScope==!t.mapIncomingDataForEditScopeAsync&&e.bothCallbacks();this._options=t;this._prepareEditScopeWithInitialData(n);this._setUpActionBarWatcher(n)}return Object.defineProperty(f.prototype,"editScope",{get:function(){return this._editScopeView.editScope},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"configFromCollector",{get:function(){return this._configFromCollector},enumerable:!0,configurable:!0}),
f.prototype.getResultsBeforeCommit=function(n){var t=this._getResultSubscribers.some((function(t){return t===n}));t&&e.alreadySubscribed();this._getResultSubscribers.push(n)},f.prototype.getResults=function(){var n=this._editScopeView.editScope&&this._editScopeView.editScope(),t;return n&&(t=this._options.mapOutgoingDataForCollector(n.root)),t},f.prototype._prepareEditScopeWithInitialData=function(n){var i=this,e,s,h,f;this.bladeCallable=new t.Internal.BladeCallable(n,{receiveParams:function(n){var t=n.initialData,f=n.providerConfig;u(t)&&(t=r(t));u(f)&&(f=r(f));i._configFromCollector(f);i._options.mapIncomingDataForEditScope?(s=i._options.mapIncomingDataForEditScope(t),e=Q({})):e=i._options.mapIncomingDataForEditScopeAsync(t).then((function(n){s=n}))}});h=this._editScopeCache=o.EditScopeCache.createNew({entityTypeName:this._options.editScopeMetadataType,supplyNewData:function(){return s}});n.registerForDispose(h);this._editScopeView=h.createView(n);n.onInputsSetCallbacks.add((function(t){if(
t.editScopeId&&t.editScopeId!==i._editScopeId){i._editScopeId=t.editScopeId;f=e.then((function(){return i._editScopeView.fetchForNewData(i._editScopeId)}));var r=n;typeof r.revealContent=="function"&&(f=f.then((function(){r.revealContent()})))}return f}))},f.prototype._setUpActionBarWatcher=function(n){var t=this,i=function(n){n&&n.status===3&&(t._hasSentResult||(t._hasSentResult=!0,t._discardEditScopeAndSendResult({actionBarOutput:n})))};n.onInputsSetCallbacks.add((function(n){i(n.internal_parameterProviderActionBarOutput);return}));ko.reactor(n,(function(){if(ko.isObservable(n._actionBar)){var t=n._actionBar();t&&i(t.output())}}))},f.prototype._discardEditScopeAndSendResult=function(n){var t=this._editScopeView,i=t.editScope&&t.editScope(),r,u,f;i&&(r=this._options.commitResult,r&&r(i.root),u=this._options.mapOutgoingDataForCollector(i.root,n),this.bladeCallable.sendResult({resultData:FxImpl.toSerializableObject(u)}),this._getResultSubscribers.forEach((function(n){n.receiveResult(u)})),f=this._editScopeCache,
f.disposeAndDiscardEdits(this._editScopeId,t))},__decorate([n.Composition.ProxyCompatibilityMode],f)})();t.ParameterProvider=h})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var r=undefined,t="",u={missingSelectable:t,bothSelectables:t,fieldAccessorAndCallbacks:t,missingCallbacks:t},i=FxImpl.getErrorMap(u),f=(function(){function t(t,u){var h=u.selectable,o=u.selectableSet,a=t.selectable,c=o?null:h||a,f=u.formFieldValueAccessor,e=u.receiveResult?u.receiveResult.bind(u):r,s=u.supplyInitialData?u.supplyInitialData.bind(u):r,l=u.supplyProviderConfig?u.supplyProviderConfig.bind(u):r;c||o||i.missingSelectable();h&&o&&i.bothSelectables();f?(e||s)&&i.fieldAccessorAndCallbacks():e||i.missingCallbacks();this.bladeCaller=new n.Internal.BladeCaller(t,{forceInvocation:u.fxInternalFI,invokeOnSelectable:c,invokeOnSelectableSet:u.selectableSet,supplyParams:function(n){var i=null,r;return s?i=s(n):f&&(r=f.getEditableObservable(t),i=r()),{initialData:
FxImpl.toSerializableObject(i),providerConfig:l?l(n):null}},receiveResult:function(n,i){var r=FxImpl.fromSerializableObject(n.resultData),u;e?e(r,i):(u=f.getEditableObservable(t),u(r))}})}return t})();n.ParameterCollector=f})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function e(n,i){return t.getProvisioningOperationEndPoint.acquireObject(i?i:u.client,f.Constants.Shell,n).then((function(n){var t=n&&n.getValue(),i;if(t)return i=t.provisioningPromise,i?(i.finally((function(){n.dispose()})),Q(t)):(n.dispose(),Q.reject("The provisioning operation was invalid."))}))}var f=MsPortalFx.Base,u=n.Rpc,i=n.Constants.RpcMethods,r=u.ProxiedObjectTypeDefinition;t.initiateProvisioningRequestEndPoint=new r(i.initiateProvisioningRequest);t.getProvisioningRequestEndPoint=new r(i.getProvisioningRequest);t.getProvisioningOperationEndPoint=new r(i.getProvisioningOperation);t.getProvisioningOperation=e})(i=t.ParameterCollectionV3||
(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="function"}function d(n){n||r.optionsMissing();u(n.supplyProvisioningPromise)||r.supplyProvisioningPromiseMissing();u(n.supplyStartboardInfo)||r.supplyStartboardInfoMissing();var t=n.parameterProvider;(n.actionBar?t:!t)||r.providerAndActionBar()}var c=n.Base,y=FxImpl.Extension.CloudName,p=n.ViewModels,l=FxImpl.ViewModels.ParameterCollectionV3,w=FxImpl.Rpc,e=p.ParameterCollection.Internal.ProvisioningTelemetry,a=e.ActionModifier,s=e.ProvisioningStatus,h=ko.observable,b=window,v=b.fx.environment,f=undefined,i="",k={optionsMissing:i,supplyProvisioningPromiseMissing:i,supplyStartboardInfoMissing:i,providerAndActionBar:i,automaticProvisioning:i,invalidStarboardInfo:i,badStarboardInfo:i,requestAlreadyExists:i,refKeyDoesntMatch:i,provisionerIdMissing:i,provisionerNotFound:i,refKeyMissing:i,requestNotFound:i},r=FxImpl.
getErrorMap(k),g=(function(){function t(i,r){var o=this,f,s,a,e,c,l;this.provisioningConfig=h();this.provisioningPromise=h();this.provisionOnStartboard=h(!1);this._isCustomProvisioning=!0;this._actionBarSupportsForceInProgressStatus=!1;this._actionBarSupportsIsProvisioningBlade=!1;this._actionBarSupportsProvisionOnStartboardPart=!1;this._actionBarSupportsSecondaryLinkDisplayText=!1;this._actionBarSupportsSecondaryLinkValidation=!1;this._actionBarSupportsShowActionBar=!1;d(r);this._options=r;f=this._actionBar=r&&r.actionBar;s=!1;f&&(s=this._actionBarSupportsIsProvisioningBlade=u(f.isProvisioningBlade),this._actionBarSupportsForceInProgressStatus=u(f.forceInProgressStatus),this._actionBarSupportsProvisionOnStartboardPart=u(f.provisionOnStartboardPart),this._actionBarSupportsSecondaryLinkDisplayText=u(f.secondaryLinkDisplayText),this._actionBarSupportsSecondaryLinkValidation=u(f.secondaryLinkTriggerValidation),this._actionBarSupportsShowActionBar=u(f.showActionBar));a=this._provisionerId=n.
getUniqueId();t.provisionersList[a]=this;e=r.parameterProvider;e&&(e.getResultsBeforeCommit(this),c=function(t){var r=t&&t.provisioningConfig,u,i,e;r&&(o.provisioningConfig(n.clone(r)),u=r&&r.galleryCreateOptions,i=u&&u.launchingContext,i=o._launchingContext=n.clone(i)||{},i.extVersion=v.version,e=o._telemetryId,!e||(i.telemetryId=e),s&&f.isProvisioningBlade(t.provisioningConfig.provisioningEnabled))},c(e.configFromCollector()),e.configFromCollector.subscribe(i,c));t._registerRpcCallbacks();l=function(n){o._cloudName=y.readFromInputs(n);i.onInputsSetCallbacks.remove(l);return};i.onInputsSetCallbacks.add(l)}return t.prototype.dispose=function(){delete t.provisionersList[this._provisionerId]},t.prototype.startProvisioning=function(n){this._actionBar&&r.automaticProvisioning();var t=this._options.supplyStartboardInfo(n);return t&&!o.isValid(t)&&r.invalidStarboardInfo(),this.provisionOnStartboard(!!t),this._initiateProvisioningRequest(n,t)},t.prototype.receiveResult=function(n){var t=this.
provisioningConfig()||{};t.provisioningEnabled&&this._beginProvisioning(n)},t.prototype._beginProvisioning=function(n){var t,i=this._actionBarSupportsProvisionOnStartboardPart&&this._actionBar.provisionOnStartboardPart();return this.provisionOnStartboard(i),i&&(t=this._options.supplyStartboardInfo(n)||this.provisioningConfig().startboardProvisioningInfo,o.isValid(t)||r.badStarboardInfo()),this._initiateProvisioningRequest(n,t)},t.prototype._initiateProvisioningRequest=function(i,u){var a=this,h=this._launchingContext||{},s,e,o;return h.telemetryId||(h.telemetryId=this._telemetryId=n.newGuid()),h.extVersion||(h.extVersion=v.version),s=this._createEventBase.bind(this),this._traceProvisioningStarted(s()),e=this._options.supplyProvisioningPromise(i),this.provisioningPromise(e),e?(e.then((function(n){a._traceProvisioningEnded(n,!0,s())}),(function(n){a._traceProvisioningEnded(n,!1,s())})),o=n.getUniqueId(),t.provisioningRequestsLookup[o]&&r.requestAlreadyExists(),t.provisioningRequestsLookup[o]=
{provisioningConfig:this.provisioningConfig(),provisioningRefKey:o,provisioningPromise:e,startboardInfo:u},l.initiateProvisioningRequestEndPoint.acquireObject(t.rpcClient,c.Constants.Shell,{provisionerId:this._provisionerId,provisioningRefKey:o,cloudName:this._cloudName}).then((function(n){n.getValue().provisioningRefKey!==o&&r.refKeyDoesntMatch();n.dispose()}))):this._traceProvisioningEnded(f,f,s()),e},t._registerRpcCallbacks=function(){t._rpcRegistered||(l.getProvisioningRequestEndPoint.registerObjectFactory(t.rpcClient,{allowedOrigin:[c.Constants.Shell],allowRemoteChanges:!0,handler:function(n){var i=n.provisionerId,u;if(i||r.provisionerIdMissing(),u=t.provisionersList[i],u)return Q(u.getProvisioningRequest(n.provisioningRefKey));r.provisionerNotFound(i)}}),t._rpcRegistered=!0)},t.prototype.getProvisioningRequest=function(n){var i,u;return n||r.refKeyMissing(),i=t.provisioningRequestsLookup[n],i||r.requestNotFound(n),u=i.provisioningPromise,u&&u.finally((function(){delete t.provisioningRequestsLookup[
n]})),i},t.prototype._createEventBase=function(){var n=this._launchingContext,t={source:f,action:f,name:n&&n.galleryItemId,data:{isCustomProvisioning:this._isCustomProvisioning,provisionOnStartboard:this.provisionOnStartboard()}};return n&&(t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(n){return e.traceProvisioningStarted(n)},t.prototype._traceProvisioningEnded=function(n,t,i){var r=i||{};return r.actionModifier||(r.actionModifier=t===f||t?a.Succeeded:a.Failed),r.data||(r.data={}),r.data.provisioningStatus||(r.data.provisioningStatus=t===f?s.NoPromise:t?s.Resolved:s.UnknownFailure),e.traceProvisioningEnded(r)},t.rpcClient=w.client,t.provisioningRequestsLookup={},t.provisionersList={},t._rpcRegistered=!1,t})(),o;t.Provisioner=g;o=(function(){function n(){}return n.isValid=function(n){n=n||{};var t=n.provisioningPart||{},i=n.startboardPart||{};return!!t.name&&!!t.extension&&!!i.name&&!!i.extension&&!!n.startboardPartKeyId},n})();t.StartboardInfo=o})(i=t.ParameterCollectionV3||
(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";n.pollingInterval=2e3;n.pollingRetries=10})(t=n.ParameterCollectionV3||(n.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(i){"use strict";function o(n){return typeof n=="function"}function s(n,t){return t===void 0&&(t=u.pollingRetries),u.getProvisioningOperation(n).catch((function(i){return--t?Q.delay(u.pollingInterval).then((function(){return s(n,t)})):Q.reject(i)}))}var u=FxImpl.ViewModels.ParameterCollectionV3,r=ko.observable,f=new n.Base.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),h=f.warning.bind(f),e=n.clone,c=(function(i){function u(u,f){var e=this,h,c,s;i.call(this);this.description=r("");this.errorMessage=r();this.icon=r(n.Base.Images.Shell.DefaultBlade());this.initialData=r();this.updatedData=r();this.provisioningPromise=r();this.
provisioningStarted=r(!1);this.statusUnknown=r(!1);this.title=r("");this._shouldBlockUiWhenProvisioning=!0;this._provisioningConfig=r();this._delayPromise=Q.delay(2e3);h=f&&f.container||{};c=h.selectable&&h.selectable.selectedValue||!0;u.selectable=t.Part.createSelectableViewModel(f,c);this._partContainer=u;this.icon=r(n.Base.Images.Gear());s=f&&f.content||{};this.initialData(s.initialData);this.updatedData(s.updatedData);this.statusUnknown(s.statusUnknown);this.errorMessage(s.errorMessage);this.provisioningPromise.subscribe(u,(function(n){if(n)if(e._shouldBlockUiWhenProvisioning&&u.operations.add(n,{blockUi:!0}),o(e.onProvisioningPromiseAcquired))e.onProvisioningPromiseAcquired(n);else n.then((function(n){e.mutateIntoStartboardPart(n)}),(function(n){if(o(e.onProvisioningPromiseError))e.onProvisioningPromiseError(n);else e.errorMessage(n)}))}))}return __extends(u,i),Object.defineProperty(u.prototype,"provisioningConfig",{get:function(){if(!this._provisioningConfig()){var n=this.initialData();
this._provisioningConfig(e(n&&n.provisioningConfig))}return this._provisioningConfig()},set:function(n){this._provisioningConfig(e(n))},enumerable:!0,configurable:!0}),u.prototype.onInputsSet=function(n){n&&n.initialData&&(this.initialData(n.initialData),this.provisioningPromise()||this.errorMessage()||this.statusUnknown()||(this.provisioningStarted(!0),this._fetchProvisioningPromise()));return},u.prototype.mutateIntoStartboardPart=function(n){var u=this,t=this.initialData(),i,r;if(!t||!t.startboardPart){this.errorMessage("Could not mutate into target part");throw new Error("Initial data was not persisted correctly to the part's viewstate. Make sure the 'initialData' property is added to your Part.ViewStateProperties in your PDL.");}i=t.startboardPart;r={partName:i.name,extensionName:i.extension,containerModel:n};this._delayPromise.then((function(){u._partContainer.mutate(r)}))},u.prototype._fetchProvisioningPromise=function(){var n=this,t=this.initialData().provisioningRefKey;!t||s(t).then(
(function(t){var i=t.provisioningPromise;if(i)n.updatedData(t.data),n.provisioningPromise(i);else throw new Error("Provisioning operation missing promise");})).catch((function(t){n.statusUnknown(!0);h(t)}))},__decorate([n.Composition.ProxyCompatibilityMode],u)})(t.ButtonPart);i.ProvisioningPart=c})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function e(n){return typeof n=="function"}var o=n.Base,u=n.ViewModels,h=o.Diagnostics,i=u.Controls.Lists.Grid,r=ko.observable,f=ko.observableArray,s=h.Log.writeEntry,c=(function(t){function h(n,i,f){var o=this,s,h;if(t.call(this,n),this.showSelectButton=r(!1),this.triggerSelectAction=r(""),this.showInfoBox=r(!1),this._basicTemplate="<div style='height: 40px; margin-top: 10px'><!-- ko if: settings.item.icon --><div style='width: 30px; height: 30px; float: left; margin-right: 10px;' data-bind='image: settings.item.icon'><\/div><!-- /ko --><div><div><div data-bind='text: value()' class='msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow'><\/div><\/div><div><!-- ko if: settings.item.subtitle --><div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' data-bind='text: settings.item.subtitle' style='max-width: 60%; float: left'><\/div><!-- /ko --><!-- ko if: settings.item.detail --><div class='msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow' style='max-width: 20%; float: right' data-bind='text: settings.item.detail'><\/div><!-- /ko --><\/div><\/div><\/div>",
!f.dataNavigator==!f.items)throw new Error("For PickerBase options, specify dataNavigator or items (not both).");this.showSelectButton(f.allowMultiSelect||!1);s=f.createNewOptions;this.showCreateAction=r(s&&!!s.title&&!!s.dynamicBladeSelection);this._buildAddNewGrid(n,s);this._buildPickerGrid(n,f);this.pickerGrid.selectableData.selectedItems.subscribe(n,(function(n){var t=o.showSelectButton(),i,r,u;n&&n.length>0?(o.addNewGrid&&o.addNewGrid.selectableData&&o.addNewGrid.selectableData.selectedItems&&o.addNewGrid.selectableData.selectedItems([]),i=void 0,t||(r=n[0],i=o.dataModel&&!f.isItemInDataModel(r,o.dataModel())),(i||t)&&(u=f.mapItemsToDataModel(n),o._saveToEditScope(u))):t&&o._saveToEditScope(null)}));this.pickerGrid.items.subscribeArrayAdds(n,(function(n){n.disabled&&n.disabled()?o._disableGridItem(n):o.dataModel&&f.isItemInDataModel(n,o.dataModel())&&o._selectGridItem(n)}));this.parameterProvider=new u.ParameterProvider(n,{mapIncomingDataForEditScope:function(n){return{pickedItems:r(f.
mapIncomingDataToDataModel(n))}},mapOutgoingDataForCollector:function(n){return n.pickedItems()}});this.addNewItemCollector=new u.ParameterCollector(n,{supplyInitialData:function(){return e(s.supplyInitialData)?s.supplyInitialData():{}},receiveResult:function(n){e(s.receiveResults)&&s.receiveResults(n);o.addNewGrid.selectableData.selectedItems([]);o._saveToEditScope(n)},supplyProviderConfig:function(){if(e(s.supplyProviderConfig))return s.supplyProviderConfig()},selectableSet:this.addNewGrid.selectableData});this.addNewGrid.selectableData&&this.addNewGrid.selectableData.selectedItems&&this.addNewGrid.selectableData.selectedItems.subscribe(n,(function(n){n&&n.length>0&&o.pickerGrid.selectableData.selectedItems([])}));h=n.createChildLifetime();ko.computed(h,(function(){if(o.parameterProvider.editScope()){var n=o.parameterProvider.configFromCollector();f.loadPickerItems(n||{},o.dataModel());h.dispose()}})).extend({throttle:50})}return __extends(h,t),h.prototype.openCreateNewBlade=function(){var
n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.selected(!0))},h.prototype.disableCreateNewOption=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.disabled(!0))},h.prototype._saveToEditScope=function(t){this.dataModel(t);this.showSelectButton()||this.triggerSelectAction(n.getUniqueId())},h.prototype._buildPickerGrid=function(t,u){var s=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},{itemKey:"infoBalloon",format:i.Format.HtmlBindings,width:r("35px"),formatOptions:{htmlBindingsTemplate:"<!-- ko if: value --><div data-bind='pcDockedBalloon:value'><\/div><!-- /ko -->"}}],o={selectionMode:u.allowMultiSelect?2:1},e;e=u.dataNavigator?this.pickerGrid=new i.ViewModel(t,null,i.Extensions.SelectableRow|i.Extensions.Pageable,{selectableRow:o,pageable:{type:i.PageableType.Sequential,dataNavigator:u.dataNavigator}}):this.pickerGrid=new
i.ViewModel(t,u.items,i.Extensions.SelectableRow,{selectableRow:o});e.columns=f(s);e.showHeader=!1;e.noRowsMessage(n.Resources.Strings.ViewModels.Controls.noRowsMessage)},h.prototype._buildAddNewGrid=function(t,u){var e,s={activateOnSelected:r(!0),selectionMode:1},c=f(),h;!u||!u.title||!u.dynamicBladeSelection||(e=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}}],c([{title:r(u.title),icon:r(o.Images.AddBoxed()),item:null}]),s=n.extend(s,{itemMatchesSelection:function(){return!0},createSelection:function(){return u.dynamicBladeSelection}}));h=this.addNewGrid=new i.ViewModel(t,c,i.Extensions.SelectableRow,{selectableRow:s});e&&(h.columns=f(e));h.showHeader=!1},Object.defineProperty(h.prototype,"dataModel",{get:function(){var n=this.parameterProvider.editScope();return n&&n.root&&n.root.pickedItems},enumerable:!0,configurable:!0}),h.prototype._selectGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?t.selected(
)||t.selected(!0):s(1,"Pickers","Metadata is null. Unable to set selected flag.")}},h.prototype._disableGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?(t.disabled(!0),t.selected()&&t.selected(!1)):s(1,"Pickers","Metadata is null. Unable to set disabled flag.")}},__decorate([n.Composition.ProxyCompatibilityMode],h)})(u.Controls.Loadable.ViewModel);t.PickerBase=c})(i=t.Pickers||(t.Pickers={}))})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.Base,f=FxImpl.Rpc,e=new i.Diagnostics.Log("MsPortalFx/Hubs/Notifications"),r="Only one of asset/blade/uri can be specified",o,u;(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(t.NotificationStatus||(t.NotificationStatus={}));o=t.NotificationStatus;u=(function(){function t(t){var u=this,
i;if(t.asset&&t.linkedBlade)throw new Error(r);["status","title","description","descriptionAsHtml","percentComplete","asset","uri","uriAction","linkedBlade","additionalProperties"].forEach((function(n){u[n]=t[n]}));this.correlationIds=["clientNotification-"+n.getUniqueId()];i=t.correlationIds;i&&i.length&&Array.prototype.push.apply(this.correlationIds,i)}return t.prototype.validate=function(){var n=this.title||"",t=this.description||"";if(n.trim()&&t.trim())return!0;e.error("Missing title/description")},t.prototype.package=function(n){var t=this;return{timestamp:new Date,status:t.status,title:t.title,description:t.description,descriptionAsHtml:t.descriptionAsHtml||!1,correlationIds:t.correlationIds,percentComplete:t.percentComplete,asset:t.asset,isRecommendation:!1,cloudName:n,uri:t.uri,linkedBlade:t.linkedBlade,additionalProperties:t.additionalProperties}},t.prototype.publish=function(){var n=this;if(n.validate()){if(n.asset&&n.linkedBlade)throw new Error(r);FxImpl.Hubs.Notifications.addClientNotficationDefinition.
invoke(f.client,i.Constants.Shell,n.package())}},t.publish=function(n){var i=new t(n);return i.publish(),i},t})();t.ClientNotification=u})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var e=MsPortalFx.Base,r=n.Rpc,o=MsPortalFx.Hubs.Notifications,u=n.Constants.RpcMethods,i=r.FuncEndPointDefinition,s,f;t.addClientNotficationDefinition=new i(u.addClientNotification);t.addClientNotficationsDefinition=new i(u.addClientNotifications),(function(n){n[n.NavigatePortal=0]="NavigatePortal";n[n.OpenInNewTab=1]="OpenInNewTab";n[n.OpenInCurrentTab=2]="OpenInCurrentTab"})(t.ClientNotificationUriAction||(t.ClientNotificationUriAction={}));s=t.ClientNotificationUriAction;t.showModalNotification=new i("showModalNotification");f=(function(n){function i(t,i){n.call(this,t);this.cloudName=i}return __extends(i,n),i.prototype.publish=function(){var i=this,n;if(i.validate())return n=i.package(i.cloudName),
n.isServerEvent=!1,t.addClientNotficationDefinition.invoke(r.client,e.Constants.Shell,n),n.timestamp},i.internalPublish=function(n,t){var r=new i(n,t);return r.publish(),r},i})(o.ClientNotification);t.InternalClientNotification=f})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i;(function(t){var i=n.Rpc.FuncEndPointDefinition;t.getLockValidation="isLocked";t.isLockedEndpoint=new i(t.getLockValidation)})(i=t.Lock||(t.Lock={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function i(n){return typeof n=="string"}function f(n){return typeof n=="object"}function e(n){var t={};if(n)return MsPortalFx.forEachKey(n,(function(n,r){var o=i(n)&&n.toLowerCase()||n,u=r;try{u=JSON.parse(u)}catch(s){}u&&(t[o]=f(u)&&e(u)||u)})),t}function o(n,t){var a,v,c;f(n.message)&&!n.details&&(n=n.message.error||n);var
s=n.message,y=MsPortalFx.map(n.details||[],(function(n){return[n]})),l=[],e,h;if(s&&(a=s.error||{},e=a.message||s.message,h=a.code||s.code,e||i(s)?e&&!i(e)&&(e=JSON.stringify(e)):e=JSON.stringify(s)),y.length&&(l=y.map((function(n){return o(n,t-1)}))),e=e||s,h=h||n.code,v=n.target,c=h&&(v?r.errorMessageWithTarget:u).format(e,h,v)||e,l.length){if(t>1)return{error:c,details:l};c=c.concat(" "+l.join(", "))}return c}function s(n,t){var r;if(n){(t<=0||!t)&&(t=1);var i=e(n),f=i.code&&u.format(i.message,i.code)||i.message,s=$.map(i.details,(function(n){return[n]})),h=(s||[]).map((function(n){return o(n,t)}));r={error:f,details:h}}return r}function h(n,t){var i=s(n),r=i.error||t||"";return MsPortalFx.forEachKey(i.details,(function(n,t){r+=" "+t})),r}function l(n,t,i){var r=MsPortalFx.extend({message:t},{name:n.name,stack:n.stack,code:i||n.code,readyState:n.readyState,status:n.status,statusText:n.statusText});return r.readyState!==0||r.status||(r.status=0,r.statusText="ajax readyState was zero"),r}function a(
t){var r,f,e=t.responseText,u=t.responseJSON&&(t.responseJSON.error||t.responseJSON.Error||t.responseJSON),o=u&&(u.message||u.Message);if(o)r=h(u),f=u.code;else if(e)r=e;else if(t.message)r=t.message;else{if(t instanceof Error)return t;r=i(t)?t:"Unknown error occurred. Detail: "+n.Diagnostics.getLogFriendlyMessage(t)+"."}return l(t,r,f)}function v(n){return c.test(JSON.stringify(n))?{code:"Scrubbed",message:"Object may contain sensitive data."}:n}var r=MsPortalFx.Resources.Strings.Azure,c=new RegExp("password","ig"),u=r.errorMessageWithCode;t.parseArmError=s;t.parseArmErrorToMessage=h;t.buildSimplifiedError=a;t.scrubError=v})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function i(n){return typeof n=="function"}var a=MsPortalFx.Base,h=MsPortalFx.ViewModels,b=h.Obsolete.Forms.FilterComboBox,k=a.Security,r=undefined,v=MsPortalFx.Resources.Strings.Azure.BaseResourceDropDown,e=ko.computed,o=ko.observable,c=ko.observableArray,y=ko.reactor,p=new a.
Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),l=p.warning.bind(p),s=h.getValidationResultPromise,w=MsPortalFx.localeCompareIgnoreCase,u="",d={optionsUndefined:u,formUndefined:u,accessorUndefined:u,configUndefined:u,fetchItemsUndefined:u,filterObjUndefined:u,mapItemUndefined:u,cannotWriteValidate:u},f=n.getErrorMap(d),g=(function(){function n(n,t,u){var a=this,d,g,p,l,w,tt,k,nt,it;this._itemsObs=c();this._firstLoad=!0;this._validateBaseOptions(t);this._validateBaseConfig(u);this._bContainer=n;this._loadingDeferred=Q.defer();this._loading=o(!0);d={options:c(),filterOptions:{datasetType:0},validations:c()};MsPortalFx.extend(d,t);this._bOptions=d;this._setOptions=d.options;g={allowCreateNew:!1,blockLoadingItems:o(!1),nameForInitialValue:o(),getSortedListForInitialSelection:function(){return a._items},fetchItems:r,filterObjectByName:r,itemToHierarchicalFormOption:r};MsPortalFx.extend(g,u);this._bConfig=g;this._bConfig.allowCreateNew||this._bOptions.validations.push(new h.CustomValidation(
v.creatingResourcedDisabledValidationMessage,function(n){var t=!a.getObjectByName(n);return s(t&&v.creatingResourcedDisabledValidationMessage)}));p=i(u.filterComboBoxCreateCallback)?u.filterComboBoxCreateCallback(this._bOptions):{filterComboBox:new b.ViewModel(n,this._bOptions),control:null};l=this._filterCombo=p.filterComboBox;this.control=u.control||p.control||p.filterComboBox;tt=u.optionsFilter;y(n,(function(){var n=a._itemsObs();a._setOptions((tt?tt(n):n).map(u.itemToHierarchicalFormOption));l.value.peek()&&a.triggerValidation()}));k=!1;y(n,(function(){var n=u.createNewOption&&u.createNewOption(),t=n?null:l.value();n=n||a.getObjectByName(t)||g.nullValue;(!t||~l.items.peek().map((function(n){return n.text.peek()})).indexOf(t))&&!k&&w&&w(n)}));this.value=o();this.value.subscribe(n,(function(n){if(k||n!==w()){var i=n&&a._bConfig.itemToHierarchicalFormOption(n),t=i&&i.text(),r=a.getObjectByName(t)||a.getObjectByName(i&&i.value);(t=r&&a._bConfig.itemToHierarchicalFormOption(r).text()||t,l.value(
)!==t)&&l.value(t)}}));ko.pureComputed((function(){return!!t.form.editScope()&&!a._bConfig.blockLoadingItems()})).fxOnceAndRun(n,(function(){w=t.accessor.getEditableObservable(n);w.subscribe(n,(function(n){try{k=!0;a.value(n)}finally{k=!1}}));a._loadItems()}),(function(n){return n}));i(l.valid)&&(this.valid=e(n,{read:function(){return p.valid?p.valid()&&l.valid():l.valid()},write:function(){f.cannotWriteValidate()}}));i(l.enabled)&&(nt=o(!0),this.enabled=e(n,{read:function(){return l.enabled()},write:function(n){nt(n);nt.valueHasMutated()}}),e(n,(function(){l.enabled(nt())})),e(n,(function(){l.loading(a._loading())})));i(l.infoBalloonContent)&&(this.infoBalloonContent=e(n,{read:function(){return l.infoBalloonContent()},write:function(n){l.infoBalloonContent(n)}}));it=function(){return a._loadingDeferred.promise.then((function(){n.onInputsSetCallbacks.remove(it)}))};n.onInputsSetCallbacks.add(it)}return Object.defineProperty(n.prototype,"_items",{get:function(){return this._itemsObs.peek()},set:function(
n){this._itemsObs(n)},enumerable:!0,configurable:!0}),n.prototype.clearValidation=function(){var n=this._filterCombo;return n&&i(n.clearValidation)?n.clearValidation():Q()},n.prototype.triggerValidation=function(){var n=this._filterCombo;return!this._firstLoad&&n&&i(n.triggerValidation)?n.triggerValidation():Q()},n.prototype.getObjectByName=function(n){var t=this;return this._items.first((function(i){return t._bConfig.filterObjectByName(i,n)}))},n.prototype._loadItems=function(){var n=this;this._loading(!0);this._bConfig.fetchItems().catch((function(n){return l("Failed to fetch items: "+n.message),[]})).then((function(t){t===void 0&&(t=[]);n._items=t;var i=n._bOptions.form.editScope();i.isDisposed||n._setInitialValue().finally((function(){n._firstLoad=!1;n._loading(!1);n._loadingDeferred.resolve();n.triggerValidation()}))}))},n.prototype._hasPermission=function(n,t,r){var f=i(t)&&t(),u=f&&f.actions||[];return u.length<1?s():k.hasPermission(n,u).then((function(n){return s(!n&&(f.message||r||"{0}")
.format(u.toString()))}),(function(){return l("Failed to get permissions on ["+u.toString()+"] over scope '"+n+"'."),s()}))},n.prototype._setInitialValue=function(){var f=this,n,t=this._bConfig,s=t.itemToHierarchicalFormOption,h=this._filterCombo,u=t.createNewOption,p=u&&u(),c=!1,b,l,v,d,o,y;if(this._firstLoad?(b=this._bOptions.form.editScope(),b.isDisposed||(l=this._bOptions.accessor.getEditableObservable(this._bContainer),n=l&&l()),MsPortalFx.keysLength(n)||(n=r)):n=this.value(),n){var e=s(n),a=e&&e.text(),k=e&&e.value;n=(a||k)&&h.items().first((function(n){return!w(n.value,k)||!w(n.text(),a)}))&&this.getObjectByName(a)||p?(c=!0)&&n:r}return!this._firstLoad&&n?Q():(this._firstLoad&&!n&&(v=i(t.nameForInitialValue)?t.nameForInitialValue():r,n=!!v&&this.getObjectByName(v)||r),!n&&!n&&t.allowCreateNew&&i(u))?(h.value(""),this._firstLoad&&Q.nextTick((function(){f._resetEditScopeValue(n=p)})),Q()):(d=n,y=this._items,Q().then((function(){if(!c)return n?(o=s(n),f._validate(o.text()).then((function(t)
{t||(n=r)}))):void 0})).then((function(){if(!n&&y.length)return f._getFirstValidValue(t.getSortedListForInitialSelection()).then((function(t){n=t}))})).finally((function(){n||(n=d||y[0]);f._resetEditScopeValue(n);n&&(c?u&&u(n):(o=s(n),h.value(o.text())))})))},n.prototype._getFirstValidValue=function(n,t){var f=this;if(t===void 0&&(t=0),t<n.length){var i=n[t],e=this._bConfig.itemToHierarchicalFormOption(i),u=e.text();return this._filterCombo.items().first((function(n){return n.text()===u}))?this._validate(u).then((function(r){return r?i:f._getFirstValidValue(n,t+1)}),(function(){return Q(r)})):this._getFirstValidValue(n,t+1)}return Q(r)},n.prototype._resetEditScopeValue=function(n){if(n){var t=this._bOptions.form.editScope();t.isDisposed||t.resetValue(this._bOptions.accessor,{newInputValue:n})}},n.prototype._validate=function(n){var t=this._bOptions.validations,u=i(t)&&t()||[],f=u.map((function(t){var u=t.validate;return i(u)&&u(n)||r}));return Q.all(f).then((function(n){return n.every((function(n){return!n||
n.valid}))}),(function(){return l("Failed to validate '"+n+"'. Assuming valid."),Q(!0)}))},n.prototype._validateBaseOptions=function(n){n||f.optionsUndefined();n.form||f.formUndefined();n.accessor||f.accessorUndefined()},n.prototype._validateBaseConfig=function(n){n||f.configUndefined();i(n.fetchItems)||f.fetchItemsUndefined();i(n.filterObjectByName)||f.filterObjUndefined();i(n.itemToHierarchicalFormOption)||f.mapItemUndefined()},n})();t.BaseResourceDropDown=g})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function o(n,r){return t.getLocationsForCreateEndPoint.invoke(n,i,r)}function s(n){return t.getLocationDisplayNamesEndPoint.invoke(n,i,null)}function h(n){return t.ResourceManager.readUserSettingsEndPoint.invoke(n,i,[t.lastUsedLocationsKey]).then((function(n){var i=n[t.lastUsedLocationsKey]||{};return Object.keys(i).sort((function(n,t){var r=i[n],u=i[t];return r<u?1:r>u?-1:0}))}))}function c(n,t){return n.displayName.toLowerCase().localeCompare(t.
displayName.toLowerCase())}var f=MsPortalFx.Base,e=n.Rpc,r=n.Constants.RpcMethods,u=e.FuncEndPointDefinition,i=f.Constants.ExtensionNames.Hubs;t.getLocationDisplayNamesEndPoint=new u(r.getLocationDisplayNames);t.getLocationsForCreateEndPoint=new u(r.getLocationsForCreate);t.lastUsedLocationsKey="deployments_lastUsed_locations";t.getLocationsForCreate=o;t.getLocationDisplayNames=s;t.getLastUsedLocations=h;t.locationsComparer=c})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function h(n){return n.toLowerCase()}function b(){return i.getLocationDisplayNames(l.client)}var l=FxImpl.Rpc,i=FxImpl.Azure,a=n.ViewModels,v=FxImpl.Azure,y=FxImpl.Extension.CloudName,c="function",u=undefined,r=ko.observable,p=ko.observableArray,f=ko.unwrap,e=a.getValidationResultPromise,o="",w={subsIdObsMissing:o,bothfilters:o,subIdMissing:o},s=FxImpl.getErrorMap(w),k;t.getLocations=b,(function(t){function d(n){typeof n.subscriptionIdObservable!==c&&s.subsIdObsMissing();var
t=f(n.filter);t&&!t.allowedLocations==!t.disallowedLocations&&s.bothfilters()}function g(n,t){return!w(n.displayName,t)||!w(n.name,t)}function nt(n){if(n)return{text:r(n.displayName||n.name),value:n.name}}function tt(n,t,r){return i.getLocationsForCreate(l.client,{subscriptionId:n,resourceTypes:t,cloudName:r}).then((function(n){return(n||[]).map((function(n){return{displayName:n.displayName,name:n.name}}))}))}var b=v.BaseResourceDropDown,k=n.ViewModels,l=FxImpl.Rpc,a=n.Resources.Strings.Azure,o=a.Locations.DropDown,w=n.localeCompareIgnoreCase,it=(function(n){function t(t,v){var w=this,ct,b,it,rt,ot,st,lt,et,ut,ft,ht;d(v);v.label||(v.label=r(o.defaultLabel));b=v.filter;ot=[null];b&&(v.validations||(v.validations=p()),st=function(n){var t,i;it=rt=u;n&&(t=n.allowedLocations,t?it=t.locationNames.map(h):(i=n.disallowedLocations||[],rt=i.map((function(n){return{name:h(n.name)}}))))},st(f(b)),lt=b,ko.isSubscribable(b)&&lt.subscribe(t,(function(n){st(n)})),v.validations.push(new k.CustomValidation(o.emptyMessage,
function(n){if(!ot.length)return e(o.emptyMessage);var t=w._items.first((function(t){return t.displayName===n}));return(n=t&&t.name,it&&!~it.indexOf(n)||rt&&~rt.map((function(n){return n.name})).indexOf(n))?e(a.BaseResourceDropDown.searchingValidationMessage.format(n)):e()})));ut={optionsFilter:function(n){return f(b),ot=n.filter((function(n){var t=h(n.name);return(!it||!!~it.indexOf(t))&&(!rt||!~rt.map((function(n){return n.name})).indexOf(t))}))},blockLoadingItems:r(!0),nameForInitialValue:r(),getSortedListForInitialSelection:function(){return et},fetchItems:function(){var n=w._subId,t=w._resourceTypes||[];return n||s.subIdMissing(),tt(n,t,ct).then((function(n){return i.getLastUsedLocations(l.client).then((function(t){var r=n.map((function(n){return n.name})),u=r.map((function(){return!1}));return et=[],t.forEach((function(t){var i=r.indexOf(t);i>-1&&(u[i]=!0,et.push(n[i]))})),u.reduce((function(t,i,r){return i||t.push(n[r]),t}),et),n.sort(i.locationsComparer)}))}))},filterObjectByName:g,itemToHierarchicalFormOption:
nt};n.call(this,t,v,ut);this._subId=null;ft=u;v.subscriptionIdObservable.subscribe(t,(function(n){if(n){if(typeof ft=="boolean"&&(w.enabled(ft),ft=u),w._subId!==n){var t=!!w._subId;w._subId=n;ut.blockLoadingItems(!1);t&&w._loadItems()}}else ft=w.enabled(),w.enabled(!1)}));ko.reactor(t,(function(){w._resourceTypes=typeof v.resourceTypesObservable===c?v.resourceTypesObservable():[];w._subId&&w._loadItems()}));ht=function(n){var u,i,r;ct=y.readFromInputs(n);u=n.internal_bladeCallerParams||{};i=u.providerConfig||{};FxImpl.isSerializedObject(i)&&(i=FxImpl.fromSerializableObject(i));ut.nameForInitialValue()||(r=(i.provisioningConfig||{}).galleryCreateOptions||{},r.resourceGroupLocationDisplayName&&(ut.nameForInitialValue(r.resourceGroupLocationDisplayName),!w._subId&&r.subscriptionId&&(w._subId=r.subscriptionId,ut.blockLoadingItems(!1))),t.onInputsSetCallbacks.remove(ht));return};t.onInputsSetCallbacks.add(ht)}return __extends(t,n),t})(b);t.DropDown=it})(k=t.Locations||(t.Locations={}))})(t=n.Azure||
(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function o(n,r,u){return t.getResourceGroupsFromSubscriptionEndPoint.invoke(n,i,{cloudName:u,subscriptionIds:r})}function s(n,r,u){return t.ResourceManager.Lock.isLockedEndpoint.invoke(n,i,{lockLevel:"ReadOnly",resourceId:r,cloudName:u})}var r=MsPortalFx.Base,u=n.Rpc,f=n.Constants.RpcMethods,e=u.FuncEndPointDefinition,i=r.Constants.ExtensionNames.Hubs;t.getResourceGroupsFromSubscriptionEndPoint=new e(f.hubsGetResourceGroupsFromSubscription);t.getResourceGroupsFromSubscription=o;t.getIsReadOnly=s})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var o=n.ViewModels,s=n.Resources.Strings.ViewModels.Controls.ResourceGroups,f=o.CustomValidation,u=undefined,r=ko.observable,e=ko.observableArray,h=ko.reactor,i=o.getValidationResult,c;(function(t){function wt(n,t,i,r){return a.validateResourceGroupName(n,t,u,i,r)}function bt(n,t){var r,u,i;return n?(r=ft(n),!r.valid)?
void 0:t.length<1?n:(u=1,i=function(r){var f=t.some((function(n){return n.toLocaleLowerCase()===this}),r.toLocaleLowerCase());return f&&i(n+"_"+u++)||r},i(n)):n}function ft(n){return(n=n||"",n.length>t.NameMaxLength)?i(o.lengthValidationMessage):n&&!vt.test(n)?i(o.invalidMessage):i()}var ot=n.Azure,w=n.Base,v=FxImpl.ViewModels.Forms.CreatorAndComboBox,st=w.Constants,b=w.Diagnostics,c=n.ViewModels,ht=c.Forms,k=c.Controls.Balloon.Link,ct=c.Services.ResourceTypes,y=FxImpl.Azure,lt=y.BaseResourceDropDown,d=c.Forms.LabelPosition,g=n.Resources.Strings.Azure,at=FxImpl.Extension.CloudName,nt=g.ResourceGroups,l=nt.DropDown,tt=nt.InfoBalloon,it=l.ProvisioningStateValidation,o=n.Resources.Strings.ResourceGroup.Validation,et;t.AllowedMode=v.AllowedMode;t.Mode=v.Mode;t.NameMaxLength=90;var rt="\\s~!@#$%^&*+=<>,\\?/\\\\\\:;'\"\\[\\]\\{\\}\\|",vt=new RegExp("^[^"+rt+"]*[^."+rt+"]$","i"),p=FxImpl.Rpc.client,yt=g.BaseResourceDropDown,pt=st.ResourceTypes.ResourceGroups,ut=1,a;(function(n){function t(n,t){
return y.getResourceGroupsFromSubscription(p,[n.subscriptionIdObservable()],t).then((function(n){return n.map((function(n){return{createNew:!1,value:n}}))}))}function r(n,t,r,u,f){var e=ft(n);return e.valid?t?FxImpl.Azure.getSubscriptionInfo(p,t,r).then((function(n){return n&&n.uniqueDisplayName||t})).then((function(e){var h=FxImpl.Security.hasPermission("/subscriptions/"+t,["Microsoft.Resources/subscriptions/resourcegroups/write"],r).then((function(n){return n?i():i(o.subscriptionHasNoPermissionsMessage.format(e))}),(function(){return b.Log.writeEntry(ut,"ResourceGroupValidation","Error checking resource group create permissions. Defaulting to true."),i()})),s;return s=u?~u.indexOf(n)?i(o.alreadyExistsMessage.format(e)):i():f?f():i(),Q.all([h,s]).spread((function(n,t){return n.valid?t:n}))})):c.getValidationResultPromise():Q(e)}n.fetchItems=t;n.validateResourceGroupName=r})(a=t.Internal||(t.Internal={}));t.validateResourceGroupName=wt;et=(function(w){function g(g,nt){var rt=this,st,ri,vt,hi,gt,kt,ni,
ui;nt.label||(nt.label=r(l.defaultLabel));var fi=u,ti=r(nt.defaultNewValue),ei=r(new k("","")),ft,lt={filterComboOptions:n.extend({options:e(),defaultValue:r(""),infoBalloonLinkContent:nt.infoBalloonLinkContent||nt.infoBalloonContent?u:ei,infoBalloonContent:nt.infoBalloonContent||nt.infoBalloonLinkContent?u:ko.observable(tt.text)},nt)};n.Settings.getSharedSettings().then((function(n){ei(new k(tt.linkText,n.links.resourceGroupOverview))}));var ii=nt.subscriptionIdObservable,ci={label:r(s.createNew),defaultValue:r(""),validations:e([new f(o.invalidMessage,function(n){return a.validateResourceGroupName(n,ii(),rt._cloudName,lt.filterComboOptions.options().map((function(n){return n.value})))}),new f(o.invalidMessage,function(n){return rt._reservedResourceNameValidator||(rt._reservedResourceNameValidator=new ot.Internal.ReservedResourceNameValidator(pt,u,u,rt._cloudName)),rt._reservedResourceNameValidator.validate(n)}),new c.RequiredValidation]),labelPosition:r(d.Hidden)},et=new ht.TextBox.ViewModel(
g,ci);lt.children=e([et]);nt.options=lt.filterComboOptions.options;nt.validations=nt.validations||e();nt.validations.push(new f("",function(n){return kt.fxAwait(g).timeout(10).catch((function(){return kt()})).then((function(t){return t.createNew||n!==t.value.name||!n?i():(n=ct.buildResourceGroupIdFromSubscriptionAndResourceGroupName(nt.subscriptionIdObservable(),n),y.getIsReadOnly(p,n,rt._cloudName).then((function(n){return i(n&&l.lockedValidationMessage)})))})).catch((function(){return b.Log.writeEntry(ut,"ResourceGroupValidation","Error checking read permissions. Defaulting to false."),i()}))}));st=r(null);st.extend({notify:"always"});nt.validations.push(new f(o.invalidMessage,function(n){return kt.fxAwait(g).timeout(10).catch((function(){return kt()})).then((function(){var r,t,u,f,e,o;return n?(r=st(),t=rt.getObjectByName(n),!t&&!r&&rt._validated)?i(yt.searchingValidationMessage.format(n)):(rt._validated=!0,r)?i():(u=t&&t.value,f=u&&(u.provisioningState||"").toLowerCase(),f&&(e=it[f],e))?i(it.
baseMessage.format(e)):(o=rt._options,rt._hasPermission("/subscriptions/"+o.subscriptionIdObservable()+"/resourcegroups/"+n,o.requiredPermissions,l.requiredPermissionsValidationMessage)):i()}))}));var dt=r(!0),oi=function(n){n&&(dt()?dt(!1):(ft.enabled(!!n),fi!==n&&(fi=n,dt()||rt._loadItems())))},si=r(""),wt=null;ii.subscribe(g,(function(n){oi(n);wt=et.value();var i;rt.toggleNewOrExisting(i=si()?t.Mode.UseExisting:t.Mode.CreateNew);i===t.Mode.CreateNew&&et.value()&&(hi||Q()).then((function(){return et.triggerValidation()}))}));ri=nt.requiredPermissions;ko.isSubscribable(ri)&&ri.subscribe(g,(function(){rt.triggerValidation()}));gt={filterComboBoxCreateCallback:function(t){delete t.options;n.extend(lt.filterComboOptions,t);lt.allowedMode=nt.allowedMode;lt.style=r(6);vt=rt._dropDown=new v.ViewModel(g,lt);var i=vt.control;return i.label(s.selectExisting),i.labelPosition(d.Hidden),rt._optionsGroup=vt.createOrSelectControl,rt.allowedMode=vt.allowedMode,i.items.subscribeAndRun(g,(function(n){return i.
emptyValueText(n.length?"":l.noOptions)})),{control:vt,filterComboBox:ft=i,valid:ko.computed(g,(function(){return rt._optionsGroup.value()?et.valid():!0}))}},allowCreateNew:!0,fetchItems:function(){return hi=rt._lastFetch=a.fetchItems(nt,rt._cloudName).then((function(n){var t=bt(nt.defaultNewValue,n.map((function(n){return n.value.name})));return ti(t),t&&ti.valueHasMutated(),n}))},filterObjectByName:function(t,i){return!n.localeCompareIgnoreCase(t.value.name,i)},itemToHierarchicalFormOption:function(n){var t=n.value?n.value.name:"";return{text:r(t),value:t}},blockLoadingItems:dt,createNewOption:st,nameForInitialValue:si,nullValue:{createNew:!1,value:{name:"",location:"",provisioningState:""}}};w.call(this,g,nt,gt);this._createNewText=ti;kt=ko.pureComputed((function(){return rt.value()})).extend({rateLimit:{timeout:1,method:"notifyWhenChangesStop"}});this._validated=!1;this._options=nt;oi(ii());ni=null;this._createNewText.subscribe(g,(function(n){et.value(wt||n||"")}));h(g,(function(){var i=et.value(
),t=rt._createNewText()||"",n;vt.createOrSelectControl.value()?st({createNew:!0,value:{name:i||wt||t,location:ni,provisioningState:""}}):(n=st.peek(),n&&(n=n.value)&&(ni=n.location,wt=n.createNew&&n.name||wt||t),st(null));ft.value()}));this._itemsObs.subscribe(g,(function(){ft.filterText("");ft.clearValidation()}));this.value.subscribe(g,(function(n){if(n){var i=n.value;rt.toggleNewOrExisting(n.createNew?t.Mode.CreateNew:t.Mode.UseExisting);n.createNew&&(et.value(i.name||""),ni=i.location)}n===st()&&st.valueHasMutated()}));this._optionsGroup.value.subscribe(g,(function(n){if(!n){var t=ft.items.peek().map((function(n){return n.text.peek()})),i;~t.indexOf(ft.value())||~t.indexOf(i=et.value())&&ft.value(i)||ft.value("")&&ft.filterText("")}}));ui=function(n){var r,i,u,f,e;rt._cloudName=at.readFromInputs(n);r=n.internal_bladeCallerParams;i=r&&r.providerConfig;FxImpl.isSerializedObject(i)&&(i=FxImpl.fromSerializableObject(i));u=i&&i.provisioningConfig;f=u&&u.galleryCreateOptions;gt.nameForInitialValue(
)||(e=f&&f.resourceGroupName,e&&(rt.toggleNewOrExisting(t.Mode.UseExisting),gt.nameForInitialValue(e)),g.onInputsSetCallbacks.remove(ui));return};g.onInputsSetCallbacks.add(ui)}return __extends(g,w),g.prototype.toggleNewOrExisting=function(n){this._dropDown.toggleNewOrExisting(n)},g})(lt);t.DropDown=et})(c=t.ResourceGroups||(t.ResourceGroups={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var u=MsPortalFx.Base,t=n.Rpc,f=window,i,r;(function(i){i.getSasUriForQueueEndPoint=new t.FuncEndPointDefinition(n.Constants.RpcMethods.getSasUriForQueue)})(i=n.InternalAzure||(n.InternalAzure={})),(function(n){var r;(function(n){function r(n){return i.getSasUriForQueueEndPoint.invoke(t.client,u.Constants.Shell,n)}n.getSasUriForQueue=r})(r=n.Storage||(n.Storage={}))})(r=n.Azure||(n.Azure={}));f.define("MsPortalFx/Azure/Storage",[],(function(){return r.Storage}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function c(n,i,r){return t.getSubscriptionInfoEndPoint.
invoke(n,f,{subscriptionId:i,cloudName:r})}function l(i,r){return e.getOrSet(r||n.Extension.selfCloudName,Q(t.getAllSubscriptionsEndPoint.invoke(i,f,r)))}function a(n,i){return t.getSelectedSubscriptionsEndPoint.invoke(n,s.Shell,i)}function v(n,i,r,u){return r===void 0&&(r=[]),t.canRegisterSubWithRPsEndPoint.invoke(n,f,{subscriptionId:i,resourceProviders:r,cloudName:u})}function r(n,t,i){var r=(n&&n.subscriptionPolicies&&n.subscriptionPolicies.quotaId||"").toLowerCase();return i?r.startsWith(t):t===r}var o=MsPortalFx.Base,s=o.Constants,h=n.Rpc,u=n.Constants.RpcMethods,i=h.FuncEndPointDefinition,f=n.Extension.getHubsWindowId(),e;t.getSubscriptionInfoEndPoint=new i(u.getSubscriptionInfo);t.getAllSubscriptionsEndPoint=new i(u.getAllSubscriptions);t.getSelectedSubscriptionsEndPoint=new i(u.getSelectedSubscriptions);t.canRegisterSubWithRPsEndPoint=new i("Hubs.canRegisterSubWithRPs");e=n.getCloudMap();t.getSubscriptionInfo=c;t.getAllSubscriptions=l;t.getSelectedSubscriptions=a;t.canRegisterSubWithRPs=
v;t.isFreeTrialSubscription=function(n){return r(n,"freetrial_",!0)};t.isDreamSparkSubscription=function(n){return r(n,"dreamspark_",!0)};t.isBizSparkSubscription=function(n){return r(n,"bizspark_",!0)};t.isZeroCapSubscription=function(n){return r(n,"aad_2015-09-01",!1)}})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function w(n,t,i){return a.Rpc.invokeCallback(h.getWindowId({name:v,cloudName:i},{addSelfCloudNameIfMissing:!0}),y,{galleryItem:t,subscriptions:n})}function k(n){return i.getSubscriptionInfo(u,n,e)}function d(){return i.getSelectedSubscriptions(u,e)}function g(){return i.getAllSubscriptions(s.client,e)}var o=n.Base.Constants,s=FxImpl.Rpc,h=FxImpl.Extension,l=n.ViewModels,a=n.Services,i=FxImpl.Azure,e=o.EmptyCloudName,u=s.client,v=o.ExtensionNames.Marketplace,y="validateSubscriptions",f=ko.observable,p=ko.observableArray,c=n.localeCompareIgnoreCase,r=l.getValidationResultPromise,b;(function(t){function o(n,t){return!c(n.subscriptionId,
t)||!c(n.uniqueDisplayName,t)}function s(n){return{text:f(n.uniqueDisplayName),value:n.subscriptionId}}var a=i.BaseResourceDropDown,v=n.ViewModels,b=n.Hubs.Notifications,y=["enabled","active"],e=n.Resources.Strings.Azure.Subscriptions.DropDown,l;t.filterObjectByName=o;t.itemToHierarchicalFormOption=s;l=(function(n){function t(t,c){var l=this,y,a,w,b;c.label||(c.label=f(e.defaultLabel));y=c.requiredPermissions;ko.isSubscribable(y)&&y.subscribe(t,(function(){l.triggerValidation()}));ko.isSubscribable(c.resourceProviders)&&c.resourceProviders.subscribe(t,(function(){l.triggerValidation()}));c.allowSelectingDisabledSubscriptions||(c.validations||(c.validations=p()),c.validations.push(new v.CustomValidation(e.disabledSubscriptionValidationMessage,function(n){var t=l.getObjectByName(n),f;return t?l._isSubDisabled(t)?r(e.disabledSubscriptionValidationMessage):(f=l._isSubAllowedForGalleryItem(t),f)?r(f.displayText||e.subscriptionNotAllowedForGalleryItemValidationMessage):i.canRegisterSubWithRPs(u,t.
subscriptionId,ko.unwrap(c.resourceProviders),l._cloudName).then((function(n){if(!n.success){var i=t.uniqueDisplayName||t.subscriptionId,u=n.disallowedRPs||[];return u.length?r(e.subDisallowedRP.format(i,u.join(", "))):r(e.subCantRegisterWithRP.format(i,n.failedRPs.join(", ")))}})).then((function(n){return n?n:l._hasPermission("/subscriptions/"+t.subscriptionId,y,e.requiredPermissionsValidationMessage)})).catch((function(){return r()})):r()})));a={blockLoadingItems:f(!0),nameForInitialValue:f(),fetchItems:function(){return l._fetchItems()},filterObjectByName:o,itemToHierarchicalFormOption:s};n.call(this,t,c,a);this._cloudName=this._marketplaceValidation=null;this._options=c;w=t.onInputsSetCallbacks;b=function(n){var i,t,r,u,f;l._cloudName=h.CloudName.readFromInputs(n);i=n.internal_bladeCallerParams;t=i&&i.providerConfig;FxImpl.isSerializedObject(t)&&(t=FxImpl.fromSerializableObject(t));r=t&&t.provisioningConfig;u=r&&r.galleryCreateOptions;a.nameForInitialValue()||(f=u&&u.subscriptionId,f&&a.
nameForInitialValue(f),w.remove(b));a.blockLoadingItems(!1);return};w.add(b);this.subscriptionId=ko.computed(t,(function(){var n=l.value&&l.value();return n&&n.subscriptionId}))}return __extends(t,n),t.prototype._isSubDisabled=function(n){var t=n.status||n.state||"";return y.indexOf(t.toLowerCase())<0},t.prototype._isSubAllowedForGalleryItem=function(n){if(this._marketplaceValidation&&this._marketplaceValidation.invalidSubscriptions.length)return this._marketplaceValidation.invalidSubscriptions.first((function(t){return t.subscriptionId===n.subscriptionId}))},t.prototype._fetchItems=function(){var n=this;return i.getAllSubscriptions(u,this._cloudName).then((function(t){var i=n._options.filterByGalleryItem&&n._options.filterByGalleryItem();return w(t,i,n._cloudName).then((function(i){return n._marketplaceValidation=i,t}),(function(){return t}))}))},t})(a);t.DropDown=l})(b=t.Subscriptions||(t.Subscriptions={}));t.getSubscriptionInfo=k;t.getSelectedSubscriptions=d;t.getAllSubscriptions=g})(t=n.Azure||
(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var e=n.Base,o=n.ViewModels,s=o.Controls,r=e.Constants,u=FxImpl.Extension,f=window.fx.environment,i=ko.observable,h;(function(n){var t=(function(n){function t(t,e){var c=this,o,s,h;n.call(this,t);this.subscriptionsFiltered=i(!1);this.selectedTypes=i([]);this.selectedSubscriptions=i([]);this.selectedResourceGroups=i([]);this.selectedLocations=i([]);this.filterText=i("");this.cloudName=i();this.isCloudNameInitialized=i(!1);e=e||{};this.controlType=114;this.showTextFilter=e.showTextFilter||i(!1);this.showTypeFilter=e.showTypeFilter||i(!1);this.showSubscriptionFilter=e.showSubscriptionFilter||i(!1);this.showResourceGroupFilter=e.showResourceGroupFilter||i(!1);this.showLocationFilter=e.showLocationFilter||i(!1);this.showSubscriptionSummary=e.showSubscriptionSummary||i(!0);this.showTenantLevelSubscriptionSummary=e.showTenantLevelSubscriptionSummary||i(!1);this.selectedSubscriptionId=e.selectedSubscriptionId||
i();this.textFilterPlaceholder=e.textFilterPlaceholder||i();this.assetTypes=e.assetTypes||ko.observableArray([]);this.actionHandler=e.actionHandler;o=this.isCloudNameInitialized;f.extensionName===r.ExtensionNames.Hubs?(s=t.onInputsSetCallbacks,h=function(n){c.cloudName(u.CloudName.readFromInputs(n));o(!0);s.remove(h);return},s.add(h)):(f.extensionName===r.Shell?this.cloudName(r.DefaultCloudName):this.cloudName(u.selfCloudName),o(!0));this.subscriptionsLoaded=i(!1)}return __extends(t,n),t})(s.Base.ViewModel);n.ViewModel=t})(h=t.ResourceFilter||(t.ResourceFilter={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=n,u=r.Base,f=r.ViewModels,e=f.Validation,v=FxImpl.Rpc,o=r.Resources.Strings.Azure.Validators,y=FxImpl.Extension,s=undefined,h=f.FormValidationType.Custom,p=y.getArmEndpointEndPoint,i=f.getValidationResult,c,l,a;(function(n){var t=(function(n){function t(t,f,e,s){n.call(this,h);this.validate=function(n){var h=Q.defer(),c;return Q(
e||p.invoke(v.client,u.Constants.ExtensionNames.Hubs,s)).then((function(e){return u.Net2.postJSON({uri:r.ensureSuffix(e,"/")+"providers/microsoft.resources/checkresourcename?api-version=2015-01-01",setAuthorizationHeader:!0},{name:n,type:t}).then((function(t){t&&(t.status||"").toLowerCase()==="reserved"&&(c=i((f||t.error&&t.error.message||o.ReservedResourceName.message).format(n)))}))})).finally((function(){h.resolve(c||i())})),h.promise}}return __extends(t,n),t})(e);n.ReservedResourceNameValidator=t})(c=t.Internal||(t.Internal={}));l=(function(n){function t(t){n.call(this,h);this.validate=function(n){return t(n).then((function(n){if(!n)return i();var t=Q.defer(),r;return u.Security.hasPermission(n.entityId,n.actions).then((function(t){t||(r=i((n.message||o.RequiredPermission.message).format(n.actions.toString())))})).finally((function(){t.resolve(r||i())})),t.promise}))}}return __extends(t,n),t})(e);t.RequiredPermissionsValidator=l;a=(function(n){function t(t,i){n.call(this,t,i,s,s)}return __extends(
t,n),t})(c.ReservedResourceNameValidator);t.ReservedResourceNameValidator=a})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Windows=0]="Windows";n[n.Linux=1]="Linux"})(n.FirstPartyOperatingSystem||(n.FirstPartyOperatingSystem={}));t=n.FirstPartyOperatingSystem,(function(n){n[n.Default=0]="Default";n[n.TemplateDeployment=1]="TemplateDeployment";n[n.RequestPricingInformation=2]="RequestPricingInformation";n[n.ProgrammaticAccess=3]="ProgrammaticAccess"})(n.LegalTermsLanguageEnum||(n.LegalTermsLanguageEnum={}));i=n.LegalTermsLanguageEnum})(t=n.Legal||(n.Legal={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t){if(!n)throw new Error("Can't move resource without resource id.");return{bladeSelection:e(n,t),displayValue:t===1?r.changeResourceGroupLabel:r.changeSubscriptionLabel,editType:u.EditType.MoveResource}}function e(
t,r){return i.getBladeSelection(n.Base.Constants.ExtensionNames.Hubs,"MoveResourceBlade",{resourceId:t,moveType:r})}var i=n.ViewModels,u=i.Parts.Properties,r=n.Resources.Strings.Part.PropertiesPart,o;t.getMoveResourceBlade=f,(function(n){(function(n){n[n.NotSet=0]="NotSet";n[n.Allowed=1]="Allowed";n[n.NotAllowed=2]="NotAllowed"})(n.GalleryItemAccess||(n.GalleryItemAccess={}));var t=n.GalleryItemAccess})(o=t.Internal||(t.Internal={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t,i,r){var u=Q.defer(),f=u.reject;return n.acquireObject(t,h,i).then((function(n){var t=s(n&&n.getValue());t?t.progress(u.notify).then(u.resolve).catch(f).finally((function(){n.dispose()})):r()})).catch(f),u.promise}function l(n,t){return typeof t.validateTemplate=="undefined"&&(t.validateTemplate=!1),f(n,i.azureResourceManagerDeployTemplate,t,u.deployTemplateFailure)}function a(n,t){return f(
n,i.azureResourceManagerPollForDeployment,t,u.pollForDeploymentFailure)}function v(n,t){return f(n,i.validateArmTemplate,t,u.validateTemplateFailure)}var e=MsPortalFx.Base,o=n.Rpc,i=n.Constants.RpcMethods,s=ko.unwrap,h=e.Constants.ExtensionNames.Hubs,r="",c={deployTemplateFailure:r,pollForDeploymentFailure:r,validateTemplateFailure:r},u=n.getErrorMap(c);t.lastDeployedGalleryItemsMaxCount=10;t.lastUsedLocationsMaxCount=5;t.readUserSettingsEndPoint=new o.FuncEndPointDefinition("HubsExtension.readUserSettings");t.deployTemplate=l;t.pollForDeployment=a;t.validateTemplate=v})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function o(n){return t.deployTemplate(i.client,n).then((function(n){return n.deploymentStatusCode===u.Success?n:Q.reject(n)}))}function s(n){return t.pollForDeployment(i.client,n).then((function(n){return n.deploymentStatusCode===u.Success?n:Q.reject(n)}))}var t=FxImpl.
Azure.ResourceManager,i=FxImpl.Rpc,f,e,r,u,h;(function(n){n[n.InitialSetup=0]="InitialSetup";n[n.SanityCheck=1]="SanityCheck";n[n.FulfillPrerequisites=2]="FulfillPrerequisites";n[n.ProvisionResourceGroup=3]="ProvisionResourceGroup";n[n.RegisterResourceProviders=4]="RegisterResourceProviders";n[n.GetDeploymentName=5]="GetDeploymentName";n[n.ValidateTemplate=6]="ValidateTemplate";n[n.SubmitDeploymentRequest=7]="SubmitDeploymentRequest";n[n.GetDeploymentStatus=8]="GetDeploymentStatus"})(n.DeploymentStages||(n.DeploymentStages={}));f=n.DeploymentStages,(function(n){n.Accepted="accepted";n.Succeeded="succeeded";n.Failed="failed";n.Canceled="canceled";n.Running="running";n.Deploying="deploying";n.Waiting="waiting";n.Deleting="deleting";n.Deleted="deleted"})(e=n.DeploymentStates||(n.DeploymentStates={})),(function(n){n[n.RequestDeploymentOnly=1]="RequestDeploymentOnly";n[n.DeployAndAwaitCompletion=2]="DeployAndAwaitCompletion";n[n.DeployAndGetAllOperations=3]="DeployAndGetAllOperations";n[n.PreflightOnly=
4]="PreflightOnly"})(r||(r={}));n.TemplateDeploymentMode=r,(function(n){n[n.Failure=-1]="Failure";n[n.Success=0]="Success";n[n.DeploymentRequestFailed=1]="DeploymentRequestFailed";n[n.DeploymentFailed=2]="DeploymentFailed";n[n.DeploymentStatusUnknown=3]="DeploymentStatusUnknown";n[n.ErrorProvisioningResourceGroup=4]="ErrorProvisioningResourceGroup";n[n.ErrorSubmittingDeploymentRequest=5]="ErrorSubmittingDeploymentRequest";n[n.ErrorGettingDeploymentStatus=6]="ErrorGettingDeploymentStatus";n[n.InvalidArgs=7]="InvalidArgs";n[n.ErrorRegisteringResourceProviders=8]="ErrorRegisteringResourceProviders";n[n.DeploymentCanceled=9]="DeploymentCanceled";n[n.UnknownError=10]="UnknownError"})(n.DeploymentStatusCode||(n.DeploymentStatusCode={}));u=n.DeploymentStatusCode;n.deployTemplate=o;n.pollForDeployment=s,(function(n){function r(n){return t.deployTemplate(i.client,n)}function u(n){return t.pollForDeployment(i.client,n)}function f(n){return t.validateTemplate(i.client,n)}n.deployTemplate=r;n.pollForDeployment=
u;n.validateTemplate=f})(h=n.Deployments||(n.Deployments={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels,i=(function(){function n(n,i,r,u){var f=this;this.collector=new t.ParameterCollector(n,{supplyInitialData:function(){var n=u.supplyInitialData(),i=r(),t;return i&&(t=i.selectedSpecId,n.selectedSpecId=t,n.selectedSpecIds=[t]),n.originControl=f.controlType,{fromCollectorToProvider:n,fromProviderToCollector:null}},receiveResult:function(n){var t=n.fromProviderToCollector;r(t);typeof u.receiveResult=="function"&&u.receiveResult(t)},selectable:i})}return n})();n.CollectorControl=i})(t=n.Specs||(n.Specs={}))})(t=n.Pickers||(n.Pickers={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;
(function(t){"use strict";var i=FxImpl.Azure.ResourceManager.Pickers.Specs,r=n.ViewModels,u=r.Forms,f=ko.observable,e=ko.observableArray,o=(function(t){function i(i,r){r=n.extend({label:f(n.Resources.Strings.Pickers.Specs.pricingTier),validations:e(),displayText:ko.pureComputed((function(){var n=o.value();return n?n.selectedSpecIds&&n.selectedSpecIds.join(", ")||n.selectedSpecId:""}))},r);var o=new u.Selector.ViewModel(i,r.form,r.pathOrAccessor,r);t.call(this,i,o.selectable,o.value,r);this.controlType=2;this.control=o}return __extends(i,t),i})(i.CollectorControl);t.Selector=o})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls,r=FxImpl.Azure.ResourceManager.Pickers.Specs,u=ko.observable,f=(function(t){function r(r,f){var o=u(),e=new i.InfoBox.ViewModel(r,{
},!1,f);e.selectable=n.ViewModels.Part.createSelectableViewModel();t.call(this,r,e.selectable,o,f);this.controlType=3;this.value=o;this.control=e}return __extends(r,t),r})(r.CollectorControl);t.InfoBox=f})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function it(n){return n.toLowerCase()}function u(n){return typeof n=="function"}function et(){return n.isFeatureEnabled("deploymentmanagerv2")}function ot(n,t){t===void 0&&(t={});var i=new f.Internal.Selectable({allowUnselect:!1,selectedValue:t.selectedValue,isSelected:t.isSelected,isActivated:t.isActivated});return n.registerForDispose(i),i}function wt(n){n||r.optionsUndefined();u(n.supplyTemplateDeploymentOptions)||r.supplyTemplateUndefined();n.createFeatures&&(n.createFeatures&1||n.createFeatures&2)&&!u(n.supplyPricingConfig)&&r.supplyPricingUndefined()}function bt(
n){n===void 0&&(n={});var t=n.galleryCreateOptions||{};return t.launchingContext||{}}var w=n.Base,f=n.ViewModels,st=f.ActionBars.Base,ht=f.ParameterCollectionV3,ct=HubsExtension.Azure.Pricing,b=f.ParameterCollection.Internal.ProvisioningTelemetry,o=w.Diagnostics.Telemetry,l=b.ProvisioningStatus,k=b.ActionModifier,lt=window,at=undefined,d=ko.observable,g=ko.isObservable,h=n.Resources.Strings.Azure.ResourceManager.Provisioner,nt=h.ArmValidation,s=f.getValidationResult,tt=n.newGuid,c=n.extend,e=n.clone,p;t.armValidateFeatureEnabled=n.isFeatureEnabled("validatearmtemplates");t.armValidateFeatureForced=it(n.getFeatureValue("validatearmtemplates")||"")==="force";var vt=["microsoft_azure_datacatalog","microsoft_azure_mobileengagement","newrelic_azureportal_apm",],a=k.Succeeded,v=k.Failed,rt=ct.Constants,ut=rt.PricingSummaryBlade,ft=rt.LegalTermsBlade,y=w.Constants.ExtensionNames.Hubs,yt=1,i="",pt={canNotProvision:i,invalidGalleryOptions:i,launchPricingBladeFailure:i,legalTermsUnsupported:i,missingTemplateOptions:
i,optionsUndefined:i,secondaryLinksUnsupported:i,supplyPricingUndefined:i,supplyTemplateUndefined:i},r=FxImpl.getErrorMap(pt);p=(function(i){function p(t,f,e){var o=this,a=!1,s,h,c,l;arguments.length===2&&(e=f,f=at,a=!0);wt(e);s=e.actionBar;i.call(this,t,{supplyProvisioningPromise:function(n){return o._supplyProvisioningPromise(n)},supplyStartboardInfo:function(n){return o._supplyStartboardInfo(n)},actionBar:s,parameterProvider:e.parameterProvider});this._armOptions=e;this._showPricingSummary=d(!1);this._showAutomationOptions=d(!1);this._legalTermsBladeShown=this._purchaseInProgress=this._isCustomProvisioning=!1;h=f&&f.content||{};this.pricingSelectable=ot(t,h.pricingSelectable);this.errorsSelectable=ot(t,h.errorsSelectable);this.pricingSelectable.isSelected.subscribe(t,(function(n){n||o._purchaseInProgress||o._setActionBarProgress(!1)}));s&&(this._setUpActionBarWatcher(t),this._setUpActionBarValidation(t,e));c=function(){var t=e.createFeatures,i=!!(t&1),u=!!(t&2),f=t&8,h=!!(t&4)||!f&&n.isFeatureEnabled(
"seetemplate");s&&(o._actionBarSupportsSecondaryLinkDisplayText?(o._showPricingSummary(i),o._showAutomationOptions(h)):i&&r.secondaryLinksUnsupported(),o._actionBarSupportsForceInProgressStatus?s.forceInProgressStatus(u):u&&r.legalTermsUnsupported())};this._parameterProvider=e.parameterProvider;e.parameterProvider&&e.parameterProvider.configFromCollector.subscribe(t,c);c();l=t.createChildLifetime.bind(t);u(t.registerSelectable)&&(t.registerSelectable(l(),tt(),this.pricingSelectable),t.registerSelectable(l(),tt(),this.errorsSelectable,{openInContextPane:!0,persistentContextPane:!0}))}return __extends(p,i),Object.defineProperty(p.prototype,"armProvisioningConfig",{get:function(){return this.provisioningConfig()},enumerable:!0,configurable:!0}),p.prototype.startProvisioning=function(n){u(this._armOptions.supplyGalleryCreateOptions)||r.canNotProvision();var t=this._armOptions.supplyGalleryCreateOptions(),f=e(this.provisioningConfig())||{},o=t&&t.galleryItem;return o&&!!o.itemDisplayName?(c(
f,{galleryCreateOptions:t}),this.provisioningConfig(f)):r.invalidGalleryOptions(),i.prototype.startProvisioning.call(this,n)},p.prototype._deployTemplate=function(n){return t.Deployments.deployTemplate(n)},p.prototype._validateTemplate=function(n){return t.Deployments.validateTemplate(n)},p.prototype._supplyProvisioningPromise=function(n){var i=this,u=et()&&this._deploymentOptions;return(u?Q(u):this._armOptions.supplyTemplateDeploymentOptions(n,0)).then((function(f){var o=i.provisionOnStartboard();return o&&!f.resourceId&&r.missingTemplateOptions(),c(f,{deploymentMode:2,launchingContext:i._launchingContext,submitDeployment:!u,skipPreflight:!!u,pollForUpdates:!0}),i._deployTemplate(f).then((function(r){var h=r.deployment||{},c=h.properties||{},s=it(c.provisioningState||""),u;return(!s||s===t.DeploymentStates.Succeeded||(r.deploymentStatusCode=t.DeploymentStatusCode.Failure),r.deploymentStatusCode!==t.DeploymentStatusCode.Success)?(u=e(r,!0),u.subscriptionId=f.subscriptionId,u.resourceGroupName=
f.resourceGroupName,u.deploymentName=f.deploymentName,u):o?i._getStartboardPartInputs(n,f):r}),(function(n){var t=e(n,!0);return t.subscriptionId=f.subscriptionId,t.resourceGroupName=f.resourceGroupName,t.deploymentName=f.deploymentName,Q.reject(t)}))}))},p.prototype._supplyStartboardInfo=function(n){var t=this._armOptions.supplyStartboardInfo;if(u(t))return t(n)},p.prototype._setUpActionBarValidation=function(i,r){var f=this,h=r.actionBar,l=!!(r.createFeatures&16),w=!!(r.createFeatures&32),b=g(h.showActionBar),k=vt.some((function(n){return lt.fx.environment.extensionName===n})),d=!l&&(w||t.armValidateFeatureForced||!k&&t.armValidateFeatureEnabled),tt={validate:function(t){if(!(f.armProvisioningConfig||{}).provisioningEnabled||b&&!h.showActionBar())return Q(s());var d=et(),l=bt(f.armProvisioningConfig),r={telemetryId:l.telemetryId,galleryItemId:l.galleryItemId,createBlade:l.createBlade},w=o.startTrace({source:"ArmProvisioner",action:"ValidateArmTemplate",data:r}),g=function(t){o.endTrace(w,v,
n.extend2(r,{error:FxImpl.Azure.scrubError(t)}));var i=t.error||t;return i.status===0||t.status===0?s(nt.networkFailure):{valid:!1,message:nt.validationFailed,blade:{extension:y,detailBlade:"ArmErrorsBlade",detailBladeInputs:{errors:n.extend2(r,d?t.details||t:i)}}}},k,tt,it=Q().then((function(){return h.infoBoxSelectable.isSelected(!1),f._armOptions.supplyTemplateDeploymentOptions(f._parameterProvider.getResults(),2)})).then((function(n){tt=n.suppressDefaultNotifications;n.suppressDefaultNotifications=!0;n.launchingContext=l;var t=f._validateTemplate(n).then((function(n){return(u(f._armOptions.postValidationCallback)?f._armOptions.postValidationCallback(n.validationResult||n):Q(s())).then((function(t){return d&&(k=e(n)),o.endTrace(w,a,r),t}))})).catch(g);return Q.timeout(t,p.armValidationTimeout).catch((function(n){return c(r,{error:{message:n.message,code:n.code}}),o.endTrace(w,v,r),s()}))})).then((function(n){return!d||!k||t!==0?n:(c(k,{suppressDefaultNotifications:!0,skipPreflight:!0,submitDeployment:
!0,validateTemplate:!1,pollForUpdates:!1}),f._deployTemplate(k).then((function(t){return f._deploymentOptions=e(t),f._deploymentOptions.suppressDefaultNotifications=tt,n})).catch(g))})).catch((function(t){return o.cancelTrace(w,n.extend2(r,{error:t.message})),s()}));return i.operations&&i.operations.add(it,{blockUi:!0,shieldType:yt}),it}};d&&(h.infoBoxSelectable=this.errorsSelectable,h.asyncValidations.push(tt))},p.prototype._setActionBarProgress=function(n){g(this._actionBar.actionInProgress)&&this._actionBar.actionInProgress(n)},p.prototype._getStartboardPartInputs=function(n,i){var f={},r=this.provisioningConfig().startboardProvisioningInfo,e=this._armOptions.supplyStartboardInfo;return u(e)&&(r=e(n)||r),f[r.startboardPartKeyId]=i.resourceId,{deploymentStatusCode:t.DeploymentStatusCode.Success,partInputs:f}},p.prototype._setUpActionBarWatcher=function(t){var i=this,u=this._armOptions.supplyPricingConfig,f=u&&u(),e=f&&f.showPricingSummaryLink,r=this._actionBar;ko.computed(t,(function(){if(
i._actionBarSupportsSecondaryLinkDisplayText){var u=i._showPricingSummary()&&(e?e():!0),n=null,t=!1;u?n=h.pricingSummaryLinkLabel:i._showAutomationOptions()&&(n=h.seeTemplateLink,t=!0);r.secondaryLinkDisplayText(n);i._actionBarSupportsSecondaryLinkValidation&&r.secondaryLinkTriggerValidation(t)}}));ko.reactor(t,(function(){var n=r.output(),e=n&&i._actionBarSupportsForceInProgressStatus&&r.forceInProgressStatus()&&n.status===1&&n.action===4,t=n&&n.commitId;if(e&&i._legalTermsCommitId!==t)return i._legalTermsCommitId=t,i._legalTermsBladeShown=!0,i._setActionBarProgress(!0),i._launchPricingSelectable(ft.bladeExtension,ft.bladeName),null;var u=r.secondaryLinkDisplayText(),f=n&&n.secondaryLinkClicked,o=n&&i._actionBarSupportsSecondaryLinkDisplayText&&!!f&&f===u;o&&i._pricingSummaryCommitId!==t&&(i._pricingSummaryCommitId=t,i._setActionBarProgress(!1),u===h.seeTemplateLink?i._launchTemplateViewerBlade():i._launchPricingSelectable(ut.bladeExtension,ut.bladeName))}));t.onInputsSetCallbacks.add((function(
t){if(i.pricingSelectable.isSelected()&&st.isCompleted(t.pricingOutput)&&t.pricingOutput.actionButtonClicked){if(i._legalTermsBladeShown){i._legalTermsBladeShown=!1;i._purchaseInProgress=!0;var u=t.pricingOutput.pinToStartboard;i._actionBarSupportsShowActionBar&&!r.showActionBar()&&typeof u=="boolean"&&r.provisionOnStartboardPart(u);r.forceInProgressStatus(!1);r.triggerSelectAction(n.getUniqueId())}i.pricingSelectable.isSelected(!1)}return}))},p.prototype._launchTemplateViewerBlade=function(){var u=this,i=this._parameterProvider.getResults(),r,t;i&&(r=this._armOptions.supplyTemplateDeploymentOptions(i,1).then((function(n){var i=u.armProvisioningConfig.galleryCreateOptions,t=i.galleryItem;return f.getBladeSelection(y,"TemplateViewerBlade",{options:{templateLink:n.templateLinkUri,templateJson:n.templateJson,parameters:n.parameters,telemetryId:t&&t.id}})})),t=this.pricingSelectable,t.delayedBladeSelection({bladeWidth:n.Blades.BladeWidth.Large,selectedValuePromise:r}),t.isSelected(!0))},p.prototype.
_launchPricingSelectable=function(n,t){this.pricingSelectable.selectedValue(f.getBladeSelection(n,t,this._getPricingBladeInputs()));this.pricingSelectable.isSelected(!0)},p.prototype._getPricingBladeInputs=function(){var o=this._armOptions.supplyPricingConfig(),t=o&&o.supplyPricingInfo(),n,i,f;return t||r.launchPricingBladeFailure(),n=(this.armProvisioningConfig.galleryCreateOptions||{}).galleryItem,i=this._armOptions.supplyGalleryCreateOptions,!n&&u(i)&&(f=i(),n=f&&f.galleryItem),n=n&&e(n)||{categoryIds:[],products:[],productsWithNoPricing:[]},n.products=n.products.concat(t.products||[]),n.productsWithNoPricing=n.productsWithNoPricing.concat(t.productsWithNoPricing||[]),{galleryPricingInfo:t,galleryItem:n}},p.prototype._traceProvisioningStarted=function(){return i.prototype._traceProvisioningStarted.call(this,this._createEventBase())},p.prototype._traceProvisioningEnded=function(n,r){var e=this._createEventBase(),o=v,f=l.UnknownFailure,u;return r&&(n?(u=n.deploymentStatusCode,u&&u!==t.
DeploymentStatusCode.Success?f=t.DeploymentStatusCode[u]:(o=a,f=u===t.DeploymentStatusCode.Success?t.DeploymentStatusCode[u]:l.Resolved)):(o=a,f=l.Resolved)),e.actionModifier=o,e.data.provisioningStatus=f,i.prototype._traceProvisioningEnded.call(this,n,r,e)},p=__decorate([n.Composition.ProxyCompatibilityMode],p)})(ht.Provisioner);t.Provisioner=p,(function(n){var t,i;n.armValidationTimeout=1e4;n.azureResourceManagerProvisioningPart={name:"AzureResourceManagerProvisioningPart",extension:y},(function(n){n[n.Create=0]="Create";n[n.ExportTemplate=1]="ExportTemplate";n[n.Validate=2]="Validate"})(t||(t={}));n.GetTemplateDeploymentOptionsMode=t,(function(n){n[n.None=0]="None";n[n.ShowPricingSummary=1]="ShowPricingSummary";n[n.ShowLegalTerms=2]="ShowLegalTerms";n[n.ShowAutomationOptions=4]="ShowAutomationOptions";n[n.HideExportTemplate=8]="HideExportTemplate";n[n.DisableArmValidation=16]="DisableArmValidation";n[n.EnableArmValidation=32]="EnableArmValidation"})(i||(i={}));n.CreateFeatures=i})(p=t.Provisioner||
(t.Provisioner={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";function ri(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach((function(n){i.includedResourceTypes[n]=b}))}function yt(t,r){if(!a.isResourceGroupId(t))try{var f=a.buildResourceTypeFromResourceId(t),u=i.includedResourceTypes[f.toLowerCase()];return u?u===r||u===b:n.isFeatureEnabled("autoenablemove")}catch(e){return h("Failed to get resource type from the resource id '"+t+"'."),!1}return!0}function fi(n){var t={resourceGroup:null,resourceGroupId:null,success:!1},i;try{i=a.parseResourceManagerDescriptor(n);t.resourceGroup=i.resourceGroup;t.resourceGroupId=a.buildResourceGroupIdFromResourceDescriptor(i);t.success=!0}catch(r){h("Error getting RG name from resource id '"+n+"'.")}return t}var it=n.Resources.Strings.Part,c=it.ResourceSummary,p=n.ViewModels,k=n.Base.Constants,
rt=k.ExtensionNames,ut=k.BladeNames.Hubs,wt=k.AssetNames,f=p.Parts.Properties,l=f.PropertyType,ft=FxImpl.ViewModels,bt=ft.Parts.Properties,kt=n.Base,a=p.Services.ResourceTypes,dt=n.Assets,et=FxImpl.Extension,gt=et.CloudName,ni=FxImpl,ti=n.Azure,ot=n.Azure.ResourceManager,u=ko.observable,v=ko.reactor,st=ko.computed,ht=window,w=new kt.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.ResourceSummaryPart"),ct=ht.fx&&ht.fx.environment,ei=ct&&ct.isDevelopmentMode,e=5,lt="number",d=new f.TextProperty("",""),at=it.PropertiesPart,ii=n.isFeatureEnabled("resourcemenu"),vt=rt.Hubs,b=3,g=0,nt=1,y="MsPortalFx.Parts.ResourceSummary.ViewModel2",h=w.error.bind(w),tt,r,pt;i.includedResourceTypes={};ri("microsoft.classiccompute/domainnames","microsoft.compute/availabilitysets","microsoft.containerservice/containerservices","microsoft.devices/iothubs","microsoft.network/dnszones","microsoft.network/trafficmanagerprofiles","microsoft.servicefabric/clusters","microsoft.web/serverfarms","microsoft.web/sites",
"microsoft.classicnetwork/networksecuritygroups","microsoft.classicnetwork/reservedips","microsoft.classicnetwork/virtualnetworks","microsoft.certificateregistration/certificateorders","microsoft.compute/disks","microsoft.compute/virtualmachinescalesets","microsoft.db.mysql/servers","microsoft.db.postgresql/servers","microsoft.insights/components","microsoft.insights/eventdetail","microsoft.insights/webtests","microsoft.network/applicationgateways","microsoft.network/connections","microsoft.network/expressroutecircuits","microsoft.network/localnetworkgateways","microsoft.network/networkwatchers","microsoft.network/virtualnetworkgateways","microsoft.recoveryservices/vaults","microsoft.servermanagement/gateways","microsoft.servermanagement/nodes","microsoft.web/serverfarms","microsoft.web/sites");var o="",ui={onlyStatic:o,propertyReused:o,setPropertiesNotAvail:o,noResourceGroupWithLayout:o,statusMissing:o,noSubId:o,maxColumns:o,missingProperties:o,maxProperties:o},s=FxImpl.getErrorMap(ui);
tt=(function(i){function o(n,t,f){var c=this,a,e,o,s,h;i.call(this,n);this._editRg=u();this._currentResourceId=u();this._partContainer=f;this._options=t;this._allowedPropertyTypes=[l.Callback,l.Link,l.OpenBlade,l.OpenBladeAsync,l.Text];this.collapsed=u(undefined);this.tagsVisible=u(!0);this.hasQuickStart=u(!!t.getQuickStartSelection);this.hasKeys=u(!!t.getKeysSelection);this.hasSettings=u(!!t.getSettingsSelection);this.noTags=u(!!t.noTags);this.noRbac=u(!!t.noRbac);a=t.supportsResourceMove;this._editRg(a===nt||a===b);this.title=u("");this.settingsLabel=u("");e=this._createSelectable;o="Selectable";this.resourceGroupSelectable=e(n,"resourceGroup"+o);this.quickStartSelectable=e(n,"quickStart"+o);this.settingsSelectable=e(n,"settings"+o);this.accessSelectable=e(n,"access"+o);this.tagsSelectable=e(n,"tags"+o);this.keysSelectable=e(n,"keys"+o);f?(s=f,this.collapsed.subscribe(s,(function(n){c._updateDataLoading(f,n)}))):s=new ni.TriggerableLifetimeManager;this._ensureRGProperty=function(){return h||
(h=c._createResourceGroupProperty(s),c._markBuiltInProperty(h,r.ResourceGroup)),h};t.noResourceGroup||i.prototype.setProperties.call(this,[this._ensureRGProperty()]);t.hasOwnProperty("staticProperties")||w.warning("MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel is deprecated.  Please use MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel2.")}return __extends(o,i),o.prototype.onInputsSet=function(t){var i=this._options,o=this._cloudName,s,r,u,c,f,e;return(arguments.length<2&&(s="OnInputsSet method of resource summary viewmodel requires the second *settings* argument.",h(s)),t.actionBarOutput)?(this.moveResourceSelection.activatedItems([]),Q()):(this._inputs=t,r=t.resourceId,r!==this._currentResourceId()&&this._startRebind(r),i.noRbac||this.accessSelectable.selectedValue(ft.getBladeSelection(o,"Microsoft_Azure_AD","UserAssignmentsBlade",{scope:r})),i.noTags||this.tagsSelectable.selectedValue(p.getBladeSelection(vt,"ResourceTagsListBlade",gt.addToModel(o,{resourceId:r}))),i.getSettingsSelection&&
this.settingsSelectable.selectedValue(i.getSettingsSelection(t)),i.getQuickStartSelection&&this.quickStartSelectable.selectedValue(i.getQuickStartSelection(t)),i.getKeysSelection&&this.keysSelectable.selectedValue(i.getKeysSelection(t)),u=this.collapsed,c=u.peek(),n.isNullOrUndefined(u())&&u(i.collapsed),f=this._partContainer,e=u.peek(),f&&c===e&&this._updateDataLoading(f,e),Q())},o.prototype.onExpanded=function(){return Q()},o.prototype._addProperty=function(n){var t=2*e;this.properties.peek().length>=t?h("Resource summary cannot have more than "+t+" properties"):this._isValidProperty(n)&&i.prototype._addProperty.call(this,n)},o.prototype.setProperties=function(n){var f=this,u=!this._options.noResourceGroup,r=2*e-(u?1:0),t;n.length>r&&h("Resource summary cannot have more than "+r+" properties");t=[];u&&t.push(this._ensureRGProperty());n.slice(0,r).forEach((function(n){f._isValidProperty(n)&&t.push(n)}));i.prototype.setProperties.call(this,t)},o.prototype._setProperties=function(n){i.prototype.
setProperties.call(this,n)},o.prototype._startRebind=function(n){this._currentResourceId(n)},o.prototype._isValidProperty=function(n){return this._allowedPropertyTypes.indexOf(n.getType())<0?(h("Only Callback, Link, OpenBlade and Text properties are allowed on resource summary."),!1):!0},o.prototype._markBuiltInProperty=function(n,t){n.builtInPropertyKind=t},o.prototype._createSelectable=function(n,i){return new t.Selectable({isSelected:!!(n&&n[i]&&n[i].isSelected)})},o.prototype._updateDataLoading=function(n,t){var i,u,r;this._resetLoadingState(n);i=this._inputs;!t&&i&&(u=this._loadingLM=n.createChildLifetime(),r=this._loadingPromise=this.onExpanded(u,i),r&&n.operations.add(r,{blockUi:!0}))},o.prototype._resetLoadingState=function(n){var i=this._loadingPromise,t;i&&(n.operations.remove(i),this._loadingPromise=null);t=this._loadingLM;t&&(t.dispose(),this._loadingLM=null)},o.prototype._createResourceGroupProperty=function(n){var t=this,r=u(),e=u(),o=u(),i;return v(n,(function(){var n=t._currentResourceId(
),u,i,f;n&&(u=t._editRg(),t._editRg(u?u:yt(n,nt)),i=fi(n),i.success&&(r(i.resourceGroup),e(p.getBladeSelection(vt,ii?ut.ResourceMenuBlade:ut.ResourceGroupMapBlade,{id:i.resourceGroupId})),t._editRg()&&(f=ot.getMoveResourceBlade(n,nt).bladeSelection,o(f))))})),i={label:c.resourceGroupPropertyLabel,displayValue:r,bladeSelection:e},i.editBlade={bladeSelection:o,editType:f.EditType.MoveResource,displayValue:at.changeResourceGroupLabel,showLink:!0},new f.OpenBladeProperty(i)},o})(f.ViewModel);i.ViewModel=tt,(function(n){n[n.ResourceGroup=0]="ResourceGroup";n[n.Status=1]="Status";n[n.Location=2]="Location";n[n.SubscriptionName=3]="SubscriptionName";n[n.SubscriptionId=4]="SubscriptionId"})(i.BuiltInPropertyKind||(i.BuiltInPropertyKind={}));r=i.BuiltInPropertyKind;pt=(function(t){function i(n,i,f){var e=this,h,o,c,l;t.call(this,n,i,f);this._dynamicProperties=u([]);this._editSub=u();this._dependencies={getLocation:function(n){var t=et.getRuntime();return t.getResource(n,"resourcesummarypartviewmodel").
then((function(n){return n.locationString}))},getSubscriptionName:function(n){return ti.getSubscriptionInfo(n).then((function(n){return n.displayName}))},getSubscriptionBlade:function(n){var t={extensionName:rt.Billing,assetType:wt.SubscriptionDetail,assetId:n};return dt.mapAssetIdToDynamicSelection(t,!0)}};h=this._options.supportsResourceMove;this._editSub(h===g||h===b);o=this._createBuiltInProperties(f,i);c=i.staticProperties||[];c.forEach((function(n){if(!n._supportsIsLoading)s.onlyStatic(y)}));l=f;v(l,(function(){var n=e._dynamicProperties(),t=e._layoutProperties(o,c,n,i.layout);e._setProperties(t)}));v(l,(function(){var t=o[r.SubscriptionId],i=o[r.ResourceGroup],u=(!i||i.displayValue())&&(!t||t.value()),n;u&&(n=e._loadingPromise,n?f.operations.update(n,{blockUi:!1}):f.revealContent())}))}return __extends(i,t),i.prototype.setDynamicProperties=function(n){var i=this,r=n||[],u=this._dynamicProperties(),t=[];r.forEach((function(n){!n._supportsIsLoading&&u.indexOf(n)>=0?s.propertyReused(y):i._isValidProperty(
n)&&t.push(n)}));this._dynamicProperties(t)},i.prototype.setProperties=function(){s.setPropertiesNotAvail(y)},i.prototype._setBuiltInProperty=function(n,t,i){this._markBuiltInProperty(i,t);n[t]=i},i.prototype._createBuiltInProperties=function(t,i){var e=this,o,ft,p,l,b,k,d,et,nt;if(i.layout?(i.noResourceGroup&&s.noResourceGroupWithLayout(y),ft=[i.layout.left||[],i.layout.right||[]],o=n.mapMany(ft,(function(n){return n.filter((function(n){return typeof n===lt}))})).unique()):(o=[],i.noResourceGroup||o.push(r.ResourceGroup),i.status&&o.push(r.Status),o.push(r.Location),o.push(r.SubscriptionName),o.push(r.SubscriptionId)),p=function(n){return o.indexOf(n)>=0},l={},p(r.ResourceGroup)&&this._setBuiltInProperty(l,r.ResourceGroup,this._ensureRGProperty()),p(r.Status)&&(i.status||s.statusMissing(y),this._setBuiltInProperty(l,r.Status,new f.TextProperty({label:c.statusPropertyLabel,value:i.status.value,isLoading:i.status.isLoading}))),p(r.Location)&&(b=u(),k=u(),v(t,(function(){var t,n;e.collapsed()||
(t=e._currentResourceId(),t)&&(k(!0),n=d=e._dependencies.getLocation(t),n.then((function(t){n===d&&b(t)})).catch((function(i){n===d&&(w.warning("Failed to get location for resource id '"+t+"'. '"+i+"'"),b(c.notAvailable))})).finally((function(){n===d&&k(!1)})))})),et=st(t,(function(){return i.location&&i.location()||b()})),this._setBuiltInProperty(l,r.Location,new f.TextProperty({label:c.locationPropertyLabel,value:et,isLoading:k}))),nt=st(t,(function(){var n=e._currentResourceId(),t;if(!n)return"";try{t=a.parseResourceManagerDescriptor(n).subscription}catch(i){h("Failed to get subscription name from the resource id '"+n+"'.")}return t})),p(r.SubscriptionId)&&this._setBuiltInProperty(l,r.SubscriptionId,new f.TextProperty(c.subscriptionIdPropertyLabel,nt)),p(r.SubscriptionName)){var it=u(),rt=u(),tt,ht=u(),ct=this._currentResourceId(),ut=void 0;v(t,(function(){var n,t,r,u,i;e.collapsed()||(n=e._currentResourceId(),n&&n!==ct)&&(ct=n,t=nt(),t)&&(r=e._editSub(),e._editSub(r?r:yt(n,g)),e._editSub()&&(u=
ot.getMoveResourceBlade(n,g).bladeSelection,ht(u)),rt(!0),i=tt=e._dependencies.getSubscriptionName(t).then((function(n){i===tt&&it(n)})).catch((function(){i===tt&&(h("Failed to get the subscription name for the subscription id '"+t+"'."),it(c.notAvailable))})).finally((function(){i===tt&&rt(!1)})))}));ut={label:c.subscriptionNamePropertyLabel,displayValue:it,resolveBlade:function(){var n=nt(),t;return n||(t=e._currentResourceId(),s.noSubId(t)),e._dependencies.getSubscriptionBlade(n)},isLoading:rt};ut.editBlade={bladeSelection:ht,editType:f.EditType.MoveResource,displayValue:at.changeSubscriptionLabel,showLink:!0};this._setBuiltInProperty(l,r.SubscriptionName,new bt.OpenBladeAsyncProperty(ut))}return l},i.prototype._layoutProperties=function(n,t,i,u){var f=[],o=0,l,a,c,h,p;if(u){l=u.left||[];a=u.right||[];(l.length>e||a.length+i.length>e)&&s.maxColumns(e);for(var v=0,y=0,w=function(r){var u,h=r?l:a,e;(r?v:y)<h.length?(e=h[r?v++:y++],typeof e===lt?u=n[e]:(u=e,t.indexOf(u)<0&&s.missingProperties(
))):u=!r&&o<i.length?i[o++]:d;f.push(u)},b=0;b++<e&&(v<l.length||y<a.length||o<i.length);)w(!0),w(!1)}else for(t.length+i.length>e&&s.maxProperties(e),c=0,h=function(){var n;n=c<t.length?t[c++]:o<i.length?i[o++]:d;f.push(n)},this._options.noResourceGroup||(f.push(n[r.ResourceGroup]),h()),p=n[r.Status],p&&(f.push(p),h()),f.push(n[r.Location]),h(),f.push(n[r.SubscriptionName]),h(),f.push(n[r.SubscriptionId]),h();c+o<e&&(c<t.length||o<i.length);)f.push(d),h();return f},i.prototype._startRebind=function(n){t.prototype._startRebind.call(this,n);this._dynamicProperties([])},i})(tt);i.ViewModel2=pt})(r=i.ResourceSummary||(i.ResourceSummary={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t){var i=n._dependencies;t.getLocation&&(i.getLocation=t.getLocation);t.getSubscriptionName&&(i.getSubscriptionName=t.getSubscriptionName);t.getSubscriptionBlade&&(i.
getSubscriptionBlade=t.getSubscriptionBlade)}n.setDependencies=t})(t=n.ResourceSummary||(n.ResourceSummary={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var h=n.Services,u=ko.observable,f=ko.observableArray,e=n.disposeDisposable,i=!1,r=null,c=(function(){function t(){var n=this;this.initialized=u(i);this.results=f();this.canceled=u(i);this._dataSub=r;this._canceledSub=this.canceled.subscribe((function(t){t&&(n.results([]),n._releaseDataSub())}))}return t.prototype.dispose=function(){e(this._canceledSub);this._canceledSub=r;this._releaseDataSub()},t.prototype.onInputsSet=function(){return this._releaseDataSub(),this.initialized(i),this.canceled(i),this.results([]),r},t.prototype.connectDataSource=function(t,i){t.map((function(t){Object.isExtensible(t)&&n.extend(t,{browse_cloudName:FxImpl.Extension.selfCloudName})}));this._dataSub=h.DataSetAssetExpansionMapper.connectDataSet(
t,this.results,i);this.initialized(!0)},t.prototype._releaseDataSub=function(){e(this._dataSub);this._dataSub=r},t})(),o,s;t.Service=c;o=(function(){function n(){}return n.serialize=function(n,t,u){t===void 0&&(t=i);u===void 0&&(u=r);var f={browseCriteria:n,newBrowse:t,useBrowseKey:u};return JSON.stringify(f)},n.deserialize=function(n){var t=JSON.parse(n);return{browseCriteria:t.browseCriteria,newBrowse:t.newBrowse,useBrowseKey:t.useBrowseKey}},n})();t.BrowseSerializer=o;s=(function(){function n(n,t){this.initialized=u(i);this.results=f();this.browseCriteria=n;this.results(t)}return n})();t.ResultsViewModel=s})(i=t.Browse||(t.Browse={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function e(n,t,r,f){var o=function(){return i.getAssetSelection(r,f,{id:t})},s=function(){var u=n.bladeName();return u?i.getBladeSelection(n.extensionName()||r,u,{id:t}):o()},e;
return n&&(e=void 0,typeof n.onInputsSet=="function"&&(e=n.onInputsSet({assetId:t,usage:u.DynamicAssetSelection})),e)?e.then((function(){return s()})):Q(o())}var i=n.ViewModels,r=ko.observable,u,f;(function(n){n[n.DynamicAssetSelection=0]="DynamicAssetSelection"})(t.Usage||(t.Usage={}));u=t.Usage;f=(function(){function n(){this.extensionName=r(null);this.bladeName=r(null)}return n})();t.Service=f;t.prepareDynamicSelection=e})(i=t.DynamicBlade||(t.DynamicBlade={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.Services.AssetExpansion,u=n.Resources.Strings.Services.AssetHandler,i=ko.observable,e=(function(){function n(){}return Object.defineProperty(n,"base",{get:function(){return[{id:"title",name:i(u.titleGridColumn),itemKey:r.titlePropertyName},{id:"assetType",name:i(u.assetTypeGridColumn),itemKey:r.assetTypeStringPropertyName}]},enumerable:!0,configurable:
!0}),n})(),o,f;t.BaseColumns=e,(function(n){n[n.Default=0]="Default"})(t.Usage||(t.Usage={}));o=t.Usage;f=(function(){function n(){this.includeAssetIcon=i(!0);this.columns=i([])}return n})();t.Service=f})(i=t.GridColumns||(t.GridColumns={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=(function(){function n(){this.properties=t()}return n.prototype.setProperty=function(n,t){var i=this.properties,r=i().some((function(i){return i.property===n?(i.value=t,!0):!1}));r||i.push({property:n,value:t})},n})();n.Service=i})(t=n.PropertyProvider||(n.PropertyProvider={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i,r;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]=
"Warning";n[n.Error=3]="Error";n[n.Information=4]="Information";n[n.Stopped=5]="Stopped";n[n.Canceled=6]="Canceled";n[n.Critical=7]="Critical";n[n.Disabled=8]="Disabled";n[n.Failed=9]="Failed";n[n.Pending=10]="Pending";n[n.Unknown=11]="Unknown"})(t||(t={}));n.ResourceStatus=t})(t=n.CsmTopology||(n.CsmTopology={}))})(t=n.Visualization||(n.Visualization={}))})(i=t.Controls||(t.Controls={})),(function(t){var i;(function(t){function i(n){return n.toLowerCase()}function ut(n){var i,r;return t.isSubscriptionId(n)||u.invalidSub(n),i=t.regExpSubscriptionId.exec(n),i&&i.length===2||u.invalidSub(n),r=new s,r.subscription=i[1],r}function l(n){var i,r;return t.isResourceGroupId(n)||u.invalidRG(n),i=t.regExpResourceGroupId.exec(n),i&&i.length===3||u.invalidRG(n),r=new h,r.subscription=i[1],r.resourceGroup=i[2],r}function r(n){return ht(n,!0)}function ft(n){return ht(n)}function pt(n){var i=t.regExpDeploymentResourceId.exec(n),r;return i&&i.length===4||(i=t.regExpDeploymentId.exec(n)),i&&i.length===4||
u.invalidDeployment(n),r=new y,r.subscription=i[1],r.resourceGroup=i[2],r.deploymentName=i[3],r}function wt(n){var i=t.regExpTagId.exec(n),r;return i&&i.length===4||u.invalidTag(n),r=new p,r.subscription=i[1],r.tagName=i[2],r.tagValue=i[3]||e,r}function bt(n,t,i){return a(n,t)+"/deployments/"+i}function kt(n){return c(n.subscription)}function w(n){return c(n.subscription)}function b(n){var t=n.subscription;return t?c(t):""}function dt(n){return w(l(n))}function gt(n){return b(r(n))}function c(n){return"/subscriptions/"+n}function ni(n){return a(n.subscription,n.resourceGroup)}function k(n){return a(n.subscription,n.resourceGroup)}function ti(n){return k(r(n))}function a(n,t){return"/subscriptions/"+n+"/resourcegroups/"+t}function ii(n){return d(r(n))}function ri(n){return d(ft(n))}function d(n){var t=n.provider;return tt(t,tt.apply(void 0,n.types))}function et(n){for(var i="/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,u=n.resources,
t=0;t<r.length;t++)i+="/"+r[t]+"/"+u[t];return i}function ui(n){return"/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider+"/"+n.types[0]+"/"+n.resources[0]}function fi(n){var t;n.types.length<2&&u.notForNestedResource();var i="/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,f=n.resources;for(t=0;t<r.length-1;t++)i+="/"+r[t]+"/"+f[t];return i}function ei(t,r){var u=i(t)+"/";return n.startsWith(i(r),u)}function oi(n){return g(t.relatedTagPrefix,r(n))}function si(n){return g(t.linkTagPrefix,r(n))}function g(n,t){return n+":"+et(t)}function hi(n){return ut(n),i(n)}function nt(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isSubscriptionId(n)&&t.isSubscriptionId(r)?i(n)===i(r):!1}function ci(n){return l(n),i(n)}function ot(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceGroupId(n)&&t.isResourceGroupId(r)?i(n)===i(r):!1}function li(n){return r(n),i(n)}function ai(n,r){return n===r?!0:!n&&!r?!0:!n||
!r?!1:t.isResourceId(n)&&t.isResourceId(r)?i(n)===i(r):!1}function vi(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceManagerId(n)&&t.isResourceManagerId(r)?i(n)===i(r):!1}function yi(n){return t.isResourceManagerId(n)?n:null}function pi(n,t){return!n||!t?!1:nt(n,w(l(t)))}function wi(n,t){return!n||!t?!1:nt(n,b(r(t)))}function bi(n,t){return!n||!t?!1:ot(n,k(r(t)))}function ht(n,i){var o=i?it+n:"Invalid resource manager id: "+n,c=i?t.isResourceId:t.isResourceManagerId,h,f;if(!c(n))throw new Error(o);var r=new v,u=at.exec(n),s=u&&u.length;if(r.subscription=s>1&&u[1]||e,r.resourceGroup=s>2&&u[2]||e,n="/providers/Microsoft.Resources"+n,u=ct.exec(n),!u)throw new Error(o);for(r.provider=u[1],h=u[2],f=r.provider,r.type=e,r.types=[],r.resource=e,r.resources=[],r.resourceMap={};u=lt.exec(h);){if(!u)throw new Error(it+n);r.types.push(u[1]);r.type=u[1];r.resources.push(u[2]);r.resource=u[2];f+="/"+r.type;r.resourceMap[f]=r.resource}return r}var ct=/(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((:?\/[^\/]+\/[^\/]+)*)$/i,
lt=/\/([^\/]+)\/([^\/]+)/ig,at=/\/subscriptions\/([^\/\s]+)(?:\/resourcegroups\/([^\/\s]+))?/i,yt,rt,s,h,v,y,p,st;t.relatedTagPrefix="hidden-related";t.linkTagPrefix="hidden-link";var e=undefined,f=ko.observable,tt=n.getJoinFunc("/"),o="",vt={invalidDeployment:o,invalidRG:o,invalidSub:o,invalidTag:o,notForNestedResource:o},it="Invalid {0} id: {1}".format("resource",""),u=FxImpl.getErrorMap(vt);(function(n){n[n.Failure=0]="Failure";n[n.DataNotAvailable=1]="DataNotAvailable";n[n.AccessDenied=2]="AccessDenied"})(t.MappingRejectionReason||(t.MappingRejectionReason={}));yt=t.MappingRejectionReason;rt=(function(){function n(){this.name=f();this.description=f();this.descriptionUri=f();this.status=f();this.statusMessage=f()}return n})();t.Service=rt;s=(function(){function n(){}return n})();t.SubscriptionDescriptor=s;h=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(s);t.ResourceGroupDescriptor=h;v=(function(n){function t(){n.apply(this,arguments);this.types=[];this.resources=
[];this.resourceMap={}}return __extends(t,n),t})(h);t.ResourceDescriptor=v;y=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(h);t.DeploymentDescriptor=y;p=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(s);t.TagDescriptor=p;t.parseSubscriptionDescriptor=ut;t.parseResourceGroupDescriptor=l;t.parseResourceDescriptor=r;t.parseResourceManagerDescriptor=ft;t.parseDeploymentDescriptor=pt;t.parseTagDescriptor=wt;t.buildDeploymentId=bt;t.buildSubscriptionIdFromDescriptor=kt;t.buildSubscriptionIdFromResourceGroupDescriptor=w;t.buildSubscriptionIdFromResourceDescriptor=b;t.buildSubscriptionIdFromResourceGroupId=dt;t.buildSubscriptionIdFromResourceId=gt;t.buildSubscriptionIdFromSubscriptionName=c;t.buildResourceGroupIdFromDescriptor=ni;t.buildResourceGroupIdFromResourceDescriptor=k;t.buildResourceGroupIdFromResourceId=ti;t.buildResourceGroupIdFromSubscriptionAndResourceGroupName=a;t.buildSubscriptionFromId=c;t.buildResourceTypeFromResourceId=ii;t.
buildResourceTypeFromResourceManagerId=ri;t.buildResourceTypeFromResourceDescriptor=d;t.buildResourceIdFromDescriptor=et;t.buildTopmostParentResourceIdFromDescriptor=ui;t.buildParentResourceIdFromDescriptor=fi;t.isParentResource=ei;t.buildRelatedTagName=oi;t.buildLinkTagName=si;t.buildTagName=g;t.buildLowerCaseSubscriptionId=hi;t.compareSubscriptionId=nt;t.buildLowerCaseResourceGroupId=ci;t.compareResourceGroupId=ot;t.buildLowerCaseResourceId=li;t.compareResourceId=ai;t.compareResourceManagerId=vi;t.tryBuildResourceManagerKey=yi;t.subscriptionContainsResourceGroup=pi;t.subscriptionContainsResource=wi;t.resourceGroupContainsResource=bi;st=(function(){function n(){this.refreshPacket=f(null)}return n.prototype.signalResourceGroupRefresh=function(n){this.refreshPacket({resourceGroupId:n})},n.prototype.signalResourceRefresh=function(n){this.refreshPacket({resourceId:n})},n.prototype.signalAssetRefresh=function(n,t,i){this.refreshPacket({assetOwner:n,assetType:t,assetId:i})},n})();t.ResourcePartExtender=
st})(i=t.ResourceTypes||(t.ResourceTypes={}))})(r=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=(function(){function n(){this.actions=t()}return n})();n.Service=i})(t=n.Security||(n.Security={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function e(n,i,r,u){t.notifyAssetDeletedBulk([{assetId:i,assetType:n,extensionName:r,cloudName:u}])}function o(n,i){var r=(Array.isArray(n)?n:[n]).map((function(n){return{assetId:n,assetType:t.resourceAssetType,extensionName:undefined,cloudName:i}}));t.notifyAssetDeletedBulk(r)}var i=n.Rpc.ActionEndPointDefinition,r=n.Rpc.client,f=MsPortalFx.Base.Constants.ExtensionNames.Hubs,u;t.resourceAssetType="*Impl_Resource*";u=function(n){t.notifyAssetDeletedDefinition.invoke(r,"fx",n);t.createResourceDeletedEventInHubsDefinition.
invoke(r,f,n)};t.notifyAssetDeletedBulk=u;t.notifyAssetDeleted=e;t.notifyResourceDeleted=o;t.notifyAssetDeletedDefinition=new i("MsPortalFx.UI.AssetManager.NotifyAssetDeleted");t.createResourceDeletedEventInHubsDefinition=new i("MsPortalFx.UI.AssetManager.CreateResourceDeletedEvent");t.hubsNotifyAssetDeletedDefinition=new i("MsPortalFx.UI.AssetManager.Hubs.NotifyAssetDeleted")})(t=n.AssetManager||(n.AssetManager={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i,r){t.notifyAssetDeleted(n,i,r)}function r(n){t.notifyAssetDeletedBulk(n)}function u(n){t.notifyResourceDeleted(n)}var t=FxImpl.AssetManager;n.notifyAssetDeleted=i;n.notifyAssetDeletedBulk=r;n.notifyResourceDeleted=u})(t=n.AssetManager||(n.AssetManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t=new n.Rpc.ActionEndPointDefinition("OpenFeedbackPane");n.feedbackEndPoint=t})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";
var u=n.Rpc,r="MsPortalFx.UI.NotificationManager",i=u.ActionEndPointDefinition;t.addNotificationsEndPoint=new i(r+".AddNotifications");t.addNotification2EndPoint=new i(r+".AddNotifications2");t.updateNotificationEndPoint=new i(r+".UpdateNotification");t.addServerEventsEndPoint=new i("addServerEvents")})(t=n.NotificationManager||(n.NotificationManager={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t,r){i.updateNotificationEndPoint.invoke(i.rpcClient,"fx",{id:n,propertyName:t,propertyValue:r})}function s(n){return new r(n)}function c(n){e([n])}function e(n){n&&n.length>0&&i.addNotificationsEndPoint.invoke(i.rpcClient,"fx",{notifications:n})}var o=FxImpl.Rpc,i=FxImpl.NotificationManager,r,h,f;i.rpcClient=o.client;r=(function(){function t(t){this._id=n.getUniqueId();this._name=t}return t.prototype.raise=function(n,t,r){i.addNotification2EndPoint.invoke(i.rpcClient,"fx",{id:this._id,name:this._name,status:n.status,subStatus:n.subStatus,
assetId:t,properties:r})},t.prototype.updateCorrelationId=function(n){u(this._id,"correlationId",n)},t.prototype.reportProgress=function(n){u(this._id,"percentComplete",n)},t})();t.Notification2=r;t.create=s,(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(t.NotificationState||(t.NotificationState={}));h=t.NotificationState;f=(function(){function n(n,t,i,r,u,f,e,o){if(i===undefined)throw new Error("Invalid state arg.");if(f&&!u)throw new Error("Sub id must be specified when operation id is specified.");this.source=n;this.eventType=t;this.state=i;this.timestamp=new Date;this.descriptionArgs=r;this.subscriptionId=u;this.operationId=f;this.percentOperationComplete=e;this.assetId=o}return n})();t.Notification=f;t.addNotification=c;t.addNotifications=e})(i=t.NotificationManager||(t.NotificationManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";
var r=n.ViewModels,u=n.Base,i=ko.observable,f=(function(){function n(){this.title=i();this.subtitle=i();this.description=i();this.helpUri=i();this.icon=i(u.Images.Shell.DefaultBlade());this.titleImageUri=i();this.statusBar=null;this.contentState=i(r.ContentState.None);this.contentStateDisplayText=i()}return n})();t.Blade=f})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function e(n){return n.startsWith("internal_bladeCall")}var t=undefined,f=1,i=ko.observable,r,u;n.isBladeCallerInput=e;r=(function(){function n(n,r){var u=this;if(this._activatedItemForCurrentBladeCall=t,this._hasInitialized=!1,this.internal_bladeCallId=i(),this.internal_bladeCallerParams=i(),this._options=r,this._invokeOnSelectable=r.invokeOnSelectable,this._invokeOnSelectableSet=r.invokeOnSelectableSet,!!this._invokeOnSelectable==!!this._invokeOnSelectableSet)throw new Error("Specify 'invokeOnSelectable' or 'invokeOnSelectableSet', but not both.");
n.onInputsSetCallbacks.add((function(t){if(u._hasInitialized||(u._hasInitialized=!0,u._initialize(n,r.forceInvocation)),t){var i=t.internal_bladeCallerResult;i&&i.bladeCallId===u.internal_bladeCallId()&&(u.internal_bladeCallId(undefined),u._options.receiveResult(i.result,u._activatedItemForCurrentBladeCall),u._clearActivation())}return null}),!0)}return n.prototype._initialize=function(n,t){var i=this;this._isCurrentlyActivated()&&this._beginNewBladeCall(!!t);this._subscribeToActivationStateChange(n,(function(n){n&&i._beginNewBladeCall(!0)}))},n.prototype._beginNewBladeCall=function(n){if(this._activatedItemForCurrentBladeCall=this._getCurrentlyActivatedValue(),n){var t=this._options.supplyParams(this._activatedItemForCurrentBladeCall);this.internal_bladeCallerParams(t)}this.internal_bladeCallId(f++)},n.prototype._isCurrentlyActivated=function(){if(this._invokeOnSelectable)return this._invokeOnSelectable.isSelected();if(this._invokeOnSelectableSet){var n=this._invokeOnSelectableSet.activatedItems(
).length;if(n>1)throw new Error("Multiselection is not supported with parameter collectors.");return n>0}},n.prototype._getCurrentlyActivatedValue=function(){if(this._invokeOnSelectable)return this._invokeOnSelectable.value();if(this._invokeOnSelectableSet){var n=this._invokeOnSelectableSet.activatedItems();return n?n[0]:null}return null},n.prototype._subscribeToActivationStateChange=function(n,t){var i=this;this._invokeOnSelectable?this._invokeOnSelectable.isSelected.subscribe(n,t):this._invokeOnSelectableSet&&this._invokeOnSelectableSet.activatedItems.subscribe(n,(function(){t(i._isCurrentlyActivated())}))},n.prototype._clearActivation=function(){this._invokeOnSelectable?this._invokeOnSelectable.isSelected(!1):this._invokeOnSelectableSet&&this._invokeOnSelectableSet.activatedItems([])},n})();n.BladeCaller=r;u=(function(){function n(n,r){var u=this;this.internal_bladeCallerResult=i();this._options=r;n.onInputsSetCallbacks.add((function(n){if(n.internal_bladeCallId!==t&&(u._bladeCallId=n.internal_bladeCallId),
n.internal_bladeCallerParams!==t){var i=u._makeStringHashFromParams(n.internal_bladeCallerParams);i!==u._lastReceivedParamsStringHash&&(u._lastReceivedParamsStringHash=i,u._options.receiveParams(n.internal_bladeCallerParams))}return null}))}return n.prototype.sendResult=function(n){this.internal_bladeCallerResult({bladeCallId:this._bladeCallId,result:n})},n.prototype._makeStringHashFromParams=function(n){return ko.toJSON(n)},n})();n.BladeCallable=u})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.ViewModels,u=i.Controls.Internal.IFrameV2,f=n.Base,e=(function(){function n(n,t){this.signature="FxAppBlade";this.kind=n;this.data=t}return n})(),r;t.Message=e;r=(function(n){function t(t,i){var r=this,f;n.call(this);this._handlers={};this._queue=[];f=this.iFrame=new u.ViewModel(t,{src:i.source});f.controlIsReady.subscribe(t,(function(n){n&&r._queue.forEach((function(n){r.iFrame.postMessage(
n)}))}));f.receiveMessage.subscribe(t,(function(n){var t=r._handlers[n.kind];t&&t.fire(n.data)}))}return __extends(t,n),t.prototype.postMessage=function(n){var t=this.iFrame;t.controlIsReady()?t.postMessage(n):this._queue.push(n)},t.prototype.on=function(n,t){var r=this._handlers,i=r[n];i||(i=r[n]=new f.Callbacks);i.add(t)},t.prototype.off=function(n,t){var i=this._handlers[n];i&&i.remove(t)},t})(i.Blade);t.ViewModel=r})(i=t.AppBlade||(t.AppBlade={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var e=n.UI,o=e.NotificationManager,r=n.ViewModels,c=r.Controls,i=ko.observable,l=n.Resources.Strings,u=n.Helpers,f=" has not been implemented.",a=(function(n){function t(){n.apply(this,arguments);this.data=i()}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.data;return this.data(t),this.title(this._onGetTitle(t)),u.resolve()},t.prototype._onGetTitle=function(n){return l.DeleteAssetConfirmation.bladeTitle.
format(n.assetName)},t})(r.Blade),s,h;t.BladeViewModel=a;s=(function(t){function r(r,u){var f=this;t.call(this,r);this.data=i();this.result=i(0);this._container=null;this._assetType=null;this._data=null;this._selectedItems=null;this._previousUserActionId="";this._container=r;this._assetType=u;ko.computed(r,(function(){var n=f.data(),t=f._onValidateCommand(n);f.enabled(t)}));this.result.subscribe(r,(function(n){f._onDeletionResultChange(n)}));this.enabled(!1);this.icon(n.Base.Images.Delete())}return __extends(r,t),r.prototype.onInputsSet=function(n){var i=n.data,r=n.selectedItems,t=n.actionBarOutput;return this.data(i),t&&((t.action===4||t.action===5)&&this._container.selectable.isSelected(!1),t.action===4&&t.userActionId&&this._previousUserActionId!==t.userActionId&&(this._previousUserActionId=t.userActionId,this._data=i,this._selectedItems=r,this._onDelete(i,r))),u.resolve()},r.prototype._onDelete=function(){throw new Error("_onDelete()"+f);},r.prototype._onSendErrorNotification=function(){
throw new Error("_onSendErrorNotification()"+f);},r.prototype._onValidateCommand=function(t){return!n.isNullOrUndefined(t)},r.prototype._onDeletionResultChange=function(n){switch(n){case 1:e.AssetManager.notifyAssetDeleted(this._assetType,this._data.assetId);break;case 2:this._sendErrorNotification(this._data,this._selectedItems)}},r.prototype._sendErrorNotification=function(n,t){var i=this._onSendErrorNotification(n,t);i.state=o.NotificationState.Error;o.addNotification(i)},r})(r.OpenBladeCommand);t.CommandViewModel=s;h=(function(t){function r(n,r){var u=this;t.call(this,n,r);this.data=i();this._data=null;n.registerForDispose(this.data.subscribe((function(n){!u._isSameAsset(n)&&u._options.grid&&(u._onPopulateGrid(n),u._selectAll());u._data=n})))}return __extends(r,t),r.prototype.onInputsSet=function(t){var i=t.data;return this._assetName(i.assetName),n.isNullOrWhiteSpace(i.assetTypeDisplayName)||this._assetTypeDisplayName(i.assetTypeDisplayName),this.data(i),u.resolve()},r.prototype._onPopulateGrid=
function(){throw new Error("_onPopulateGrid()"+f);},r.prototype._isSameAsset=function(t){return n.deepEquals(this._data,t)},r})(c.DeleteAssetConfirmation.ViewModel);t.PartViewModel=h})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n,e=i.UI.NotificationManager,o=i.ViewModels,r=o.Dialogs,s=ko.observable,u=" has not been implemented.",v=100,h=i.Resources.Strings.DeleteCommand,c=h.Confirmation,l=h.Failure,f,a;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Failure=2]="Failure"})(f||(f={}));t.CommandResult=f;a=(function(n){function t(t,r){var u=this;n.call(this);this._assetType=null;this._confirmationDialog=null;this._errorDialog=null;this._data=null;this._assetType=r;this.data=s();this.result=s(0);ko.computed(t,(function(){var n=u.data(),t=u._onValidateCommand(n);u.enabled(t)}));this.result.subscribe(t,(function(n){u._onDeletionResultChange(n)}));this.icon(
i.Base.Images.Delete())}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.data(n.data),i.Helpers.resolve()},t.prototype.execute=function(){this._data=this.data();this._createConfirmationDialog(this._data);this.dialog(this._confirmationDialog)},t.prototype.dialogClick=function(n){this._shouldDelete(n)?(this.result(0),this._onDelete(this._data)):this._resetCommand()},t.prototype._onDelete=function(){throw new Error("onDelete()"+u);},t.prototype._onGetAssetId=function(){throw new Error("onGetAssetId()"+u);},t.prototype._onSendErrorNotification=function(){throw new Error("onSendErrorNotification()"+u);},t.prototype._onShowConfirmation=function(){return{title:c.title,message:c.message}},t.prototype._onShowError=function(){return{title:l.title,message:l.message}},t.prototype._onValidateCommand=function(n){return!i.isNullOrUndefined(n)},t.prototype._shouldDelete=function(n){var t=this.dialog(),i=t===this._confirmationDialog&&n===6,r=t===this._errorDialog&&n===5;return i||r}
,t.prototype._onDeletionResultChange=function(n){var t=this,r=this._data;switch(n){case 1:i.UI.AssetManager.notifyAssetDeleted(this._assetType,this._onGetAssetId(r));this._resetCommand();break;case 2:this._sendErrorNotification(r);setTimeout((function(){t._createErrorDialog(r);t.dialog(t._errorDialog)}),v)}},t.prototype._createConfirmationDialog=function(n){var t=this._onShowConfirmation(n);this._confirmationDialog=new r.MessageBox(t.title,t.message,r.MessageBoxButtons.YesNo)},t.prototype._createErrorDialog=function(n){var t=this._onShowError(n);this._errorDialog=new r.MessageBox(t.title,t.message,r.MessageBoxButtons.RetryCancel)},t.prototype._sendErrorNotification=function(n){var t=this._onSendErrorNotification(n);t&&(t.state=e.NotificationState.Error,e.addNotification(t))},t.prototype._resetCommand=function(){this.status(0)},t})(o.Command);t.DeleteAssetCommand=a})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";
var t=ko.observable,e=ko.observableArray,o,i,r,u,f;(function(n){n[n.AbortRetryIgnore=0]="AbortRetryIgnore";n[n.OK=1]="OK";n[n.OKCancel=2]="OKCancel";n[n.RetryCancel=3]="RetryCancel";n[n.YesNo=4]="YesNo";n[n.YesNoCancel=5]="YesNoCancel"})(n.MessageBoxButtons||(n.MessageBoxButtons={}));o=n.MessageBoxButtons;i=(function(n){function t(t,i,r){n.call(this,t);this.type=1;this.text=i;this.buttons=r}return __extends(t,n),t})(n.Dialog);n.MessageBox=i;r=(function(n){function i(i,r,u){n.call(this,i);this.text=t("");this.completionPercentage=t(-1);this.type=2;this.text(r);u!==undefined&&this.completionPercentage(u)}return __extends(i,n),i})(n.Dialog);n.ProgressBox=r;u=(function(n){function i(i){n.call(this,i);this.description=t();this.type=3}return __extends(i,n),i})(n.Dialog);n.FormDialog=u;f=(function(n){function i(){n.call(this,"");this.listItems=e();this.selectedItem=t();this.type=4}return __extends(i,n),i})(n.Dialog);n.ListPopup=f})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||
(MsPortalFx={})),(function(n){var t;(function(n){"use strict";n.ResourceIdTypeName="MsPortalFx.ViewModels.ResourceId"})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t={},i,r;n.forEachKey(n,(function(n,i){typeof i!="object"&&(t[n]=i)}));t.toNiceFixed=function(t,i){return i===void 0&&(i=0),String(n.round(t,i))};t.isIFrame=function(){return n.isIFrame};t.extend=n.jqueryExtend;i=t.Internal=t.Internal||{};i.JQuery=t;i.Serialization=FxImpl,(function(n){n.Utilities=t;var i;(function(n){n.Internal=FxImpl.Rpc})(i=n.Rpc||(n.Rpc={}))})(r=n.Base||(n.Base={}));n.Util=t;n.Polyfill=t;n.Polyfills=t})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function a(){var r=n.clone(i);r=n.extend(r,t.fxRequireConfig,!0);h.config(r)}var u=n,c=u.Base,f=FxImpl,v=c.Constants,y=f.Diagnostics,e=window,o=e.fx,t=o.environment,i=t.requireConfig,p=t.extensionName,r=new n.Base.Diagnostics.Log("MsPortalFx/MsPortalFxEnd"),w=t.isDevelopmentMode||t.crossOriginTraces,l=i.ignoreErrorsForModule=
{},s,h,b;i.onNodeCreated=function(n,t,i,r){w&&n.setAttribute("crossorigin","anonymous");l[i]||y.addScriptErrorListener(5,n,r,i)};s="retryAttempt";i.getPathFallback=function(n,t){var i,u,f;if(t){if(i=new c.UriBuilder(t),u=i.query.getParameter(s),!u)return r.warning("Retrying download",0,n,t),i.query.setParameter(s,1),i.toString();f=l[n]?r.warning:r.error;f.call(r,"Download failed even after retry: "+n,0,n,t)}};o.bootstrapTelemetry.fxScriptsEnd=o.getTimestamp();h=e.requirejs;n.forEachKey({MsPortalFx:u,f:u,i:f,u:undefined,o:Object,a:Array,ko:ko,$:jQuery},(function(n,t){e.define(n,[],(function(){return t}))}));n.requireExtension=a;p===v.Shell?h.config(i):t.isShellLike?a():n.loadScriptText("MsPortalFx.requireExtension();"),(function(n){var t;(function(n){var t;(function(n){n.ViewModel2=f.Controls.HotSpot.ViewModel2})(t=n.HotSpot||(n.HotSpot={}))})(t=n.Controls||(n.Controls={}))})(b=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={}))