var ArmUtils,ArmApiVersions,StringComparison,ErrorBase,FxViewModels,FxUtilities,ExpMocks,Diagnostics,ko,FxResourceTypes,Pickers,ClientResources,Constants,Usage,Forms,FxBase,ExtensionCore;(function(n){n(ko,ko.mapping={})})((function(n,t){function rt(){for(var r=arguments,u=r.length,f={},e=[],t,n,i;u--;)for(i=r[u],t=i.length;t--;)n=i[t],f[n]||(f[n]=1,e.push(n));return e}function y(n,i){var u,r,f;for(r in i)i.hasOwnProperty(r)&&i[r]&&(u=t.getType(n[r]),r&&n[r]&&u!=="array"&&u!=="string"?y(n[r],i[r]):(f=t.getType(n[r])==="array"&&t.getType(i[r])==="array",n[r]=f?rt(n[r],i[r]):i[r]))}function c(n,t){var i={};return y(i,n),y(i,t),i}function p(n,t){for(var f,i=c({},n),e=w.length-1;e>=0;e--)(f=w[e],i[f])&&(i[""]instanceof Object||(i[""]={}),i[""][f]=i[f],delete i[f]);return t&&(i.ignore=u(t.ignore,i.ignore),i.include=u(t.include,i.include),i.copy=u(t.copy,i.copy),i.observe=u(t.observe,i.observe)),i.ignore=u(i.ignore,r.ignore),i.include=u(i.include,r.include),i.copy=u(i.copy,r.copy),i.observe=u(
i.observe,r.observe),i.mappedProperties=i.mappedProperties||{},i.copiedProperties=i.copiedProperties||{},i}function u(i,r){return t.getType(i)!=="array"&&(i=t.getType(i)==="undefined"?[]:[i]),t.getType(r)!=="array"&&(r=t.getType(r)==="undefined"?[]:[r]),n.utils.arrayGetDistinctValues(i.concat(r))}function ut(t,i){var u=n.dependentObservable,r;return n.dependentObservable=function(i,r,u){var f;u=u||{};i&&typeof i=="object"&&(u=i);var s=u.deferEvaluation,e=!1,h=function(i){var f=n.dependentObservable,u,r;return n.dependentObservable=o,u=n.isWriteableObservable(i),n.dependentObservable=f,r=o({read:function(){return e||(n.utils.arrayRemoveItem(t,i),e=!0),i.apply(i,arguments)},write:u&&function(n){return i(n)},deferEvaluation:!0}),it&&(r._wrapper=!0),r.__DO=i,r};return u.deferEvaluation=!0,f=new o(i,r,u),s||(f=h(f),t.push(f)),f},n.dependentObservable.fn=o.fn,n.computed=n.dependentObservable,r=i(),n.dependentObservable=u,n.computed=n.dependentObservable,r}function l(r,u,f,o,v,y,p){var si=t.getType(
n.utils.unwrapObservable(u))==="array",ti,ot,ri,lt,ei,wt,yt,gt,d,it,ni,st,ht;y=y||"";t.isMapped(r)&&(ti=n.utils.unwrapObservable(r)[i],f=c(ti,f));var et={data:u,parent:p||v},ct=function(){return f[o]&&f[o].create instanceof Function},pt=function(t){return ut(s,(function(){return n.utils.unwrapObservable(v)instanceof Array?f[o].create({data:t||et.data,parent:et.parent,skip:b}):f[o].create({data:t||et.data,parent:et.parent})}))},rt=function(){return f[o]&&f[o].update instanceof Function},ft=function(t,i){var r={data:i||et.data,parent:et.parent,target:n.utils.unwrapObservable(t)};return n.isWriteableObservable(t)&&(r.observable=t),f[o].update(r)},ii=h.get(u);if(ii)return ii;if(o=o||"",si){var ui=[],fi=!1,w=function(n){return n};f[o]&&f[o].key&&(w=f[o].key,fi=!0);n.isObservable(r)||(r=n.observableArray([]),r.mappedRemove=function(n){var t=typeof n=="function"?n:function(t){return t===w(n)};return r.remove((function(n){return t(w(n))}))},r.mappedRemoveAll=function(t){var i=e(t,w);return r.remove(
(function(t){return n.utils.arrayIndexOf(i,w(t))!=-1}))},r.mappedDestroy=function(n){var t=typeof n=="function"?n:function(t){return t===w(n)};return r.destroy((function(n){return t(w(n))}))},r.mappedDestroyAll=function(t){var i=e(t,w);return r.destroy((function(t){return n.utils.arrayIndexOf(i,w(t))!=-1}))},r.mappedIndexOf=function(t){var i=e(r(),w),u=w(t);return n.utils.arrayIndexOf(i,u)},r.mappedGet=function(n){return r()[r.mappedIndexOf(n)]},r.mappedCreate=function(t){var i,u;if(r.mappedIndexOf(t)!==-1)throw new Error("There already is an object with the key that you specified.");return i=ct()?pt(t):t,rt()&&(u=ft(i,t),n.isWriteableObservable(i)?i(u):i=u),r.push(i),i});ei=e(n.utils.unwrapObservable(r),w).sort();wt=e(u,w);fi&&wt.sort();for(var oi=n.utils.compareArrays(ei,wt),at={},bt=n.utils.unwrapObservable(u),kt={},dt=!0,tt=0,vt=bt.length;tt<vt;tt++){if(d=w(bt[tt]),d===undefined||d instanceof Object){dt=!1;break}kt[d]=bt[tt]}for(yt=[],gt=0,tt=0,vt=oi.length;tt<vt;tt++){d=oi[tt];ni=y+"["+
tt+"]";switch(d.status){case"added":st=dt?kt[d.value]:a(n.utils.unwrapObservable(u),d.value,w);it=l(undefined,st,f,o,r,ni,v);ct()||(it=n.utils.unwrapObservable(it));ht=k(n.utils.unwrapObservable(u),st,at);it===b?gt++:yt[ht-gt]=it;at[ht]=!0;break;case"retained":st=dt?kt[d.value]:a(n.utils.unwrapObservable(u),d.value,w);it=a(r,d.value,w);l(it,st,f,o,r,ni,v);ht=k(n.utils.unwrapObservable(u),st,at);yt[ht]=it;at[ht]=!0;break;case"deleted":it=a(r,d.value,w)}ui.push({event:d.status,item:it})}r(yt);f[o]&&f[o].arrayChanged&&n.utils.arrayForEach(ui,(function(n){f[o].arrayChanged(n.event,n.item)}))}else if(nt(u)){if(r=n.utils.unwrapObservable(r),!r){if(ct())return lt=pt(),rt()&&(lt=ft(lt)),lt;if(rt())return ft(lt);r={}}if(rt()&&(r=ft(r)),h.save(u,r),rt())return r;g(u,(function(t){var e=y.length?y+"."+t:t;if(n.utils.arrayIndexOf(f.ignore,e)==-1){if(n.utils.arrayIndexOf(f.copy,e)!=-1){r[t]=u[t];return}if(typeof u[t]!="object"&&typeof u[t]!="array"&&f.observe.length>0&&n.utils.arrayIndexOf(f.observe,e)==
-1){r[t]=u[t];f.copiedProperties[e]=!0;return}var o=h.get(u[t]),s=l(r[t],u[t],f,t,r,e,r),i=o||s;if(f.observe.length>0&&n.utils.arrayIndexOf(f.observe,e)==-1){r[t]=n.utils.unwrapObservable(i);f.copiedProperties[e]=!0;return}n.isWriteableObservable(r[t])?(i=n.utils.unwrapObservable(i),r[t]()!==i&&r[t](i)):(i=r[t]===undefined?i:n.utils.unwrapObservable(i),r[t]=i);f.mappedProperties[e]=!0}}))}else switch(t.getType(u)){case"function":rt()?n.isWriteableObservable(u)?(u(ft(u)),r=u):r=ft(u):r=u;break;default:if(n.isWriteableObservable(r))return rt()?(ot=ft(r),r(ot),ot):(ot=n.utils.unwrapObservable(u),r(ot),ot);if(ri=ct()||rt(),r=ct()?pt():n.observable(n.utils.unwrapObservable(u)),rt()&&r(ft(r)),ri)return r}return r}function k(n,t,i){for(var r=0,u=n.length;r<u;r++)if(i[r]!==!0&&n[r]===t)return r;return null}function d(i,r){var u;return r&&(u=r(i)),t.getType(u)==="undefined"&&(u=i),n.utils.unwrapObservable(u)}function a(t,i,r){var u,e,f;for(t=n.utils.unwrapObservable(t),u=0,e=t.length;u<e;u++)if(
f=t[u],d(f,r)===i)return f;throw new Error("When calling ko.update*, the key '"+i+"' was not found!");}function e(t,i){return n.utils.arrayMap(n.utils.unwrapObservable(t),(function(n){return i?d(n,i):n}))}function g(n,i){var r,u;if(t.getType(n)==="array")for(r=0;r<n.length;r++)i(r);else for(u in n)i(u)}function nt(n){var i=t.getType(n);return(i==="object"||i==="array")&&n!==null}function ft(n,i,r){var u=n||"";return t.getType(i)==="array"?n&&(u+="["+r+"]"):(n&&(u+="."),u+=r),u}function et(){var t=[],i=[];this.save=function(r,u){var f=n.utils.arrayIndexOf(t,r);f>=0?i[f]=u:(t.push(r),i.push(u))};this.get=function(r){var u=n.utils.arrayIndexOf(t,r);return u>=0?i[u]:undefined}}function tt(){var n={},t=function(t){var r,i;try{r=t}catch(u){r="$$$"}return i=n[r],i===undefined&&(i=new et,n[r]=i),i};this.save=function(n,i){t(n).save(n,i)};this.get=function(n){return t(n).get(n)}}var it=!0,i="__ko_mapping__",o=n.dependentObservable,v=0,s,h,w=["create","update","key","arrayChanged"],b={},f={include:
["_destroy"],ignore:[],copy:[],observe:[]},r=f;t.isMapped=function(t){var r=n.utils.unwrapObservable(t);return r&&r[i]};t.fromJS=function(n){var t,r,u,f;if(arguments.length==0)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{if(v++||(s=[],h=new tt),arguments.length==2&&(arguments[1][i]?r=arguments[1]:t=arguments[1]),arguments.length==3&&(t=arguments[1],r=arguments[2]),r&&(t=c(t,r[i])),t=p(t),u=l(r,n,t),r&&(u=r),!--v)while(s.length)f=s.pop(),f&&(f(),f.__DO.throttleEvaluation=f.throttleEvaluation);return u[i]=c(u[i],t),u}catch(e){v=0;throw e;}};t.fromJSON=function(i){var r=n.utils.parseJson(i);return arguments[0]=r,t.fromJS.apply(this,arguments)};t.updateFromJS=function(){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");};t.updateFromJSON=function(){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");
};t.toJS=function(u,f){if(r||t.resetDefaultOptions(),arguments.length==0)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if(t.getType(r.ignore)!=="array")throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if(t.getType(r.include)!=="array")throw new Error("ko.mapping.defaultOptions().include should be an array.");if(t.getType(r.copy)!=="array")throw new Error("ko.mapping.defaultOptions().copy should be an array.");return f=p(f,u[i]),t.visitModel(u,(function(t){return n.utils.unwrapObservable(t)}),f)};t.toJSON=function(i,r){var u=t.toJS(i,r);return n.utils.stringifyJson(u)};t.defaultOptions=function(){if(arguments.length>0)r=arguments[0];else return r};t.resetDefaultOptions=function(){r={include:f.include.slice(0),ignore:f.ignore.slice(0),copy:f.copy.slice(0),observe:f.observe.slice(0)}};t.getType=function(n){if(n&&typeof n=="object"){if(n.constructor===Date)return"date";if(n.constructor===Array)return"array"}return typeof n};t.visitModel=
function(r,u,f){var o,e,s;if(f=f||{},f.visitedObjects=f.visitedObjects||new tt,e=n.utils.unwrapObservable(r),nt(e))f=p(f,e[i]),u(r,f.parentName),o=t.getType(e)==="array"?[]:{};else return u(r,f.parentName);return f.visitedObjects.save(r,o),s=f.parentName,g(e,(function(r){var h,c;if((!f.ignore||n.utils.arrayIndexOf(f.ignore,r)==-1)&&(h=e[r],f.parentName=ft(s,e,r),n.utils.arrayIndexOf(f.copy,r)!==-1||n.utils.arrayIndexOf(f.include,r)!==-1||!e[i]||!e[i].mappedProperties||e[i].mappedProperties[r]||!e[i].copiedProperties||e[i].copiedProperties[r]||t.getType(e)==="array"))switch(t.getType(n.utils.unwrapObservable(h))){case"object":case"array":case"undefined":c=f.visitedObjects.get(h);o[r]=t.getType(c)!=="undefined"?c:t.visitModel(h,u,f);break;default:o[r]=u(h,f.parentName)}})),o}})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.subscriptionsProvider="?api-version=2015-01-01",n.resourceProvider="?api-version=2015-01-01",n.resources="?api-version=2015-01-01",
n.networkSecurityGroup="?api-version=2015-06-01",n.computeDeleteOsDiskAndUserImage="?api-version=2015-06-01",n.computeCapabilitiesApiVersion="?api-version=2015-12-01",n.endpointsApiVersion="?api-version=2016-11-01",n.storageAccountVersionOnly="2015-06-01",n.storageAccountDiagnosticsVersionOnly="2015-07-01",n.sqlIaasAgentExtensionVersionOnly="2015-06-15",n.locks="?api-version=2015-01-01",n.checkBackupStatus="2016-06-01",n})();n.ArmApiVersions=t})(t=n.Versions||(n.Versions={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function i(n,t,i,r){return MsPortalFx.Base.Net.ajax({uri:t,type:n,dataType:"json",traditional:!0,headers:$.extend({},i),contentType:"application/json",setAuthorizationHeader:!0,data:r,invokeApi:"api/invoke"})}function h(n,t,r,u){function e(t){return t&&(t.value&&[].push.apply(f,t.value),t.nextLink)?i(n,t.nextLink,r,u).then(e):f}var f=[];return i(n,t,r,u).then(e)}function c(r){return function(u,f,e,o,s){for(var a,c=r(s),l=[],h=0;h<c.length;
h+=t.batchRequestLimit)l.push(c.slice(h,h+t.batchRequestLimit));return a=l.map((function(r){return i("POST","{0}/batch{1}".format(t.endpoint,n.Versions.ArmApiVersions.resources),null,JSON.stringify({requests:r}))})),Q.all(a).then((function(n){return[].concat.apply([],n.map((function(n){return n.responses})))}))}}function l(n,t,i,r){var u=r.getResponseHeader("x-ms-correlation-request-id");u&&n.notify({correlationId:u})}function e(n,i,r,u,f,o){var c=u.getResponseHeader("Location"),s,l,h;if(o)if(s=i,s&&s.status)switch(s.status.toLowerCase()){case t.AzureAsyncOperationStatus.Succeeded.toLowerCase():n.resolve(i);return;case t.AzureAsyncOperationStatus.Failed.toLowerCase():n.reject(u);return;case t.AzureAsyncOperationStatus.InProgress.toLowerCase():case t.AzureAsyncOperationStatus.Accepted.toLowerCase():break;default:MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ArmUtils._pollOperation","Unknown status in Azure-AsyncOperation response: '{0}'. Response payload: {1}".
format(s.status,JSON.stringify(i)));n.reject(u);return}else{MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ArmUtils._pollOperation","Unexpected Azure-AsyncOperation response. Response payload: {0}".format(JSON.stringify(i)));n.reject(u);return}else o=u.getResponseHeader("Azure-AsyncOperation");o||c?(l=1e4,h=+u.getResponseHeader("Retry-After")*1e3,h=h?h:l,Q.delay(h).then((function(){return MsPortalFx.Base.Net.ajax({uri:o||c,setAuthorizationHeader:!0}).then((function(t,i,r){e(n,t,i,r,f,o)})).catch((function(t){f&&t&&t.status&&t.status===404?n.resolve(t.responseText||t.statusText||t):n.reject(t)}))}))):n.resolve(i)}function a(n,t,i,r){return o({uri:n,type:t||"POST",data:i,contentType:r})}function o(n){var t=Q.defer();return MsPortalFx.Base.Net.ajax({uri:n.uri,type:n.type||"POST",setAuthorizationHeader:!0,data:n.data,dataType:n.dataType,contentType:n.contentType,traditional:!0}).then((function(i,r,u){l(t,i,r,u);var f=StringEx.equals(n.type,"DELETE",StringComparison.
IgnoreCase);e(t,i,r,u,f)})).catch((function(n){t.reject(n)})),t.promise}function v(t,i){return n.ArmUtils.runOperationWithSettings({uri:n.ArmUtils.endpoint+t+i,type:"DELETE",contentType:"application/json"})}function s(){return t.endpoint.toLowerCase().indexOf("management.azure.com")!==-1}function r(){return t.endpoint.toLowerCase().indexOf("management.microsoftazure.de")!==-1}function u(){return t.endpoint.toLowerCase().indexOf("management.usgovcloudapi.net")!==-1}function f(){return t.endpoint.toLowerCase().indexOf("management.chinacloudapi.cn")!==-1}function y(){return!(s()||r()||u()||f())}function p(){return r()||u()||f()}t.AzureAsyncOperationStatus={Succeeded:"Succeeded",InProgress:"InProgress",Failed:"Failed",Accepted:"Accepted"};t.endpoint=window.fx.environment&&window.fx.environment.csmManagementServiceUri&&window.fx.environment.csmManagementServiceUri.replace(/\/$/,"");t.controllerEndpoint=window.fx.environment&&window.fx.environment.controllerEndpoint&&window.fx.environment.controllerEndpoint.
replace(/\/$/,"");t.batchRequestLimit=20;t.corsDataSupplier=i;t.corsCollectionSupplier=h;t.getCorsBatchSupplier=c;t.runOperation=a;t.runOperationWithSettings=o;t.deleteResource=v;t.isPublicAzure=s;t.isBlackForest=r;t.isFairfax=u;t.isMooncake=f;t.isAzureStack=y;t.isNationalCloud=p})(t=n.ArmUtils||(n.ArmUtils={}))})(ExtensionCore||(ExtensionCore={}));ArmUtils=ExtensionCore.ArmUtils;ArmApiVersions=ExtensionCore.Versions.ArmApiVersions,(function(n){var t;(function(t){"use strict";function i(t){var i=Q.defer(),r=n.ArmUtils.endpoint+"/subscriptions/"+t+"/resourceGroups"+ArmApiVersions.resources;return n.ArmUtils.corsCollectionSupplier("GET",r,null,null).then((function(n){if(Array.isArray(n)){var r=[];n.forEach((function(n){r.push(new FxForms.DisablableOption(ko.observable(n.name),n.id.toLowerCase()))}));i.resolve(r)}else MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ArmCommonApi.listResourceGroupIDisablableOptions","Failed to get resource groups for id {0}.".
format(t)),i.reject()})).catch((function(n){MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ArmCommonApi.listResourceGroupIDisablableOptions","Failed to get resource groups for id {0}. The error message was: {1}.".format(t,n?n.message:""));i.reject(n)})),i.promise}function r(t){var i=Q.defer(),r=n.ArmUtils.endpoint+"/subscriptions/{0}/locations".format(t)+ArmApiVersions.subscriptionsProvider;return n.ArmUtils.corsCollectionSupplier("GET",r,null,null).then((function(n){if(Array.isArray(n)){var r=[];n.forEach((function(n){r.push(new FxForms.DisablableOption(ko.observable(n.displayName),n.displayName))}));i.resolve(r)}else MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ArmCommonApi.listLocationsApi","Failed to get locations for id {0}.".format(t)),i.reject()})).catch((function(n){MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ArmCommonApi.listLocationsApi","Failed to get locations for id {0}. The error message was: {1}.".
format(t,n?n.message:""));i.reject(n)})),i.promise}function u(t,i,r,u){var f=Q.defer(),e=n.ArmUtils.endpoint+"/subscriptions/"+t+"/resourcegroups/"+i+"/resources"+ArmApiVersions.resourceProvider+"&$filter=(resourceType eq '{0}' and name eq '{1}')".format(r,u);return MsPortalFx.Base.Net.ajax({isBackgroundTask:!1,uri:e,type:"GET",setAuthorizationHeader:!0}).then((function(n){n.value.length>0?f.resolve(!1):f.resolve(!0)}),(function(n){f.resolve(!0);MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ArmCommonApi.checkNameAvailability","Failed to get list of resources for the following URI: {0}. The error message was: {1}".format(e,n?n.message:""))})),f.promise}t.listResourceGroupIDisablableOptions=i;t.listLocationIDisablableOptions=r;t.checkNameAvailabilityInResourceGroup=u})(t=n.ArmCommonApi||(n.ArmCommonApi={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.metadata={name:"ExtensionCore.DataModels.ProviderResource",
properties:{apiVersions:{isArray:!0},locations:{isArray:!0},resourceType:null},entityType:!0,idProperties:["resourceType"]},n})(),i;n.ProviderResource=t;MsPortalFx.Data.Metadata.setTypeMetadata(t.metadata.name,t.metadata);i=(function(){function n(){}return n.metadata={name:"ExtensionCore.DataModels.Provider",properties:{id:null,namespace:null,registrationState:null,resourceTypes:{itemType:t.metadata.name,isArray:!0}},entityType:!0,hasGloballyUniqueId:!0,idProperties:["id"]},n})();n.Provider=i;MsPortalFx.Data.Metadata.setTypeMetadata(i.metadata.name,i.metadata)})(t=n.DataModels||(n.DataModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var r,t,i;(function(n){n[n.networkSecurityGroups=0]="networkSecurityGroups";n[n.cores=1]="cores";n[n.virtualNetworks=2]="virtualNetworks";n[n.publicIPAddresses=3]="publicIPAddresses";n[n.staticPublicIPAddresses=4]="staticPublicIPAddresses";n[n.networkInterfaces=5]="networkInterfaces";n[n.routeTables=6]="routeTables";n[
n.localNetworkGateways=7]="localNetworkGateways"})(n.UsagesType||(n.UsagesType={}));r=n.UsagesType;t=(function(){function n(){}return n.metadata={name:"ExtensionCore.DataModels.UsageNameResource",properties:{localizedValue:null,value:null},entityType:!1},n})();n.UsageNameResource=t;MsPortalFx.Data.Metadata.setTypeMetadata(t.metadata.name,t.metadata);i=(function(){function n(){}return n.metadata={name:t.metadata.name,properties:{currentValue:null,limit:null,unit:null,name:{itemType:t.metadata.name}},entityType:!1},n})();n.Usages=i;MsPortalFx.Data.Metadata.setTypeMetadata(i.metadata.name,i.metadata)})(t=n.DataModels||(n.DataModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(){"use strict"})(t=n.ClassicComputeExtension||(n.ClassicComputeExtension={}))})(t=n.SharedModels||(n.SharedModels={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";
var s,h,t,i,r,u,f,e,o;n.definitionName="MicrosoftAzureClassicStorageExtension";s=(function(){function n(){this.storageServicePicker="StorageServicePicker";this.storageAccountPicker="StorageAccountPickerBlade"}return n})();n.BladeNames=s;h=(function(){function n(){this.StorageAccount=new o;this.Subscription=new f;this.ResourceGroup=new u;this.Container=new r;this.Blob=new i;this.Diagnostics=new e}return n})();n.StorageServicePickerModel=h;t=(function(){function n(){this.accessPolicyPermissions=ko.observable();this.accessPolicyStart=ko.observable();this.accessPolicyExpiry=ko.observable();this.sharedAccessSignature=ko.observable()}return n})();n.SASParameters=t;i=(function(n){function t(){n.apply(this,arguments);this.name=ko.observable();this.url=ko.observable();this.blobType=ko.observable()}return __extends(t,n),t})(t);n.StorageBlobParameters=i;r=(function(n){function t(){n.apply(this,arguments);this.name=ko.observable();this.url=ko.observable();this.isNew=ko.observable();this.newContainerName=ko.
observable();this.newContainerAccessType=ko.observable()}return __extends(t,n),t})(t);n.StorageContainerParameters=r;u=(function(){function n(){this.name=ko.observable()}return n})();n.ResourceGroupParameters=u;f=(function(){function n(){this.subscriptionId=ko.observable()}return n})();n.SubscriptionParameters=f;e=(function(){function n(){this.status=ko.observable()}return n})();n.DiagnosticsParameters=e;o=(function(){function n(){this.id=ko.observable();this.name=ko.observable();this.location=ko.observable();this.accountType=ko.observable();this.isProvisioned=ko.observable();this.isNew=ko.observable();this.newResourceGroup=ko.observable();this.newSubscriptionId=ko.observable();this.blobEndpoint=ko.observable();this.queueEndpoint=ko.observable();this.tableEndpoint=ko.observable();this.fileEndpoint=ko.observable()}return n})();n.StorageAccountParameters=o})(t=n.ClassicStorageExtension||(n.ClassicStorageExtension={}))})(t=n.SharedModels||(n.SharedModels={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||
(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function i(n,t){var i=r(n,t);return MsPortalFx.Base.Net.ajax(i)}function u(n,t){var i=r(n,t);return MsPortalFx.Base.Net.cachedAjax(i)}function f(n,t){return i(n,{data:t,type:"POST"})}function e(n,t){return i(n,{data:t,type:"PUT"})}function o(n,t){return i(n,{data:t,type:"PATCH"})}function s(n){return i(n,{type:"DELETE"})}function h(n,t){return i(n,{data:t,type:"GET"})}function r(t,i){t&&!t.toLowerCase().startsWith("http")&&(t=n.ArmUtils.controllerEndpoint+t);i=c(i);i.url=t;var r=i;return r.uri=r.url,r}function c(n){return n?(n=$.extend({},t.defaultAjaxSettings,n),n.traditional&&n.data&&(n.data=typeof n.data=="string"?n.data:ko.toJSON(n.data||{})),n):n}t.defaultAjaxSettings={cache:!1,contentType:"application/json",traditional:!0,setAuthorizationHeader:!0};t.ajax=i;t.cachedAjax=u;t.post=f;t.put=e;t.patch=o;t.ajaxDelete=s;t.get=h})(t=n.Net||(n.Net={}))})(ExtensionCore||(ExtensionCore={})),(function(n){n[n.IgnoreCase=0]="IgnoreCase"})
(StringComparison||(StringComparison={}));var StringEqualityComparer=(function(){function n(){}return n.IgnoreCase=function(n,t){return StringEx.equals(n,t,StringComparison.IgnoreCase)},n})(),StringComparer=(function(){function n(){}return n.IgnoreCase=function(n,t){return n=typeof n=="string"?n.toUpperCase():"",t=typeof t=="string"?t.toUpperCase():"",n.localeCompare(t)},n})(),StringEx=(function(){function n(){}return n.equals=function(n,t,i){return typeof n!="string"||typeof t!="string"?!1:(i===StringComparison.IgnoreCase&&(n=n.toUpperCase(),t=t.toUpperCase()),n===t)},n.isStringInArray=function(t,i,r){return typeof t!="string"||!Array.isArray(i)?!1:!!i.first((function(i){return n.equals(t,i,r)}))},n.startsWith=function(n,t,i){return typeof n!="string"||typeof t!="string"?!1:(i===StringComparison.IgnoreCase&&(n=n.toUpperCase(),t=t.toUpperCase()),n.length>=t.length&&n.indexOf(t)===0)},n.endsWith=function(n,t,i){return typeof n!="string"||typeof t!="string"?!1:(i===StringComparison.IgnoreCase&&
(n=n.toUpperCase(),t=t.toUpperCase()),n.length>=t.length&&n.indexOf(t,n.length-t.length)!==-1)},n.convertToStringMap=function(n){var t={};return n.split(",").forEach((function(n){var i=n.split(":");i.length===2&&(t[i[0]]=i[1])})),t},n})(),ExtensionCore;(function(n){var t;(function(n){"use strict";function r(n,t){var r=n.split(""),f="",i,u;if(r.length)for(i=0;i<r.length;i++)u=r[i],u.match(t)&&(f+=u);return f}function i(n,t){for(var i="",r=0;r<n;r++)i=i+String.fromCharCode(Math.floor(26*Math.random()+65));return t?i.toLowerCase():i}function u(n,t){for(var r="",u=0;u<n;u++)r=Math.random()<.5?r+i(1,t):r+Math.floor(Math.random()*9).toString();return t?r.toLowerCase():r}function f(n,t){return n+Math.floor(Math.random()*(t-n+1))}function e(){try{return"localStorage"in window&&window.localStorage!==null}catch(n){return!1}}function o(n,t){MsPortalFx.Data.DataSet.mergeWithoutAtomization({value:n},{value:t})}function s(n){var i=t(ko.toJS(n));return ko.isObservable(n)&&!ko.isObservable(i)&&(i=ko.observable(
i)),i}function h(n,t){var r=$.Deferred(),i=0,u=function(){i>=t.length&&r.resolve()};return t.forEach((function(t){var r=!1;t()!==undefined?(i++,setTimeout((function(){u()}))):t.subscribe(n,(function(){r||(r=!0,i++,u())}))})),r.promise()}function c(n){return n&&n.value&&Array.isArray(n.value)?n.value:n}function l(n){if(!n)return"";if(n.responseJSON&&n.responseJSON.Message)return n.responseJSON&&n.responseJSON.Message;if(n.responseJSON&&n.responseJSON.message)return n.responseJSON&&n.responseJSON.message;var t;try{if(t=n.responseText&&JSON.parse(n.responseText).Message,t)return t}catch(i){}try{if(t=n.responseText&&JSON.parse(n.responseText).message,t)return t}catch(i){}return""}function a(n){var t=$.Deferred(),i=0;return n.length?n.forEach((function(r){r.always((function(){i+=1;i>=n.length&&t.resolve()}))})):t.resolve(),t.promise()}function v(n){return $.Deferred().resolve(n).promise()}function y(n){var t=$.Deferred();return n.then((function(){setTimeout((function(){t.resolve()}))}),(function(){setTimeout(
(function(){t.reject()}))})),t.promise()}function p(n,t,i){var r=$.Deferred(),f=r.promise(),u;return n.done((function(){r.resolve.apply(this,arguments)})).fail((function(){r.reject.apply(this,arguments)})),u=setTimeout((function(){r.reject.apply(r,i||[])}),t*1e3),n.always((function(){clearTimeout(u)})),f.timeoutId=u,f}function w(n){var t=n&&n.timeoutId;typeof t=="number"&&clearTimeout(t)}function b(n,t){var i=$.Deferred(),r=0,u=function(){n().always((function(){r+=1})).done((function(){i.resolve.apply(this,arguments)})).fail((function(){r>=t&&i.reject.apply(this,arguments);u()}))};return u(),i.promise()}function k(n){n=n||"";var t=n.split("//"),r=t.length?t.last():"",i=r.split("/");return i.splice(0,1),i.join("/")}function d(n,t,i){if(typeof n!="string")throw new TypeError("'str' must be of type 'string'");return!!t.first((function(t){return StringEx.equals(n,t,i)}))}function g(n,t){var i=t*864e5,r=n.getTime()+i;return new Date(r)}function nt(n,t){var i=t*864e5,r=n.getTime()-i;return new Date(r)}function tt(
n,t){var i=function(n,t){var r,u;for(r in n)if(!t.hasOwnProperty(r)||!!t[r]&&typeof t[r]=="object"&&!Array.isArray(t[r])&&(u=i(ko.isObservable(n[r])?n[r]():n[r],t[r]),!u))return!1;return!0};return i(n,t)}function t(n){var i,r,u;if(Array.isArray(ko.utils.unwrapObservable(n)))i=ko.observableArray(ko.utils.unwrapObservable(n).map((function(n){return t(n)})));else if(MsPortalFx.isObject(n)){i={};for(r in n)n.hasOwnProperty(r)&&(u=t(n[r]),i[r]=ko.isObservable(u)?u:ko.observable(u))}else i=n;return i}n.FilterStringByRegex=r;n.GenerateRandomString=i;n.GenerateRandomAlphaNumericString=u;n.getRandomInteger=f;n.supportsLocalStorage=e;n.merge=o;n.cloneObservable=s;n.waitForObservables=h;n.parseValueArray=c;n.getXhrError=l;n.waitForPromises=a;n.convertToPromise=v;n.getNonBlockingPromise=y;n.getTimeoutPromise=p;n.clearTimeoutPromise=w;n.callWithRetries=b;n.getUrlPath=k;n.isStringInArray=d;n.dateAddDays=g;n.dateSubtractDays=nt;n.doInputsMatchModel=tt;n.mapItemIntoObservableProperties=t})(t=n.Utilities||
(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict";function n(n){return MsPortalFx.isObject(n)?t(n):Array.isArray(n)?i(n):JSON.stringify(n)}function t(t){var r=[],i,u;for(i in t)t.hasOwnProperty(i)&&r.push({key:i,value:t[i]});return r.sort((function(n,t){return n.key<t.key?-1:1})),u=r.map((function(t){return'"'+t.key+'":'+n(t.value)})),"{"+u.join(",")+"}"}function i(t){var i=t.map((function(t){return n(t)}));return"["+i.join(",")+"]"}JSON.stringifyOrdered||(JSON.stringifyOrdered=n)})(t=n.Polyfills||(n.Polyfills={}))})(ExtensionCore||(ExtensionCore={}));ErrorBase=(function(){function n(n){Error.apply(this,arguments);this.name=this.constructor.prototype.name;this.message=n}return n})();ErrorBase.prototype=Error.prototype;var InvalidOperationError=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(ErrorBase),ArgumentError=(function(n){function t(t,i){var r=i?ExtensionCore.Resources.reasonMessage.format(i):"",u="'{0}'. {1}".format(
t,r);n.call(this,ExtensionCore.Resources.Validation.invalidArgument.format(u))}return __extends(t,n),t})(ErrorBase),AbstractMethodError=(function(n){function t(t,i){n.call(this,"cannot call abstract method {1} of class {0}. Make sure it is implemented in a derived class.".format(t,i))}return __extends(t,n),t})(ErrorBase),ExtensionCore;(function(n){var t;(function(n){"use strict";var t=432e5,i=(function(){function n(n,t,i){this.pollingInterval=n;this.fastPollingInterval=typeof t=="number"?t:n;this.slowPollingInterval=typeof i=="number"?i:n}return n.NoPolling=new n(t),n})();n.PollingIntervals=i})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";function r(){return t.pollingInterval}function u(){return t.fastPollingInterval}function f(){return t.slowPollingInterval}function e(){t={pollingInterval:window.fx.environment.pollingInterval,fastPollingInterval:window.fx.environment.fastPollingInterval,slowPollingInterval:window.fx.environment.slowPollingInterval};
MsPortalFx.Data.Loader.setPollingIntervals(null,t)}var i=432e5,t;n.NoPolling={pollingInterval:i,fastPollingInterval:i,slowPollingInterval:i};n.getPollingInterval=r;n.getFastPollingInterval=u;n.getSlowPollingInterval=f;e()})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function r(t){t.loader||(typeof t.poll!="boolean"&&(t.poll=!0),t.pollInterval||(t.pollInterval=n.Data.getPollingInterval()),t.supplyData||(t.supplyData=i),typeof t.extendEntryLifetimes!="boolean"&&(t.extendEntryLifetimes=!0))}function i(t,i,r,u){return n.Net.cachedAjax(i,{type:t,headers:r,data:u})}function s(n,t,r,u,f){return i(f,t,u,r)}function h(t){var i=n.Utilities.parseValueArray(t);return{data:i}}function c(n,t){var i=n._loadedCacheEntry();!n.loading()&&i&&i.data&&i.data.remove(t)}var u=(function(n){function t(t){r(t);n.call(this,t)}return __extends(t,n),t})(MsPortalFx.Data.EntityCache),f,e,o;t.EntityCache=u;MsPortalFx.Data.EntityCache=u;f=(function(n){function t(
t){r(t);n.call(this,t)}return __extends(t,n),t})(MsPortalFx.Data.QueryCache);MsPortalFx.Data.QueryCache=f;e=(function(n){function t(t){r(t);n.call(this,t)}return __extends(t,n),t})(MsPortalFx.Data.DataCacheLoader);MsPortalFx.Data.DataCacheLoader=e;o=(function(n){function t(t){this.config=t;this._isHttpPutOrPost()&&this._setHttpPutOrPostConfigOptions(this.config);n.call(this,t)}return __extends(t,n),t.prototype.serializeParams=function(t){if(this.config.serializeParams)return this.config.serializeParams(t);var i=n.prototype.serializeParams.call(this,t)||"";return this._isHttpPutOrPost()&&t&&(i="{0} - {1}".format(i,JSON.stringifyOrdered(ko.toJS(t)))),i.toUpperCase()},t.prototype._setHttpPutOrPostConfigOptions=function(){var n=this,t,r;this.config.requestBody||(this.config.requestBody=function(n){return n});this.config.supplyData||(this.config.supplyData=i);this.config.assetDeletedOptions&&(t=this.config.supplyData,this.config.supplyData=function(i,r,u,f,e,o){return t(i,r,u,f,e,o).catch((function(
t){t&&t.status===404&&MsPortalFx.UI.AssetManager.notifyAssetDeleted(n.config.assetDeletedOptions.assetType,n.config.assetDeletedOptions.getAssetId(e))}))});r=this.config.supplyData;this.config.supplyData=function(t,i,u,f,e,o){var s=n.config.requestBody(e);return MsPortalFx.isObject(s)&&(f=f||{},$.extend(f,s)),r(t,i,u,f,e,o)}},t.prototype._isHttpPutOrPost=function(){return!this.config.httpMethod||!StringEx.equals(this.config.httpMethod,"GET",StringComparison.IgnoreCase)},t})(MsPortalFx.Data.DataCacheLoader);t.DataCacheLoader=o;t.defaultSupplyData=i;t.defaultFetchData=s;t.processValueArrayServerResponse=h;t.removeItemFromQueryView=c})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function i(){return MsPortalFx.Azure.getAllSubscriptions().then((function(t){return t.filter((function(t){return StringEx.equals(t.state,n.Constants.SubscriptionStatus.Disabled.toLowerCase(),StringComparison.IgnoreCase)||StringEx.equals(t.state,"deleted",StringComparison.
IgnoreCase)?!1:!0}))}))}function r(){return MsPortalFx.Azure.getAllSubscriptions().then((function(n){return n.map((function(n){return n.subscriptionId}))}))}function u(n){return MsPortalFx.Azure.getSubscriptionInfo(n)}function f(i,r,u,f){return t.getSubscriptionIdsAsync().then((function(t){return n.Data.defaultSupplyData(i,r,u,$.extend({},f,{SubscriptionIds:t}))}))}t.getSubscriptionsAsync=i;t.getSubscriptionIdsAsync=r;t.getSubscriptionAsync=u;t.supplyDataWithSubscriptionIds=f})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";function t(n,t,i){var r,u,f;if(t.indexOf("/")!==0&&(t="/"+t),r=n+t.replace("//","/"),i){u=[];for(f in i)u.push(encodeURIComponent(f)+"="+encodeURIComponent(i[f]));r+="?"+u.join("&")}return r}n.getCorsUri=t})(t=n.Cors||(n.Cors={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(){function i(n){this.options=n}return i.prototype.getResourceUri=function(n,i){var r=$.extend({},this.
options.baseQueryParameters||{},i||{});return t.getCorsUri(this.options.baseUri,n,r)},i.prototype.get=function(t,i){return n.Net.get(this.getResourceUri(t,i))},i.prototype.put=function(t,i,r){return n.Net.put(this.getResourceUri(t,r),i)},i.prototype.delete=function(t,i){return n.Net.ajaxDelete(this.getResourceUri(t,i))},i.prototype.patch=function(t,i,r){return n.Net.patch(this.getResourceUri(t,r),i)},i.prototype.post=function(t,i,r){return n.Net.post(this.getResourceUri(t,r),i)},i})();t.RestClient=i})(t=n.Cors||(n.Cors={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i="2014-09-01",r=(function(t){function r(){t.call(this,{baseUri:window.fx.environment.galleryServiceUri+"/Microsoft.Gallery/galleryitems/",baseQueryParameters:{"api-version":i,includePreview:"true"}})}return __extends(r,t),r.prototype.listAllGalleryItems=function(){return n.Net.get(this.getResourceUri(""))},r})(t.RestClient);t.GalleryClient=r})(t=n.Cors||(n.Cors={}))})(ExtensionCore||(ExtensionCore=
{})),(function(n){var t;(function(t){"use strict";function i(t){var i=n.ArmUtils.endpoint+"/subscriptions/{0}/providers{1}".format(t,n.Versions.ArmApiVersions.resourceProvider);return n.ArmUtils.corsCollectionSupplier("GET",i,null,null)}function r(t,r){var u=Q.defer();return i(t).then((function(t){var i=t.first((function(n){return StringEx.equals(n.namespace,r,StringComparison.IgnoreCase)}));i&&StringEx.equals(i.registrationState,n.Constants.registeredString,StringComparison.IgnoreCase)?u.resolve(!0):u.resolve(!1)}),(function(n){n&&n.message?MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Utilities.isRegistered","Unable to retrieve registration status for subscription {0}. The error message was: {1}.".format(t,n.message)):MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Utilities.isRegistered","Unable to retrieve registration status for subscription {0}.".format(t));u.resolve(
!1)})),u.promise}function u(n,t){var u=Q.defer(),f=0,e={},o=t.split("/"),s=o[0],r;for(t=o[1],r=0;r<n.length;r++)i(n[r]).then((function(n){var i=n.first((function(n){return StringEx.equals(n.namespace,s,StringComparison.IgnoreCase)})),r;i&&i.id&&i.resourceTypes&&(r=i.resourceTypes.first((function(n){return StringEx.equals(n.resourceType,t,StringComparison.IgnoreCase)})),r&&(e[i.id.slice(15,51)]=r.locations))})).finally((function(){f++;f===n.length&&u.resolve(e)}));return u.promise}t.listProviders=i;t.isProviderRegistered=r;t.listResourceLocations=u})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){function i(){var i="ExtensionCore.Resources",n=window,t;if(n.Resources&&n.Resources.getResources&&(t=n.Resources.getResources(i)),!t)throw new Error("Unable to find the resources for '"+i+"'.");return function(n){return t[n]}}var t=i(),r,u,f,e,o,s,h,c,l,a,v;n.serviceNameFormat=t("serviceNameFormat"),(function(n){var i;(function(n){n.virtualNetworkNameLengthMax=
t("Network_Validation_virtualNetworkNameLengthMax");n.nameLength=t("Network_Validation_nameLength");n.name=t("Network_Validation_name");n.emptyAddressRange=t("Network_Validation_emptyAddressRange");n.addressRangeSummary=t("Network_Validation_addressRangeSummary");n.networkSecurityGroupNameLength=t("Network_Validation_networkSecurityGroupNameLength");n.networkSecurityGroupNameRegex=t("Network_Validation_networkSecurityGroupNameRegex");n.betweenPrefix=t("Network_Validation_betweenPrefix");n.missingAddressSpace=t("Network_Validation_missingAddressSpace");n.subnetOverlaps=t("Network_Validation_subnetOverlaps");n.subnetNotContained=t("Network_Validation_subnetNotContained");n.reserved=t("Network_Validation_reserved");n.notInSubnet=t("Network_Validation_notInSubnet");n.notInRange=t("Network_Validation_notInRange");n.privateSpace=t("Network_Validation_privateSpace");n.prefix=t("Network_Validation_prefix");n.octet=t("Network_Validation_octet");n.nonNullSubnet=t("Network_Validation_nonNullSubnet");
n.nonNullAddress=t("Network_Validation_nonNullAddress");n.maxPrefix=t("Network_Validation_maxPrefix");n.malformedSubnet=t("Network_Validation_malformedSubnet");n.malformedAddress=t("Network_Validation_malformedAddress")})(i=n.Validation||(n.Validation={}));n.validation=t("Network_Validation")})(r=n.Network||(n.Network={}));n.properties=t("properties");n.overview=t("overview"),(function(n){n.summary=t("Keyword_summary");n.subscription=t("Keyword_subscription");n.status=t("Keyword_status");n.region=t("Keyword_region");n.overview=t("Keyword_overview");n.name=t("Keyword_name");n.migrate=t("Keyword_migrate");n.location=t("Keyword_location");n.id=t("Keyword_id");n.health=t("Keyword_health");n.essential=t("Keyword_essential")})(u=n.Keyword||(n.Keyword={})),(function(n){var i,r;(function(n){n.notAvailableFormat=t("StorageAccount_Name_notAvailableFormat")})(i=n.Name||(n.Name={})),(function(n){var i,r,u,f,e;(function(n){n.name=t("StorageAccount_Type_StandardZoneRedundant_name")})(i=n.StandardZoneRedundant||
(n.StandardZoneRedundant={})),(function(n){n.name=t("StorageAccount_Type_StandardReadAccessGeoRedundant_name")})(r=n.StandardReadAccessGeoRedundant||(n.StandardReadAccessGeoRedundant={})),(function(n){n.name=t("StorageAccount_Type_StandardLocallyRedundant_name")})(u=n.StandardLocallyRedundant||(n.StandardLocallyRedundant={})),(function(n){n.name=t("StorageAccount_Type_StandardGeoRedundant_name")})(f=n.StandardGeoRedundant||(n.StandardGeoRedundant={})),(function(n){n.name=t("StorageAccount_Type_PremiumLocallyRedundant_name")})(e=n.PremiumLocallyRedundant||(n.PremiumLocallyRedundant={}))})(r=n.Type||(n.Type={}))})(f=n.StorageAccount||(n.StorageAccount={}));n.noContent=t("noContent");n.uniqueResourceNameValidation=t("uniqueResourceNameValidation"),(function(n){n.quotaRetrievalFailed=t("Quota_quotaRetrievalFailed");n.full=t("Quota_full")})(e=n.Quota||(n.Quota={}));n.notConfigured=t("notConfigured"),(function(n){var i,r,u;(function(n){var i;(function(n){n.groupNameRegexValidation=t("Create_ResourceGroup_CreateNew_groupNameRegexValidation");
n.groupNameLengthValidation=t("Create_ResourceGroup_CreateNew_groupNameLengthValidation")})(i=n.CreateNew||(n.CreateNew={}));n.title=t("Create_ResourceGroup_title");n.filteredSubscription=t("Create_ResourceGroup_filteredSubscription")})(i=n.ResourceGroup||(n.ResourceGroup={}));n.buttonLabel=t("Create_buttonLabel"),(function(n){n.title=t("Create_Location_title");n.filtered=t("Create_Location_filtered")})(r=n.Location||(n.Location={})),(function(n){n.title=t("Create_Subscription_title");n.lockedResourceGroup=t("Create_Subscription_lockedResourceGroup")})(u=n.Subscription||(n.Subscription={}))})(o=n.Create||(n.Create={})),(function(n){n.name=t("ColumnName_name")})(s=n.ColumnName||(n.ColumnName={})),(function(n){n.updating=t("BladeStatus_updating");n.disabled=t("BladeStatus_disabled");n.deleting=t("BladeStatus_deleting")})(h=n.BladeStatus||(n.BladeStatus={}));n.subnetRange=t("subnetRange");n.durationSeconds=t("durationSeconds");n.durationSecond=t("durationSecond");n.durationMinutes=t("durationMinutes");
n.durationMinute=t("durationMinute");n.durationMilliseconds=t("durationMilliseconds");n.durationMillisecond=t("durationMillisecond");n.durationHours=t("durationHours");n.durationHour=t("durationHour");n.durationDays=t("durationDays");n.durationDay=t("durationDay"),(function(n){n.reconnectingMessage=t("LogStream_reconnectingMessage");n.connectionLostMessage=t("LogStream_connectionLostMessage");n.connectingMessage=t("LogStream_connectingMessage")})(c=n.LogStream||(n.LogStream={}));n.reasonMessage=t("reasonMessage"),(function(n){n.invalidArgument=t("Validation_invalidArgument");var i;(function(n){n.regexNoSpecialCharacters=t("Validation_ResourceGroup_regexNoSpecialCharacters");n.unique=t("Validation_ResourceGroup_unique");n.regex=t("Validation_ResourceGroup_regex");n.maxLength=t("Validation_ResourceGroup_maxLength")})(i=n.ResourceGroup||(n.ResourceGroup={}));n.required=t("Validation_required");n.confirmPassword=t("Validation_confirmPassword")})(l=n.Validation||(n.Validation={})),(function(n){var
i;(function(n){n.title=t("Field_ConfirmPassword_title")})(i=n.ConfirmPassword||(n.ConfirmPassword={}))})(a=n.Field||(n.Field={}));n.loading=t("loading");n.certificateValidation=t("certificateValidation");n.zettaBytesLong=t("zettaBytesLong");n.zettaBytes=t("zettaBytes");n.yottaBytesLong=t("yottaBytesLong");n.yottaBytes=t("yottaBytes");n.teraBytesLong=t("teraBytesLong");n.teraBytes=t("teraBytes");n.petaBytesLong=t("petaBytesLong");n.petaBytes=t("petaBytes");n.megaBytesLong=t("megaBytesLong");n.megaBytes=t("megaBytes");n.kiloBytesLong=t("kiloBytesLong");n.kiloBytes=t("kiloBytes");n.gigaBytesLong=t("gigaBytesLong");n.gigaBytes=t("gigaBytes");n.genericErrorMessage=t("genericErrorMessage");n.exaBytesLong=t("exaBytesLong");n.exaBytes=t("exaBytes"),(function(n){var i,r;(function(n){n.fieldMustBeUnique=t("EditableGrid_Validation_fieldMustBeUnique")})(i=n.Validation||(n.Validation={})),(function(n){n.maxDisplayFormat=t("EditableGrid_MultiselectDropdown_maxDisplayFormat");n.displayFormat=t("EditableGrid_MultiselectDropdown_displayFormat")})
(r=n.MultiselectDropdown||(n.MultiselectDropdown={}));n.hiddenForSecurity=t("EditableGrid_hiddenForSecurity")})(v=n.EditableGrid||(n.EditableGrid={}));n.bytesLong=t("bytesLong");n.bytes=t("bytes")})(t=n.Resources||(n.Resources={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n,t){var r=this,i=new MsPortalFx.Hubs.Notifications.ClientNotification({title:n.inProgressTitle,description:n.inProgressMessage,status:MsPortalFx.Hubs.Notifications.NotificationStatus.InProgress,asset:n.assetInfo});i.publish();t.then((function(){i.title=n.successTitle;i.description=n.successMessage;i.status=MsPortalFx.Hubs.Notifications.NotificationStatus.Success;i.publish()}));t.progress((function(t){i.title=n.inProgressTitle;i.description=n.inProgressMessage;i.status=MsPortalFx.Hubs.Notifications.NotificationStatus.InProgress;t.correlationId&&(i.correlationIds.push(t.correlationId),i.publish())}));t.catch((function(t){var u=r.getErrorMessage(t),f={errorMsg:
u};i.title=n.failureTitle;i.description=n.failureMessage.format(f);i.status=MsPortalFx.Hubs.Notifications.NotificationStatus.Error;i.publish()}))}function u(t,i){var u=this,r;n.Validation.Requires.Argument("notificationParams",t).notNullOrEmpty();n.Validation.Requires.Argument("operationPromise",i).notNullOrEmpty();r=new MsPortalFx.Hubs.Notifications.ClientNotification({title:t.inProgressTitle,description:t.inProgressMessage,status:MsPortalFx.Hubs.Notifications.NotificationStatus.InProgress,asset:t.assetInfo});r.publish();i.done((function(){r.title=t.successTitle;r.description=t.successMessage;r.status=MsPortalFx.Hubs.Notifications.NotificationStatus.Information;r.publish()})).progress((function(){r.title=t.inProgressTitle;r.description=t.inProgressMessage;r.status=MsPortalFx.Hubs.Notifications.NotificationStatus.InProgress;r.publish()})).fail((function(n){var i=u.getErrorMessage(n),f={errorMsg:i};r.title=t.failureTitle;r.description=t.failureMessage.format(f);r.status=MsPortalFx.Hubs.Notifications.
NotificationStatus.Error;r.publish()}))}function f(t,i){var u=this,r;n.Validation.Requires.Argument("notificationParams",t).notNullOrEmpty();n.Validation.Requires.Argument("operationPromise",i).notNullOrEmpty();r=new MsPortalFx.Hubs.Notifications.ClientNotification({title:t.inProgressTitle,description:t.inProgressMessage,status:MsPortalFx.Hubs.Notifications.NotificationStatus.InProgress,asset:t.assetInfo});r.publish();i.then((function(){r.title=t.successTitle;r.description=t.successMessage;r.status=MsPortalFx.Hubs.Notifications.NotificationStatus.Success;r.publish()}),(function(n){var i=u.getErrorMessage(n),f={errorMsg:i};r.title=t.failureTitle;r.description=t.failureMessage.format(f);r.status=MsPortalFx.Hubs.Notifications.NotificationStatus.Error;r.publish()}));i.progress((function(){r.title=t.inProgressTitle;r.description=t.inProgressMessage;r.status=MsPortalFx.Hubs.Notifications.NotificationStatus.InProgress;r.publish()}))}function e(t){var i;return i=typeof t=="string"?t:this.getXhrError(
t),i||(i=n.Resources.genericErrorMessage),i}function o(n){if(!n)return"";if(n.responseJSON)return n.responseJSON.Message||n.responseJSON.message||n.responseJSON.error&&n.responseJSON.error.message||"";try{if(n.responseText){var t=JSON.parse(n.responseText);if(t)return t.Message||t.message||t.responseJSON.error&&t.responseJSON.error.message||""}}catch(i){}return""}var i=(function(){function n(n,t,i,r,u,f,e){this._inProgressTitle=u;this._inProgressMessage=f;this._successTitle=n;this._successMessage=t;this._failureTitle=i;this._failureMessage=r;this.assetInfo=e}return Object.defineProperty(n.prototype,"inProgressTitle",{get:function(){return this._inProgressTitle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inProgressMessage",{get:function(){return this._inProgressMessage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"successTitle",{get:function(){return this._successTitle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"successMessage",
{get:function(){return this._successMessage},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"failureTitle",{get:function(){return this._failureTitle},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"failureMessage",{get:function(){return this._failureMessage},enumerable:!0,configurable:!0}),n})();t.NotificationSettings=i;t.trackArmOperationState=r;t.trackJQueryXhrOperation=u;t.trackOperationPromise=f;t.getErrorMessage=e;t.getXhrError=o})(i=t.NotificationsV3||(t.NotificationsV3={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={}));var Arm=MsPortalFx.Azure.ResourceManager,CoreUtil=ExtensionCore.UI.NotificationsV3,FxForms=MsPortalFx.ViewModels.Forms,ExtensionCore;(function(n){var t;(function(t){"use strict";var r=(function(){function n(){this.subscription=ko.observable();this.location=ko.observable();this.resourceGroup=ko.observable({createNew:!0,value:{name:null,location:null}})}return n})(),u,i,f,e;t.CreateAssetBasicsDataModel=r;u=(function(n){function t(
){n.apply(this,arguments);this.id=ko.observable();this.name=ko.observable()}return __extends(t,n),t})(r);t.CreateAssetDataModel=u;i=(function(i){function r(r,u,f,e){var h=this,l,c,o,s;i.call(this,r);this._options=f;this._galleryItem=ko.observable();this._resourceTypesObservable=ko.observable();this._locationsBySubscription={};this._container=r;e&&e.galleryOptions&&e.galleryOptions.galleryItem&&this._galleryItem(e.galleryOptions.galleryItem);this._resourceTypesObservable([].concat(this._getLocationsResourceType()));this._configureControlsBase();l=this.valid;this.valid=ko.pureComputed((function(){return l()&&h.subscriptionDropDown.valid()&&h.resourceGroupDropDown.valid()&&h.locationDropDown.valid()}));c=t.getQuotasAsyncValidator(this._container,this._options,this.subscriptionDropDown,this.locationDropDown,this._updateUsages.bind(this));this._options.useGenericActionBar?(o=new MsPortalFx.ViewModels.ActionBars.GenericActionBar.ViewModel(r),this._options.useDefaultGenericActionBarLabel||o.actionButtonLabel(
n.Resources.Create.buttonLabel),this._options.usagesToCheck&&(o.enableErrorInfoBox(!0),o.asyncValidations.push(c)),this.actionBar=o):(s=new MsPortalFx.ViewModels.ActionBars.CreateActionBar.ViewModel(r),this._options.usagesToCheck&&(s.enableErrorInfoBox(!0),s.asyncValidations.push(c)),this.actionBar=s);this._validActionBarSubscription=this.valid.subscribe(r,this.actionBar.valid)}return __extends(r,i),r.prototype._getLocationsResourceType=function(){return!this._options.resourceUsesGlobalLocation?this._options.providerName+"/"+this._options.resourceType:"Microsoft.Resources/resourceGroups"},r.prototype._updateUsages=function(){},r.prototype._getResourceGroupDropDownOptions=function(){return{options:ko.observableArray([]),form:this,accessor:this.createEditScopeAccessor((function(n){return n.resourceGroup})),label:ko.observable(ClientResources.Create.ResourceGroup.title),subscriptionIdObservable:this.subscriptionDropDown.subscriptionId,validations:ko.observableArray([new MsPortalFx.ViewModels.
RequiredValidation])}},r.prototype._getSubscriptionDropDownOptions=function(){return{form:this,accessor:this.createEditScopeAccessor((function(n){return n.subscription})),options:ko.observableArray([]),filterByGalleryItem:this._galleryItem,validations:ko.observableArray([new MsPortalFx.ViewModels.RequiredValidation]),resourceProviders:ko.observable([this._options.providerName])}},r.prototype._getLocationDropDownOptions=function(){return{subscriptionIdObservable:this.subscriptionDropDown.subscriptionId,resourceTypesObservable:this._resourceTypesObservable,form:this,accessor:this.createEditScopeAccessor((function(n){return n.location})),options:ko.observableArray([]),validations:ko.observableArray([new MsPortalFx.ViewModels.RequiredValidation])}},r.prototype._configureControlsBase=function(){this.subscriptionDropDown=new MsPortalFx.Azure.Subscriptions.DropDown(this._container,this._getSubscriptionDropDownOptions());this.locationDropDown=new MsPortalFx.Azure.Locations.DropDown(this._container,
this._getLocationDropDownOptions());this.resourceGroupDropDown=new MsPortalFx.Azure.ResourceGroups.DropDown(this._container,this._getResourceGroupDropDownOptions())},r})(MsPortalFx.ViewModels.Forms.Form.ViewModel);t.CreateBasicsViewModel=i;f=(function(i){function r(n,r,u){var f=this,e;this._container=n;this._options=u;this._configureParameterProvider();this.editScope=this.parameterProvider.editScope;this._defaultsComputeInProgress=ko.observable(!1);i.call(this,n,r,u);this._configureNameTextBox();t.initArmProvisioner(this,n,r);e=this.valid;this.valid=ko.pureComputed((function(){return e()&&f.nameTextBox.valid()&&!f._defaultsComputeInProgress()}));this._validActionBarSubscription.dispose();this._validActionBarSubscription=this.valid.subscribe(n,this.actionBar.valid);this._wireEventSubscriptions();this._defaultsComputeInProgress.subscribe(this._container,(function(n){f.nameTextBox.enabled(!n)}))}return __extends(r,i),r.prototype.supplyTemplateDeploymentOptions=function(n){return t.supplyTemplateDeploymentOptionsHelper(
this,n)},r.prototype._processProvisioningConfig=function(){return Q()},r.prototype._computeDefaults=function(n){return Q(n)},r.prototype.getDeploymentTemplateFileUri=function(){throw new AbstractMethodError("CreateAssetViewModel","getDeploymentTemplateFileUri");},r.prototype.getDeploymentTemplateJson=function(){throw new AbstractMethodError("CreateAssetViewModel","getDeploymentTemplateJson");},r.prototype.getDeploymentTemplateParameters=function(){throw new AbstractMethodError("CreateAssetViewModel","getDeploymentTemplateParameters");},r.prototype._getEmptyDefault=function(){return new this._options.createAssetDataModelType},r.prototype._configureParameterProvider=function(){var n=this,t=null;this._options.specifyParameterProviderMetadataType&&(t=this._options.createAssetDataModelType.metadata.name);this.parameterProvider=new MsPortalFx.ViewModels.ParameterProvider(this._container,{editScopeMetadataType:t,mapIncomingDataForEditScopeAsync:function(){var t=Q.defer();return n._defaultsComputeInProgress(
!0),n._processProvisioningConfig().then((function(){return n._computeDefaultsBase()})).then((function(i){n._defaultsComputeInProgress(!1);t.resolve(i)}),(function(i){n._defaultsComputeInProgress(!1);t.resolve(n._getEmptyDefault());MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"CreateAssetViewModel.mapIncomingDataForEditScopeAsync","Failed to get subscription defaults: {0}.".format(FxImpl.Diagnostics.getLogFriendlyMessage(i)))})),t.promise},mapOutgoingDataForCollector:function(){return n.supplyTemplateDeploymentOptions(n._dataModel)}})},r.prototype._configureNameTextBox=function(){var t=this;this.nameTextBox=new FxForms.TextBox.ViewModel(this._container,this,this.createEditScopeAccessor((function(n){return n.name})),{label:ko.observable(ClientResources.ColumnName.name),validations:ko.observableArray([new MsPortalFx.ViewModels.RequiredValidation,new MsPortalFx.ViewModels.CustomValidation("",function(i){return n.Validation.checkNameAvailabilityCreate(i,
t.subscriptionDropDown.value,{name:t.resourceGroupDropDown.value()&&t.resourceGroupDropDown.value().value&&t.resourceGroupDropDown.value().value.name,isNew:t.resourceGroupDropDown.value()&&t.resourceGroupDropDown.value().createNew},t._options)})])})},r.prototype._wireEventSubscriptions=function(){var n=this;this._defaultsComputeInProgress.subscribe(this._container,(function(){n.subscriptionDropDown.enabled(!n._defaultsComputeInProgress());n.locationDropDown.enabled(!n._defaultsComputeInProgress());n.resourceGroupDropDown.enabled(!n._defaultsComputeInProgress())}));this.resourceGroupDropDown.value.subscribe(this._container,(function(t){t&&!t.createNew&&t.value.name&&n.nameTextBox.value()&&n.nameTextBox.triggerValidation()}))},r.prototype._computeDefaultsBase=function(){var t=this._getEmptyDefault(),n=this.armProvisioner.armProvisioningConfig&&this.armProvisioner.armProvisioningConfig.galleryCreateOptions;return n&&(this._galleryItem(n.galleryItem),n.subscriptionId&&t.subscription({subscriptionId:
n.subscriptionId,displayName:n.subscriptionDisplayName,uniqueDisplayName:null,tenantId:null,subscriptionPolicies:null,state:null,authorizationSource:null}),n.resourceGroupLocation&&t.location({name:n.resourceGroupLocation,displayName:n.resourceGroupLocationDisplayName})),t.subscription()&&t.location()||MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"CreateAssetViewModel._computeDefaultsBase","Compute default base couldn't assign a value to either location or subscription. Defaults object: {0}.".format(FxImpl.Diagnostics.getLogFriendlyMessage(t))),this._computeDefaults(t)},Object.defineProperty(r.prototype,"_dataModel",{get:function(){return this.editScope()&&this.editScope().root?this.editScope().root:null},enumerable:!0,configurable:!0}),r})(i);t.CreateAssetViewModel=f;e=(function(n){function i(i,r,u){n.call(this,i);this._options=u;this._wizardReady=ko.observable(!1);this._wizardSelectable=new MsPortalFx.ViewModels.Selectable;this._container=
i;this._configureParameterProvider();this.editScope=this.parameterProvider.editScope;this.actionBar=new MsPortalFx.ViewModels.ActionBars.CreateActionBar.ViewModel(i);this.actionBar.showActionBar(!1);t.initArmProvisioner(this,i,r,!0);this.wizard=new MsPortalFx.ViewModels.Controls.Wizard.ViewModel(r&&r.content)}return __extends(i,n),i.prototype.getDeploymentTemplateFileUri=function(){throw new AbstractMethodError("CreateAssetWizardViewModelBase","getDeploymentTemplateFileUri");},i.prototype.getDeploymentTemplateJson=function(){throw new AbstractMethodError("CreateAssetWizardViewModelBase","getDeploymentTemplateJson");},i.prototype.getDeploymentTemplateParameters=function(){throw new AbstractMethodError("CreateAssetWizardViewModelBase","getDeploymentTemplateParameters");},i.prototype.supplyTemplateDeploymentOptions=function(n){return t.supplyTemplateDeploymentOptionsHelper(this,n)},i.prototype.supplyTemplateDeploymentOptionsSafe=function(n){var t=null;try{t=this.supplyTemplateDeploymentOptions(
n)}catch(i){MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"CreateAssetWizardViewModelBase.supplyTemplateDeploymentOptionsSafe","supplyTemplateDeploymentOptions threw an exception. Maybe the wizard called it before the data was ready? Details: {0}".format(FxImpl.Diagnostics.getLogFriendlyMessage(i)))}return t},i.prototype._initializeWizard=function(n){var t=this;ko.reactor(n,(function(){t._wizardSelectable.isSelected(!1);t._wizardSelectable.isSelected(!!t.wizard.selection()&&t._wizardReady())}));this.wizard.selection.subscribe(n,(function(n){!n&&t._currentStepId&&(t.wizard.stepOutput({status:t.wizard.steps().first((function(n){return n.stepId===t._currentStepId})).status(),action:4,stepId:t._currentStepId}),t._currentStepId=null,t._wizardReady(!0))}));this.wizard.mode=MsPortalFx.ViewModels.Controls.Wizard.WizardMode.Sequential},i.prototype._openFirstStep=function(){var n=this;this.editScope.subscribe(this._container,(function(){n.wizard.initialize(
)}))},i.prototype._getEmptyDefault=function(){return new this._options.createAssetDataModelType},i.prototype._configureParameterProvider=function(){var n=this,t=null;this._options.specifyParameterProviderMetadataType&&(t=this._options.createAssetDataModelType.metadata.name);this.parameterProvider=new MsPortalFx.ViewModels.ParameterProvider(this._container,{editScopeMetadataType:t,mapIncomingDataForEditScope:function(){return n._wizardReady(!0),n._getEmptyDefault()},mapOutgoingDataForCollector:function(){return n.supplyTemplateDeploymentOptions(n._dataModel)}})},Object.defineProperty(i.prototype,"_dataModel",{get:function(){return this.editScope()&&this.editScope().root?this.editScope().root:null},enumerable:!0,configurable:!0}),i})(FxForms.Form.ViewModel);t.CreateAssetWizardViewModelBase=e})(t=n.Create||(n.Create={}))})(ExtensionCore||(ExtensionCore={}));FxViewModels=MsPortalFx.ViewModels;FxUtilities=MsPortalFx.Base.Utilities,(function(n){var t;(function(t){"use strict";function i(n,t,i,r)
{n.armProvisioner=new Arm.Provisioner(t,i,{supplyTemplateDeploymentOptions:function(){var t=n.supplyTemplateDeploymentOptions(n._dataModel);return t?t.resourceGroupName||MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"CreateBaseHelpers.initArmProvisioner.supplyTemplateDeploymentOptions","FATAL: Deployment options has no RG selection! Deployment name: '{0}', Subscription ID: '{1}', Template: {2}.".format(t.deploymentName,t.subscriptionId,t.templateLinkUri||t.templateJson)):MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"CreateBaseHelpers.initArmProvisioner.supplyTemplateDeploymentOptions","FATAL: Deployment options provided to armProvisioner is null!"),Q(t)},actionBar:n.actionBar,parameterProvider:n.parameterProvider,createFeatures:r?Arm.Provisioner.CreateFeatures.DisableArmValidation:Arm.Provisioner.CreateFeatures.EnableArmValidation})}function r(t,i){var f=t.armProvisioner.armProvisioningConfig&&t.
armProvisioner.armProvisioningConfig.galleryCreateOptions,l=i.name(),e=i.subscription().subscriptionId,o=i.resourceGroup().value.name,a=i.location().name,s=t._options.providerName,v=t._options.resourceType,y="/subscriptions/"+e+"/resourcegroups/"+o+"/providers/"+s+"/"+v+"/"+l,p=t.getDeploymentTemplateParameters(),w=n.Utilities.getDeploymentName(f.deploymentName),u={subscriptionId:e,resourceGroupName:o,resourceGroupLocation:a,parameters:p,deploymentName:w,resourceProviders:[s],resourceId:y},r=null,c;try{r=t.getDeploymentTemplateJson();u.templateJson=r}catch(h){h instanceof AbstractMethodError||MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"CreateBaseHelpers.supplyTemplateDeploymentOptionsHelper","Base class method getDeploymentTemplateJson() was overridden in the derived class, but it threw an unexpected exception.Error was: {0}.".format(FxImpl.Diagnostics.getLogFriendlyMessage(h)))}return r||(c=t.getDeploymentTemplateFileUri(),r=f.deploymentTemplateFileUris[
c],u.templateLinkUri=r),u}function u(n,t,i,r){var u=new FxViewModels.Selectable,f,e;t.registerForDispose(u);f=t;typeof f.registerSelectable=="function"&&f.registerSelectable(t.createChildLifetime(),FxUtilities.newGuid(),u,{openInContextPane:!0,persistentContextPane:!0});n.enableErrorInfoBox(!0);e={validate:function(){var e=MsPortalFx.Resources.Strings.Azure.ResourceManager.Provisioner,n=e.ArmValidation,o=Q().then((function(){return Arm.Deployments.validateTemplate(i()).then((function(){return FxViewModels.getValidationResult()})).catch((function(t){return t.status===0?(MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"CreateBaseHelpers.enableDeploymentValidation-{0}".format(r),"A network error occurred. Error details: {0}".format(FxImpl.Diagnostics.getLogFriendlyMessage(t))),FxViewModels.getValidationResult(n.networkFailure)):{valid:!1,message:n.validationFailed,blade:{extension:MsPortalFx.Base.Constants.ExtensionNames.Hubs,detailBlade:"ArmErrorsBlade",
detailBladeInputs:{errors:t.error}}}}))})),u=Q.timeout(o,Arm.Provisioner.armValidationTimeout).catch((function(){return MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"CreateBaseHelpers.enableDeploymentValidation-{0}".format(r),"Deployment validation timeout out. Returning validation success and submitting deployment."),FxViewModels.getValidationResult()})),f=t;return f.operations&&f.operations.add(u,{blockUi:!0,shieldType:FxViewModels.ShieldType.Translucent}),u}};n.infoBoxSelectable=u;n.asyncValidations.push(e)}function f(t,i,r,u,f){return{validate:function(){var e=Q.defer(),o=r.value(),s=u.value();return f&&f(),i&&!i.usagesToCheck||i.usagesToCheck().length===0?e.resolve(FxViewModels.getValidationResult()):o&&o.subscriptionId&&s&&s.name&&i&&i.providerName?n.Utilities.ListUsages(o.subscriptionId,i.providerName,s.name,t).then((function(t){var r=i.usagesToCheck().first((function(i){var r=t.first((function(t){return StringEx.equals(t.name.value,n.DataModels.
UsagesType[i],StringComparison.IgnoreCase)})),u;return r&&r.currentValue>=r.limit?(u=ClientResources.Quota.full.format(r.name.localizedValue,r.currentValue,r.name.localizedValue),e.resolve(FxViewModels.getValidationResult(u)),!0):!1}));r||e.resolve(FxViewModels.getValidationResult())})).catch((function(n){Diagnostics.Log.writeEntry(Diagnostics.LogEntryLevel.Error,"CreateBaseHelpers.getQuotasAsyncValidator","Unable to retrieve quotas for subscription {0}. Error was {1}".format(r.value().subscriptionId,FxImpl.Diagnostics.getLogFriendlyMessage(n)));e.resolve(FxViewModels.getValidationResult())})):e.resolve(FxViewModels.getValidationResult()),e.promise}}}t.initArmProvisioner=i;t.supplyTemplateDeploymentOptionsHelper=r;t.enableDeploymentValidation=u;t.getQuotasAsyncValidator=f})(t=n.Create||(n.Create={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(){function i(t,i,r){this._hubsExtensionName="HubsExtension";this.premiumRegions=["australiaeast","australiasoutheast",
"brazilsouth","canadacentral","canadaeast","centralindia","centralus","chinaeast","chinanorth","eastasia","eastus","eastus2","japaneast","japanwest","northeurope","northcentralus","southcentralus","southeastasia","southindia","usgov","westcentralus","westeurope","westus","westus2","germanycentral","germanynortheast","usgoveast","usgovvirginia","usgoviowa","koreacentral","koreasouth",];this.subscriptionStepId="SubscriptionStep";this._subscriptionPickerBlade="SubscriptionPickerBlade";this._originalSubscriptionValue=ko.observable("");this._editedSubscriptionValue=ko.observable("");this.subscriptionList=ko.observableArray([]);this.resourceGroupStepId="ResourceGroupStep";this._resourceGroupPickerBlade="ResourceGroupPickerBlade";this._newResourceGroupBlade="CreateResourceGroupBlade";this._originalResourceGroupValue=ko.observable("");this._editedResourceGroupValue=ko.observable("");this.resourceGroupList=ko.observableArray([]);this._createResourceGroup=!1;this.locationStepId="LocationStep";this.
_regionPickerBlade="RegionPickerBlade";this._originalLocationValue=ko.observable("");this._editedLocationValue=ko.observable("");this._selectedLocation=ko.observable();this._regions=ko.observableArray([]);this._subscriptionMappedRegions=ko.observable();this.locationFilterReason=ko.observable(n.Resources.Create.Location.filtered);this.dataModel=ko.observable();this._valueConstrained={};this._stepState={};this.resourceGroupLocationFilter=ko.observable("");this.resourceGroupFilterReason=ko.observable(n.Resources.Create.ResourceGroup.filteredSubscription);this._lifetimeManager=t;this._parentForm=i;var u={defaultToNewResourceGroup:!1,generateResourceGroupName:!0,resourceGroupPrefix:"",newResourceGroupOnly:!1,regionsAllowed:[]};this._options=r?$.extend({},u,r):u;this._initSelectors()}return i.prototype._initSelectors=function(){this.subscriptionStepSelector=new MsPortalFx.ViewModels.Forms.Selector.ViewModel(this._lifetimeManager,{label:ko.observable(n.Resources.Create.Subscription.title),selectedValue:
{detailBlade:this._subscriptionPickerBlade,extension:this._hubsExtensionName,detailBladeInputs:{}}});this.subscriptionStepSelector.defaultValue(undefined);this._valueConstrained[this.subscriptionStepId]=!1;this._stepState[this.subscriptionStepId]=t.ChevronState.defaultValue;this.resourceGroupStepSelector=new MsPortalFx.ViewModels.Forms.Selector.ViewModel(this._lifetimeManager,{label:ko.observable(n.Resources.Create.ResourceGroup.title),selectedValue:{detailBlade:this._resourceGroupPickerBlade,extension:this._hubsExtensionName,detailBladeInputs:{}}});this.resourceGroupStepSelector.defaultValue(undefined);this._valueConstrained[this.resourceGroupStepId]=!1;this._stepState[this.resourceGroupStepId]=t.ChevronState.defaultValue;this.locationStepSelector=new MsPortalFx.ViewModels.Forms.Selector.ViewModel(this._lifetimeManager,{label:ko.observable(n.Resources.Create.Location.title),selectedValue:{detailBlade:this._regionPickerBlade,extension:this._hubsExtensionName,detailBladeInputs:{}}});this.
locationStepSelector.defaultValue(undefined);this._valueConstrained[this.locationStepId]=!1;this._stepState[this.locationStepId]=t.ChevronState.defaultValue;this._setupDisplayTextComputeds()},i.prototype.onInputsReceived=function(t){var i=this;return this.dataModel(t),Q.all([n.Csm.getSubscriptionsAsync(),n.Csm.getResourceGroupsAsync(),n.Utilities.getLocations().then((function(n){i._locationsMap=n;return}))]).then((function(n){if(n.length<2)throw new Error("Results not of proper length");i.subscriptionList(n[0].slice());i.resourceGroupList(n[1]);(!i.resourceGroupList().length||i._options.newResourceGroupOnly)&&(i._createResourceGroup=!0,i.resourceGroupStepSelector.selectable.selectedValue({detailBlade:i._newResourceGroupBlade,extension:i._hubsExtensionName,detailBladeInputs:{}}))}))},i.prototype.setDefaultValues=function(t,i,r){var e=this,u,o,s,f;if(r===void 0&&(r=!1),this.subscriptionList()&&this.resourceGroupList()){if(o=this.resourceGroupList().first((function(i){var u=n.Csm.ResourceUri.parseResourceGroupId(
i.id);return(!r||e.premiumRegions.indexOf(i.location.toLowerCase())!==-1)&&(!t.galleryParameters.resourceGroupName()||!t.galleryParameters.subscriptionId()||StringEx.equals(u.subscriptionId,t.galleryParameters.subscriptionId(),StringComparison.IgnoreCase)&&StringEx.equals(u.name,t.galleryParameters.resourceGroupName(),StringComparison.IgnoreCase))})),this._options.defaultToNewResourceGroup||this._options.newResourceGroupOnly||!o){if(f=null,this.subscriptionList().forEach((function(u){var o=i[u.subscriptionId];o&&o.length>0&&!StringEx.equals(u.state,n.Constants.SubscriptionStatus.Disabled,StringComparison.IgnoreCase)&&(!r||o.some((function(n){return e.premiumRegions.indexOf(n.id.toLowerCase())!==-1})))&&(!f||StringEx.equals(u.subscriptionId,t.galleryParameters.subscriptionId(),StringComparison.IgnoreCase))&&(f=u)})),f||(MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Create.setDefaultValues","The local variable 'selectedSubscription' was null, this may mean no valid subs exist, or there are no subs with valid locations."),
f=this.subscriptionList().first()),!u&&i&&i[f.subscriptionId]){var c=i[f.subscriptionId],h=c.filter((function(n){return e._isRegionAllowed(n.id)})),l=r?h.filter((function(n){return e.premiumRegions.indexOf(n.id)!==-1})):h,a=t.galleryParameters.resourceGroupLocation();u=l.first((function(n){return StringEx.equals(n.id,t.galleryParameters.resourceGroupLocation(),StringComparison.IgnoreCase)}))||l.first()||h.first()||c.first()}t.galleryParameters.subscriptionId(f.subscriptionId);this._options.generateResourceGroupName&&t.galleryParameters.resourceGroupName(this.getDefaultResourceGroupName(f.subscriptionId,this._options.resourceGroupPrefix))}else s=n.Csm.ResourceUri.parseResourceGroupId(o.id),t.galleryParameters.resourceGroupName(s.name),t.galleryParameters.subscriptionId(s.subscriptionId),i&&i[t.galleryParameters.subscriptionId()]&&(u=i[t.galleryParameters.subscriptionId()].first((function(n){return StringEx.equals(n.id,o.location,StringComparison.IgnoreCase)&&e._isRegionAllowed(n.id)})),u||(u=i[
t.galleryParameters.subscriptionId()].first((function(n){return!r||e.premiumRegions.indexOf(n.id.toLowerCase())!==-1}))));u&&(this._selectedLocation(u),this.locationStepSelector.value(u.displayName),this._originalLocationValue(u.displayName),this._subscriptionMappedRegions(i))}else MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ExtensionCore.Create.setDefaultValues","The subscription list and/or group list was empty. This is unexpected.");return u||MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ExtensionCore.Create.setDefaultValues","The local variable 'region' was null prior to returning. This is unexpected. There may be no valid subscriptions, and/or no subscriptions with valid locations."),u},i.prototype._setupDisplayTextComputeds=function(){var t=this;this.subscriptionStepSelector.displayText=ko.pureComputed((function(){return t.dataModel&&t.dataModel()&&t.dataModel().galleryParameters.subscriptionId(
)&&t._subscriptionMappedRegions()?t._getSubscriptionName():n.Resources.loading}));this.resourceGroupStepSelector.displayText=ko.pureComputed((function(){return t.dataModel&&t.dataModel()&&t.dataModel().galleryParameters.resourceGroupName()?t.dataModel().galleryParameters.resourceGroupName():n.Resources.loading}));this.locationStepSelector.displayText=ko.pureComputed((function(){return t.locationStepSelector.value()&&t._locationsMap?n.Utilities.getLocationDisplayName(t.locationStepSelector.value(),t._locationsMap):n.Resources.loading}))},i.prototype.getSubscriptionStepInputsV=function(){var t=new HubsExtension.Azure.SubscriptionPickerDataModel,n={};return t.subscriptionPicker.subscriptionId(this.dataModel().galleryParameters.subscriptionId()),t.subscriptionPicker.subscriptionName(this._getSubscriptionName()),n.inputParameters=MsPortalFx.ViewModels.ParameterCollectionV2.Utilities.modelToParameters(t),n.inputMetadata={},n.options={},n},i.prototype.getSubscriptionStepInputs=function(){var n=new
HubsExtension.Azure.SubscriptionPickerDataModel,t=new MsPortalFx.ViewModels.ParameterCollection.ParameterCollectionInput;return n.subscriptionPicker.subscriptionId(this.dataModel().galleryParameters.subscriptionId()),n.subscriptionPicker.subscriptionName(this._getSubscriptionName()),t.inputParameters=MsPortalFx.ViewModels.ParameterCollection.Models.modelToParameters(n),t},i.prototype._getSubscriptionName=function(){var t=this,n;return this.dataModel&&this.dataModel()&&this.dataModel().galleryParameters.subscriptionId()&&(n=this.subscriptionList().first((function(n){return StringEx.equals(n.subscriptionId,t.dataModel().galleryParameters.subscriptionId(),StringComparison.IgnoreCase)})),n)?n.displayName:null},i.prototype.setSubscriptionStepOutputs=function(i){var f=this,e=i.outputParameters||i,r=e.subscriptionPicker.subscriptionId,o=this.subscriptionList().first((function(n){return StringEx.equals(n.subscriptionId,r,StringComparison.IgnoreCase)})),u;this.dataModel().galleryParameters.subscriptionId(
r);this.subscriptionStepSelector.value(r);this._ensureCorrectRegionIsSet(r);this._stepState[this.subscriptionStepId]=t.ChevronState.existingValue;this._valueConstrained[this.resourceGroupStepId]=!0;this._stepState[this.resourceGroupStepId]!==t.ChevronState.defaultValue||this._options.newResourceGroupOnly||(u=this.resourceGroupList().first((function(t){var i=n.Csm.ResourceUri.parseResourceGroupId(t.id);return StringEx.equals(i.subscriptionId,r,StringComparison.IgnoreCase)&&StringEx.equals(i.name,f.dataModel().galleryParameters.resourceGroupName(),StringComparison.IgnoreCase)})),u||(u=this.resourceGroupList().first((function(t){var i=n.Csm.ResourceUri.parseResourceGroupId(t.id);return StringEx.equals(i.subscriptionId,r,StringComparison.IgnoreCase)}))),u?this.dataModel().galleryParameters.resourceGroupName(u.name):this._options.generateResourceGroupName&&this.dataModel().galleryParameters.resourceGroupName(this.getDefaultResourceGroupName(r,this._options.resourceGroupPrefix)))},i.prototype.getResourceGroupStepInputsV=
function(){var n={},t=new HubsExtension.Azure.ResourceGroupPickerDataModel,i=new HubsExtension.Azure.ResourceGroupDataModel,r=this.resourceGroupList().length===0,u=r?"resourceGroup":"resourceGroupPicker";return r?(i.resourceGroup.resourceGroupName(this.dataModel().galleryParameters.resourceGroupName()),i.resourceGroup.subscriptionId(this.dataModel().galleryParameters.subscriptionId()),n.inputParameters=MsPortalFx.ViewModels.ParameterCollection.Models.modelToParameters(i)):(t.resourceGroupPicker.isNewResourceGroup(this._createResourceGroup?"true":"false"),t.resourceGroupPicker.resourceGroupName(this.dataModel().galleryParameters.resourceGroupName()),t.resourceGroupPicker.subscriptionId(this.dataModel().galleryParameters.subscriptionId()),n.inputParameters=MsPortalFx.ViewModels.ParameterCollectionV2.Utilities.modelToParameters(t),n.inputMetadata={},n.options={},n.options[u]={},n.options[u].filterPickerItems=this._getResourceGroupFilters()),n},i.prototype.getResourceGroupStepInputs=function(
){var n=new MsPortalFx.ViewModels.ParameterCollection.ParameterCollectionInput,t=new HubsExtension.Azure.ResourceGroupPickerDataModel,i=new HubsExtension.Azure.ResourceGroupDataModel,r=this.resourceGroupList().length===0,u=r?"resourceGroup":"resourceGroupPicker";return r?(i.resourceGroup.resourceGroupName(this.dataModel().galleryParameters.resourceGroupName()),i.resourceGroup.subscriptionId(this.dataModel().galleryParameters.subscriptionId()),n.inputParameters=MsPortalFx.ViewModels.ParameterCollection.Models.modelToParameters(i)):(t.resourceGroupPicker.isNewResourceGroup(this._createResourceGroup?"true":"false"),t.resourceGroupPicker.resourceGroupName(this.dataModel().galleryParameters.resourceGroupName()),t.resourceGroupPicker.subscriptionId(this.dataModel().galleryParameters.subscriptionId()),n.inputParameters=MsPortalFx.ViewModels.ParameterCollection.Models.modelToParameters(t),n.options[u]={},n.options[u].filterPickerItems=this._getResourceGroupFilters()),n},i.prototype.setResourceGroupStepOutputs=
function(i){var r=i.outputParameters||i,u=this.resourceGroupList().length===0,f=u?"resourceGroup":"resourceGroupPicker",e=r[f].resourceGroupName,o=r[f].subscriptionId,s=r[f].isNewResourceGroup,h;return this.dataModel().galleryParameters.resourceGroupName(e),this.resourceGroupStepSelector.value(e),u||s.toLowerCase()==="true"?(this._createResourceGroup=!0,this._stepState[this.resourceGroupStepId]=t.ChevronState.newValue):(this._createResourceGroup=!1,h=this.resourceGroupList().first((function(t){var i=n.Csm.ResourceUri.parseResourceGroupId(t.id);return StringEx.equals(t.name,e,StringComparison.IgnoreCase)&&StringEx.equals(i.subscriptionId,o,StringComparison.IgnoreCase)})),this._valueConstrained[this.resourceGroupStepId]||(this.dataModel().galleryParameters.subscriptionId(o),this.subscriptionStepSelector.locked(!0),this.subscriptionStepSelector.lockedBalloonText(n.Resources.Create.Subscription.lockedResourceGroup),this._valueConstrained[this.subscriptionStepId]=!0,this._ensureCorrectRegionIsSet(
o)),this._stepState[this.resourceGroupStepId]=t.ChevronState.existingValue),u||s.toLowerCase()==="true"},i.prototype.lockResourceGroupStep=function(n,t){this.resourceGroupStepSelector.locked(!0);t&&this.resourceGroupStepSelector.lockedBalloonText(t);this.resourceGroupStepSelector.value(n);this.dataModel().galleryParameters.resourceGroupName(n)},i.prototype.lockSubscriptionStep=function(n,t){this.subscriptionStepSelector.locked(!0);t&&this.subscriptionStepSelector.lockedBalloonText(t);this.subscriptionStepSelector.value(n);this.dataModel().galleryParameters.subscriptionId(n);this._ensureCorrectRegionIsSet(n)},i.prototype.lockLocationStep=function(n,t,i){if(this.locationStepSelector.locked(!0),i&&this.locationStepSelector.lockedBalloonText(i),this._subscriptionMappedRegions&&this._subscriptionMappedRegions()){var r=this._subscriptionMappedRegions()[this.dataModel().galleryParameters.subscriptionId()].first((function(n){return StringEx.equals(n.id,t.toLowerCase().replace(/\s/g,""))}));r&&(n(
r.id),this.locationStepSelector.value(r.displayName))}},i.prototype.getDefaultResourceGroupName=function(t,i){var f,e;if(this.dataModel()&&this.dataModel().galleryParameters.resourceGroupName())return this.dataModel().galleryParameters.resourceGroupName();if(!t)throw Error("To get a default resource group name, a subscription id must be set");i=i?i+"-":"";for(var o=this.resourceGroupList().filter((function(i){var r=n.Csm.ResourceUri.parseResourceGroupId(i.id);return StringEx.equals(r.subscriptionId,t,StringComparison.IgnoreCase)})),r=0,u="";!u;)f=r===0?i+"Group":"{0}Group-{1}".format(i,r),e=o.first((function(n){return StringEx.equals(n.name,f,StringComparison.IgnoreCase)})),e||(u=f),r++;return u},i.prototype.getResourceGroupLocation=function(t){var i=this,r=this.resourceGroupList().first((function(t){var r=n.Csm.ResourceUri.parseResourceGroupId(t.id);return StringEx.equals(r.name,i.dataModel().galleryParameters.resourceGroupName(),StringComparison.IgnoreCase)&&StringEx.equals(r.subscriptionId,
i.dataModel().galleryParameters.subscriptionId(),StringComparison.IgnoreCase)}));return r?r.location:t?n.Csm.getResourceGroupLocation(t):n.Csm.getResourceGroupLocation(this._selectedLocation()?this._selectedLocation().id:"")},i.prototype._getResourceGroupFilters=function(){var i=this,r=this._stepState[this.subscriptionStepId]!==t.ChevronState.defaultValue?this.dataModel().galleryParameters.subscriptionId():null;return this.resourceGroupList().filter((function(t){var u=n.Csm.ResourceUri.parseResourceGroupId(t.id);return i.resourceGroupLocationFilter()?r?r!==u.subscriptionId&&t.location!==i.resourceGroupLocationFilter():t.location!==i.resourceGroupLocationFilter():r&&r!==u.subscriptionId})).map((function(t){return{id:{resourceGroupName:t.name,subscriptionId:n.Csm.ResourceUri.parseResourceGroupId(t.id).subscriptionId},reason:i.resourceGroupFilterReason()}}))},i.prototype.setAllowedLocations=function(n){this._options.regionsAllowed=n},i.prototype._isRegionAllowed=function(n){return this._options.
regionsAllowed&&this._options.regionsAllowed.length>0?this._options.regionsAllowed.indexOf(n)>=0:!0},i.prototype._getLocationFilters=function(){var t=this,n,i,r;if(!this._options.regionsAllowed||this._options.regionsAllowed.length===0)return[];n=[];for(i in this._subscriptionMappedRegions())r=this._subscriptionMappedRegions()[i],r.forEach((function(i){t._isRegionAllowed(i.id)||n.push({id:i.id,reason:t.locationFilterReason()})}));return n},i.prototype._ensureCorrectRegionIsSet=function(n){var t=this,i=this._subscriptionMappedRegions()[n],r=i.first((function(n){return t._selectedLocation()&&StringEx.equals(n.id,t._selectedLocation().id)}));this._selectedLocation()&&r||this._selectedLocation(i.first());this.locationStepSelector.value(this._selectedLocation().displayName)},i.prototype.getLocationStepInputsV=function(){var n={},t={};return n.regionPicker={},n.regionPicker.pickerItems=this._subscriptionMappedRegions()[this.dataModel().galleryParameters.subscriptionId()],n.regionPicker.filterPickerItems=
this._getLocationFilters(),t.inputMetadata={},t.options=n,t.inputParameters={regionPicker:{regionId:this._selectedLocation().id}},t},i.prototype.getLocationStepInputs=function(){var n={},t=new MsPortalFx.ViewModels.ParameterCollection.ParameterCollectionInput;return n.regionPicker={},n.regionPicker.pickerItems=this._subscriptionMappedRegions()?this._subscriptionMappedRegions()[this.dataModel().galleryParameters.subscriptionId()]:null,n.regionPicker.filterPickerItems=this._getLocationFilters(),t.options=n,t.inputParameters={regionPicker:{regionId:this._selectedLocation()?this._selectedLocation().id:null}},t},i.prototype.setLocationCommits=function(n){var i=n.outputParameters||n,r=i.regionPicker.regionId;return this._selectedLocation(this._subscriptionMappedRegions()[this.dataModel().galleryParameters.subscriptionId()].first((function(n){return StringEx.equals(n.id,r,StringComparison.IgnoreCase)}))),this.locationStepSelector.value(this._selectedLocation().displayName),this._stepState[this.
locationStepId]=t.ChevronState.existingValue,this._selectedLocation()},i})();t.GenericCreateSteps=i})(t=n.Create||(n.Create={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var u=(function(){function n(){this.createOptions=new t}return n})(),t,i,r;n.BaseWizardModel=u;t=(function(){function n(){this.selectedTemplateId=ko.observable("");this.subscriptionId=ko.observable("");this.resourceGroupName=ko.observable("");this.resourceGroupLocation=ko.observable("");this.resourceProviders=ko.observable("");this.primaryResourceId=ko.observable("")}return n})();n.CreateOptions=t;i=(function(){function n(){}return n.defaultValue="Default",n.newValue="New",n.existingValue="Existing",n})();n.ChevronState=i;r=(function(){function n(n,t){this.id=n;this.displayName=t}return n})();n.RegionPickerObject=r})(t=n.Create||(n.Create={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function u(u,e){e===void 0&&(e=1e4);var o=Q.defer(),s=i(u.resourceProviders,
u.subscriptionId),h=r(u.subscriptionId,u.resourceGroupName,u.resourceGroupLocation);return Q.all([s,h]).then((function(){var i=t.deployUrlTemplate.format(window.fx.environment.csmManagementServiceUri,u.subscriptionId,u.resourceGroupName,u.deploymentName,window.fx.environment.csmApiVersion);n.Net.put(i,{properties:{mode:"incremental",parameters:f(u.parameters),template:JSON.parse(u.templateJson)}}).then((function(t){o.notify(t.properties);n.Utilities.setPollingQ((function(){return n.Net.get(i)}),(function(t){return StringEx.equals(t.properties.provisioningState,"Succeeded",StringComparison.IgnoreCase)?{response:t,status:n.Utilities.PollStatus.CompleteSuccess}:StringEx.equals(t.properties.provisioningState,"Failed",StringComparison.IgnoreCase)||StringEx.equals(t.properties.provisioningState,"Canceled",StringComparison.IgnoreCase)?{response:t,error:t,status:n.Utilities.PollStatus.CompleteFailure}:{status:n.Utilities.PollStatus.NotComplete}}),e).then((function(n){o.resolve(n.properties)})).catch((function(
n){o.reject(n.properties)}))})).catch((function(n){o.reject(n)}))})).catch((function(n){o.reject(n)})),o.promise}function i(i,r){var u=Q.defer(),f=[];return i&&i.length?(i.forEach((function(i){f.push(n.Net.post(t.registerUrlTemplate.format(window.fx.environment.csmManagementServiceUri,r,i,window.fx.environment.csmApiVersion)))})),Q.all(f).finally((function(){u.resolve()}))):u.resolve(),u.promise}function r(i,r,u){var f=Q.defer(),e=t.resourceGroupUrlTemplate.format(window.fx.environment.csmManagementServiceUri,i,r,window.fx.environment.csmApiVersion);return n.Net.get(e).then((function(n){f.resolve(n)})).catch((function(){n.Net.put(e,{location:u}).then((function(n){f.resolve(n)})).catch((function(n){f.reject(n)}))})),f.promise}function f(n){var t={};return Object.keys(n).forEach((function(i){var r=n[i];t[i]=r.hasOwnProperty("value")?r:{value:r}})),t}t.registerUrlTemplate="{0}/subscriptions/{1}/providers/{2}/register?api-version={3}";t.resourceGroupUrlTemplate="{0}/subscriptions/{1}/resourcegroups/{2}?api-version={3}";
t.deployUrlTemplate="{0}/subscriptions/{1}/resourcegroups/{2}/deployments/{3}?api-version={4}";t.deployTemplate=u;t.registerProviders=i;t.createResourceGroup=r})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict"})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function u(n){var i={},t=$.Deferred(),r=[];for(var u in n)r.push(f(n,u,i));return Q.all(r).then((function(){t.resolve(i)}),(function(){t.reject()})),t.promise()}function f(t,i,r){return n.Net.ajax(t[i],{setAuthorizationHeader:!1}).then((function(n){var f=n.content||n,t=i.split("."),u=i;t&&t.length>1&&(u=t[0]+"_"+t[1]);r[u]=JSON.stringify(f)}))}var r=(function(){function n(){}return n.replace="replace",n.arrayPush="arraypush",n})(),i;t.FragmentParameterAction=r;i=(function(){function n(){}return n.powershell="powershell",n})();t.FragmentParameterEscape=i;t.getFragmentStrings=u})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(
n){var t;(function(n){"use strict";function i(n,t,i,u){for(var e=[],f=0;f<n.length;f++)e.push(r(n[f],t,i,u));return Q.allSettled(e).then((function(n){for(var i,t=0;t<n.length;t++)if(n[t].state==="fulfilled"){if(n[t].value.isOver)return{isOver:n[t].value.isOver,message:n[t].value.overQuotaMessage}}else i=n[t].reason,MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ExtensionCore.validateQuotas","failed to check resource quotas: "+i);return{isOver:!1}}))}function r(n,t,i,r){return n(r,i).then((function(i){var u,r,f;if(i&&Object.keys(i).length>0){if(u=Object.keys(i)[0],r=t.first((function(n){return n.name()===u})),r){if(r.maxCount()==="-1")return{isOver:!1};if(+r.currentCount()+ +i[u]>+r.maxCount())return f=+r.maxCount()-+r.currentCount(),f<0&&(f=0),{isOver:!0,overQuotaMessage:i.overQuotaMessage.format(i[u],f,r.maxCount())}}return{isOver:!1}}return MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ExtensionCore.isOverQuota",
"unable to get number of required resources: requiredResources:"+i+" - quotas:"+t.join()+" - func:"+n),{isOver:!1}}),(function(){return MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ExtensionCore.isOverQuota","unable to get number of required resources: quotas:"+t.join()+" - func:"+n),{isOver:!1}}))}var t={name:"ExtensionCore.Csm.Quota",properties:{name:null,currentCount:null,maxCount:null},entityType:!0,idProperties:["name"]};MsPortalFx.Data.Metadata.setTypeMetadata(t.name,t);n.validateQuotas=i})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict"})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function t(n){var t=this,i,r;this.dependsOnIgnore={};this._parametersAdded={};this._computedCalculated={};this._conditionsAdded={};this._fragment=JSON.parse(n);this._fragment.computeds&&this._fragment.computeds.forEach((function(n){t._computedCalculated[
n.paths[0]]=undefined}));i=[];for(r in this._fragment.parameters)i.push(r);this.parameters={};i.forEach((function(n){Object.defineProperty(t.parameters,n,{get:function(){return t._getParameterValue(n)},set:function(i){t._addParameter(n,i)}})}))}return t.prototype.getResource=function(){var t=this;for(var n in this._fragment.parameters)if(this._fragment.parameters[n].required&&this._parametersAdded[n]===undefined)throw new Error("Required parameter {0} was missing".format(n));return this._fragment.resource.resources&&this._fragment.resource.resources.length&&this._fragment.resource.resources.forEach((function(n){n.dependsOn||(n.dependsOn=[]);var i=t.getDependsOnId();n.dependsOn.indexOf(i)===-1&&n.dependsOn.push(i)})),this._fragment.computeds&&this._fragment.computeds.forEach((function(n){if(n.required&&t._computedCalculated[n.paths[0]]===undefined)throw new Error("A required computed was not calculated");})),this._fragment.resource},t.prototype._getParameterValue=function(n){return this._parametersAdded[
n]},t.prototype._addParameter=function(t,i){var r=this;if(this._parametersAdded[t]=i,!this._fragment.parameters[t])throw new Error("The parameter named {0} does not exist".format(t));if(this._fragment.parameters[t].condition&&this._conditionsAdded[this._fragment.parameters[t].condition.name]!==this._fragment.parameters[t].condition.value)throw new Error("Can't add parameter named {0} until the conditional named {1} is set to {2}".format(t,this._fragment.parameters[t].condition.name,this._fragment.parameters[t].condition.value));this._fragment.parameters[t].paths.forEach((function(u){var f=r._fragment.parameters[t].action?r._fragment.parameters[t].action:n.FragmentParameterAction.replace,e=r._fragment.parameters[t].escape;r._setValueOnPath(u.split("."),r._fragment.resource,i,f,e)}));this._calculateComputeds()},t.prototype.setConditional=function(t,i){if(!this._fragment.conditionals)throw new Error("No conditionals for this fragment");if(!this._fragment.conditionals[t])throw new Error("No conditional named {0} for this fragment".
format(t));if(!this._fragment.conditionals[t][i])throw new Error("No conditionals value of {0} for condition {1}".format(i,t));var r=this._fragment.conditionals[t][i];this._setValueOnPath(r.path.split("."),this._fragment.resource,r.resource,n.FragmentParameterAction.replace);this._conditionsAdded[t]=i},t.prototype.getDependsOnId=function(){var n=this._fragment.resource.type.split("/"),r=this._fragment.resource.name.split("/"),i,t;if(n.length!==r.length+1)throw new Error("Fragment type and name are malformed: Type: '{0}', Name: '{1}'".format(this._fragment.resource.type,this._fragment.resource.name));if(n.length<2)throw new Error("Fragment type is malformed. '{0}'".format(this._fragment.resource.type));for(i="{0}/{1}/{2}".format(n[0],n[1],r[0]),t=2;t<n.length;t++)i=i+"/{0}/{1}".format(n[t],r[t-1]);return i},t.prototype.getResourceId=function(n,t){var i=this.getDependsOnId();return n&&t?"/subscriptions/{0}/resourcegroups/{1}/providers/{2}".format(n,t,i):"[concat(resourceGroup().id, '/providers/{0}')]".
format(i)},t.prototype.dependsOn=function(n){this.addDependsOn(n.getDependsOnId())},t.prototype.addRelatedTag=function(n){this.addTag("hidden-related:{0}".format(n),"Resource")},t.prototype.addLinkTag=function(n){this.addTag("hidden-link:{0}".format(n),"Resource")},t.prototype.addTag=function(n,t){this._fragment.resource.tags||(this._fragment.resource.tags={});this._fragment.resource.tags[n]=t},t.prototype.getReferenceTag=function(n,t){var r=this.getDependsOnId(),i="reference('{0}')";return t&&(i=i+"."+t),n&&(i="["+i+"]"),i.format(r)},t.prototype._calculateComputeds=function(){var t=this;this._fragment.computeds&&this._fragment.computeds.forEach((function(i){var r;if(i.required&&i.condition&&t._conditionsAdded[i.condition.name]!==i.condition.value)throw new Error("A computed value is required, and requires that condition {0} be set to value {1}".format(i.condition.name,i.condition.value));if(!i.condition||t._conditionsAdded[i.condition.name]===i.condition.value){var e=i.template.match(/{[^{|^}]+}/g).
map((function(n){return n.substring(1,n.length-1)})),u=!0,f={};e.forEach((function(n){var i,r;if(t._parametersAdded[n]){if(i=t.parameters[n],typeof i!="string")throw new Error("A computed required parameter {0}, which was not a string".format(n));r=t._fragment.parameters[n].escape;i=t._escapeIfNecessary(i,r);f[n]=i}else u=!1}));u&&(r=i.template.format(f),i.paths.forEach((function(i){t._setValueOnPath(i.split("."),t._fragment.resource,r,n.FragmentParameterAction.replace)})),t._computedCalculated[i.paths[0]]=r)}}))},t.prototype.addDependsOn=function(n,t){this._fragment.resource.dependsOn||(this._fragment.resource.dependsOn=[]);this._fragment.resource.dependsOn.indexOf(n)===-1&&(t&&(this.dependsOnIgnore[n]=!0),this._fragment.resource.dependsOn.push(n))},t.prototype._setValueOnPath=function(t,i,r,u,f){for(var o,h,e,l,s,c=0;c<t.length-1;c++)o=t[c],o.match(/[0-9]+(?=\])/g)?(h=o.match(/[0-9]+(?=\])/g),l=".*(?=",h.forEach((function(){l+="\\[[0-9]\\]"})),l+=")",e=o.match(l)[0],i=i[e],h.forEach((function(
n){if(Array.isArray(i)){var t=parseInt(n,10);if(t>=i.length)throw new Error("Out of range. Tried to access index {0} on an array of length {1}".format(t,i.length));i=i[parseInt(n,10)]}else throw new Error("Tried to index an array that is not an array.");}))):(i[o]||(i[o]={}),i=i[o]);if(r=this._escapeIfNecessary(r,f),t[t.length-1].match(/[0-9]+(?=\])/g)){if(h=t[t.length-1].match(/[0-9]+(?=\])/g),e=t[t.length-1].match(/.*(?=\[)/)[0],h.length>1)throw new Error("The final path can only contain 1 array index");if(s=parseInt(h[0],10),!Array.isArray(i[e]))throw new Error("Tried to index an array that is not an array");if(s>=i[e].length)throw new Error("Out of range. Tried to access index {0} on an array of length {1}".format(s,i[e].length));StringEx.equals(u,n.FragmentParameterAction.replace,StringComparison.IgnoreCase)?i[e][s]=r:StringEx.equals(u,n.FragmentParameterAction.arrayPush,StringComparison.IgnoreCase)&&(Array.isArray(i[e][s])||(i[e][s]=[]),i[e][s].push(r))}else StringEx.equals(u,n.FragmentParameterAction.
replace,StringComparison.IgnoreCase)?i[t[t.length-1]]=r:StringEx.equals(u,n.FragmentParameterAction.arrayPush,StringComparison.IgnoreCase)&&(Array.isArray(i[t[t.length-1]])||(i[t[t.length-1]]=[]),i[t[t.length-1]].push(r))},t.prototype._escapeIfNecessary=function(t,i){return typeof t=="string"&&StringEx.equals(i,n.FragmentParameterEscape.powershell,StringComparison.IgnoreCase)&&(t=t.replace(/`/g,"``"),t=t.replace(/"/g,'`"'),t=t.replace(/'/g,"`'")),t},t})();n.Fragment=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.isCapability=function(n){if(n){var t=n.split("/");if(t&&t.length===7)return t[0]===""&&t[1].toUpperCase()==="subscriptions".toUpperCase()&&t[2]!==""&&t[3].toUpperCase()==="providers".toUpperCase()&&t[4]!==""&&t[5].toUpperCase()==="capabilities".toUpperCase()&&t[6]!==""}return!1},n})();n.CapabilityUri=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(
n){"use strict";var t=(function(){function n(){this._resources=[];this._template={$schema:"http://schema.management.azure.com/schemas/2014-04-01-preview/deploymentTemplate.json#",contentVersion:"1.0.0.0",parameters:{},resources:[]}}return n.prototype.addFragment=function(n){this._resources.push(n)},n.prototype.addResource=function(n){this._template.resources.push(n)},n.prototype.addParameter=function(n,t){if(this._template.parameters[n])throw new Error("Parameter {0} is already added".format(n));this._template.parameters[n]=t},n.prototype.addOutput=function(n,t,i){this._template.outputs||(this._template.outputs={});this._template.outputs[n]={type:t,value:i}},n.prototype.generateTemplate=function(){var t=this,n={};return this._resources.forEach((function(i){n[i.getDependsOnId()]=!0;t._template.resources.push(i.getResource());for(var r in i.dependsOnIgnore)n[r]=!0})),this._template.resources.forEach((function(t){t.dependsOn&&t.dependsOn.forEach((function(i){if(!n[i])throw new Error("{0}/{1} depends on {2}, but it was not present in the template".
format(t.type,t.name,i));}))})),JSON.stringify(this._template)},n})();n.TemplateFactory=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){"use strict";var t=(function(){function n(){this._db={}}return n.prototype.FindEntity=function(n,t,i){if(i||(i="id"),Array.isArray(this._db[t])){var r=this._db[t].first((function(t){return ko.isObservable(t[i])?t[i]()===n:t[i]===n}));if(r)return r}return null},n.prototype.FindEntities=function(n){return Array.isArray(this._db[n])?this._db[n]:[]},n.prototype.AddEntity=function(n,t,i){if(i||(i="id"),Array.isArray(this._db[t])){if(this.FindEntity(n[i],t,i))throw new Error("Entity with id '{0}' already existed.".format(n[i]));}else this._db[t]=[];return this._db[t].push(n),n},n.prototype.RemoveEntity=function(n,t,i){if(i||(i="id"),Array.isArray(this._db[t])){var r=this._db[t].firstIndex((function(t){return ko.isObservable(t[i])?t[i]()===n:t[i]===n}));r>-1&&this._db[t].splice(r,1)}},n.prototype.RemoveAllEntities=function(n){Array.isArray(this.
_db[n])&&(this._db[n]=[])},n.prototype.FindIndependentEntity=function(n){return typeof this._db[n]!="undefined"?this._db[n]:null},n.prototype.AddIndependentEntity=function(n,t){if(this._db[t])throw new Error("Independent Entity with key '{0}' already existed.".format(t));this._db[t]=n},n.prototype.RemoveIndependentEntity=function(n){delete this._db[n]},n.prototype.ClearAll=function(){this._db={}},n})();n.MockDb=t})(ExpMocks||(ExpMocks={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.ProcessorTotalPercentageProcessorTime="\\Processor(_Total)\\% Processor Time",n.ProcessorTotalPercentageInterruptTime="\\Processor(_Total)\\% Interrupt Time",n.ProcessorTotalPercentagePrivilegedTime="\\Processor(_Total)\\% Privileged Time",n.ProcessorInformationTotalParkingStatus="\\Processor Information(_Total)\\Parking Status",n.ProcessorTotalPercentageUserTime="\\Processor(_Total)\\% User Time",n.ProcessorInformationTotalPercentageProcessorPerformance="\\Processor Information(_Total)\\% Processor Performance",
n.ProcessorInformationTotalProcessorFrequency="\\Processor Information(_Total)\\Processor Frequency",n.SystemThreads="\\System\\Threads",n.SystemProcesses="\\System\\Processes",n.ThreadTotalContextSwitches="\\Thread(_Total)\\Context Switches/sec",n.MemoryCommittedBytes="\\Memory\\Committed Bytes",n.MemoryAvailableBytes="\\Memory\\Available Bytes",n.MemoryPercentageCommittedBytesInUse="\\Memory\\% Committed Bytes In Use",n.MemoryCacheFaults="\\Memory\\Cache Faults/sec",n.MemoryPageFaults="\\Memory\\Page Faults/sec",n.MemoryPageReads="\\Memory\\Page Reads/sec",n.MemoryPages="\\Memory\\Pages/sec",n.MemoryTransitionFaults="\\Memory\\Transition Faults/sec",n.MemoryPoolPagedBytes="\\Memory\\Pool Paged Bytes",n.MemoryPoolNonpagedBytes="\\Memory\\Pool Nonpaged Bytes",n.ProcessTotalPercentageProcessorTime="\\Process(_Total)\\% Processor Time",n.ProcessTotalPageFaults="\\Process(_Total)\\Page Faults/sec",n.ProcessTotalThreadCount="\\Process(_Total)\\Thread Count",n.ProcessTotalHandleCount="\\Process(_Total)\\Handle Count",
n.ProcessTotalPrivateBytes="\\Process(_Total)\\Private Bytes",n.ProcessTotalWorkingSet="\\Process(_Total)\\Working Set",n.ProcessTotalWorkingSetPrivate="\\Process(_Total)\\Working Set - Private",n.PhysicalDiskTotalDiskReadBytes="\\PhysicalDisk(_Total)\\Disk Read Bytes/sec",n.PhysicalDiskTotalDiskWriteBytes="\\PhysicalDisk(_Total)\\Disk Write Bytes/sec",n.WebServiceTotalBytesTotal="\\Web Service(_Total)\\Bytes Total/Sec",n.WebServiceTotalISAPIExtensionRequests="\\Web Service(_Total)\\ISAPI Extension Requests/sec",n.WebServiceTotalConnectionAttempts="\\Web Service(_Total)\\Connection Attempts/sec",n.WebServiceTotalCurrentConnections="\\Web Service(_Total)\\Current Connections",n.WebServiceTotalGetRequests="\\Web Service(_Total)\\Get Requests/sec",n.WebServiceTotalPostRequests="\\Web Service(_Total)\\Post Requests/sec",n.TCPv4ConnectionsEstablished="\\TCPv4\\Connections Established",n.TCPv4ConnectionFailures="\\TCPv4\\Connection Failures",n.TCPv4ConnectionsReset="\\TCPv4\\Connections Reset",
n.TCPv4SegmentsSent="\\TCPv4\\Segments Sent/sec",n.TCPv4SegmentsReceived="\\TCPv4\\Segments Received/sec",n.TCPv4SegmentsRetransmitted="\\TCPv4\\Segments Retransmitted/sec",n.ASPNETApplicationsRunning="\\ASP.NET\\Applications Running",n.ASPNETRequestWaitTime="\\ASP.NET\\Request Wait Time",n.ASPNETRequestExecutionTime="\\ASP.NET\\Request Execution Time",n.ASPNETRequestsQueued="\\ASP.NET\\Requests Queued",n.ASPNETRequestsRejected="\\ASP.NET\\Requests Rejected",n.ASPNETApplicationsTotalRequests="\\ASP.NET Applications(__Total__)\\Requests/Sec",n.ASPNETApplicationsTotalErrorsTotal="\\ASP.NET Applications(__Total__)\\Errors Total/Sec",n.ASPNETApplicationsTotalRequestsInApplicationQueue="\\ASP.NET Applications(__Total__)\\Requests In Application Queue",n.ASPNETApplicationsTotalPipelineInstanceCount="\\ASP.NET Applications(__Total__)\\Pipeline Instance Count",n.ASPNETApplicationsTotalRequestsExecuting="\\ASP.NET Applications(__Total__)\\Requests Executing",n.NETCLRJitGlobalPercentageTimeinJit=
"\\.NET CLR Jit(_Global_)\\% Time in Jit",n.NETCLRLoadingGlobalPercentageTimeLoading="\\.NET CLR Loading(_Global_)\\% Time Loading",n.NETCLRLocksAndThreadsGlobalCurrentQueueLength="\\.NET CLR LocksAndThreads(_Global_)\\Current Queue Length",n.NETCLRLocksAndThreadsGlobalContentionRate="\\.NET CLR LocksAndThreads(_Global_)\\Contention Rate / sec",n.NETCLRLocksAndThreadsGlobalCurrentlogicalThreads="\\.NET CLR LocksAndThreads(_Global_)\\# of current logical Threads",n.NETCLRLocksAndThreadsGlobalCurrentphysicalThreads="\\.NET CLR LocksAndThreads(_Global_)\\# of current physical Threads",n.NETCLRMemoryGlobalPercentageTimeinGC="\\.NET CLR Memory(_Global_)\\% Time in GC",n.NETCLRMemoryGlobalAllocatedBytes="\\.NET CLR Memory(_Global_)\\Allocated Bytes/sec",n.NETCLRMemoryGlobalGen0heapsize="\\.NET CLR Memory(_Global_)\\Gen 0 heap size",n.NETCLRMemoryGlobalGen1heapsize="\\.NET CLR Memory(_Global_)\\Gen 1 heap size",n.NETCLRMemoryGlobalGen2heapsize="\\.NET CLR Memory(_Global_)\\Gen 2 heap size",n.
NETCLRMemoryGlobalLargeObjectHeapsize="\\.NET CLR Memory(_Global_)\\Large Object Heap size",n.NETCLRMemoryGlobalBytesinallHeaps="\\.NET CLR Memory(_Global_)\\# Bytes in all Heaps",n.NETCLRNetworkingGlobalConnectionsEstablished="\\.NET CLR Networking(_Global_)\\Connections Established",n.NETCLRRemotingGlobalRemoteCalls="\\.NET CLR Remoting(_Global_)\\Remote Calls/sec",n.NETCLRExceptionsGlobalExcepsThrown="\\.NET CLR Exceptions(_Global_)\\# of Exceps Thrown / sec",n.NETCLRInteropGlobalMarshalling="\\.NET CLR Interop(_Global_)\\# of marshalling",n})();n.VirtualMachineMetrics=t})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.AllTimeRanges=function(){return[n.ThirtyMinutes,n.SixHours,n.TwentyFourHours,n.SevenDays,n.OneHour]},n.GetMetricTimeRange=function(t){return n.AllTimeRanges().first((function(n){return n.TimeRange===t}))},n.SevenDays={TimeRange:"P7D",TimeGrain:"P1D",DisplayName:"7 Days",LongFormatter:
"MM/dd",ShortFormatter:"dd",DisplayNameForPartTitle:"past week"},n.TwentyFourHours={TimeRange:"PT24H",TimeGrain:"PT1H",DisplayName:"24 Hours",LongFormatter:"ht",ShortFormatter:"h",DisplayNameForPartTitle:"today"},n.SixHours={TimeRange:"PT6H",TimeGrain:"PT1H",DisplayName:"6 Hours",LongFormatter:"ht",ShortFormatter:"h",DisplayNameForPartTitle:""},n.ThirtyMinutes={TimeRange:"PT30M",TimeGrain:"PT1M",DisplayName:"Half Hour",LongFormatter:"min",ShortFormatter:"m",DisplayNameForPartTitle:""},n.OneHour={TimeRange:"PT1H",TimeGrain:"PT5M",DisplayName:"One Hour",LongFormatter:"min",ShortFormatter:"m",DisplayNameForPartTitle:"past hour"},n})();n.MetricTimeRange=t})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var i=(function(){function n(){this.id=ko.observable();this.name=ko.observable();this.type=ko.observable()}return n.metadata={name:"NetworkExtension.Models.NetworkSecurityGroupApiData",properties:{id:null,name:null,type:null},entityType:
!0},n})(),t,r;n.NetworkSecurityGroupApiData=i;MsPortalFx.Data.Metadata.setTypeMetadata(i.metadata.name,i.metadata);t=(function(){function n(){this.networkSecurityGroup=ko.observable()}return n.metadata={name:"NetworkExtension.Models.ResourceToNetworkSecurityGroupAssociationProperties",properties:{networkSecurityGroup:{itemType:i.metadata.name}},entityType:!0},n})();n.ResourceToNetworkSecurityGroupAssociationProperties=t;MsPortalFx.Data.Metadata.setTypeMetadata(t.metadata.name,t.metadata);r=(function(){function n(){this.id=ko.observable();this.name=ko.observable();this.type=ko.observable();this.properties=ko.observable()}return n.metadata={name:"NetworkExtension.Models.ResourceToNetworkSecurityGroupAssociation",properties:{id:null,name:null,type:null,properties:{itemType:t.metadata.name}},entityType:!0,idProperties:["id"],hasGloballyUniqueId:!0},n})();n.ResourceToNetworkSecurityGroupAssociation=r;MsPortalFx.Data.Metadata.setTypeMetadata(r.metadata.name,r.metadata)})(t=n.Models||(n.Models={})
)})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(n.Create.CreateAssetDataModel);t.NetworkSecurityGroupCreationModel=i})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(n.Create.CreateAssetDataModel);t.ReservedIPAddressCreationModel=i})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict"})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict"})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={}));Diagnostics=MsPortalFx.Base.Diagnostics,(function(n){var t;(function(n){"use strict";var t,i,r;(function(n){n[n.networkSecurityGroupUsage=0]="networkSecurityGroupUsage";n[n.coresUsage=1]="coresUsage";n[n.networkInterfacesUsage=2]="networkInterfacesUsage";
n[n.virtualNetworksUsage=3]="virtualNetworksUsage";n[n.publicIPAddressesUsage=4]="publicIPAddressesUsage";n[n.staticPublicIPAddressesUsage=5]="staticPublicIPAddressesUsage"})(n.UsageTypes||(n.UsageTypes={}));t=n.UsageTypes;i=(function(){function n(){}return n.GetUsageName=function(i){switch(i){case t.networkSecurityGroupUsage:return n.networkSecurityGroupUsage;case t.coresUsage:return n.coresUsage;case t.networkInterfacesUsage:return n.networkInterfacesUsage;case t.virtualNetworksUsage:return n.virtualNetworksUsage;case t.publicIPAddressesUsage:return n.publicIPAddressesUsage;case t.staticPublicIPAddressesUsage:return n.staticPublicIPAddressesUsage;default:return Diagnostics.Log.writeEntry(Diagnostics.LogEntryLevel.Warning,"Usage.GetUsageName","No matching string for UsageType: {0}.".format(t[i])),null}},n.networkSecurityGroupUsage="NetworkSecurityGroups",n.coresUsage="cores",n.networkInterfacesUsage="NetworkInterfaces",n.virtualNetworksUsage="VirtualNetworks",n.publicIPAddressesUsage="PublicIPAddresses",
n.staticPublicIPAddressesUsage="StaticPublicIPAddresses",n})();n.Usage=i;r=(function(){function n(){}return n})();n.UsageName=r})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(n){function t(){n.apply(this,arguments);this.addressSpaceCidr=ko.observable();this.subnetName=ko.observable();this.subnetCidr=ko.observable()}return __extends(t,n),t})(n.Create.CreateAssetDataModel);t.VirtualNetworkCreationModel=i})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(){function t(t){if(!t)throw new ArgumentError(n.Resources.Network.Validation.nonNullAddress);this.address=t.split(".").map((function(i){if(i&&i.length>1&&i[0]==="0"||!i.match(/^\d+$/))throw new ArgumentError(n.Resources.Network.Validation.malformedAddress.format(t));return parseInt(i,10)}));this._validateIpValue();this._calculateByteValues()}return t.prototype.toString=function(){return this.bytesToAddressString(
this.subnetBytes)},t.prototype.equals=function(n){return this.subnetBytes===n.subnetBytes},t.prototype.isIpInRange=function(n,t){return n.subnetBytes<=this.subnetBytes&&this.subnetBytes<t.subnetBytes},t.prototype.bytesToAddressString=function(n){return"{0}.{1}.{2}.{3}".format((n&4278190080)>>>24,(n&16711680)>>>16,(n&65280)>>>8,(n&255)>>>0)},t.prototype._validateIpValue=function(){if(this.address.length!==4)throw new ArgumentError(n.Resources.Network.Validation.malformedAddress.format(this.address.join(".")));this._validateOctet(0);this._validateOctet(1);this._validateOctet(2);this._validateOctet(3)},t.prototype._validateOctet=function(t){if(isNaN(this.address[t])||this.address[t]<(t===0?1:0)||this.address[t]>255)throw new ArgumentError(n.Resources.Network.Validation.octet.format(t+1,this.address[t],t===0?1:0,255));},t.prototype._calculateByteValues=function(){this.subnetBytes=(this.address[0]<<24>>>0|this.address[1]<<16>>>0|this.address[2]<<8>>>0|this.address[3]<<0>>>0)>>>0},t})();t.IPv4Address=
i})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(t){function i(i){var u,r;if(!i)throw new ArgumentError(n.Resources.Network.Validation.nonNullSubnet);if(u=i.split("/"),u.length===1)this.prefix=32;else if(u.length>2)throw new ArgumentError(n.Resources.Network.Validation.malformedSubnet.format(i));else{if(r=u[1],r&&r.length>1&&r[0]==="0"||!r.match(/^\d+$/))throw new ArgumentError(n.Resources.Network.Validation.malformedSubnet.format(i));this.prefix=parseInt(r,10)}t.call(this,u[0]);this._validatePrefix();this._calculateSubnetByteValues()}return __extends(i,t),i.prototype.toString=function(){return"{0}/{1}".format(t.prototype.toString.call(this),this.prefix)},i.prototype.toAddressString=function(){return t.prototype.toString.call(this)},i.prototype.isOtherSubnetContained=function(n){return this.prefix<=n.prefix&&(this.subnetNetMaskBytes&n.subnetBroadcastAddressBytes)>>>0===this.subnetMaskBytes},i.prototype.doesSubnetOverlap=
function(n){return this.isOtherSubnetContained(n)||n.isOtherSubnetContained(this)},i.prototype.getFirstAddressInRange=function(n){return this.bytesToAddressString(((this.subnetBytes&this.subnetNetMaskBytes)>>>0)+(n?n:0))},i.prototype.getLastAddressInRange=function(n){return this.bytesToAddressString(this.subnetBroadcastAddressBytes-(n?n:0))},i.prototype.doesContainIp=function(n){var t=new i(n.toString());return this.isOtherSubnetContained(t)},i.prototype.getSubnetRange=function(t,i){return n.Resources.subnetRange.format(this.getFirstAddressInRange(t),this.getLastAddressInRange(i))},i.prototype.getUsableIpAddressCount=function(n,t){return n=n?n:0,t=t?t:0,this.subnetBroadcastAddressBytes-((this.subnetBytes&this.subnetNetMaskBytes)>>>0)-n-t+1},i.prototype.getChildSubnet=function(n,t){var s=this._getUsablePrefix(n,!0),e,r,u,f,o;if(t&&t.length){if(e=0,t.forEach((function(n){e+=n.getUsableIpAddressCount()})),this.getUsableIpAddressCount()-e<Math.pow(2,32-n))return null;for(t.sort((function(n,t)
{return n.subnetBytes<t.subnetBytes?-1:1})),r=new i(this.getFirstAddressInRange()+"/"+s),u=!0;u;)for(u=!1,f=0;f<t.length;f++)if(o=t[f],r.doesSubnetOverlap(o)){r=o.getNextSubnet(n);u=!0;break}return this.isOtherSubnetContained(r)?r:null}return new i(this.getFirstAddressInRange()+"/"+s)},i.prototype.getIpAddress=function(n){var t=n?n:0;if(this.getUsableIpAddressCount()<t)throw new ArgumentError("offset","The requested IP Address is not in this subnet");return this.bytesToAddressString(this.subnetBytes+t)},i.prototype.getNextSubnet=function(n){var t=this._getUsablePrefix(n,!1),r,u;return t<this.prefix?(u=new i(this.toAddressString()+"/"+t),r=u.bytesToAddressString(u.subnetBroadcastAddressBytes+1)):r=this.bytesToAddressString(this.subnetBroadcastAddressBytes+1),new i(r+"/"+t)},i.prototype.findContainingAddressSpace=function(n){var r,t,u;if(!n||n.length===undefined)throw new ArgumentError("addressSpaces","The list of address spaces must be an array");for(typeof n[0]=="string"&&(n=n.map((function(
n){return new i(n)}))),r=n,t=0;t<r.length;t++)if(u=r[t],u.isOtherSubnetContained(this))return u;return null},i.prototype._getUsablePrefix=function(n,t){var i=this.prefix;if(n){if(typeof n=="string"&&(n=parseInt(n,10)),t&&n<this.prefix)throw new ArgumentError("prefix","The supplied prefix {0} was smaller than the parent {1}. It must be greater than or equal to the parent".format(n,this.prefix));i=n}return i},i.findSubnetGap=function(t,r,u){var s,c,f,w,h,o,v,l,a;if(!t)throw new ArgumentError("existingSubnets","existingSubnets must not be null");if(r<1||r>32)throw new ArgumentError("desiredPrefix",n.Resources.Network.Validation.prefix);if(t.length===0)return new i("10.0.0.0/"+r.toString());for(s=typeof t[0]=="string"?t.map((function(n){return new i(n)})):t,s.sort((function(n,t){return n.subnetBroadcastAddressBytes<t.subnetBroadcastAddressBytes?-1:1})),c=[],f=0;f<s.length;f++)if(w=c.first((function(n){return n===f})),!w)for(h=0;h<s.length;h++)f!==h&&s[f].isOtherSubnetContained(s[h])&&c.push(h);if(
o=s.filter((function(n,t){var i=c.first((function(n){return n===t}));return i===null})),v=new i("10.0.0.0/"+r),v.subnetBroadcastAddressBytes<o[0].subnetBytes)return v;var e,y=new i("10.0.0.0/8"),p=new i("172.16.0.0/12"),b=new i("192.168.0.0/16");for(f=0;f<o.length;f++)if(l=o[f].prefix>r?new i(o[f].toAddressString()+"/"+r.toString()):o[f],a=f+1<o.length?o[f+1]:null,a===null||a.subnetBytes-l.subnetBroadcastAddressBytes>=Math.pow(2,32-r))if(e=new i(l.bytesToAddressString(l.subnetBroadcastAddressBytes+1)+"/"+r),u){if(y.isOtherSubnetContained(e)||p.isOtherSubnetContained(e)||b.isOtherSubnetContained(e))return e;if(a===null){if(e.subnetBroadcastAddressBytes<y.subnetBytes)return r>=8?new i("10.0.0.0/"+r):null;if(e.subnetBytes>y.subnetBroadcastAddressBytes&&e.subnetBroadcastAddressBytes<p.subnetBytes)return r>=12?new i("172.16.0.0/"+r):null;if(e.subnetBytes>p.subnetBroadcastAddressBytes&&e.subnetBroadcastAddressBytes<b.subnetBytes)return r>=16?new i("192.168.0.0/"+r):null}}else return e;return null}
,i.prototype._validatePrefix=function(){if(this.prefix<1||this.prefix>32)throw new ArgumentError("Prefix",n.Resources.Network.Validation.prefix);},i.prototype._calculateSubnetByteValues=function(){this.subnetNetMaskBytes=4294967295<<32-this.prefix>>>0;this.subnetMaskBytes=(this.subnetNetMaskBytes&this.subnetBytes)>>>0;this.subnetBroadcastAddressBytes=((this.subnetNetMaskBytes^4294967295)>>>0|this.subnetBytes)>>>0},i})(t.IPv4Address);t.IPv4Subnet=i})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function i(t,i){var r={};return t.forEach((function(t){var u=new n.Network.IPv4Subnet(t),f=i.map((function(t){return new n.Network.IPv4Subnet(t)})).filter((function(n){return u.isOtherSubnetContained(n)}));r[t]=f})),r}function r(i,r){try{var u=new t.IPv4Subnet(i);return r(n.Resources.Network.Validation.addressRangeSummary.format(u.getFirstAddressInRange(),u.getLastAddressInRange(),u.getUsableIpAddressCount())),!0}catch(f){r(n.Resources.Network.
Validation.emptyAddressRange);f instanceof ArgumentError?MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Network.TryGetAddressRangeSummary","Unexpected error encountered. Input was: {0}".format(i)):MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Network.TryGetAddressRangeSummary","Unexpected error encountered when forming subnet: {0}. Input was: {1}.".format(f.message,i))}return!1}t.getSubnetsInAddressSpaces=i;t.TryGetAddressRangeSummary=r})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function o(){return new MsPortalFx.ViewModels.CustomValidation("",function(n){var i={valid:!0,message:undefined};if(!!n)try{new t.IPv4Address(n)}catch(r){i.valid=!1;i.message=r.message}return Q(i)})}function s(i,r){return new MsPortalFx.ViewModels.CustomValidation("",function(u){var e=new t.IPv4Address(u),f={valid:!0,message:
undefined};return e.isIpInRange(i,r)||(f.valid=!1,f.message=n.Resources.Network.Validation.notInRange.format(i.toString(),r.bytesToAddressString(r.subnetBytes-1))),Q(f)})}function h(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var f=new t.IPv4Address(r),u={valid:!0,message:undefined};return i.doesContainIp(f)||(u.valid=!1,u.message=n.Resources.Network.Validation.notInSubnet.format(i.toString())),Q(u)})}function c(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var u=t.TryGetAddressRangeSummary(r,i),f="";return u||(f=n.Resources.Network.Validation.malformedSubnet.format(r)),Q({valid:u,message:f})})}function l(t){return new MsPortalFx.ViewModels.CustomValidation("",function(i){var r={valid:!0,message:undefined},u=t();return u&&(i=i+u),i&&i.length>57&&(r.valid=!1,r.message=n.Resources.Network.Validation.virtualNetworkNameLengthMax),Q(r)})}function a(){return new MsPortalFx.ViewModels.CustomValidation("",function(t){var i={valid:!0,message:undefined};
return t&&t.split("/").length!==2&&(i.valid=!1,i.message=n.Resources.Network.Validation.prefix),Q(i)})}function v(i,r,u){return new MsPortalFx.ViewModels.CustomValidation("",function(f){var e={valid:!0,message:undefined},o;if(u===!0&&f==="0.0.0.0/0")return Q(e);try{o=new t.IPv4Subnet(f);i&&r&&(o.prefix>i||o.prefix<r)?(e.valid=!1,e.message=n.Resources.Network.Validation.betweenPrefix.format(r,i)):i&&o.prefix>i&&(e.valid=!1,e.message=n.Resources.Network.Validation.maxPrefix.format(i))}catch(s){e.valid=!1;e.message=s.message}return Q(e)})}function y(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var u={valid:!0,message:undefined},f,e;if(i())try{f=new t.IPv4Subnet(r);e=new t.IPv4Subnet(i());e.isOtherSubnetContained(f)||(u.valid=!1,u.message=n.Resources.Network.Validation.subnetNotContained.format(r,i()))}catch(o){u.valid=!1;u.message=o.message}else u.valid=!1,u.message=n.Resources.Network.Validation.missingAddressSpace;return Q(u)})}function p(i){return new MsPortalFx.
ViewModels.CustomValidation("",function(r){var u={valid:!0,message:undefined},f;try{f=new t.IPv4Subnet(r);i()&&i().forEach((function(i){var e=new t.IPv4Subnet(i);f.isOtherSubnetContained(e)||(u.valid=!1,u.message=n.Resources.Network.Validation.subnetNotContained.format(i,r))}))}catch(e){u.valid=!1;u.message=e.message}return Q(u)})}function w(i,r){return new MsPortalFx.ViewModels.CustomValidation("",function(u){var f={valid:!0,message:undefined},e;try{e=new t.IPv4Subnet(u);i().forEach((function(i){var u=new t.IPv4Subnet(i);e.doesSubnetOverlap(u)&&(f.valid=!1,f.message=r?r.format(i):n.Resources.Network.Validation.subnetOverlaps.format(i))}))}catch(o){f.valid=!1;f.message=o.message}return Q(f)})}function b(i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var u={valid:!0,message:undefined},e=[new t.IPv4Subnet("224.0.0.0/4"),new t.IPv4Subnet("255.255.255.255/32"),new t.IPv4Subnet("127.0.0.0/8"),new t.IPv4Subnet("169.254.0.0/16"),new t.IPv4Subnet("168.63.129.16/32")],f;try{f=new
t.IPv4Subnet(r);e.forEach((function(t){f.isOtherSubnetContained(t)&&(u.valid=!1,u.message=i?i:n.Resources.Network.Validation.privateSpace)}))}catch(o){u.valid=!1;u.message=o.message}return n.Utilities.convertToPromise(u)})}function k(t,i){return new MsPortalFx.ViewModels.CustomValidation("",function(r){var u={valid:!0,message:undefined},f,e,o;return r&&!StringEx.equals(r,"*",StringComparison.IgnoreCase)&&(f=r.split("-"),f.length>2?(u.valid=!1,u.message=i):(e=+f[0],e<n.Constants.NetworkSecurityGroupPortRange.minValue||e>n.Constants.NetworkSecurityGroupPortRange.maxValue||!StringEx.equals(f[0],e+"")?(u.valid=!1,u.message=t):f.length===2&&(o=+f[1],o<n.Constants.NetworkSecurityGroupPortRange.minValue||o>n.Constants.NetworkSecurityGroupPortRange.maxValue||!StringEx.equals(f[1],o+"")?(u.valid=!1,u.message=t):e>o&&(u.valid=!1,u.message=i)))),Q(u)})}function d(n){return new MsPortalFx.ViewModels.CustomValidation("",function(i){var r={valid:!0,message:undefined};if(!!i&&!StringEx.equals(i,"*")&&!StringEx.
isStringInArray(i,n,StringComparison.IgnoreCase))try{new t.IPv4Subnet(i)}catch(u){r.valid=!1;r.message=u.message}return Q(r)})}var i,r,u,f,e;t.getIpAddressValidator=o;t.getIpAddressInRangeValidator=s;t.getIpAddressInSubnetValidator=h;t.getRangeValidationWithSummaryText=c;i=(function(t){function i(){var i=n.Resources.Network.Validation.name;t.call(this,"^[^_\\W]([\\w-.]{0,78}[\\w])?$",i)}return __extends(i,t),i})(MsPortalFx.ViewModels.RegExMatchValidation);t.NetworkNameRegexValidation=i;r=(function(t){function i(){t.call(this,1,80,n.Resources.Network.Validation.nameLength)}return __extends(i,t),i})(MsPortalFx.ViewModels.LengthRangeValidation);t.NetworkNameMaxLengthValidation=r;t.VirtualNetworkNameLengthValidation=l;t.getCidrPrefixValidator=a;t.getCidrSubnetValidator=v;t.getSubnetIsContainedInAddressSpaceValidator=y;t.getAddressSpaceContainsAllSubnets=p;t.getSubnetDoesntOverlapWithOtherSubnets=w;t.getPrivateSubnetValidator=b;u=(function(t){function i(){var i=n.Resources.Network.Validation.networkSecurityGroupNameRegex;
t.call(this,'^[a-zA-Z_][^\\\\\\/\\:\\*\\?\\""\\<\\>\\|\\`\\\'\\^%\\#]*$',i)}return __extends(i,t),i})(MsPortalFx.ViewModels.RegExMatchValidation);t.NetworkSecurityGroupNameRegexValidation=u;f=(function(t){function i(){var i=n.Resources.Network.Validation.networkSecurityGroupNameRegex;t.call(this,"[\\.\\s]$",i)}return __extends(i,t),i})(MsPortalFx.ViewModels.NotRegExMatchValidation);t.NetworkSecurityGroupNameNotRegexValidation=f;t.getPortRangeValidator=k;t.getSecurityRuleAddressPrefixValidator=d;e=(function(t){function i(){t.call(this,1,260,n.Resources.Network.Validation.networkSecurityGroupNameLength)}return __extends(i,t),i})(MsPortalFx.ViewModels.LengthRangeValidation);t.NetworkSecurityGroupNameMaxLengthValidation=e})(t=n.Network||(n.Network={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict";function n(n){var t={};return this.forEach((function(i){var r=n(i);r&&(t[r]=i)})),t}function t(n,t){var i=[];return n?(t||(t=function(n,t){return n===t}),this.forEach((function(
r){for(var f,u=0;u<n.length;u++)if(f=n[u],t(r,f)){i.push(r);break}})),i):i}function i(n){var t=[];return this.forEach((function(i){var r=t.firstIndex((function(t){return n?n(i,t):i===t}));r<0&&t.push(i)})),t}function r(n,t){var i=t;return i||(i=function(n,t){return n<t?-1:n>t?1:0}),this.sort((function(t,r){var u=n(t),f=n(r);return i(u,f)}))}function u(n,t){return this.sortBy(n,t),this.reverse(),this}Array.prototype.toStringMap||Object.defineProperty(Array.prototype,"toStringMap",{value:n,configurable:!0,enumerable:!1,writable:!0});Array.prototype.intersect||Object.defineProperty(Array.prototype,"intersect",{value:t,configurable:!0,enumerable:!1,writable:!0});Array.prototype.distinct||Object.defineProperty(Array.prototype,"distinct",{value:i,configurable:!0,enumerable:!1,writable:!0});Array.prototype.sortBy||Object.defineProperty(Array.prototype,"sortBy",{value:r,configurable:!0,enumerable:!1,writable:!0});Array.prototype.sortByDescending||Object.defineProperty(Array.prototype,"sortByDescending",
{value:u,configurable:!0,enumerable:!1,writable:!0})})(t=n.Polyfills||(n.Polyfills={}))})(ExtensionCore||(ExtensionCore={})),(function(n){"use strict";function u(t){return!!(n.isObservable(t)&&t.indexOf)}function f(t,i){var r=n.observableArray();return n.reactor(t,(function(){var n=i();r.replaceAll(n)})),r.filter(t,(function(){return!0}))}function r(t){var i=t;return n.utils.extend(i,n.observableArray.fn),i.valueWillMutate=function(){throw new Error("Cannot write a value to a ko.pureComputed array. If you wish to read the current value, don't pass any parameters.");},i.valueHasMutated=function(){i.notifySubscribers(i.peek())},i}var t,i;n.isObservableArray=u;n.computedArray=f;n.observableArray.fn.replaceAll=function(n){var t=[0,this().length];return Array.prototype.push.apply(t,n),this.splice.apply(this,t)};t=n.observableArray.fn.map;n.observableArray.fn.map=function(){var n=t.apply(this,arguments);return r(n)};i=n.observableArray.fn.filter;n.observableArray.fn.filter=function(){var n=i.apply(
this,arguments);return r(n)}})(ko||(ko={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){this.id=ko.observable();this.name=ko.observable();this.ipAddress=ko.observable()}return n.metadata={name:"ClassicNetworkExtension.Models.VirtualIpAddressPickerModel",properties:{id:null,name:null,ipAddress:null},entityType:!0,idProperties:["id"]},n})(),i;n.VirtualIpAddressPickerModel=t;MsPortalFx.Data.Metadata.setTypeMetadata(t.metadata.name,t.metadata);i=(function(){function n(){this.name=ko.observable()}return n})();n.VirtualIpAddressCreateModel=i})(t=n.VIpPicker||(n.VIpPicker={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var f=(function(){function n(){this.id=ko.observable();this.name=ko.observable();this.addressSpace=ko.observable();this.subnetName=ko.observable();this.subnetAddressPrefix=ko.observable();this.primaryDnsIp=ko.observable();this.secondaryDnsIp=ko.observable();this.location=ko.observable();this.subnets=ko.observableArray(
);this.dhcpOptions=ko.observable()}return n.metadata={name:"ClassicNetworkExtension.Models.VirtualNetworkPickerModel",properties:{id:null,name:null,addressSpace:null,subnetName:null,subnetAddressPrefix:null,location:null,primaryDnsIp:null,secondaryDnsIp:null,subnets:null,dhcpOptions:null},entityType:!0,idProperties:["id"]},n})(),t,e,i,r,u;n.VirtualNetworkPickerModel=f;MsPortalFx.Data.Metadata.setTypeMetadata(f.metadata.name,f.metadata);t=(function(){function n(){this.id=ko.observable();this.name=ko.observable();this.addressPrefix=ko.observable()}return n.metadata={name:"ClassicNetworkExtension.Models.SubnetPickerDataModel",properties:{id:null,name:null,addressPrefix:null},entityType:!0,idProperties:[]},n})();n.SubnetPickerDataModel=t;MsPortalFx.Data.Metadata.setTypeMetadata(t.metadata.name,t.metadata);e=(function(){function n(){}return n})();n.SubnetProviderConfig=e;n.AddressSpaceType="ClassicNetworkExtension.Models.AddressSpace";i=(function(){function t(){}return t.metadata={name:n.AddressSpaceType,
properties:{addressPrefixes:null}},t})();n.AddressSpace=i;MsPortalFx.Data.Metadata.setTypeMetadata(i.metadata.name,i.metadata);n.SubnetType="ClassicNetworkExtension.Models.Subnet";r=(function(){function t(){this.id=ko.observable();this.name=ko.observable();this.addressPrefix=ko.observable()}return t.metadata={name:n.SubnetType,properties:{id:null,name:null,addressPrefix:null},idProperties:["id"]},t})();n.Subnet=r;MsPortalFx.Data.Metadata.setTypeMetadata(r.metadata.name,r.metadata);n.VirtualNetworkType="ClassicNetworkExtension.Models.VirtualNetwork";u=(function(){function t(){this.name=ko.observable();this.id=ko.observable();this.location=ko.observable();this.subscriptionId=ko.observable();this.resourceGroup=ko.observable();this.addressSpace=ko.observable();this.subnets=ko.observableArray()}return t.metadata={name:n.VirtualNetworkType,properties:{name:null,id:null,location:null,subscriptionId:null,resourceGroup:null,addressSpace:{itemType:n.AddressSpaceType},subnets:{itemType:n.SubnetType,isArray:
!0}},entityType:!0,idProperties:["id"]},t})();n.VirtualNetwork=u;MsPortalFx.Data.Metadata.setTypeMetadata(u.metadata.name,u.metadata)})(t=n.VnetPicker||(n.VnetPicker={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=(function(){function n(){}return n.Updating="Updating",n.Deleting="Deleting",n.Disabled="Disabled",n.None="None",n})(),r;t.ProvisioningState=i;r=(function(t){function r(n,r,u){var f=this;t.call(this);this.id=ko.observable();this.eventsOptions=ko.observable({});this.metricQuerySetting=ko.observable();this.metricsOptions=ko.observable({isDisabled:!1,disabledMessage:""});this._lifeTimeManager=n;this._uiState=u;this._uiState.subscribe(n,(function(n){f._updateBladeStatus(n)}));this._entityView=r.createView(n);ko.reactor(n,(function(){var n=f._entityView.item();n&&(f._uiState(i.None),f._updateBladeStatus(f._getAssetBladeState()))}))}return __extends(r,t),r.prototype._getAssetBladeState=function(){var t=this._entityView.item();if(
t&&t.provisioningState&&t.provisioningState())return t.provisioningState();throw new Error("The asset '{0}' doesn't seem to contain provisioningState as a property, child class should override with right state.".format(t&&(t.id||t.name)||n.Resources.noContent));},r.prototype.onInputsSet=function(n){this.id(n.id);var t=MsPortalFx.ViewModels.Services.ResourceTypes.parseResourceDescriptor(this.id());return this.title(t.resource),this._entityView.fetch({id:this.id()})},r.prototype._updateBladeStatus=function(t){t.localeCompareIgnoreCase(i.Deleting)===0?(this.contentStateDisplayText(n.Resources.BladeStatus.deleting),this.contentState(MsPortalFx.ViewModels.ContentState.Info)):t.localeCompareIgnoreCase(i.Updating)===0?(this.contentStateDisplayText(n.Resources.BladeStatus.updating),this.contentState(MsPortalFx.ViewModels.ContentState.Info)):t.localeCompareIgnoreCase(i.Disabled)===0?(this.contentStateDisplayText(n.Resources.BladeStatus.disabled),this.contentState(MsPortalFx.ViewModels.ContentState.
Warning)):(this.contentStateDisplayText(""),this.contentState(MsPortalFx.ViewModels.ContentState.None))},r})(MsPortalFx.ViewModels.Blade);t.AssetBladeBase=r})(i=t.BaseViewModels||(t.BaseViewModels={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={}));var NotificationUtility=ExtensionCore.UI.NotificationsV3,FxCommandStatus=MsPortalFx.ViewModels.CommandStatus,FxDialogs=MsPortalFx.ViewModels.Dialogs,ProvisioningState=ExtensionCore.UI.BaseViewModels.ProvisioningState,ExtensionCore;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=(function(t){function i(n,i,r){var u=this;t.call(this);this._provisioningState=ProvisioningState.Updating;this._lifeTimeManager=n;this._deleteAssetCommandStrings=i;this._uiDeleteState=r;this.icon(MsPortalFx.Base.Images.Delete());this.enabled=ko.pureComputed((function(){return u.status()!==FxCommandStatus.Executing}))}return __extends(i,t),i.prototype.onInputsSet=function(n){var t,i;return this._id=n.id,t=FxResourceTypes.parseResourceDescriptor(
this._id),this._name=t.resource,this._deleteAssetCommandStrings.deleteConfirmationMessage.indexOf("{parent}")>=0&&(i={parent:t.resources[t.resources.length-2]},this._deleteAssetCommandStrings.deleteConfirmationMessage=this._deleteAssetCommandStrings.deleteConfirmationMessage.format(i)),Q()},i.prototype.execute=function(){var n=new FxDialogs.MessageBox(this._deleteAssetCommandStrings.deleteConfirmationTitle,this._deleteAssetCommandStrings.deleteConfirmationMessage.format(this._name),FxDialogs.MessageBoxButtons.YesNo);this.dialog(n)},i.prototype.dialogClick=function(n){var t=this;n===6&&this._deleteAssetAction().finally((function(){return t.status(FxCommandStatus.None)}));this.status(FxCommandStatus.None)},i.prototype._armApiVersion=function(){var t="";switch(FxResourceTypes.parseResourceDescriptor(this._id).type.toLowerCase()){case"networksecuritygroups":t=n.Versions.ArmApiVersions.networkSecurityGroup}return t},i.prototype._deleteResource=function(){return n.ArmUtils.deleteResource(this.
_id,this._armApiVersion())},i.prototype._deleteAssetAction=function(){var i=this,t={name:this._name},r=new NotificationUtility.NotificationSettings(this._deleteAssetCommandStrings.notificationSuccessTitle,this._deleteAssetCommandStrings.notificationSuccessMessage.format(t),this._deleteAssetCommandStrings.notificationFailureTitle,this._deleteAssetCommandStrings.notificationFailureMessage.format(t),this._deleteAssetCommandStrings.notificationInProgressTitle,this._deleteAssetCommandStrings.notificationInProgressMessage.format(t)),n;return this.status(FxCommandStatus.Executing),this._uiDeleteState(this._provisioningState),n=this._deleteResource(),n.finally((function(){i._uiDeleteState(ProvisioningState.None);i.status(FxCommandStatus.None)})),NotificationUtility.trackArmOperationState(r,n),n},i})(MsPortalFx.ViewModels.Command),r;t.DeleteChildResourceCommandBase=i;r=(function(n){function t(t,i,r,u){n.call(this,t,r,u);this._provisioningState=ProvisioningState.Deleting;this._assetTypeName=i}return __extends(
t,n),t.prototype._deleteResource=function(){var t=this;return n.prototype._deleteResource.call(this).then((function(){MsPortalFx.UI.AssetManager.notifyAssetDeleted(t._assetTypeName,t._id)}))},t})(i);t.DeleteAssetCommandBase=r})(i=t.CommandViewModels||(t.CommandViewModels={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.standard="standard",n.premium="premium",n})();n.DiskType=t;n.gatewaySubnet="GatewaySubnet"})(t=n.Constants||(n.Constants={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.ShowCreateItem=1]="ShowCreateItem";n[n.ShowNoneItem=2]="ShowNoneItem"})(n.PickerDisplayFlags||(n.PickerDisplayFlags={}));var t=n.PickerDisplayFlags})(t=n.BaseViewModels||(n.BaseViewModels={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict"})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore=
{}));FxResourceTypes=MsPortalFx.ViewModels.Services.ResourceTypes;Pickers=MsPortalFx.ViewModels.ParameterCollectionV3.Pickers,(function(n){var t;(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r,u){var f=this;this._noneItem=ko.observable();this._dataNavigator=r.createNavigatorWithOptions(i,this._createNavigatorOptions());this._subscriptionId=ko.observable();this._location=ko.observable();this._resourceGroup=ko.observable();this._container=i;this._isFetchingComplete=ko.observable(!1);t.call(this,i,u,this._createPickerOptions());this.infoBoxViewModel=new MsPortalFx.ViewModels.Controls.InfoBox.ViewModel(i,u);this.parameterProvider.configFromCollector.subscribe(i,(function(t){t&&((t.displayFlags&n.PickerDisplayFlags.ShowCreateItem)===n.PickerDisplayFlags.ShowCreateItem?f.showCreateAction(!0):f.showCreateAction(!1),(t.displayFlags&n.PickerDisplayFlags.ShowNoneItem)===n.PickerDisplayFlags.ShowNoneItem&&f._noneItem(f._getNoneItem()))}))}return __extends(i,t),i.prototype.
_incomingDataReceived=function(){},i.prototype._getPickerBaseItem=function(){throw new Error("This method is abstract");},i.prototype._getCreateNewOptions=function(){throw new Error("This method is abstract. Implement this method in the derived class, and pass PickerInputs via supplyProviderConfig.");},i.prototype._mapItemsToDataModel=function(){throw new Error("This method is abstract");},i.prototype._getNoneItem=function(){throw new Error("This method is abstract. Implement this method in the derived class, and pass PickerInputs via supplyProviderConfig.");},i.prototype._findIndexToInsertAt=function(n,t,i,r){for(var f,u=i;u<r;u++)if(f=n[u].item.name().localeCompareIgnoreCase(t.name()),f>=0)return u;return r},i.prototype._createNavigatorOptions=function(){var n=this;return{createMapping:function(t,i){var r=ko.observableArray();return n._noneItem.subscribe(t,(function(n){n&&r.unshift(n)})),i.subscribeArrayChanges(t,(function(t){var e=n._getPickerBaseItem(t),i,u,f,c,h,o,s;e!==null&&(i=r(),
i.length===0?r.push(e):(u=0,f=i.firstIndex((function(n){return n.disabled()===!0})),e.disabled()?u=f>=0?n._findIndexToInsertAt(i,t,f,i.length):i.length:(h=!1,t.id()&&(c=FxResourceTypes.parseResourceDescriptor(t.id()),h=c.resourceGroup.localeCompareIgnoreCase(n._resourceGroup())===0,o=i.firstIndex((function(t){if(!t.item.id())return!1;var i=FxResourceTypes.parseResourceDescriptor(t.item.id());return!t.disabled()&&i.resourceGroup.localeCompareIgnoreCase(n._resourceGroup())!==0}))),h?(s=0,i.length>0&&!i[0].item.id()&&(s=1),u=o>=0?n._findIndexToInsertAt(i,t,s,o):f>=0?n._findIndexToInsertAt(i,t,s,f):n._findIndexToInsertAt(i,t,s,i.length)):t.id()&&(u=o>=0?f>=0?n._findIndexToInsertAt(i,t,o,f):n._findIndexToInsertAt(i,t,o,i.length):f>=0?f:i.length)),u===i.length?r.push(e):u<i.length&&(i[u].item.id()===t.id()?r.replace(i[u],e):r.splice(u,0,e))))}),(function(n){r.remove((function(t){return t.item.id()===n.id()}))})),r}}},i.prototype._createPickerOptions=function(){var n=this;return{dataNavigator:this._dataNavigator,
createNewOptions:this._getCreateNewOptions(),mapIncomingDataToDataModel:function(t){return t&&(n._incomingDataReceived(t),n._usage=t.usage),n._incomingData=t,t},loadPickerItems:function(t){n._pickerInputs=t;n._subscriptionId(t.subscriptionId);n._location(t.location);n._resourceGroup(t.resourceGroup);n._isFetchingComplete(!1);n._dataNavigator.setQuery(t).finally((function(){return n._isFetchingComplete(!0)}));var i=n.addNewGrid.getRowMetadata(n.addNewGrid.items()[0]);n._usage&&n._usage()&&n._incomingData.usage().currentValue>=n._incomingData.usage().limit?(i.disabled(!0),n.showInfoBox(!0),n.infoBoxViewModel.text(n._cannotCreateQuotaMessageFormat.format(n._incomingData.usage().limit)),n.infoBoxViewModel.image(MsPortalFx.Base.Images.StatusBadge.Warning())):i&&n._incomingData&&n._incomingData.id&&!n._incomingData.id()&&i.selected(!0)},mapItemsToDataModel:function(t){return n._mapItemsToDataModel(t)},isItemInDataModel:function(n,t){return(t&&t.id&&t.id())?n.item.id()?n.item.id().localeCompareIgnoreCase(
t.id())===0:!t.id():!1}}},i})(Pickers.PickerBase),i;n.PickerPartViewModelBaseInternal=t;i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(t);n.PickerPartViewModelBase=i})(t=n.BaseViewModels||(n.BaseViewModels={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={}));ClientResources=ExtensionCore.Resources,(function(n){var t;(function(n){"use strict";var t,i,r,o,u,f,e;n.registeredString="Registered";n.classicComputeProvider="Microsoft.ClassicCompute";t=(function(){function n(){}return n.InProgress="InProgress",n.Success="Success",n.Warning="Warning",n.Failure="Failure",n})();n.NotificationEventType=t;i=(function(){function n(){}return n.DefaultPrecision=2,n})();n.Formatter=i;r=(function(){function n(){}return n.Disabled="Disabled",n})();n.SubscriptionStatus=r,(function(n){n[n.StandardLRS=0]="StandardLRS";n[n.StandardZRS=1]="StandardZRS";n[n.StandardGRS=2]="StandardGRS";n[n.StandardRAGRS=3]="StandardRAGRS";n[n.PremiumLRS=4]="PremiumLRS"})(n.StorageAccountTypeEnum||(n.
StorageAccountTypeEnum={}));o=n.StorageAccountTypeEnum;u=(function(){function n(){}return n.PremiumLocallyRedundant="Premium-LRS",n.StandardLocallyRedundant="Standard-LRS",n.StandardZoneRedundant="Standard-ZRS",n.StandardGeoRedundant="Standard-GRS",n.StandardReadAccessGeoRedundant="Standard-RAGRS",n})();n.StorageAccountType=u;f=(function(){function n(){}return n.PremiumLocallyRedundant="Premium_LRS",n.StandardLocallyRedundant="Standard_LRS",n.StandardZoneRedundant="Standard_ZRS",n.StandardGeoRedundant="Standard_GRS",n.StandardReadAccessGeoRedundant="Standard_RAGRS",n})();n.StorageAccountPickerV2Type=f;e=(function(){function t(){}return t.PremiumStorageAccountTypes=[n.StorageAccountType.PremiumLocallyRedundant],t})();n.PremiumStorage=e;n.VmSize={A0:"ExtraSmall",A1:"Small",A2:"Medium",A3:"Large",A4:"ExtraLarge",A5:"A5",A6:"A6",A7:"A7",A8:"A8",A9:"A9",A10:"A10",A11:"A11",Basic_A0:"Basic_A0",Basic_A1:"Basic_A1",Basic_A2:"Basic_A2",Basic_A3:"Basic_A3",Basic_A4:"Basic_A4",Standard_A1_v2:"Standard_A1_v2",
Standard_A2_v2:"Standard_A2_v2",Standard_A4_v2:"Standard_A4_v2",Standard_A8_v2:"Standard_A8_v2",Standard_A2m_v2:"Standard_A2m_v2",Standard_A4m_v2:"Standard_A4m_v2",Standard_A8m_v2:"Standard_A8m_v2",Standard_D1_v2:"Standard_D1_v2",Standard_D2_v2:"Standard_D2_v2",Standard_D3_v2:"Standard_D3_v2",Standard_D4_v2:"Standard_D4_v2",Standard_D5_v2:"Standard_D5_v2",Standard_D11_v2:"Standard_D11_v2",Standard_D12_v2:"Standard_D12_v2",Standard_D13_v2:"Standard_D13_v2",Standard_D14_v2:"Standard_D14_v2",Standard_D15_v2:"Standard_D15_v2",Standard_D2_v2_Promo:"Standard_D2_v2_Promo",Standard_D3_v2_Promo:"Standard_D3_v2_Promo",Standard_D4_v2_Promo:"Standard_D4_v2_Promo",Standard_D5_v2_Promo:"Standard_D5_v2_Promo",Standard_D11_v2_Promo:"Standard_D11_v2_Promo",Standard_D12_v2_Promo:"Standard_D12_v2_Promo",Standard_D13_v2_Promo:"Standard_D13_v2_Promo",Standard_D14_v2_Promo:"Standard_D14_v2_Promo",Standard_D1:"Standard_D1",Standard_D2:"Standard_D2",Standard_D3:"Standard_D3",Standard_D4:"Standard_D4",Standard_D11:
"Standard_D11",Standard_D12:"Standard_D12",Standard_D13:"Standard_D13",Standard_D14:"Standard_D14",Standard_G1:"Standard_G1",Standard_G2:"Standard_G2",Standard_G3:"Standard_G3",Standard_G4:"Standard_G4",Standard_G5:"Standard_G5",Standard_GS1:"Standard_GS1",Standard_GS2:"Standard_GS2",Standard_GS3:"Standard_GS3",Standard_GS4:"Standard_GS4",Standard_GS5:"Standard_GS5",Standard_DS1:"Standard_DS1",Standard_DS2:"Standard_DS2",Standard_DS3:"Standard_DS3",Standard_DS4:"Standard_DS4",Standard_DS11:"Standard_DS11",Standard_DS12:"Standard_DS12",Standard_DS13:"Standard_DS13",Standard_DS14:"Standard_DS14",Standard_DS1_v2:"Standard_DS1_v2",Standard_DS2_v2:"Standard_DS2_v2",Standard_DS3_v2:"Standard_DS3_v2",Standard_DS4_v2:"Standard_DS4_v2",Standard_DS5_v2:"Standard_DS5_v2",Standard_DS11_v2:"Standard_DS11_v2",Standard_DS12_v2:"Standard_DS12_v2",Standard_DS13_v2:"Standard_DS13_v2",Standard_DS14_v2:"Standard_DS14_v2",Standard_DS15_v2:"Standard_DS15_v2",Standard_DS2_v2_Promo:"Standard_DS2_v2_Promo",Standard_DS3_v2_Promo:
"Standard_DS3_v2_Promo",Standard_DS4_v2_Promo:"Standard_DS4_v2_Promo",Standard_DS5_v2_Promo:"Standard_DS5_v2_Promo",Standard_DS11_v2_Promo:"Standard_DS11_v2_Promo",Standard_DS12_v2_Promo:"Standard_DS12_v2_Promo",Standard_DS13_v2_Promo:"Standard_DS13_v2_Promo",Standard_DS14_v2_Promo:"Standard_DS14_v2_Promo",Standard_F1:"Standard_F1",Standard_F2:"Standard_F2",Standard_F4:"Standard_F4",Standard_F8:"Standard_F8",Standard_F16:"Standard_F16",Standard_F1s:"Standard_F1s",Standard_F2s:"Standard_F2s",Standard_F4s:"Standard_F4s",Standard_F8s:"Standard_F8s",Standard_F16s:"Standard_F16s",Standard_H8:"Standard_H8",Standard_H8m:"Standard_H8m",Standard_H16:"Standard_H16",Standard_H16m:"Standard_H16m",Standard_H16r:"Standard_H16r",Standard_H16mr:"Standard_H16mr",Standard_NV6:"Standard_NV6",Standard_NV12:"Standard_NV12",Standard_NV24:"Standard_NV24",Standard_NC6:"Standard_NC6",Standard_NC12:"Standard_NC12",Standard_NC24:"Standard_NC24",Standard_NC24r:"Standard_NC24r",Standard_L4s:"Standard_L4s",Standard_L8s:
"Standard_L8s",Standard_L16s:"Standard_L16s",Standard_L32s:"Standard_L32s"};n.PremiumSupportedSizes=[n.VmSize.Standard_DS1,n.VmSize.Standard_DS2,n.VmSize.Standard_DS3,n.VmSize.Standard_DS4,n.VmSize.Standard_DS11,n.VmSize.Standard_DS12,n.VmSize.Standard_DS13,n.VmSize.Standard_DS14,n.VmSize.Standard_DS1_v2,n.VmSize.Standard_DS2_v2,n.VmSize.Standard_DS3_v2,n.VmSize.Standard_DS4_v2,n.VmSize.Standard_DS5_v2,n.VmSize.Standard_DS11_v2,n.VmSize.Standard_DS12_v2,n.VmSize.Standard_DS13_v2,n.VmSize.Standard_DS14_v2,n.VmSize.Standard_DS15_v2,n.VmSize.Standard_GS1,n.VmSize.Standard_GS2,n.VmSize.Standard_GS3,n.VmSize.Standard_GS4,n.VmSize.Standard_GS5,n.VmSize.Standard_F1s,n.VmSize.Standard_F2s,n.VmSize.Standard_F4s,n.VmSize.Standard_F8s,n.VmSize.Standard_F16s,n.VmSize.Standard_L4s,n.VmSize.Standard_L8s,n.VmSize.Standard_L16s,n.VmSize.Standard_L32s,];n.V1Providers={classicStorageProvider:"Microsoft.ClassicStorage",networkClassicProvider:"Microsoft.ClassicNetwork",recoveryServicesProvider:"Microsoft.RecoveryServices"};
n.NetworkSecurityGroupSecurityRuleTypes={inboundRule:"Inbound",outboundRule:"Outbound"};n.SecurityRuleAccess={Allow:"Allow",Deny:"Deny"};n.ProtocolNames={Asterisk:"*",Any:"Any",UDP:"UDP",TCP:"TCP",HTTP:"HTTP",HTTPS:"HTTPS",InternalUdp:"Udp",InternalTcp:"Tcp",InternalHTTP:"Http"};n.SourceAndDestinationFilter={Asterisk:"*",Any:"Any",CidrBlock:"CIDR block",Tag:"Tag"};n.SecurityRulesTags={Internet:"INTERNET",VirtualNetwork:"VIRTUAL_NETWORK",AzureLoadBalancer:"AZURE_LOADBALANCER"};n.NetworkSecurityGroupPortRange={Asterisk:"*",Any:"Any",Range:"-",minValue:0,maxValue:65535};n.SecurityRuleLimits={nameMaxLength:260,priorityMinValue:100,priorityMaxValue:4096,priorityStepSize:10};n.IpAddressDefaults={defaultSubnet:"10.0.0.0/24"};n.ServiceNames={Custom:"Custom",UDP_DNS:"DNS (UDP)",TCP_RDP:"RDP",TCP_WinRM:"WinRM",TCP_SSH:"SSH",TCP_FTP:"FTP",TCP_SMTP:"SMTP",TCP_DNS:"DNS (TCP)",TCP_HTTP:"HTTP",TCP_POP3:"POP3",TCP_IMAP:"IMAP",TCP_LDAP:"LDAP",TCP_HTTPS:"HTTPS",TCP_SMTPS:"SMTPS",TCP_IMAPS:"IMAPS",TCP_POP3S:
"POP3S",TCP_MS_SQL:"MS SQL",TCP_MySQL:"MySQL",TCP_PostgreSQL:"PostgreSQL",TCP_RabbitMQ:"RabbitMQ",TCP_CouchDB_HTTP:"CouchDB",TCP_Redis:"Redis",TCP_CouchDB_HTTPS:"CouchDB (HTTPS)",TCP_Cassandra_JMX:"Cassandra (JMX)",TCP_Neo4J:"Neo4J",TCP_Riak:"Riak",TCP_Riak_JMX:"Riak (JMX)",TCP_Cassandra:"Cassandra",TCP_Cassandra_Thrift:"Cassandra (Thrift)",TCP_ElasticSearch:"ElasticSearch",TCP_Memcached:"Memcached",TCP_Kestrel:"Kestrel",TCP_MongoDB:"MongoDB",TCP_Dynamic_Ports:"Dynamic ports"};n.CommonPorts={Custom:-1,Port_21:21,Port_22:22,Port_25:25,Port_53:53,Port_80:80,Port_110:110,Port_143:143,Port_389:389,Port_443:443,Port_465:465,Port_993:993,Port_995:995,Port_1433:1433,Port_3306:3306,Port_3389:3389,Port_5432:5432,Port_5672:5672,Port_5984:5984,Port_5986:5986,Port_6379:6379,Port_6984:6984,Port_7199:7199,Port_7474:7474,Port_8093:8093,Port_8985:8985,Port_9042:9042,Port_9160:9160,Port_9200:9200,Port_11211:11211,Port_22133:22133,Port_27017:27017,Port_49152:49152};n.ServiceNamesInGrid={UDP_DNS:"DNS",TCP_DNS:
"DNS",TCP_CouchDB_HTTP:"CouchDB",TCP_CouchDB_HTTPS:"CouchDB",TCP_Cassandra_JMX:"Cassandra JMX",TCP_Riak_JMX:"Riak JMX",TCP_Cassandra_Thrift:"Cassandra Thrift"};n.PortRange={Asterisk:"*",Any:"Any",ApplicationGatewayListenerMinPortValue:1,Range:"-",minValue:0,maxValue:65535}})(t=n.Constants||(n.Constants={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n){var t=MsPortalFx.UI.NotificationManager.create(n.notificationDefinition.name);i(t,n)}function i(t,i){t.raise(i.notificationDefinition.inProgress,i.assetId,i.properties);i.promise.then((function(){t.raise(i.notificationDefinition.success,i.assetId,i.properties)}),(function(r){var u=typeof r=="string"?r:n.Utilities.getXhrError(r),f;u||(u=n.Resources.genericErrorMessage);f=$.extend({},{errorMessage:u},i.properties);t.raise(i.notificationDefinition.error,i.assetId,f)}))}t.createNotificationFromPromise=r;t.attachPromiseToNotification=i})(i=t.Notifications||(t.Notifications={}))})(
t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function i(n){if(!n)return!1;return["australiaeast","australiasoutheast","brazilsouth","canadacentral","canadaeast","centralindia","centralus","eastasia","eastus","eastus2","japaneast","japanwest","northcentralus","northeurope","southcentralus","southeastasia","southindia","uksouth","ukwest","westcentralus","westeurope","westus","westus2","chinaeast","chinanorth","germanycentral","germanynortheast","usgov","usgoveast","usgovvirginia","usgoviowa","koreacentral","koreasouth",].indexOf(n.toLowerCase())!==-1}function r(t){var r=undefined,i={};return i[n.Constants.VmSize.Basic_A0]=n.Constants.VmSize.Standard_DS1,i[n.Constants.VmSize.Basic_A1]=n.Constants.VmSize.Standard_DS1,i[n.Constants.VmSize.Basic_A2]=n.Constants.VmSize.Standard_DS2,i[n.Constants.VmSize.Basic_A3]=n.Constants.VmSize.Standard_DS3,i[n.Constants.VmSize.Basic_A4]=n.Constants.VmSize.Standard_DS4,i[n.Constants.VmSize.A0]=n.Constants.
VmSize.Standard_DS1,i[n.Constants.VmSize.A1]=n.Constants.VmSize.Standard_DS1,i[n.Constants.VmSize.A2]=n.Constants.VmSize.Standard_DS2,i[n.Constants.VmSize.A3]=n.Constants.VmSize.Standard_DS3,i[n.Constants.VmSize.A4]=n.Constants.VmSize.Standard_DS4,i[n.Constants.VmSize.A5]=n.Constants.VmSize.Standard_DS11,i[n.Constants.VmSize.A6]=n.Constants.VmSize.Standard_DS12,i[n.Constants.VmSize.A7]=n.Constants.VmSize.Standard_DS13,i[n.Constants.VmSize.A8]=undefined,i[n.Constants.VmSize.A9]=undefined,i[n.Constants.VmSize.A10]=undefined,i[n.Constants.VmSize.A11]=undefined,i[n.Constants.VmSize.Standard_A1_v2]=n.Constants.VmSize.Standard_DS1_v2,i[n.Constants.VmSize.Standard_A2_v2]=n.Constants.VmSize.Standard_DS2_v2,i[n.Constants.VmSize.Standard_A4_v2]=n.Constants.VmSize.Standard_DS4_v2,i[n.Constants.VmSize.Standard_A8_v2]=undefined,i[n.Constants.VmSize.Standard_A2m_v2]=undefined,i[n.Constants.VmSize.Standard_A4m_v2]=undefined,i[n.Constants.VmSize.Standard_A8m_v2]=undefined,i[n.Constants.VmSize.Standard_D1]=
n.Constants.VmSize.Standard_DS1,i[n.Constants.VmSize.Standard_D2]=n.Constants.VmSize.Standard_DS2,i[n.Constants.VmSize.Standard_D3]=n.Constants.VmSize.Standard_DS3,i[n.Constants.VmSize.Standard_D4]=n.Constants.VmSize.Standard_DS4,i[n.Constants.VmSize.Standard_D11]=n.Constants.VmSize.Standard_DS11,i[n.Constants.VmSize.Standard_D12]=n.Constants.VmSize.Standard_DS12,i[n.Constants.VmSize.Standard_D13]=n.Constants.VmSize.Standard_DS13,i[n.Constants.VmSize.Standard_D14]=n.Constants.VmSize.Standard_DS14,i[n.Constants.VmSize.Standard_D1_v2]=n.Constants.VmSize.Standard_DS1_v2,i[n.Constants.VmSize.Standard_D2_v2]=n.Constants.VmSize.Standard_DS2_v2,i[n.Constants.VmSize.Standard_D3_v2]=n.Constants.VmSize.Standard_DS3_v2,i[n.Constants.VmSize.Standard_D4_v2]=n.Constants.VmSize.Standard_DS4_v2,i[n.Constants.VmSize.Standard_D5_v2]=n.Constants.VmSize.Standard_DS5_v2,i[n.Constants.VmSize.Standard_D11_v2]=n.Constants.VmSize.Standard_DS11_v2,i[n.Constants.VmSize.Standard_D12_v2]=n.Constants.VmSize.Standard_DS12_v2,
i[n.Constants.VmSize.Standard_D13_v2]=n.Constants.VmSize.Standard_DS13_v2,i[n.Constants.VmSize.Standard_D14_v2]=n.Constants.VmSize.Standard_DS14_v2,i[n.Constants.VmSize.Standard_D15_v2]=n.Constants.VmSize.Standard_DS15_v2,i[n.Constants.VmSize.Standard_D2_v2_Promo]=n.Constants.VmSize.Standard_DS2_v2_Promo,i[n.Constants.VmSize.Standard_D3_v2_Promo]=n.Constants.VmSize.Standard_DS3_v2_Promo,i[n.Constants.VmSize.Standard_D4_v2_Promo]=n.Constants.VmSize.Standard_DS4_v2_Promo,i[n.Constants.VmSize.Standard_D5_v2_Promo]=n.Constants.VmSize.Standard_DS5_v2_Promo,i[n.Constants.VmSize.Standard_D11_v2_Promo]=n.Constants.VmSize.Standard_DS11_v2_Promo,i[n.Constants.VmSize.Standard_D12_v2_Promo]=n.Constants.VmSize.Standard_DS12_v2_Promo,i[n.Constants.VmSize.Standard_D13_v2_Promo]=n.Constants.VmSize.Standard_DS13_v2_Promo,i[n.Constants.VmSize.Standard_D14_v2_Promo]=n.Constants.VmSize.Standard_DS14_v2_Promo,i[n.Constants.VmSize.Standard_DS1]=n.Constants.VmSize.Standard_DS1,i[n.Constants.VmSize.Standard_DS2]=
n.Constants.VmSize.Standard_DS2,i[n.Constants.VmSize.Standard_DS3]=n.Constants.VmSize.Standard_DS3,i[n.Constants.VmSize.Standard_DS4]=n.Constants.VmSize.Standard_DS4,i[n.Constants.VmSize.Standard_DS11]=n.Constants.VmSize.Standard_DS11,i[n.Constants.VmSize.Standard_DS12]=n.Constants.VmSize.Standard_DS12,i[n.Constants.VmSize.Standard_DS13]=n.Constants.VmSize.Standard_DS13,i[n.Constants.VmSize.Standard_DS14]=n.Constants.VmSize.Standard_DS14,i[n.Constants.VmSize.Standard_DS1_v2]=n.Constants.VmSize.Standard_DS1_v2,i[n.Constants.VmSize.Standard_DS2_v2]=n.Constants.VmSize.Standard_DS2_v2,i[n.Constants.VmSize.Standard_DS3_v2]=n.Constants.VmSize.Standard_DS3_v2,i[n.Constants.VmSize.Standard_DS4_v2]=n.Constants.VmSize.Standard_DS4_v2,i[n.Constants.VmSize.Standard_DS5_v2]=n.Constants.VmSize.Standard_DS5_v2,i[n.Constants.VmSize.Standard_DS11_v2]=n.Constants.VmSize.Standard_DS11_v2,i[n.Constants.VmSize.Standard_DS12_v2]=n.Constants.VmSize.Standard_DS12_v2,i[n.Constants.VmSize.Standard_DS13_v2]=n.Constants.
VmSize.Standard_DS13_v2,i[n.Constants.VmSize.Standard_DS14_v2]=n.Constants.VmSize.Standard_DS14_v2,i[n.Constants.VmSize.Standard_DS15_v2]=n.Constants.VmSize.Standard_DS15_v2,i[n.Constants.VmSize.Standard_DS2_v2_Promo]=n.Constants.VmSize.Standard_DS2_v2_Promo,i[n.Constants.VmSize.Standard_DS3_v2_Promo]=n.Constants.VmSize.Standard_DS3_v2_Promo,i[n.Constants.VmSize.Standard_DS4_v2_Promo]=n.Constants.VmSize.Standard_DS4_v2_Promo,i[n.Constants.VmSize.Standard_DS5_v2_Promo]=n.Constants.VmSize.Standard_DS5_v2_Promo,i[n.Constants.VmSize.Standard_DS11_v2_Promo]=n.Constants.VmSize.Standard_DS11_v2_Promo,i[n.Constants.VmSize.Standard_DS12_v2_Promo]=n.Constants.VmSize.Standard_DS12_v2_Promo,i[n.Constants.VmSize.Standard_DS13_v2_Promo]=n.Constants.VmSize.Standard_DS13_v2_Promo,i[n.Constants.VmSize.Standard_DS14_v2_Promo]=n.Constants.VmSize.Standard_DS14_v2_Promo,i[n.Constants.VmSize.Standard_G1]=n.Constants.VmSize.Standard_GS1,i[n.Constants.VmSize.Standard_G2]=n.Constants.VmSize.Standard_GS2,i[n.Constants.
VmSize.Standard_G3]=n.Constants.VmSize.Standard_GS3,i[n.Constants.VmSize.Standard_G4]=n.Constants.VmSize.Standard_GS4,i[n.Constants.VmSize.Standard_G5]=n.Constants.VmSize.Standard_GS5,i[n.Constants.VmSize.Standard_GS1]=n.Constants.VmSize.Standard_GS1,i[n.Constants.VmSize.Standard_GS2]=n.Constants.VmSize.Standard_GS2,i[n.Constants.VmSize.Standard_GS3]=n.Constants.VmSize.Standard_GS3,i[n.Constants.VmSize.Standard_GS4]=n.Constants.VmSize.Standard_GS4,i[n.Constants.VmSize.Standard_GS5]=n.Constants.VmSize.Standard_GS5,i[n.Constants.VmSize.Standard_F1]=n.Constants.VmSize.Standard_F1s,i[n.Constants.VmSize.Standard_F2]=n.Constants.VmSize.Standard_F2s,i[n.Constants.VmSize.Standard_F4]=n.Constants.VmSize.Standard_F4s,i[n.Constants.VmSize.Standard_F8]=n.Constants.VmSize.Standard_F8s,i[n.Constants.VmSize.Standard_F16]=n.Constants.VmSize.Standard_F16s,i[n.Constants.VmSize.Standard_F1s]=n.Constants.VmSize.Standard_F1s,i[n.Constants.VmSize.Standard_F2s]=n.Constants.VmSize.Standard_F2s,i[n.Constants.VmSize.
Standard_F4s]=n.Constants.VmSize.Standard_F4s,i[n.Constants.VmSize.Standard_F8s]=n.Constants.VmSize.Standard_F8s,i[n.Constants.VmSize.Standard_F16s]=n.Constants.VmSize.Standard_F16s,i[n.Constants.VmSize.Standard_H8]=undefined,i[n.Constants.VmSize.Standard_H8m]=undefined,i[n.Constants.VmSize.Standard_H16]=undefined,i[n.Constants.VmSize.Standard_H16m]=undefined,i[n.Constants.VmSize.Standard_H16r]=undefined,i[n.Constants.VmSize.Standard_H16mr]=undefined,i[n.Constants.VmSize.Standard_NC6]=undefined,i[n.Constants.VmSize.Standard_NC12]=undefined,i[n.Constants.VmSize.Standard_NC24r]=undefined,i[n.Constants.VmSize.Standard_NV6]=undefined,i[n.Constants.VmSize.Standard_NV12]=undefined,i[n.Constants.VmSize.Standard_NV24]=undefined,i[n.Constants.VmSize.Standard_NV24]=undefined,i[n.Constants.VmSize.Standard_L4s]=n.Constants.VmSize.Standard_L4s,i[n.Constants.VmSize.Standard_L8s]=n.Constants.VmSize.Standard_L8s,i[n.Constants.VmSize.Standard_L16s]=n.Constants.VmSize.Standard_L16s,i[n.Constants.VmSize.
Standard_L32s]=n.Constants.VmSize.Standard_L32s,t&&(r=i[t]),r}function u(t){var i=t;switch(t){case n.Constants.StorageAccountType.StandardGeoRedundant:i=n.Resources.StorageAccount.Type.StandardGeoRedundant.name;break;case n.Constants.StorageAccountType.StandardLocallyRedundant:i=n.Resources.StorageAccount.Type.StandardLocallyRedundant.name;break;case n.Constants.StorageAccountType.StandardReadAccessGeoRedundant:i=n.Resources.StorageAccount.Type.StandardReadAccessGeoRedundant.name;break;case n.Constants.StorageAccountType.StandardZoneRedundant:i=n.Resources.StorageAccount.Type.StandardZoneRedundant.name;break;case n.Constants.StorageAccountType.PremiumLocallyRedundant:i=n.Resources.StorageAccount.Type.PremiumLocallyRedundant.name;break;default:MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"StorageAccount","Unknown storage account type '{0}'".format(t))}return i}t.doesRegionSupportPremiumDisks=i;t.getSuggestedVMSizeForPremiumDisk=r;t.getStorageAccountTypeDisplayName=
u})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function o(n){var t=new Date;return n&&n.toUpperCase().endsWith("-ARM")&&(n=n.substring(0,n.length-4)),n=n.substr(0,49),"{0}-{1}{2}{3}{4}{5}{6}".format(n,t.getFullYear(),i(t.getMonth()),i(t.getDate()),i(t.getHours()),i(t.getMinutes()),i(t.getSeconds()))}function i(n){var t=n.toString();return t&&t.length===1?"0"+t:t}function s(){return{enableRbac:!0,enableSupportEventLogs:!0,enableSupportHelpRequest:!0,groupable:!0}}function h(){return Array(n.Resources.Keyword.id,n.Resources.Keyword.health,n.Resources.Keyword.location,n.Resources.Keyword.name,n.Resources.Keyword.migrate,n.Resources.Keyword.region,n.Resources.Keyword.status,n.Resources.Keyword.subscription)}function c(){return Array(n.Resources.Keyword.id,n.Resources.Keyword.essential,n.Resources.Keyword.health,n.Resources.Keyword.location,n.Resources.Keyword.name,n.Resources.Keyword.overview,n.Resources.Keyword.region,n.
Resources.Keyword.status,n.Resources.Keyword.subscription,n.Resources.Keyword.summary)}function f(){return r||(r=MsPortalFx.Azure.getLocations().then((function(n){return u=n,n}),(function(n){MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"getLocations","Failed to load locations: {0}".format(FxImpl.Diagnostics.getLogFriendlyMessage(n)));r=null;throw n;}))),r}function e(n,t){if(!t)return MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"getLocationDisplayName","Invoked getLocationDisplayName with locationsMap as {0}".format(t)),n;var i=t[n];return i||(i=t[MsPortalFx.replaceAll(n," ","").toLowerCase()]),i||(MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"getLocationDisplayName","Unknown location: {0}".format(n)),i=n),i}function l(n){return u?e(n,u):(MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"getLocationDisplayNameAsync",
"Invoked before getLocations() is loaded"),f(),n)}function a(n,t,i){var u=i.createChildLifetime(),r=MsPortalFx.ViewModels.Part.createSelectableViewModel(),f=n.name,e="hotspotId"+t().length;i.registerSelectable(u,e,r);r.selectedValue({extension:n.extension,detailBlade:n.detailBlade,detailBladeInputs:n.detailBladeInputs});t.push({label:ko.observable(f),selectable:r,lifetime:u})}t.getDeploymentName=o;t.normalizeDateValue=i;t.getCommonSettingListOptions=s;t.getPropertiesKeywords=h;t.getSummaryKeywords=c;var u=null,r=null;t.getLocations=f;t.getLocationDisplayName=e;t.getLocationDisplayNameAsync=l;t.addHotspot=a})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){if(this._isValueCreated=!1,!n)throw new Error("valueFactory cannot be null or undefined");this._valueFactory=n}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value||(this._value=this._valueFactory(),this._isValueCreated=
!0),this._value},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isValueCreated",{get:function(){return this._isValueCreated},enumerable:!0,configurable:!0}),n})();n.Lazy=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function i(t,i,r){var u=n.ArmUtils.endpoint+"/subscriptions/{0}/providers/{1}/locations/{2}/usages?api-version=2015-06-15".format(t,i,r);return n.ArmUtils.corsCollectionSupplier("GET",u,null,null)}t.ListUsages=i})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";function t(n,t){ko.reactor(n,(function(){n.selectable.selectedValue(t())}))}n.bindContainerSelectedValue=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";function i(n,i,r,u){u||(u=3);var e=0,f=$.Deferred(),o=function(){n().done((function(n){var u=i(n);u.status===t.CompleteSuccess?f.resolve(u.response):
u.status===t.CompleteFailure?f.reject(u.error):u.status===t.NotComplete&&setTimeout(o,r)})).fail((function(n){e++;e>u?f.reject(n):setTimeout(o,r*e)}))};return setTimeout(o,r),f.promise()}function r(n,i,r,u){u===void 0&&(u=3);var e=0,f=Q.defer(),o=function(){n().then((function(n){var u=i(n);u.status===t.CompleteSuccess?f.resolve(u.response):u.status===t.CompleteFailure?f.reject(u.error):u.status===t.NotComplete&&setTimeout(o,r)})).catch((function(n){e++;e>u?f.reject(n):setTimeout(o,r*e)}))};return setTimeout(o,r),f.promise}n.setPolling=i;n.setPollingQ=r,(function(n){n[n.CompleteSuccess=0]="CompleteSuccess";n[n.CompleteFailure=1]="CompleteFailure";n[n.NotComplete=2]="NotComplete"})(n.PollStatus||(n.PollStatus={}));var t=n.PollStatus})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={}));Constants=ExtensionCore.Constants;Usage=ExtensionCore.Models.Usage,(function(n){var t;(function(t){"use strict";function u(n){return r(n.locationSelector,n)}function f(n){return r(n.subscriptionSelector,
n)}function r(t,r){var u=Q.defer(),f=r.locationSelector.value()&&r.locationSelector.value().name();return r.showRegistrationInfo(!1),f&&(!r.resourceProvidersAreRegistered||r.resourceProvidersAreRegistered())?r.quotaData.getQuotasForLocation(r.locationSelector.value().name(),r.subscriptionSelector.value().subscriptionID).then((function(n){u.resolve(i(n,t,r))}),(function(f){f&&f.message?MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Utilities.getQuotas","Unable to retrieve quotas for subscription {0}. The error message was: {1}.".format(r.subscriptionSelector.value().subscriptionID,f.message)):MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Utilities.getQuotas","Unable to retrieve quotas for subscription {0}.".format(r.subscriptionSelector.value().subscriptionID));r.registrationInfoBox.image(MsPortalFx.Base.Images.StatusBadge.Warning());r.registrationInfoBox.text(n.Resources.
Quota.quotaRetrievalFailed);r.showRegistrationInfo(!0);u.resolve(i([],t,r))})):u.resolve({valid:!0,message:""}),u.promise}function e(t,i){var u=Q.defer(),r={isInitialComputeRegistered:!1,isInsightsRegistered:!1,isComputeRegistered:!1,isNetworkRegistered:!1,isStorageRegistered:!1};return i.getRegistrationStatus(t).then((function(t){StringEx.equals(n.Constants.registeredString,t.initialComputeStatus,StringComparison.IgnoreCase)&&(r.isInitialComputeRegistered=!0);StringEx.equals(n.Constants.registeredString,t.insightsStatus,StringComparison.IgnoreCase)&&(r.isInsightsRegistered=!0);StringEx.equals(n.Constants.registeredString,t.computeStatus,StringComparison.IgnoreCase)&&(r.isComputeRegistered=!0);StringEx.equals(n.Constants.registeredString,t.networkStatus,StringComparison.IgnoreCase)&&(r.isNetworkRegistered=!0);StringEx.equals(n.Constants.registeredString,t.storageStatus,StringComparison.IgnoreCase)&&(r.isStorageRegistered=!0);u.resolve(r)}),(function(n){n&&n.message?MsPortalFx.Base.Diagnostics.
Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Utilities.getRegistrationStatus","Unable to retrieve registration status for subscription {0}. The error message was: {1}.".format(t,n.message)):MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Utilities.getRegistrationStatus","Unable to retrieve registration status for subscription {0}.".format(t));u.resolve(r)})),u.promise}function i(t,i,r){var f="",u=!0;return t&&t.length>0&&r.quotas.forEach((function(i){if(u){var r=t&&t.first((function(n){return StringEx.equals(n.name.value,Usage.GetUsageName(i.usageType),StringComparison.IgnoreCase)}));i.showType(!0);r&&r.currentValue>=r.limit&&(i.showType(!1),u=!1,f=n.Resources.Quota.full.format(r.name.localizedValue,r.currentValue,r.name.localizedValue))}})),r.registrationInfoBox.image(MsPortalFx.Base.Images.StatusBadge.Error()),r.registrationInfoBox.text(f),r.showRegistrationInfo(!u),u&&i===r.subscriptionSelector&&
!r.locationSelector.valid()&&r.locationSelector.triggerValidation(),u&&i===r.locationSelector&&!r.subscriptionSelector.valid()&&r.subscriptionSelector.triggerValidation(),{valid:u,message:f}}t.getQuotasForLocation=u;t.getQuotasForSubscription=f;t.getRegistrationStatus=e;t.quotasReceived=i;var o=(function(){function t(){}return t.prototype.getQuotasForLocation=function(t,i){return n.Validation.Requires.Argument("location",t).notNullOrEmpty(),n.Validation.Requires.Argument("subscriptionId",i).notNullOrEmpty(),n.Net.get("/subscriptions/{0}/providers/Microsoft.Compute/Usages/{1}".format(i,t))},t.prototype.getRegistrationStatus=function(t){return n.Net.get("/subscriptions/{0}/providerRegistration/registration".format(t))},t})();t.QuotaData=o})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=[{name:"B",localizedName:n.Resources.bytes,localizedLongName:n.Resources.bytesLong,conversionFactor:""},{name:"KB",localizedName:n.Resources.
kiloBytes,localizedLongName:n.Resources.kiloBytesLong,conversionFactor:"k"},{name:"MB",localizedName:n.Resources.megaBytes,localizedLongName:n.Resources.megaBytesLong,conversionFactor:"M"},{name:"GB",localizedName:n.Resources.gigaBytes,localizedLongName:n.Resources.gigaBytesLong,conversionFactor:"g"},{name:"TB",localizedName:n.Resources.teraBytes,localizedLongName:n.Resources.teraBytesLong,conversionFactor:"T"},{name:"PT",localizedName:n.Resources.petaBytes,localizedLongName:n.Resources.petaBytesLong,conversionFactor:"P"},{name:"EB",localizedName:n.Resources.exaBytes,localizedLongName:n.Resources.exaBytesLong,conversionFactor:"E"},{name:"ZB",localizedName:n.Resources.zettaBytes,localizedLongName:n.Resources.zettaBytesLong,conversionFactor:"Z"},{name:"YB",localizedName:n.Resources.yottaBytes,localizedLongName:n.Resources.yottaBytesLong,conversionFactor:"Y"}],r=(function(){function t(){}return t.addCommas=function(n){for(var i=n.split("."),t=i[0],u=i.length>1?"."+i[1]:"",r=/(\d+)(\d{3})/;
r.test(t);)t=t.replace(r,"$1,$2");return t+u},t.roundNumber=function(n,t){return n%1!=0?parseFloat(n.toFixed(t)):n},t.getFileSizeFormat=function(r,u,f){var o=u&&$.map(i,(function(n){return n.name})).indexOf(u)||0,e=o,s=r||0;return f=isNaN(f)?n.Constants.Formatter.DefaultPrecision:f,r&&r>=1024&&(e=Math.floor(Math.log(r)/Math.log(1024)),s=r/Math.pow(1024,e),e=o+e,e=e<i.length?e:i.length-1),{value:t.roundNumber(s,f),unitName:i[e].name,unitDisplayName:i[e].localizedName,unitLongDisplayName:i[e].localizedLongName,conversionFactor:i[e].conversionFactor,conversionValue:Math.pow(1024,o-e)}},t.convertDateSizeFormat=function(n,t,r){var f=t&&$.map(i,(function(n){return n.name})).indexOf(t)||0,u=r&&$.map(i,(function(n){return n.name})).indexOf(r)||0,e=parseFloat((n/Math.pow(1024,u-f)).toFixed(2));return{value:e,unitName:i[u].name,unitDisplayName:i[u].localizedName,unitLongDisplayName:i[u].localizedLongName}},t})();t.Formatters=r})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(
n){var t;(function(t){"use strict";function i(){var i=Q.defer(),r=[],t=[];return n.Csm.getSubscriptionIdsAsync().then((function(u){u.forEach((function(t){var i=n.ArmUtils.endpoint+"/subscriptions/{0}/resourceGroups{1}".format(t,ArmApiVersions.resources),u=n.ArmUtils.corsCollectionSupplier("GET",i,null,null);r.push(u)}));Q.all(r).then((function(n){n.forEach((function(n){t=t.concat(n)}));i.resolve(t)}))})),i.promise}function r(n){var t=n.replace(/\s/g,"").toLowerCase(),i=StringEx.convertToStringMap(window.fx.environment.restrictedCsmRegions);for(var r in i)if(StringEx.equals(r,t,StringComparison.IgnoreCase))return i[r];return t}function u(t){var i=Q.defer(),r="{0}{1}?api-version=2015-01-01".format(window.fx.environment.csmManagementServiceUri,t);return n.ArmUtils.corsDataSupplier("GET",r,null,null).then((function(n){n?i.resolve(n):(MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ResourceGroups ExtensionCore.Csm.getResourceGroupFromArm","The returned RG result was missing a location property with a value. Resource id was: {0}. Resource object was: {1}.".
format(t,ko.toJSON(n))),i.resolve(null))})).catch((function(n){MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Error,"ResourceGroups ExtensionCore.Csm.getResourceGroupLocationFromArm","Failed to get resource group location for id: {0}. Reason: {1}.".format(t,FxImpl.Diagnostics.getLogFriendlyMessage(n)));i.reject(n)})),i.promise}t.getResourceGroupsAsync=i;t.getResourceGroupLocation=r;t.getResourceGroup=u})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.isResourceGroup=function(n){if(n){var t=n.split("/");if(t&&t.length===5)return t[0]===""&&t[1].toUpperCase()==="subscriptions".toUpperCase()&&t[2]!==""&&t[3].toUpperCase()==="resourceGroups".toUpperCase()&&t[4]!==""}return!1},n.parseResourceGroupId=function(t){if(t&&n.isResourceGroup(t)){var i=t.split("/");return{subscriptionId:i[2],name:i[4]}}return null},n.getResourceGroupId=function(n,t){return"/subscriptions/{0}/resourcegroups/{1}".
format(n,t)},n})();n.ResourceUri=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){this._entries={}}return n.prototype.addItem=function(n,t){if(this._entries[n])throw new Error("InvalidOperationException: item with key '{0}' already exists in the cache".format(n));return this._entries[n]={item:t,refcount:1},t},n.prototype.getItem=function(n){var t=this._entries[n];return t?(t.refcount+=1,t.item):null},n.prototype.getOrAddItem=function(n,t){return this.getItem(n)||this.addItem(n,t())},n.prototype.releaseItem=function(n,t){var i=this._entries[n];if(!i){MsPortalFx.Base.Diagnostics.Log.writeEntry(MsPortalFx.Base.Diagnostics.LogEntryLevel.Warning,"ExtensionCore.Internal.RefCountCache","RefCountCache.release: item with key '{0}' does not exist in cache".format(n));return}i.refcount-=1;i.refcount<=0&&this.removeItem(n,t)},n.prototype.removeItem=function(n,t){this._entries[n]&&(t&&t(this._entries[n].item),delete
this._entries[n])},n.prototype.peekAtItem=function(n){var t=this._entries[n];return t?t.item:null},n})();n.RefCountCache=t})(t=n.Internal||(n.Internal={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function i(n){n.mergeFromOriginal();n.revertAll()}function f(n){var t=ko.isObservable(n.root)?n.root():n.root;$.isArray(t)?r(n,n.root,n._getArrayState(n.root).original,n.getCreated(n.root)):$.each(t,(function(t,i){ko.isObservableArray(i)?o(n,i)?s(n,t):u(n,t):ko.isObservable(i)&&u(n,t)}));i(n)}function e(n,t){var i=[],r=n.getCreated(t);return t().forEach((function(t){n.getEditState(t)()!==MsPortalFx.Data.EditState.Deleted&&i.push(t)})),r().forEach((function(n){i.push(n)})),ko.observableArray(i)}function o(n,t){var r=n._arrayStateKey,i=MsPortalFx.Base.ProxiedObservables.data(t,r);return i&&i.typeMetadata&&i.typeMetadata.entityType?!0:!1}function s(n,t){var f=n.root,o=n.getOriginal(f),i=n.root[t],u=n.getOriginal(n.root)[t],e=n.getCreated(i);if(!i||!ko.isObservableArray(
i))throw new Error("Edit scope value with key '{0}' does not exist on edited data or is not an observable array".format(t));if(!u||!ko.isObservableArray(u))throw new Error("Edit scope value with key '{0}' does not exist on original data or is not an observable array".format(t));r(n,i,u,e)}function r(n,t,i,r){for(var f,u=t().length-1;u>=0;u--)f=t()[u],n.getEditState(f)()===MsPortalFx.Data.EditState.Deleted?(t.splice(u,1),i.splice(u,1)):MsPortalFx.Data.DataSet.mergeWithoutAtomization(f,n.getOriginal(f));ko.utils.arrayPushAll(i,r())}function u(t,i){var r=t.root,e=t.getOriginal(r),u=r[i],f=e[i];if(!u)throw new Error("Edit scope value with key '{0}' does not exist on edited data".format(i));if(!f)throw new Error("Edit scope value with key '{0}' does not exist on original data".format(i));n.Utilities.merge(u,f)}t.revertEditScope=i;t.saveEditScope=f;t.getEditScopeItemsWithEdits=e})(t=n.Data||(n.Data={}))})(ExtensionCore||(ExtensionCore={}));Forms=MsPortalFx.ViewModels.Controls.Forms;FxBase=MsPortalFx.
Base,(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){this.showCopyField=ko.observable(!1);this.showLink=ko.observable(!1);this.showText=ko.observable(!1);this.showCallbackLink=ko.observable(!1);this.label=n}return n.prototype.dispose=function(){},n})(),i,r;n.PropertySheetObject=t;i=(function(n){function t(t,i){n.call(this,t);this.value=ko.isObservable(i)?i:ko.observable(i);this.showText(!0)}return __extends(t,n),t})(t);n.TextPropertySheetObject=i;r=(function(n){function t(t,i,r){n.call(this,i);var u=new Forms.CopyableLabel.ViewModel(t);u.value(ko.isObservable(r)?r():r);u.disabled(!0);this.value=ko.observable(u);this.showCopyField(!0);ko.isObservable(r)&&(this._valueSubscription=r.subscribe((function(n){u.value(n)})))}return __extends(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this);this.value().dispose();this._valueSubscription&&this._valueSubscription.dispose()},t})(t);n.CopyFieldPropertySheetObject=r})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore=
{})),(function(n){var t;(function(){"use strict"})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t){var i=this;this.url=ko.observable("");this.text=ko.observable("");this.hotSpot=ko.observable(!1);this.url=ko.observable(n);this.text=ko.observable(t);this.notHotSpot=ko.pureComputed((function(){return!i.hotSpot()}))}return n})(),i,r,u;n.QuickStartLinkBase=t;i=(function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t})(t);n.QuickStartHyperLink=i;r=(function(n){function t(t,i,r){n.call(this,"javascript:void(0)",i);this.hotSpot(!0);this._openHotspotBlade=t;this._bladeDetails=r;this.linkClick=$.proxy(this._linkClick,this)}return __extends(t,n),t.prototype._linkClick=function(){return this._openHotspotBlade()?this._openHotspotBlade(undefined):this._openHotspotBlade(this._bladeDetails),!1},t})(t);n.QuickStartHotspotLink=r;u=(function(){function n(n,t,i,r){this.title=ko.observable(n);this.description=ko.
observable(t);this.links=ko.observableArray(r||[]);this.iconUri=ko.observable(i)}return n})();n.QuickStartSection=u})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function i(t){var i;return i=typeof t=="string"?t:n.Utilities.getXhrError(t),i||(i=n.Resources.genericErrorMessage),i}function r(n,t,r,u,f,e){var s=MsPortalFx.Util.newGuid(),o,h=u,c="{0}InProgress".format(u),l="{0}Failure".format(u),a="{0}Warning".format(u);return o=new MsPortalFx.UI.NotificationManager.Notification(r,c,MsPortalFx.UI.NotificationManager.NotificationState.InProgress,f||[],n,s),MsPortalFx.UI.NotificationManager.addNotifications([o]),t.done((function(t){var i=h,u=MsPortalFx.UI.NotificationManager.NotificationState.Success;t&&t.WarningMessage&&(i=a,u=MsPortalFx.UI.NotificationManager.NotificationState.Warning,f=f||[],f.push(t.WarningMessage));o=new MsPortalFx.UI.NotificationManager.Notification(r,i,u,f||[],n,s,100,e?e.assetId:null);MsPortalFx.
UI.NotificationManager.addNotifications([o])})).fail((function(t){var e=i(t),u=f||[];u.push(e);o=new MsPortalFx.UI.NotificationManager.Notification(r,l,MsPortalFx.UI.NotificationManager.NotificationState.Error,u,n,s);MsPortalFx.UI.NotificationManager.addNotifications([o])}))}function u(t,u,f,e,o,s){var h=$.Deferred(),a=[],c=0,l=[],v;return $.each(u,(function(n,t){l.push(t.promise);t.promise.fail((function(n){c++;a.push("\n\n{0} {1}".format(t.failureMessage,i(n)))}))})),n.Utilities.waitForPromises(l).done((function(){var n=a.join(" ");c>=l.length?h.reject(n):c>=1?h.resolve({WarningMessage:n}):h.resolve({})})),v=r(t,h.promise(),f,e,o,s),{promise:v,operations:u}}function f(n,t,i,r,u){var e=MsPortalFx.Util.newGuid(),f;f=new MsPortalFx.UI.NotificationManager.Notification(n,t,MsPortalFx.UI.NotificationManager.NotificationState.Error,i,r,r?e:null,100,u?u.assetId:null);MsPortalFx.UI.NotificationManager.addNotifications([f])}function e(n,t,i,r,u){var e=MsPortalFx.Util.newGuid(),f;f=new MsPortalFx.UI.NotificationManager.
Notification(n,t,MsPortalFx.UI.NotificationManager.NotificationState.Warning,i,r,r?e:null,100,u?u.assetId:null);MsPortalFx.UI.NotificationManager.addNotifications([f])}t.getOperationErrorMessage=i;t.createOperationNotification=r;t.createBatchOperationNotification=u;t.createFailureNotification=f;t.createWarningNotification=e})(i=t.Notifications||(t.Notifications={}))})(t=n.UI||(n.UI={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";function r(n,t){return new MsPortalFx.ViewModels.CustomValidation("",function(i){var r={valid:!0,message:undefined};return n&&n()&&n().length>0&&StringEx.isStringInArray(i,n(),StringComparison.IgnoreCase)&&(r.valid=!1,r.message=t),Q(r)})}function u(n,t){return new MsPortalFx.ViewModels.CustomValidation("",function(i){var r={valid:!0,message:undefined};return n&&n()&&n().length>0&&n().first((function(n){return n===+i?(r.valid=!1,r.message=t,!0):!1})),Q(r)})}function f(n,t,r,u){var f=t();return i(n,ko.observable(f.subscriptionId),
r,u.providerName,u.resourceType)}function i(t,i,r,u,f){var e=Q.defer(),o=i(),s;return o&&r&&!r.isNew&&r.name?(s="{0}/{1}".format(u,f),n.ArmCommonApi.checkNameAvailabilityInResourceGroup(o,r.name,s,t).then((function(t){e.resolve({valid:t,message:n.Resources.uniqueResourceNameValidation})}),(function(){e.resolve({valid:!0,message:undefined})}))):e.resolve({valid:!0,message:undefined}),e.promise}t.resourceGroupNameRegEx="^[0-9a-zA-Z()._-]+[0-9a-zA-Z()_-]$";t.getUniqueNameValidation=r;t.getUniqueNumber=u;t.checkNameAvailabilityCreate=f;t.checkNameAvailability=i})(t=n.Validation||(n.Validation={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i,r,u){var f=this;n.call(this,t,(function(n){return f._validateUsableIpAddressesIsGreaterThan256(n)}));this._getItems=i;this._getItemValue=r;this._getUsableIpAddressCount=u}return __extends(t,n),t.prototype._validateUsableIpAddressesIsGreaterThan256=function(n){var i=this,t=$.Deferred();return setTimeout(
(function(){i._isGreaterThan256(n)||t.resolve({valid:!1,message:i.message});t.resolve({valid:!0,message:undefined})}),0),t.promise()},t.prototype._isGreaterThan256=function(n){for(var i=this._getItems(),r=0,t=0;t<i.length;t++)n!==this._getItemValue(i[t])&&(r+=this._getUsableIpAddressCount(this._getItemValue(i[t])));return r+this._getUsableIpAddressCount(n)>256?!1:!0},t})(MsPortalFx.ViewModels.CustomValidation);n.IsUsableIpAddressesMoreThan256=t})(t=n.Validation||(n.Validation={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i,r,u){var f=this;n.call(this,t,(function(n){return f._validateIsUnique(n)}));this._getItems=i;this._getItemValue=r;this._isItemValueEqual=u||this._defaultIsItemValueEqual}return __extends(t,n),t.prototype._defaultIsItemValueEqual=function(n,t){return MsPortalFx.Base.Utilities.deepEquals(n,t)},t.prototype._validateIsUnique=function(n){var i=this,t=$.Deferred();return setTimeout((function(){i._isUnique(n)||
t.resolve({valid:!1,message:i.message});t.resolve({valid:!0,message:undefined})}),0),t.promise()},t.prototype._isUnique=function(n){for(var i=this._getItems(),r=0,t=0;t<i.length;t++)if(this._isItemValueEqual(ko.toJS(n),ko.toJS(this._getItemValue(i[t])))&&(r+=1,r>=2))return!1;return!0},t})(MsPortalFx.ViewModels.CustomValidation);n.UniqueValidation=t})(t=n.Validation||(n.Validation={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t){this.paramName=n;this.param=t}return n.Argument=function(t,i){return new n(t,i)},n.prototype.notNull=function(){if(this.param===undefined||this.param===null)throw"{0} cannot be null or undefined.".format(this.paramName);return this},n.prototype.notNullOrEmpty=function(){if(this.notNull(),$.isArray(this.param)){if(!this.param.length)throw"{0} cannot be an empty array".format(this.paramName);}else if(typeof this.param=="string"&&this.param==="")throw"{0} cannot be an empty string".format(this.paramName);
return this},n})();n.Requires=t})(t=n.Validation||(n.Validation={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t){n.call(this);this.selectable=MsPortalFx.ViewModels.Part.createSelectableViewModel(t)}return __extends(t,n),t})(MsPortalFx.ViewModels.Internal.ContainerViewModel);n.CommandContainer=t})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(n){function t(t,i){n.call(this,t);var r={stepStatuses:[]};i&&i.content&&i.content.currentState&&(r=i.content.currentState);this.savedState=ko.observable(r);this.currentState=ko.observable(r);this.stepInput=this._getStepInput(r);this.stepOutput=ko.observable();this.parameterCollectionErrors=ko.observable();this.privateFcTpBI=new MsPortalFx.ViewModels.ParameterCollection.Internal.CollectorBindingInternals;this._baseContainer=t;this._baseProviderCommit=null;this._initialLoadComplete=!1;this.enabled(!1)}return __extends(
t,n),t.prototype.onInputsSet=function(n){var t=this,i,r;return this._initialLoadComplete||(this.parameterCollectionErrors.subscribe(this._baseContainer,(function(n){t.privateFcTpBI.errors(n);t.privateFcTpBI.errors([])})),this.stepOutput.subscribe(this._baseContainer,(function(n){t._processStepOutput(n)})),this._baseContainer.selectable.isSelected.subscribe(this._baseContainer,(function(){t.savedState(t.currentState())})),this._initialLoadComplete=!0,this.setDynamicBladeSelection(),this.enabled(!0)),n.fromProviderBindingInternals&&(i=n.fromProviderBindingInternals.commit,!i||i===this._baseProviderCommit||(this._baseProviderCommit=i,r=this.onProviderCommit(null,n.fromProviderBindingInternals.outputs),this.enabled(!1),r.then((function(n){t.enabled(!0);n?t._baseContainer.selectable.isSelected(!1):t.parameterCollectionErrors([{errorMessage:"Parameter Collection failed!"}])}),(function(){t.enabled(!0)})))),Q()},t.prototype.getProviderInputs=function(){throw new Error("The method 'getProviderInputs' is an abstract method and it is not implemented in derived class. Make sure the derived class implements the 'MsPortalFx.ViewModels.ParameterCollection.ParameterCollector' interface.");
},t.prototype.onProviderCommit=function(){throw new Error("The method 'onProviderCommit' is an abstract method and it is not implemented in derived class. Make sure the derived class implements the 'MsPortalFx.ViewModels.ParameterCollection.ParameterCollector' interface.");},t.prototype._processStepOutput=function(n){n&&this.currentState({stepStatuses:[{stepId:n.stepId,status:n.status}],selectedStepId:n.stepId})},t.prototype._getStepInput=function(n){var t=n&&n.stepStatuses&&n.stepStatuses.length?n.stepStatuses[0].status:0;return ko.observable({stepId:"NoWizardStep",status:t,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:!1})},t.prototype.setDynamicBladeSelection=function(){this.privateFcTpBI.inputs(this.getProviderInputs(null));var t={"collectorBindingInternals-inputs":this.privateFcTpBI.inputs,"collectorBindingInternals-errors":this.privateFcTpBI.errors,stepInput:this.stepInput},i=t,n=this.getDynamicBladeTarget();n&&(n.detailBladeInputs=t,i=n);
this._baseContainer.selectable.selectedValue(i)},t.prototype.getDynamicBladeTarget=function(){return null},t})(MsPortalFx.ViewModels.OpenBladeCommand);n.ParameterCollectorCommandBase=t})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t,i){this._enabled=!0;this._lifetime=n;this._stepId=t;this._options=i;i.disabledByDefault&&this.disable();this._setupClicks()}return n.prototype._setupClicks=function(){var n=this;this._options.clickedSelectable.isSelected.subscribe(this._lifetime,(function(t){if(t){if(n._enabled){var i={"collectorBindingInternals-inputs":n._options.getProviderInputs.call(n._options.context),"collectorBindingInternals-errors":{},stepInput:{isLastStep:!1,stepId:n._stepId,status:1}},r=$.extend({},n._options.bladeSelection,{detailBladeInputs:i});n._options.triggeredSelectable.selectedValue(r);n._options.triggeredSelectable.isSelected(!0)}}else n._options.triggeredSelectable.isSelected(
!1)}))},n.prototype.onPartInputsSet=function(n){var i=this,t,r;return n.fromProviderBindingInternals&&n.stepOutput&&n.stepOutput.stepId===this._stepId&&(t=n.fromProviderBindingInternals.commit,!!t&&t!==this._baseProviderCommit)?(this._baseProviderCommit=t,r=this._options.onProviderCommit.call(this._options.context,n.fromProviderBindingInternals.outputs),r.then((function(n){n&&(i._options.triggeredSelectable.isSelected(!1),i._options.clickedSelectable.isSelected(!1))}))):Q()},n.prototype.enable=function(){this._enabled=!0},n.prototype.disable=function(){this._enabled=!1},n})();n.CustomParameterCollectionStep=t})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var i=(function(n){function t(t){var i=this,r;n.call(this);this.bindings={};this.iconUri=ko.observable("");this.container=t;this.status=ko.observable(MsPortalFx.ViewModels.CommandStatus.None);this.enabled=ko.observable(!1);this.icon=ko.observable(MsPortalFx.Base.Images.Blank(
));r=this.onInputsSet;this.onInputsSet=function(n){return n&&i._merge(n,i.bindings),r.call(i,n)}}return __extends(t,n),t.prototype.initialize=function(){var n=this;this.iconUri.subscribe(this.container,(function(){n._setIconFromIconUri()}));this._setIconFromIconUri()},t.prototype._setIconFromIconUri=function(){this.iconUri()&&this.icon(MsPortalFx.Base.Images.ImageUri(MsPortalFx.Base.Resources.getContentUri(this.iconUri())))},t.prototype.onInputsSet=function(){return $.Deferred().resolve()},t.prototype._merge=function(n,t){var i=this;$.each(n,(function(n,r){var u=t[n];u&&(ko.isObservable(u)?u(r):i._merge(r,u))}))},t})(MsPortalFx.ViewModels.Command),t;n.CommandBase=i;t=(function(n){function t(t){var i=this,r;n.call(this);this.bindings={};this.iconUri=ko.observable("");this.container=t;this.icon=ko.observable(MsPortalFx.Base.Images.Blank());r=this.onInputsSet;this.onInputsSet=function(n){return n&&i._merge(n,i.bindings),r(n)}}return __extends(t,n),t.prototype.initialize=function(){var n=this;this.
iconUri.subscribe(this.container,(function(){n._setIconFromIconUri()}));this._setIconFromIconUri()},t.prototype._setIconFromIconUri=function(){this.iconUri()&&this.icon(MsPortalFx.Base.Images.ImageUri(MsPortalFx.Base.Resources.getContentUri(this.iconUri())))},t.prototype.onInputsSet=function(){return $.Deferred().resolve()},t.prototype._merge=function(n,t){var i=this;$.each(n,(function(n,r){var u=t[n];u&&(ko.isObservable(u)?u(r):i._merge(r,u))}))},t})(MsPortalFx.ViewModels.UriCommand);n.UriCommandBase=t})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict"})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(){"use strict"})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t){return MsPortalFx.Services.Rpc.invokeCallback("AppInsightsExtension","LinkToAIComponent",n,t)}
n.tagAccount=t})(t=n.ApplicationInsightsExtension||(n.ApplicationInsightsExtension={}))})(t=n.Rpc||(n.Rpc={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function i(t,i){var u=r(t);return n.Csm.getResource(t).then((function(t){var r=t.tags||{},e="hidden-link:{0}".format(i),f;return r[e]?f=Q.resolve(null):(r[e]="Resource",f=n.Net.ajax(u,{type:"PATCH",data:{tags:r}})),f}))}function r(n){var t=MsPortalFx.ViewModels.Services.ResourceTypes.parseResourceDescriptor(n);return"{csmUri}/subscriptions/{subscriptionId}/resourcegroups/{resourceGroup}/providers/NewRelic.APM/accounts/{accountName}?api-version={apiVersion}".format({csmUri:window.fx.environment.csmManagementServiceUri,apiVersion:"2014-10-01",subscriptionId:t.subscription,resourceGroup:t.resourceGroup,accountName:t.resource})}t.tagAccount=i})(i=t.NewRelicExtension||(t.NewRelicExtension={}))})(i=t.Rpc||(t.Rpc={}))})(t=n.Azure||(n.Azure={})
)})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n})();n.CreateAccountWizardModel=t})(t=n.NewRelicExtension||(n.NewRelicExtension={}))})(t=n.SharedModels||(n.SharedModels={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var i=(function(){function n(){this.ReservedIpAddress=new t}return n})(),t;n.ReservedIpAddressPickerModel=i;t=(function(){function n(){this.subscriptionId=ko.observable();this.location=ko.observable();this.resourceGroup=ko.observable();this.ipAddress=ko.observable();this.selectedResourceId=ko.observable();this.newIpAddressName=ko.observable()}return n})();n.ReservedIpAddressParameters=t})(t=n.ClassicNetworkExtension||(n.ClassicNetworkExtension={}))})(t=n.SharedModels||(n.SharedModels={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;
(function(t){"use strict";function i(t,i){var r="{csmUri}/subscriptions/{subscriptionId}/resources?api-version={apiVersion}",f;return i&&(r+="&$filter=resourceType eq '{resourceType}'"),f=r.format({csmUri:window.fx.environment.csmManagementServiceUri,apiVersion:window.fx.environment.csmApiVersion,subscriptionId:t,resourceType:i}),n.Net.get(f).then((function(n){var t=n.value?n.value:n;return t=t||[],u(t)}))}function r(n){var t=MsPortalFx.ViewModels.Services.ResourceTypes.parseResourceDescriptor(n),r=t.subscription,u="{0}/{1}".format(t.provider,t.type);return i(r,u).then((function(t){var i=t.first((function(t){return StringEx.equals(n,t.id,StringComparison.IgnoreCase)}));if(!i)throw new Error("Resource '{0}' not found".format(n));return i}))}function u(n){return n.distinct((function(n,t){return StringEx.equals(n.id,t.id,StringComparison.IgnoreCase)}))}t.listResourcesInSubscription=i;t.getResource=r})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";
function t(n,t,r){var b=["galleryParameters","parameterList","constructor"],f,s,y,u,c,h,p,k,o,l,d,a,w,e,v;for(f in n.parameterList){s=t.parameterList[f];y={};s.constraints&&s.constraints.custom&&s.constraints.custom.length>0&&s.constraints.custom.forEach((function(n){y[n.key]=n.value}));for(u in n)b.indexOf(u)===-1&&(c=y[u]||f,n[u][c]!==undefined&&ko.isObservable(n[u][c])&&n[u][c](n.parameterList[f]()))}h=[];for(u in n)if(p=!1,b.indexOf(u)===-1){for(f in n[u])if(!n[u][f]()){p=!0;break}p||h.push(u)}if(h.length===1)return h.first();if(r){k=i();o=[];for(f in r){l=r[f];d=n.parameterList[f]();for(a in l)w=k[a],w&&w(d,l[a].condition)&&o.push(l[a].templates)}if(o.length){for(e=o[0],v=1;v<o.length;v++)e=e.intersect(o[v]);if(e=e.intersect(h),e.length===1)return e.first()}}return undefined}function i(){return{StringEmpty:function(n){return!n},StringNotEmpty:function(n){return!!n},StringEquals:function(n,t){return StringEx.equals(n,t)},GreaterThan:function(n,t){return n>t},LessThan:function(n,t){return n<
t},GreaterThanOrEqual:function(n,t){return n>=t},LessThanOrEqual:function(n,t){return n<=t},Equal:function(n,t){return n===t},Null:function(n){return!n},NotNull:function(n){return!!n},False:function(n){return!n},True:function(n){return n}}}n.populateNestedParameters=t})(t=n.Csm||(n.Csm={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.prototype.on=function(n,t){var i=this,r=function(){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.apply(i,r)},u;$(this).on(n,r);return u=function(){$(i).off(n,r)},{dispose:u}},n.prototype.trigger=function(n,t){$(this).trigger(n,t)},n})();n.EventSource=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";function t(n){n._editScopeCache._loadEdits=function(){return Q(null)};n._editScopeCache._saveEdits=function(){return Q(null)}}n.MockCreateV1ViewModel=t})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore=
{})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){this._resourcePartExtenders=[];this._extensionName=n}return n.prototype.registerResourceExtenderViewModel=function(n,t){var i=this;this._resourcePartExtenders.push(t);n.registerForDispose({dispose:function(){i._resourcePartExtenders.remove(t)}})},n.prototype.signalAssetRefresh=function(n,t){var i=this;this._resourcePartExtenders.forEach((function(r){r.signalAssetRefresh(i._extensionName,n,t)}))},n})();n.ResourceExtender=t})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var f=(function(n){function i(){n.apply(this,arguments);this.Network=new t}return __extends(i,n),i})(MsPortalFx.Services.Gallery.GalleryDataModel),t,u,i,r;n.VirtualNetworkQuickCreateModel=f;t=(function(){function n(){this.vnetName=ko.observable("");this.vnetAddressSpace=ko.observable("");this.vnetPrimaryDns=ko.observable("");this.vnetSecondaryDns=
ko.observable("");this.vnetSubnetName=ko.observable("");this.vnetSubnetAddress=ko.observable("")}return n})();n.NetworkQuickCreateParameters=t;u=(function(){function n(){this.Validation=new i;this.Fields=new r}return n})();n.VirtualNetworkQuickCreateOptions=u;i=(function(){function n(){this.maxCidr=ko.observable()}return n})();n.NetworkQuickCreateValidationOptions=i;r=(function(){function n(){this.hideDns=ko.observable()}return n})();n.NetworkQuickCreateFieldOptions=r})(t=n.ClassicNetworkExtension||(n.ClassicNetworkExtension={}))})(t=n.SharedModels||(n.SharedModels={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var i=(function(n){function i(){n.apply(this,arguments);this.Network=new t}return __extends(i,n),i})(MsPortalFx.Services.Gallery.GalleryDataModel),t;n.VirtualNetworkPickerModel=i;t=(function(){function n(){this.vnetResourceId=ko.observable("");this.vnetName=ko.observable("");this.vnetAddressSpace=
ko.observable("");this.vnetPrimaryDns=ko.observable("");this.vnetSecondaryDns=ko.observable("");this.vnetSubnetName=ko.observable("");this.vnetSubnetAddress=ko.observable("")}return n})();n.NetworkParameters=t})(t=n.ClassicNetworkExtension||(n.ClassicNetworkExtension={}))})(t=n.SharedModels||(n.SharedModels={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var i=(function(n){function i(){n.apply(this,arguments);this.Subnet=new t}return __extends(i,n),i})(MsPortalFx.Services.Gallery.GalleryDataModel),t;n.SubnetPickerModel=i;t=(function(){function n(){this.subnetName=ko.observable("");this.subnetAddress=ko.observable("")}return n})();n.SubnetParameters=t})(t=n.ClassicNetworkExtension||(n.ClassicNetworkExtension={}))})(t=n.SharedModels||(n.SharedModels={}))})(t=n.Azure||(n.Azure={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";function t(n){var t=n.validate.peek(
);n.validate(isNaN(t)?0:t+1)}function i(t,i,r){i.value.subscribe(t,(function(){n.triggerFormFieldValidation(r)}))}n.triggerFormFieldValidation=t;n.linkFormFieldValidation=i})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var i=(function(t){function i(i,r,u,f){var h=this,e,o,s;this._passwordField=r;e=new MsPortalFx.ViewModels.CustomValidation(n.Resources.Validation.confirmPassword,function(n){return h._validatePasswordsMatch(n)});o=[e];u=u||n.Resources.Field.ConfirmPassword.title;s={label:ko.observable(u),validations:ko.observableArray(o),infoBalloonContent:ko.observable(f)};t.call(this,i,s);n.Utilities.linkFormFieldValidation(i,r,this)}return __extends(i,t),i.prototype._validatePasswordsMatch=function(t){var i={valid:!0,message:""},r=this._passwordField.value();return r&&!StringEx.equals(r,t)&&(i.valid=!1,i.message=n.Resources.Validation.confirmPassword),n.Utilities.convertToPromise(i)},i})(MsPortalFx.ViewModels.Forms.PasswordBox.
ViewModel);t.ConfirmPasswordField=i})(t=n.ViewModels||(n.ViewModels={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";var u=(function(t){function i(){t.call(this,n.Resources.Validation.required)}return __extends(i,t),i})(MsPortalFx.ViewModels.RequiredValidation),i,r;t.ResourceGroupNameRequiredValidation=u;i=(function(t){function i(){t.call(this,3,64,n.Resources.Validation.ResourceGroup.maxLength)}return __extends(i,t),i})(MsPortalFx.ViewModels.LengthRangeValidation);t.ResourceGroupNameMaxLengthValidation=i;r=(function(t){function i(i){var r="^[a-zA-Z][0-9a-zA-Z\\._-]*[a-zA-Z0-9]$",u=n.Resources.Validation.ResourceGroup.regex;i&&(r="^[a-zA-Z][0-9a-zA-Z-]*[a-zA-Z0-9]$",u=n.Resources.Validation.ResourceGroup.regexNoSpecialCharacters);t.call(this,r,u)}return __extends(i,t),i})(MsPortalFx.ViewModels.RegExMatchValidation);t.ResourceGroupNameRegexValidation=r})(t=n.Validation||(n.Validation={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(n){"use strict";
var t=(function(){function n(){}return n.Succeeded="Succeeded",n.Failed="Failed",n})();n.ShareObservableResponseStatus=t})(t=n.Models||(n.Models={}))})(ExtensionCore||(ExtensionCore={})),(function(n){var t;(function(t){"use strict";(function(n){n[n.Milliseconds=0]="Milliseconds";n[n.Seconds=1]="Seconds";n[n.Minutes=2]="Minutes";n[n.Hours=3]="Hours";n[n.Days=4]="Days"})(t.TimeUnit||(t.TimeUnit={}));var i=t.TimeUnit,r=(function(){function t(){}return t.toFriendlyDurationString=function(r,u){var f=function(n,t){var i=Math.pow(10,t);return Math.round(n*i)/i},c=t.getDuration(r,u,i.Milliseconds),e=t.getDuration(r,u,i.Seconds),o=t.getDuration(r,u,i.Minutes),s=t.getDuration(r,u,i.Hours),h=t.getDuration(r,u,i.Days);return h>=1?(h===1?n.Resources.durationDay:n.Resources.durationDays).format(f(h,2)):s>=1?(s===1?n.Resources.durationHour:n.Resources.durationHours).format(f(s,2)):o>=1?(o===1?n.Resources.durationMinute:n.Resources.durationMinutes).format(f(o,2)):e>=1?(e===1?n.Resources.durationSecond:n.Resources.
durationSeconds).format(f(e,2)):(c===1?n.Resources.durationMillisecond:n.Resources.durationMilliseconds).format(f(c,2))},t.getDuration=function(n,t,r){var u=t-n;if(u<0)throw new ArgumentError("Start time must be before end time");switch(r){case i.Milliseconds:return u;case i.Seconds:return u/1e3;case i.Minutes:return u/6e4;case i.Hours:return u/36e5;case i.Days:return u/864e5}return 0},t.getMinutesFromXmlTimeDuration=function(n){var t,i=null;return(t=n.match(/PT([0-6]{0,1}[0-9])M/))!==null?i=parseInt(t[1],10):(t=n.match(/PT([0-2]{0,1}[0-9])H/))!==null?i=parseInt(t[1],10)*60:(t=n.match(/PT([0-2]{0,1}[0-9])H([0-6]{0,1}[0-9])M/))!==null?(i=parseInt(t[1],10)*60,i=i+parseInt(t[2],10)):(t=n.match(/P(\d+)D/))!==null?i=parseInt(t[1],10)*1440:(t=n.match(/P(\d+)DT([0-2]{0,1}[0-9])H/))!==null?(i=parseInt(t[1],10)*1440,i=i+parseInt(t[2],10)*60):(t=n.match(/P(\d+)DT([0-2]{0,1}[0-9])H([0-6]{0,1}[0-9])M/))!==null&&(i=parseInt(t[1],10)*1440,i=i+parseInt(t[2],10)*60,i=i+parseInt(t[3],10)),i},t.getXmlTimespanFromMinutes=
function(n){var f,i,r,t,u;return n?(i=parseInt(n.toString(),10),t=parseInt((i/60).toString(),10),u=i%60,i>=1440?(r=parseInt((t/24).toString(),10),t=t-r*24,f=t?u?"P{0}DT{1}H{2}M".format(r,t,u):"P{0}D{1}H".format(r,t):"P{0}D".format(r)):f=i>=60?u?"PT{0}H{1}M".format(t,u):"PT{0}H".format(t):"PT{0}M".format(i),f):""},t.roundToLowerHalfHour=function(n){var t=new Date(n.toString());return t.setMinutes((t.getMinutes()/30>>0)*30,0,0),t},t.roundToHigherHalfHour=function(n){var i=t.roundToLowerHalfHour(n);return i.setMinutes(i.getMinutes()+30,0,0),i},t})();t.DateTimeUtility=r})(t=n.Utilities||(n.Utilities={}))})(ExtensionCore||(ExtensionCore={}))