var __extends=function(n,t){function r(){Object.defineProperty(this,"constructor",{configurable:!0,value:n,writable:!0})}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)},__decorate=function(n,t,i,r){var s=self||window,f=arguments.length,u=f<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,e,o;if(typeof s.Reflect=="object"&&typeof s.Reflect.decorate=="function")u=s.Reflect.decorate(n,t,i,r);else for(o=n.length-1;o>=0;o--)(e=n[o])&&(u=(f<3?e(u):f>3?e(t,i,u):e(t,i))||u);return f>3&&u&&Object.defineProperty(t,i,u),u},__metadata=function(n,t){var i=self||window;if(typeof i.Reflect=="object"&&typeof i.Reflect.metadata=="function")return i.Reflect.metadata(n,t)},__param=function(n,t){return function(i,r){t(i,r,n)}},__awaiter=function(n,t,i,r){return new i(function(u,f){function o(n){return n instanceof i&&n.constructor===i?n:new i(function(t){t(n)})}function s(n){try{e("next",n)}catch(t){f(t)}}function h(n){try{e("throw",
n)}catch(t){f(t)}}function e(n,t){var i=r[n](t);i.done?u(i.value):o(i.value).then(s,h)}r=r.call(n,t);e("next",void 0)})},executeInDevelopmentModeOnly=function(){},ko,HubsExtension,GroupDropDown,FxImpl,MsPortalFx;(function(n){"use strict";function i(n){return(t&n)>0}n.Base=n;var t=window.fx.environment.frameworkCapabilities||0;n.hasCapability=i})(FxImpl||(FxImpl={})),(function(n){"use strict";function o(n){return n.toLowerCase()}function s(n){return i[o(n)]}function h(n){var t=s(n);return!!t&&t.length===4&&o(t)==="true"}var i,f;n.Internal=FxImpl;var r=window,u=r.fx,t=u.environment,e=t.activeFlights;u.bootstrapTelemetry.fxScriptsBegin=u.getTimestamp();i=t.features;Object.keys(e).forEach((function(n){if(!i.hasOwnProperty(n)){var r=e[n]+"";i[n]=r;t.query["flight."+n]=r}}));f=r.parent;n.isIFrame=f&&r.window!==f.window;n.getFeatureValue=s;n.isFeatureEnabled=h;t.isDevelopmentMode&&(executeInDevelopmentModeOnly=function(n){n()});n.defineProperty=n.defineProperty||Object.defineProperty;t.javascriptObjectPropertiesAreEnumerable||
(Object.defineProperty=function(t,i,r){r&&r.get&&r.enumerable===!0&&(r.enumerable=!1);n.defineProperty(t,i,r)})})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function i(n){return function(){return b.apply(n,arguments)}}function gi(n){var t,i;switch(typeof n){case y:t=[];for(i in n)s(t,i);return t;case d:case ft:case di:return wi(n);default:return[]}}function u(n,t){return typeof n===t}function pt(n){return n instanceof Date}function tr(n){var t=n&&n.dispose;return u(t,d)&&t}function et(n,t){r(c(n),(function(i){t(i,n[i])}))}function wt(n){return n?c(n).length:0}function tu(n){return!wt(n)}function iu(n){return!!tr(n)}function ir(n){o(n)&&r(n,ir);var t=tr(n);t&&t.call(n)}function ru(n){return n===null}function uu(n){return n===t}function l(n){return n===null||n===t}function rr(n){return n!==null&&n!==t}function fu(n){return l(n)||u(n,y)&&!nr.test(n)}function ur(n,t){var i=t?t():new bt,r=function(t){if(i.has(t))return i.get(t);var r=n(t);return i.set(t,r),r};return r.dispose=function(
){i.clear()},r}function eu(n,t,i){return t&&(n=t.normalize(n)),i&&(vt.requireConfig.ignoreErrorsForModule[n]=!0),fr(n)}function dt(n,t,i){if(i===void 0&&(i=0),n){var u=n.length,f=u,e=1,r=i;if(u){if(i<0&&(r+=u,e=f=-1),!t)return r<u&&r>=0?r:-1;while(r!==f){if(t(n[r],r,n))return r;r+=e}}}return-1}function ou(n,i,r){var u=dt(n,i,r);return u<0?t:n[u]}function su(n){return n?n[0]:t}function hu(n){var i=n?n.length:0;return i?n[i-1]:t}function cu(n,t,i){var o,r,h,f,c,e;for(i===void 0&&(i=0),o=[],r=0,u(t,d)&&(h=t),f=i,c=n.length;f<c;f++)e=n[f],r&&(n[f-r]=e),(t===e||h&&h(e))&&(r++,s(o,e));return r&&at(n,-1*r),o}function gt(n,t,i,r){var h,f,u,c,e;if(r===void 0&&(r=!1),o(t)){for(h=i?function(t){return dt(n,(function(n){return i(n,t)}))}:function(t){return n.indexOf(t)},f=r?[]:n,u=0,c=t.length;u<c;u++)e=t[u],h(e)<0&&s(f,e);r&&ai.apply(n,f)}return n}function er(n,t){return gt([],n,t)}function lu(){var f=[],r=arguments.length-2,n=arguments[r+1],i,e;for(u(n,d)||(n=t,r++),i=0;i<=r;i++)e=er(arguments[i],n),
gt(f,e,n,!0);return f}function au(t,i){return n.merge.apply(null,t.map(i))}function vu(n,t){var i=n.map((function(n,t){return{i:t,v:n}}));return i.sort((function(n,i){return t(n.v,i.v)||n.i-i.i})),i.map((function(n){return n.v}))}function yu(n){return n?n.toString():String(n)}function pu(n,i,r,u,f){var e,o,l,h,s,c;for(r=r||yu,e=[i,,,""],o=0,l=i.length;o<l;o++)h=i[o],e[1]=h,e[2]=o,e[3]=t,s=b.apply(r,e),f&&n[s]!==t||(e[3]=s,c=u?b.apply(u,e):h,c!==t&&(n[s]=c))}function wu(n,i,r,u){var f=[i,,];et(i,(function(i,e){if(!u||n[i]===t){f[1]=e;f[2]=i;var o=r?b.apply(r,f):e||i;o!==t&&(n[i]=o)}}))}function ni(n){return n=o(n)?vi(n):arguments,function(){var i={};return r(arguments,(function(r,u){var f=n[u];r!==t&&(i[f]=r)})),i}}function bu(n){return ni.apply(t,n)}function ku(t,i){var r=[];return et(t,(function(t,i){u(t,y)&&u(i,ki)&&s(r,n.getNameValue(t,i))})),i?r.sort((function(n,t){return n.value-t.value})):r}function du(n){return o(n)||(n=l(n)?[]:[n]),n}function or(n,t){return pt(n)&&pt(t)&&!(n>t||n<t)}function gu(
n){return n.getTime()/1e3|0}function sr(n){return yt(n)&&o(n())}function nf(n){return o(n)||sr(n)}function hr(n,t,i){var r=st[n]&t;st[n]=r|i}function tf(){ii.getRandomValues(st);hr(8,15,64);hr(11,63,128);for(var t=0;t<ti;t++)p[t]=ot[st[t]];return p[4]=p[7]=p[10]=p[13]="-",n.applyUncurry(yi,"",p)}function rf(n){for(var t,i=new Array(n),r;n;)for(t=4294967296*v.random()|0,r=8;r--;){if(i[--n]=a[t&15],n<0)return i;t>>>=4}}function uf(){var n=rf(36);return n[8]=n[13]=n[18]=n[23]="-",n[14]="4",n[19]=a[8+(a.indexOf(n[19])&3)],tt(yi,"",n)}function cr(n){return ot[n>>4]+a[n&15]}function lr(t){t=t?t+"-":"";var r="",i=g;return function(){return++i>g&&(i=0),i||(r=t+n.newGuid().substring(0,33)),r+cr(i)}}function ff(n){var i=-1,t=g,r="";return function(){return++t>g&&(t=0,i++,r=n+i.toString(16)+"-"),r+cr(t)}}function ef(n,t){return t=v.pow(10,t||0),v.round(Number(n)*t)/t}function of(n){return n|0}function sf(n,t){return n?!t:t}function hf(n,i){if(n!==t&&i!==t&&!(n>i))return v.floor(v.random()*(i-n+1)
)+n}function cf(n,t,i){var r=ut(n,t)&&n[t];r&&yt(r)?r(i):n[t]=ko.observable(i)}function lf(n,t){return n===t||or(n,t)}function af(n,t){if(n===t)return!0;if(n&&t){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i++)if(n[i]!==t[i])return!1;return!0}return!1}function ht(n){var t=typeof n;return t===ft&&(n===null?t="null":o(n)?t="array":pt(n)&&(t="date")),t}function ri(n,t,i){var r,f,u;if(i&&(n=i(n),t=i(t)),n===t)return!0;if(!n||!t||(r=ht(n),r!==ht(t)))return!1;switch(r){case"array":return f=n,n.length===t.length&&f.every((function(n,r){return ri(n,t[r],i)}));case"date":return n.getTime()===t.getTime();case ft:return u=c(n),u.length===wt(t)&&u.every((function(r){return ri(n[r],t[r],i)}));default:return!1}}function vf(n,t,i){var r=i?ar.peekObservable:ko.unwrap;return ri(n,t,r)}function yf(n){return ht(n)===ft}function pf(t,i,r){var u=[t,,,r],f=c(t),e=f.map((function(n){return u[1]=t[n],u[2]=n,b.apply(i,u)}));return n.merge.apply(null,e)}function wf(n,i,r){var u,f,e;for(r=r||c(i),u=0;u<r.length;
u++)f=r[u],e=i[f],e!==t&&(n[f]=e)}function ct(n,i,r){var f,e;return u(i,y)?(n=l(n)?"":String(n),f=n.length,(r===t||r>f)&&(r=f),r-=i.length,e=rt(n,i,r),e!==-1&&e===r):!1}function bf(n,t,i,r){return l(n)?-1:u(t,y)?n.toLocaleLowerCase().localeCompare(t.toLocaleLowerCase(),i,r):1}function kf(n,t){var i="";for(t=t<0?0:t;t--;)i+=n;return i}function df(n){for(var t="",i=n.length;i;)t+=n[--i];return t}function gf(n){return function(){return dr(arguments,n)}}function ne(n,t){return n=n||"",t=t||n,function(i){return n+i+t}}function te(n,t,i){return n.replace(new RegExp(ui(t),"g"),i)}function ie(n,t){var r={},u=!1,i,f;for(i in t||{})t.hasOwnProperty(i)&&(r[ui(i)]=t[i],u=!0);return u?(f=new RegExp(c(r).join("|"),"g"),n.replace(f,(function(n){return t[n]}))):n}function re(n,t,i){var r=[];if(n&&t&&i){var u=0,e=t.length,f=0;for(i--;;){if(r.length>=i||(f=rt(n,t,u))<0){s(r,h(n,u));break}s(r,h(n,u,f));u=f+e}}return r}function nt(n,t,i){return n=l(n)?"":String(n),i=l(i)||i<0?0:v.min(i,n.length),n.lastIndexOf(
t,i)===i}function vr(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(n=n||"";n;){if(i=r.first((function(t){return t&&ct(n,t)})),!i)break;n=h(n,0,n.length-i.length)}return n}function ue(n){for(var i,r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];for(n=n||"";n;){if(i=r.first((function(t){return t&&nt(n,t)})),!i)break;n=h(n,i.length)}return n}function fe(n,t){return n=n||"",ct(n,t)||(n+=t),n}function yr(n,t){return n=n||"",nt(n,t)||(n=t+n),n}function ee(n,t){o(t)||(t=vi(arguments,1));var i="";return r(t||[],(function(t){i?t&&(i=vr(i,n)+yr(t,n)):i=t||""})),i}function oe(n,t){var r,u,i;return(t===void 0&&(t=!0),!n)?n:(nt(n,"//")?n=h(n,r+2):(r=rt(n,"://"),r>-1&&(n=h(n,r+3))),u=t?/[?#/]/:/[?#/:]/,i=n.search(u),i=i>-1?i:n.length,h(n,0,i))}function se(n,t){if(!n||!t||n.length<t.length)return!1;var i=pi(n),r=pi(t);return i===r||ct(i,"."+r)}function he(n){return rt(n,"://")!==-1||nt(n,"//")}function ce(n,t,i){var r=n.inspect();switch(r.state){case"fulfilled":return t(r.value);
case"rejected":return i(r.reason);default:return n.then(t,i)}}function le(n,t){n.isPending()?n.finally(t):t()}function ae(n,t,i){var r=i(),u;return r?n.resolve(r):(u=i.subscribe(t,(function(t){t&&(u.dispose(),n.resolve(t))})),t.registerForDispose((function(){n.reject("disposed")}))),n}function ve(n){var i,t;return function(){var r=i||t;return r||(r=t=n(),r.finally((function(){t=null;r.isFulfilled()&&(i=r)}))),r}}function ui(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function ye(){}function pe(n){return n}function we(n){return n===null||typeof n in fi}function be(n,t,i){var r=n.prototype;et(t,(function(n,t){(i||!r[n])&&f.defineProperty(r,n,{value:t,configurable:!0,enumerable:!1,writable:!0})}))}function pr(n){if(n>ei)throw new Error("The requiredMaxInteger("+n+") should be less than "+ei);if(n<=0)throw new Error("The requiredMaxInteger("+n+") should be greater than zero.");}function ke(n){return pr(n),oi}function de(n){return pr(n),si}function ge(n){var r=f.create(f.getPrototypeOf(
n)),t,i;for(t in n)i=n[t],u(i,d)?r[t]=i.bind(n):ut(n,t)&&(r[t]=i);return r}function no(n){return n&&n.toLowerCase()}function ci(t){var r,i;if(t){if(r=typeof t,r==="string")return no(t);if(Array.isArray(t))return t.map((function(n){return ci(n)}));if(r==="object")return i=t,n.forEachKey(i,(function(n){i[n]=ci(i[n])})),i}return t}var lt=window,li=Function,v=Math,f=Object,b=li.call,wr=li.apply,tt,c,yt,nr,bt,kt,fr,a,ot,ii,g,ar,fi,w,hi;n.uncurryThis=i;tt=i(wr);n.applyCall=tt;n.applyUncurry=tt;var e=Array.prototype,br=e.concat,ai=e.push,kr=i(e.filter),r=i(e.forEach),dr=i(e.join),s=i(ai),vi=i(e.slice),at=i(e.splice),it=i(e.indexOf),o=Array.isArray,k=String.prototype,yi=i(k.concat),gr=i(k.split),h=i(k.substring),rt=i(k.indexOf),pi=i(k.toLowerCase),ut=i(f.prototype.hasOwnProperty),wi=f.keys,t=undefined,vt=lt.fx.environment,bi=f.freeze,nu=vt.isDevelopmentMode,d="function",y="string",ki="number",ft="object",di="undefined";n._objectKeysPolyfill=gi,(function(){try{wi("")}catch(n){f.keys=gi}})();c=f.keys;
yt=ko.isObservable;nr=/\S/;n.forEachKey=et;n.keysLength=wt;n.isEmpty=tu;n.isDisposable=iu;n.disposeDisposable=function(){r(arguments,ir)};n.isNull=ru;n.isUndefined=uu;n.isNullOrUndefined=l;n.notNullOrUndefined=rr;n.isNullOrWhiteSpace=fu;bt=lt.Map||function(){var i=this,n=[],t=[];return{"delete":function(i){var r=it(n,i);return r>=0&&(at(n,r,1),at(t,r,1)),r>=0},has:function(t){return it(n,t)>=0},get:function(i){return t[it(n,i)]},set:function(i,r){var u=it(n,i);u<0&&(u=n.length);n[u]=i;t[u]=r},clear:function(){n=[];t=[]},forEach:function(u,f){r(n,(function(n,r){u.call(f,t[r],n,i)}))}}};n.Map=bt;n.memoize=ur;kt=new n.Map;fr=ur((function(t){var i=Q.defer();return lt.requirejs([t],(function(n){i.resolve(n)}),(function(n){var u=n&&n.requireType,t,r;if(u==="scripterror"&&!ut(n,"status")&&(t=n.originalError||{},t.type==="error"&&t.srcElement)){r=t.srcElement.src;FxImpl.Diagnostics.getStatusCode(r,(function(t,u,f){n.srcUrl=r;n.status=t;n.statusText=f;i.reject(n)}));return}i.reject(n)})),i.promise.catch(
(function(i){kt.delete(t);var r=vt.requireConfig.ignoreErrorsForModule[t]?new n.Errors.CanceledError({message:"Suppressing require rejection for failed download of ignore-able module "+t,innerErrors:i}):i;return Q.reject(r)}))}),(function(){return kt}));n.require=eu;n.findIndex=dt;n.find=ou;n.first=su;n.last=hu;n.remove=cu;n.pushUnique=gt;n.unique=er;n.union=lu;n.merge=function(){var n=kr(arguments,rr);return br.apply([],n)};n.mapMany=au;n.stableSort=vu;n.extendArrayIntoMap=pu;n.extendStringMapIntoMap=wu;n.getStringMapFunc=ni;n.applyStringMapFunc=bu;n.getNameValue=ni("name","value");n.getEnumArray=ku;n.makeArray=du;n.areEqualDates=or;n.toSeconds=gu;n.isObservableArray=sr;n.isArrayOrObservableArray=nf;a=gr("0123456789abcdef","");ot=[];r(a,(function(n){r(a,(function(t){s(ot,n+t)}))}));var ti=20,st=new Uint8Array(ti),p=new Array(ti);ii=window.crypto||window.msCrypto;n.newGuid=ii?tf:uf;g=4095;n.getUniqueIdGenerator=lr;n.getIdGenerator=ff;n.getUniqueId=lr();n.round=ef;n.truncate=of;n.xor=sf;n.random=
hf;n.hasOwnProperty=ut;n.setObjPropAsObservable=cf;n.areEqual=lf;n.arrayEquals=af;n.getTypeOf=ht;ar=ko.utils;n.deepEquals=vf;n.isObject=yf;n.map=pf;n.shallowCopyFromObject=wf;n.endsWith=ct;n.localeCompareIgnoreCase=bf;n.repeat=kf;n.reverse=df;n.getJoinFunc=gf;n.getQuoteFunc=ne;n.replaceAll=te;n.replaceMany=ie;n.split=re;n.startsWith=nt;n.trimEnd=vr;n.trimStart=ue;n.ensureSuffix=fe;n.ensurePrefix=yr;n.pathJoin=ee;n.getUriAuthority=oe;n.isSubdomain=se;n.isUriAbsolute=he;n.tryImmediateResolve=ce;n.tryImmediateFinally=le;n.resolveWhen=ae;n.memoizePromise=ve;n.regexEscape=ui;n.noop=ye;n.identity=pe;fi={};r(["boolean",di,ki,y,"symbol"],(function(n){fi[n]=!0}));n.isPrimitive=we;n.polyfill=be;var ei=50,oi=[],si={};for(w=0;w<=ei;w++)hi=w+"",oi[w]=hi,si[hi]=w;nu&&(bi(oi),bi(si));n.getIntToStringMap=ke;n.getStringToIntMap=de;n.cloneAndRebindFunctions=ge;n.lowerCaseAllStrings=ci})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function r(n,t,i){var u="Code: '"+n+"'. ",r="";return t?r=t.format.
apply(t,i):(i&&i.length&&(r="\nParameters: "+[].join.call(i,",")+". "),r+="\nUse development mode to get the detailed error message."),u+r}function u(n){var t={};return i(n,(function(n,i){t[n]=function(){var t=r(n,i,arguments);throw new Error(t);}})),t}var t=MsPortalFx,i=t.forEachKey;n.getErrorMap=u})(FxImpl||(FxImpl={})),(function(n){"use strict";var t,i,r;(function(t){var i,r;(function(t){t.loadAsync=n.require})(i=t.Amd||(t.Amd={})),(function(t){t.arrayEquals=n.arrayEquals;t.deepEquals=n.deepEquals;t.getUniqueIdGenerator=n.getUniqueIdGenerator;t.getIdGenerator=n.getIdGenerator;t.getUniqueId=n.getUniqueId;t.getUriAuthority=n.getUriAuthority;t.isObject=n.isObject;t.isIFrame=function(){return n.isIFrame};t.isNullOrUndefined=n.isNullOrUndefined;t.isNullOrWhiteSpace=n.isNullOrWhiteSpace;t.isSubdomain=n.isSubdomain;t.isUriAbsolute=n.isUriAbsolute;t.map=n.map;t.newGuid=n.newGuid;t.noop=n.noop;t.split=n.split;t.xor=n.xor})(r=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={})),(function(t){t.regexEscape=
n.regexEscape})(i=n.Polyfills||(n.Polyfills={})),(function(t){t.isNull=n.isNull;t.isUndefined=n.isUndefined;t.isNullOrUndefined=n.isNullOrUndefined;t.newGuid=n.newGuid;t.random=n.random;t.regexEscape=n.regexEscape;t.shallowCopyFromObject=n.shallowCopyFromObject;t.toNiceFixed=function(t,i){return i===void 0&&(i=0),String(n.round(t,i))};t.truncate=n.truncate})(r=n.Util||(n.Util={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function h(n,t,i){i.enumerable=!1}var r=n.Base,c=r.Utilities,u=window,i=Object,f=i.getOwnPropertyDescriptor,e=i.defineProperty,o=$.noop,s=u.fx.environment;t.NotProxied=h;t.ProxyCompatibilityMode=s.javascriptObjectPropertiesAreEnumerable?function(n){var i=n.prototype,t,u=!1;for(var r in i)t=f(i,r),t&&t.enumerable&&t.get&&(u=!0,t.enumerable=!1,e(i,r,t))}:o})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function lt(){var t="MsPortalFx.Resources.Strings",n=window,
i=(n=n.Resources)&&(n=n.getResources)&&n(t);if(!i)throw new Error("Unable to find the resources for '"+t+"'.");return function(n){return i[n]}}function at(n){return n&&n[0].toLowerCase()+n.slice(1)}function vt(n){return n?function(t){return c(n+t)}:c}function i(t,i,r){t=t||n.Resources.Strings;i=i||"";n.extendArrayIntoMap(t,r,at,vt(i))}var c=lt(),yt="Toolbar_",pt,u,wt,r,l,e,bt,a,v,y,kt,o,dt,p,gt,w,b,k,d,f,ni,g,nt,tt,it,s,ti,rt,ut,ft,et,ot,st,h,ii,ht,ct;(function(n){var r=yt+"MoveButton_",t;(function(){i(t,r,["Title","Subscription","Resourcegroup"])})(t=n.MoveButton||(n.MoveButton={}))})(pt=t.Toolbar||(t.Toolbar={}));u="Part_",(function(n){var w=u+"PropertiesPart_",r,t,f,e,o,s,h,c,l,a,v,y,p;(function(){i(r,w,["changeLabel","changeSubscriptionLabel","changeResourceGroupLabel"])})(r=n.PropertiesPart||(n.PropertiesPart={}));t=u+"SettingList_",(function(n){var h=t+"Group_",r,u,e,o,s;(function(){i(r,h,["Settings","General","Monitoring","QuickAccess","Support","ResourceManagement"])})(r=n.Group||
(n.Group={}));u=t+"Keyword_",(function(){i(e,u,["Insights","logs","events"])})(e=n.Keyword||(n.Keyword={}));o=t+"Keywords_",(function(){i(s,o,["ExportTemplate","EventLogs","ResourceAdvisor","ResourceHealth","troubleshoot","helpRequest","quotas"])})(s=n.Keywords||(n.Keywords={}));i(f,t,["properties","ResourceProviders","AccessDetails","locksForSubscriptions","locks","ExportTemplate","EventLogs","ResourceAdvisor","ResourceHealth","troubleshoot","helpRequest","accessControl","users","tags","quotas","subCerts","roles","Resources","ResourceGroups","access","searchBoxPlaceholder"])})(f=n.SettingList||(n.SettingList={}));e=u+"CollectionSummary_",(function(){i(o,e,["NumberPlus","Number"])})(o=n.CollectionSummary||(n.CollectionSummary={}));s=u+"ResourceSummary_",(function(){i(h,s,["notAvailable","subscriptionNamePropertyLabel","subscriptionIdPropertyLabel","locationPropertyLabel","statusPropertyLabel","resourceGroupPropertyLabel"])})(h=n.ResourceSummary||(n.ResourceSummary={}));c=u+"Chart_",(function(){i(
l,c,["editButtonText"])})(l=n.Chart||(n.Chart={}));a=u+"Quickstart_",(function(){i(v,a,["title"])})(v=n.Quickstart||(n.Quickstart={}));y=u+"Provisioning_",(function(){i(p,y,["pollingFailed","deploymentStatusUnavailable","description"])})(p=n.Provisioning||(n.Provisioning={}))})(wt=t.Part||(t.Part={}));r="Azure_",(function(n){var c=r+"Subscriptions_",a,f,v,t,y,u,p,e,w,o,s,h,b;(function(n){var r=c+"DropDown_",t;(function(){i(t,r,["SubDisallowedRP","SubCantRegisterWithRP","RequiredPermissionsValidationMessage","SubscriptionNotAllowedForGalleryItemValidationMessage","DisabledSubscriptionValidationMessage","DefaultLabel"])})(t=n.DropDown||(n.DropDown={}))})(a=n.Subscriptions||(n.Subscriptions={}));f=r+"ResourceManager_",(function(n){var t=f+"Provisioner_",r;(function(n){var f=t+"ArmValidation_",u;(function(){i(u,f,["NetworkFailure","ValidationFailed"])})(u=n.ArmValidation||(n.ArmValidation={}));i(r,t,["SeeTemplateLink","PricingSummaryLinkLabel"])})(r=n.Provisioner||(n.Provisioner={}))})(v=n.ResourceManager||
(n.ResourceManager={}));t=r+"ResourceGroups_",(function(n){var e=t+"InfoBalloon_",u,r,f;(function(){i(u,e,["Text","LinkText"])})(u=n.InfoBalloon||(n.InfoBalloon={}));r=t+"DropDown_",(function(n){var u=r+"ProvisioningStateValidation_",t;(function(){i(t,u,["BaseMessage","Movingresources","Deleting","Deleted"])})(t=n.ProvisioningStateValidation||(n.ProvisioningStateValidation={}));i(f,r,["LockedValidationMessage","RequiredPermissionsValidationMessage","NoOptions","DefaultLabel"])})(f=n.DropDown||(n.DropDown={}))})(y=n.ResourceGroups||(n.ResourceGroups={}));u=r+"Validators_",(function(n){var e=u+"ReservedResourceName_",t,r,f;(function(){i(t,e,["Message"])})(t=n.ReservedResourceName||(n.ReservedResourceName={}));r=u+"RequiredPermission_",(function(){i(f,r,["Message"])})(f=n.RequiredPermission||(n.RequiredPermission={}))})(p=n.Validators||(n.Validators={}));e=r+"Legal_",(function(n){var r=e+"LegalTermsSelector_",t;(function(){i(t,r,["LegalTermsMessage","LegalTermsLabel","LegalTermsAcceptedMessage"])}
)(t=n.LegalTermsSelector||(n.LegalTermsSelector={}))})(w=n.Legal||(n.Legal={}));o=r+"BaseResourceDropDown_",(function(){i(s,o,["SearchingValidationMessage","CreatingResourcedDisabledValidationMessage"])})(s=n.BaseResourceDropDown||(n.BaseResourceDropDown={}));h=r+"Locations_",(function(n){var r=h+"DropDown_",t;(function(){i(t,r,["EmptyMessage","DefaultLabel"])})(t=n.DropDown||(n.DropDown={}))})(b=n.Locations||(n.Locations={}));i(l,r,["ErrorMessageWithCode"])})(l=t.Azure||(t.Azure={}));e="Pickers_",(function(n){var t=e+"Specs_",r,u,f;(function(n){var f=t+"DropDown_",u;(function(){i(u,f,["LabelLinkText","Recent","Available","Recommended","LabelFormatter"])})(u=n.DropDown||(n.DropDown={}));i(r,t,["PricingTier"])})(r=n.Specs||(n.Specs={}));u=e+"AccessDenied_",(function(){i(f,u,["reasonMessage"])})(f=n.AccessDenied||(n.AccessDenied={}))})(bt=t.Pickers||(t.Pickers={}));a="HeatMap_",(function(){i(v,a,["legend","noUnitsMessage","name"])})(v=t.HeatMap||(t.HeatMap={}));y="Controls_",(function(n){var r=y+"Grid2_",
t;(function(){i(t,r,["ContextMenu"])})(t=n.Grid2||(n.Grid2={}))})(kt=t.Controls||(t.Controls={}));o="ViewModels_",(function(n){var t=o+"Controls_",r,u,f;(function(n){var v=t+"ResourceGroups_",u,f,e,o,s,h,c,l,a;(function(){i(u,v,["SelectExisting","CreateNew"])})(u=n.ResourceGroups||(n.ResourceGroups={}));f=t+"DateTimePicker_",(function(){i(e,f,["TimeLabel","DateLabel"])})(e=n.DateTimePicker||(n.DateTimePicker={}));o=t+"DateTimePickerRange_",(function(){i(s,o,["StartTime","StartDate","EndTime","EndDate"])})(s=n.DateTimePickerRange||(n.DateTimePickerRange={}));h=t+"CreatorAndSelector_",(function(){i(c,h,["SelectExisting","UseExisting","CreateNew"])})(c=n.CreatorAndSelector||(n.CreatorAndSelector={}));l=t+"CreatorAndComboBox_",(function(){i(a,l,["UseExisting","CreateNew"])})(a=n.CreatorAndComboBox||(n.CreatorAndComboBox={}));i(r,t,["Calendar","FileUpload","Selector","CreatorAndSelectorLabel","Button","RemoveItem","ChooseItem","AddItem","SpecComparison","Terminal","SearchBox","Search","NoRowsMessage"])}
)(r=n.Controls||(n.Controls={}));u=o+"Container_",(function(){i(f,u,["notFound","preview","unauthorizedText"])})(f=n.Container||(n.Container={}))})(dt=t.ViewModels||(t.ViewModels={}));p="ResourceGroup_",(function(n){var r=p+"Validation_",t;(function(){i(t,r,["SubscriptionHasNoPermissionsMessage","LengthValidationMessage","InvalidMessage","AlreadyExistsMessage"])})(t=n.Validation||(n.Validation={}))})(gt=t.ResourceGroup||(t.ResourceGroup={}));w="UnitConversion_",(function(){i(b,w,["PetabytesPerSecondSI","TerabytesPerSecondSI","GigabytesPerSecondSI","MegabytesPerSecondSI","PetabytesSI","TerabytesSI","GigabytesSI","MegabytesSI","TrillionPerSecond","Trillion","ThousandPerSecond","Thousand","TerabytesPerSecond","Terabytes","Seconds","PetabytesPerSecond","Petabytes","Percentage","Minutes","MilliSeconds","MillionPerSecond","Million","MicroSeconds","MegabytesPerSecond","Megabytes","KilobytesPerSecondSI","KilobytesSI","KilobytesPerSecond","Kilobytes","Hours","GigabytesPerSecond","Gigabytes","Days","CountPerSecond",
"CountPerMinute","CountPerHour","CountPerDay","BytesPerSecond","BytesPerMinute","BytesPerHour","BytesPerDay","Bytes","BillionPerSecond","Billion"])})(b=t.UnitConversion||(t.UnitConversion={}));k="NumericTextBox_",(function(){i(d,k,["invalidText"])})(d=t.NumericTextBox||(t.NumericTextBox={}));f="DatePolyfill_",(function(n){var a=f+"Months_",t,r,u,e,o,s,h,c,l;(function(){i(t,a,["September","October","November","May","March","June","July","January","February","December","August","April"])})(t=n.Months||(n.Months={}));r=f+"MonthsAbbr_",(function(){i(u,r,["September","October","November","May","March","June","July","January","February","December","August","April"])})(u=n.MonthsAbbr||(n.MonthsAbbr={}));e=f+"Days_",(function(){i(o,e,["Wednesday","Tuesday","Thursday","Saturday","Monday","Friday","Sunday"])})(o=n.Days||(n.Days={}));s=f+"DaysAbbr_",(function(){i(h,s,["Wednesday","Tuesday","Thursday","Saturday","Monday","Friday","Sunday"])})(h=n.DaysAbbr||(n.DaysAbbr={}));c=f+"AgoStrings_",(function(){i(l,c,
["years","weeks","months","minutes","lessThanAMinute","hours","days","aYear","aWeek","anHour","aMonth","aMinute","aDay"])})(l=n.AgoStrings||(n.AgoStrings={}))})(ni=t.DatePolyfill||(t.DatePolyfill={}));g="FileDownload_",(function(){i(nt,g,["unauthorizedText"])})(nt=t.FileDownload||(t.FileDownload={}));tt="FileDownloadCommand_",(function(){i(it,tt,["fileDownloadErrorStatus","authTokenNotAvailable"])})(it=t.FileDownloadCommand||(t.FileDownloadCommand={}));s="Services_",(function(n){var f=s+"Gallery_",t,r,u;(function(){i(t,f,["ViewPricingSummaryLabel"])})(t=n.Gallery||(n.Gallery={}));r=s+"AssetHandler_",(function(){i(u,r,["titleGridColumn","assetTypeGridColumn"])})(u=n.AssetHandler||(n.AssetHandler={}))})(ti=t.Services||(t.Services={}));rt="Dialogs_",(function(){i(ut,rt,["OkButtonText","CancelButtonText"])})(ut=t.Dialogs||(t.Dialogs={}));ft="FileUpload_",(function(){i(et,ft,["notSupported","notReady"])})(et=t.FileUpload||(t.FileUpload={}));ot="DeleteAssetConfirmation_",(function(){i(st,ot,["bladeTitle","warningText",
"confirmationLabel","assetNameValidationFailureMessage","affectedItemsLabel"])})(st=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}));h="DeleteCommand_",(function(n){var f=h+"Failure_",t,r,u;(function(){i(t,f,["title","message"])})(t=n.Failure||(n.Failure={}));r=h+"Confirmation_",(function(){i(u,r,["title","message"])})(u=n.Confirmation||(n.Confirmation={}))})(ii=t.DeleteCommand||(t.DeleteCommand={}));ht="ExtensionRequestHandler_",(function(){i(ct,ht,["VersionMismatch"])})(ct=t.ExtensionRequestHandler||(t.ExtensionRequestHandler={}))})(i=t.Strings||(t.Strings={}))})(t=n.Resources||(n.Resources={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function i(n){t.push(n);n.reset()}function r(){t.forEach((function(n){n.reset()}))}var t=[];n.register=i;n.resetGlobalState=r})(t=n.GlobalStateManager||(n.GlobalStateManager={}))})(FxImpl||(FxImpl={})),(function(n){"use strict";var r=MsPortalFx,t=window,i=(function(){function n(n,t,i){this._cache={};this._formatCulture=n;
this._intl=t;this._formatFactorySelector=i}return n.prototype._create=function(n){var i,t,u,f;return this._intl&&(t=this._formatFactorySelector(this._intl),t&&(u=r.Base.Utilities.clone(n),f=this._formatCulture,i=new t(f,u))),i||{format:function(n){return n+""}}},n.prototype.get=function(n){var i=this._cache,t;return n?(t="",Object.keys(n).sort().forEach((function(i,r){r&&(t+=",");t+=i+":"+n[i]})),i[t]||(i[t]=this._create(n))):this._defaultFormat||(this._defaultFormat=this._create())},n})(),u=(function(){function n(n,t){var r=n.split(".");r.length>1?(this.displayLanguage=r[0],this.formatCulture=r[1]):this.displayLanguage=this.formatCulture=r[0];this._intl=t;this.numberFormatCache=new i(this.formatCulture,t,function(n){return n.NumberFormat});this.dateTimeFormatCache=new i(this.formatCulture,t,function(n){return n.DateTimeFormat})}return n.createWithBrowserIntl=function(i){return i===void 0&&(i=t.fx.environment.effectiveLocale||"en.en-us"),new n(i,t.Intl)},n.prototype.supportedLocalesOf=function(
n){var t=this._intl;return t?(n=t.DateTimeFormat.supportedLocalesOf(n),t.NumberFormat.supportedLocalesOf(n)):["en-us"]},n})(),f;n.IntlContext=u,(function(i){var r=n.IntlContext.createWithBrowserIntl(),u,f,e;i.displayLanguage=r.displayLanguage;i.formatCulture=r.formatCulture,(function(n){function t(n){return r.numberFormatCache.get(n)}function i(n){return t().format(n)}n.create=t;n.format=i})(u=i.NumberFormat||(i.NumberFormat={})),(function(n){function u(n){return r.dateTimeFormatCache.get(n)}var t="numeric",i="long";n.shortDatePattern={day:t,month:t,year:t};n.longDatePattern={weekday:i,year:t,month:i,day:t};n.fullDateTimePattern={weekday:i,year:t,month:i,day:t,hour:t,minute:t,second:t};n.monthDayPattern={month:i,day:t};n.shortTimePattern={hour:t,minute:t};n.longTimePattern={hour:t,minute:t,second:t};n.yearMonthPattern={year:t,month:i};n.create=u})(f=i.DateTimeFormat||(i.DateTimeFormat={})),(function(n){function t(n){return r.supportedLocalesOf(n)}n.supportedLocalesOf=t})(e=i.Internal||(i.Internal=
{}));t.define("MsPortalFx/Globalization",[],(function(){return n.Intl}))})(f=n.Intl||(n.Intl={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function i(){return t||(t=FxImpl.Extension.getRuntime().getSharedSettings())}var t;n.getSharedSettings=i})(t=n.Settings||(n.Settings={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function r(){var n=arguments,e=this,o=!1,u,h=n.length===1&&n[0]&&typeof n[0]=="object",s=n.length===2&&n[0]&&typeof n[0]=="object"&&(typeof n[1]=="function"||n[1]===null),r=s?n[1]:null,f;return(h||s)&&(f=n[0],u=e.replace(t,(function(n){var i=n.substring(1,n.length-1),t;return f.hasOwnProperty(i)?(o=!0,t=f[i],r?r(t):t):n}))),o||(u=e.replace(i,(function(t,i){if(i<n.length){var u=n[i];return r?r(u):u}return t}))),u}var t=/\{[a-zA-Z$_\d]*\}/g,i=/\{(\d+)\}/g;n.polyfill(String,{format:r,localeCompareIgnoreCase:function(t,i,r){return n.localeCompareIgnoreCase(this,t,i,r)},replaceAll:function(t,i){return n.replaceAll(this,t,i)},replaceMany:function(t)
{return n.replaceMany(this,t)},repeat:function(t){return n.repeat(this,t)},startsWith:function(t,i){return n.startsWith(this,t,i)},endsWith:function(t,i){return n.endsWith(this,t,i)}},!0)})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function f(n){return n||""}function i(n,t,i){return f(n).substr(t,i)}function s(n,t,i){return e(n)?o(n,r,4).slice(t,i).join(r):""}var h="?",c="#",l="=",a="&",r="/",u=n.isUndefined,e=n.isUriAbsolute,o=n.split,v=n.ensurePrefix,y=decodeURIComponent,p=encodeURIComponent,w=(function(){function n(n,t){var e=this,r,f;this._qs=[];this._qsMap={};this._leadingSeparator=u(t)?h:t;n&&(r=n,r[0]===this._leadingSeparator&&(r=i(r,1)),f=r.split(a),f.forEach((function(n){if(n){var r=n.indexOf(l),f=r>=0,t=f?i(n,0,r):n,u=f?i(n,r+1):"";t&&(t=y(t),u=y(u),e.setParameter(t,u))}})))}return n.prototype.clear=function(){return this._qs=[],this._qsMap={},this},n.prototype.setParameters=function(n){for(var t in n)n.hasOwnProperty(t)&&this.setParameter(t,n[t]);return this}
,n.prototype.getParameterIndex=function(n){var t=n.toUpperCase();return this._qsMap[t]},n.prototype.setParameter=function(n,t){var f=n.toUpperCase(),r=this._qsMap[f],i=this._qs;return u(r)?(this._qsMap[f]=i.length,i.push(n),i.push(t)):(i[r]=n,i[r+1]=t),this},n.prototype.getParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs[t+1]),i},n.prototype.getParameters=function(){for(var r,i={},t=this._qs,n=0,u=t.length;n<u;n+=2)r=t[n],r!==undefined&&(i[t[n]]=t[n+1]);return i},n.prototype.removeParameters=function(n){return n.forEach(this.removeParameter,this),this},n.prototype.removeParameter=function(n){var t=this.getParameterIndex(n),i;return u(t)||(i=this._qs,i[t]=i[t+1]=undefined),this},n.prototype.toString=function(n){var e,o;n===void 0&&(n=!0);for(var t="",r=this._qs,s=r.length,f=0;f<s;)e=r[f++],o=r[f++],u(e)||(t+=a,t+=p(e),t+=l,t+=p(o));return t&&(t=i(t,1),n&&(t=this._leadingSeparator+t)),t},n})(),b;t.QueryStringBuilder=w;b=(function(){function n(n){var t=f(n),u=
t.indexOf(c),o=u>=0,r=o?i(t,0,u):t,l=o?i(t,u):"",e=r.indexOf(h),s=e>=0,a=s?i(r,0,e):r;this._oq=s?i(r,e):"";this.path=a;this.query=new w(this._oq);this.fragment=l}return n.prototype.getOriginalQuery=function(){return this._oq},n.prototype.toString=function(){var t=(this.query||"").toString(),n=f(this.fragment);return n&&(n=v(n,c)),f(this.path)+t+n},n.prototype.getScheme=function(){var n=s(this.path,0,2);return n&&(n+="/"),n},n.prototype.getAuthority=function(){return s(this.path,2,3)},n.prototype.getSchemeAndAuthority=function(){return s(this.path,0,3)},n.prototype.getRelativePath=function(){var n=this.path;return e(n)&&(n=v(o(n,r,4)[3],r)),n},n.prototype.setRelativePath=function(n){var t=this.path,u;e(t)?(n=f(n),n.startsWith(r)&&(n=i(n,1)),u=o(t,r,4),u[3]=n,t=u.join(r)):t=n;this.path=t},n})();t.UriBuilder=b})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=undefined,r=n.extendArrayIntoMap,u=n.extendStringMapIntoMap,
f,e,o,s,h,c,l,a,v,y;t.Shell="fx";t.DefaultCloudName=window.fx.environment.defaultCloudName||"DefaultCloud";t.HubsCloudName="HubsCloud",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(f=t.ExtensionNames||(t.ExtensionNames={})),(function(n){n.Dashboard="Dashboard";n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseAllResources="BrowseAllResources";n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseServiceBlade="BrowseService";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.BrowseResourceBlade="BrowseResource";n.BrowseInstanceLinkBlade="BrowseInstanceLink";n.Gallery="Gallery";n.StoreGallery=
"StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource="BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(e=t.AssetNames||(t.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(o=t.ResourceTypes||(t.ResourceTypes={})),(function(n){var t;(function(n){u(n,{BrowseServicePinnedPart:"BrowseServicePart",BrowseResourcePinnedPart:i,BrowseResourceGroupPinnedPart:i})})(t=n.Hubs||(n.Hubs={}))})(s=t.PartNames||(t.PartNames={})),(function(n){var t,f,e,o;(function(n){r(n,["SubscriptionsBlade"])})(t=n.Billing||(n.Billing={})),(function(n){u(n,{CreateHubBlade:"GalleryCreateBlade",BrowseAllResourcesBlade:i,BrowseLinkBlade:i,BrowseResourceBlade:i,BrowseResourceGroupBlade:
i,BrowseServiceBlade:i,NotFoundAssetBlade:i,ResourceGroupMapBlade:i,ResourceMenuBlade:i,ResourceProperties:i,UnauthorizedAssetBlade:i,UnavailableAssetBlade:i})})(f=n.Hubs||(n.Hubs={})),(function(n){u(n,{GalleryFeaturedMenuItemBlade:i,GalleryResultsListBlade:i,LegalTermsV2Blade:"PCLegalTermsV2Blade"})})(e=n.Marketplace||(n.Marketplace={})),(function(n){r(n,["EventsBrowseBlade"])})(o=n.AzureMonitoring||(n.AzureMonitoring={}))})(h=t.BladeNames||(t.BladeNames={})),(function(n){n.ViewModel="viewModel";n.PartViewModel="partViewModel"})(c=t.ViewModelTypes||(t.ViewModelTypes={})),(function(n){r(n,["FeatureAdoption","FeatureObsolete"])})(l=t.Telemetry||(t.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(a=t.TelemetrySharing||(t.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(v=t.GalleryMenuItems||(t.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(y=t.BladeParameterNames||
(t.BladeParameterNames={}))})(i=t.Constants||(t.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";n.NativeError=Error})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function a(n){var u=[],i=[],f=n.prototype,r,t;for(i.push(n);(n=(f=c(f)).constructor)!==o;)i.push(n);while(n=i.pop())t=n.TypeName,r&&r===t?t=n.TypeName=s.getFunctionName(n):r=t,u.unshift(t);return u}function v(n,t){var i,u,r,f,e;return n&&(i=n.baseTypes,u=i&&i.length,u&&(r=a(t),f=r&&r.length,f&&(e=u-f,e>=0)))?r.every((function(n){return n===i[e++]})):!1}function f(n,t){if(n){var i=typeof n;i==="string"&&(n={message:n})}else n={};return $.extend({},t||{},n)}var o=FxImpl.NativeError,s=n.Base.Utilities,h=window,i="MsPortalFx.Errors.",c=Object.getPrototypeOf,l="Disposed",r,u,y,p,w,e,b;t.isInstanceOfErrorType=v;t.getErrorOptions=f;r=(function(n){function t(t){var i=f(t,{errorLevel:2}),u,e,o,l,r;n.call(this,i.message);u=a(c(this).constructor);this.type=u[0];this.baseTypes=
u;this.code=i.code;this.data=i.data;this._errorData=i.errorData;this.extension=h.fx.environment.extensionName;this.errorLevel=i.errorLevel;this._sourceErrorLevel=i._sourceErrorLevel;this.handled=i.handled;this.timestamp=i.timestamp||h.fx.getTimestamp();this.source=i.source;e=this.message;this.message=i.message||e;o=this.name;this.name=i.name||o;l=this.stack;this.stack=i.stack||l||s.getCurrentCallStack(!0);r=i.innerErrors;this.innerErrors=r?Array.isArray(r)?r.slice():[r]:[]}return __extends(t,n),t.isBaseOf=function(n){return v(n,this)},Object.defineProperty(t.prototype,"errorData",{get:function(){return this._errorData},enumerable:!0,configurable:!0}),t.TypeName=i+"Error",t})(o);t.Error=r;u=(function(n){function t(t,i){n.call(this,{source:t,errorData:i});this.dataSetName=t}return __extends(t,n),t.TypeName=i+"DataError",t})(r);t.DataError=u;y=(function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"FetchDataError",t})(u);t.FetchDataError=y;p=(function(n){function t(t,i)
{n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"UnauthorizedDataError",t})(u);t.UnauthorizedDataError=p;w=(function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.TypeName=i+"NotFoundDataError",t})(u);t.NotFoundDataError=w;e=(function(n){function t(t){var i=f(t,{errorLevel:0});n.call(this,i)}return __extends(t,n),t.TypeName=i+"CanceledError",t})(r);t.CanceledError=e;t.disposedCanceledError=new e({message:l,stack:l});b=(function(n){function t(t){n.call(this,t)}return __extends(t,n),t.TypeName=i+"DisposedError",t})(r);t.DisposedError=b})(t=n.Errors||(n.Errors={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n){var t;try{t=e(n)}catch(i){t="ERROR serializing message: "+e(i)}return t}function o(n,i,e,o){var l=u.bootMessageSignature,h=u.trustedParentOrigin,a=i.getAttribute("crossorigin"),c=function(i){var c=i.message||i.filename||i.lineno||i.colno,u={error:t(i.error),url:e,crossOriginAttribute:a},s={signature:l,kind:n,data:u};o&&(u.moduleName=
o);c?(u.details={fileName:i.filename,lineNumber:i.lineno,columnNumber:i.colno,message:i.message},r.postMessage(s,h)):f(e,(function(n,t){u.statusCode=n;u.httpMessage=t;r.postMessage(s,h)}))},s;i.addEventListener("error",c);s=function(){i.removeEventListener("load",s);i.removeEventListener("error",c)};i.addEventListener("load",s)}function f(n,t){try{var i=new XMLHttpRequest;i.onerror=function(){t(i.status,i.responseText,i.statusText)};i.onload=function(){t(i.status,i.status===200?"":i.responseText,i.statusText)};i.open("GET",n,!0);i.send()}catch(r){t(undefined,undefined)}}function e(n){if(!n||typeof n!="object")return String(n);var i=[];return Object.getOwnPropertyNames(n).forEach((function(r){var u=n[r],f=typeof u;if(f!=="function"){if(f!=="string"&&!MsPortalFx.startsWith(r,"###"))if(u instanceof Error)u=t(u);else try{u=JSON.stringify(u)}catch(e){u="<cyclic object>"}i.push(r+": "+u+"\r\n")}})),i.sort().join("")}var i=window,r=i.parent,u=i.fx.environment;n.getLogFriendlyMessage=t;n.addScriptErrorListener=
o;n.getStatusCode=f})(t=n.Diagnostics||(n.Diagnostics={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function it(n){var t=[],i=0;return k&&(t[i++]=k),n.level===-1&&(t[i++]="[DEBUG]"),t[i++]=new Date(n.timestamp).toString({hour:"numeric",minute:"numeric",second:"numeric"}),n.area&&(t[i++]=n.area),typeof n.code=="number"&&(t[i++]=n.code),n.message&&(t[i++]=n.message),t.push.apply(t,n.args),t}function nt(n){return{timestamp:b(),level:2,area:"MsPortalFx/Base/Base.Diagnostics",message:n,code:undefined}}function rt(){var n=[],o,t,l=6e4,h=1,i=1001,s=function(){n=o(n);t&&(e.clearTimeout(t),t=null)},r=function(i){n.push(i);n.length>g?s():t||(t=e.setTimeout((function(){s()}),l))};tt&&(r=f);var a=function(n){var t=n.level;if(t===-2){r(n);return}t>=h&&(i--,(i>=0||d)&&(i===0&&(n=nt("Maximum errors exceeded")),r(n)));u[t](n)},v=function(t){return n.filter((function(n){return n.level>=t}))},y=function(){n=[]},p=function(n){h=n;i=1001},c=function(n){o=n?function(
t){try{return n(t)}catch(i){return[]}}:function(n){return n.length>g&&n.splice(0,2,nt("Log entry buffer overflowed")),n}};return c(),{empty:y,flush:s,entries:v,log:a,pushLog:r,init:p,setCallback:c}}function y(n){var t=n||"",i=t.lastIndexOf("/");return i>=0?t.substr(i+1):t}function ut(n){var t=i;return i=n||p,t}function s(n,t){var i=e.console||{},r=f;return[n,t].forEach((function(n){var t=n&&i[n];typeof t=="function"&&(r=function(n){try{var r=it(n);t.apply(i,r)}catch(u){}})})),r}function ft(){var n={};return n[0]=s("log","debug"),n[1]=s("warn"),n[2]=s("error"),n[-1]=!l.debuglog?f:s("debug","log"),n}function et(n,t){var r=u[2],i;u[2]=function(t){r(t);n(t)};i=u[1];u[1]=function(n){i(n);t(n)}}function ot(n){var t=ft(),i=c(n)?-1:n;[-1,0,1,2].forEach((function(n){u[n]=n>=i?t[n]:f}))}function st(n,t,i,r,u){var f=!0;f=typeof t=="function"?t():!!t;f||(n.debugBreak,n.error(i,r,u))}var w=FxImpl.Diagnostics,c=n.isNullOrUndefined,b=Date.now,e=window,o=e.fx.environment,k="["+o.extensionName+"] ",l=o.trace||
{},u={},f=function(){},tt=o.features.canmodifyextensions==="true",d=o.isDevelopmentMode||!!l.diagnostics,g=50,a,r,v,p,i,h,ht;(function(n){n[n.Custom=-2]="Custom";n[n.Debug=-1]="Debug";n[n.Verbose=0]="Verbose";n[n.Warning=1]="Warning";n[n.Error=2]="Error"})(a||(a={}));t.LogEntryLevel=a;r=rt();v=f;p=function(n,t,i,u,f,e){var o,s,h;o=u?typeof u=="string"?u:w.getLogFriendlyMessage(u):u+"";s=o;n>=1&&i&&(s=[i,o].join(": "));h={timestamp:b(),level:n,area:t,message:s,code:f,args:e&&e.map((function(n){return n instanceof Error?w.getLogFriendlyMessage(n):n}))};r.log(h)};i=p;t.setWriter=ut;t.setupErrorDetection=et;h=(function(){function n(n){this.debugBreak=!!l.assert;this._area=n;this._type=y(n)}return n.writeEntry=function(n,t,r){for(var e,f=[],u=3;u<arguments.length;u++)f[u-3]=arguments[u];e=n>=1?y(t):null;i(n,t,e,r,null,f)},n.writeEntry2=function(n,t,r,u,f){var e=n>=1?y(t):null;i(n,t,e,r,u,f)},n.initialize=function(n,t){var i=!c(n),u=!c(t),e=f;i||u?i&&!u?t=n:!i&&u&&(n=-1):(n=t=-1,e=st);r.init(t);
ot(n);v=e},n.disable=function(){n.initialize(3,3)},n.prototype.verbose=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];i(0,this._area,this._type,n,null,r)},n.prototype.warning=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(1,this._area,this._type,n,t,u)},n.prototype.error=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(2,this._area,this._type,n,t,u)},n.prototype.debug=function(n){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];i(-1,this._area,this._type,n,null,r)},n.prototype.custom=function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];i(-2,this._area,this._type,n,t,u)},n.prototype.assert=function(n,t,i,r){v(this,n,t,i,r)},n.prototype.writeEntry=function(n,t,r,u){i(n,this._area,this._type,t,r,u)},n.getEntries=r.entries,n.clear=r.empty,n.flush=r.flush,n._setBufferFullCallback=r.setCallback,n})();t.Log=h,(function(n){n.pushLogEntry=r.pushLog})(ht=t.Internal||(t.Internal={}));d?h.
initialize():h.initialize(2,1)})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function i(n,t,i){n[t]=function(){return n[i].apply(this,arguments)}}function r(n){i(n,"finally","always");i(n,"catch","fail")}function u(t){return n.Deferred().resolve(t).promise()}function f(t){return n.Deferred().reject(t).promise()}var t=jQuery;n.ajax=t.ajax;n.ajax=function(){for(var i=[],n=0;n<arguments.length;n++)i[+n]=arguments[n];return t.ajax.apply(t,i)};n.selector=t;n.Callbacks=t.Callbacks;n.data=t.data;n.removeData=t.removeData,(function(){var n=t.Deferred;t.Deferred=function(t){var i=n(t),u=i.promise;return r(i),i.promise=function(){var n=u.apply(this,arguments);return r(n),n},i}})();n.Deferred=t.Deferred;n.resolve=u;n.reject=f})(t=n.Helpers||(n.Helpers={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n,t){return typeof t=="number"&&(t={palette:t}),i(
n,t||null)}var i=n.getStringMapFunc("type","options");t.newImageData=r})(i=t.Image||(t.Image={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.White=1]="White";n[n.Black=2]="Black";n[n.Blue=3]="Blue";n[n.Green=4]="Green";n[n.Gray=5]="Gray";n[n.Inherit=99]="Inherit";n[n.Disabled=100]="Disabled"})(n.ImagePalette||(n.ImagePalette={}));var t=n.ImagePalette})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function b(n,t,i,r){for(var u=t?t.split("."):[];n&&u.length;)n=i(n),n&&(n=n[u.shift()]);if(!u.length)return r&&(n=i(n)),n}function k(n,t,i,r){var u=t.subscribe(i,r,"arrayChange");return n&&n.registerForDispose(u),u}var a=n.Base,i=ko.utils,d=ko.observable,r=ko.observableArray,e=ko.isObservable,v=ko.unwrap,g=n.uncurryThis,f=n.isUndefined,ut=window,nt=jQuery,u="###knockoutArrayEditFixupTokenPropertyName###",y=Function.call,tt=Array.
prototype,p=g(tt.push),ft=new a.Diagnostics.Log("MsPortalFx/Base/Base.KnockoutExtensions"),w=undefined,o="added",c="deleted",it="retained",s="",rt={fixedUp:s,fixedUpIndexes:s,createArraySplices:s,mapIntoChanges:s},l=FxImpl.getErrorMap(rt),h;i.fixupArrayEdits=function(n){if(n){n[u]&&l.fixedUp();n[u]=u;var t=0;n.forEach((function(n){switch(n.status){case o:t++;break;case c:n.index+=t;t--}}))}return n};i.adjustArrayEdits=function(n,t,i){n[u]&&l.fixedUpIndexes();var r=0,e=n.map((function(n){var u=a.Utilities.clone(n);switch(n.status){case o:t&&(u.value=f(n.moved)?i(n.value):t[n.moved]);r++;break;case c:u.index+=r;r--;case it:t&&(u.value=t[n.index])}return u}));return e[u]=u,e},(function(n){function t(n,t,i){var r=3,u=!1;return(t.deleteCount>0||t.spliceArguments.length>r)&&(t.spliceArguments[1]=t.startIndex,t.spliceArguments[2]=t.deleteCount,y.apply(i,t.spliceArguments),u=!0),t.deleteCount=0,t.startIndex=t.currentIndex,t.spliceArguments.length=r,u}n.quickApplyArrayEdits=function(n,i,r){for(var c=
r&&r.spliceFunc||Array.prototype.splice,a=r&&r.inplaceFixup,u={startIndex:0,currentIndex:0,spliceArguments:[n,0,0],deleteCount:0},e=0,l=0,v={added:1,deleted:-1},o=0,y=i.length;o<y;o++){var s=i[o],f=v[s.status]||0,h=s.index;a&&(f<0&&(h+=l),l+=f);u.currentIndex!==h&&(t(n,u,c)&&e++,u.startIndex=u.currentIndex=h);f>0?(u.currentIndex++,p(u.spliceArguments,s.value)):f<0&&u.deleteCount++}return t(n,u,c)&&e++,e}})(h=t.Internal||(t.Internal={}));i.applyArrayEdits=function(n,t,i){var r=0;if(t){var s=e(n),f=v(n),o=s&&n,c=i?function(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return Array.prototype.splice.apply(this,[n,t].concat(u.map(i)))}:w,l=t[u];r=h.quickApplyArrayEdits(f,t,{spliceFunc:c,inplaceFixup:!l});o&&r>0&&o(f)}return r},(function(n){function t(n,t,i,r){var a,s,h,tt,p,v,k,l,d,g,nt;if(n[u])throw new Error("createArraySplices does not work against edits with indexes that have been adjusted by adjustArrayEdits.");if(a=n.length,i){for(p=0,v=new Array(a),h=0;h<a;h++)s=n[h],
f(s.moved)&&s.status===o&&(v[p++]=s.value);v.length=p;tt=r(v)}var y=new Array(a),w=0,b=0,e,it=0;for(h=0;h<a;h++)s=n[h],k=s.status,l=!f(s.moved),k===o?(d=s.index,g=i?l?i[s.moved]:tt[it++]:s.value,e&&(!t||!!e.move===l)&&d===e.start+e.items.length?e.items.push(g):(e={start:d,deleteCount:0,items:[g]},t&&l&&(e.move=l),y[w++]=e),b++):k===c&&(nt=s.index+b,e&&(!t||!!e.move===l)&&nt===e.start+e.items.length?e.deleteCount++:(e={start:nt,deleteCount:1,items:[]},t&&l&&(e.move=l),y[w++]=e),b--);return y.length=w,y}n.createArraySplicesInternal=t})(h=t.Internal||(t.Internal={}));i.createArraySplices=function(n,t,i,r){return h.createArraySplicesInternal(n,t,i,r?function(n){return n.map(r)}:w)};i.applyArraySplices=function(n,t,i){var u=[],r;return t.length&&(t.length>1&&e(n)&&(r=n,n=r.peek(),r.valueWillMutate()),t.forEach((function(t){var r,f,e;r=i?t.items.map(i):t.items;f=[t.start,t.deleteCount];e=n.splice.apply(n,f.concat(r));t.move||u.push.apply(u,e)})),r&&r.valueHasMutated()),u};i.twoWayBinding=function(
n,t){var r=n(),u=t(),i=!1,e=function(n,t){if(!i)try{i=!0;n(t)}finally{i=!1}},o,s;return f(r)?f(u)||n(u):t(r),o=n.subscribe((function(n){e(t,n)})),s=t.subscribe((function(t){e(n,t)})),[o,s]};i.cleanDescendantNodes=function(n){nt(n).contents().toArray().forEach((function(n){ko.cleanNode(n)}))};i.wrap=function(n){return e(n)?n:d(n)};i.wrapArray=function(n){return e(n)?n:r(n)};i.unwrapObservablePath=function(n,t,i){return i===void 0&&(i=!0),b(n,t,v,i)};i.peekObservablePath=function(n,t,r){return r===void 0&&(r=!0),b(n,t,i.peekObservable,r)};t.subscribeArrayEdits=k;r.fn.subscribeArrayEdits=function(n,t,i){return k(n,this,t,i)};r.fn.subscribeArrayChanges=function(n,t,i,r){r=r||this;var u=[r,null],e={added:t,deleted:i};return this.subscribeArrayEdits(n,(function(n){for(var i,r,t=0,o=n.length;t<o;t++)i=n[t],f(i.moved)&&(r=e[i.status],r&&(u[1]=i.value,y.apply(r,u)))}))};r.fn.subscribeArrayBulkChanges=function(n,t,i){return i=i||this,this.subscribeArrayEdits(n,(function(n){for(var r,e=[],o=[],s={added:e,
deleted:o},u=0,h=n.length;u<h;u++)r=n[u],f(r.moved)&&p(s[r.status],r.value);t.call(i,e,o)}))};r.fn.subscribeArrayAdds=function(n,t,i){return this.subscribeArrayChanges(n,t,null,i)};r.fn.subscribeArrayDeletes=function(n,t,i){return this.subscribeArrayChanges(n,null,t,i)};r.fn.mapInto=function(n,t,u){var f,o;u||(u=r());var h=this,e=new FxImpl.TriggerableLifetimeManager,c=function(n){return ko.ignoreDependencies((function(){var i=e.createChildLifetime(),r=t(i,n);return{item:r,lifetime:i}}))},s=h.peek().map(c);return u(s.map((function(n){return n.item}))),f=new FxImpl.TriggerableLifetimeManager,o=!1,u.subscribe(f,(function(){o||l.mapIntoChanges()})),h.subscribeArrayEdits(f,(function(n){var t=i.createArraySplices(n,!0,s,c),r=i.applyArraySplices(s,t);try{o=!0;i.applyArraySplices(u,t,(function(n){return n.item}))}finally{o=!1;r.forEach((function(n){n.lifetime.dispose()}))}})),n.registerForDispose({dispose:function(){f&&(f.dispose(),f=null);e&&(e.dispose(),e=null)}}),u};t.markIgnoreHighDependenciesCount=n.
noop})(i=t.KnockoutExtensions||(t.KnockoutExtensions={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(){"use strict";var n=MsPortalFx.Errors.isInstanceOfErrorType,t=Q.makePromise.prototype;t.catchError=function(t,i){return this.catch((function(r){return n(r,t)?i(r):Q.reject(r)}))}})(t=n.QExtensions||(n.QExtensions={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function s(n,t){return new e(n,t)}function r(n,t){var f=Q.defer(),u=f.promise,h=t.cancelation,c=h(),o,e,s;if(c)f.reject(c);else{if(o=new FxImpl.TriggerableLifetimeManager,h.subscribe(o,(function(n){n&&u.isPending()&&f.reject(n)})),u.finally((function(){o.dispose()})),Q.isPromiseAlike(n))e=Q(n);else try{e=Q(n())}catch(l){e=Q.reject(l)}e.then((function(n){u.isPending()&&f.resolve(n)}),(function(n){u.isPending()&&f.reject(n)}),(function(n){t.canceled||f.notify(n)}))}return s=u.then,u.then=function(n,f,e){if(f)return s.apply(u,arguments);var o=i(n,t),h=i(e,t);return o||
h?r(s.call(u,o,f,h),t):u},u}function h(n,t,i){var o=new u,s=function(){o.cancel(new f(i||"cancelOnDisposed"))},c=!n||n.isDisposed&&n.isDisposed(),e=!c&&n.createChildLifetime(),h;return e?e.registerForDispose(s):s(),h=r(t,o),h.finally((function(){e&&e.dispose()}))}function i(n,t){return n&&function(i){if(!t.canceled)return n(i)}}var f=n.Errors.CanceledError,o,u,e;(function(n){n.fulfilled="fulfilled";n.rejected="rejected"})(o=t.PromiseStates||(t.PromiseStates={}));t.wrapWithCancelablePromise=s;t.makeCancelable=r;t.cancelOnDispose=h;u=(function(){function n(){this.cancelation=ko.observable()}return Object.defineProperty(n.prototype,"canceled",{get:function(){return!!this.cancelation.peek()},enumerable:!0,configurable:!0}),n.prototype.cancel=function(n){var t=this.cancelation,i=t.peek()||n||new f;return t(i),i},n})();t.CancelationToken=u;e=(function(){function n(n,t){if(!n||!t)throw new Error("Argument '"+(n?"cancelationToken":"underlyingPromise")+"' cannot be null or undefined.");this._underlyingPromise=
n;this._cancelationToken=t}return n.prototype.then=function(t,r){var u=this._cancelationToken,e=i(t,u),o=i(r,u),f=this._underlyingPromise;return(e||o)&&(f=f.then(e,o)),new n(f,u)},n.prototype.progress=function(t){if(this._underlyingPromise.progress){var u=this._cancelationToken,f=i(t,u),r=this._underlyingPromise;return f&&(r=r.progress(f)),new n(r,u)}return this},n.prototype.finally=function(n){return this.then(n,n)},n.prototype.catch=function(n){return this.then(null,n)},n})()})(i=t.Promises||(t.Promises={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var h=n.keysLength,c=ko.observable,l=n.uncurryThis,a=Array.prototype,r=l(a.forEach),v=n.shallowCopyFromObject,f=n.disposeDisposable,u="",y={keyNotFound:u,reservedKey:u,noPut:u,noRemove:u,noClear:u},i=FxImpl.getErrorMap(y),e=(function(){function n(){this._modifyMap={};this._dependantMaps=[];this._observable=c({});this._isInModifyBlock=!1;this.latch=this._observable}return n.
prototype.put=function(n,t){var i=this;this._validateKey(n);this.modify((function(){i._modifyMap[n]=t;r(i._dependantMaps,(function(i){return i._putNotification(n,t)}))}))},n.prototype.lookup=function(n){return this._modifyMap[n]},n.prototype.modify=function(n){var i=!1,t=[];this._isInModifyBlock||(i=!0,this._isInModifyBlock=!0,this._modifyMap={},v(this._modifyMap,this._observable()),r(this._dependantMaps,(function(n,i){t.push((function(){return n.modify(t[i+1])}))})));try{t.push(n);t[0]()}finally{i&&(this._isInModifyBlock=!1,this._observable(this._modifyMap))}},n.prototype.clear=function(){var n=this;this.modify((function(){n._modifyMap={};r(n._dependantMaps,(function(t){return t._clearNotification(n)}),n)}))},Object.defineProperty(n.prototype,"count",{get:function(){return h(this._observable())},enumerable:!0,configurable:!0}),n.prototype.remove=function(n){var t=this;this._validateKey(n);n in this._observable()||i.keyNotFound(n);this.modify((function(){delete t._modifyMap[n];r(t._dependantMaps,(function(
t){return t._removeNotification(n)}))}))},n.prototype.forEach=function(n){this.some((function(){return n.apply(this,arguments),!1}))},n.prototype.some=function(n,t){var r=this._observable(),f=t||this,i,u;for(i in r)if(u=r[i],n.call(f,u,i))return!0;return!1},n.prototype.every=function(n,t){return!this.some((function(){return!n.apply(this,arguments)}),t)},n.prototype.toArray=function(){var n=[];return this.forEach((function(t){n.push(t)})),n},n.prototype.dispose=function(){},n.prototype.subscribe=function(n,t,i,r){return this._observable.subscribe(n,t,i,r)},n.prototype.map=function(n,t){return new o(n,this,t)},n.prototype._addDependantMap=function(n){this._dependantMaps.push(n)},n.prototype._removeDependantMap=function(n){var t=this._dependantMaps.filter((function(t){return t!==n}));t.length!==this._dependantMaps.length&&(this._dependantMaps=t)},n.prototype._putNotification=function(){},n.prototype._removeNotification=function(){},n.prototype._clearNotification=function(){},n.prototype._validateKey=
function(n){for(var t in Object.prototype)t===n&&i.reservedKey(n)},n})(),o,s;t.ObservableMap=e;o=(function(n){function t(t,i,r){var u=this;n.call(this);this._map=i;this._transform=r;i._addDependantMap(this);t.registerForDispose(this);this.modify((function(){i.forEach((function(t,i){n.prototype.put.call(u,i,u._transform(t,undefined))}))}))}return __extends(t,n),t.prototype.dispose=function(){this._map._removeDependantMap(this)},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){var r=this.latch()[t],u=this._transform(i,r);r&&r!==u&&f(r);n.prototype.put.call(this,t,u)},t.prototype._removeNotification=function(t){var i=this.latch()[t];f(i);n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(){this.forEach((function(n){return f(n)}));n.prototype.clear.call(this)},t})(e);t.ObservableMapProjection=o;s=(function(n){function t(t){for(var r=this,u=[],i=1;i<arguments.length;
i++)u[i-1]=arguments[i];n.call(this);this._maps=u;t.registerForDispose(this);u.forEach((function(t){t._addDependantMap(r);r.modify((function(){t.forEach((function(t,i){n.prototype.put.call(r,i,t)}))}))}))}return __extends(t,n),t.prototype.dispose=function(){var n=this;r(this._maps,(function(t){return t._removeDependantMap(n)}))},t.prototype.put=function(){i.noPut()},t.prototype.remove=function(){i.noRemove()},t.prototype.clear=function(){i.noClear()},t.prototype._putNotification=function(t,i){n.prototype.put.call(this,t,i)},t.prototype._removeNotification=function(t){n.prototype.remove.call(this,t)},t.prototype._clearNotification=function(t){var i=this;this._modifyMap={};r(this._maps,(function(r){r!==t&&r.forEach((function(t,r){n.prototype.put.call(i,r,t)}))}));r(this._dependantMaps,(function(n){n._clearNotification(i)}))},t})(e);t.ObservableMapUnion=s})(i=t.Internal||(t.Internal={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function p(){return f.apply(this,arguments)}
function w(){y(arguments[0],"Invalid first argument: it must be a lifetimeManager.");f.apply(this,arguments)}function h(n){var t=n.subscribe;n.subscribe=function(n){var f,e,u,o;if(i(n),r(n)){for(f=arguments.length-1,e=new Array(f),u=0;u<f;u++)e[u]=arguments[u+1];return o=t.apply(this,e),n.registerForDispose(o),o}return t.apply(this,arguments)}}function t(n){return n&&(n.map=b,n.filter=k),n}function b(n,u){if(i(n),r(n)){var f=a.call(this,{mappingWithDisposeCallback:function(t){var i=n.createChildLifetime();return{mappedValue:u(i,t),dispose:function(){i.dispose()}}}});return n.registerForDispose(f),t(f)}return t(a.apply(this,arguments))}function k(n,u){if(i(n),r(n)){var f=v.call(this,u);return n.registerForDispose(f),t(f)}return t(v.apply(this,arguments))}function i(n){y(n,"Invalid first argument: it must be a lifetimeManager, function or object.")}function y(n,t){var i=typeof n;if(!n||i!=="function"&&i!=="object")throw new Error(t+" Actual: "+(n===null?"null":i));}function r(n){return n&&
typeof n.registerForDispose=="function"}var u=n.computed,s=n.ignoreDependencies,f=n.computed=function(t){var l,f,e,o,c,h,a,v;if(i(t),r(t)){for(l=arguments.length-1,f=new Array(l),e=0;e<l;e++)f[e]=arguments[e+1];return o=f[0],c=n.isSubscribable(o)&&[o]||Array.isArray(o)&&o,c&&(f.shift(),h=f[0],typeof h=="function"?f[0]=function(){return s(h,this,c.map((function(n){return n&&n()})))}:(a=h.read,a&&(h.read=function(){return c.map((function(n){return n&&n()})),s(a,this,null)}))),v=u.apply(this,f),t.registerForDispose(v),v}return u.apply(this,arguments)},e,c,l;n.explicitComputed=p;n.reactor=w;e=n.subscribable.fn;h(e);e.subscribeAndRun=function(n,t,i,r){var u=this.subscribe(n,t,i,r);return u.callback(this()),u};c=n.extenders.trackArrayChanges;n.extenders.trackArrayChanges=function(n){var t=n.subscribe,i=c.apply(this,arguments),r=n.subscribe;return r!==t&&h(n),i};l=n.hasPrototype;n.hasPrototype=function(t,i){return i===f&&(i=u),l.call(n,t,i)};var o=n.observableArray,a=o.fn.map,v=o.fn.filter;t(o.fn)})
(ko||(ko={})),(function(n){"use strict";var t=n.Base.Diagnostics;n.polyfill(Array,{concatUnique:function(t,i){return n.union(this,t,i)},first:function(t,i){var r=n.findIndex(this,t,i);return r<0?null:this[r]},firstIndex:function(t,i){return n.findIndex(this,t,i)},last:function(){if(this.length<1)throw new Error("Cannot get the last element because the array is empty.");return this[this.length-1]},mapMany:function(t){return n.mapMany(this,t)},remove:function(t){return n.remove(this,(function(n){return n===t}))},stableSort:function(t){return n.stableSort(this,t)},toNumberMap:function(n){var t=[];return this.forEach((function(i){t[n(i)]=i})),t},unique:function(t){return n.unique(this,t)}})})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function i(n,t,i){return i===void 0&&(i=0),{limit:n,format:t,factorSeconds:i}}function ui(t,i){var r,f,e,o,u;if(i>=1){if(r=ft[t],r||(r=ft[t]=[""]),f=r[i],!f){for(e=n.repeat,o=i<5?5:i,u=1;u<o;u++)r[u]=e(t,u);f=r[i]}return f}return""}function fi(
n,t,i){i===void 0&&(i="0");var r=n+"",u=t-r.length;return u>0?ui(i,u)+r:r}function ot(n,t){return(n+"").substr(-t)}function st(n,t){return ot(e(n,t),t)}function ei(n){return(n-1)%12+1}function s(n){for(var t="",i=0,r=n.length;i<r;i++)t+="\\",t+=n[i];return t}function oi(n,t){var i=t.length,r=i===2?st:g,f=et(),c,l,v,o,y,a,w;switch(t[0]){case"y":return c=n.getFullYear(),i===3?e(c,i):i===1?parseInt(g(c,2),10)+"":st(c,i);case"M":return l=n.getMonth(),i===4?s(f.months[l]):i===3?s(u.monthsAbbr[l]):r(l+1,2);case"d":return i===4?s(f.days[n.getDay()]):i===3?s(u.daysAbbr[n.getDay()]):r(n.getDate(),2);case"h":v=!0;case"H":return o=n.getHours(),o=v?ei(o):o,r(o,2);case"m":return r(n.getMinutes(),2);case"s":return r(n.getSeconds(),2);case"t":return y=i===2?f.ampm:u.ampmAbbr,y[n.getHours()<12?0:1];case"z":var h=-n.getTimezoneOffset()/60,b=h<0,p="+";return b&&(h=-h,p="-"),a=parseInt(h+"",10),w=(h-a)*60,p+(i===3?e(a,2)+":"+e(w,2):e(a,i));case"/":return f.dateSeparator;case":":return f.timeSeparator}return""}
function si(n,t){return y(oi(n,t))}function ht(n,t){var o=t?t.getTime():Date.now(),f=o-n.getTime(),i,r,e,u;for(f/=1e3,r=0,e=ut.length;r<e;r++)if(i=ut[r],f<i.limit)break;return u=i.format,i.factorSeconds&&(u=u.format(Math.round(f/i.factorSeconds))),u}function at(n){n=n||0;var i=this.getDate(),r=this.getDay(),t=n-r;return t>0&&(t-=7),new Date(this.getFullYear(),this.getMonth(),i+t)}function hi(n){var t=at.call(n,u.firstDayOfWeek);return p[0].format=function(t){return ht(t,n)},p[1].limit=(n.getTime()-t.getTime())/1e3,p}function ci(n,t){var u,f,i,e,r;for(t===void 0&&(t=new Date),u=hi(t),f=(t.getTime()-n.getTime())/1e3,i=0,e=u.length;i<e;i++)if(r=u[i],f<r.limit&&r.limit>0)break;return r.format(n)}function pt(){return function(){var r=this,n,t,i;return arguments.length?(n=arguments[0],typeof n=="string"?(n=u.standard[n]||n,n=n.replace(/'([^']*)'/g,yt),t=function(n){return si(r,n)},y(y(n).replace(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g,t).replace(/\\(?!\\)/g,
""))):(i=h.create(n),i.format(this))):dt(this,arguments)}}var bt=n.Resources.Strings.DatePolyfill,h=FxImpl.Intl.DateTimeFormat,w=n.uncurryThis,kt=Array.prototype,c=w(kt.map),dt=w(Date.prototype.toString),gt=Date.parse,o=bt,li=new n.Base.Diagnostics.Log("MsPortalFx.Polyfill"),ni=o.Days,ti=o.DaysAbbr,ii=o.Months,ri=o.MonthsAbbr,r=o.AgoStrings,it=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],rt=["january","february","march","april","may","june","july","august","september","october","november","december"],u={days:c(it,(function(n){return ni[n]})),daysAbbr:c(it,(function(n){return ti[n]})),months:c(rt,(function(n){return ii[n]})),monthsAbbr:c(rt,(function(n){return ri[n]})),ampm:["AM","PM"],ampmAbbr:[],dateSeparator:"/",timeSeparator:":",standard:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",f:"",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"",G:"",m:"MMMM dd",M:"MMMM dd",r:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",R:"ddd, dd MMM yyyy HH':'mm':'ss 'GMT'",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",t:"h:mm tt",
T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},firstDayOfWeek:0},l=60,a=l*60,f=a*24,b=f*7,v=f*365,k=v/12,ut=[i(l,r.lessThanAMinute),i(l*1.5,r.aMinute),i(a,r.minutes,l),i(a*1.5,r.anHour),i(f,r.hours,a),i(f*1.5,r.aDay),i(b,r.days,f),i(b*1.5,r.aWeek),i(k,r.weeks,b),i(k*1.5,r.aMonth),i(v,r.months,k),i(v*1.5,r.aYear),i(Number.POSITIVE_INFINITY,r.years,v),],ft={},et=function(){return u},d,e,g,y,ct,lt,p,vt,nt,yt,wt,tt;t.getLocaleValues=Date.getLocaleValues=et;d=function(n){u=n||u;u.ampmAbbr=[u.ampm[0][0]||"",u.ampm[1][0]||""];var t=u.standard;t.f=t.D+" "+t.t;t.g=t.d+" "+t.t;t.G=t.d+" "+t.T};t.setLocaleValues=Date.setLocaleValues=d;e=fi;g=ot;y=n.reverse;p=[{limit:f,format:undefined},{limit:undefined,format:function(n){var t=ct||(ct=h.create({weekday:"long"}).format);return t(n)}},{limit:Number.POSITIVE_INFINITY,format:function(n){var t=lt||(lt=h.create(h.shortDatePattern).format);return t(n)}}];vt={difference:ht,timestamp:ci};nt=function(n,t){var i=vt[n||"difference"];
if(i)return i(this,t||new Date)};t.dateToRelativeString=nt;yt=w(s);t.getDateToStringFunc=pt;wt=pt(/(y{1,5}|M{1,4}|d{1,4}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|t{1,2}|z{1,3}|\/|:)(?!\\)/g);n.polyfill(Date,{toRelativeString:nt,toString:wt,getFirstDayOfWeek:at},!0);tt=function(t){return(typeof t!="string"&&(t=t+""),n.startsWith(t,"/Date("))?parseInt(t.substr(6),10):gt.call(this,t)};t.dateParse=tt;Date.parse=tt;d(u)})(t=n.Polyfills||(n.Polyfills={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function r(n){if(jQuery.type(n)!==i||n.nodeType||f(n))return!1;var t=n.constructor,r=t&&t.prototype;return!(r&&!c(r,"isPrototypeOf"))}function a(n){for(var t in n)return!1;return!0}function f(n){return n!=null&&n===n.window}function e(n){if(n==null)return n+"";var t=typeof n;return t===i||t===u?l[toString.call(n)]||i:t}function o(n){return e(n)===u}function s(){for(var p=[],h=0;h<arguments.length;h++)p[+h]=arguments[h];var c,
e,u,t,l,a,n=arguments[0]||{},f=1,y=arguments.length,v=!1;for(typeof n=="boolean"&&(v=n,n=arguments[f]||{},f++),typeof n===i||o(n)||(n={}),f===y&&(n=this,f--);f<y;f++)if((c=arguments[f])!=null)for(e in c)(u=n[e],t=c[e],n!==t)&&(v&&t&&(r(t)||(l=Array.isArray(t)))?(l?(l=!1,a=u&&Array.isArray(u)?u:[]):a=u&&r(u)?u:{},n[e]=s(v,a,t)):t!==undefined&&(n[e]=t));return n}var h=n.uncurryThis,c=h(Object.prototype.hasOwnProperty),l={},i="object",u="function";t.isPlainObject=r;t.isEmptyObject=a;t.isWindow=f;t.type=e;t.isFunction=o;t.extend=s})(i=t.JQuery||(t.JQuery={}))})(i=t.Internal||(t.Internal={}))})(i=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function d(n,t,i){var r=i?[!0,n,t]:[n,t];return it.extend.apply(void 0,r)}function ht(n,t,i){if(i&&ut(n))return n;var r=u(n)?[]:{};return d(r,n,t)}function g(t){return n.isNullOrUndefined(t)?"":(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(
/>/g,"&gt;")}function ct(n){return g(n).replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/`/g,"&#96;")}function lt(n){var i,u,r,e,o;return n||t.isDiagnosticsEnabled?(i=f(),i&&(u="\n",r=0,r=i.indexOf(u,0),r=i.indexOf(u,r+1),e=i.indexOf("@",0),o=e>-1&&e<r,o||(r=i.indexOf(u,r+1)),i=i.substr(r+1)),i||""):"(Callstack capturing is not enabled. Use ?trace=diagnostics to enable it.)"}function at(n,t){var i=function(t,i){if(t===n&&!t.hasOwnProperty(i))throw new Error("Missing property '"+i+"' on root object '"+h(t)+"'.");},r=function(r,f){var h=f===n,e,o;return f&&typeof f=="object"&&!u(f)?(e=h&&t?t:s(f),e.length===0?h?{}:f:(o=new dt,e.forEach((function(n){i(f,n);o.addProperty(n,f[n])})),o.toJSON())):f};return h(n||{},r)}function vt(n){if(!n||typeof n!="object"||u(n))throw new Error(l+".");var t=s(n);if(t.length!==1)throw new Error(l+" with only one property.");return t[0]}function yt(n,t,i){return n[i]}function pt(n){var t=function(t,r){if(t===b&&u(r)){var f=this;i.extendArrayIntoMap(f,r,(function(
t){try{return vt(t)}catch(i){i.message=i.message+(" String: '"+n+"'.");throw i;}}),yt);return}return r};return ft(n,t)}function wt(n){n&&i.disposeDisposable(n.content,n.container)}function bt(n){return o+n+o}function kt(n){return n!=="constructor"&&!i.startsWith(n,o)}function y(n){var t="object",i;return n.constructor&&(i=n.constructor,t=v(i)),t}function r(n){return"<"+n+">"}function ni(n,t,i,f){function l(n){return i.visited.indexOf(n)<0?(i.visited.push(n),!0):!1}var e,o,s,g=!n,p=g||f,w,b,h,c,k,d;if(!n||n[0]!=="_")return s=typeof t,e=r(s),s in nt||(s==="object"?t===null?e=r("null"):u(t)?(w=t,b=l(t)?"":a,e=b+r("Array["+w.length+"]")):t instanceof Date?e=r("Date"):i.current!==t?(h=r(y(t)),p?(e=o={},o[h]=t,o=o[h],i.current=t):e=h):(i.current=null,e=l(t)?t:a+r(y(t))):s==="function"&&(c=r(s)+v(t),ko.isObservable(t)&&p?l(t)?(e=o={},k=t,d=k.peek(),o[c]=d):e=a+c:e=c)),e}function ti(n,t){var i={current:null,visited:[]};return h(n,(function(n,r){return ni(n,r,i,t)}),2).replace(/\"/g,"")}function ii(
n,t,r){var u={};return i.extendArrayIntoMap(u,n,t,r),u}var i=n,tt=i.Base,it=t.Internal.JQuery,p=window,e=p.fx.environment,rt=new tt.Diagnostics.Log("MsPortalFx/Base/Base.Utilities"),w=function(){return(new Error).stack},ut=function(n){return typeof n!="object"||n===null},b="#",o="###",u=Array.isArray,s=Object.keys,h=JSON.stringify,ft=JSON.parse,et=i.forEachKey,f,c,l,nt;if(t.isDiagnosticsEnabled=(function(){var n=e.trace;return n&&n.diagnostics?!0:n&&n.nocallstacks?!1:e.isDevelopmentMode&&!!w()?!0:!1})(),f=w,i.isIFrame&&(!e.trace.nonsecure||!e.isDevelopmentMode)){var ot="This call to {0} is not allowed in an extension.",st={alert:undefined,confirm:!1,prompt:null},k=0;et(st,(function(n,t){k++;p[n]=function(i){return rt.error(ot.format(n),k,i),t}}))}f()||(f=n.noop,t.isDiagnosticsEnabled&&(c=function(){try{throw new Error;}catch(n){return n.stack}},c()&&(f=c)));t.extend=d;t.clone=ht;t.htmlEncode=g;t.attributeEncode=ct;t.getCurrentCallStack=lt;t.toSortedString=at;l="Invalid sorted string, property array must contain objects";
t.parseSortedString=pt;t.disposeViewModelProperties=wt;t.generateNonSerializableProperty=bt;t.isSerializableProperty=kt;var dt=(function(){function n(){this._propertyMap={}}return n.prototype.addProperty=function(n,t){t!==undefined&&typeof t!="function"&&(this._propertyMap[n]=t)},n.prototype.toJSON=function(){var n=this._propertyMap,i=s(n),t;return i.length>1?(t={},t[b]=i.sort().map((function(t){var i={};return i[t]=n[t],i})),t):n},n})(),gt=/function\s+(\w*)\(.*?\)/,a="[potential-circular-reference]",v=function(n){var t,r,i;return n?(t=n.name,t===undefined&&(r=n.toString(),r&&(i=gt.exec(r),i&&i.length>=1&&(t=i[1]))),t||"[anonymous]"):""};t.getFunctionName=v;t.getObjectConstructorName=y;nt={undefined:1,boolean:1,number:1,string:1};t.getObjectDescriptor=ti;t.convertArrayToMap=ii})(i=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function i(t,i){if(n.multiCloudEnabled&&!t)throw new Error(h+(i||"")+c);}function l(
t){return n.multiCloudEnabled?(i(t),t):w}function a(t,r){return i(t),i(r),!n.multiCloudEnabled||t===r||t.toLowerCase()===r.toLowerCase()}function v(n){return new e.QueryStringBuilder(n).getParameter(b)}function y(){return!!n.selfCloudName||f.isFeatureEnabled("multicloud")}function p(f,e){var h,s;if(e===void 0&&(e={}),h=f.name,!h)throw new Error("Extension name must not be empty");return!n.multiCloudEnabled||h===t.Shell?h:(s=f.cloudName,u!==h.toLowerCase()||e.forceCloudName||(s=r),e.addSelfCloudNameIfMissing&&(s=s||n.selfCloudName),i(s,"extension name = "+h),s=l(s),s+o+h)}function k(i,f){if(f===void 0&&(f={}),!i)throw new Error("Window id must not be empty");if(!n.multiCloudEnabled||i===t.Shell)return{name:i,cloudName:undefined};if(u===i.toLowerCase())return{cloudName:r,name:i};var e=i.split(o),s=e[e.length-2];if(f.addSelfCloudNameIfMissing&&(s=s||n.selfCloudName),!s)throw new Error(h+"windowId = "+i+c);return{cloudName:s,name:e[e.length-1]}}function d(t,i){var f=t.name.toLowerCase(),e=
i.name.toLowerCase(),r=f===e;return r&&n.multiCloudEnabled&&f!==u&&(r=a(t.cloudName,i.cloudName)),r}function g(){return p({name:s,cloudName:r})}function nt(){if(n.multiCloudEnabled)return r}var f=MsPortalFx,e=f.Base,t=e.Constants,o="/",w=t.DefaultCloudName,s=t.ExtensionNames.Hubs,r=t.HubsCloudName,h="Missing cloud name; ",b="cloudname",c="",u;n.selfCloudName=v(window.location.search);n.multiCloudEnabled=y();u=s.toLowerCase();n.validateCloudName=i;n.normalizeCloudName=l;n.isEqualCloudName=a;n.generateSelfCloudName=v;n.generateMultiCloudEnabled=y;n.getWindowId=p;n.getDescriptor=k;n.isEqualDescriptor=d;n.getHubsWindowId=g;n.getHubsCloudName=nt})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){"use strict";function t(n){if(!n)throw new Error(u);}function f(){return n.Extension.multiCloudEnabled?new r:new i}var u="Missing cloud name.",i,r;n.getCloudMap=f;i=(function(){function n(){}return n.prototype.get=function(){return this._value},n.prototype.set=function(n,t){this._value=
t},n.prototype.getOrSet=function(n,t){return this._value||(this._value=t),this._value},n.prototype.all=function(){return[this._value]},n.prototype.dispose=function(){this._value&&typeof this._value.dispose=="function"&&this._value.dispose()},n})();r=(function(){function n(){this._map={}}return n.prototype.get=function(n){return t(n),this._map[n.toLowerCase()]},n.prototype.getOrSet=function(n,i){t(n);var u=n.toLowerCase(),r=this._map[u];return r===undefined&&(this._map[u]=r=i),r},n.prototype.set=function(n,i){t(n);this._map[n.toLowerCase()]=i},n.prototype.all=function(){var n=[];return MsPortalFx.forEachKey(this._map,(function(t,i){n.push(i)})),n},n.prototype.dispose=function(){MsPortalFx.forEachKey(this._map,(function(n,t){t&&typeof t.dispose=="function"&&t.dispose()}))},n})()})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function o(n,i){MsPortalFx.extendArrayIntoMap(n,i,null,(function(n){return t+n}))}function s(n,i){MsPortalFx.extendStringMapIntoMap(n,i,(function(n){return t+
n}))}var f,h;(function(n){n.inputBindingKey="_msPortalFxCloudName";n.allClouds="_msPortalFxAllClouds"})(f=n.CloudName||(n.CloudName={}));var t="MsPortalFx.Internal.Constants.RpcMethods.",r=t+"AzureStorage.",i=t+"AzureResourceManager.DeploymentManager.",e="Hubs."+t,u=t+"ParameterCollection.ShellProvisioner.";(function(n){n.hubsGetResourceGroupsFromSubscription=e+"getResourceGroupsFromSubscription";n.getSasUriForQueue=r+"getSasUriForQueue";n.getHmacSha256=r+"getHmacSha256";n.azureResourceManagerDeployTemplate=i+"deployTemplate";n.azureResourceManagerPollForDeployment=i+"pollForDeployment";n.validateArmTemplate=i+"validateTemplate";n.getProvisioningRequest=u+"fulfillProvisioningRequest";n.initiateProvisioningRequest=u+"initiateProvisioningRequest";o(n,["brokerExtensionService","forwardEvent","getUserInfo","getSharedSettings","entryPointDispose","entryPointGetDefinition","entryPointGetBladeDefinition","entryPointGetControlDefinition","entryPointGetPartDefinition","entryPointInitialize","hasPermission",
"mapAssetIdToResourceId","mapResourceIdToAssetId","mapAssetIdToDynamicSelectionAndIcon","mapResourceIdToDynamicSelectionAndIcon","getAssetTypeInformation","getResourceTypeAssetTypeInformation","getResourceAssetInformation","getResource","notifyExtensionStatus","ping","provideExtensionService","updateSubscriptionInfo","updateTenantInfo","getRegisteredResourceProviderInfo","viewModels","getClientNotifications","signalResourcesChanged","getSubscriptionInfo","getAllSubscriptions","getSelectedSubscriptions","getLocationDisplayNames","submitObjectCacheTelemetry","networkTelemetry","addClientNotification","addClientNotifications","showNps","canShowNps","getArmEndpoint","getSettings","logFeatureAdoptionTelemetry","getExtensionGalleryServiceViewModel","getLocalGalleryPackagesEndpoints","getLocationsForCreate","getProvisioningOperation","registerLocalGalleryPackagesEndpoint","submitProvisionerTelemetry","pinParts"]);s(n,{getAuthToken:"getAuthenticationToken",registration:"register",shellReadUserSettings:
"Shell.readUserSettings",shellWriteUserSettings:"Shell.writeUserSettings"})})(h=n.RpcMethods||(n.RpcMethods={}))})(t=n.Constants||(n.Constants={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){(function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"})(n.Orientation||(n.Orientation={}));var t=n.Orientation})(t=n.Widgets||(n.Widgets={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function w(n,t){return{type:1,data:n,options:t?p:undefined}}var t=MsPortalFx.getStringMapFunc,r="assetType",o="assetIdInputProperty",u="bindings",l="commandGroupReference",i="name",f="permissions",a,v,y,s,h,e,c,p;n.createMenuBladeConfig=t();a=["htmlTemplate","parameterProvider","details","partSize","htmlTemplateInline","partState",];n.createTemplateBladeConfig4=t(a);n.createCommandExternalReference=t("commandType","extension");n.createDefaultBladeAction=t("partName","actionName");n.createHtmlTemplateDefinition=t("file","content");n.createAssetIdSource=t("sourceType","property",
"providerKey");n.createPairMasterInfo=t("width","defaultBladeAction","toggleMasterCommand");n.createPairDetailsInfo=t("shouldHideMasterBlade","windowed","navigateMasterCommands");n.createPermissionBase=t("permissionType");n.createPartSharedStateDefinition=t("property","key");n.createPartStateDefinition=t("inputIdentityProperties","sharedProperties");n.createInputDefinition=t(i,"type","optional","isAssetId");n.createNotificationMessage=t("type","status","subStatus","title","message",r);n.createServerEvent=t("source","operation");v=["title","description","category","thumbnail","thumbnailStretch","pivotKind","autoConfigSelectablePath","feature",];n.createPartGalleryInfoDefinition2=t(v);n.createPermissionSet=t("requirement",f,"permissionType");n.createPermission=t("extensionName",r,"assetId","action","permissionType");n.createReference=t("referenceType","property","part","bladeCommand","partCommand","constantValue");n.createToolbarDefinition=t("source");n.createNavigateMasterCommands=t("nextText",
"previousText");n.createToggleMasterCommand=t("showText","hideText");n.createActionBarDefinition=t(i,"actionBarKind","source","viewModel",u);y=[i,"inputs","optionalInputs","templateKeyInputs","outputs","commandGroup","viewModelName","_internal_viewModelExtensionName","lenses",l,"viewModelInputs",u,"width","locked","editScopeType",r,o,"pinnedPart","pinnable","initialDisplayState","style","actionBar","discardEditsOnSelectionChange","orientation",f,"pairMasterInfo","toolbar","templateBlade","waitForInputsSet","menuBlade","attributes",];n.createBladeDefinition2=t(y);n.createCommandDefinition=t(i,"text","viewModel",u,"details",r,o,f,"commandKind","reference");n.createCommandGroupDefinition=t(i,"commands");n.createCommandGroupReference=t(i,"commands");n.createCommandReference=t(i,u);n.createGalleryServiceDefinition=t("serviceViewModel");n.createDashboardProviderDefinition=t("viewModel");n.createLensDefinition=t(i,"title","partInstances","isSummary");s=["viewModel","partKind","canUseOldInputVersions",
"inputs",u,"htmlTemplate","details","initialSize","initialWidth","initialHeight","largeInitialSize","supportedSizes","resizeMode","commandGroup",l,"editScopeType","viewStateProperties","partState",r,o,f,"options","htmlTemplateInline",];n.createPartDefinition4=t(s);s.splice(10,1);n.createPartDefinition5=t(s);h=["partTypeName","extension","version",u,"initialSize","initialWidth","initialHeight","largeInitialSize",r,"extenderViewModel"];n.createPartReferenceDefinition2=t(h);h.splice(7,1);n.createPartReferenceDefinition3=t(h);n.createPartInstanceDefinition=t(i,"reference","inline","parameterProvider","options","redirectMode");e=[i,"partGalleryInfo","inputDefinitions","reference","parameterProvider","viewModel","partKind","canUseOldInputVersions","inputs",u,"htmlTemplate","details","initialSize","initialWidth","initialHeight","largeInitialSize","supportedSizes","resizeMode","commandGroup",l,"editScopeType","viewStateProperties","partState",r,o,f,"options","htmlTemplateInline",];e.splice(1,1);
n.createPartTypeDefinition5=t(e);e.splice(14,1);n.createPartTypeDefinition6=t(e);c=["partsCatalog","commandsCatalog","startBoardParts","commandGroups","htmlTemplates","styleSheets","galleryService",i,"version","hash","schemaVersion","sdkVersion","buildDescription","isPreview",];n.createDefinition2=t(c);c.splice(7,0,"dashboardProvider");n.createDefinition3=t(c);n.createDetailsDefinition=t("blade","bladeExtension","isMultiple","invocationInputArguments","selectablePath","selectableBindings","additionalInputArguments","outputArguments","parameterCollector",i,"asSubJourney","pairInfo","openInContextPane","persistentContextPane");n.createInputBinding=t("property","valuesFrom","optional","isIdentityInput");p={isLogo:!0};n.createSvgImage=w})(t=n.DefinitionBuilder||(n.DefinitionBuilder={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t){return f.multiCloudEnabled&&(t[r]=n),t}function e(n){return u(i.allClouds,n||{})}function o(n){return n&&
n[r]}function s(){}var f=n.Extension,i=n.Constants.CloudName,r=i.inputBindingKey;t.addToModel=u;t.addAllCloudsToModel=e;t.readFromInputs=o;t.preventCallingFromHubsAndShell=s})(i=t.CloudName||(t.CloudName={}))})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function r(n,t,r,u,f){var o=new i,e=Q(t);return e=f?e.progress((function(t){f(t,n,o.millisecondsElapsed)})):e,e=e.then((function(t){r(t,n,o.millisecondsElapsed)})),u?e.catch((function(t){u(t,n,o.millisecondsElapsed)})):e}var t=window.fx.getTimestamp,i=(function(){function n(){this._startTimestamp=t()}return Object.defineProperty(n.prototype,"millisecondsElapsed",{get:function(){return t()-this._startTimestamp},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this._startTimestamp=t()},n.timeOperation=function(t,i){var r=new n;return i(t),r.millisecondsElapsed},n})();n.TelemetryStopwatch=i;n.timeAsyncOperation=r})(t=n.Stopwatch||(n.Stopwatch={}))})(t=n.Base||(n.
Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function rt(n){var t,u,r;p++;p<200?i.error.apply(i,arguments):(t=((n&&n.message||n)+"").substr(0,50),u=(e[t]=e[t]||0)%1e3,u===0&&(r=[].slice.call(arguments),r[1]=4,r.push("NoisyCount:"+e[t]),i.error.apply(i,r)),e[t]++)}function ft(n){return new t.Log(n.normalize(undefined))}function et(n,t){var i={message:n,stack:t,_sourceErrorLevel:w?1:0};return new it(i)}function ot(n){var i=new Error(n.reason),t=n.callStack;return i.stack=t.substring(0,l.length)===l?t:l+t,i}function b(){var n=Q.getUnhandledRejections();s?n.forEach((function(n){var t=s.get(n);t===!1?(d(n.inspect().reason),s.set(n,!0)):t!==!0&&s.set(n,!1)})):(n.forEach((function(n){d(n.inspect().reason)})),Q.resetUnhandledRejections());o=r.setTimeout(b,a)}function k(n,t){var i=2,e=n&&n.errorLevel,r,f;return u(e)?t&&(r=t(n),u(r)||(i=r)):i=e,f=n&&n._sourceErrorLevel,u(f)||(i=f),i}function d(n){var t=k(n,(function(n){var t=n&&n.stack;if(!t)return 0})
),r=t===2?c:t===1?i.warning:null;r&&r.call(i,n,1)}function g(n){n===void 0&&(n=ut);var t=a;return u(n)||(a=n),nt(),b(),t}function nt(){typeof o=="number"&&(r.clearTimeout(o),o=null)}var v=n.Base,y=v.Utilities,tt=FxImpl.Diagnostics,u=n.isNullOrUndefined,h=n.Errors,it=h.Error,r=window,f=r.fx.environment,i=new t.Log("MsPortalFx.Base.Diagnostics.ErrorReporter"),p=0,e={},c=rt,w=y.isDiagnosticsEnabled,ut=f.isDevelopmentMode?1e3:5e3,l=y.generateNonSerializableProperty("_RPC_Exception_")+"\n",a,o,s=r.WeakMap&&new WeakMap,st;w&&(Q.longStackSupport=!0,Error.stackTraceLimit=100);t.createLog=ft;t.createIgnoreUnhandledRejectionError=et;t.createRpcException=ot;t.setPromiseErrorCapturePeriod=g;t.clearPromiseErrorCaptureTimeout=nt;g(),(function(n){function s(n){t=c;u=n}function e(r){var e={message:r.message,fileName:r.filename,lineNumber:r.lineno,columnNumber:r.colno},f=r.error,o,s;if(f?(h.isInstanceOfErrorType(f,h.Error)?(s=k(f),s===2?o=!0:s===1&&i.warning(f,2,e)):f.stack&&/http/.test(f.stack)&&(o=!0),
o&&(t(f,2,e),!n.lastError||n.lastError===f||t(n.lastError,3,e))):!n.lastError||t(n.lastError,3,e),n.lastError=null,u)try{u()}catch(c){}}var o=f.extensionName===v.Constants.Shell,t=function(n,t,i){if(o)c(n,t,i);else{var u={signature:f.bootMessageSignature,kind:4,data:{error:tt.getLogFriendlyMessage(n),details:i}};r.parent.postMessage(u,f.trustedParentOrigin)}},u;n.initialize=s;n.handleError=e;r.addEventListener("error",e)})(st=t.ErrorReporter||(t.ErrorReporter={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function s(n,r){var u,f;for(i=null,u=t.length-1;u>=0;u--)if(f=!t[u].hasValue(n),t[u].setContextValue(n,r),!f)break}function h(n){var e,f,u,o;if(i=null,e=r(t),e)for(f=e.getValue(n),u=t.length-1;u>=0;u--){if(o=t[u].getValue(n),f&&o!==f||t[u].resetContextValue(n),t[u].hasValue(n))break;f=o}}function c(n,t){return function(){var i=arguments[0];try{return u.apply(n,arguments),i()}finally{u.apply(
t,arguments)}}}function l(n){for(var r,i=t.length-1;i>=0;i--)if(r=t[i].getValue(n),r)return r}function a(){for(var i,r={},u=!1,n=0,f=t.length;n<f;n++)i=t[n].getValues(),i&&MsPortalFx.forEachKey(i,(function(n,t){t&&(u=!0,r[n]=t)}));return u?r:e}function v(){return i||(i=new f(r(t)))}function y(n){i=null;t.push(new f(n))}function p(){i=null;t.length>1&&t.pop()}function r(n){if(n&&n.length)return n.last()}var e=undefined,o,u;(function(n){n[n.Part=0]="Part";n[n.Blade=1]="Blade";n[n.CompositionItem=2]="CompositionItem"})(n.ContextType||(n.ContextType={}));o=n.ContextType;n.setContextValue=s;n.resetContextValue=h;u=Function.call;n.provideContext=c(s,h);n.getCurrentValue=l;n.getCurrentValues=a;n.getState=v;n.usingState=c(y,p);var f=(function(){function n(n){var u,i,t,f,r;if(this._providers=[],n&&n._providers)for(u=this._providers,i=n._providers,t=0,f=i.length;t<f;t++)r=i[t],u[t]=r?r.slice():[]}return n.prototype.setContextValue=function(n,t){(this._providers[n]||(this._providers[n]=[])).push(t)}
,n.prototype.resetContextValue=function(n){var t=this._providers[n];t&&t.length&&t.pop()},n.prototype.getValue=function(n){var t=this._providers[n];return t&&r(t)},n.prototype.getValues=function(){for(var t,i={},u=!1,f=this._providers,n=0,s=f.length;n<s;n++)t=r(f[n]),t&&(u=!0,i[o[n]]=t);return u?i:e},n.prototype.hasValue=function(n){var t=this._providers[n];return!!(t&&t.length)},n})(),i=null,t=[new f]})(t=n.TelemetryContext||(n.TelemetryContext={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){return function(){return f(n)}}var r=FxImpl.TelemetryContext,u=r.ContextType,f=r.getCurrentValue,i=u;n.getPartContext=t(i.Part);n.getBladeContext=t(i.Blade);n.getJourneyContext=function(){return{id:""}};n.getCompositionItemContext=t(i.CompositionItem)})(t=n.Context||(n.Context={}))})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})
),(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";function i(n,i,u){i===void 0&&(i=t.messageContext);var f=i&&i.callStack,e=n||"";return f&&n.indexOf(r)<0&&(e+="\r\n"+r+" "+i.srcWindowId+" -> "+i.destWindowId+(u?" ("+u+")":"")+"\r\n"+f),e}function u(n){n&&typeof n.stack=="string"&&(n.stack=i(n.stack))}function f(t){return i(n.Utilities.getCurrentCallStack(t))}var e=Date.now,r="From RPC:";t.createCallStack=i;t.addRpcStack=u;t.getCurrentCallStack=f})(i=t.Internal||(t.Internal={}))})(t=n.Rpc||(n.Rpc={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return function(t){var i,f,r,u;return t&&(f=t[c],f||(r=FxImpl.Po.getOrCreateMetadata(t),u=r,r&&(i=u[n],i||(i=u[n]={})))),i}}function f(n){return function(t,i,r){var u=n(t),f;if(u)return f=arguments.length>2,f?u[i]=r:u[i]}}function a(n){var t=FxImpl.Po.getOrCreateMetadata(n);t&&(t.isNonSerializableCallStack=l&&e()||"(Unknown callstack)")}
var i=n.Base.Utilities,e=i.getCurrentCallStack,o=window,r=o.fx.environment,s=r.trace,h=i.generateNonSerializableProperty,c=h("poSpecialType"),l=r.isDevelopmentMode||s.diagnostics;t.dataContainer=u("client");t.disposableDataContainer=u("clientDisposables");t.data=f(t.dataContainer);t.disposableData=f(t.disposableDataContainer);t.markNonSerializable=a})(i=t.ProxiedObservables||(t.ProxiedObservables={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function wr(n){try{return e(n)?n:hf(n)}catch(t){return t}}function k(n,t){var i=ot(n),r=i?i.id+":":"";try{return r+nf(n,t)}catch(u){return r+"Failed to get descriptor:"+u}}function vt(n){return typeof n=="string"&&n[0]!==t?"removed:"+n.length:n}function br(n){var o,h,i,s,e,f,l;if(!n)return n;if(n.length===1)return[vt(n[0])];for(o=[],h=n.length>50?50:n.length,i=0;i<h;i+=2){var c=n[i],r=n[i+1],a=c.split(t),v=parseInt(a[1]),u=void 0;switch(v){case 11:for(s=r.length,u=new Array(s),e=0;e<s;e++)u[
e]=vt(r[e]);break;case 3:for(u=[],f=0,l=r.length;f<l;f++)u.push(f%2==0?r[f]:vt(r[f]));break;default:u=vt(r)}o[i]=c;o[i+1]=u}return o}function wf(n){return kr.some((function(t){return t.test(n)}))}function dr(n,t,i){var u="Po-"+n+": ",r;if(t&&(u+=t),u+="\r\n"+(e(i)?i:wr(i)),i&&(r=typeof i=="string"?i:i.id||i.poId,r)){if(r=r.replace(af,vf),!it&&n===301&&wf(r))return;u+="\r\nThe error occured in below callstack:\r\n"+r}it&&gi.messageContext&&(u+="\r\n"+gi.messageContext.callStack);du.error(u,n)}function ut(n,t,i,r){dr(n,t,i,r)}function u(n,t){dr(n,"Please open a bug to Framework.",t)}function d(n,t){u(n,"Unsupported: "+t)}function gr(n,t,i){t.raiseRemoteException("Po-"+n+": "+wr(i))}function ft(n,t,i){t[i]=n.slice(0)}function nu(n,t,r){var u={id:n};return i.set(t,u),w(t)&&ft(t,u,r.aId),r.isPrimary&&r.ref++,u}function bf(n){for(var r,i={},t=0,u=n.length;t<u;t++)r=n[t],i[r]=!0;return i}function kf(n,t){for(var r,u=ri(t),i=0,f=u.length;i<f;i++)r=u[i],n[r]=t[r];return n}function df(n){for(var t
in n)return!1;return!0}function oi(n){return typeof n.reject=="function"&&n.promise||typeof n.then=="function"}function gf(n){return n.charCodeAt(0)===95&&!(n.charCodeAt(1)===109&&n.charCodeAt(2)===115&&n.charCodeAt(3)===80&&n.charCodeAt(4)===111&&n.charCodeAt(5)===114&&n.charCodeAt(6)===116&&n.charCodeAt(7)===97&&n.charCodeAt(8)===108&&n.charCodeAt(9)===70&&n.charCodeAt(10)===120)}function b(n,t){var c,f,o,r,l,u,s,h;if(!e(n)&&i.get(n)&&!t.get(n)){t.set(n,!0);c=typeof n;switch(c){case"object":if(w(n))for(r=0;r<n.length;r++)b(n[r],t);else if(oi(n))f=nt(n),f.getState()!==0&&b(f.getValue(),t);else if(!(n instanceof Date)&&!(n instanceof RegExp)){for(o=ri(n),r=0,l=o.length;r<l;r++)(u=o[r],gf(u))||fi&&(s=lr(n,u),s.get||s.set)||b(n[u],t);h=hr(n);h!==cr&&b(h,t)}break;case"function":ur(n)&&b(n.peek(),t)}}}function ne(n,t){return n.map[t]||n.pending[t]}function tu(n,t){t.length>300&&(n.freedIds=t.slice(100,300))}function si(n,t){return n.freedIds.indexOf(t)!==-1}function s(n,t,i,r){var f=n.map[
t]||n.pending[t];if(f)return f;if(si(n,t)){ei(207,{id:t,code:i});return}u(i,{id:t,disposed:n.disposed,v:k(r)})}function g(n,t){var r=i.get(n);return r||u(t,k(n)),r}function hi(n,t){var r=i.get(n);return r?r[t]:n}function te(n,t,r){var u=s(n,t,r);return u?i.get(u).disallowRemoteMutations:!1}function ci(n,t,i){for(var r,e,f=t.id,u=0,o=a.length;u<o;u++)r=a[u],e=r.map[f]||r.pending[f],e===n&&i(r)}function li(n,t,r,u,f){var e=n.gFuncCallId(),d=[],a=s(n,t,222),v,h,y,c,g,w,tt,b,k,l;if(a){for(v=i.get(a).disallowRemoteMutations,h=[a],r===o?y=vr:(y=p(n,r,v,!0),h.push(r)),c=0,g=u.length;c<g;c++)w=u[c],d.push(p(n,w,v,!0)),h.push(w);tt={cid:e,fid:t,t:y,a:d};b=nt(f);n.funcCalls[e]={promise:b,objs:h};n.onFunction(tt);k=b.promise;l=!1;k.hold=function(){return l=!0,{dispose:function(){delete n.roots[e];l=!1}}};k.then((function(t){ar((function(){l&&(n.roots[e]=t)}),0)}))}}function uu(){var i,n,r,t;for(yt=!0;v.length;)for(i=v,v=[],n=0,r=i.length;n<r;n++)t=i[n],t.length===3?ci.apply(null,t):li.apply(null,t);yt=
!1}function wt(n){pt=ie[n];fu=re[n]}function bt(n,t){var i=n[t];return i===undefined?0:i}function ai(n,t){var i=bt(n,t);return n[t]=++i,i}function eu(n,t,i,r){i.desiredValue=r;try{t(r)}finally{i.desiredValue=undefined}}function ue(n,t,i,r){var c=fr(t),u=t.peek(),h=hi(u,n.aId),o,l,e,s,a;if(rr(h,u)||(u.length=0,h.length&&rf.apply(u,h)),c||t.valueWillMutate(),i)for(e=0,s=i.length;e<s;e++){o=i[e];switch(o.k){case 0:l=f(n,o.v);u.splice(o.i,0,l);break;case 1:u.splice(o.i,1)}}else for(u.splice(0,u.length),e=0,s=r.length;e<s;e++)u.push(f(n,r[e]));a=g(u,240);ft(u,a,n.aId);c?t(u):t.valueHasMutated()}function fe(n,t,i,r,u,e,o){var s=f(n,t.o),h=u+1;if(e===h||i.peek()===s)try{eu(n,i,r,s)}finally{bt(r,o)===u&&(r[o]=e)}else return n.isPrimary?ai(r,o):eu(n,i,r,s),k(s)}function ee(n,t,i){var o=[],e,s,r,u;if(t)for(r=0,u=t.length;r<u;r++)e=t[r],s=e.v,o.push({k:e.k,i:e.i,v:s?k(f(n,s)):null});else if(i)for(r=0,u=i.length;r<u;r++)o.push(k(f(n,i[r])));return o}function ou(n,t){var o=t.o,u=t.a,s=t.fa,e,i,r;if(
o)f(n,o);else if(u)for(i=0,r=u.length;i<r;i++)e=u[i],e.k===0&&f(n,e.v);else for(i=0,r=s.length;i<r;i++)f(n,s[i])}function oe(n,t,i,r,u,f,e){var h=n.sId,o=r[h],s=t.sn,c=t.a,l=t.fa,a=s===o;if(f!==u+1&&a)return r[h]=o?o+1:1,r[e]=undefined,ee(n,c,l);if(!a){if(o&&(s===undefined||s<o))return;r[h]=s;r[e]=undefined}ue(n,i,c,l);bt(r,e)===u&&(r[e]=f)}function su(n,t,i,r){var u=t.id;pt(n,t,(function(n){var c=n.cnId,l=ai(t,c),f,s,e,a,o,v,h;if(n.receivedChanges[u]!==l){if(f={id:u,cn:l},t[n.sId]&&t[c]===1){for(s=[],e=0,a=r.length;e<a;e++)s.push(p(n,r[e],!1));f.fa=s}else i=hi(i,n.aId),o=sf(i,r,{sparse:!0}),o=of(o),v=o.map((function(i){switch(i.status){case"added":return{k:0,i:i.index,v:p(n,i.value,t.disallowRemoteMutations,!0)};case"deleted":return{k:1,i:i.index};default:d(106,i.status)}})),f.a=v;h=t[n.sId];h&&(f.sn=h);n.onChange(f);ft(r,g(r,235),n.aId)}}))}function hu(n,t,i,r){var u=i===r,f=w(i);if(u&&f){su(n,t,i,r);return}pt(n,t,(function(i){var u=ai(t,i.cnId);if(i.receivedChanges[t.id]===u)if(fr(n)&&r!==
t.desiredValue)u=++t[i.cnId];else return;i.onChange({id:t.id,o:p(i,r,t.disallowRemoteMutations,!0),cn:u})}))}function et(n,t){var i=n._poBuffer;n._poBuffer=t;i&&i()}function se(n){var t=n.deferred,i=n.promise;t&&!i[lt]&&ui(i,lt,{value:t,enumerable:!1})}function yi(n,t,i,r){pt(n,t,(function(n){var u=n.pId;if(!t[u]&&!n.disposed)n.onPromise({id:t.id,s:i,v:p(n,r,t.disallowRemoteMutations,!0)});t[u]&&t[u]--}))}function cu(n){var t=at.get(n.promise),i;t||(t={},i=function(n){t.value=n},n.promise.then(i,i),at.set(n.promise,t))}function lu(n,t){n.promise.progress((function(n){var i=g(t,236);yi(t,i,0,n)}));n.always((function(i){arguments.length===0&&(i=n.getValue());var r=n.getState(),u=g(t,237);switch(r){case 1:yi(t,u,1,i);break;case 2:yi(t,u,2,i);break;default:d(100,r)}}))}function au(n,t,i,r,u){switch(t){case 1:n.deferred.resolve(i);break;case 2:n.deferred.reject(i);break;case 0:u||lu(n,r);break;default:d(101,t)}}function nt(n){var t;return typeof n.then=="undefined"&&typeof n.reject=="function"?t=new
pi(n,n.promise,7):lf(n)?t=new pi(n[lt],n,6):cf(n)&&(typeof n.reject=="function"?(t=new wi(n,n.promise(),7),cu(t)):(t=new wi(n[lt],n,6),cu(t))),se(t),t}function he(n,t){var r=f(n,t.v),o=s(n,t.id,221,r),h,i,u,e;if(o){if(h=nt(o),h.getState()!==0){ei(244,t.id);return}if(i=g(o,238),i.disallowRemoteMutations){gr(242,n,{id:i.id,msg:"Remote mutation is not allowed"});return}u=n.pId;i[u]?i[u]++:i[u]=1;e=h.deferred;switch(t.s){case 1:e.resolve(r);break;case 2:e.reject(r);break;case 0:e.notify(r);break;default:d(101,t.s)}}}function kt(n,t,i,r){if(!n.disposed)n.onPromise({id:r.cid,s:i,v:p(n,t,te(n,r.fid,220),!0)})}function ce(n,t){return function(){var i=ir();return fu(n,t,this,arguments,i),i.promise()}}function le(n,t,i){var r=f(n,t.v),s=n.funcCalls,h=t.id,c=i.promise,u=c.deferred,o=t.s;e(r)||s[h].objs.push(r);switch(o){case 1:u.resolve(r);break;case 2:u.reject(r);break;case 0:u.notify(r);break;default:d(103,o)}o!==0&&c.promise.finally((function(){ar((function(){delete s[h]}),0)}))}function y(n,t,r,u)
{var f=i.get(t),e=n.map,o;if(f){if(f.id?u=f.id:f.id=u,e[u])return u;if(o=n.pending,o[u])return e[u]=t,delete o[u],r.push([u,t]),n.revivedIds[u]=t,u;w(t)&&ft(t,f,n.aId)}else nu(u,t,n);return e[u]=t,r.push([u,t]),u}function ae(n,t){var i=lr(t,n);return i.get||i.set}function vu(n,i,r,u){for(var o=[],h=ri(i),f,e,s=0,c=h.length;s<c;s++)if(f=h[s],!i.hasOwnProperty||i.hasOwnProperty(f)){if(f.charCodeAt(0)===95&&!(f.charCodeAt(1)===109&&f.charCodeAt(2)===115&&f.charCodeAt(3)===80&&f.charCodeAt(4)===111&&f.charCodeAt(5)===114&&f.charCodeAt(6)===116&&f.charCodeAt(7)===97&&f.charCodeAt(8)===108&&f.charCodeAt(9)===70&&f.charCodeAt(10)===120))continue;if(fi&&ae(f,i))continue;e=i[f];switch(typeof e){case"function":if(f==="constructor")continue;break;case"object":if(!e){o.push(f,e);continue}if(e[rt])continue;break;default:o.push(f,e);continue}o.push(f,t+y(n,e,u,r+"."+f))}return o}function ve(n,i,r,u){for(var o=[],f,e=0,s=i.length;e<s;e++){f=i[e];switch(typeof f){case"object":o[e]=f?f[rt]?undefined:t+
y(n,f,u,r+"."+e):f;break;case"function":o[e]=t+y(n,f,u,r+"."+e);break;default:o[e]=f}}return o}function fo(n,r,f){var ht=[],vt=n.map,c,et,b,ct,k,v,p,g,it,d,st,ft;if(r[rt])return vr;if(c=[],et=i.get(r),et&&(b=et.id,vt[b]))if(w(r)){if(ct=hi(r,n.aId),rr(r,ct))return[b,undefined];c.push([b,r])}else return[b,undefined];for(k=[],y(n,r,c,n.gId());c.length;){var lt=c.shift(),a=lt[0],o=lt[1],at=typeof o,s=void 0,l=void 0;switch(at){case"function":ur(o)?(v=o.peek(),o.splice||o.map?v&&w(v)?(s=bi,l=y(n,v,c,a+"(a)")):v===undefined?s=ye:v===null?s=pe:ut(303,"Attempting to serialize an observable array whose value is not an array, null, or undefined.",a):(uf(o)&&(o[n.kId]=o.subscribe(tt)),e(v)?(s=we,l=v):(s=yu,l=y(n,v,c,a+"(o)")))):(s=be,l=undefined);break;case"object":oi(o)?(o._underlyingPromise&&ut(304,"Can't serialize CancellablePromise which is not returned from function",a),p=nt(o),p.getState()===0&&lu(p,o),g=p.getValue(),it=void 0,e(g)?(it=ro,l=g):(it=uo,l=y(n,g,c,a+"()")),s=h[p.type]+it+p.getState(
)):o instanceof Date?(s=ke,l=o.getTime()):o instanceof RegExp?(s=de,d=o.source+t,o.global&&(d+="g"),o.ignoreCase&&(d+="i"),o.multiline&&(d+="m"),l=d):w(o)?(s=ge,l=ve(n,o,a,c)):o instanceof Error?(s=dt,st={message:o.message,name:o.name,stack:o.stack},kf(st,o),l=vu(n,st,a,c)):o instanceof ArrayBuffer?(s=to,l=o):(ft=hr(o),s=ft===cr?dt:ft===null?no:dt+t+y(n,ft,k,a+"(p)"),l=vu(n,o,a,c));break;default:u(105,{poId:n.id,dataType:at})}f&&(ot(o).disallowRemoteMutations=!0);ht.push(a+t+s,l);!c.length&&k.length&&(c=k,k=[])}return ht}function eo(n,i,r,u){for(var e,o,s,h,f=0,l=u.length;f<l;f+=2)e=u[f],o=u[f+1],o&&o[0]===t?(s=o.substring(1),h=n[s]||i[s],h?r[e]=h:(r[e]=s,c.push(e))):r[e]=o}function oo(n,i,r){for(var f,e,o,u=0,s=r.length;u<s;u++)f=r[u],f&&f[0]===t&&(e=f.substring(1),o=n[e]||i[e],o?r[u]=o:(r[u]=e,c.push(""+u)));return r}function so(n,t){for(var l,r,h,a,c,e=0,v=n.length;e<v;e++){var o=n[e],y=o[0],i=o[1],f=o[2];switch(y){case 11:for(r=0,h=f.length;r<h;r++)l=f[r],i[l]=s(t,i[l],243);ft(i,ot(
i),t.aId);break;case 3:for(r=0,h=f.length;r<h;r++)a=f[r],i[a]=s(t,i[a],232);break;case 0:case 1:c=s(t,f,233);i(c);break;case 7:case 6:c=s(t,f,234);au(i,o[3],c,y===7?i.deferred:i.promise,!1);break;default:u(107,t.id)}}}function ho(n,i){function ft(r){var e,h,f,s;for(d?d[r]&&u(213,r):d={},d[r]=!0,e=r+t,h=e.length,f=o-1;f>=2;f-=2)if(s=i[f],s.substring(0,h)===e){i[o+1]=s;i[o+2]=i[f+1];i[f]=io;i[f+1]=null;o+=4;return}u(214,{id:r,freed:si(n,r)})}for(var e=n.map,a=n.pending,h=[],y,d,o=i.length-1,p,l,r,v,tt,w,b,k;o>0;){var et=i[o-1],f=i[o],s=et.split(t);p=s[0];l=ru[s[1]];r=void 0;switch(l){case 3:v=s[2];v?v==="n"?r=sr(null):(tt=e[v]||a[v],tt?r=sr(tt):(ft(v),y=!0)):r={};y||(eo(e,a,r,f),c.length&&(h.push([3,r,c]),c=[]));break;case 11:r=oo(e,a,f);c.length&&(h.push([11,r,c]),c=[]);break;case 4:r=new Date(f);break;case 5:var it=f.lastIndexOf(t),ot=f.substring(0,it),st=f.substring(it+1);r=new RegExp(ot,st);break;case 10:r=ce(n,p);break;case 0:if(r=ff(),w=void 0,s[2])w=f;else if(w=e[f]||a[f],!w){h.push(
[l,r,f]);break}r(w);break;case 1:if(r=ef(),b=void 0,s[2])b=s[2]==="u"?undefined:null;else if(b=e[f]||a[f],!b){h.push([l,r,f]);break}r(b);break;case 7:case 6:var rt=l===6,g=nt(ir()),ut=ru[s[3]];if(r=rt?g.promise:g.deferred,k=void 0,s[2])k=f;else if(k=e[f]||a[f],!k){h.push([l,g,f,ut]);break}au(g,ut,k,r,rt);break;case 13:r=f;break;case 14:y=!0;break;default:u(108,{poId:n.id,t:l,d:br(i)})}y?y=!1:(nu(p,r,n),e[p]=r);o-=2}return h.length&&so(h,n),e[p]}function p(n,t,i,r){if(e(t))return[t];try{return wt(1),fo(n,t,i,r)}catch(u){ut(241,null,{message:u.message,callstack:u.stack,poId:n.id,data:k(t)},!0);throw u;}finally{wt(0)}}function f(n,i){if(i.length===0)return undefined;if(i.length===1)return i[0];if(i.length===2&&i[1]===undefined&&i[0].indexOf(t)===-1)return s(n,i[0],245);try{return wt(2),ho(n,i)}finally{wt(0)}}function gt(n,t,r,u){var f=i.get(n),e;f[t]&&(f[t]=undefined);e=n[r];e&&(e.dispose(),n[r]=undefined);f[u]&&(f[u]=undefined)}function pu(n,t){var i=n.roots[t];i||u(206,t);delete n.roots[
t]}function wu(n){var r=n.roots,u=n.funcCalls,t=gu(),f,e,o,i,s;for(f in r)e=r[f],b(e,t);for(o in u){i=u[o].objs;for(s in i)b(i[s],t)}return t}function co(n){var f=wu(n),i=n.map,e=n.pending,r=[],t,u;for(t in i)u=i[t],f.get(u)||(r.push(t),e[t]=i[t],delete i[t]);return r}function ao(n,t){var e=bf(t),o=n.map,u=n.pending,s=n.aId,h=n.kId,c=n.cnId,f=n.freedIds,i,r;for(i in u)r=u[i],e[i]?(gt(r,s,h,c),f.push(i)):o[i]=r;tu(n,f);yr&&ti.completeTrace(n.gcTraceKey,{disposed:t.length,"new":n.ref});n.pending={};n.revivedIds={};n.ref=0;n.gcTraceKey=undefined}function vo(n,t){for(var i,r,c=wu(n),f=[],s=n.map,e=[],l=n.aId,a=n.kId,v=n.cnId,h=n.freedIds,o=0,y=t.length;o<y;o++)i=t[o],r=s[i],r?c.get(r)||(f.push(i),delete s[i],gt(r,l,a,v),h.push(i)):(f.push(i),e.push(i));return e.length&&u(231,{poId:n.id,objs:e}),tu(n,h),f}function yo(n,t){n.gcIIds=t;n.gcIIdMap=undefined}function po(n,t){var u=n.gcIIds,i,r,f;if(u){if(i=n.gcIIdMap,!i){for(i={},r=0,f=u.length;r<f;r++)i[u[r]]=!0;n.gcIIdMap=i}return i[t]}}function wo(
n){if(df(n.pending)){var t=co(n);if(t.length){yr&&(n.gcTraceKey=ti.start({source:"PO",action:"GC",name:n.id}));n.onRelease({iIds:t})}}}function bo(n){o.setTimeout((function(){n.disposed||(n.gcH=o.setInterval((function(){wo(n)}),ii))}),or.random()*ii+ii)}function go(n,t){return n==="fx"?!0:t==="fx"?!1:n==="HubsExtension"?!0:t==="HubsExtension"?!1:n>t}function di(n){return function(t){n(t);v.length&&!yt&&uu()}}function ns(n,t,i,r,f,e,o,s,h){var c=new ki,l=n+a.length;return c.id=l,c.cnId="c-"+l,c.aId="a-"+l,c.kId="k-"+l,c.pId="p-"+l,c.sId="s-"+l,c.raiseRemoteException=t,c.onChange=di(i),c.onPromise=di(r),c.onFunction=di(f),c.onRelease=e,c.gId=tr(l),c.gFuncCallId=tr(l+"f"),c.rWinId=s,o===s&&u(210,o),c.isPrimary=go(o,s),c.isPrimary&&!h&&bo(c),a.push(c),c}function ot(n){return i.get(n)}function ts(n){var t=ot(n);return t&&t.id}function bu(n){if(!e(n)){var t=i.get(n);return t||(t={id:null},i.set(n,t)),t}}function is(n){var t=bu(n);t&&(t.disallowRemoteMutations=!0)}function rs(){return{compatibilityMode:
fi,diagnostics:it,metadataMap:i,jQPromise:at,managers:a}}var r=MsPortalFx,ku=r.Helpers,st=r.Base,gi=st.Rpc.Internal,ni=st.Utilities,ti=st.Diagnostics.Telemetry,o=window,du=new st.Diagnostics.Log("Base.ProxiedObservablesV2"),nr=ko.subscribable.fn,ht=nr.notifySubscribers,ii=3e4,tt=r.noop,gu=function(){return new r.Map},e=r.isPrimitive,tr=r.getIdGenerator,ct=o.fx.environment,ir=ku.Deferred,us=ni.getObjectConstructorName,nf=ni.getObjectDescriptor,fs=ni.getCurrentCallStack,es=r.isNullOrUndefined,os=r.isEmpty,rr=r.arrayEquals,tf=r.hasOwnProperty,t=String.fromCharCode(5),w=Array.isArray,rf=Array.prototype.push,ss=o.fx.getTimestamp,ur=ko.isObservable,uf=ko.isPureComputed,fr=ko.isComputed,ff=ko.observable,ef=ko.observableArray,er=ko.utils,of=er.adjustArrayEdits,sf=er.compareArrays,hf=JSON.stringify,or=Math,l=Object,sr=l.create,hr=l.getPrototypeOf,ri=l.keys,cr=l.prototype,lr=l.getOwnPropertyDescriptor,ui=l.defineProperty,hs=l.defineProperties,cs=l.preventExtensions,cf=Q.isPromiseAlike,lf=Q.isPromise,
ar=o.setTimeout,ls=o.setInterval,vr=[undefined],af=/^(\w+-\w+-)(\w+-\w+)+(.*)$/,vf="$1?$3",fi=!ct.enableFastViewModelProxying,yr=r.isFeatureEnabled("gctelemetry"),yf=r.isFeatureEnabled("detailedgclog"),as=yf||r.isFeatureEnabled("gclog"),it=ct.isDevelopmentMode||ct.trace.diagnostics,vs=ct.trace.potrackobservable,lt="_deferred",rt="###isPoUndefined###",ei,kr,v,yt,vi,pi,wi,c,lo,ki;[$.prototype,$.Event.prototype,o].forEach((function(n){ui(n,rt,{configurable:!0,value:!0})}));var pf=(function(){function n(n){this._pKey=n}return n.prototype.get=function(n){if(n&&tf(n,this._pKey))return n[this._pKey]},n.prototype.set=function(n,t){ui(n,this._pKey,{configurable:!0,value:t})},n})(),pr=!o.WeakMap||it?function(n){return new pf(n)}:function(){return new WeakMap},i=pr("###PO2_Metadata###"),at=pr("###PO2_PromiseValue###"),a=[];ei=tt;kr=[/\.activatedItems$/,/^Microsoft_Azure_Insights(.)*/,/\.notFoundMessage$/];var iu=or.max(15,3),ru=r.getStringToIntMap(iu),h=r.getIntToStringMap(iu);v=[];yt=!1;var ie=[ci,function(
n,t,i){v.push([n,t,i])},tt,],re=[li,function(n,t,i,r,u){v.push([n,t,i,r,u])},tt,],pt=ci,fu=li;nr.notifySubscribers=function(n,t){var u=this,r=i.get(this),f;if(r)if(t==="beforeChange")this._capturedOriginalValue===!0&&ut(302,"Detected a cycle subscription. Please avoid below pattern:\r\n observable.subscribe(() => { observable(1); }, null, 'beforeChange')",r.id),et(this),this._originalValue=this.peek(),this._capturedOriginalValue=!0,ht.apply(this,arguments);else if(t===undefined){f=this.peek();this._capturedOriginalValue?(this._capturedOriginalValue=!1,et(this,(function(){hu(u,r,u._originalValue,f)}))):typeof this.push=="function"||n&&typeof n.push=="function"?et(this,(function(){su(u,r,f,n)})):et(this,(function(){hu(u,r,f,n)}));try{ht.apply(this,arguments)}finally{et(this);this._originalValue=undefined}}else ht.apply(this,arguments);else ht.apply(this,arguments)};vi={resolved:1,fulfilled:1,rejected:2,pending:0};pi=(function(){function n(n,t,i){this.deferred=n;this.promise=t;this.type=i}return n.
prototype.getState=function(){var n=this.promise.inspect();return vi[n.state]},n.prototype.getValue=function(){var n=this.promise.inspect();switch(n.state){case"pending":return;case"fulfilled":return n.value;case"rejected":return n.reason;default:d(102,n.state)}},n.prototype.always=function(n){var t=this;this.promise.finally((function(){n(t.getValue())}))},n})();wi=(function(){function n(n,t,i){this.deferred=n;this.promise=t;this.type=i;this.getState=function(){var n=t.state();return vi[n]}}return n.prototype.getValue=function(){if(this.getState()!==0){var n=at.get(this.promise);return n||u(203,{metadata:i.get(this.promise)}),n.value}},n.prototype.always=function(n){var t=this;this.promise.finally((function(){n(t.getValue())}))},n})();var bi=h[1],ye=bi+t+"u",pe=bi+t+"n",yu=h[0],we=yu+t+"1",be=h[10],ke=h[4],de=h[5],dt=h[3],ge=h[11],no=dt+t+"n",to=h[13],io=t+14,ro=t+"1"+t,uo=t+t;c=[];lo=tt;ki=(function(){function n(){this.ops=[];this.map={};this.pending={};this.roots={};this.receivedChanges={};this.
funcCalls={};this.freedIds=[];this.revivedIds={};this.ref=0}return n.prototype.serialize=function(n,t){var u=p(this,n,t,!1),r;return e(n)||n[rt]||(r=i.get(n),this.roots[r.id]=n),u},n.prototype.proxyBuffer=function(){v.length&&uu()},n.prototype.deserialize=function(n){var t=f(this,n),r;return e(t)||(r=i.get(t),this.roots[r.id]=t),t},n.prototype.applyPromise=function(n){var i=this,t;this.disposed||(t=this.funcCalls[n.id],t?le(this,n,t):he(this,n))},n.prototype.applyChange=function(n){var l=this,t=n.id,f,h;if(!this.disposed){if(f=ne(this,t),!f){ou(this,n);(this.isPrimary||!po(this,t))&&u(224,{id:t,freed:si(this,t),data:br(n.o)});return}if(this.revivedIds[n.id]){ou(this,n);return}var r=i.get(f),e=n.cn,o=this.cnId,s=bt(r,o),c=this.receivedChanges;if(r.disallowRemoteMutations){r[o]=e;gr(216,this,{id:r.id,msg:"Remote mutation is not allowed"});return}c[t]=s+1;try{h=n.o?fe(this,n,f,r,s,e,o):oe(this,n,f,r,s,e,o);h&&ut(301,"Detected a simultaneous change.",{id:t,from:this.rWinId,remote:e,local:s,
serial:r[this.sId],changes:h},!it)}finally{delete c[t]}}},n.prototype.applyRelease=function(n){var r=this,t,i;if(!this.disposed)if(n.rId)pu(this,n.rId);else if(n.iIds){t=n.iIds;yo(this,t);i=vo(this,t);this.onRelease({cIds:i})}else ao(this,n.cIds)},n.prototype.invoke=function(n){var r=this,o=!1,t,h=s(this,n.fid,225),e,c;if(h){e=f(this,n.t);e===undefined&&n.t.length>1&&u(209);c=n.a.map((function(n){return f(r,n)}));try{t=h.apply(e,c);o=!0}finally{if(t&&oi(t)){var a=t.hasOwnProperty("_underlyingPromise")?t._underlyingPromise:t,i=nt(a),l=i.getState();l===0?(i.promise.progress((function(t){kt(r,t,0,n)})),i.always((function(t){kt(r,t,i.getState(),n)}))):kt(this,i.getValue(),l,n)}else kt(this,t,o?1:2,n)}}},n.prototype.release=function(n){if(!e(n)){var t=g(n,239);pu(this,t.id);this.onRelease({rId:t.id})}},n.prototype.dispose=function(){var h=this,n,s,t;if(!this.disposed){this.disposed=!0;var i=this.map,r=this.pending,u=this.aId,f=this.kId,e=this.cnId;for(o.clearInterval(this.gcH),n=0,s=a.length;n<s;
n++)if(a[n]===this){a.splice(n,1);break}for(t in i)gt(i[t],u,f,e);for(t in r)gt(r[t],u,f,e);this.gcTraceKey&&ti.completeTrace(this.gcTraceKey,{count:-1,newRef:this.ref});this.map=null;this.pending=null;this.roots=null}},n})();n.ProxiedObjectManager=ki;n.createPoMgr=ns;n.getMetadata=ot;n.getMetadataId=ts;n.getOrCreateMetadata=bu;n.disallowRemoteMutations=is;n.getDiagnostics=rs})(t=n.Po||(n.Po={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function r(n){return i(n)||n>=0}function u(n,t){return n===t?0:i(n)?-1:i(t)?1:n>t?1:-1}function s(n){var t,i;if(!n)return t=new f,t.major=0,t.minor=0,t.build=0,t.revision=0,t;if(i=o(n),!i)throw new Error("value is not a valid version string.");return i}function o(n){var t;n=n||"";var i=n.split(e),u=null,o=i.length;return o>=2&&(t=new f,t.major=parseInt(i[0]),t.minor=parseInt(i[1]),t.build=o>=3?parseInt(i[2]):null,t.revision=!i[3]?null:parseInt(i[3].match(/\d+/)),r(t.major)&&r(t.minor)&&r(t.build)&&r(t.revision)&&(u=t)),u}var i=n.
isNullOrUndefined,e=".",f;t.getVersionFromString=s;t.tryParseVersion=o;f=(function(){function n(){}return n.prototype.toString=function(){var n=[this.major,this.minor],r=this.build,t;return i(r)||(n.push(r),t=this.revision,i(t)||n.push(t)),n.join(e)},n.prototype.compareTo=function(n){var t=u(this.major,n.major);return t||(t=u(this.minor,n.minor),t||(t=u(this.build,n.build),t||(t=u(this.revision,n.revision)))),t},n})()})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={}));var placeHolder="",errorMessages={contextAmd:placeHolder,contextInit:placeHolder,protoEnum:placeHolder,unknownName:placeHolder,nonIframe:placeHolder,contentNull:placeHolder,entryMissMatch:placeHolder},throwError=FxImpl.getErrorMap(errorMessages),FxImpl;(function(n){var t;(function(t){"use strict";function e(n,t){var r=i.getState(),f=u.messageContext;return MsPortalFx.require(n).then((function(n){return i.usingState((function(){return t(n)}),r)}))}function s(n,i,r,u,e){f=new t.RuntimeImpl(n,i,r,u,e);f.register()}function h()
{return f}var i=n.TelemetryContext,r=MsPortalFx.Base,u=r.Rpc.Internal,c=window.fx.environment,l=r.tryParseVersion,f,o=(function(){function n(){}return n.prototype.setDataContext=function(n){this._factory&&throwError.contextAmd();r.ProxiedObservables.markNonSerializable(n);this._context=n},Object.defineProperty(n.prototype,"dataContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),n.prototype.setDataContextFactory=function(n,t,i){!this._context||throwError.contextInit();i&&(n=i.normalize(n));this._factory=function(){return e(n,t)}},n.prototype.loadViewModelAsync=function(n,t,f){var o=this,s,h,c;return f&&(n=f.normalize(n)),s=function(){return e(n,t)},h=u.messageContext,!this._context&&this._factory?(this._promise||(this._promise=this._factory(),this._promise.then((function(n){r.ProxiedObservables.markNonSerializable(n);o._context=n;o._promise=undefined;o._factory=undefined}))),c=i.getState(),this._promise.then((function(){return i.usingState((function(){return u.invokeWithContext(
h,(function(){return s()}))}),c)}))):s()},n})();t.ViewModelAreaFactoriesBase=o;t.setRuntime=s;t.getRuntime=h})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function y(n){var t=n;t.initialize=n.initialize.bind(n);t.dispose=n.dispose.bind(n);t.getDefinition=n.getDefinition.bind(n);t.getViewModel=n.getViewModel.bind(n);t.getPartViewModel=n.getPartViewModel.bind(n);n.getObservable&&(t.getObservable=n.getObservable.bind(n))}function p(t){var h=n.Base.tryParseVersion(c),f,e,o;if(h||i.error("Incorrect version '"+c+"' was specified in the environment. Please ensure that ApplicationContext.Version in your assembly is correctly set up, and updates correctly for major and minor version changes. For more information see section 'Support stamping the extension version at compile time' in the documentation page https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),n.isNullOrUndefined(t)){f="The manifest is null or undefined for the extension at URL: "+
r.location.href+".\r\nPossible reasons for the failure:\r\n - You passing an invalid manifest to the MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd call that is used to register your extension with the portal.\r\n - The manifest file is not included in your project.\r\n - If you are not using AMD, verify that your scipt ordering is correct so that the manifest object is being created before the call to the MsPortalFx.Extension.register/registerAmd."+u;i.error(f);throw new Error(f);}if(n.isNullOrWhiteSpace(t.name)){e="The extension manifest should specify a valid name. This name is obtained from the <Extension> tag in PDL. "+("\r\nExtension URL: "+r.location.href+".")+"\r\nThis name should be a string and cannot be empty or whitespace. It also cannot contain the ! character. \r\nThe recommended naming convention for an extension name is to follow the pattern {Company}_{BrandOrSuite}_{ProductOrComponent} (e.g. Microsoft_Azure_Insights)."+u;i.error(e);throw new Error(e);}if(
n.isIFrame||throwError.nonIframe(t.name),s.getRuntime()){o="The extension with name "+t.name+" has already been registered. Ensure that you are not calling MsPortalFx.Extension.register/MsPortalFx.Extension.registerAmd multiple times within your extension.";i.error(o);throw new Error(o);}}function w(t,i,r,f,h,c){if(p(t),e.manifestScriptDownloadEnd=o(),n.isNullOrWhiteSpace(i)&&throwError.entryMissMatch(t.name,u),r){var l=r.normalize.bind(r);i=l(i);f&&(f=l(f));h&&(h=l(h));c&&(c=l(c))}s.setRuntime(t,(function(){return e.initScriptDownloadBegin=o(),n.require(i).then((function(n){return e.initScriptDownloadEnd=o(),n.create()}))}),f,h,c)}function b(t,i,r,u,f,e){var c=u?n.ViewModels.Part.createSelectableViewModel():undefined,h=u?new n.ViewModels.Internal.SelectableContainerViewModel({selectable:c}):new n.ViewModels.Internal.ContainerViewModel,o,s;return(o=t(i,h,r),o||throwError.contentNull(i),s=function(n){var t=new FxImpl.ViewModels.CompositionViewModel(h,n,r,f);return e&&e(n),t},Q.isPromiseAlike(
o))?o.then(s):s(o)}var l=n.Base.Utilities,s=FxImpl.Extension,r=window,i=new n.Base.Diagnostics.Log("MsPortalFx/Extension/Extension"),u="\r\nMore information at {0}".format("https://auxdocs.azurewebsites.net/en-us/documentation/articles/portalfx-creating-extensions"),f=r.fx,h=f.environment,e=f.bootstrapTelemetry,o=f.getTimestamp,c=h.version,a=h.isDevelopmentMode||l.isDiagnosticsEnabled,v=(function(){function t(){y(this)}return t.prototype.initialize=function(){},t.prototype.dispose=function(){a&&n.ViewModels.Internal.ContainerViewModel.VerifyAllContainerViewModelDisposed()},t.prototype.getViewModel=function(n,t,i){var r,u=this.viewModelFactories;return n in u?r=u[n](t,i):throwError.unknownName(),r},t.prototype.getPartViewModel=function(n,t,i){var r,u=this.viewModelFactories;return n in u?r=u[n](t,i):throwError.unknownName(),r},t})();t.EntryPointBase=v;t.registerAmd=w;t.getService=function(t,i,r){return Q(new n.Services.ObservableServiceClientImpl(t,r))};t.composeViewModel=b})(t=n.Extension||
(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function fi(n,t){return(typeof n=="string"?n:n&&n.message&&n.message+"")||t}function d(n,i){var u=t.messageContext;t.messageContext=n;try{return i()}catch(r){t.addRpcStack(r);o.ErrorReporter.lastError=r;o.ErrorReporter.handleError({});throw r;}finally{t.messageContext=u}}function ir(n,t){var r=new l(n);t.registerForDispose(r);r.onDispose((function(){i(t)}));return r}function er(n,t,i){return n&&n.code==="ETIMEDOUT"&&n.message&&typeof n.message=="string"&&n.message.indexOf(oi.format(t,i))!==-1}function or(){return g.ProxiedObject.trackedObjects.getValues().sort((function(n,t){return n.getMetadata().creationTime.getTime()-t.getMetadata().creationTime.getTime()}))}function lt(n){var t=yt.getDescriptor(n,{addSelfCloudNameIfMissing:!0});return yt.getWindowId(t)}function si(n){if(n){var t=e.makeArray(n.allowedOrigin);n.allowedOrigin=t.map(lt)}}function sr(n){var t=new
et(n.originId,n.loadWindow,{hostWindow:c,parentTrustedOrigin:pt.trustedParentOrigin,parentWindow:n.parentWindow});v.start(t)}function nt(n){return n.getName()}function hi(n,t,i,r){t.registerRpcEndPoint(nt(n),{allowedOrigin:i,handler:r})}function ci(n,t,i,r){return t.invokeRpc(nt(n),i,r)}var e=n,vt=e.Base.Utilities,o=e.Base.Diagnostics,yt=FxImpl.Extension,tt=FxImpl.TelemetryContext,it=vt.getCurrentCallStack,a,ut,gt,ft,ri,ui,et,ot,st,ht,g,ct,at,v,y,li,ai,vi;t.WindowLoadTimeoutsInSec=[20,40,80];t.minTraceDurationInMs=100;t.timeToDelayWindowUnload=6e4;var c=window,p=new o.Log("MsPortalFx/Base/Base.Rpc2"),pt=c.fx.environment,w=pt.extensionName,r="fx",rt=vt.generateNonSerializableProperty("WindowMessage"),b=(t.WindowLoadTimeoutsInSec.reduce((function(n,t){return n+t}),0)+20)*1e3,wt=FxImpl.Constants.RpcMethods.entryPointDispose,i=e.disposeDisposable,k=e.noop,bt=e.uncurryThis,kt=Array.prototype,s=bt(kt.forEach),h=bt(kt.push),yi=e.forEachKey,pi=ko.observable,wi=Object.keys,u="",bi={noHandler:u,handlerExists:
u,badRefCount:u,alreadyStarted:u,routeExists:u,callbackRegistered:u,endpointExists:u,sameWindow:u,badDuration:u,notStarted:u,keyExists:u},f=FxImpl.getErrorMap(bi),dt=(function(){function t(){this._map={};this.count=0}return t.prototype.getValue=function(n){return this._map[n]},t.prototype.setValue=function(t,i){n.hasOwnProperty(this._map,t)?f.keyExists(t):this.count++;this._map[t]=i},t.prototype.removeValue=function(t){n.hasOwnProperty(this._map,t)&&(this.count--,delete this._map[t])},t.prototype.getKeys=function(){return wi(this._map)},t.prototype.getValues=function(){return n.map(this._map,(function(n){return n}))},t})(),l=(function(){function n(n){this._disposeCallbacks=[];this._value=n}return n.prototype.getValue=function(){return this._value},n.prototype.dispose=function(){if(this._disposeCallbacks){var n=this.getValue(),t=this._disposeCallbacks;this._disposeCallbacks=null;s(t,(function(t){try{t(n)}catch(i){setTimeout((function(){throw i;}),0)}}))}},n.prototype.onDispose=function(n){this._disposeCallbacks?
h(this._disposeCallbacks,n):n(this.getValue())},n})();t.DisposableValue=l;a=(function(){function n(n){this._dic=new dt;this._countChangesCallback=n}return n.prototype.getValue=function(n){return this._dic.getValue(n)},n.prototype.setValue=function(n,t){var i=this._dic,r=this._countChangesCallback;i.setValue(n,t);r&&r(i.count,!0);t.onDispose((function(){i.removeValue(n);r&&r(i.count,!1)}))},n.prototype.getValues=function(){return this._dic.getValues()},n.prototype.dispose=function(){i(this._dic.getValues())},n})();ut=(function(n){function t(t){n.call(this,t.window);this._trustedHost=(t.trustedHost||"*").toLowerCase();this._initFunc=t.initializationFunc;this._source=t.source}return __extends(t,n),t.prototype.getSource=function(){return this._source},t.prototype.initialize=function(){if(this._initFunc){var n=this._initFunc;this._initFunc=null;n(this)}},t.prototype.isHostAllowed=function(n){var t=this._trustedHost;return t==="*"||n.toLowerCase()===t},t.prototype.postMessage=function(n){this.getValue(
).postMessage(n,this._trustedHost)},t.prototype.getTrustedHost=function(){return this._trustedHost},t})(l);t.RpcWindow=ut;gt=function(n,t){return t.seq-n.seq};ft=(function(){function n(n,t){this._outerList=[];this._innerListIndex=0;this._outerListIndex=n;this._handler=t}return n.prototype._processInnerList=function(n){var e=this,r,i,u,t,f;if(n&&this._innerList!==n&&(this._innerList=n,this._innerListIndex=0),this._innerList){r=this._innerList;i=!0;try{for(t=this._innerListIndex,f=r.length;t<f;t++)u=r[t],i=!1,this._handler(u),i=!0}finally{i||(this._innerListIndex=t+1,Q.nextTick((function(){e.addItem()})))}this._innerList=undefined}},n.prototype.addItem=function(n){var t=this._outerList,i;for(n&&(h(t,n),t.sort(gt)),this._processInnerList();t.length>0&&t[t.length-1].seq===this._outerListIndex;)i=t.pop(),this._outerListIndex++,this._processInnerList(i.data)},n.prototype.isEmpty=function(){return this._outerList.length===0&&this._innerList===undefined},n})();t.Sequencer=ft;var ki=(function(){function n(
n){this._isReadyToSend=!1;this._isCallbackScheduled=!1;this._frameBuffer=[];this._sender=n}return n.prototype._schedule=function(){var n=this;this._isReadyToSend&&!this._isCallbackScheduled&&(this._isCallbackScheduled=!0,Q.nextTick((function(){n.flush();n._isCallbackScheduled=!1})))},n.prototype.flush=function(){this._isReadyToSend&&this._frameBuffer.length>0&&(this._sender(this._frameBuffer),this._frameBuffer=[])},n.prototype.send=function(n){this._schedule();h(this._frameBuffer,n)},n.prototype.start=function(){this._isReadyToSend=!0;this._schedule()},n})(),ni=(function(){function n(n){this._handlerMap={};this._listener=n}return n.prototype.handleMessage=function(n,t){var i=this._handlerMap[n.kind+""];i||f.noHandler();i(n.data,t)},n.prototype.registerHandler=function(n,t){var r=this,i=n+"";return this._handlerMap[i]&&f.handlerExists(),this._handlerMap[i]=t,function(t,i){r._listener(t,{kind:n,data:i})}},n})(),di=(function(){function n(n,t,i){this._senderSequenceIndex=0;this.localInstanceIndex=
0;this.remoteInstanceIndex=0;this._isParentRoute=n;this.remoteId=t;this._routedMsgHandler=i}return n.prototype.handleMessage=function(n,t,i){var r=this._rpcWnd,u,f;if(r){try{u=r.getSource()===n}catch(e){u=!1}u&&r.isHostAllowed(t)&&(f=i.seq,i.handshakeData?this._handleHandshakeFrame(i.handshakeData):this._wndMsgHandler&&f>=this.localInstanceIndex&&this._wndMsgHandler.addItem(i))}},n.prototype.setWindow=function(n){var t=this;n?(this._bufferedSender=new ki(function(n){t._postMsgToWin(n)}),this._rpcWnd=n,this._isParentRoute&&this._postMsgToWin(null,!1)):(this._bufferedSender.flush(),this._rpcWnd=null,this._bufferedSender=null,this._wndMsgHandler=null)},n.prototype.send=function(n){this._bufferedSender&&(this._rpcWnd.initialize(),this._bufferedSender.send(n))},n.prototype._handleHandshakeFrame=function(n){var t=n.sequenceStart;this.localInstanceIndex=t;this._localId=n.destinationId;this._wndMsgHandler=new ft(t,this._routedMsgHandler);n.isResponse||this._postMsgToWin(null,!0);this._bufferedSender.
start()},n.prototype._postMsgToWin=function(n,t){var i,r;this._rpcWnd&&(typeof t=="boolean"?(r=this._senderSequenceIndex,this.remoteInstanceIndex=r,i={signature:rt,seq:-1,originId:undefined,handshakeData:{isResponse:t,sequenceStart:r,destinationId:this.remoteId},data:undefined}):i={signature:rt,seq:this._senderSequenceIndex++,originId:this._localId,data:n},this._rpcWnd.postMessage(i))},n})(),gi=(function(){function n(){this._refCounts=[];this.totalCount=0}return n.prototype.setCount=function(n,t){var i=this.getCount(n);return this._refCounts[n]=t,this.totalCount+=t-i,this.totalCount},n.prototype.getCount=function(n){return this._refCounts[n]||0},n.prototype.clearRefCounts=function(){var n=this.totalCount;return this._refCounts=[],this.totalCount=0,n},n})(),ti=2,nr=(function(){function n(){this._refCounts={};this.totalRefCounts=pi(0)}return n.prototype._getRefCountSet=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new gi),i},n.prototype.setRefCount=function(n,t,i)
{var u=this._getRefCountSet(n,!0),f=u.totalCount,e=u.setCount(t,i),r=e-f;return r?(this.totalRefCounts(this.totalRefCounts.peek()+r),r>0?f?1:0:e?3:ti):4},n.prototype.clearRefCountsFrom=function(n){var t=this._getRefCountSet(n),i;t&&(i=t.clearRefCounts(),this.totalRefCounts(this.totalRefCounts.peek()-i))},n.prototype.getRefCountsFrom=function(n){var t=this._getRefCountSet(n);return t?t.totalCount:0},n})(),tr=0,ii=(function(n){function t(){n.call(this,""+tr++)}return __extends(t,n),t})(l);t.AcquireWindowResult=ii;ri=(function(){function n(n,t,i,r,u){this._wndUnloadTimeoutHandle=0;this._wndId=n;this._routeWndSetter=t;this._clearRefCountsFunc=i;this._sendShutdownMsg=r;this._loadWndFunc=u}return n.prototype.isAlive=function(){return this._wndUnloadTimeoutHandle?!1:!!this._currentWnd},n.prototype.setWindowLoaded=function(n){var r=this,u;if(n)if(this._currentWnd)this._wndUnloadTimeoutHandle!==0&&(c.clearTimeout(this._wndUnloadTimeoutHandle),this._wndUnloadTimeoutHandle=0);else{try{this._currentWnd=
this._loadWndFunc(this._wndId)}catch(f){u=f}if(this._currentWnd){this._currentWnd.onDispose((function(){r._currentWnd=null;var n=r._wndId;r._sendShutdownMsg(n,void 0);r._routeWndSetter.setRouteWindow(n,null);c.clearTimeout(r._wndUnloadTimeoutHandle);r._wndUnloadTimeoutHandle=0;r._clearRefCountsFunc({windowId:n,reason:"The window '"+n+"' was garbage collected or forcibly terminated.",callStack:undefined})}));this._routeWndSetter.setRouteWindow(this._wndId,this._currentWnd)}else this._clearRefCountsFunc({windowId:this._wndId,reason:fi(u,"Fail to load window '"+this._wndId+"'."),callStack:u&&u.stack})}else!n&&this._currentWnd&&this._wndUnloadTimeoutHandle===0&&(this._wndUnloadTimeoutHandle=c.setTimeout((function(){i(r._currentWnd)}),t.timeToDelayWindowUnload))},n})();ui=(function(){function n(n,t,i,u){var f=this;this._refCounts={};this._knownWnds=[r];this._loadableWnds={};this._clearRefCountsFunc=function(n){s(f._knownWnds,(function(t){var u=n.windowId,i=f.getWindowRefCounts(t,!1),r=f.getWindowRefCounts(
u,!1);(r&&r.getRefCountsFrom(t)>0||i&&i.getRefCountsFrom(u)>0)&&f._sendResetMsg(t,n);r&&r.clearRefCountsFrom(t);i&&i.clearRefCountsFrom(u)}))};this._routeWndSetter=n;this._sendShutdownMsg=i;this._sendResetMsg=t;this._loadWndFunc=u}return n.prototype._getOrCreateLoadableWin=function(n){var t=this._loadableWnds[n];return n===r||t||(t=new ri(n,this._routeWndSetter,this._clearRefCountsFunc,this._sendShutdownMsg,this._loadWndFunc),this._loadableWnds[n]=t,h(this._knownWnds,n)),t},n.prototype.setRefCount=function(n,t){var r=t.target,u=this.getWindowRefCounts(r,!0).setRefCount(n,t.kind,t.value),i=this._getOrCreateLoadableWin(r);return i&&(t.isActivating&&!i.isAlive()||u===ti&&i.isAlive())&&this._refreshWinsLoadedState(),u},n.prototype.getWindowRefCounts=function(n,t){var i=this._refCounts[n];return!i&&t&&(this._refCounts[n]=i=new nr),i},n.prototype._refreshWinsLoadedState=function(){for(var f=this,n={},t=[r],e=Object.keys(this._loadableWnds),o=e,i,u;t.length>0;)i=[],u=[],s(t,(function(t){n[t]=undefined;
s(o,(function(r){var e;f.getWindowRefCounts(r,!0).getRefCountsFrom(t)>0?(n[t]=undefined,e=i):e=u;h(e,r)}))})),t=i,o=u;s(e,(function(t){f._loadableWnds[t].setWindowLoaded(n.hasOwnProperty(t))}))},n})();t.invokeWithContext=d;et=(function(){function n(n,t,i){var u=this,e,h;this._routedMessageClients=[];this.routedMessageRelay=new ni(function(n,t){var i=u.localWindowId,f={callStack:it(),routeInstanceIndex:0,destWindowId:n,srcWindowId:i,data:t},e;i===n?u.routedMessageRelay.handleMessage(t,f):(e=i===r?n:r,u._baseDispatcher.sendMessage(e,f))});this.log=this.routedMessageRelay.registerHandler(3,(function(n){o.Log.writeEntry2(n.level,n.area,n.message,n.code)}));this.raiseRemoteException=this.routedMessageRelay.registerHandler(2,(function(n){var t=o.createRpcException(n);throw t;}));this._baseDispatcher=new ot(i);this.localWindowId=n;e=this.routedMessageRelay.registerHandler(0,(function(n,t){t.srcWindowId===r&&s(u._routedMessageClients,(function(i){i.reset(n,t)}))}));h=this.routedMessageRelay.registerHandler(1,
(function(n,t){t.srcWindowId===r&&(s(u._routedMessageClients,(function(n){n.shutdown(t)})),o.Log.flush(),o.Log.disable())}));t&&(this._shellRefCounter=new ui(this._baseDispatcher,e,h,t));this._sendRefCount=this.routedMessageRelay.registerHandler(4,(function(n,t){u._shellRefCounter?u._shellRefCounter.setRefCount(t.srcWindowId,n):f.badRefCount()}))}return n.prototype.handleMessage=function(n,t){var e=this,i=t.remoteId,f=n.srcWindowId,u;if(i!==r&&i!==f){p.error("["+w+"] Message from route to '"+i+"' specifies an invalid window ID '"+f+"'.",1);return}n.routeInstanceIndex+=t.remoteInstanceIndex;u=n.destWindowId;u===this.localWindowId?(n.routeInstanceIndex+=t.localInstanceIndex,d(n,(function(){return e.routedMessageRelay.handleMessage(n.data,n)}))):this._baseDispatcher.sendMessage(u,n)},n.prototype.getTotalRefCounts=function(n){return this._shellRefCounter.getWindowRefCounts(n,!0).totalRefCounts},n.prototype.createClient=function(n,t){var i=new n(this,t);return h(this._routedMessageClients,i),i},n.prototype.
setRefCount=function(n,t,i,u){var f={target:n,kind:t,isActivating:i,value:u};this._shellRefCounter?this._shellRefCounter.setRefCount(r,f):this._sendRefCount(r,f)},n.prototype.start=function(){this._baseDispatcher.start(this)},n.prototype.dispose=function(){i(this._baseDispatcher)},n})();t.RoutedMessageDispatcher=et;ot=(function(){function n(n){var t=this,f;this._routes={};this._preStartReceiveBuffer=[];this._eventHandler=function(n){var i,r;t._wnd.Object&&(i=n.data,i&&i.signature===rt&&(r=t._preStartReceiveBuffer,r?h(r,{data:i,origin:n.origin,source:n.source}):t._handleMsg(n)))};var i=n.hostWindow,u=n.parentWindow,e=n.parentTrustedOrigin;this._wnd=i;i.addEventListener("message",this._eventHandler);u!==i&&e&&(f=this._registerRoute(!0,r),f.setWindow(new ut({window:u,source:u,trustedHost:n.parentTrustedOrigin,initializationFunc:void 0})))}return n.prototype.getRoute=function(n){return this._routes[n]},n.prototype.sendMessage=function(n,t){var i=this._routes[n];if(i)return i.send(t)},n.prototype.
start=function(n){var i,t,r,u;if(this._preStartReceiveBuffer||f.alreadyStarted(),this._routedMsgMultiplexer=n,this._preStartReceiveBuffer)for(i=this._preStartReceiveBuffer,t=0,r=i.length;t<r;t++)u=i[t],this._handleMsg(u);this._preStartReceiveBuffer=undefined},n.prototype.setRouteWindow=function(n,t){var i=this._routes[n];i||(i=this._registerRoute(!1,n));i.setWindow(t)},n.prototype.dispose=function(){this._wnd.removeEventListener("message",this._eventHandler)},n.prototype._registerRoute=function(n,t){var r=this,i;return this._routes[t]&&f.routeExists(t),i=new di(n,t,function(n){r._routedMsgMultiplexer.handleMessage(n,i)}),this._routes[t]=i,i},n.prototype._handleMsg=function(n){var t=n.data,r=t.originId,i;r?(i=this._routes[r],i&&i.handleMessage(n.source,n.origin,t)):yi(this._routes,(function(i,r){r.handleMessage(n.source,n.origin,t)}))},n})();t.WindowMessageDispatcher=ot;var rr=(function(){function n(){this._filters=[]}return n.prototype.register=function(n){var i=this,t;return this._filters.
indexOf(n)>=0&&f.callbackRegistered(),h(this._filters,n),t=!1,{dispose:function(){t||(t=!0,i._filters.remove(n))}}},n.prototype.applyFilters=function(n,t){this._filters.concat(t).reduce((function(t,i){return t?t.then((function(){return i(n)})):i(n)}),undefined)},n})(),ur=(function(){function n(n,t){this._name=n;this._options=t}return n.prototype.invoke=function(n,r,u,f){var y=this,a=r.srcWindowId,h=new FxImpl.TriggerableLifetimeManager,o=this._options,v=e.makeArray(o.allowedOrigin),p=o.handler||function(){},c=function(n,u){u===void 0&&(u=!0);i(h);n=n||{};var e=y._name,c=fi(n,"Failed to complete the RPC call for '"+e+"'"),o=typeof n.stack=="string",s=t.createCallStack(o?n.stack:"",r,e);if(f(c,s),o&&(n.stack=s),u)throw n;},s,l;v.length&&v.indexOf(a)===-1&&c("The origin window '"+a+"' is not allowed to access the endpoint name '"+this._name+"'.",!1);try{s=p(n,r,h);l=function(n){(o.onSuccess||u)(ir(n,h),o,u)};Q.isPromiseAlike(s)?Q(s).then((function(n){d(r,(function(){l(n)}))}),c):l(s)}catch(w){c(w)}
},n})(),ei=(function(){function n(n){this._endPoints={};this._endPointDeferred={};this._endPointFilterMgr=n}return n.prototype.registerEndPoint=function(n,t){if(this._endPoints[n])f.endpointExists(n);else{var i=new ur(n,t),r=this._endPointDeferred[n];this._endPoints[n]=i;r&&(r.resolve(i),delete this._endPointDeferred[n])}},n.prototype.invokeEndPoint=function(n,t,i,r,u){var f=this;this._endPointFilterMgr.applyFilters(n,(function(){var o=f._endPoints[n],e;o?o.invoke(t,i,r,u):(p.verbose("["+w+"] Attempted to invoke endpoint '"+n+"' but it is not registered. RPC call has been blocked until endpoint becomes registered."),e=f._endPointDeferred[n],e||(e=Q.defer(),f._endPointDeferred[n]=e,Q.timeout(e.promise,b,"["+w+"] Attempted to invoke endpoint '"+n+"' from '"+i.srcWindowId+"' but it is not registered after '"+b+"'ms. The call was made in:\r\n'"+i.callStack+"'").catch((function(n){p.error(n)}))),e.promise.then((function(n){d(i,(function(){return n.invoke(t,i,r,u)}))})))}))},n})(),oi="["+w+"]: An RPC call to '{0}' in '{1}' timed out",
fr=oi+" after '{3}'ms. The call was made in:\r\n'{2}'";t.errorIsRpcTimeout=er;st=(function(){function n(n,t,i){this._requestIdCounter=0;this._pendingRpcCall=new dt;this._destination=n;this._refCounter=t;this._kind=i}return n.prototype.getDestinationId=function(){return this._destination},n.prototype._setRefCount=function(n){this._refCounter.setRefCount(this._destination,this._kind,n,this._pendingRpcCall.count)},n.prototype.getMetadata=function(n){return this._pendingRpcCall.getValue(n)},n.prototype.create=function(n,t,i){var u=this,f=Q.defer(),e=it(),r=this._requestIdCounter+++"",o=new Date,s=Q.timeout(f.promise,b,fr.format(n,this._destination,"{requestid: "+r+", creationTime: "+o+"}\n"+e,b));return this._pendingRpcCall.setValue(r,{destinationId:this._destination,creationCallStack:e,creationTime:o,returnValue:f,returnCallback:i,telemetryContext:tt.getState()}),this._setRefCount(!0),t(r),s.finally((function(){Q.nextTick((function(){u._pendingRpcCall.removeValue(r);u._setRefCount(!1)}))}))},n.
prototype.resolve=function(n,t){var i=this._pendingRpcCall.getValue(n);i&&(i.returnCallback&&i.returnCallback(t),i.returnValue.resolve(t))},n.prototype.reject=function(n,t,i){var r=this._pendingRpcCall.getValue(t),u;r&&(u=o.createRpcException({reason:i.reason,callStack:i.callStack||r.creationCallStack}),r.returnCallback&&r.returnCallback(undefined),r.returnValue.reject(u))},n.prototype.handleResetMessage=function(n,t){var i=this;s(this._pendingRpcCall.getKeys(),(function(r){i.reject(t.destWindowId,r,n)}))},n})(),(function(n){var t=(function(){function n(n,t){var r=this,u;this._targetWndCtx={};u=n.routedMessageRelay;this._clientCtx=n;this._endPoints=t;this._sendInvokeFunc=u.registerHandler(5,(function(n,t){var u=t.srcWindowId,f=n.requestId;r._endPoints.invokeEndPoint(n.name,n.arg,t,(function(n){r._sendRpcResolveFunc(u,{pendingRequestId:f,successValue:n.getValue()});i(n)}),(function(n,t){r._sendRpcRejectFunc(u,{pendingRequestId:f,reason:n,callStack:t})}))}));this._sendRpcResolveFunc=u.registerHandler(
6,(function(n,t){r._getWndCtx(t.srcWindowId).resolve(n.pendingRequestId,n.successValue)}));this._sendRpcRejectFunc=u.registerHandler(7,(function(n,t){r._getWndCtx(t.srcWindowId).reject(t.destWindowId,n.pendingRequestId,n)}))}return n.prototype._getWndCtx=function(n){var t=this._targetWndCtx[n];return t||(this._targetWndCtx[n]=t=new st(n,this._clientCtx,3)),t},n.prototype.invoke=function(n,t,i){var r=this;return this._getWndCtx(t).create(n,(function(u){r._sendInvokeFunc(t,{requestId:u,name:n,arg:i})}))},n.prototype.reset=function(n,t){this._getWndCtx(n.windowId).handleResetMessage(n,t)},n.prototype.shutdown=function(n){this._endPoints.invokeEndPoint(wt,undefined,n,k,k)},n})();n.StatelessRpcClient=t})(ht||(ht={})),(function(n){var r=FxImpl.Po,e=r.createPoMgr,o=0,u=(function(n){function t(i,r){n.call(this,i);this._metadata=r;this._id=""+o++;t.trackedObjects.setValue(this._id,this)}return __extends(t,n),t.prototype.getMetadata=function(){return this._metadata},t.trackedObjects=new a,t})(l);n.ProxiedObject=
u;var s=(function(){function n(t,r,f,e,o,s){var h=this,c;this._producedObjs=new a;this._acquiredObjs=new a(function(n){h._clientCtx&&h._clientCtx.setRefCount(h._remoteWinId,1,!1,n)});this._remoteWinId=f;this._pendingObjRequest=o;this._clientCtx=t;this._sender=s;c=[r,f,e].join("-");this._msgRelay=new ni(function(n,t){var i=h._sender;i&&i(t)});this._poMgr=n.createPoMgr(this,c,r,f);this._sendAcquireObjResp=this._registerSymmetricAct(4,(function(n){var t=n.requestId,i=h._pendingObjRequest.getMetadata(t),f=tt.usingState((function(){return h._poMgr.deserialize(n.object)}),i&&i.telemetryContext),r=new u(f,i);r.onDispose((function(){h._poMgr.release(f);h._sendReleaseRootObj(t)}));h._acquiredObjs.setValue(t,r);h._pendingObjRequest.resolve(t,r)}));this._sendReleaseRootObj=this._registerSymmetricAct(5,(function(n){i(h._producedObjs.getValue(n))}))}return n.createPoMgr=function(n,i,u,f){var o=e(i,(function(i){n._clientCtx.raiseRemoteException(f,{reason:i,callStack:t.getCurrentCallStack()})}),n._registerSymmetricAct(
0,(function(n){var t=r.getMetadata(n);tt.usingState((function(){o.applyChange(n)}),t)})),n._registerSymmetricAct(1,(function(n){o.applyPromise(n)})),n._registerSymmetricAct(2,(function(n){o.invoke(n)})),n._registerSymmetricAct(3,(function(n){o.applyRelease(n)})),u,f);return o},n.prototype._registerSymmetricAct=function(n,t){var i=this._msgRelay.registerHandler(n,t);return function(n){i(undefined,n)}},n.prototype.handleAcquireObjRequest=function(n,t,i){this._producedObjs.setValue(n,i);var r=this._poMgr;this._sendAcquireObjResp({requestId:n,object:r.serialize(i.getValue(),!t.allowRemoteChanges,!1)});r.proxyBuffer()},n.prototype.handle=function(n){this._msgRelay.handleMessage(n,undefined)},n.prototype.dispose=function(){i(this._acquiredObjs,this._producedObjs,this._poMgr);this._sender=null;this._clientCtx=null},n})(),h=(function(){function n(n,t,i,r){var u=this;this._routeInstanceIndex=0;this._receiveSequenceIndex=0;this._transmitSequenceIndex=0;this._pendingObjRequests=new st(n,t,2);this._clientCtx=
t;this._sendAcquireObjRequest=i;this._sendConnMsg=function(t){r(n,{sequenceIndex:u._transmitSequenceIndex++,data:t})}}return n.prototype.getRemoteId=function(){return this._pendingObjRequests.getDestinationId()},n.prototype.getPoConnection=function(n,t){var r=t>=0,i;return this._connection&&t!==this._receiveSequenceIndex&&this._routeInstanceIndex!==n.routeInstanceIndex&&(this._resetConnection(),this._sendConnMsg(null)),t!==0&&r||this._connection||(this._routeInstanceIndex=n.routeInstanceIndex,this._connection=new s(this._clientCtx,n.destWindowId,n.srcWindowId,n.routeInstanceIndex,this._pendingObjRequests,this._sendConnMsg)),t===this._receiveSequenceIndex?(this._receiveSequenceIndex++,i=this._connection):r||(i=this._connection),i},n.prototype.acquireObj=function(n,t,i){var r=this;return this._pendingObjRequests.create(n,(function(i){r._sendAcquireObjRequest(r.getRemoteId(),{requestId:i,name:n,arg:t})}),i)},n.prototype.handleAcquireObjResponseError=function(n,t){this._pendingObjRequests.reject(
n,t.pendingRequestId,t)},n.prototype.reset=function(n,t){this._pendingObjRequests.handleResetMessage(n,t);this._resetConnection()},n.prototype._resetConnection=function(){i(this._connection);this._connection=null;this._transmitSequenceIndex=0;this._receiveSequenceIndex=0},n})(),c=(function(){function n(n,t){var i=this,r;this._targetWnds={};r=n.routedMessageRelay;this._endpoints=t;this._routedMsgClientCtx=n;this._sendAcquireObjRequest=r.registerHandler(8,(function(n,t){var r=i._getOrCreatePoConnection(t,-1);i._endpoints.invokeEndPoint(n.name,n.arg,t,(function(t,i){r.handleAcquireObjRequest(n.requestId,i,t)}),(function(r,u){i._sendAcquireObjResponseError(t.srcWindowId,{pendingRequestId:n.requestId,reason:r,callStack:u})}))}));this._sendAcquireObjResponseError=r.registerHandler(9,(function(n,t){i._getWndCtx(t.srcWindowId).handleAcquireObjResponseError(t.destWindowId,n)}));this._sendConnMsg=r.registerHandler(10,(function(n,t){var r=i._getOrCreatePoConnection(t,n.sequenceIndex),u=n.data;r&&u&&r.handle(
u)}))}return n.prototype._getWndCtx=function(n){n===this._routedMsgClientCtx.localWindowId&&f.sameWindow();var t=this._targetWnds[n];return t||(this._targetWnds[n]=t=new h(n,this._routedMsgClientCtx,this._sendAcquireObjRequest,this._sendConnMsg)),t},n.prototype._getOrCreatePoConnection=function(n,t){return this._getWndCtx(n.srcWindowId).getPoConnection(n,t)},n.prototype.acquireObject=function(n,t,i,r){return this._getWndCtx(t).acquireObj(n,i,r)},n.prototype.reset=function(n,t){this._getWndCtx(n.windowId).reset(n,t)},n.prototype.shutdown=function(n){this._endpoints.invokeEndPoint(wt,undefined,n,k,k)},n})();n.ProxiedObjectClient=c})(g||(g={}));t.dumpTrackedObjects=or,(function(n){var t=(function(){function n(n){this._targetWindows={};this._routedMsgClientCtx=n}return n.prototype._getWndCtx=function(n){var i=this,t=this._targetWindows[n];return t||(this._targetWindows[n]=t=new a(function(t,r){i._routedMsgClientCtx.setRefCount(n,0,r,t)})),t},n.prototype.acquireWindow=function(n,t){var e=this._getWndCtx(
n),u=0,r=new ii;r.onDispose((function(){c.clearTimeout(u)}));return typeof t=="number"&&(t<0&&f.badDuration(),u=c.setTimeout((function(){i(r)}),t*1e3)),e.setValue(r.getValue(),r),r},n.prototype.reset=function(n){var t=n.windowId;i(this._targetWindows[t])},n.prototype.shutdown=function(){},n})();n.WindowAcquirerClient=t})(ct||(ct={}));at=(function(){function n(){this.reset()}return n.prototype.registerRpcEndPoint=function(n,t){si(t);this._rpcEndPoints.registerEndPoint(n,t)},n.prototype.registerObjectFactory=function(n,t){si(t);this._poEndPoints.registerEndPoint(n,t)},n.prototype._assertReady=function(){this._dispatcher||f.notStarted()},n.prototype.log=function(n,t){this._assertReady();this._dispatcher.log(n,t)},n.prototype.invokeRpc=function(n,t,i){this._assertReady();var r=lt(t);return this._rpcClient.invoke(n,r,i)},n.prototype.acquireObject=function(n,t,i,r){this._assertReady();var u=lt(t);return this._poClient.acquireObject(n,u,i,r)},n.prototype.getTotalRefCountTo=function(n){return this._assertReady(
),this._dispatcher.getTotalRefCounts(n)},n.prototype.acquireWindow=function(n,t){return this._assertReady(),this._wndAcquirer.acquireWindow(n,t)},n.prototype.registerEndPointFilter=function(n){return this._endPointFilterMgr.register(n)},n.prototype.start=function(n){this._dispatcher=n;this._rpcClient=n.createClient(ht.StatelessRpcClient,this._rpcEndPoints);this._poClient=n.createClient(g.ProxiedObjectClient,this._poEndPoints);this._wndAcquirer=n.createClient(ct.WindowAcquirerClient,null);n.start()},n.prototype.reset=function(){i(this._dispatcher);this._dispatcher=null;this._endPointFilterMgr=new rr;this._rpcEndPoints=new ei(this._endPointFilterMgr);this._poEndPoints=new ei(this._endPointFilterMgr);this._rpcClient=null;this._poClient=null;this._wndAcquirer=null},n})();t.ClientImpl=at;v=new at;FxImpl.GlobalStateManager.register(v);t.start=sr;t.client=v;t.internalClient=v;y=(function(){function n(n){this._name=n}return n.prototype.getName=function(){return this._name},n})();t.EndPointDefinition=
y;li=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.register=function(n,t,i){hi(this,n,t,i)},t.prototype.invoke=function(n,t,i){return ci(this,n,t,i)},t})(y);t.ActionEndPointDefinition=li;ai=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.register=function(n,t,i){hi(this,n,t,i)},t.prototype.invoke=function(n,t,i){return ci(this,n,t,i)},t})(y);t.FuncEndPointDefinition=ai;vi=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.registerObjectFactory=function(n,t){n.registerObjectFactory(nt(this),t)},t.prototype.acquireObject=function(n,t,i,r){return n.acquireObject(nt(this),t,i,r)},t})(y);t.ProxiedObjectTypeDefinition=vi;t.load&&p.error("script invoked multiple times. "+it(!0));t.load=1})(i=t.Internal||(t.Internal={}))})(i=t.Rpc||(t.Rpc={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=MsPortalFx.Base.Rpc.Internal,r=n.Constants.RpcMethods;
t.extensionStatusEndPoint=new i.ActionEndPointDefinition(r.notifyExtensionStatus)})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function a(n,t){return{type:n.type,data:n.data,options:$.extend({},n.options,{badge:t})}}function v(n,t){return{type:n.type,data:n.data,options:t}}function i(n){return o?function(t){return t?u(n,t):s(n)}:function(t){return u(n,t)}}function y(n){return{type:2,data:n}}function f(t,r){n.extendStringMapIntoMap(t,r,i)}function h(n){return u(n,{isLogo:!0})}function r(n){return o?function(){return c(n)}:function(){return h(n)}}var l=n.Services.Image,e=n.Base.Images,u=l.newImageData,o=FxImpl.hasCapability(1),s,p,w,b,k,d,g,c,nt;t.CustomImageWithBadge=a;t.CustomImageWithOptions=v;s=n.memoize(u);t.ImageUri=y;f(e,{Add:4,AddBoxed:300,AddTeamMember:82,AddTile:318,Attachment:83,AvatarDefault:84,AvatarUnknown:85,AzurePortal:334,AzureQuickstart:161,Backlog:86,Blank:0,Book:10,Canceled:74,Check:12,Clock:75,
Clone:76,Code:94,Collapse:298,Commit:96,Commits:210,Connect:132,Console:333,Customize:296,Delete:17,Disable:98,Disabled:18,Discard:19,Disconnect:133,Download:174,Edit:99,Ellipsis:176,Error:77,Expand:299,Favorite:101,Feedback:228,File:102,Filter:22,ForPlacementOnly:177,Gear:103,GetMoreLicense:104,GetStarted:105,Go:108,Guide:218,Hamburger:313,HeartPulse:211,History:109,Hyperlink:31,Inactive:110,LaunchCurrent:227,Link:35,Lock:37,Log:112,Monitoring:193,Paused:79,Pending:43,Person:44,PersonWithFriend:45,Pin:46,Plus:297,Postpone:114,PowerUp:216,Properties:48,Publish:162,Question:49,Queued:80,Redo:157,Refresh:51,Release:115,Request:116,Retain:117,Save:52,Signout:226,SmileyHappy:319,SmileyNeutral:320,SmileySad:321,Start:61,Stop:62,Subtract:65,Support:219,Swap:66,Tasks:119,Tools:159,TrendDown:204,TrendUp:205,Triangle:120,Unlock:69,Unpin:70,Upload:121,Variables:206,Warning:317,Wrench:160,Info:225,AddAlternate:259,ArrowDown:260,ArrowLeft:261,ArrowRight:262,ArrowUp:263,CaretDown:286,CaretUp:287,Columns:
264,Diagnostics:279,FolderAlternate:265,GearAlternate:249,Globe:285,InstallVisualStudio:111,Key:266,Mail:267,Message:268,Query:270,SaveAll:271,Search:248,Star:283,Tag:239,Tags:246,Tour:275,Undo:272,WebHostingPlan:236});t.GitLogo=i(106);t.GitLogoBox=i(107);t.VisualStudio=i(123);t.VisualStudioLogoBox=i(124),(function(){f(e.Logos,{Bitbucket:181,BitbucketBox:182,Channel9:277,CodePlex:183,CodePlexBox:184,Dropbox:185,DropboxBox:186,ExternalRepositoryBox:212,Git:187,GitBox:188,GitHub:189,GitHubBox:190,Redis:229,StackOverflow:278,VisualStudio:191,VisualStudioBox:192,Microsoft:220,MicrosoftSquares:258})})(p=t.Logos||(t.Logos={})),(function(t){function r(n){return{type:n,options:{customClass:"msportalfx-svg-rotate360"}}}function u(n){return o?function(){return f(n)}:function(){return r(n)}}t.EllipsisSquare=i(295);var f=n.memoize(r);t.Spinner=u(328);t.Loader=u(329)})(w=t.Loading||(t.Loading={})),(function(n){n.Happy=i(242)})(b=t.Emoticon||(t.Emoticon={})),(function(n){f(n,{ActiveDirectory:3,Advisor:336,
ApiManagement:301,AppInsights:135,Automation:164,AvailabilitySet:136,Backlog:87,Backup:137,BillingHub:92,BizTalk:302,BlobBlock:231,BlobPage:232,Branch:240,Browser:138,Bug:11,Builds:93,Cache:230,Cdn:303,Certificate:194,Chart:241,ClearDBDatabase:178,Clock:195,CloudService:13,Code:95,Commit:97,Controls:14,ControlsHorizontal:196,Counter:250,Cubes:15,CustomDomain:139,Database:16,Discs:244,ErrorIcon:274,EventHub:304,Extensions:237,DevConsole:213,Download:20,File:254,Files:255,FolderBlank:23,FolderCube:24,FolderWebsite:25,Ftp:26,Gear:27,Globe:140,GlobeError:222,GlobeSuccess:223,GlobeWarning:224,Grid:28,Guide:29,Heart:30,Image:256,Info:32,InputOutput:197,IpAddress:141,JourneyHub:33,Key:34,LaunchPortal:142,LoadBalancer:143,LoadTest:144,Location:36,Log:145,LogDiagnostics:146,LogStreaming:147,ManagementPortal:276,Media:38,MediaFile:39,Mobile:40,MobileEngagement:305,Module:198,Monitoring:41,NetworkInterfaceCard:148,Notification:42,OperationalInsights:306,Owl:332,Power:291,Powershell:47,PowerUp:199,
ProcessExplorer:251,Preview:294,ProductionReadyDb:214,RemoteApp:307,ResourceDefault:149,ResourceGroup:179,ResourceGroupList:208,ResourceLinked:150,ResourceList:207,ResourceRole:288,Scale:118,Scheduler:308,Search:53,SearchGrid:54,ServerFarm:151,ServiceBus:309,SiteRecovery:310,SqlDatabase:165,SqlDataBaseServer:152,SSD:280,SslCustomDomains:60,Storage:63,StorageAzureFiles:290,StorageContainer:233,StorageQueue:234,Store:64,StorSimple:311,StreamAnalytics:312,Support:200,Table:235,TeamProject:67,TfsVcRepository:153,Toolbox:68,TrafficManager:166,Versions:203,VirtualMachine:71,VirtualNetwork:245,WebEnvironment:167,WebHosting:154,WebJobs:168,Website:72,WebsitePower:73,WebsiteStaging:155,WebSlots:215,WebTest:156,Workflow:180});n.PolyTrafficManagerDisabled=i(201);n.PolyTrafficManagerEnabled=i(202);n.TrafficManagerDisabled=i(201);n.TrafficManagerEnabled=i(202);n.QuickStart=i(161)})(k=t.Polychromatic||(t.Polychromatic={})),(function(n){f(e.Shell,{Add:325,ArrowWideUp:282,ArrowWideDown:281,Chevron:158,Close:
55,Collapse:56,CornerCheck:221,Customize:314,DefaultBlade:57,Dots:169,Filter:326,Fullscreen:323,Gear:247,HeaderDots:273,Maximize:58,Mini:322,Minimize:289,Pin:331,Restore:59,Save:330,Share:324,Trash:284,TrashOutline:327,TripleArrow:257});var t;(function(n){n.Home=i(127);n.Alerts=i(129);n.Journey=i(128);n.Browse=i(126);n.Billing=i(92);n.Create=i(125)})(t=n.JumpBar||(n.JumpBar={}))})(d=t.Shell||(t.Shell={})),(function(n){var t,r;n.Canceled=i(89);n.Critical=i(292);n.Disabled=i(90);n.Error=i(6);n.Failed=i(252);n.Info=i(78);n.None=i(7);n.Pending=i(88);n.Stopped=i(131);n.Success=i(8);n.Unknown=i(91);n.Warning=i(9),(function(n){n.Critical=i(293);n.Error=i(170);n.Failed=i(253);n.Info=i(171);n.Stopped=i(175);n.Success=i(172);n.Unknown=i(209);n.Update=i(238);n.Warning=i(173)})(t=n.Outline||(n.Outline={})),(function(n){n.Error=i(315);n.Info=i(316);n.Warning=i(317)})(r=n.Solid||(n.Solid={}))})(g=t.StatusBadge||(t.StatusBadge={}));c=n.memoize(h),(function(n){n.CollectionPartWithRollup=r(1e3);n.CollectionSummary=
r(1001);n.DonutChart=r(1002);n.DonutChartPartial=r(1003);n.Extensions=r(1004);n.GridWithMoreData=r(1005);n.Map=r(1006);n.MultiLineChartMultiTrendLine=r(1007);n.MultiScatterChart=r(1008);n.MultiStackedBarChart=r(1009);n.MutliLineChart=r(1010);n.PricingTier=r(1011);n.QuotaGauge=r(1012);n.ResourceMap=r(1013);n.SingleAreaChart=r(1014);n.SingleAreaChartSingleThreshold=r(1015);n.SingleAreaChartSingleTrendline=r(1016);n.SingleBarChartLarge=r(1017);n.SingleBarChartSmall=r(1018);n.SingleLineChart=r(1019);n.SingleScatterChart=r(1020);n.SingleScatterSingleThreshold=r(1021);n.SingleValueGauge=r(1022);n.SplitBarChart=r(1023);n.StackedAreaChart=r(1024)})(nt=t.PartGallery||(t.PartGallery={}))})(i=t.Images||(t.Images={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function r(n,t){return t.lastAccessed-n.lastAccessed}function i(n,t){for(var i=[],r=0,f=n.length;r<f;r++)u(n[r],(function(n,t){i.push(t)}));return t&&i.sort(t),i}var u=n.forEachKey,f=(function(
){function n(n){this._map={};this._capacity=n?n:0;this.clear()}return n.prototype.addOrUpdate=function(n,t,i){var r=this._getItem(n);return r?r.data=t:(this._map[n]={key:n,data:t,lastAccessed:this._lastAccessed++},this.count++,i||this.trim()),!r},n.prototype.contains=function(n){return!!this._getItem(n)},n.prototype.trim=function(n){var u,t;if(n===void 0&&(n=this._capacity),n<0)throw new Error("Capacity cannot be negative.");else if(n>0&&n<this.count)for(u=i([this._map],r),t=n;t<u.length;t++)delete this._map[u[t].key],this.count--},n.prototype.getOrAdd=function(n,t){var r=this._getItem(n,!t),i;return r?i=r.data:(i=t(n),this.addOrUpdate(n,i)),i},n.prototype.get=function(n){var t=this._getItem(n);return t?t.data:null},n.prototype.remove=function(n){this._map[n]&&(delete this._map[n],this.count--)},n.prototype.clear=function(){this._map={};this.count=0;this._lastAccessed=0},n.prototype.getList=function(){var n=i([this._map],r);return n.map((function(n){return n.data}))},n.prototype.merge=function(
n,t){var f=i([this._map,n._map],(function(n,i){return t(i.data,n.data)})),r,e,u;for(this.clear(),r=0,e=f.length;r<e;r++)u=f[r],this.addOrUpdate(u.key,u.data,!0);this.trim()},n.prototype._getItem=function(n,t){var i=this._map[n];if(i)i.lastAccessed=this._lastAccessed++;else if(t)throw new Error("Unable to find item with key: '"+n+"'.");return i},n})();t.LruMap=f})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function ot(n){if(n.collectTelemetry){var t=d();if(t-c>=et)return c=t,new l(n)}}function st(){c=0}function ht(){w.registerRpcEndPoint(p,{allowedOrigin:null,handler:function(n,t){u.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:n.action,actionModifier:n.actionModifier,name:n.name,duration:n.duration,data:n.data,optional:n.optional})}})}function ct(n){var t=r.performance,f,u,o;t&&t.getEntriesByType&&t.timing&&(f=t.timing,u=f.navigationStart,n=n||t.getEntriesByType("resource"),o=n.filter((function(n){var t=n.initiatorType;
return t==="link"||t==="script"})).map((function(n){var t=e.getUriAuthority(n.name,!1);return{host:t,entry:n,queueTime:vt(n)}})).reduce((function(n,t){var i=t.host,r=n[i]||(n[i]=[]);return r.push(t),n}),{}),k(o,(function(n,t){var f=tt("domainLookupStart","domainLookupEnd",t),e=tt("connectStart","connectEnd",t),r=at(t),o=t.reduce((function(n,t){var i=n.entry,r=i&&i.duration||0;return t.entry.duration>=r?t:n}),{});f.entry&&i("MaxHostDnsTime",f.entry.domainLookupStart,f.entry.domainLookupEnd,{epochAdjustment:u,data:f.entry,name:n});e.entry&&i("MaxHostConnectTime",e.entry.connectStart,e.entry.connectEnd,{epochAdjustment:u,data:e.entry,name:n});o.entry&&i("MaxHostTotalTime",o.entry.startTime,o.entry.responseEnd,{epochAdjustment:u,data:o.entry,name:n});r.entry&&i("MaxHostQueueTime",r.entry.responseEnd-r.queueTime,r.entry.responseEnd,{epochAdjustment:u,data:r.entry,name:n})})))}function lt(){var u,n,t,i;try{u=r.sessionStorage;n=u.getItem(g);n&&(t=JSON.parse(n),t&&nt(t,!0))}catch(f){ft.warning(f)}return i=
r.performance&&r.performance.timing,i?nt(i):void 0}function nt(n,t){var u=r.fx.bootstrapTelemetry,f;return u.appCacheLoad=n.domainLookupStart-n.fetchStart,u.requestTime=n.responseStart-n.requestStart,u.pageLoad=n.loadEventEnd-n.responseEnd,f=t?"Initial":"",u.navigationTime=i(f+"DocumentNavigationTime",n.fetchStart,n.responseEnd),u.ttfb=i(f+"DocumentFirstByte",n.fetchStart,n.responseStart),u.domainLookup=i(f+"DocumentDnsTime",n.domainLookupStart,n.domainLookupEnd),u.unloadTime=i(f+"DocumentUnloadTime",n.navigationStart,n.fetchStart),u}function i(n,t,i,r){r=r||{};var f=i-t;return a({timestamp:Math.round(i+(r.epochAdjustment||0)),source:s,action:n,name:r.name,actionModifier:u.ActionModifier.Complete,duration:f,data:yt(r.data)}),f}function a(n){ut?u.trace(n):w.invokeRpc(p,v,n)}function tt(n,t,i){return i.reduce((function(i,r){return it(n,t,r.entry)>=it(n,t,i.entry)?r:i}),{})}function it(n,t,i){return!i||!i[n]||!i[t]?0:i[t]-i[n]}function at(n){return n.reduce((function(n,t){return n&&n.queueTime>
t.queueTime?n:t}),null)}function vt(n){return f(n.startTime,n.redirectStart)+f(n.redirectEnd,n.fetchStart)+f(n.fetchStart,n.domainLookupStart)+f(n.domainLookupEnd,n.connectStart)+f(n.connectEnd,n.requestStart)}function f(n,t){return n&&t?Math.max(0,t-n):0}function yt(n){for(var t={},i=n;i&&i!==Object;)Object.keys(i).forEach((function(n){t[n]=undefined})),i=Object.getPrototypeOf(i);return k(t,(function(i){var r=n[i];typeof r!="function"?t[i]=r:delete t[i]})),t}function pt(){a({source:s,action:"CdnIndex",name:String(b.cdn.index)})}var e=MsPortalFx,o=e.Base,v=o.Constants.Shell,y=o.Diagnostics,u=y.Telemetry,p=n.Constants.RpcMethods.networkTelemetry,w=o.Rpc.Internal.client,s="Framework",rt="NetworkPerformance",r=window,b=r.fx.environment,ut=b.extensionName===v,h=r.fx.getTimestamp,ft=new y.Log("MsPortalFx/Base/Internal/Diagnostics/Net"),k=e.forEachKey,et=3e5,c=0,d=Date.now,l,g;t.tryCreateTelemetry=ot;t.resetTelemetryTimer=st;l=(function(){function n(n){this._settings=n;this._startTime=h()}return n.
prototype.success=function(n){this._result(n,u.ActionModifier.Complete,h()-this._startTime)},n.prototype.error=function(n){this._result(n,u.ActionModifier.Cancel,h()-this._startTime)},n.prototype._result=function(n,t,i){var r=n.getResponseHeader("Content-Length"),u=r?parseInt(r,10):-1;a({timestamp:d(),source:s,action:rt,actionModifier:t,name:this._settings.url,duration:i,data:{status:n.status,dataSent:this._size(this._settings.data),dataReceived:u},optional:!0})},n.prototype._size=function(n){return n?typeof n=="string"?n.length:-1:0},n})();t.NetworkTelemetry=l;t.registerTelemetrySubmissionHandler=ht;t.traceResourceDownloads=ct;g="Redirect_InitialTiming";t.traceDocumentNavigation=lt;t.traceCdnIndex=pt})(t=n.NetDiagnostics||(n.NetDiagnostics={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function ni(){return h=(h+1)%10}var u=n,y=u.Helpers,s=FxImpl.Extension,i=u.Base,tt=i.Rpc.Internal,it=FxImpl.NetDiagnostics,p=i.Utilities,e=y.Deferred,c=u.isUndefined,rt=u.isEmpty,
w=ko.computed,ut=ko.observable,l=p.extend,b=window,r=b.fx.environment,ft="Accept-Language",et="Authorization",k="Cache-Control",a="x-ms-cache-tag",ot="x-ms-effective-locale",st="x-ms-extension-flags",ht="x-ms-failure-cause",ct="x-ms-force-login",lt="x-ms-path-query",at="Pragma",d="x-ms-client-request-id",vt="x-ms-client-session-id",yt="x-ms-version",pt="x-ms-version-mismatch",wt="x-ms-command-name",bt=60,kt=u.getUniqueIdGenerator(),dt="Failed to get authorization token.",o=new i.Diagnostics.Log("MsPortalFx/Base/Base.Net"),g=y.ajax,gt=!1,v=o.error.bind(o),nt=g,h=-1,f,ti;(function(t){function ei(n){var i=n.getResponseHeader(at),t;return i===ti?!0:(t=n.getResponseHeader(k)||"",t.indexOf(ti)>=0)?!0:!1}function ui(n){if(!n)return!0;var t=n.status;return t===500||t===0?!0:[401,403,502,503,504].indexOf(t)>=0&&n.getAllResponseHeaders().indexOf("x-ms-")<0}function y(n,t,i){c(n[t])&&(n[t]=i)}function oi(){s.getRuntime().disableAjaxServerVersionCheck()}function si(n){n||o.error("setAjaxLogFunc: Invalid arg!");
v=n}function hi(n){nt=n||g}function fi(n,t){n.contentType="application/json";n.data=JSON.stringify(t);n.type="POST"}function li(n,t){return f.postJSON(n,t)}function ai(n){return f.ajax(n)}function vi(n){return f.ajaxExtended(n)}function yi(){return f}function pi(n){return f.cachedAjax(n)}function wi(n){n&&delete n[a]}function bi(n,t){return l(n,{"x-ms-cache-tag":t})}function ki(n){f.initialize(r.version,n,r.extensionFlags,r.effectiveLocale,r.traceAjaxErrors)}function di(){f.skipVersionCheck=!0}var ii,ri,ti,ci,f;(function(n){n[n.Continue=100]="Continue";n[n.SwitchingProtocols=101]="SwitchingProtocols";n[n.Ok=200]="Ok";n[n.Created=201]="Created";n[n.Accepted=202]="Accepted";n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation";n[n.NoContent=204]="NoContent";n[n.ResetContent=205]="ResetContent";n[n.PartialContent=206]="PartialContent";n[n.Ambiguous=300]="Ambiguous";n[n.MultipleChoices=300]="MultipleChoices";n[n.Moved=301]="Moved";n[n.MovedPermanently=301]="MovedPermanently";n[
n.Found=302]="Found";n[n.Redirect=302]="Redirect";n[n.RedirectMethod=303]="RedirectMethod";n[n.SeeOther=303]="SeeOther";n[n.NotModified=304]="NotModified";n[n.UseProxy=305]="UseProxy";n[n.Unused=306]="Unused";n[n.RedirectKeepVerb=307]="RedirectKeepVerb";n[n.TemporaryRedirect=307]="TemporaryRedirect";n[n.BadRequest=400]="BadRequest";n[n.Unauthorized=401]="Unauthorized";n[n.PaymentRequired=402]="PaymentRequired";n[n.Forbidden=403]="Forbidden";n[n.NotFound=404]="NotFound";n[n.MethodNotAllowed=405]="MethodNotAllowed";n[n.NotAcceptable=406]="NotAcceptable";n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired";n[n.RequestTimeout=408]="RequestTimeout";n[n.Conflict=409]="Conflict";n[n.Gone=410]="Gone";n[n.LengthRequired=411]="LengthRequired";n[n.PreconditionFailed=412]="PreconditionFailed";n[n.RequestEntityTooLarge=413]="RequestEntityTooLarge";n[n.RequestUriTooLong=414]="RequestUriTooLong";n[n.UnsupportedMediaType=415]="UnsupportedMediaType";n[n.RequestedRangeNotSatisfiable=416]="RequestedRangeNotSatisfiable";
n[n.ExpectationFailed=417]="ExpectationFailed";n[n.UpgradeRequired=426]="UpgradeRequired";n[n.InternalServerError=500]="InternalServerError";n[n.NotImplemented=501]="NotImplemented";n[n.BadGateway=502]="BadGateway";n[n.ServiceUnavailable=503]="ServiceUnavailable";n[n.GatewayTimeout=504]="GatewayTimeout";n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported"})(ii||(ii={}));t.HttpStatusCode=ii;ri=3;ti="no-cache";t.disableAjaxServerVersionCheck=oi;t.setAjaxLogFunc=si;t.setAjaxFunc=hi,(function(t){function ii(n){return i.Net2.ajaxExtended(n)}function oi(){f=new t.AjaxCaller}var w,g,at;FxImpl.GlobalStateManager.register({reset:function(){t.environment={retryDelay:400}}});t.ajaxExtended=ii;w=(function(){function f(){this.ajaxStatus=ut({code:0});this.unknownErrorStatusCode=0;this.initialized=e();this.unknownErrors=0;this.backgroundTaskSingleton=e()}return f.prototype.initialize=function(n,t,i,f,e){var l=this,o,c;this.version=n;o=this.backgroundTaskSingleton;o.resolve(),(function(){var n=o;b.
setInterval((function(){n===o&&o.resolve()}),6e4)})();h=-1;c=f&&f.split(".");this.acceptLanguage=c&&c[0];this.effectiveLocale=f;this.currentGetAuthTokenFunc=t;rt(i)||(this.extensionFlagsValue=JSON.stringify(i));this.traceAjaxErrors=e;r.useFxArmEndpoint?s.getArmEndpointEndPoint.invoke(tt.client,s.getHubsWindowId(),undefined).then((function(n){l.armEndpoint=u.ensureSuffix(n,"/");l.initialized.resolve()})):this.initialized.resolve()},f.prototype.postJSON=function(n,t){return fi(n,t),this.ajax(n)},f.prototype.oldPostJSON=function(n,t){return fi(n,t),this.oldAjax(n)},f.prototype.ajaxExtended=function(n){return this._executeAjaxCall(n,new g)},f.prototype.oldAjax=function(n){return this._executeAjaxCall(n,new at)},f.prototype.ajax=function(n){var t=this.ajaxExtended(n),i=t.inspect();return i.state==="fulfilled"?Q(i.value.content):t.then((function(n){return n.content}))},f.prototype._executeAjaxCall=function(t,u){var f=this,l,o,h,v,a;return(t.url=t.uri||t.url,l={retryCount:t.performRetry?4:0},t.useRawAjax)?
(this._worker(t,l,u),u.getPromise()):(o=!n.isUriAbsolute(t.url),c(t.setAuthorizationHeader)&&(t.setAuthorizationHeader=o),c(t.checkVersion)&&(t.checkVersion=o,this.skipVersionCheck&&(t.checkVersion=!1)),h=this.initialized.promise(),t.isBackgroundTask&&(h=h.then(this.backgroundTaskSingleton.promise),v=this.backgroundTaskSingleton=e(),u.finally((function(){v.resolve()}))),a=function(){var e=function(n){var e=t.headers||{},c,a,v;if(t.setAuthorizationHeader&&(e[et]=n),t.setTelemetryHeader&&(e[wt]=t.setTelemetryHeader.substring(0,bt)),c=f.acceptLanguage,c&&y(e,ft,c),t.invokeApi){var p=f.armEndpoint,s=void 0,h=void 0;p&&o?(s=new i.UriBuilder(p),h=encodeURI(t.url)):(s=new i.UriBuilder(t.url),s.query.clear(),h=encodeURI(s.getRelativePath()+s.getOriginalQuery()));s.setRelativePath(t.invokeApi);s.query.setParameter("_",ni());gt&&s.query.setParameter("uri",h);t.url=s.toString();t.uri=t.url;y(e,lt,h)}y(e,ot,f.effectiveLocale);y(e,d,kt());y(e,vt,r.sessionId);a=f.version;t.checkVersion&&a&&y(e,yt,a);v=
f.extensionFlagsValue;o&&v&&(e[st]=v);t.headers=e;f._worker(t,l,u)},n;t.setAuthorizationHeader?(n=void 0,t.cloudName=t.cloudName||s.selfCloudName,n=t.setAuthorizationHeader===!0?{cloudName:t.cloudName}:{resourceName:t.setAuthorizationHeader.resourceName,cloudName:t.cloudName},f.currentGetAuthTokenFunc(n).then((function(n){e(n)}),(function(n){u.reject(dt,n,null)}))):e(null)},h.state()==="resolved"?a():h.then(a),u.getPromise())},f.prototype.cachedAjax=function(n){return n.headers=l({"x-ms-cache-tag":'"0"'},n.headers),this.ajaxExtended(n).then((function(n){var r=n.content,i=n.textStatus,t=n.jqXHR;return{cachedAjax:!0,data:r,modified:i==="success",textStatus:i,cacheTagValue:t.status===200?t.getResponseHeader(a):null,jqXHR:t}}))},f.prototype.oldCachedAjax=function(n){var t=e();return n.headers=l({"x-ms-cache-tag":'"0"'},n.headers),this.oldAjax(n).then((function(n,i,r){t.resolve({cachedAjax:!0,data:n,modified:i==="success",textStatus:i,cacheTagValue:r.status===200?r.getResponseHeader(a):null,jqXHR:
r},i,r)}),(function(n,i,r){t.reject(n,i,r)})),t.promise()},f.prototype._worker=function(n,i,u){var f=this,s,e;this.shouldStall||(s=it.tryCreateTelemetry(n),e=nt(n),e.always((function(){if(n.checkVersion&&ei(e)){var h=e.getResponseHeader(pt);h&&(o.warning("'{0}' with version '{1}' is not accepting requests from clients with version '{2}'".format(n.uri,h,f.version)),f._stall(1,h))}if(e.getResponseHeader(ct)&&f.ajaxStatus({code:2,message:"Received logged out header from server."}),!f.shouldStall)switch(e.state()){case"resolved":s&&s.success(e);f.unknownErrors&&(f.unknownErrors=0,f.ajaxStatus({code:0}));e.then((function(n,t,i){u.resolve(n,t,i)}));break;case"rejected":s&&s.error(e);e.status===f.unknownErrorStatusCode&&(f.unknownErrors++,f.unknownErrors>=ri&&(f.unknownErrors=0,f.ajaxStatus({code:4,message:n.uri})));e.then(null,(function(s,h,c){var a,l,y;f.traceAjaxErrors&&e.status>=500&&(a={uri:n.uri,requestId:n.headers[d],sessionId:r.sessionId},v&&v(s,0,a));i.retryCount>0&&ui(s)?(i.retryCount--,Q.
delay(t.environment.retryDelay).then((function(){f._worker(n,i,u)}))):e.status===403&&n.skipRetryOnForbidden!==!0&&(e.getResponseHeader(ht)||"").toLowerCase()==="gateway"?(l=p.clone(n,!0),l.skipRetryOnForbidden=!0,l.headers=l.headers||{},l.headers[k]=ti,f._worker(l,i,u)):(n.performRetry&&(y=s.status||s.readyState?2:1,o.writeEntry(y,"Retryable ajax call failed after several attempts",0,[n.uri,n.type||"GET",s.status,s.statusText,ui(s)])),n.detailedError?u.reject(h,{error:c,responseText:e.responseText},s):u.reject(h,c,s))}))}})))},f.prototype._stall=function(n,t){this.shouldStall=!0;this.ajaxStatus({code:n,message:t})},f})();t.AjaxCaller=w;g=(function(){function n(){var n=Q.defer();this.resolve=function(t,i,r){n.resolve({content:t,jqXHR:r,textStatus:i})};this.reject=function(t,i,r){var u={jqXHR:r,textStatus:t,errorThrown:i};n.reject(u)};this.getPromise=function(){return n.promise};this.finally=function(t){n.promise.finally(t)}}return n})();at=(function(){function n(){var n=e();this.resolve=function(
t,i,r){n.resolve(t,i,r)};this.reject=function(t,i,r){n.reject(r,t,i)};this.getPromise=function(){return n.promise()};this.finally=function(t){n.promise().finally(t)}}return n})();t.reset=oi})(ci=t.Internal||(t.Internal={}));f=new t.Internal.AjaxCaller;t.postJSON=li;t.ajax=ai;t.ajaxExtended=vi;t.getSingleton=yi;t.cachedAjax=pi;t.invalidateCacheHeader=wi;t.setCacheHeader=bi;t.initialize=ki;t.status=w((function(){return f.ajaxStatus()}));t.disableVersionCheck=di;$.support.cors=!0;$.ajaxTransport("+binary",(function(n,t,i){if(n.dataType&&n.dataType==="binary")return{send:function(t,i){var r=new XMLHttpRequest,f=n.url,e=n.type,o=n.data||null,u;r.addEventListener("load",(function(){var t={};t[n.dataType]=r.response;i(r.status,r.statusText,t,r.getAllResponseHeaders())}));r.open(e,f,!0);r.responseType="blob";for(u in t)r.setRequestHeader(u,t[u]);r.send(o)},abort:function(){i.abort()}}}))})(f=t.Net2||(t.Net2={})),(function(n){function r(n,i){return t.oldPostJSON(n,i)}function u(n){return t.oldAjax(n)}function e(
n){return t.oldCachedAjax(n)}n.HttpStatusCode=f.HttpStatusCode;n.disableAjaxServerVersionCheck=i.Net2.disableAjaxServerVersionCheck;var t=i.Net2.getSingleton();n.postJSON=r;n.ajax=u;n.cachedAjax=e;n.invalidateCacheHeader=f.invalidateCacheHeader;n.setCacheHeader=f.setCacheHeader;n.initialize=f.initialize;n.status=w((function(){return t.ajaxStatus()}));n.disableVersionCheck=f.disableVersionCheck})(ti=t.Net||(t.Net={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=n.Base,u=r.Net2,i=window,f=10,e=1e3,o=(function(){function t(n,t,r,u,o){function y(n,t){u&&h&&(i.clearTimeout(h),h=null);b()?v(!0,!!t):h||(h=i.setTimeout((function(){h=null;v(!0,!!t)}),n||p))}function w(){c||h&&!b()||y(k,!0)}function v(i,r){if((s.length||r&&l.length)&&!c){var u=n(l,s);s=[];l=[];c=!0;a=Q(t(u)).then(null,(function(t){if(i)return s=n(u,s),c=!1,v(!1,r);throw t;})).finally((function(){c=!1;y()}))}else l.length&&!c&&w();return a}function b(){return s.length+l.length>=d}
o=o||{};var p=r||0,k=o.optionalDataInterval||p*f+1,d=o.maxBatchSize||e,h;u=!!u;var c=!1,s=[],l=[],a=Q();this.execute=function(t,i){i?(l=n(l,t),w()):(s=n(s,t),c||y())};this.flush=function(){return s.length?a.then((function(){return v(!1,!1)})):a}}return t.getMergeIntoArrayDataMerger=function(){return n.merge},t.getPostArrayExecutor=function(n){return function(t){if(Array.isArray(t)&&t.length)return u.postJSON({uri:n.uri,headers:n.headers,isBackgroundTask:!!n.isBackgroundTask,setAuthorizationHeader:!!n.setAuthHeader,collectTelemetry:!!n.collectTelemetry},t)}},t})();t.Debouncer=o})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function e(n,f,e,o,s){function a(n){return function(i){return t.getPostArrayExecutor({uri:n,headers:l,isBackgroundTask:!c,setAuthHeader:!0,collectTelemetry:f})(i)}}var c=0,l,h;return o=o||r,s=s||u,f=!!f,l={"x-ms-client-version":i.version,"x-ms-client-query":JSON.stringify(i.query),"x-ms-extension-name":e,"x-ms-time-zone-offset":(new Date).
getTimezoneOffset()+""},i.isDevelopmentMode&&(l["x-ms-client-settings"]="devmode"),h=new t(t.getMergeIntoArrayDataMerger(),a(n),o,!0,{maxBatchSize:s}),{execute:function(n,t){h.execute(n,t)},flush:function(){var n=h.flush();return Q.isPending(n)?(c++,h.flush().finally((function(){c--}))):n}}}var t=MsPortalFx.Base.Debouncer,r=1e4,u=2e3,f=window,i=f.fx.environment;n.getStandardDebouncer=e})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function e(n){return function(){return n}}function ht(n,t){return t=t||!1,g.initialize(n,t,[])}function ct(n){l.invokeRpc(h.RegisterExtension,a,undefined);l.registerRpcEndPoint(h.TraceTelemetry,{allowedOrigin:[a],handler:function(t){n?n.trace(t):nt(t)}})}function nt(n){i.trace(n)}function lt(n){return i.start(n)}function at(n){return i.startTrace(n)}function vt(n,t){return i.endTrace(n,!1,t)}function yt(n,t){return i.endTrace(n,!0,t)}function pt(n,t,r){return i.endTrace(n,t,r)}function wt(n){i.resetTrace(
n)}function bt(){return i.flush()}function kt(n){i.telemetryEventProcessors.push(n)}function o(t){var i={timestamp:et(),data:v(t.data)};return n.shallowCopyFromObject(i,t,["source","action","actionModifier","assetType","duration","extension","name","journeyId","optional"]),i}var u=n.Base,s=u.Constants,h=s.TelemetrySharing,tt=u.Stopwatch.TelemetryStopwatch,c=n.isNullOrUndefined,it=u.Diagnostics,rt=FxImpl.TelemetryContext,ut=n.Helpers.resolve(),r=n.noop,f=window.fx.environment,l=u.Rpc.Internal.client,ft=new it.Log("MsPortalFx.Base.Diagnostics.Telemetry"),a=s.Shell,et=Date.now,v=JSON.stringify,ot=f.features.canmodifyextensions==="true",y="start",p="complete",w="reset",b="cancel",k="mark",st,d,i,g;(function(n){n.Start=y;n.Complete=p;n.Reset=w;n.Cancel=b;n.Mark=k})(st=t.ActionModifier||(t.ActionModifier={}));d=(function(){function n(n){function f(n){var t=rt.getCurrentValues();c(t)||(n.context=v(t))}function u(t){n.forEach((function(n){try{t(n)}catch(i){ft.error(i)}}))}function e(n,t,r){var u=
o(n._evt);return u.actionModifier=t,u.duration=n._watch.millisecondsElapsed,r=r||i,r(u),u.duration}function s(n){n._evt.duration=0;n._watch.reset()}function a(n){e(n,w);s(n)}function h(n){return function(i){i=o(i);var f=l++,r="telemetry_"+f,u={_evt:i,_watch:new tt};return i.actionModifier=y,s(u),t[r]=u,n(i),r}}var t={},l=1,i=ot?r:function(n){u((function(t){t.trace(n)}))};this.telemetryEventProcessors=n;this.trace=function(n){var t=n.timestamp;n=o(n);n.actionModifier=n.actionModifier||k;n.timestamp=t||n.timestamp;f(n);i(n)};this.start=h(r);this.startTrace=h(i);this.endTrace=function(n,r,u){var o=t[n],s;if(o)return typeof r=="boolean"&&(r=r?p:b),s=e(o,r,(function(n){c(u)||(n.data=u);f(n);i(n)})),delete t[n],s};this.resetTrace=function(n){var i=t[n];i&&a(i)};this.traceBrowserInfo=function(){u((function(n){n.traceBrowserInfo()}))};this.flush=function(){var n=[],t;return u((function(t){n.push(t.flush())})),t=n.every((function(n){return!Q.isPending(n)})),t?Q():Q.all(n)}}return n})();i={telemetryEventProcessors:
[],trace:r,start:e(""),startTrace:e(""),endTrace:e(0),resetTrace:r,traceBrowserInfo:r,flush:e(ut)};t.initialize=ht;t.registerForShellTelemetry=ct,(function(t){function r(t,r,u){var s=i.telemetryEventProcessors,e=f.extensionTelemetryUri,o;return f.enablePortalLogging&&e||(e=f.telemetryUri),o=u&&u.length?u:[n.Services.getTelemetryEventProcessor(e,t)],i=new d(o),r&&i.traceBrowserInfo(),s}t.initialize=r})(g=t.Internal||(t.Internal={}));t.trace=nt;t.start=lt;t.startTrace=at;t.cancelTrace=vt;t.completeTrace=yt;t.endTrace=pt;t.resetTrace=wt;t.flush=bt;t.addProcessor=kt})(i=t.Telemetry||(t.Telemetry={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t,i,r){t.activatedItems.subscribeArrayChanges(n,i,r)}function r(n,t,i){return $.extend({source:n,action:t},i)}function i(t,i,u){return function(f){n.trace(r(t,i,u(f)))}}function u(n,r,u,f,e,o){t(n,r,i(u,f,o),i(
u,e,o))}n.addActivatedItemsWatcher=t;n.addActivatedItemsTelemetryWatcher=u})(t=n.Telemetry||(n.Telemetry={}))})(t=n.Diagnostics||(n.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){if(n){var t=e.location.search;t&&n.indexOf("?")===-1&&(n+=t);r=FxImpl.getStandardDebouncer(n,!0,i.extensionName);u._setBufferFullCallback((function(n){return r.execute(n),[]}))}else u._setBufferFullCallback((function(){return[]}))}function h(){}function c(){return u.flush(),r?r.flush():Q()}var s=n.Base,e=window,i=e.fx.environment,u=s.Diagnostics.Log,f=i.extensionTraceUri,r;t.initialize=o;t.upload=h;t.flush=c;i.enablePortalLogging&&f||(f=i.clientTraceUri);o(f)})(i=t.Upload||(t.Upload={}))})(i=t.Diagnostics||(t.Diagnostics={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t;(function(t){var i;(function(t){function u(n,t){throw new Error(n.format(t));}function e(
n,t,i){return n.substr(t,i)}function ht(n){var t,r,o,f,e,i;l={};for(t in n)if(n.hasOwnProperty(t)){for(r=t.split("_"),o=r.length,i=l,e=0;e<o-1;e++)f=r[e],f||u("Resource key '{0}' is not in the correct format.",t),i=i[f]=i[f]||{};i[r[o-1]]=n[t]}}function nt(n){return w.getResources("MsPortalFx.Resources."+n)||{}}function tt(n,t){var r,u;n||(n=o.fx.environment);d=n.applicationPath;h=n.contentUriBasePath||i;c=n.contentVersionToken||"";g=(n.versionedContentRoots||[]).map((function(n){return s(n.toLowerCase(),i)}));w&&(t=t||nt("Strings"),r=nt("Regions"),r.formats&&y.setLocaleValues&&y.setLocaleValues(r.formats));u=[];n.isRtl&&u.push("rtl=true");f=u.join("&");ht(t||{})}function ct(n,t){var i={};return k(n,(function(n,r){typeof r=="string"&&(i[n]=t(r))})),i}function lt(n){return ct(n,(function(n){return it(r(ot,n))}))}function at(n){n||u("Control must be specified.");for(var r=n.split("."),f,t=l,i=0;i<r.length;i++)f=r[i],t=t[f],t||u("Control {0} is not recognized.",n);return et.clone(t,!0)}function r(
){for(var f,r,h,c=[],u=0;u<arguments.length;u++)c[+u]=arguments[u];var l=arguments.length,n="",o=!1;for(f=0;f<l;f++)r=arguments[f],r&&(n&&(r=s(r,i),n+=i),h=r.length-1,o=r[h]===i,o&&(r=e(r,0,h)),n+=r);return o&&(n+=i),t.isUriAbsolute(n)||n[0]===i||(n=i+n),n}function a(n,o,l){var a,v;return n=s(n,i),v=n.toLowerCase(),g.forEach((function(n){if(!a&&v.startsWith(n)){var t=n.length;(v.length===t||v[t]===i)&&(a=t)}})),o===1||o===2?(t.isUriAbsolute(n)&&u("The '{0}' URI is not a valid content URI because it is an absolute URI.",n),a||u("The '{0}' URI is an application relative URI. However a content URI was expected. Did you mean to call getAppRelativeUri?",n),c!==""&&(n=r(e(n,0,a),c,e(n,a))),o===2&&f&&(n+=n.indexOf("?")>0?"&"+f:"?"+f),n=r(h,n)):t.isUriAbsolute(n)||(a&&u("The '{0}' URI is a content URI. However an application relative URI was expected. Did you mean to call getContentUri?",n),n=r(d,n)),l&&!t.isUriAbsolute(n)&&(n=r(p,n)),n}function it(n,t){return t===void 0&&(t=!0),a(n,2,t)}function vt(
n){return a(n,1,!1)}function yt(n){return a(n,0,!1)}function rt(n,i){return i===void 0&&(i=!0),n=n||"",t.isUriAbsolute(n)||(n=r(h,n),i&&!t.isUriAbsolute(n)&&(n=r(p,n))),n}function pt(n){var t=n.lastIndexOf(".");return t!==-1?e(n,0,t):n}function ft(n,t,r,u){var f=t[r];return f||(t[r]=f={}),n.forEach((function(n){if(typeof n=="string"){var r=pt(n);f[r]=ut+u+"_"+n}else k(n,(function(n,r){ft(r,t,n,u+i+n)}))})),t}function wt(n,t){var i=v.get(n);return i||(i=ft(n,{},"",""),v.set(n,i)),i[t]}var et=n.Base.Utilities,o=window,y=Date,p="//"+o.location.host,w=o.Resources,i="/",b="Content/",ot=b+"Images",st=b+"Static",k=n.forEachKey,s=n.trimStart,d,h,c,g=[],f,l={},ut,v;t.initialize=tt;t.getImages=lt;t.getStrings=at;t.isUriAbsolute=n.isUriAbsolute;t.getContentUri=it;t.getScriptUri=vt;t.getAppRelativeUri=yt;t.getVersionlessContentUri=rt;tt();ut=rt(r(st,i));v=new n.Map;t._getImageMap=wt})(i=t.Resources||(t.Resources={}))})(t=n.Base||(n.Base={}));n.getImages=t.Resources._getImageMap})(MsPortalFx||(MsPortalFx=
{})),(function(n){"use strict";function i(n){if(t)throw new Error(n);}function s(n,t){if(typeof n.dispose=="function")t&&n.dispose();else if(typeof n=="function")t&&n();else return!1;return!0}var u=window.fx.environment,f=u.isDevelopmentMode,e=u.trace,o=e?e.lifetime:!1,t=f||o,r=f&&o,h=(function(){function n(){var n=this;this._disposables=[];this._isDisposed=!1;this._isDisposing=!1;this._container=null;this._children=[];this._failToDispose=[];this.registerForDispose=function(t){var i;return i=Array.isArray(t)?t:[t],i.forEach((function(t){n._registerForDispose(t)})),n};r&&(this._diagnosticCreateStack=MsPortalFx.Base.Utilities.getCurrentCallStack(!0))}return n.setDevMode=function(n){t=n},n.setDiagnosticMode=function(n){n?(t=!0,r=!0):r=!1},n.prototype.isDisposed=function(){return this._isDisposed},n.prototype.createChildLifetime=function(){var t=new n;return t._container=this,this._children.push(t),t},n.prototype.dispose=function(){var u=this,n=[],r;this._isDisposed||(this._isDisposed=!0,this.
_isDisposing=!0,[this._disposables,this._children].forEach((function(i){while(i.length){var r=i.pop();try{s(r,!0)}catch(f){t&&(n.push(f),u._failToDispose.push(r))}}})),n.length&&i("error to disposing this lifetimeManager. Exceptions: "+n.map((function(n){return n.toString()})).join("\n")),r=this._container,r&&(this._container=null,r._unregisterChildForDispose(this)),this._isDisposing=!1)},n.prototype._unregisterChildForDispose=function(n){var t=this._children,r;this._isDisposing||(r=t.lastIndexOf(n),r<0?i("lifetime Manager internal error.  this._unregisterChildForDispose is called but the disposeable is not one of the child it created."):r===t.length-1?t.pop():t.splice(r,1))},n.prototype._isRegistered=function(n){return this._disposables.lastIndexOf(n)>=0||this._children.lastIndexOf(n)>=0},n.prototype._registerForDispose=function(n){var r=!this._isDisposed;n?s(n,!r)||(i("disposable must have a dispose method or be a function."),r=!1):r=!1;t&&this._isRegistered(n)&&i("Unable to add this disposable to LifetimeManager. This disposable is already included in the LifetimeManager.");
r&&this._disposables.push(n)},n})();n.TriggerableLifetimeManager=h})(FxImpl||(FxImpl={})),(function(n){"use strict";function h(n,i){return f(n)?n:r(t(n,i))}function c(n,i){return f(n)?n:u(t(n,i))}var i=n.isNullOrUndefined,o=ko.computed,r=ko.observable,u=ko.observableArray,f=ko.isObservable,e=ko.utils.peekObservable,s,t;(function(t){function c(n,t){var i=u(),r=o((function(){i(t())}));return i.dispose=r.dispose.bind(r),n.registerForDispose(i),i}function p(n,t,i){var r=n.charCodeAt(0);return s[n]||(s[n]="&#"+(t?0:i?(r-a)*1024+n.charCodeAt(1)-v+y:r)+";")}function w(n){return h(n)}function h(n){return i(n)?"":String(n).replace(l,p)}function b(t){for(var s=new n.Map,u=[[t]],f,e,r,i,o;u.length;)for(f=u.pop(),e=Object.keys(f),r=0;r<e.length;r++){if(i=f[e[r]],o=typeof i,o==="function"||i instanceof Error||i instanceof Node||i===document.all)return!1;i&&o==="object"&&!s.has(i)&&(s.set(i,!0),u.push(i))}return!0}function k(n,t){n=e(n);t=e(t);var u=!i(n),r=!i(t);if(u&&r){if(n.localeCompare)return n.localeCompare(
t);n=+n;t=+t;u=!isNaN(n);r=!isNaN(t)}return u?r?n-t:-1:r?1:0}var f;t.thunkArray=c;f=(function(){function n(n){var t=r(0),i=n?n:{rateLimit:30};t.extend(i);this._value=t}return Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n.prototype.touch=function(){this._value(this._value.peek()+1&65535)},n})();t.KnockoutDelayTrigger=f;var l=/[`><"'&\t\n\r\xa0-\xff]|([\x00-\x1f\x7f\x80-\x9f])|([\ud800-\udbff][\udc00-\udfff])/g,s={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&#34;","`":"&#96;"},a=55296,v=56320,y=65536;t.encodeAttribute=w;t.encodeHtml=h;t.canSendThroughPostMessage=b;t.compare=k;t.initValue=n.initValue;t.initObservable=n.initObservable;t.initObservableBase=n.initObservable;t.initObservableArray=n.initObservableArray})(s=n.Util||(n.Util={}));t=function(t,i){return n.isUndefined(t)?i:t};n.initValue=t;n.initObservable=h;n.initObservableArray=c})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function r(n,r){t.requirejs.
config(n);r&&MsPortalFx.Base.Utilities.extend(i.environment.fxRequireConfig,r)}var t=window,i=t.fx;n.setupRequire=r})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function s(t){var i=c[t];return n.isNullOrUndefined(i)?null:"#"+i.substr(f.length)}function h(n){return i[n]}function w(n){var t=n.length,i=f.length;if(t===e)return n;if(t===e+1){if(n[0]==="#")return n.substr(1)}else if(t===e+i&&n.substr(0,i)===f)return n.substr(i);return null}function b(t){var r=w(t),i;return!n.isNullOrUndefined(r)&&(i=c[f+r],!n.isNullOrUndefined(i))?i:null}function k(t){return n.isNullOrUndefined(t)?0:t.length>=e?b(t):i[t]}function rt(t,i){var u=k(t),r;return n.isNullOrUndefined(u)?null:(r=d(u),i?r.map(s):r.map(h))}function d(n){return n=n%g,it[n]}function ut(){if(n.isNullOrUndefined(u)){var t=0;for(u=new Array(33),t=0;t<u.length;t++)u[t]=t}return u}function r(t,i){var u=new Array(t&&t.length),f=t.length,r,e=n.isNullOrUndefined(i)?0:i;if(i){for(r=0;r<f;r++)u[r]=t[(r+e)%f];return u}return t}
function v(n){return r(nt,n)}function y(n){return r(tt,n)}function ft(t){return n.isNullOrUndefined(l)&&(l=v().map(h)),r(l,t)}function et(t){return n.isNullOrUndefined(a)&&(a=v().map(s)),r(a,t)}function ot(t){return n.isNullOrUndefined(o)&&(o=y().map(h)),r(o,t)}function st(t){return n.isNullOrUndefined(p)&&(p=y().map(s)),r(o,t)}var f="Hex_",e=6,c;(function(n){n[n.Hex_fcd116=0]="Hex_fcd116";n[n.Hex_eb3c00=1]="Hex_eb3c00";n[n.Hex_ba141a=2]="Hex_ba141a";n[n.Hex_b4009e=3]="Hex_b4009e";n[n.Hex_442359=4]="Hex_442359";n[n.Hex_002050=5]="Hex_002050";n[n.Hex_0072c6=6]="Hex_0072c6";n[n.Hex_008272=7]="Hex_008272";n[n.Hex_007233=8]="Hex_007233";n[n.Hex_7fba00=9]="Hex_7fba00";n[n.Hex_a0a5a8=10]="Hex_a0a5a8";n[n.Hex_fff100=11]="Hex_fff100";n[n.Hex_ff8c00=12]="Hex_ff8c00";n[n.Hex_e81123=13]="Hex_e81123";n[n.Hex_ec008c=14]="Hex_ec008c";n[n.Hex_68217a=15]="Hex_68217a";n[n.Hex_00188f=16]="Hex_00188f";n[n.Hex_00bcf2=17]="Hex_00bcf2";n[n.Hex_00b294=18]="Hex_00b294";n[n.Hex_009e49=19]="Hex_009e49";n[n.Hex_bad80a=
20]="Hex_bad80a";n[n.Hex_bbc2ca=21]="Hex_bbc2ca";n[n.Hex_fffc9e=22]="Hex_fffc9e";n[n.Hex_ffb900=23]="Hex_ffb900";n[n.Hex_dd5900=24]="Hex_dd5900";n[n.Hex_f472d0=25]="Hex_f472d0";n[n.Hex_9b4f96=26]="Hex_9b4f96";n[n.Hex_4668c5=27]="Hex_4668c5";n[n.Hex_6dc2e9=28]="Hex_6dc2e9";n[n.Hex_00d8cc=29]="Hex_00d8cc";n[n.Hex_55d455=30]="Hex_55d455";n[n.Hex_e2e584=31]="Hex_e2e584";n[n.Hex_d6d7d8=32]="Hex_d6d7d8";n[n.Hex_807900=33]="Hex_807900";n[n.Hex_804600=34]="Hex_804600";n[n.Hex_740912=35]="Hex_740912";n[n.Hex_760046=36]="Hex_760046";n[n.Hex_34113d=37]="Hex_34113d";n[n.Hex_000c48=38]="Hex_000c48";n[n.Hex_005e79=39]="Hex_005e79";n[n.Hex_084c41=40]="Hex_084c41";n[n.Hex_063d20=41]="Hex_063d20";n[n.Hex_3d460a=42]="Hex_3d460a";n[n.Hex_32383f=43]="Hex_32383f";n[n.Hex_bfb500=44]="Hex_bfb500";n[n.Hex_bf6900=45]="Hex_bf6900";n[n.Hex_ae0d1a=46]="Hex_ae0d1a";n[n.Hex_b10069=47]="Hex_b10069";n[n.Hex_4e195c=48]="Hex_4e195c";n[n.Hex_00126b=49]="Hex_00126b";n[n.Hex_008db5=50]="Hex_008db5";n[n.Hex_00856f=51]="Hex_00856f";
n[n.Hex_0f5b2f=52]="Hex_0f5b2f";n[n.Hex_8ba208=53]="Hex_8ba208";n[n.Hex_464f59=54]="Hex_464f59";n[n.Hex_fcf37e=55]="Hex_fcf37e";n[n.Hex_ffba66=56]="Hex_ffba66";n[n.Hex_f1707b=57]="Hex_f1707b";n[n.Hex_f466ba=58]="Hex_f466ba";n[n.Hex_a47aaf=59]="Hex_a47aaf";n[n.Hex_6674bc=60]="Hex_6674bc";n[n.Hex_66d7f7=61]="Hex_66d7f7";n[n.Hex_66d1bf=62]="Hex_66d1bf";n[n.Hex_66c592=63]="Hex_66c592";n[n.Hex_d6e86c=64]="Hex_d6e86c";n[n.Hex_8f9ca8=65]="Hex_8f9ca8";n[n.Hex_fffccc=66]="Hex_fffccc";n[n.Hex_ffe8cc=67]="Hex_ffe8cc";n[n.Hex_facfd3=68]="Hex_facfd3";n[n.Hex_fbcce8=69]="Hex_fbcce8";n[n.Hex_e1d3e4=70]="Hex_e1d3e4";n[n.Hex_ccd1e9=71]="Hex_ccd1e9";n[n.Hex_ccf2fc=72]="Hex_ccf2fc";n[n.Hex_ccf0ea=73]="Hex_ccf0ea";n[n.Hex_ccecdb=74]="Hex_ccecdb";n[n.Hex_f0f7b2=75]="Hex_f0f7b2";n[n.Hex_63707e=76]="Hex_63707e";n[n.max=77]="max"})(t.AllRawColorCode||(t.AllRawColorCode={}));c=t.AllRawColorCode,(function(n){n[n.a1=0]="a1";n[n.b1=1]="b1";n[n.c1=2]="c1";n[n.d1=3]="d1";n[n.e1=4]="e1";n[n.f1=5]="f1";n[n.g1=6]="g1";
n[n.h1=7]="h1";n[n.i1=8]="i1";n[n.j1=9]="j1";n[n.k1=10]="k1";n[n.a0=11]="a0";n[n.b0=12]="b0";n[n.c0=13]="c0";n[n.d0=14]="d0";n[n.e0=15]="e0";n[n.f0=16]="f0";n[n.g0=17]="g0";n[n.h0=18]="h0";n[n.i0=19]="i0";n[n.j0=20]="j0";n[n.k0=21]="k0";n[n.a2=22]="a2";n[n.b2=23]="b2";n[n.c2=24]="c2";n[n.d2=25]="d2";n[n.e2=26]="e2";n[n.f2=27]="f2";n[n.g2=28]="g2";n[n.h2=29]="h2";n[n.i2=30]="i2";n[n.j2=31]="j2";n[n.k2=32]="k2";n[n.a0s2=33]="a0s2";n[n.b0s2=34]="b0s2";n[n.c0s2=35]="c0s2";n[n.d0s2=36]="d0s2";n[n.e0s2=37]="e0s2";n[n.f0s2=38]="f0s2";n[n.g0s2=39]="g0s2";n[n.h0s2=40]="h0s2";n[n.i0s2=41]="i0s2";n[n.j0s2=42]="j0s2";n[n.k0s2=43]="k0s2";n[n.a0s1=44]="a0s1";n[n.b0s1=45]="b0s1";n[n.c0s1=46]="c0s1";n[n.d0s1=47]="d0s1";n[n.e0s1=48]="e0s1";n[n.f0s1=49]="f0s1";n[n.g0s1=50]="g0s1";n[n.h0s1=51]="h0s1";n[n.i0s1=52]="i0s1";n[n.j0s1=53]="j0s1";n[n.k0s1=54]="k0s1";n[n.a0t1=55]="a0t1";n[n.b0t1=56]="b0t1";n[n.c0t1=57]="c0t1";n[n.d0t1=58]="d0t1";n[n.e0t1=59]="e0t1";n[n.f0t1=60]="f0t1";n[n.g0t1=61]="g0t1";n[n.h0t1=
62]="h0t1";n[n.i0t1=63]="i0t1";n[n.j0t1=64]="j0t1";n[n.k0t1=65]="k0t1";n[n.a0t2=66]="a0t2";n[n.b0t2=67]="b0t2";n[n.c0t2=68]="c0t2";n[n.d0t2=69]="d0t2";n[n.e0t2=70]="e0t2";n[n.f0t2=71]="f0t2";n[n.g0t2=72]="g0t2";n[n.h0t2=73]="h0t2";n[n.i0t2=74]="i0t2";n[n.j0t2=75]="j0t2";n[n.k0t2=76]="k0t2";n[n.max=77]="max"})(t.ColorCode||(t.ColorCode={}));var i=t.ColorCode,g=11,l,a,o,p,u,nt=[i.a0,i.a1,i.b2,i.b0,i.c2,i.b1,i.c0,i.c1,i.d0,i.d1,i.e2,i.e0,i.e1,i.f1,i.f0,i.g1,i.g0,i.g2,i.h2,i.h0,i.h1,i.i1,i.i0,i.i2,i.j1,i.j0,i.j2,],tt=[i.g0,i.f0,i.e0,i.h0,i.i0,i.j0,i.a1,i.b1,i.c1,i.d1,i.e1,i.f1,i.g1,i.h1,i.i1,i.j1,i.b2,i.c2,i.e2,i.g2,i.h2,i.i2,i.j2,i.a0,i.b0,i.c0,i.d0,],it={0:[i.a0s2,i.a0s1,i.a0,i.a0t1,i.a0t2,],1:[i.b0s2,i.b0s1,i.b0,i.b0t1,i.b0t2,],2:[i.c0s2,i.c0s1,i.c0,i.c0t1,i.c0t2,],3:[i.d0s2,i.d0s1,i.d0,i.d0t1,i.d0t2,],4:[i.e0s2,i.e0s1,i.e0,i.e0t1,i.e0t2,],5:[i.f0s2,i.f0s1,i.f0,i.f0t1,i.f0t2,],6:[i.g0s2,i.g0s1,i.g0,i.g0t1,i.g0t2,],7:[i.h0s2,i.h0s1,i.h0,i.h0t1,i.h0t2,],8:[i.i0s2,i.i0s1,i.i0,i.i0t1,i.i0t2,
],9:[i.j0s2,i.j0s1,i.j0,i.j0t1,i.j0t2,],10:[i.k0s2,i.k0s1,i.k0,i.k0t1,i.k0t2,]};t.getRawColorString=s;t.getColorCodeString=h;t.getRawColorCode=w;t.getRawColorIndex=b;t.getColorIndex=k;t.getColorCodeTintSet=rt;t.getColorCodeTintSetIndex=d;t.getAllColorCodeIndexes=ut;t.getRotatedArray=r;t.getGradientColorCodeIndexes=v;t.getRainbowColorCodeIndexes=y;t.getGradientColorCode=ft;t.getRawGradientColorCode=et;t.getRainbowColorCode=ot;t.getRawRainbowColorCode=st})(t=n.ColorUtil||(n.ColorUtil={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(n,t,r){this.startDateTime=i(n,null);this.endDateTime=i(t,null);this.timezoneOffset=i(r,-(new Date).getTimezoneOffset())}return n})();t.DateTimeRange=r})(t=n.DateUtil||(n.DateUtil={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function o(n){return{original:n,type:n>>f,index:n&127,perTime:!!(n&e)}}function vt(n,t,i){return ut.isNumeric(n)?yt(Math.abs(n),t,
i):t}function yt(t,i,r){var c=o(i),e,h=i,s=t,u,f,l,a=n.isNullOrUndefined(r)?i:r;if(c.type>0&&(e=at[c.type],u=e.indexOf(i),f=t>1?1:-1,l=f>0?e.length-1:0,t!==1)){while(u!==l){if(s=t/tt(i,e[u+f])+et,f>0){if(s<1)break}else if(s>=1){u+=f;break}u+=f}h=e[u];f<0&&u===0&&s<ft&&(h=a)}return h}function a(n,t,i){var r=ht[n],u=r[t],f=r[i];return{dividend:f.dividend*u.divisor,divisor:f.divisor*u.dividend}}function pt(n,t,i){var r=t.index-k,u=i.index-k,o=Math.max(0,r),s=Math.max(0,u),h=-Math.min(0,r),c=-Math.min(0,u),f=a(n,o,s),e=a(2,c+b,h+b);return{dividend:f.dividend*e.dividend,divisor:f.divisor*e.divisor}}function tt(n,t){var i=bt(n,t);return i.dividend/i.divisor}function wt(n,t){var i=l[n];return i?i[t]:null}function it(n,t,i){var r=l[n];r||(r=l[n]={});r[t]=i}function bt(n,t){var e,f,r=null,h=!1,i;if(n===t)return s;if(i=wt(n,t),i)return i;if(e=o(n),f=o(t),e.type===f.type){switch(f.type){case u.DecimalPerTime:h=!0;case u.Decimal:r=0;break;case u.BytesPerTime:h=!0;case u.Bytes:r=1;break;case u.BytesPerTime_SI:
h=!0;case u.Bytes_SI:r=0;break;case u.Time:r=2}if(r!==null)return i=h?pt(r,e,f):a(r,e.index,f.index),it(n,t,i),it(t,n,{dividend:i.divisor,divisor:i.dividend}),i}throw"Not supported: conversion from unit "+n+"("+v(n)+") to unit "+t+"("+v(t)+") is not supported.";}function v(n,t){var i;return t===!0?(i=g[n],i===y&&(i=g[n]=rt(n,!0))):(i=d[n],i===y&&(i=d[n]=rt(n,!1))),i}function rt(n,t){switch(n){case r.Count:return"";case r.Thousand:return i.thousand;case r.Million:return i.million;case r.Billion:return i.billion;case r.Trillion:return i.trillion;case r.Bytes:case r.Bytes_SI:return i.bytes;case r.Kilobytes:return t?i.kilobytesSI:i.kilobytes;case r.Kilobytes_SI:return i.kilobytesSI;case r.Megabytes:return t?i.megabytesSI:i.megabytes;case r.Megabytes_SI:return i.megabytesSI;case r.Gigabytes:return t?i.gigabytesSI:i.gigabytes;case r.Gigabytes_SI:return i.gigabytesSI;case r.Terabytes:return t?i.terabytesSI:i.terabytes;case r.Terabytes_SI:return i.terabytesSI;case r.Petabytes:return t?i.petabytesSI:
i.petabytes;case r.Petabytes_SI:return i.petabytesSI;case r.BytesPerDay:case r.BytesPerDay_SI:return i.bytesPerDay;case r.BytesPerHour:case r.BytesPerHour_SI:return i.bytesPerHour;case r.BytesPerMinute:case r.BytesPerMinute_SI:return i.bytesPerMinute;case r.BytesPerSecond:case r.BytesPerSecond_SI:return i.bytesPerSecond;case r.KilobytesPerSecond:return t?i.kilobytesPerSecondSI:i.kilobytesPerSecond;case r.KilobytesPerSecond_SI:return i.kilobytesPerSecondSI;case r.MegabytesPerSecond:return t?i.megabytesPerSecondSI:i.megabytesPerSecond;case r.MegabytesPerSecond_SI:return i.megabytesPerSecondSI;case r.GigabytesPerSecond:return t?i.gigabytesPerSecondSI:i.gigabytesPerSecond;case r.GigabytesPerSecond_SI:return i.gigabytesPerSecondSI;case r.TerabytesPerSecond:return t?i.terabytesPerSecondSI:i.terabytesPerSecond;case r.TerabytesPerSecond_SI:return i.terabytesPerSecondSI;case r.PetabytesPerSecond:return t?i.petabytesPerSecondSI:i.petabytesPerSecond;case r.PetabytesPerSecond_SI:return i.petabytesPerSecondSI
case r.CountPerDay:return i.countPerDay;case r.CountPerHour:return i.countPerHour;case r.CountPerMinute:return i.countPerMinute;case r.CountPerSecond:return i.countPerSecond;case r.ThousandPerSecond:return i.thousandPerSecond;case r.MillionPerSecond:return i.millionPerSecond;case r.BillionPerSecond:return i.billionPerSecond;case r.TrillionPerSecond:return i.trillionPerSecond;case r.MicroSeconds:return i.microSeconds;case r.MilliSeconds:return i.milliSeconds;case r.Seconds:return i.seconds;case r.Minutes:return i.minutes;case r.Hours:return i.hours;case r.Days:return i.days;case r.Percentage:return i.percentage;default:return""}}var y=undefined,ut=jQuery,i=n.Resources.Strings.UnitConversion,ft=.0001,et=1e-5,s={dividend:1,divisor:1},p=60,w=60*p,h=24*w,ot=7*h,st=30*h,c=[{dividend:1,divisor:Math.pow(10,6)},{dividend:1,divisor:Math.pow(10,3)},s,{dividend:p,divisor:1},{dividend:w,divisor:1},{dividend:h,divisor:1},{dividend:ot,divisor:1},{dividend:st,divisor:1},],b=c.indexOf(s),f=8,k=3,e=1<<f-
1,ht=[function(n){return{dividend:Math.pow(10,3*n),divisor:1}},function(n){return{dividend:Math.pow(2,10*n),divisor:1}},function(n){return c[n]}].map((function(n){return c.map((function(t,i){return n(i)}))})),l={},d={},g={},u,r;(function(n){n[n.None=0]="None";n[n.Bytes=1]="Bytes";n[n.Decimal=2]="Decimal";n[n.Time=3]="Time";n[n.BytesPerTime=4]="BytesPerTime";n[n.DecimalPerTime=5]="DecimalPerTime";n[n.Bytes_SI=6]="Bytes_SI";n[n.BytesPerTime_SI=7]="BytesPerTime_SI"})(u||(u={})),(function(n){n[n.None=u.None<<f]="None";n[n.Percentage=n.None+1]="Percentage";n[n.Bytes=u.Bytes<<f]="Bytes";n[n.Kilobytes=n.Bytes+1]="Kilobytes";n[n.Megabytes=n.Bytes+2]="Megabytes";n[n.Gigabytes=n.Bytes+3]="Gigabytes";n[n.Terabytes=n.Bytes+4]="Terabytes";n[n.Petabytes=n.Bytes+5]="Petabytes";n[n.BytesPerDay=u.BytesPerTime<<f|e]="BytesPerDay";n[n.BytesPerHour=n.BytesPerDay+1]="BytesPerHour";n[n.BytesPerMinute=n.BytesPerDay+2]="BytesPerMinute";n[n.BytesPerSecond=n.BytesPerDay+3]="BytesPerSecond";n[n.KilobytesPerSecond=n.BytesPerDay+
4]="KilobytesPerSecond";n[n.MegabytesPerSecond=n.BytesPerDay+5]="MegabytesPerSecond";n[n.GigabytesPerSecond=n.BytesPerDay+6]="GigabytesPerSecond";n[n.TerabytesPerSecond=n.BytesPerDay+7]="TerabytesPerSecond";n[n.PetabytesPerSecond=n.BytesPerDay+8]="PetabytesPerSecond";n[n.Count=u.Decimal<<f]="Count";n[n.Thousand=n.Count+1]="Thousand";n[n.Million=n.Count+2]="Million";n[n.Billion=n.Count+3]="Billion";n[n.Trillion=n.Count+4]="Trillion";n[n.MicroSeconds=u.Time<<f]="MicroSeconds";n[n.MilliSeconds=n.MicroSeconds+1]="MilliSeconds";n[n.Seconds=n.MicroSeconds+2]="Seconds";n[n.Minutes=n.MicroSeconds+3]="Minutes";n[n.Hours=n.MicroSeconds+4]="Hours";n[n.Days=n.MicroSeconds+5]="Days";n[n.CountPerDay=u.DecimalPerTime<<f|e]="CountPerDay";n[n.CountPerHour=n.CountPerDay+1]="CountPerHour";n[n.CountPerMinute=n.CountPerDay+2]="CountPerMinute";n[n.CountPerSecond=n.CountPerDay+3]="CountPerSecond";n[n.ThousandPerSecond=n.CountPerDay+4]="ThousandPerSecond";n[n.MillionPerSecond=n.CountPerDay+5]="MillionPerSecond";
n[n.BillionPerSecond=n.CountPerDay+6]="BillionPerSecond";n[n.TrillionPerSecond=n.CountPerDay+7]="TrillionPerSecond";n[n.Bytes_SI=u.Bytes_SI<<f]="Bytes_SI";n[n.Kilobytes_SI=n.Bytes_SI+1]="Kilobytes_SI";n[n.Megabytes_SI=n.Bytes_SI+2]="Megabytes_SI";n[n.Gigabytes_SI=n.Bytes_SI+3]="Gigabytes_SI";n[n.Terabytes_SI=n.Bytes_SI+4]="Terabytes_SI";n[n.Petabytes_SI=n.Bytes_SI+5]="Petabytes_SI";n[n.BytesPerDay_SI=u.BytesPerTime_SI<<f|e]="BytesPerDay_SI";n[n.BytesPerHour_SI=n.BytesPerDay_SI+1]="BytesPerHour_SI";n[n.BytesPerMinute_SI=n.BytesPerDay_SI+2]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=n.BytesPerDay_SI+3]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=n.BytesPerDay_SI+4]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=n.BytesPerDay_SI+5]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=n.BytesPerDay_SI+6]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=n.BytesPerDay_SI+7]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=n.BytesPerDay_SI+8]="PetabytesPerSecond_SI"})(t.Unit||(t.Unit={}));r=
t.Unit;var nt=n.getEnumArray,ct=nt(u,!0),lt=nt(r).map((function(n){return o(n.value)})),at=ct.map((function(n){return n.value===0?[]:lt.filter((function(t){return t.type===n.value})).map((function(n){return n.original})).sort((function(n,t){return n-t}))}));t.getAppropriateUnit=vt;t.getConversionFactor=tt;t.toString=v})(t=n.UnitConversionUtil||(n.UnitConversionUtil={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function s(n,t,u){var f=e(u)?null:i(u),o=r.getAppropriateUnit(n,i(t),f);return a(o)}function h(n,t){return r.getConversionFactor(i(n),i(t))}function c(n,t){return r.toString(i(n),t)}function y(n,t,i,r,u,f){return l(n,t,s(n,t,u),i,r,u,f)}function l(n,t,i,r,u,f,s){var w=u?u:v,a=r?r:{minimumFractionDigits:0,maximumFractionDigits:2},y=h(t,i),p=i,l="";return n===0?(l=o(a).format(n),p=e(f)?i:f):y&&(l=o(a).format(n/y)),w.format(l,c(p,s))}function i(n){var t=r.Unit,i=u[n];return t[i]}function a(n){var t=u,i=r.Unit[n];return t[i]}var f=n,r=f.UnitConversionUtil,e=f.isNullOrUndefined,
o=FxImpl.Intl.NumberFormat.create,v="{0} {1}",u;(function(n){n[n.None=0]="None";n[n.Percentage=1]="Percentage";n[n.Bytes=2]="Bytes";n[n.Kilobytes=3]="Kilobytes";n[n.Megabytes=4]="Megabytes";n[n.Gigabytes=5]="Gigabytes";n[n.Terabytes=6]="Terabytes";n[n.Petabytes=7]="Petabytes";n[n.BytesPerDay=8]="BytesPerDay";n[n.BytesPerHour=9]="BytesPerHour";n[n.BytesPerMinute=10]="BytesPerMinute";n[n.BytesPerSecond=11]="BytesPerSecond";n[n.KilobytesPerSecond=12]="KilobytesPerSecond";n[n.MegabytesPerSecond=13]="MegabytesPerSecond";n[n.GigabytesPerSecond=14]="GigabytesPerSecond";n[n.TerabytesPerSecond=15]="TerabytesPerSecond";n[n.PetabytesPerSecond=16]="PetabytesPerSecond";n[n.Count=17]="Count";n[n.Thousand=18]="Thousand";n[n.Million=19]="Million";n[n.Billion=20]="Billion";n[n.Trillion=21]="Trillion";n[n.MicroSeconds=22]="MicroSeconds";n[n.MilliSeconds=23]="MilliSeconds";n[n.Seconds=24]="Seconds";n[n.Minutes=25]="Minutes";n[n.Hours=26]="Hours";n[n.Days=27]="Days";n[n.CountPerDay=28]="CountPerDay";n[n.CountPerHour=
29]="CountPerHour";n[n.CountPerMinute=30]="CountPerMinute";n[n.CountPerSecond=31]="CountPerSecond";n[n.ThousandPerSecond=32]="ThousandPerSecond";n[n.MillionPerSecond=33]="MillionPerSecond";n[n.BillionPerSecond=34]="BillionPerSecond";n[n.TrillionPerSecond=35]="TrillionPerSecond";n[n.Bytes_SI=36]="Bytes_SI";n[n.Kilobytes_SI=37]="Kilobytes_SI";n[n.Megabytes_SI=38]="Megabytes_SI";n[n.Gigabytes_SI=39]="Gigabytes_SI";n[n.Terabytes_SI=40]="Terabytes_SI";n[n.Petabytes_SI=41]="Petabytes_SI";n[n.BytesPerDay_SI=42]="BytesPerDay_SI";n[n.BytesPerHour_SI=43]="BytesPerHour_SI";n[n.BytesPerMinute_SI=44]="BytesPerMinute_SI";n[n.BytesPerSecond_SI=45]="BytesPerSecond_SI";n[n.KilobytesPerSecond_SI=46]="KilobytesPerSecond_SI";n[n.MegabytesPerSecond_SI=47]="MegabytesPerSecond_SI";n[n.GigabytesPerSecond_SI=48]="GigabytesPerSecond_SI";n[n.TerabytesPerSecond_SI=49]="TerabytesPerSecond_SI";n[n.PetabytesPerSecond_SI=50]="PetabytesPerSecond_SI"})(t.Unit||(t.Unit={}));u=t.Unit;t.getAppropriateUnit=s;t.getConversionFactor=
h;t.toString=c;t.getConvertedValue=y;t.getConvertedValueForTargetUnit=l;t._convertUnitToInternalConversionUnit=i;t._convertInternalConversionUnitToUnit=a})(t=n.UnitConversion||(n.UnitConversion={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="string"}function s(n,t){var i=n.name;return n&&t[i.namespaceIndex]+"."+i.name}function h(n){return n?r[n]:null}function c(n,t){var i=l(n,t);return i&&i.itemType||null}function p(n,t){return h(c(n,t))}function l(n,t){var i=u(n)?h(n):n,r=i&&i.properties;return r&&r[t]}function w(n,t){var i=l(n,t);return!!(i&&i.isArray)}function b(n){var r=[],t=n&&n.properties,i;if(t)for(i in t)t.hasOwnProperty(i)&&r.push(i);return r}function k(n){var i=u(n)?t.getTypeMetadata(n):n,r=i&&i.idProperties;return r||null}function ft(n){var t=k(n);return t&&t.length>0}function et(n,i){for(var l=u(i)?t.getTypeMetadata(i):i,s=d(l),h,r,c=[],f=0,a=s.length;f<a;f++){if(h=s[f],r=o(n[h]),e(r))return;r===
null&&(r=ut);c.push(r)}return c.join(",")}function d(n){return k(n)}function ot(n,t){f(n,t,{visitArray:function(n,t){a.data(n,y,t)}})}function f(n,t,i){if(t)if(Array.isArray(o(n)))i.visitArray&&i.visitArray(n,t),o(n).forEach((function(n){f(n,t,i)}));else if(it(n))for(var r in n)n.hasOwnProperty(r)&&f(n[r],c(t,r),i)}function st(n){return a.data(n,y)}function g(n){var t=u(n)?r[n]:n,i={},f;return t&&(f=b(t),f.forEach((function(n){var r=p(t,n),u=w(t,n);if(u)i[n]=rt();else if(!r||r.entityType)i[n]=v();else if(r.name)i[n]=v(g(r.name));else throw new Error("Cannot create entity.");}))),i}function ht(n){return n&&n.entityType}function nt(n,t){t&&!t.name&&(t=tt.clone(t),t.name=n);r[n]=t}function ct(n){for(var i,t,f=(n+"Type").split("."),r=window,o=f.length,s=o-1,u=0;u<o;u++){if(i=f[u],t=r[i],u===s){if(t!==n){if(!e(t))throw new Error("Cannot create namespace for '"+n+"' because it already exists.");r[i]=n}}else if(typeof t!="object"){if(!e(t))throw new Error("Cannot create namespace for '"+n+"' at the segment '"+
i+"' because it already exists.");t={};r[i]=t}r=t}}function lt(n){var t=n.namespaces,r=n.metadata,u=r.map((function(n){var o={},u,f,e,i;ct(s(n,t));e=n.properties;for(u in e)i=e[u],f=i.typeIndex,o[u]={isArray:!!i.isArray,isDate:!!i.isDate,itemType:f===-1?null:s(r[f],t),trackEdits:!!i.trackEdits,persistEdits:!!i.persistEdits};return{name:s(n,t),properties:o,idProperties:n.idProperties,entityType:n.entityType,hasGloballyUniqueId:n.hasGloballyUniqueId}})),i=n.rootTypeIndex;return u.forEach((function(n){nt(n.name,n)})),typeof i=="number"&&i>=0&&u[i]||null}var i=n,a=i.Helpers,tt=i.Base.Utilities,it=i.isObject,e=i.isUndefined,o=ko.unwrap,v=ko.observable,rt=ko.observableArray,y="aux-type",ut="NULL-VALUED-ID-PROPERTY",r={},at;t.getTypeMetadata=h;t.getPropertyType=c;t.getPropertyTypeMetadata=p;t.getPropertyMetadata=l;t.getPropertyCardinality=w;t.getProperties=b;t.typeHasId=ft;t.getItemId=et;t.getIdPropertyNames=d;t.decorateWithType=ot;t.visitTypedData=f;t.getArrayItemType=st;t.createEmptyObject=g;t.
typeIsEntityType=ht;t.setTypeMetadata=nt;t.setTypesMetadata=lt,(function(n){function t(){r={}}n.clearAllTypesMetadata=t})(at=t.Internal||(t.Internal={}))})(i=t.Metadata||(t.Metadata={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(n.SortOrder||(n.SortOrder={}));var t=n.SortOrder})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=ko.observableArray,i="This callback is already registered.",u=(function(){function t(n){this._resetListeners=[];this._partialErrors=n||r()}return Object.defineProperty(t.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),t.prototype.resetNavigation=function(){var n=this._resetListeners.map((function(n){return n()}));return Q.all(n)},t.prototype.addResetNavigationListener=function(n){if(this._resetListeners.indexOf(
n)>=0)throw new Error(i);this._resetListeners.push(n)},t.prototype.removeResetNavigationListener=function(n){var t=this._resetListeners.indexOf(n);if(t<0)throw new Error(i);this._resetListeners.splice(t,1)},__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.DataNavigatorBase=u})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function f(t){return n.regExpTenantResource.test(t)}function t(t){return n.regExpSubscriptionId.test(t)}function i(t){return n.regExpResourceGroupId.test(t)}function e(t){return n.regExpResourceId.test(t)}function r(t){return n.regExpDeploymentResourceId.test(t)||n.regExpDeploymentId.test(t)}function u(t){return n.regExpTagId.test(t)}function o(f,e){if(e===void 0&&(e=!1),typeof f!="string")return!1;var o=n.regExpResourceIdRelaxed.test(f)||t(f)||i(f);return e?o:o||r(f)||u(f)}n.regExpTenantResource=/^(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i;
n.regExpSubscriptionId=/^\/subscriptions\/([^\/\s]+)$/i;n.regExpResourceGroupId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)$/i;n.regExpResourceId=/^(?:\/cloudname\/[^\/\s]+)?(?:\/subscriptions\/[^\/\s]+(\/resourcegroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)+)$/i;n.regExpResourceIdRelaxed=/^(?:\/subscriptions\/[^\/\s]+(\/resourcegroups\/[^\/\s]+)?)?(?:\/providers\/[^\/]+(?:\/[^\/]+\/[^\/]+)*)*(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((?:\/[^\/]+\/[^\/]+)*)$/i;n.regExpDeploymentId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)\/deployments\/([^\/]+)$/i;n.regExpDeploymentResourceId=/^\/subscriptions\/([^\/\s]+)\/resourcegroups\/([^\/\s]+)\/providers\/microsoft.resources\/deployments\/([^\/]+)$/i;n.regExpTagId=/^\/subscriptions\/([^\/\s]+)\/tagNames\/([^\/]+)(?:\/tagValues\/([^\/]+))?$/i;n.isTenantResource=f;n.isSubscriptionId=t;n.isResourceGroupId=i;n.
isResourceId=e;n.isDeploymentId=r;n.isTagId=u;n.isResourceManagerId=o})(t=n.ResourceTypes||(n.ResourceTypes={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.Create=1]="Create";n[n.Picker=2]="Picker";n[n.Form=3]="Form";n[n.Filter=4]="Filter";n[n.Delete=5]="Delete";n[n.Generic=6]="Generic"})(n.ActionBarKind||(n.ActionBarKind={}));var t=n.ActionBarKind})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.ServiceViewModel=0]="ServiceViewModel";n[n.ResourceType=1]="ResourceType";n[n.AssetTypeBlade=2]="AssetTypeBlade";n[n.ServiceLink=3]="ServiceLink";n[n.InstanceLink=4]="InstanceLink";n[n.NoBrowse=-1]="NoBrowse"})(n.BrowseType||(n.BrowseType={}));var t=n.BrowseType})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[
n.Standard=0]="Standard";n[n.Url=1]="Url";n[n.Blade=2]="Blade";n[n.FileDownload=3]="FileDownload";n[n.List=4]="List";n[n.Dynamic=5]="Dynamic"})(n.CommandKind||(n.CommandKind={}));var t=n.CommandKind})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Normal=0]="Normal";n[n.Hidden=1]="Hidden"})(n.KindVisibility||(n.KindVisibility={}));var t=n.KindVisibility})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.General=1]="General";n[n.AssetType=2]="AssetType"})(n.PartGalleryPivotKind||(n.PartGalleryPivotKind={}));var t=n.PartGalleryPivotKind})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.MenuBlade=2]="MenuBlade";n[n.ResourceMenuBlade=3]="ResourceMenuBlade"})(n.RedirectType||(n.RedirectType={}));var t=n.RedirectType})(t=n.Extension||
(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Part=0]="Part";n[n.BladeInput=1]="BladeInput";n[n.BladeActionBar=2]="BladeActionBar";n[n.BladeProperty=3]="BladeProperty";n[n.Command=4]="Command";n[n.Constant=5]="Constant";n[n.SelectedItem=6]="SelectedItem";n[n.Adapter=7]="Adapter";n[n.Dashboard=8]="Dashboard";n[n.AdapterInput=9]="AdapterInput"})(n.ReferenceType||(n.ReferenceType={}));var t=n.ReferenceType})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.Tenant=1]="Tenant"})(n.ResourceRoutingType||(n.ResourceRoutingType={}));var t=n.ResourceRoutingType})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function bt(n,t,i){return"message"in i?"status"in i?Q.reject(new Error("Failed to load AMD dependency for "+t+" '"+n+"'.\r\nurl: "+i.srcUrl+"\r\nstatus: "+i.status+"\r\nstatusText: "+
i.statusText)):Q.reject(new Error("Failed to retrieve the "+t+" defintion for '"+n+"' from the server.\r\nmessage:"+i.message)):Q.reject(i)}function nt(n,t,i){return MsPortalFx.require(at(n,"/")+i).then((function(n){return n[t]})).catch((function(n){return bt(i,t,n)}))}var h=MsPortalFx,c=h.Base,e=c.Rpc.Internal,p=c.Net2,tt=h.Extension,l=h.ViewModels,it=e.ActionEndPointDefinition,w=c.Constants,f=e.FuncEndPointDefinition,rt=n.TelemetryContext,b=e.ProxiedObjectTypeDefinition,i=n.Constants.RpcMethods,ct=l.Services.ResourceTypes,ut=w.ViewModelTypes,k=n.NetDiagnostics,lt=h.isNullOrUndefined,a=undefined,at=h.ensureSuffix,ft=window,u=w.Shell,vt=ft.fx,d=vt.environment,kt=d.isDevelopmentMode,yt=h.isFeatureEnabled,et=w.ExtensionNames,ot=ko.isObservable,st=ko.observable,pt=ko.pureComputed,o="",wt={unallowedGallery:o,alreadyRegistered:o,alreadyInit:o,notArmId:o,noObservable:o,noInputs:o,unexpectedVM:o,earlyExecNotAFunc:o},s=n.getErrorMap(wt),g,r,ht,v,y;t.registerManifestDefinition=new it(i.registration);
t.getViewModelsDefinition=new b(i.viewModels);t.getExtensionGalleryService=new b(i.getExtensionGalleryServiceViewModel);t.initializeEndPoint=new f(i.entryPointInitialize);t.disposeEndPoint=new it(i.entryPointDispose);t.getDefinitionEndPoint=new f(i.entryPointGetDefinition);t.getBladeDefinitionEndPoint=new f(i.entryPointGetBladeDefinition);t.getPartDefinitionEndPoint=new f(i.entryPointGetPartDefinition);t.getControlDefinitionEndPoint=new f(i.entryPointGetControlDefinition);t.pingEndPoint=new f(i.ping);t.getAuthorizationTokenEndPoint=new f(i.getAuthToken);t.getUserInfoEndPoint=new f(i.getUserInfo);t.getSharedSettingsEndPoint=new f(i.getSharedSettings);t.getLocalGalleryPackagesEndpointsDefinition=new f(i.getLocalGalleryPackagesEndpoints);t.registerLocalGalleryPackagesEndpointDefinition=new f(i.registerLocalGalleryPackagesEndpoint);t.submitObjectCacheTelemetryEndpoint=new f(i.submitObjectCacheTelemetry);t.sharedObservablesEndPoint=new b(i.provideExtensionService);t.hasPermissionsToShell=new
f(i.hasPermission);t.mapAssetIdToResourceIdEndPoint=new f(i.mapAssetIdToResourceId);t.mapResourceIdToAssetIdEndPoint=new f(i.mapResourceIdToAssetId);t.mapAssetIdToDynamicSelectionAndIconEndPoint=new f(i.mapAssetIdToDynamicSelectionAndIcon);t.mapResourceIdToDynamicSelectionAndIconEndPoint=new f(i.mapResourceIdToDynamicSelectionAndIcon);t.getAssetTypeInformationEndPoint=new f(i.getAssetTypeInformation);t.getResourceTypeAssetTypeInformationEndPoint=new f(i.getResourceTypeAssetTypeInformation);t.getResourceAssetInformationEndPoint=new f(i.getResourceAssetInformation);t.getResourceEndPoint=new f(i.getResource);t.signalResourcesChangedEndPoint=new f(i.signalResourcesChanged);t.getArmEndpointEndPoint=new f(i.getArmEndpoint);g=new c.Diagnostics.Log("MsPortalFx/Extension/Runtime");ht=(function(){function i(n,i,f,o,h){var l=this,a;this._hubsWindowsId=t.getHubsWindowId();r=e.client;this._extensionId=n.name;this._manifest=n;this._tokenCache=c.Security.createAuthTokenCache((function(n){return t.getAuthorizationTokenEndPoint.
invoke(r,u,n)}));this._entryPointDeferred=Q.defer();c.Diagnostics.ErrorReporter.initialize();a=yt("prefetch");a?i():(t.initializeEndPoint.register(r,[u],(function(){return l.initializeEntryPoint(i)})),t.disposeEndPoint.register(r,[u],(function(){l._entryPointDeferred.promise.isPending||(l._entryPointDeferred=Q.defer());l._entryPoint&&(l._entryPoint.dispose(),l._entryPoint=null)})),f&&t.getBladeDefinitionEndPoint.register(r,[u],(function(n){return nt(f,"blade",n)})),o&&t.getPartDefinitionEndPoint.register(r,[u],(function(n){return nt(o,"part",n)})),h&&t.getControlDefinitionEndPoint.register(r,[u],(function(n){return nt(h,"control",n)})),t.getDefinitionEndPoint.register(r,[u],(function(){var t=l._entryPoint.getDefinition(),n=require.s.contexts._.config;return t.requireConfig=JSON.parse(JSON.stringify({bundles:n.bundles,paths:n.paths,shim:n.shim})),t})),t.getViewModelsDefinition.registerObjectFactory(r,{allowedOrigin:[u,this._hubsWindowsId],allowRemoteChanges:!0,handler:function(n){return l.getObservable(
n)},onSuccess:v.earlyOnInputsSet}),t.getExtensionGalleryService.registerObjectFactory(r,{allowedOrigin:null,allowRemoteChanges:!0,handler:function(n,i){var r=t.getDescriptor(i.srcWindowId).name;if([u,et.Hubs,et.Marketplace].indexOf(r)!==-1)return l.getGalleryServiceViewModel();s.unallowedGallery(i.srcWindowId)}}));e.start({originId:t.getWindowId({name:n.name,cloudName:undefined},{addSelfCloudNameIfMissing:!0}),parentWindow:ft.parent})}return i.prototype.initializeEntryPoint=function(n){var t=this;return n().then((function(n){return t._entryPoint=n,t._initialize(),t._entryPoint.initialize(),t._entryPointDeferred.resolve(!0),k.traceDocumentNavigation()}))},i.prototype.register=function(){this._registered&&s.alreadyRegistered();t.registerManifestDefinition.invoke(r,u,this._manifest);this._registered=!0;k.traceResourceDownloads();k.traceCdnIndex()},i.prototype._initialize=function(){var f=this,i;this._initialized&&s.alreadyInit();t.pingEndPoint.register(r,[u],(function(){return Q(!0)}));this._entryPoint.
getObservable&&t.sharedObservablesEndPoint.registerObjectFactory(r,{allowedOrigin:null,allowRemoteChanges:!1,handler:function(n){return f._entryPoint.getObservable(n,[])}});p.status.subscribe((function(n){t.extensionStatusEndPoint.invoke(r,u,n)}));p.initialize((function(n){return f.getAuthorizationToken(n).then((function(n){return n&&n.header}))}));i=d.localGalleryPackageEndpoint;i&&t.registerLocalGalleryPackagesEndpointDefinition.invoke(r,u,i);n.Data.beginTelemetrySubmission();this._initialized=!0},i.prototype.getAuthorizationToken=function(n){return this._tokenCache.getToken(n)},i.prototype.getSharedSettings=function(){return t.getSharedSettingsEndPoint.invoke(r,u,a)},i.prototype.getUserInfo=function(){return t.getUserInfoEndPoint.invoke(r,u,a)},i.prototype.getLocalGalleryPackagesEndpoints=function(){return t.getLocalGalleryPackagesEndpointsDefinition.invoke(r,u,a)},i.prototype.hasPermission=function(n,i,f){return ct.isResourceManagerId(n,!0)?t.hasPermissionsToShell.invoke(r,u,{entityId:n,
requestedActions:i,cloudName:f}):(g.error("Entity ID must be a resource ID, a subscription ID or a resource group ID for hasPermissions, failing open"),Q(!0))},i.prototype.assetHasPermission=function(n,t){var i=this;return this.mapAssetIdToResourceId(n).then((function(n){return i.hasPermission(n,t,undefined)}))},i.prototype.mapAssetIdToResourceId=function(n){return t.mapAssetIdToResourceIdEndPoint.invoke(r,u,n)},i.prototype.mapResourceIdToAssetId=function(n){return t.mapResourceIdToAssetIdEndPoint.invoke(r,u,n)},i.prototype.mapAssetIdToDynamicSelectionAndIcon=function(n,i){return t.mapAssetIdToDynamicSelectionAndIconEndPoint.invoke(r,u,{assetId:n,forceBladeSelection:i})},i.prototype.mapResourceIdToDynamicSelectionAndIcon=function(n,i){return t.mapResourceIdToDynamicSelectionAndIconEndPoint.invoke(r,u,{resourceId:n,forceBladeSelection:i})},i.prototype.getAssetTypeInformation=function(n,i){return t.getAssetTypeInformationEndPoint.invoke(r,u,{extensionName:n,assetType:i})},i.prototype.getResourceTypeAssetTypeInformation=
function(n){return t.getResourceTypeAssetTypeInformationEndPoint.invoke(r,u,n)},i.prototype.getResourceAssetInformation=function(n){return t.getResourceAssetInformationEndPoint.invoke(r,u,n)},i.prototype.getResource=function(n,i){return t.getResourceEndPoint.invoke(r,u,{resourceId:n,caller:i})},i.prototype.signalResourcesChanged=function(n){return t.signalResourcesChangedEndPoint.invoke(r,u,n)},i.prototype.disableAjaxServerVersionCheck=function(){p.disableVersionCheck()},i.prototype.getObservable=function(n){var t=this,i=n.telemetryContext,r=e.messageContext;return this._entryPointDeferred.promise.then((function(){return e.invokeWithContext(r,(function(){var u;switch(n.type){case ut.PartViewModel:u=rt.usingState((function(){return t.getPartViewModel(n)}),i);break;case ut.ViewModel:t._entryPoint.getViewModel&&(u=rt.usingState((function(){return t.getViewModel(n)}),i))}if(u)return u.then((function(t){return v.createViewModelWrapper(t,n,r)||t}));s.noObservable()}))}))},i.prototype.getGalleryServiceViewModel=
function(){var t=this,n=this._manifest&&this._manifest.galleryService&&this._manifest.galleryService.serviceViewModel;return n?this._entryPointDeferred.promise.then((function(){return tt.composeViewModel(t._entryPoint.getViewModel,n,null,!1)})):Q(a)},i.prototype.dispose=function(){this._disposed=!0},i.prototype.getViewModel=function(n){var t=n.earlyExecTasks&&function(t){y.earlyExecuteTask(t,n.earlyExecTasks)};return Q(tt.composeViewModel(this._entryPoint.getViewModel,n.name,n.initialState,n.createSelectable,n.createHubsInternalCloudNameProperty,t))},i.prototype.getPartViewModel=function(t){var f=n.Composition.BladeContainer,c=f.BladeContainer,v=f.bindActionBar,i=t.initialState,e=n.ViewModels.createFrameworkPartViewModel(),o=t.collapsed,p={initialState:i,selectable:t.createSelectable?l.Part.createSelectableViewModel(i):a,location:t.partLocation,flags:t.flags},s=t.containerType===1,w=s?c:l.PartContainer,b=function(n,t){s&&v(n,t)},r=new w(e,p),u=this._entryPoint.getPartViewModel(t.name,r,i),
k="Extension/"+this._extensionId+"/PartType/"+t.name,h=function(n){lt(o)||n.collapsed(o);b(r,n);var u=new l.Part(e,r,n,i,t.createHubsInternalCloudNameProperty,k);return t.earlyExecTasks&&y.earlyExecuteTask(n,t.earlyExecTasks),u};return Q.isPromiseAlike(u)?u.then(h):Q(h(u))},i})();t.RuntimeImpl=ht,(function(t){function h(n,t,h){n.getViewModelOptions=t;var c=n.content;if((c&&c._msPortalFx_viewModelApiV2))return u(n,t)||s.noInputs(),delete t.partSize,e.invokeWithContext(h,(function(){var v=f(n,t),e,l;o(n,v);var u=i.reduce((function(n,t){return n[t]=st(),n}),{}),s={},h=n.container;return r(h,u,c,s,t.name),e=MsPortalFx.cloneAndRebindFunctions(n),l=e.content={_msPortalFx_viewModelApiV2_wrapper:!0,chrome:u,viewModel:st()},a(n,(function(){r(h,u,c,s,t.name);l.viewModel(c)})),e}))}function r(n,t,r,u,f){i.forEach((function(i){var e,o;i in r&&(e=r[i],i in u?e!==u[i]&&g.error("Property changed non-observably, use an observable instead and update its value: '"+i+"' in '"+f+"' in '"+d.extensionName+"'"):(o=t[
i],ot(e)?(o(e()),e.subscribe(n,o)):o(e),u[i]=e))}))}function c(n,t,i){var e,r=n.getValue(),h=r.getViewModelOptions,s,c;delete r.getViewModelOptions;u(r,h)&&(e=Q.defer(),o(r,e.promise));i(n,t);s=r.content;c=h.partSize;typeof c=="number"&&s&&ot(s.size)&&s.size(c);e&&e.resolve(f(r,h))}function u(n,t){return!!(t.onInputsSetParameters&&n.updatePartInputValues)}function f(n,t){var i=t.onInputsSetParameters;return delete t.onInputsSetParameters,n.updatePartInputValues(i.inputs,i.settings,i.traceOptions,i.viewModelName,i.inputsMetadata,i.dontCallViewModelOnInputsSet)}function o(n,t){n.onInputsSetPromise=t}function a(t,i){var u=t.container,r,f;t instanceof l.Part?r=u.operations.blockingUi:t instanceof n.ViewModels.CompositionViewModel?r=pt((function(){return t.state()===n.ViewModels.CompositionState.Preparing})):s.unexpectedVM();r()?f=r.subscribe(u,(function(n){n||(f.dispose(),i())})):i()}var i=["title","subtitle"];t.createViewModelWrapper=h;t.earlyOnInputsSet=c})(v||(v={})),(function(n){function t(n,
t){return function(){var i=n[t.method],r=typeof i;if(r==="function")return i.apply(n,t.args);s.earlyExecNotAFunc(t.method,r)}}function i(n,i){var u=[],r,f;i&&(r=i&&i.tasks,r&&r.length>0&&(i.taskExecType!==1?(f=r.reduce((function(i,r){return i.then(t(n,r))}),Q()),u=[f]):u=r.map((function(i){return Q.fcall(t(n,i))}))),typeof i.keepReturnsIn=="string"&&(n["_msPortalFx_earlyExec"+i.keepReturnsIn]=u))}n.earlyExecuteTask=i})(y||(y={}))})(t=n.Extension||(n.Extension={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Observable=0]="Observable"})(n.ServiceType||(n.ServiceType={}));var t=n.ServiceType})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.FromInput=0]="FromInput";n[n.FromProvider=1]="FromProvider";n[n.FromSourceProvider=2]="FromSourceProvider"})(n.AssetIdSourceType||(n.AssetIdSourceType={}));var t=n.AssetIdSourceType})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={
})),(function(n){var t;(function(n){"use strict";(function(n){n[n.All=0]="All";n[n.Any=1]="Any"})(n.SetRequirement||(n.SetRequirement={}));var t=n.SetRequirement})(t=n.Extension||(n.Extension={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function r(n,t,r){var u=this,f=r&&r.allowedOrigins;return i.registerRpcEndPoint(n,{allowedOrigin:f,handler:function(n){return t.apply(u,n)}})}function u(n,t){for(var u=[],r=2;r<arguments.length;r++)u[r-2]=arguments[r];return i.invokeRpc(t,n,u)}var i=n.Base.Rpc.Internal.client;t.registerCallback=r;t.invokeCallback=u})(i=t.Rpc||(t.Rpc={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.Base.Rpc.Internal,r=window,o=r.fx.environment,u=new n.Base.Diagnostics.Log("MsPortalFx/Services/ServiceProvider"),f="Performance issue: usage of this api makes the portal unusable for large accounts. Requested {0} from {1}.",e=(function(){function n(n,t){this.
_extension=n;this._scope=t}return n.prototype.getObservable=function(){var n=this;return u.error(""+f.format(this._scope,this._extension)),FxImpl.Extension.sharedObservablesEndPoint.acquireObject(i.client,this._extension,this._scope).then((function(n){return n.getValue()}))},n.prototype.releaseObservable=function(){},n.prototype.dispose=function(){},n})();t.ObservableServiceClientImpl=e})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function l(n,t){var i=r(null),f=r(t.blockUi),e=r(t.shieldType);return n.progress&&n.progress((function(n){var t=n&&n.percent;typeof t=="string"&&(t=parseFloat(t),isNaN(t)&&u.percentValueNotNumber());typeof t=="number"&&i(a(t,0,100))})),{promise:n,deterministicPercentage:i,blockUi:f,shieldType:e}}function a(n,t,i){return Math.min(Math.max(n,t),i)}var r=ko.observable,s=ko.observableArray,i=ko.computed,o="",h={promiseCannotBeNull:o,percentValueNotNumber:o},u=FxImpl.getErrorMap(h),c=(function(){function t(t)
{var r=this,u;this._operations=s();u=n.ViewModels.Controls.Visualization.ProgressBar;this.inProgress=i(t,(function(){return r._operations().length>0}));this.blockingUi=i(t,(function(){return r._operations().some((function(n){return n.blockUi()}))}));this.shieldType=ko.pureComputed((function(){var n=r._operations(),t;return n.length>0&&(t=n.every((function(n){return n.shieldType&&n.shieldType()===1}))),t?1:0}));this.progressBarViewModel=new u.ViewModel(t);i(t,(function(){var n=r._operations().some((function(n){return n.deterministicPercentage()!==null}));r.progressBarViewModel.status(n?u.StatusType.InProgress:u.StatusType.Indeterminate)}));i(t,(function(){var n=0,t=0;r._operations().forEach((function(i){var r=i.deterministicPercentage();r!==null&&(n++,t+=r)}));r.progressBarViewModel.valuePercentage(n===0?0:t/n)}))}return t.prototype.dispose=function(){},t.prototype.add=function(n,t){var f=this,i,r;n||u.promiseCannotBeNull();t=t||new e;i=l(n,t);r=function(){f._operations.remove(i)};this._operations.push(i);
n.then(r,r)},t.prototype.remove=function(n){n||u.promiseCannotBeNull();this._operations.remove((function(t){return t.promise===n}))},t.prototype.update=function(n,t){var i=this._operations().first((function(t){return t.promise===n}));i&&i.blockUi(t.blockUi)},t.prototype.getOptionsForOperation=function(n){var t=this._operations().first((function(t){return t.promise===n}));return t?{blockUi:t.blockUi(),shieldType:t.shieldType()}:null},t})(),f,e;t.PartOperationList=c,(function(n){n[n.Opaque=0]="Opaque";n[n.Translucent=1]="Translucent"})(f||(f={}));t.ShieldType=f;e=(function(){function n(){}return n})();t.PartOperationOptions=e})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(n,t){this.uri=n;this.target=i(t,"_blank")}return n})();t.ClickableLink=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.initObservable,r=(function(){function n(
n,t){this.uri=n;this.target=i(t,"_blank")}return n})();t.ClickableLink=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(n,t,i){this.partName=n;this.parameters=t;this.options=i||{}}return n})();n.PartReference=t})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function r(n,t){var i="_msPortalFxShell";return t?n[i]=t:t=n[i],t}function v(n,t){var i=n;i._msPortalFxIsSelectableViewModel=!0;t&&(i._msPortalFxSelectable=t);n.configureSelectable=l.configureSelectable.bind(n)}function y(n,t){var i=n;i._msPortalFxSelectable=t}function p(n){return h(n)?n:null}function h(n,t){var i=n,r;return i&&i._msPortalFxIsSelectableViewModel===!0?(r=!!i._msPortalFxSelectable2,!t)?!!i._msPortalFxSelectable||r:r:!1}function w(n){var t=n&&r(n);return t&&t.type===21298}function b(n,t,i){var r=n._msPortalFxCallbacks;r&&r[t]&&typeof r[t]=="function"&&r[t].apply(r,i)}var e=window,f=ko.
observable,t="",a={supplyConflict:t,recieveConflict:t,syncConflict:t,supplyBladeConflict:t},i=n.getErrorMap(a),o,u,s,c,l;n.shellInterface=r,(function(n){n.ClickableLink=MsPortalFx.ViewModels.ClickableLink})(o=n.CompositionCore||(n.CompositionCore={})),(function(t){var u;(function(t){var o=(function(){function n(n,t){this.parameters=n;this._msPortalFxCallbacks=t}return n.prototype.clone=function(t){return new n(t,this._msPortalFxCallbacks)},n})(),u,s,e,h;t.BladeReference=o;u=(function(t){function i(i,r,u,f){var e=u&&u.parameters,o=u&&u.callbacks;t.call(this,e,o);this.bladeName=i;this.extensionName=r;this.options=u;this.metadata=f;this.cloudName=n.Extension.selfCloudName}return __extends(i,t),i})(o);t.PdlBladeReference=u;s=(function(t){function u(u,e,o,s){function y(t){var i=new n.TriggerableLifetimeManager,r=a.getEditableObservable(i);t(r);i.dispose()}var v;t.call(this,u,e,o,s);var c=o.supplyInitialData,l=o.supplyProviderConfig,h=o.receiveResult,a=o.editScopeAccessor;c=c&&c.bind(o);l=l&&l.bind(
o);h=h&&h.bind(o);a?(h||c)&&i.supplyConflict():h||i.recieveConflict();v=f();r(this,{type:20560,bladeConfig:v,getBladeConfig:function(){var n=null,t;return c?n=c():a&&y((function(t){n=t()})),t={config:l?l():undefined,initialState:n},v(t),t},receiveResult:function(n){h?h(n):y((function(t){t(n)}))}})}return __extends(u,t),u})(u);t.ParameterProviderBladeReference=s;e=(function(){function n(){}return n.prototype.renavigateActivatedBlade=function(){},n})();t.SelectableBase=e;h=(function(n){function t(t){function s(n,t){return{reason:n,bladeReference:t,operationId:MsPortalFx.getUniqueId()}}function h(n){var t=s(1,n);return e(t),t}function c(){var n=u();return h(n)}function l(){return o().then((function(n){return h(n)}))}n.call(this);var e=f(),u=t.supplyBladeReference,o=t.supplyBladeReferenceAsync;u||o||i.syncConflict();u&&o&&i.supplyBladeConflict();r(this,{type:21298,flags:1,request:e,fetchRequest:u?c:l,result:f()});this.renavigateActivatedBlade=function(n){e(s(2,n))}}return __extends(t,n),t})(e);t.Selectable2=
h})(u=t.Selectable||(t.Selectable={}))})(u=n.Composition||(n.Composition={}));s=u.Selectable;n.BladeReference=s.BladeReference;n.initializeSelectableViewModel=v;n.assignSelectable=y;n.tryGetSelectableViewModelContract=p;n.isSelectableViewModel=h;n.isSelectable2=w;n.invokeCallback=b;c=(function(){function n(){}return n.prototype.configureSelectable=function(n){var t=new u.Selectable.Selectable2(n),i=this._msPortalFxSelectable;return i&&(i.dispose(),delete this._msPortalFxSelectable),this._msPortalFxSelectable2=t,t},n})();l=new c;e.define("Fx/Composition",[],(function(){return o}));e.define("Fx/Composition/Selectable",[],(function(){return u.Selectable}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Minute=0]="Minute";n[n.Hour=1]="Hour";n[n.Day=2]="Day";n[n.Week=3]="Week";n[n.Month=4]="Month";n[n.Year=5]="Year"})(n.TimeUnit||(n.TimeUnit={}));var t=n.TimeUnit;n.TimeRangeValueType="MsPortalFx.Composition.Configuration.ValueTypes.TimeRange"}
)(t=n.Configuration||(n.Configuration={}))})(t=n.Composition||(n.Composition={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n){return typeof n=="object"?u(n,!0):n}var i=MsPortalFx.deepEquals,r=MsPortalFx.union,u=MsPortalFx.Base.Utilities.clone,f=new MsPortalFx.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Part"),e=(function(){function n(n,t){this._configChangedHandler=t}return n.prototype.setValues=function(n){this._persistedValues=t(n)},n.prototype.getValues=function(){var n=this._persistedValues;return n.parameters,t(n)},n.prototype.updateValues=function(n,u){var w;if(u===void 0&&(u=!0),!this._persistedValues)throw new Error("This 'updateValues' method cannot be called until the associated Part/Blade has been initialized.  Typically, 'updateValues' is called in the 'receiveResult' callback for a ParameterCollector opening a configuration Blade.");var o,s=n.parameters,c=n.settings,l=this._persistedValues,a=l.parameters,h=l.settings,v=
a.values,y=s&&s.values||{},e=a.metadata,p=s&&s.metadata||{},b=r(Object.keys(y),Object.keys(p));return b.forEach((function(n){var h,c,u,r,l,s,a;if(!e.hasOwnProperty(n)){f.error("Parameter named '"+n+"' is not a recognized parameter for this Part.");return}if(c=e&&e[n]&&Array.isArray(e[n].bindingSources)&&e[n].bindingSources.length>0,c){if(u=p[n],r=u&&u.activeBindingSourceName,r!==e[n].activeBindingSourceName){if(l=!r||e[n].bindingSources.firstIndex((function(n){return n.name===r}))>=0,!l)throw new Error("The name '"+r+"' supplied as 'activeBindingSourceName' does not match a binding source in 'bindingSources'.");e[n].activeBindingSourceName=r;o=!0}h=!!r}s=y[n];a=h||i(s,v[n]);a||(v[n]=t(s),o=!0)})),w=Object.keys(c),w.forEach((function(n){var u=!0,r=c[n];r===undefined&&(u=!1);u?i(r,h[n])||(h[n]=t(r),o=!0):h[n]!==undefined&&(h[n]=undefined,o=!0)})),o?this._configChangedHandler(t(this._persistedValues),u):Q()},n})();n.Configuration=e})(t=n.Composition||(n.Composition={}))})(FxImpl||(FxImpl={})),(function(
n){var t;(function(n){"use strict";(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed";n[n.Preparing=2]="Preparing"})(n.CompositionState||(n.CompositionState={}));var t=n.CompositionState})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function h(n){return typeof n=="function"}function it(){return{allowUiBlocking:i(!0),selectable:i()}}function rt(){return{allowUiBlocking:i(!0),selectable:i(),registeredSelectables:i(),registeredSelectableOptions:i(),_revealContentCallCount:i(0),activeOpenBladeCommand:i(),updateConfigFn:i(),_onInputValuesUpdated:null}}function y(n,t){n&&typeof n===a&&tt(t,(function(t,i){var r=n[t],u=y;w(r)?u=p:ft(r)&&(u=ut);u(r,i)}))}function p(n,t){var i=function(i){t[i]&&Array.isArray(t[i])&&n[i](t[i])};i(o);i(e);i(s)}function ut(n,t){t&&(n.selectedValue(t.selectedValue),n.isSelected(!!t.isSelected))}function w(n){var t=typeof n===a?Object.keys(n):[],i=t.indexOf(e)!==-1&&t.indexOf(o)!==-1&&t.indexOf(s)!==-1&&f(n[
e])&&f(n[o])&&f(n[s]),r=t.indexOf("_msPortalFxSelectableSet")!==-1;return i||r}function ft(n){return n instanceof u.ViewModels.Selectable}var u=MsPortalFx,b=u.Base,k=n,i=ko.observable,f=ko.isObservable,l=ko.toJSON,d=n.Extension,g=d.CloudName,r=n.TelemetryContext,a="object",nt=new b.Diagnostics.Log("MsPortalFx/ViewModels/Composition/ViewModels.Composition"),tt=u.forEachKey,e="activatedItems",o="selectedItems",s="itemsWithChildEdits",c,v;t.internalCloudNamePropertyName="cloudName";t.createFrameworkPartViewModel=rt;c=(function(){function n(n,t,r,u,f){this._hadHubsInternalCloudNameProperty=!1;this.internal=n;this.container=t;this.content=r||{};u&&u.content&&y(r,u.content);f&&(this.internal.cloudName=i(),this._hadHubsInternalCloudNameProperty=!0)}return n.prototype.updatePartInputValues=function(n,t,i,u,f,e){var o=[],s=this.content,y=this.container,c,a,v;if(this.content&&h(s.onInputsSet)){i&&(nt.verbose("Invoking onInputsSet of view model '"+(i.debugId||"N/A")+"'.\nInputs: "+l(n)+".\nSettings: "+
l(t)),!!i.breakOnInputsSet);u&&r.setContextValue(r.ContextType.CompositionItem,{id:u});try{c=s.isV2?s.onInputsSet(n,t,e):!e&&s.onInputsSet(n,t);c&&h(c.then)&&o.push(c)}catch(p){o.push(Q.reject(p))}finally{u&&r.resetContextValue(r.ContextType.CompositionItem)}}return this.container&&(a=y.onInputsSetCallbacks.triggerCallbacks(n,t),a&&h(a.then)&&o.push(a)),this._hadHubsInternalCloudNameProperty&&(v=g.readFromInputs(n),v&&this.internal.cloudName(v)),o.length>0?Q.all(o):null},n})();t.CompositionViewModelBase=c;v=(function(n){function r(r,u,f,e){var s=this,o,h,c;n.call(this,it(),r,u,f,e);this.state=i(t.CompositionState.Preparing);o=null;h=r;h.selectable&&k.assignSelectable(h,h.selectable);c=function(n){var i=Q(n).then((function(){var n=!o||o===i;n&&s.state(t.CompositionState.Ready)}),(function(){var n=!o||o===i;n&&s.state(t.CompositionState.Failed)}));return i};this.updatePartInputValues=function(i,r,u,f,e,h){o=null;var l=n.prototype.updatePartInputValues.call(s,i,r||{},u,f,e,h),a=t.CompositionState.
Ready;return l!==null&&(a=t.CompositionState.Preparing,o=c(l)),s.state(a),o}}return __extends(r,n),r.prototype.updatePartInputValues=function(){return},r})(c);t.CompositionViewModel=v;t.initializeSelectableSet=p;t.isSelectableSetLike=w})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(t){"use strict";function r(t,r){var f=n.createFrameworkPartViewModel(),e,u;return r=r||{},r.logArea=r.logArea||"MsPortalFx/ViewModels/Composition/ViewModels.Composition.Part",e={initialState:r.initialState,selectable:r.createSelectable?i.Part.createSelectableViewModel(r.initialState):undefined,location:r.location},u=new i.PartContainer(f,e),new i.Part(f,u,t(u),r.initialState,r.createHubsInternalCloudNameProperty,r.logArea)}var i=MsPortalFx.ViewModels;t.composePartViewModel=r})(t=n.Part||(n.Part={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var f=n.Base,e=FxImpl.Composition.Selectable,i=ko.observable,
u="",o={badBladeReferenceType:u,observableInBladeParameters:u,openBladeFromContextPaneNotAllowed:u},r=FxImpl.getErrorMap(o),s;(function(t){function v(){var n=[],t=!1,i={add:function(i,r){n.indexOf(i)<0&&n.push(i);r&&t&&i(null)},remove:function(t){var i=n.indexOf(t);i>=0&&n.splice(i,1)},triggerCallbacks:function(i,r){t=!0;var f=n.slice(),u=f.map((function(n){try{return n(i,r)}catch(t){return Q.reject(t)}})).filter((function(n){return!!n}));return u.length>0?Q.all(u):null},dispose:function(){n.splice(0,n.length)}};return i._callbacks=n,i}function p(t,i,u,f,o,s){function a(n){var i=Q.defer(),r=t.createChildLifetime();return u.result.subscribe(r,(function(t){t&&t.operationId===n&&(i.resolve(!!t.success),r.dispose())})),i.promise}function c(t,i,u,h,c){var v,p,y;return f&&r.openBladeFromContextPaneNotAllowed(),t instanceof e.PdlBladeReference||FxImpl.Po.getMetadata(t)||r.badBladeReferenceType(),v=t.options,p=v&&v.parameters,b(p)&&r.observableInBladeParameters(),h=h||n.getUniqueId(),c=c||a(h),y=i?1:
0,y|=u&&u.asSubJourney?2:0,l({bladeReference:t,reason:3,selectedItem:o,controlMetadata:s,flags:y,operationId:h}),c}function v(t,i,u,e){var o,s,v;return f&&r.openBladeFromContextPaneNotAllowed(),o=n.getUniqueId(),s=u?1:0,s|=e&&e.asSubJourney?2:0,v=a(o),l({bladeReference:undefined,reason:4,flags:s,operationId:o,initialWidth:e&&e.initialWidth}),i.catch((function(n){return h.error("The extension provided promise to container."+t+" has failed.\n"+FxImpl.Diagnostics.getLogFriendlyMessage(n)),Q.reject(!1)})).then((function(n){return c(n,u,e,o,v)})).catch((function(n){return n===!1?n:Q.reject(n)}))}var l=u.request;return{openBlade:function(n,t){return c(n,!1,t)},openBladeAsync:function(n,t){return v("openBladeAsync",n,!1,t)},openContextPane:function(n){return c(n,!0)},openContextPaneAsync:function(n){return v("openContextPaneAsync",n,!0)}}}function o(n,t){var i=n[c],r=n[l],u;return r?r:(i()||i(new e.Selectable2({supplyBladeReference:$.noop})),u=FxImpl.shellInterface(i()),p(n,1,u,t))}function g(n,t){
n[l]=t}function nt(n,t){t===void 0&&(t=!0);var i=n;i.preview(!!t)}function b(t,i){return i===void 0&&(i=50),n.isObject(t)&&i&&Object.keys(t).some((function(n){return ko.isSubscribable(t[n])||b(t[n],i-1)}))}var a=n.Resources.Strings.ViewModels.Container,k=window,s=k.fx.environment.isDevelopmentMode||f.Utilities.isDiagnosticsEnabled,h=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/ViewModels.Container"),c,l,w;t.createOnInputsSetCallbacks=v;var d=0,u={},y=(function(){function t(){var n=this,t;this._lifetime=new FxImpl.TriggerableLifetimeManager;this._id=d++;this._msPortalFxNotice=i();this.onInputsSetCallbacks=v();this.notFoundMessage=i();this.unauthorizedMessage=i();this.registerForDispose=function(t){return n._lifetime.registerForDispose(t),n._lifetime};t=this;t.preview=i(!1);s&&(u[this._id]=f.Rpc.Internal.getCurrentCallStack())}return t.VerifyAllContainerViewModelDisposed=function(){var n,t;s&&(n=Object.keys(u),n&&n.length>0&&(t=["The following "+n.length+" ContainerViewModel is created but not disposed:"],
t.push("This indicate a Framework bug. Please open a Framework bug with following call stacks."),n.forEach((function(n,i){t.push("ContainerViewModel ("+i+") callstack:");t.push(u[n])})),h.error(t.join("\n"))))},t.prototype.isDisposed=function(){return this._lifetime.isDisposed()},t.prototype.createChildLifetime=function(){return this._lifetime.createChildLifetime()},t.prototype.dispose=function(){var t=this._lifetime,n;t&&t.dispose();n=this.onInputsSetCallbacks;n&&n.dispose();s&&delete u[this._id]},t.prototype.unauthorized=function(n){n||(n=a.unauthorizedText);this.unauthorizedMessage(n)},t.prototype.notFound=function(n){n||(n=a.notFound);this.notFoundMessage(n)},t.prototype.enableNotice=function(n){this._msPortalFxNotice.peek()?h.error("Notice has been enabled. It cannot be enabled again."):this._msPortalFxNotice(n)},__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.ContainerViewModel=y;t.createClickContext=p;c="_msPortalFxOpenBladeSelectable";l="_clickContext";t.setClickContext=
g;w=(function(n){function t(t){n.call(this);this.configureSelectable=undefined;this[c]=i();var r=t.selectable||null;FxImpl.initializeSelectableViewModel(this,r);this.selectable=r;this.flags=t.flags||0}return __extends(t,n),t.prototype.openBlade=function(n,t){return o(this,!!(this.flags&1)).openBlade(n,t)},t.prototype.openBladeAsync=function(n,t){return o(this,!!(this.flags&1)).openBladeAsync(n,t)},t.prototype.openContextPane=function(n){return o(this,!!(this.flags&1)).openContextPane(n)},t.prototype.openContextPaneAsync=function(n){return o(this,!!(this.flags&1)).openContextPaneAsync(n)},t})(y);t.SelectableContainerViewModel=w;t.markAsPreview=nt})(s=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Dirty=4]="Dirty";n[n.Info=5]="Info";n[n.Upsell=6]="Upsell";n[n.Complete=7]="Complete"})(n.ContentState||
(n.ContentState={}));var t=n.ContentState})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function l(n,t,i){var u=s(n).closeBlade,f=u()&&Q(u()(t,i)),r;return f||(r=Q.defer(),f=r.promise,u.subscribe(n,(function(n){n&&Q(n(t,i)).then(r.resolve,r.reject)}))),f}var e=n.Base,a=e.Diagnostics,v=n.ViewModels,b=FxImpl.Composition,f=v.Internal,h=FxImpl.ViewModels,k=h.CompositionViewModelBase,d=e.Rpc.Internal,o=e.Utilities.clone,g=e.Constants.BladeParameterNames,c=n.Errors,i=ko.observable,s=FxImpl.shellInterface,tt=new a.Log("MsPortalFx/ViewModels/ViewModels.Part"),r="",nt={containerViewModelMissing:r,messageMissing:r,enableNoticeInvoked:r,identitySelectableMissing:r,selectableRegistered:r,selectableInstanceRegistered:r},u=FxImpl.getErrorMap(nt),y,p,w;(function(n){n[n._Internal_None=0]="_Internal_None";n[n.Dashboard=1]="Dashboard";n[n.Blade=2]="Blade"})(t.PartLocation||(t.PartLocation={}));y=t.PartLocation;p=(function(i){function r(t,r,f,
e,o,s){r||u.containerViewModelMissing();i.call(this,t,r,f,e,o);this._logArea=s;r.selectable&&FxImpl.assignSelectable(r,r.selectable);this._hadRevealedContentAtConstruction=t._revealContentCallCount()>0;this._currentOnInputsSetPromise=n.Helpers.Deferred().promise();this.container.operations.add(this._currentOnInputsSetPromise,{blockUi:!this._hadRevealedContentAtConstruction});t._revealContentCallCount.subscribe(r,this._onRevealContent,this)}return __extends(r,i),r.createSelectableViewModel=function(n,i){return new t.Selectable({selectedValue:arguments.length===2?i:!0,isSelected:!!(n&&n.container&&n.container.selectable.isSelected),isCommandSelected:!!(n&&n.container&&n.container.selectable.isCommandSelected)})},r.createClickableLinkViewModel=function(n,i){return new t.ClickableLink(n,i)},r.prototype.updatePartInputValues=function(n,t,r,u,f,e){var o,h,s,c;return this.internal._onInputValuesUpdated&&this.internal._onInputValuesUpdated(n,t,f),o=this._currentOnInputsSetPromise,this._currentOnInputsSetPromise=
null,h=this.internal._revealContentCallCount(),this._onInputsSetContext=d.messageContext,s=i.prototype.updatePartInputValues.call(this,n,t||{},r,u,f,e),s!==null&&(this._currentOnInputsSetPromise=this._updatePartStateAfterOnInputsSetPromise(s),c=this._hadRevealedContentAtConstruction||this.internal._revealContentCallCount()>h,this.container.operations.add(this._currentOnInputsSetPromise,{blockUi:!c})),o&&this.container.operations.remove(o),this._currentOnInputsSetPromise},r.prototype._updatePartStateAfterOnInputsSetPromise=function(t){var i=this,r=t.then((function(){if(n.isNullOrUndefined(i.container.unauthorizedMessage())){var t=!i._currentOnInputsSetPromise||i._currentOnInputsSetPromise===r;t&&i.container.recover()}}),(function(n){var f=FxImpl.Diagnostics.getLogFriendlyMessage(n),t="Part's onInputsSet promise failed.\nError: "+f,u;if(n instanceof c.UnauthorizedDataError||a.Log.writeEntry(2,i._logArea,t),u=!i._currentOnInputsSetPromise||i._currentOnInputsSetPromise===r,u){if(n instanceof c.
Error&&n.handled)return;n instanceof c.UnauthorizedDataError?i.container.unauthorized():i.container.fail(t)}}));return r},r.prototype.updatePartForUnauthorized=function(){var n=this._currentOnInputsSetPromise;this._currentOnInputsSetPromise=null;n&&this.container.operations.remove(n)},r.prototype.invokeClickHandler=function(n,t,i,r,u,e){if(i){var s=this.container,o=f.createClickContext(this.container,n,r,!!(s.flags&1),u,e),h=n===3?[u,o]:[o];f.setClickContext(this.container,o);try{i.apply(t,h)}finally{f.setClickContext(this.container,undefined)}}},r.prototype._onRevealContent=function(){var n=this._currentOnInputsSetPromise,t=n&&this.container.operations.getOptionsForOperation(n);t&&t.blockUi&&this.container.operations.update(n,{blockUi:!1})},r})(k);t.Part=p;w=(function(r){function e(u,f){var e=this,h,o,c;r.call(this,f||{});this.isSelectable=i(!0);this.clickableLink=null;this.failureMessage=i();this.noDataMessage=i();this.height=i(0);this.width=i(0);this.size=i();this.mutate=i();this.menu=
null;this._msPortalFxTriggerValidation=i();this._msPortalFxSuppressAlert=i(!1);this._msPortalFxConfigureAlert=i();this._partState=null;f=f||{initialState:null};this._partState=i(n.Parts.PartState.Ready);this.partState=ko.pureComputed((function(){return e._partState()}));f.clickableLink&&(this.clickableLink=f.clickableLink);this.partTitle=i(f.partTitle||null);this.ariaLabel=i(f.partTitle||null);this.assetName=i(f.assetName||null);this.contentState=i(v.ContentState.None);this.operations=new t.PartOperationList(this);this.registerForDispose(this.operations);this._registeredSelectables=u.registeredSelectables;this._registeredSelectableOptions=u.registeredSelectableOptions;this._registeredSelectablesInitialState=f.initialState&&f.initialState.internal&&f.initialState.internal.registeredSelectables||{};u._onInputValuesUpdated=this._updateConfiguration.bind(this);this._internalViewModel=u;this.location=f.location||y._Internal_None;h=s(this,{autoSize:i(!1),resize:i(null),selectables:i({}),closeBlade:
i(null),menu:ko.observable(null)});this._config=new b.Configuration(f||{},this._handleConfigurationChange.bind(this));f.flags&2&&(this.onLockedBlade={closeCurrentBlade:this.closeCurrentBlade.bind(this)});c=i(0);this.form={valid:c,validationState:c,dirty:i(!1),triggerValidation:function(){if(e._msPortalFxTriggerValidation())return e._msPortalFxTriggerValidation()();var n=Q.defer(),t=e._msPortalFxTriggerValidation.subscribe(e,(function(i){i().then(n.resolve).catch(n.reject).finally((function(){return t.dispose()}))}));return n.promise},configureAlertOnClose:function(n){ko.isObservable(n)?(o&&o.dispose(),o=e.createChildLifetime(),n.subscribeAndRun(o,e._msPortalFxConfigureAlert)):e._msPortalFxSuppressAlert(n===1)}};f.flags&4&&(this.menu={switchItem:function(n){var i=h.menu(),t;i?i.switchItem(n):(t=e.createChildLifetime(),h.menu.subscribe(t,(function(i){i&&i.switchItem(n);t.dispose()})))}})}return __extends(e,r),e.prototype.autoSize=function(){s(this).autoSize(!0)},e.prototype.resizeTo=function(n,
t){n=Math.min(Math.max(n,1),25);t=Math.min(Math.max(t,1),25);s(this).resize({width:n,height:t})},e.prototype.fail=function(t){t||u.messageMissing();this.failureMessage(t);this._partState(n.Parts.PartState.Failed)},e.prototype.recover=function(){this._partState()===n.Parts.PartState.Failed&&(this.failureMessage(null),this._partState(n.Parts.PartState.Ready));this.unauthorizedMessage(null)},e.prototype.revealContent=function(){var n=this._internalViewModel._revealContentCallCount();this._internalViewModel._revealContentCallCount(n+1)},e.prototype.enableNotice=function(){u.enableNoticeInvoked()},e.prototype.registerSelectable=function(n,t,i,r){var l=this,f=this._registeredSelectables()||{},e=this._registeredSelectableOptions,s=e()||{},a=function(){return Object.keys(f).map((function(n){return f[n]})).some((function(n){return i===n}))},c;t&&i||u.identitySelectableMissing();f.hasOwnProperty(t)&&u.selectableRegistered(t);a()&&u.selectableInstanceRegistered();c=this._registeredSelectablesInitialState;
h.isSelectableSetLike(i)&&c.hasOwnProperty(t)&&h.initializeSelectableSet(i,c[t]);r&&(s=o(s,!1),s[t]=r,e(s));f=o(f,!1);f[t]=i;this._registeredSelectables(f);n.registerForDispose((function(){var n=o(l._registeredSelectables(),!1),i=o(e(),!1);delete n[t];delete i[t];l._registeredSelectables(n);e(i)}))},e.prototype.activateConfiguration=function(){return this._config},e.prototype.closeCurrentBlade=function(n){return n&&this.form.configureAlertOnClose(1),l(this,0,n)},e.prototype.closeChildBlade=function(){return l(this,1)},e.prototype.closeContextBlade=function(){return l(this,2)},e.prototype._updateConfiguration=function(t,i,r){var u={},e;n.forEachKey(t||{},(function(n,t){f.isBladeCallerInput(n)||n===g.EditScopeId||(u[n]=t)}));e={parameters:{values:u,metadata:r||{}},settings:i&&i.content||{}};this._config.setValues(e)},e.prototype._handleConfigurationChange=function(n,t){var i=n.parameters,r={inputs:i&&i.values,settings:n.settings,inputsMetadata:i&&i.metadata};return this._internalViewModel.updateConfigFn(
)(r,t)},e})(f.SelectableContainerViewModel);t.PartContainer=w})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function r(n,t){var i=t&&t.actionBar;i instanceof MsPortalFx.ViewModels.ActionBars.Base.ViewModel&&n._actionBar(i)}var t=MsPortalFx.ViewModels,i=(function(n){function t(t,i){n.call(this,t,i);this._actionBar=ko.observable()}return __extends(t,n),t})(t.PartContainer);n.BladeContainer=i;n.bindActionBar=r})(t=n.BladeContainer||(n.BladeContainer={}))})(t=n.Composition||(n.Composition={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t;(function(n){n.name="name";n.nameColumnId=n.name;n.kind="kind";n.resourceGroup="resourceGroup";n.resourceGroupColumnId=n.resourceGroup;n.location="location";n.locationColumnId=n.location;n.locationId="locationId";n.resourceId="resourceId";n.resourceGroupId="resourceGroupId";n.resourceType="resourceType";n.subscription="subscription";n.subscriptionName=
n.subscription;n.subscriptionColumnId=n.subscription;n.subscriptionId="subscriptionId";n.assetType="assetType"})(t=n.ResourceColumns||(n.ResourceColumns={}))})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";n.ManagementGroupId="management_group";n.SupportGroupId="support_group";n.QuickAccessGroupId="quickaccess_group";n.MonitoringGroupId="monitoring_group";n.EventLogsItemId="eventlogs";n.ExportTemplateItemId="exporttemplate";n.MyAccessItemId="access";n.ResourceProvidersItemId="resourceproviders";n.ResourceHealthItemId="resourcehealth";n.ResourceGroupsItemId="resourceGroups";n.ResourcesItemId="resources";n.SubscriptionCertsItemId="subcerts";n.SubscriptionQuotasItemId="quotas";n.SupportHelpRequestItemId="supportrequest";n.TagsItemId="tags";n.LocksItemId="locks";n.TroubleshootItemId="troubleshoot";n.UsersItemId="users";n.PropertiesItemId="properties";n.AlertsItemId="alerts";n.DiagnosticsItemId="diagnostics";n.MetricsItemId="metrics";n.
AppInsightsItemId="appinsights";n.LogAnalyticsItemId="loganalytics";n.LogSearchItemId="logsearch";n.ResourceAdvisorItemId="resourceadvisor"})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function c(n,t,r){var u,o=!1;return n.registerForDispose((function(){o=!0})),i.has(r)?u=i.get(r):(u=Q(f.acquireObject(e,h.getWindowId(t),{})).then((function(t){return n.registerForDispose(t),t.getValue()})),i.set(r,u),n.registerForDispose((function(){i.delete(r)}))),u.then((function(n){return o?Q.reject(new s.DisposedError({message:"supplyMenuDetailBladeReferenceAsync's input lifetime is already disposed",errorLevel:0})):Q(n.supplyBladeReferenceAsync(r))}))}var s=MsPortalFx.Errors,r=MsPortalFx.Base,u=r.Constants,h=n.Extension,f=r.Rpc.Internal.client,e="MenuDetailBladeReferenceLifeExtenderObject",i=new MsPortalFx.Map,o;t.supplyMenuDetailBladeReferenceAsync=c;o=(function(){function n(){this.value=ko.observable()}return n.prototype.supplyBladeReferenceAsync=function(
n){var r=this,t=function(n){return r.value(n),n},i;return n.supplyBladeReference?(i=n.supplyBladeReference(),t(i)):n.supplyBladeReferenceAsync().then((function(n){return t(n)}))},n})();f.registerObjectFactory(e,{allowedOrigin:[u.ExtensionNames.Hubs,u.Shell],allowRemoteChanges:!0,handler:function(){return new o}})})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t;(function(n){function t(n,t,i,r,u){var e=function(n){if(n.length){var r=n.map((function(n){return n.resourceId.toLowerCase()})),t=i().filter((function(n){return r.indexOf(n.resourceId.toLowerCase())===-1}));t.push.apply(t,n);i(t)}},f=t.items.filter(n,r).map(n,(function(n,t){return ko.ignoreDependencies((function(){return u(t)}))}));f.subscribe(n,e).callback(f())}n.ConnectView=t})(t=n.SupplementalDataStreamHelper||(n.SupplementalDataStreamHelper={}))})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function f(n,t){return(n&t)===t}function o(
n,t){return n&&n.viewModel&&f(n.contracts,t)}function i(n,t){return Q(new e.PdlBladeReference(n.detailBlade,n.extension,{parameters:n.detailBladeInputs,onClosed:t}))}function s(n){return t().mapAssetIdToResourceId(n)}function h(n){return t().mapResourceIdToAssetId(n)}function r(n,i){return i===void 0&&(i=!1),t().mapAssetIdToDynamicSelectionAndIcon(n,i)}function c(n,t){return t===void 0&&(t=!1),r(n,t).then((function(n){return n.selection}))}function l(n){return r(n,!0).then((function(n){return i(n.selection)}))}function u(n,i){return i===void 0&&(i=!1),t().mapResourceIdToDynamicSelectionAndIcon(n,i)}function a(n,t){return t===void 0&&(t=!1),u(n,t).then((function(n){return n.selection}))}function v(n,t){return u(n,!0).then((function(n){return i(n.selection,t)}))}function y(n,i){return t().getAssetTypeInformation(n,i)}function p(n){return t().getResourceTypeAssetTypeInformation(n)}function w(n){return t().getResourceAssetInformation(n)}function b(n){return t().signalResourcesChanged(n)}var e=FxImpl.
Composition.Selectable,t=function(){return FxImpl.Assets.runtimeForTesting||FxImpl.Extension.getRuntime()};n.supportsContract=f;n.assetTypeInformationSupportsContract=o;n.mapDynamicBladeSelectionToBladeReference=i;n.mapAssetIdToResourceId=s;n.mapResourceIdToAssetId=h;n.mapAssetIdToDynamicSelectionAndIcon=r;n.mapAssetIdToDynamicSelection=c;n.mapAssetIdToBladeReference=l;n.mapResourceIdToDynamicSelectionAndIcon=u;n.mapResourceIdToDynamicSelection=a;n.mapResourceIdToBladeReference=v;n.getAssetTypeInformation=y;n.getResourceTypeAssetTypeInformation=p;n.getResourceAssetInformation=w;n.signalResourcesChanged=b})(t=n.Assets||(n.Assets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function f(n,t,u){return r(i({name:n,cloudName:t},{forceCloudName:!0}),u)}function r(n,t){return n+"_"+t}function e(n,t){return n?i({name:n,cloudName:t}):n}var u=n.Extension,i=u.getWindowId;t.getAssetTypeOrResourceTypeId=f;t.getAssetTypeOrResourceTypeIdByWindowId=r;t.addCloudNameToAssetTypeId=
e})(t=n.Assets||(n.Assets={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){this._init()}return n.prototype.add=function(n,t){var i,r,u;return n&&(r=this._entries,t?(u=this._names,i=u[t],i===undefined&&(i=r.length,u[t]=i)):i=r.length,r[i]=n),this},n.prototype.remove=function(n){var t=this._entries,i,r;return typeof n=="string"?(i=this._names,r=i[n],isNaN(r)||(delete i[n],t[r]=null)):t.forEach((function(i,r){i===n&&(t[r]=null)})),this},n.prototype.clear=function(){return this._init(),this},n.prototype.fire=function(n){return this._entries.forEach((function(t){t&&t(n)})),this},n.prototype._init=function(){this._entries=[];this._names={}},n})();n.Callbacks=t})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=undefined,r=n.extendArrayIntoMap,u=n.extendStringMapIntoMap,f,e,o,s,h,c,l,a,v,y;t.Shell="fx";t.DefaultCloudName=window.fx.environment.defaultCloudName||"DefaultCloud";
t.HubsCloudName="HubsCloud",(function(n){n.Hubs="HubsExtension";n.Billing="Microsoft_Azure_Billing";n.AzureExpert="Microsoft_Azure_Expert";n.AzureInsights="Microsoft_Azure_Insights";n.AzureMonitoring="Microsoft_Azure_Monitoring";n.ActiveDirectory="Microsoft_Azure_AD";n.Marketplace="Microsoft_Azure_Marketplace";n.Resources="Microsoft_Azure_Resources";n.Support="Microsoft_Azure_Support";n.Websites="WebsitesExtension"})(f=t.ExtensionNames||(t.ExtensionNames={})),(function(n){n.Dashboard="Dashboard";n.ResourceGroups="ResourceGroups";n.BrowseAllBlade="BrowseAll";n.BrowseAllResources="BrowseAllResources";n.BrowseRecentResources="BrowseRecentResources";n.BrowseAllBladeWithType="BrowseAllWithType";n.BrowseServiceBlade="BrowseService";n.BrowseResourceGroupBlade="BrowseResourceGroup";n.BrowseResourceBlade="BrowseResource";n.BrowseInstanceLinkBlade="BrowseInstanceLink";n.Gallery="Gallery";n.StoreGallery="StoreGallery";n.Deployments="Deployments";n.ArmExplorer="ArmExplorer";n.WhatsNew="WhatsNew";n.BrowseDynamicResource=
"BrowseDynamicResource";n.BrowseDynamicAsset="BrowseDynamicAsset";n.SubscriptionDetail="Subscription";n.NonAssetResource="NonAssetResource"})(e=t.AssetNames||(t.AssetNames={})),(function(n){n.Subscriptions="Microsoft.Resources/subscriptions";n.ResourceGroups="Microsoft.Resources/subscriptions/resourcegroups";n.AllResources="Microsoft.Resources/resources";n.RecentResources="Microsoft.Resources/recent"})(o=t.ResourceTypes||(t.ResourceTypes={})),(function(n){var t;(function(n){u(n,{BrowseServicePinnedPart:"BrowseServicePart",BrowseResourcePinnedPart:i,BrowseResourceGroupPinnedPart:i})})(t=n.Hubs||(n.Hubs={}))})(s=t.PartNames||(t.PartNames={})),(function(n){var t,f,e,o;(function(n){r(n,["SubscriptionsBlade"])})(t=n.Billing||(n.Billing={})),(function(n){u(n,{CreateHubBlade:"GalleryCreateBlade",BrowseAllResourcesBlade:i,BrowseLinkBlade:i,BrowseResourceBlade:i,BrowseResourceGroupBlade:i,BrowseServiceBlade:i,NotFoundAssetBlade:i,ResourceGroupMapBlade:i,ResourceMenuBlade:i,ResourceProperties:i,UnauthorizedAssetBlade:
i,UnavailableAssetBlade:i})})(f=n.Hubs||(n.Hubs={})),(function(n){u(n,{GalleryFeaturedMenuItemBlade:i,GalleryResultsListBlade:i,LegalTermsV2Blade:"PCLegalTermsV2Blade"})})(e=n.Marketplace||(n.Marketplace={})),(function(n){r(n,["EventsBrowseBlade"])})(o=n.AzureMonitoring||(n.AzureMonitoring={}))})(h=t.BladeNames||(t.BladeNames={})),(function(n){n.ViewModel="viewModel";n.PartViewModel="partViewModel"})(c=t.ViewModelTypes||(t.ViewModelTypes={})),(function(n){r(n,["FeatureAdoption","FeatureObsolete"])})(l=t.Telemetry||(t.Telemetry={})),(function(n){n.RegisterExtension="TelemetrySharing.registerExtension";n.TraceTelemetry="TelemetrySharing.traceTelemetry"})(a=t.TelemetrySharing||(t.TelemetrySharing={})),(function(n){n.HomeMenuItem="home"})(v=t.GalleryMenuItems||(t.GalleryMenuItems={})),(function(n){n.EditScopeId="editScopeId";n.ReferrerInfo="referrerInfo"})(y=t.BladeParameterNames||(t.BladeParameterNames={}))})(i=t.Constants||(t.Constants={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(
n){var t;(function(t){"use strict";var i,r={doubleclick:"dblclick",mousewheel:"wheel",fxpinblade:"pinblade",fxrightclick:"rightclick",animationstart:i,blur:i,change:i,click:i,contextmenu:i,dragover:i,dragstart:i,dragend:i,dragenter:i,dragleave:i,drop:i,focus:i,hashchange:i,input:i,keydown:i,keypress:i,keyup:i,mousedown:i,mouseenter:i,mouseleave:i,mousemove:i,mouseout:i,mouseover:i,mouseup:i,popstate:i,resize:i,rightclick:i,scroll:i,selectstart:i,transitionend:i,focusin:i,focusout:i,remove:i,fxactionbarclick:i,fxactionbarresize:i,fxactionbarvalidationtargetupdated:i,fxactionbarvalidationtargetmutated:i,fxactivatepairmaster:i,fxaddparts:i,fxautosettings:i,fxbladestatusbarclicked:i,fxbreadcrumbclick:i,fxcollapsedstateupdated:i,fxcontextmenu:i,fxcontextmenurequest:i,fxcontextpaneclosing:i,fxcopybuttonclick:i,fxcreatepart:i,fxcreateabandoned:i,fxensurebladevisible:i,fxensureviewportvisible:i,fxenterorganizemode:i,fxerrorpartclicked:i,fxexitorganizemode:i,fxhomebuttonclick:i,fxopeninnewtab:i,
fxnotificationclickinmenu:i,fxopenshortcutslegend:i,fxpancomplete:i,fxpartcreated:i,fxpartgallerypivotinitialized:i,fxportalcontrolloadfailed:i,fxreadyforfocus:i,fxrearrange:i,fxrecomposeframepart:i,fxredrawblade:i,fxregistermenu:i,fxresourcesummaryready:i,fxrotatetheme:i,fxsettingsbuttonclick:i,fxnotificationsbuttonclick:i,fxshowstartboard:i,fxsizechange:i,fxsizechanged:i,fxsummarycollapsed:i,fxtoastclick:i,fxunpin:i,touchcancel:i,touchend:i,touchmove:i,touchstart:i,lostpointercapture:i,pointercancel:i,pointerdown:i,pointermove:i,pointerup:i};n.forEachKey(r,(function(n,t){r[n]=t||n}));t.EventTypes=r})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function d(n){var t="task:";try{t+=JSON.stringify(n,(function(n,t){var i=t;return n==="args"&&(i=undefined),typeof t=="function"&&(i=t+""),i}))}catch(i){t+="{\nname: "+n.name+" \nFunc: "+(n.scheduledTask+"")+" }"}return t}function v(){}function h(){var n,t,v,u,f;if(!r&&(n=i.first(),n)){var e=l(),
s=[n],h=!1,c=1;for(t=1,v=i.length;t<v;t++)if(u=i[t],u.scheduledExecutionTime<=e)c++,u!==n?s.push(u):h=!0;else break;h&&(i=s.concat(i.slice(t)));f=0;a&&(f=(c>>>2)*1e3);r=setTimeout(k,Math.max(f,n.scheduledExecutionTime-e));o=n}}function g(n){return n===o&&r}function c(){r&&(clearTimeout(r),r=null,o=null)}function y(n,t){var i,u="Error executing \n'"+d(n)+"'"+t?"\nerror:"+t.message:"",r;return e.isInstanceOfErrorType(t,e.Error)?(t.message=u,i=t):(r=new e.Error(u),r.innerErrors.push(t),i=r),i}var e=n.Errors,p=new t.Diagnostics.Log("MsPortalFx/Base/Base.Scheduler"),l=Date.now,a=n.isFeatureEnabled("dataperf"),u="",w={recurring:u,autoRecurring:u,concurrent:u,positiveInt:u},f=FxImpl.getErrorMap(w),r,o,i=[],b=function(){var t,u,n,f,r;try{if(u=i[0],c(u),n=i.shift(),n)if(v(n,!0),a)t=Q.fcall((function(){return n.scheduledTask.apply(n,n.args||[])})).catch((function(t){return Q.reject(y(n,t))})).finally((function(){n.recurring&&s.scheduleTask(n)}));else try{f=n.scheduledTask.apply(n,n.args||[]);t=Q(f)}catch(e)
{r=y(n,e);p.error(r);t=Q.reject(r)}finally{n.recurring&&s.scheduleTask(n)}}finally{h()}return t},k=b,s=(function(){function t(){}return t.scheduleTask=function(t,r){var s,u,a;t.recurring&&(t.absoluteTime&&f.recurring(),t.isAsync&&f.autoRecurring());!r&&i.indexOf(t)>=0&&f.concurrent();t.name||(t.name="Anonymous "+n.getUniqueId());var y=l(),e=t,o=e.absoluteTime;for(o||(s=e.delayInMs,(isNaN(s)||s<=0)&&f.positiveInt(),o=y+s),e.scheduledExecutionTime=o,u=0,a=i.length;u<a;u++)if(i[u].scheduledExecutionTime>o)break;i.splice(u,0,e);v(e);u===0&&c();h()},t.deleteTask=function(n){var t=i.filter((function(t){return t!==n}));t.length!==i.length&&(i=t,g(n)&&c(),h())},t})();t.Scheduler=s})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function r(n,t){return new FxImpl.Security.AuthTokenCacheImpl(n,t)}function u(n){return t().getAuthorizationToken(n)}function f(){return t().getUserInfo()}function e(n,i){return t().hasPermission(n,i,undefined)}
function o(n,i){return t().assetHasPermission(n,i)}var i=FxImpl.Extension,t=i.getRuntime;n.createAuthTokenCache=r;n.getAuthorizationToken=u;n.getUserInfo=f;n.hasPermission=e;n.assetHasPermission=o})(t=n.Security||(n.Security={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function o(n,i){if(i?i.token=n:i={token:n},n&&n.expiresAt>0){var u=Date.now(),r=n.expiresAt-t.tokenRefreshBeforeExpiryTimespan;i.expiresAt=n.expiresAt;i.refreshAfter=r<u?-1:r}else i.expiresAt=-1,i.refreshAfter=-1;return i}function y(n,t,i){return l().hasPermission(n,t,i)}var u=MsPortalFx.Base,h=u.Utilities,f=n.Extension,c=new u.Diagnostics.Log("MsPortalFx/Base/Internal/Base.Security"),l=f.getRuntime,e=1e3,i=6e4,a=4,v=MsPortalFx.forEachKey,r,s;t.tokenRefreshBeforeExpiryTimespan=6e5;r=f.selfCloudName||"*";t.tokenErrors={unknown:"Unknown",accessDenied:"AccessDenied",sessionEnded:"SessionEnded",credentialsExpired:"CredentialsExpired",networkError:"NetworkError",requiresMFA:
"RequiresMfa",accountDisabled:"AccountDisabled",nullToken:"NullToken"};s=(function(){function u(t,i){var u=this;this._cachedTokenMap=n.getCloudMap();this._getTokenWorker=t;i&&v(i,(function(n,t){u._cachedTokenMap.getOrSet(r,{})[n]=o(t)}))}return u.prototype.getToken=function(n){var s=this._stalledPromise,o;if(s)return s;n=n||{};var u={cloudName:n.cloudName||r,resourceName:n.resourceName||""},h=u.resourceName,c=this._cachedTokenMap.getOrSet(u.cloudName,{}),t=c[h],f=Date.now(),i;if(t){if(i=t.refreshAfter,t.token&&i>0&&i>f)return Q(t.token)}else t={token:null,expiresAt:-1,refreshAfter:-1},c[h]=t;return(o=t.expiresAt,!t.token||o>0&&o<f)?(t.token=null,t.expiresAt=-1,t.refreshAfter=-1,this._refreshTokenWorker(u,!1,e,t)):(i>0&&i<f&&this._refreshTokenWorker(u,!0,e,t),Q(t.token))},u.prototype.getTokenExpiresAt=function(n,t){var i=this._cachedTokenMap.getOrSet(n,{})[t||""];return i&&i.expiresAt},u.prototype._refreshTokenWorker=function(n,t,i,r){if(r.tokenPromise)return r.tokenPromise;var u=h.extend(
n,{isBackground:t,ignoreRejection:!1}),f=this._refreshTokenWorkerInternal(u,i,r);return r.tokenPromise=f.catch((function(n){var t=n,i;return u.ignoreRejection?(i=new MsPortalFx.Errors.CanceledError("GetAuthorizationTokenOptionsExtended2.ignoreRejection === true"),i.innerErrors.push(n),t=i):t&&t.message&&(t.message="Base.Security: Unexpected failure when getting token. Error:"+t.message+"."),Q.reject(t)})).finally((function(){r.tokenPromise=null}))},u.prototype._refreshTokenWorkerInternal=function(n,r,u){var f=this;return Q(this._getTokenWorker(n)).then((function(e){var s=e||{},v=s.token,y,h,l;if(v)return o(v,u),v;if(n.isBackground)return n.ignoreRejection=!0,Q.reject(e);y=s.error;switch(y){case t.tokenErrors.sessionEnded:l=f._stalledPromise;l||(f._stalledPromise=l=Q.defer().promise);h=l;break;case t.tokenErrors.accessDenied:n.ignoreRejection=!0;h=Q.reject(e);break;default:y===t.tokenErrors.unknown&&c.error("Failed to get token unknown error. Message:"+s.errorMessage+". Error:"+s.error+".");
h=Q.delay(r).then((function(){var t=r>=i?i:Math.min(r*a,i);return u.tokenPromise=null,f._refreshTokenWorkerInternal(n,t,u)}))}return h}))},u})();t.AuthTokenCacheImpl=s;t.hasPermission=y})(t=n.Security||(n.Security={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){"use strict";function w(n){var t=y(n);return t[s]=!0,t}function b(n){return n&&n.hasOwnProperty(s)}function k(n){return f(n)}function y(n,t,i){var w=e(n),s=w?n.peek():n,f={},b,d,k,p;if(v&&(b=t||new WeakMap,d=w||Array.isArray(n)||u(n)),d){if(k=b.get(n),k===c)return a("toSerializableObjectImpl detects a cycle. root: "+r.getObjectDescriptor(n,!1),n)||l;if(k!==undefined)return k;b.set(n,c)}return p=i||function(n){return y(n,b,p)},w&&(f.t=1),Array.isArray(s)?w?(n.splice&&(f.t=2),f.v=p(s)):f.v=s.map(p):e(s)?f.v=p(s):u(s)?w?f.v=p(s):(f.v={},h(s).forEach((function(n){o(n)&&(f.v[n]=p(s[n]))}))):s instanceof Date?(f.d=!0,f.v=s.valueOf()):f.v=s,d&&b.set(n,f),f}function f(n){var i,
t=n.v,e=n.t,s=!1,r;return t===l.v&&(t=undefined),e&&u(t)&&t.hasOwnProperty("v")&&(i=f(t),s=!0),s||(Array.isArray(t)?i=t.map(f):u(t)?(i={},h(t).forEach((function(n){o(n)&&(i[n]=f(t[n]))}))):i=n.d?new Date(t):t),r=i,e===1?r=ko.observable(i):e===2&&(r=ko.observableArray(i)),r}var r=n.Base.Utilities,e=ko.isObservable,o=r.isSerializableProperty,u=n.isObject,s="#fxSerialized#",p=new t.Diagnostics.Log("MsPortalFx/Base/Base.Utilities.Serialization"),h=Object.getOwnPropertyNames,v;i.toSerializableObject=w;i.isSerializedObject=b;i.fromSerializableObject=k;var c={},l={v:r.generateNonSerializableProperty("object_cycle_detected")},a=function(n){p.error(n+"at callstack:"+r.getCurrentCallStack(!0))},d;d=a;v=!!window.WeakMap})(r=i.Serialization||(i.Serialization={}))})(r=i.Internal||(i.Internal={}))})(i=t.Utilities||(t.Utilities={}))})(t=n.Base||(n.Base={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t,i,r;(function(n){n[n.None=0]="None";n[n.Master=1]="Master";n[n.Details=
2]="Details"})(n.BladePairing||(n.BladePairing={}));t=n.BladePairing,(function(n){n[n.None=0]="None";n[n.Fullscreen=1]="Fullscreen";n[n.Windowed=2]="Windowed"})(n.BladePairingMode||(n.BladePairingMode={}));i=n.BladePairingMode,(function(n){n[n.Minimized=0]="Minimized";n[n.Normal=1]="Normal";n[n.Maximized=2]="Maximized"})(n.DisplayState||(n.DisplayState={}));r=n.DisplayState})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Action=1]="Action";n[n.Info=2]="Info";n[n.Create=3]="Create";n[n.Context=4]="Context";n[n.Help=5]="Help";n[n.Basic=6]="Basic";n[n.ContextAction=7]="ContextAction";n[n.BasicWithCommands=8]="BasicWithCommands";n[n.Hub=9]="Hub";n[n.HubSubMenu=10]="HubSubMenu";n[n.ResourceSetting=11]="ResourceSetting";n[n.App=12]="App"})(n.BladeStyle||(n.BladeStyle={}));var t=n.BladeStyle})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Small=0]="Small";
n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.Menu=51]="Menu";n[n.Expandable=101]="Expandable"})(n.BladeWidth||(n.BladeWidth={}));var t=n.BladeWidth})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium"})(n.PairParentWidth||(n.PairParentWidth={}));var t=n.PairParentWidth})(t=n.Blades||(n.Blades={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=MsPortalFx.Base,f=MsPortalFx.Errors,r=MsPortalFx.Helpers.resolve(),u=ko.observable,e=(function(){function t(n,t,r){var f=this,e;this._loadedCacheEntry=u(null);this._isDisposed=!1;this._requestInProgress=u();this._dataSource=n;this._errorNotificationTarget=t;this._interceptNotFound=r&&r.interceptNotFound!==undefined?r.interceptNotFound:!0;i.ProxiedObservables.markNonSerializable(this);e=this._lifetime=t;this._isLoading=ko.computed(e,(function(){return!!f._requestInProgress()}));e.registerForDispose(
(function(){f._isDisposed=!0;f._cancelInProgressRequest();f._releaseCurrentContents()}))}return Object.defineProperty(t.prototype,"loading",{get:function(){return this._isLoading},enumerable:!0,configurable:!0}),t.prototype.fetch=function(t){var f=this,e=this._requestInProgress,o,s,h,u;return this._isDisposed?r:(o=this._currentCacheEntryDisposer,s=function(){o&&o.dispose()},this._currentParams=t,this._cancelInProgressRequest(),this._currentParams===null||this._currentParams===undefined)?(this._loadedCacheEntry(null),s(),r):(this._currentCacheEntryDisposer=new n.TriggerableLifetimeManager,h=new i.Promises.CancelationToken,u={cancelationToken:h,cancelablePromise:i.Promises.wrapWithCancelablePromise(this._dataSource.fetch(t,this._currentCacheEntryDisposer),h),externalPromise:null},s(),e(u),u.cancelablePromise.then((function(n){f._loadedCacheEntry(n);e(null)}),(function(){e(null);f._loadedCacheEntry(null)})),u.externalPromise=u.cancelablePromise.then((function(){})),u.externalPromise.then(null,(function(
n){f._handleFetchRejections(n)})),u.externalPromise)},t.prototype._cancelInProgressRequest=function(){var n=this._requestInProgress;n()&&(n().cancelationToken.cancel(),n(null))},t.prototype._releaseCurrentContents=function(){this._currentCacheEntryDisposer&&(this._currentCacheEntryDisposer.dispose(),this._currentCacheEntryDisposer=null)},t.prototype._handleFetchRejections=function(n){if(n instanceof f.NotFoundDataError&&this._interceptNotFound!==!1){var t=n;t.handled=!0;typeof this._interceptNotFound=="function"?this._interceptNotFound(this._currentParams):this._errorNotificationTarget.notFound&&this._errorNotificationTarget.notFound()}},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],t)})();t.ObjectView=e})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var r=MsPortalFx.Base,i=MsPortalFx.Data,u=(function(){function n(){r.ProxiedObservables.markNonSerializable(this);this._atomizationCache=new i.ObjectCache({serializeKey:function(n){return JSON.
stringify([n.type,n.id])},supplyValue:function(){return null}})}return n.prototype.getEntity=function(n,t,i){var r={type:n,id:t},u;return this._atomizationCache.hasEntry(r)&&(u=this._atomizationCache.getValue(r,i)),u},n.prototype.addEntity=function(n,t,i,r){this._atomizationCache.insertValueIfNotPresent({type:n,id:t},i,r)},n.prototype.releaseEntities=function(){},n})(),f;t.RefCountingAtomizationContext=u,(function(t){function u(i){i=i||r;var u=t.atomizationContextCollection[i];return u||(u=n.Data.AtomizationContext.createInstance(),t.atomizationContextCollection[i]=u),u}function f(n){if(!n)return!1;var t=i.Metadata.getTypeMetadata(n);return!!(t&&t.hasGloballyUniqueId&&i.Metadata.typeHasId(n))}function e(){return new n.Data.RefCountingAtomizationContext}t.atomizationContextCollection={};var r="__default__";t.get=u;t.canAtomizeType=f;t.createInstance=e})(f=t.AtomizationContext||(t.AtomizationContext={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";
var u=MsPortalFx.Base,f=MsPortalFx.Data,e=0,h=new u.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.DataCache"),i="",o={loaderConflict:i,getSerialize:i,dataCacheProps:i,establishDataSet:i},r=n.getErrorMap(o),s=(function(){function n(n){var t=this,i,o;this._dataSetUniqueIdWithinDataCache=0;u.ProxiedObservables.markNonSerializable(this);this._dataCacheUniqueId=++e;n.loader?(this._loader=n.loader,(n.sourceUri||n.httpMethod)&&r.loaderConflict(),this._logIgnoredDataCacheLoaderOptions(n)):n.sourceUri||n.supplyData&&n.serializeParams?(this._loader=new f.DataCacheLoader2(n),i=n.httpMethod&&n.httpMethod.toLowerCase()!=="get",i&&!n.serializeParams&&r.getSerialize()):r.dataCacheProps();o={collectEfficiencyTelemetry:!0,supplyValue:function(n,i){var r=t._createUniqueDataSetName();return t._supplyValue(r,n,i)},tryFindValueInRelatedCache:function(n,i){var u=t._tryFindDataInRelatedCache(n,i);if(u){var e=ko.toJS(u),r=t._createUniqueDataSetName(),o=t._establishDataSet(r,n,e,i),f=Q(o);return f.dataSetName=
r,t._doesPoll()&&t._supplyValue(r,n,i),{value:f}}return null},serializeKey:function(n){return t._loader.serializeParams(n)},evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n){var i=function(){t._loader.disposeDataSet(n)};n.state&&n.state()!=="pending"||n.isFulfilled&&n.isFulfilled()||n.isRejected&&n.isRejected()?i():n.then(i,i)}};this._cacheByParams=new f.ObjectCache(o)}return n.prototype.fetch=function(n,t){var i=this._cacheByParams,r=i.getValue(n,t);return r.then(null,(function(){i.immediatelyEvictEntry(n)})),r},n.prototype.refresh=function(n,t){var r=this._cacheByParams.hasEntry(n),i=this.fetch(n,t);return r?this._loader.refreshDataSet(i):i},n.prototype.refreshAll=function(n){var t=this;this._forEachEntry((function(i,r){var u=!n||n(i);u&&t._loader.refreshDataSet(r)}))},n.prototype.forceRemove=function(n){this._cacheByParams.immediatelyEvictEntry(n)},n.prototype.applyChanges=function(n,t){var i=this;this._forEachEntry((function(t,r,u){u&&
n(t,u);var e=r.dataSetName,f=i._loader;f.isLoadingDataSet(e)&&f.refreshDataSet(r)}),t)},n.prototype.dispose=function(){this._cacheByParams.dispose()},n.prototype._doesPoll=function(){return this._loader._doesPoll()},n.prototype._findEntity=function(n,t){var r=this,i;return this._forEachEntry((function(u,f,e){if(!i){var o=r._getDataFromDataSet(e);i=n(u,o,t)}})),i},n.prototype.dump=function(n){var t=[];if(this._forEachEntry((function(n,i,r){t.push(ko.toJS({key:n,data:!r?"<null dataSet>":r.data}))})),n)return t;console.log(JSON.stringify(t,null,4))},n.prototype._tryFindDataInRelatedCache=function(){return null},n.prototype._forEachEntry=function(n,t){var i=this;this._cacheByParams.forEachEntry((function(r,u){if(!t||t(r)){var f=u.dataSetName,e=i._loader.getLoadedDataSet(f);n(r,u,e)}}))},n.prototype._supplyValue=function(n,t,i){return this._loader.loadDataSetForParams(n,t,i)},n.prototype._establishDataSet=function(n,t,i,u){return this._loader.establishDataSet||r.establishDataSet(),this._loader.establishDataSet(
n,t,i,u)},n.prototype._createUniqueDataSetName=function(){return"DataCache:"+this._dataCacheUniqueId+":"+ ++this._dataSetUniqueIdWithinDataCache},n.prototype._logIgnoredDataCacheLoaderOptions=function(){},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],n)})();t.DataCache=s})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var t=MsPortalFx.Base,i=MsPortalFx.Helpers.resolve(),r=ko.observableArray,f=new t.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.DataView"),u=(function(n){function u(t,i,u){var f=this;n.call(this,t,i,u);this._partialErrors=r();ko.reactor(i,(function(){var n=f._loadedCacheEntry();f._partialErrors(n&&n.partialErrors()||[])}))}return __extends(u,n),Object.defineProperty(u.prototype,"_refreshableDataSource",{get:function(){return this._dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),u.prototype.refresh=
function(){var n=this._requestInProgress,r,u,f;if(this._isDisposed||(r=this._currentCacheEntryDisposer,!r))return i;if(!n()){if(!this._loadedCacheEntry())return this.fetch(this._currentParams);u=new t.Promises.CancelationToken;n({cancelationToken:u,cancelablePromise:t.Promises.wrapWithCancelablePromise(this._refreshableDataSource.refresh(this._currentParams,r),u),externalPromise:null});f=function(){n(null)};n().cancelablePromise.then(f,f);n().externalPromise=n().cancelablePromise.then((function(){}))}return n().externalPromise},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],u)})(n.ObjectView);n.DataView=u})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var h=MsPortalFx,f=h.Base,e=h.Data,i=f.Rpc.Internal,a=f.Utilities,v=n.Data,c=new f.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),o,s,l;t.saveSerializedEditScopeEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.saveSerializedEditScope");t.loadSerializedEditScopeEndPoint=
new i.FuncEndPointDefinition("FxImpl.Data.loadSerializedEditScope");t.onEditScopeDiscardedEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.onEditScopeDiscarded");t.updateEditScopeIsSavingStateEndPoint=new i.ActionEndPointDefinition("FxImpl.Data.updateEditScopeIsSavingState");var r="",y={dataCachePolling:r,viewUnloaded:r,serializeParams:r,fetchPrereq:r,existingPrereq:r,newPrereq:r},u=n.getErrorMap(y);(function(n){n[n.LoadOriginalDataFailed=0]="LoadOriginalDataFailed";n[n.LoadEditsFailed=1]="LoadEditsFailed";n[n.ApplyEditsFailed=2]="ApplyEditsFailed"})(t.FetchEditScopeError||(t.FetchEditScopeError={}));o=t.FetchEditScopeError;s=(function(){function n(n){var r=this;n===void 0&&(n=i.client);this._caches=[];t.onEditScopeDiscardedEndPoint.register(n,["fx"],(function(n){r._caches.forEach((function(t){t.onEditScopeDiscarded(n)}))}))}return n.prototype.register=function(n){this._caches.push(n)},n.prototype.deregister=function(n){this._caches.remove(n)},n})();t.EditScopeDiscardedReceiver=s;t.editScopeDiscardedReceiver=
new s;l=(function(){function r(n,i){var o=this,h,s;this._editScopeEditsChangedSubs={};this._loadEdits=i&&i.loadEdits||r._remoteLoadEdits;this._saveEdits=i&&i.saveEdits||r._remoteSaveEditScope;this._updateEditScopeIsSavingState=i&&i.updateEditScopeIsSavingState||r._remoteUpdateEditScopeIsSavingState;this._entityTypeName=n.entityTypeName;h=this._options=a.clone(n);s=h.dataCache;s&&s._doesPoll()&&u.dataCachePolling();f.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new e.ObjectCache({supplyValue:function(n,t){return o._getEditScopeForKey(n,t)},serializeKey:function(n){return o._serializeKey(n)},onEntryDisposed:function(n,t){var i=o._serializeKey(t),r=o._editScopeEditsChangedSubs[i];r&&(delete o._editScopeEditsChangedSubs[i],r.dispose());n.then((function(n){n.dispose()}))}});t.editScopeDiscardedReceiver.register(this)}return r.prototype.createView=function(n,t){return new e.EditScopeView(this,n,t||{})},r.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)}
,r.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,t)})))})),Q.all(t)},r.prototype.dispose=function(){var i=this._cacheByParams,n,r;if(i&&(i.dispose(),this._cacheByParams=null),n=this._editScopeEditsChangedSubs,n){for(r in n)n[r].dispose();this._editScopeEditsChangedSubs=null}t.editScopeDiscardedReceiver.deregister(this)},r.prototype.disposeAndDiscardEdits=function(n,t){var i=t.editScope();i||u.viewUnloaded();i.dispose();r._remoteSaveEdits(n,{edits:[]})},r.prototype.onEditScopeDiscarded=function(n){return this.forEachEditScope((function(t,i){t!==n||i.saving()||i.revertAll()}))},r._remoteSaveEditScope=function(n,t){r._remoteSaveEdits(n,t.getEdits())},r._remoteSaveEdits=function(n,i){t.saveSerializedEditScopeEndPoint.invoke(r._rpcClient,"fx",{editScopeId:n,edits:i})},r._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.invoke(r._rpcClient,"fx",n).then(null,(function(n){c.error("Loading of EditScope edits from user settings service failed.");
throw n;}))},r._remoteUpdateEditScopeIsSavingState=function(n,i){t.updateEditScopeIsSavingStateEndPoint.invoke(r._rpcClient,"fx",{editScopeId:n,isSaving:i})},Object.defineProperty(r.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!0,configurable:!0}),r.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,r,t,f;return i&&(r=this._options,t=r.serializeParams,t||(t=r.serializeKeyOrQuery,t||(f=typeof i,f==="number"||f==="string"?t=JSON.stringify:u.serializeParams())),e+=":"+t(i)),e},r.prototype._getEditScopeForKey=function(n,t){var r,i,f;return n.editScopeId||u.fetchPrereq(),i=this._options,f=n.params,f!==undefined?i.supplyExistingData?r=function(){return i.supplyExistingData(f,t)}:i.dataCache?r=function(){var n=i.dataCache.createView(t);return n.fetch(f).then((function(){return n.data}))}:u.existingPrereq():i.supplyNewData?r=function(){return Q(i.supplyNewData())}:i.entityTypeName?r=function(){return Q(e.Metadata.createEmptyObject(i.entityTypeName))}
:u.newPrereq(),this._acquireEditScope(n,r,t,i.entityTypeName)},r.prototype._acquireEditScope=function(t,i,r,u){var f=this,e=Q.defer();return i().then((function(i){var c,o,h,s;if(!f._isDisposed){if(o=f._options,o.refreshEditScope?c=function(i){var r=new n.TriggerableLifetimeManager;return o.refreshEditScope(t.params,r,i).finally((function(){r.dispose()}))}:o.dataCache&&(c=function(){var i=new n.TriggerableLifetimeManager,r=o.dataCache.createView(i);return r.fetch(t.params).then((function(){return r.data})).finally((function(){i.dispose()}))}),h=t.editScopeId,s=v.createEditScope(i,{kind:o.kind,typeName:u,refresh:c,save:o.saveEditScopeChanges&&function(i,r,u){f._updateEditScopeIsSavingState(h,!0);var e=new n.TriggerableLifetimeManager;return f._cacheByParams.getValue(t,e),i.saving.subscribe(e,(function(n){n||(e.dispose(),f._updateEditScopeIsSavingState(h,!1))})),o.saveEditScopeChanges(t.params,i,r,e,u)}}),o.onEditScopeCreated)o.onEditScopeCreated(r,s);f._loadAndApplyEdits(s,h).then((function(){if(!f.
_isDisposed){var n=f._serializeKey(t);f._editScopeEditsChangedSubs[n]=s.editsChanged.subscribe((function(){f._saveEdits(h,s)}));e.resolve(s)}}),(function(n){e.reject(n)}))}}),(function(n){e.reject(n)})),e.promise},r.prototype._loadAndApplyEdits=function(n,t){var i=this;return this._loadEdits(t).then((function(t){if(!i._isDisposed)return t&&!n.applyEdits(t)?(c.warning("Application of EditScope edits from user settings service failed."),Q.reject(o.ApplyEditsFailed)):void 0}),(function(){return o.LoadEditsFailed}))},r._rpcClient=i.client,r=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],r)})();t.EditScopeCache=l})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var u=MsPortalFx.Base,l=u.Rpc.Internal,e=MsPortalFx.Helpers,o=e.resolve,a=u.Utilities,s=e.Deferred,f=MsPortalFx.Data,h=new u.Diagnostics.Log("MsPortalFx/Data/Internal/Internal.Data.EditScopeCache"),c=n.Data.editScopeDiscardedReceiver,i="",v={noEditScope:i,missingSerializeParams:i,missingSupplyExistingData:
i,fetchNewPrereq:i,fetchExistingPrereq:i},r=n.getErrorMap(v),y=(function(){function i(n,t){var r=this;this._editScopeEditsChangedSubs={};this._loadEdits=t&&t.loadEdits||i._remoteLoadEdits;this._saveEdits=t&&t.saveEdits||i._remoteSaveEditScope;this._entityTypeName=n.entityTypeName;this._options=a.clone(n);u.ProxiedObservables.markNonSerializable(this);this._cacheByParams=new f.ObjectCache({supplyValue:function(n,t){return r._getEditScopeForKey(n,t)},serializeKey:function(n){return r._serializeKey(n)},onEntryDisposed:function(n,t){var i=r._serializeKey(t),u=r._editScopeEditsChangedSubs[i];u&&(delete r._editScopeEditsChangedSubs[i],u.dispose());n.then((function(n){n.dispose()}))}});c.register(this)}return i.prototype.createView=function(n,t){return new f.EditScopeView(this,n,t||{})},i.prototype.fetch=function(n,t){return this._cacheByParams.getValue(n,t)},i.prototype.forEachEditScope=function(n){var t=[];return this._cacheByParams.forEachEntry((function(i,r){t.push(r.then((function(t){n(i.editScopeId,
t)})))})),Q.all(t)},i.prototype.dispose=function(){var t=this._cacheByParams,n,i;if(t&&(t.dispose(),this._cacheByParams=null),n=this._editScopeEditsChangedSubs,n){for(i in n)n[i].dispose();this._editScopeEditsChangedSubs=null}c.deregister(this)},i.prototype.disposeAndDiscardEdits=function(n,t){var u=t.editScope();u||r.noEditScope();u.dispose();i._remoteSaveEdits(n,{edits:[]})},i.prototype.onEditScopeDiscarded=function(n){return this._revertEditScope(n)},i._remoteSaveEditScope=function(n,t){i._remoteSaveEdits(n,t.getEdits())},i._remoteSaveEdits=function(n,r){t.saveSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",{editScopeId:n,edits:r})},i._remoteLoadEdits=function(n){return t.loadSerializedEditScopeEndPoint.invoke(i._rpcClient,"fx",n).then(null,(function(n){h.error("Loading of EditScope edits from user settings service failed.");throw n;}))},Object.defineProperty(i.prototype,"_isDisposed",{get:function(){return this._cacheByParams===null},enumerable:!0,configurable:!0}),i.prototype._revertEditScope=
function(n){return this.forEachEditScope((function(t,i){t===n&&i.revertAll()}))},i.prototype._serializeKey=function(n){var e=n.editScopeId,i=n.params,u,t,f;return i&&(u=this._options,t=u.serializeParams,t||(t=u.serializeKeyOrQuery,t||(f=typeof i,f==="number"||f==="string"?t=JSON.stringify:r.missingSerializeParams())),e+=":"+t(i)),e},i.prototype._getEditScopeForKey=function(n,t){var e,i=this._options,u=n.params;return n.editScopeId&&(u||u===null)?(i.supplyExistingData||r.missingSupplyExistingData(),e=function(){return i.supplyExistingData(u,t)}):n.editScopeId&&u===undefined&&i.supplyNewData?e=function(){return o(i.supplyNewData())}:n.editScopeId&&!u&&i.entityTypeName?e=function(){return o(f.Metadata.createEmptyObject(i.entityTypeName))}:i.supplyNewData||i.entityTypeName?r.fetchExistingPrereq():r.fetchNewPrereq(),this._acquireEditScope(n,e,t,i.entityTypeName)},i.prototype._acquireEditScope=function(i,r,u,f){var e=this,o=s(),c=o.promise(),h=i.editScopeId;return r().then((function(t){if(!e._isDisposed)
{var r=e._options,s=n.Data.createEditScope(t,{kind:r.kind,typeName:f,refresh:r.refreshEditScope&&function(t){var u=new n.TriggerableLifetimeManager;return r.refreshEditScope(i.params,u,t).finally((function(){u.dispose()}))},save:r.saveEditScopeChanges&&function(t,u,f){var e=new n.TriggerableLifetimeManager;return r.saveEditScopeChanges(i.params,t,u,e,f).finally((function(){e.dispose()}))}});if(r.onEditScopeCreated)r.onEditScopeCreated(u,s);e._loadAndApplyEdits(s,h).then((function(){if(!e._isDisposed){var n=e._serializeKey(i);e._editScopeEditsChangedSubs[n]=s.editsChanged.subscribe((function(){e._saveEdits(h,s)}));o.resolve(s)}}),(function(n){o.reject(n)}))}}),(function(){o.reject(t.FetchEditScopeError.LoadOriginalDataFailed)})),c},i.prototype._loadAndApplyEdits=function(n,i){var r=this;return this._loadEdits(i).then((function(i){if(!r._isDisposed){var u=s();return i?n.applyEdits(i)?u.resolve():(h.warning("Application of EditScope edits from user settings service failed."),u.reject(t.FetchEditScopeError.
ApplyEditsFailed)):u.resolve(),u.promise()}}),(function(){return t.FetchEditScopeError.LoadEditsFailed}))},i._rpcClient=l.client,i=__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],i)})();t.EditScopeCacheOld=y})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function c(n){f.client.invokeRpc(e.RpcMethods.submitObjectCacheTelemetry,MsPortalFx.Base.Constants.Shell,n)}function l(n,t){if(u){i=[];var r=n||h,f=t||c,e=window.setInterval((function(){i.length>0&&(f(i),i=[])}),r);return{dispose:function(){window.clearInterval(e)}}}}function a(){f.client.registerRpcEndPoint(e.RpcMethods.submitObjectCacheTelemetry,{allowedOrigin:null,handler:function(n,t){n.forEach((function(n){o.trace({extension:t.srcWindowId,timestamp:n.timestamp,source:n.source,action:"ObjectCacheRead",data:n})}))}})}var f=MsPortalFx.Base.Rpc.Internal,e=n.Constants,o=MsPortalFx.Base.Diagnostics.Telemetry,i=[],h=5e3,u=MsPortalFx.isFeatureEnabled("dataobjectcachetelemetry"),r=Date.now,s;t.
beginTelemetrySubmission=l;t.registerTelemetrySubmissionHandler=a;s=(function(){function n(){this._evictedEntryDateValues={};this._evictedEntryCircularBuffer=[]}return Object.defineProperty(n,"maxTrackedEvictedEntries",{get:function(){return 1e3},enumerable:!0,configurable:!0}),n.prototype.recordCacheRead=function(n,t){u&&(t?this._recordCacheHit(n):this._recordCacheMiss(n))},n.prototype.recordEviction=function(n){u&&(this._ensureEntryNotTrackedAsEvicted(n),this._evictedEntryDateValues[n]=r(),this._evictedEntryCircularBuffer.push(n),this._pruneExcessiveEvictedEntries())},n._getCurrentTelemetrySource=function(){var n=o.Context.getCompositionItemContext();return n?n.id:null},n.prototype._recordCacheHit=function(t){this._ensureEntryNotTrackedAsEvicted(t);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!0,secondsSinceEviction:null})},n.prototype._recordCacheMiss=function(t){var u=null;this._evictedEntryDateValues.hasOwnProperty(t)&&(u=(r()-this._evictedEntryDateValues[
t])/1e3);i.push({timestamp:r(),key:t,source:n._getCurrentTelemetrySource(),wasHit:!1,secondsSinceEviction:u})},n.prototype._ensureEntryNotTrackedAsEvicted=function(n){if(this._evictedEntryDateValues.hasOwnProperty(n)){delete this._evictedEntryDateValues[n];var t=this._evictedEntryCircularBuffer.indexOf(n);t>=0&&this._evictedEntryCircularBuffer.splice(t,1)}},n.prototype._pruneExcessiveEvictedEntries=function(){while(this._evictedEntryCircularBuffer.length>n.maxTrackedEvictedEntries){var t=this._evictedEntryCircularBuffer.shift();delete this._evictedEntryDateValues[t]}},n})();t.ObjectCacheTelemetryCollector=s})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function h(n){return n.evictionDelay!==undefined&&n.extendEntryLifetimes&&u.delayAndLifetime(),n.extendEntryLifetimes?o.defaultCacheEvictionDelay:(n.evictionDelay>f&&u.maxEvictionDelay(f),n.evictionDelay)}var i=Object.getOwnPropertyNames,o=window.fx.environment,f=6e4,r="",s={delayAndLifetime:r,
maxEvictionDelay:r,nullKey:r,nullCreateCallback:r,cacheDisposed:r},u=n.getErrorMap(s),c=(function(){function n(n){this._isDisposed=!1;this._evictionDelayMilliseconds=null;this._evictionTimeoutHandlesByKey={};this._entriesByKey={};this._entriesByReferrerThenKey={};MsPortalFx.Base.ProxiedObservables.markNonSerializable(this);n&&(this._onDisposeEntryCallback=n.onEntryDisposed,this._evictionDelayMilliseconds=h(n))}return n.prototype.getEntry=function(n,t,i){n||u.nullKey();i||u.nullCreateCallback();this._isDisposed&&u.cacheDisposed();var r=this._entriesByKey[n];return r||(r=new e(n,i()),t&&(this._entriesByKey[n]=r)),t?(this._ensureReferenceExists(r,t),this._cancelAnyDelayedEviction(r.key)):this._entryHasDelayedEvictionInProgress(r)||this._immediateEvictEntryIfNoReferences(r),r.value},n.prototype.hasEntry=function(n){return n in this._entriesByKey},n.prototype.dissociateEntry=function(n,t){var u=this._entriesByKey[n],r;u&&(u.dissociate(t),r=this._entriesByReferrerThenKey[t],r&&(delete r[n],i(
r).length===0&&delete this._entriesByReferrerThenKey[t]),this._delayedEvictEntryIfNoReferences(u))},n.prototype.immediatelyEvictEntry=function(n){var r=this,t=this._entriesByKey[n],i;t&&(i=t.dissociateFromAllReferrers(),i.forEach((function(t){var i=r._entriesByReferrerThenKey[t];i&&delete i[n]})),this._immediateEvictEntryIfNoReferences(t))},n.prototype.disposeReferrer=function(n){var r=this,t=this._entriesByReferrerThenKey[n];t&&i(t).forEach((function(t){r.dissociateEntry(t,n)}))},n.prototype.forEachEntry=function(n){var t=this,r=i(this._entriesByKey);r.forEach((function(i){var r=t._entriesByKey[i];n(i,r.value)}))},n.prototype.dispose=function(){var n=this;this._isDisposed=!0;this._onDisposeEntryCallback&&i(this._entriesByKey).forEach((function(t){var i=n._entriesByKey[t];n._onDisposeEntryCallback(i.value,t)}));this._entriesByKey={};this._entriesByReferrerThenKey={};i(this._evictionTimeoutHandlesByKey).forEach((function(t){n._cancelAnyDelayedEviction(t)}))},n.prototype._ensureReferenceExists=function(
n,t){var i=this._entriesByReferrerThenKey[t];i||(i={},this._entriesByReferrerThenKey[t]=i);n.key in i||(i[n.key]=n,n.associate(t))},n.prototype._entryHasDelayedEvictionInProgress=function(n){return!!this._evictionTimeoutHandlesByKey[n.key]},n.prototype._cancelAnyDelayedEviction=function(n){var t=this._evictionTimeoutHandlesByKey[n];t&&(delete this._evictionTimeoutHandlesByKey[n],window.clearTimeout(t))},n.prototype._delayedEvictEntryIfNoReferences=function(n){var t=this;n.hasNoReferences()&&(this._cancelAnyDelayedEviction(n.key),this._evictionDelayMilliseconds===null||this._evictionDelayMilliseconds===undefined?this._immediateEvictEntryIfNoReferences(n):this._evictionTimeoutHandlesByKey[n.key]=window.setTimeout((function(){t._immediateEvictEntryIfNoReferences(n)}),this._evictionDelayMilliseconds))},n.prototype._immediateEvictEntryIfNoReferences=function(n){n.hasNoReferences()&&(delete this._entriesByKey[n.key],this._onDisposeEntryCallback&&this._onDisposeEntryCallback(n.value,n.key),this.
_cancelAnyDelayedEviction(n.key))},n})(),e;t.RefCountCache=c;e=(function(){function n(n,t){this._referrerIds=[];this._key=n;this._value=t}return Object.defineProperty(n.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n.prototype.hasNoReferences=function(){return this._referrerIds.length===0},n.prototype.associate=function(n){this._referrerIds.indexOf(n)<0&&this._referrerIds.push(n)},n.prototype.dissociate=function(n){var t=this._referrerIds.indexOf(n);t>=0&&this._referrerIds.splice(t,1)},n.prototype.dissociateFromAllReferrers=function(){var n=this._referrerIds;return this._referrerIds=[],n},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],n)})()})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i){var r=n[i];return t(n,i)?r():r}function t(n,t){var i=n[t];return ko.isObservable(
i)&&!MsPortalFx.isObservableArray(i)}function r(n){if(!MsPortalFx.isArrayOrObservableArray(n))throw new Error("Only an array or an observable array is expected here.");return ko.unwrap(n)}n.isObject=MsPortalFx.isObject;n.isNullOrUndefined=MsPortalFx.isNullOrUndefined;n.equalDates=MsPortalFx.areEqualDates;n.isObservableArray=MsPortalFx.isObservableArray;n.isArrayOrObservableArray=MsPortalFx.isArrayOrObservableArray;n.unwrapObjectPropertyValue=i;n.isObservableObjectPropertyValue=t;n.unwrapArrayOrObservableArray=r;n.equalScalarValues=MsPortalFx.areEqual})(t=n.Shared||(n.Shared={}))})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";function f(n,t){return function(){return t.apply(n,arguments)}}var t=MsPortalFx,i=t.Data.Metadata,r=t.isArrayOrObservableArray,u=t.isObject,o=t.isObservableArray,e=(function(){function t(n,t){var i=this,r=this,u=t,e=this._callbacks={};["visitEntityArray","visitNonEntityArray","visitArray","visitArrayItem","visitEntity","visitNonEntityObject",
"visitObject","shouldVisitObjectProperty","visitEntityTypedObjectPropertyValue","visitNonEntityTypedObjectPropertyValue","visitObjectPropertyValue","visitDate","visitScalar","visitFunction"].forEach((function(n){e[n]=u[n]||f(i,r[n])}))}return t.prototype.visit=function(n,t,i){return this._visit(n,t,i)},t.prototype.visitEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},t.prototype.visitNonEntityArray=function(n,t,i){return this._callbacks.visitArray(n,t,i)},t.prototype.visitArray=function(t,i,r){var u=this;n.Shared.unwrapArrayOrObservableArray(t).forEach((function(n,t){u._callbacks.visitArrayItem(n,t,i,r)}));return},t.prototype.visitArrayItem=function(n,t,i,r){if(ko.isObservable(n))throw new Error("Data can't include arrays whose items are observables.  Only scalar- and object-typed array items are supported.");return this._visit(n,i,r)},t.prototype.visitEntity=function(n,t,i){return this._callbacks.visitObject(n,t,i)},t.prototype.visitNonEntityObject=function(n,t,i){return this.
_callbacks.visitObject(n,t,i)},t.prototype.visitObject=function(n,t,i){var r=this;this.getObjectPropertiesToVisit(n,t).forEach((function(u){r.visitObjectPropertyValueDispatch(u,n,t,i)}));return},t.prototype.shouldVisitObjectProperty=function(n,t){return typeof ko.unwrap(t[n])!="function"},t.prototype.visitEntityTypedObjectPropertyValue=function(t,i,u,f){var e=n.Shared.unwrapObjectPropertyValue(i,t);return r(e)?this._callbacks.visitEntityArray(e,u,f):e?this._callbacks.visitEntity(e,u,f):void 0},t.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},t.prototype.visitObjectPropertyValue=function(t,i,r,u){return this._visit(n.Shared.unwrapObjectPropertyValue(i,t),r,u)},t.prototype.visitDate=function(){return},t.prototype.visitScalar=function(){return},t.prototype.visitFunction=function(){return},t.prototype.getObjectPropertiesToVisit=function(n,t){var i=this;return Object.keys(n).filter((function(r){return i._callbacks.shouldVisitObjectProperty(
r,n,t)}))},t.prototype.visitObjectPropertyValueDispatch=function(n,t,r,u){var f=i.getPropertyTypeMetadata(r,n),e=i.typeIsEntityType(f);return e?this._callbacks.visitEntityTypedObjectPropertyValue(n,t,f,u):this._callbacks.visitNonEntityTypedObjectPropertyValue(n,t,f,u)},t.prototype._visit=function(n,t,i){return r(n)?this._visitArrayDispatch(n,t,i):u(n)?this._visitObjectDispatch(n,t,i):n instanceof Date?this._callbacks.visitDate(n,i):typeof n=="function"?this._callbacks.visitFunction(n,i):this._callbacks.visitScalar(n,i)},t.prototype._visitArrayDispatch=function(n,t,r){var u=i.typeIsEntityType(t);return u?this._callbacks.visitEntityArray(n,t,r):this._callbacks.visitNonEntityArray(n,t,r)},t.prototype._visitObjectDispatch=function(n,t,r){var u=i.typeIsEntityType(t);return u?this._callbacks.visitEntity(n,t,r):this._callbacks.visitNonEntityObject(n,t,r)},t})();n.Visitor=e})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var i=MsPortalFx,r=i.isObservableArray,
t=ko.observable,u=ko.observableArray,f=(function(i){function f(n,t){i.call(this,n,t)}return __extends(f,i),f.prototype.clone=function(n,t){return this._visit(n,t)},f.prototype.visitArray=function(i,f){var o=this,e=n.Shared.unwrapArrayOrObservableArray(i).map((function(n,t){return o._callbacks.visitArrayItem(n,t,f)}));return r(i)&&(e=i.splice?u(e):t(e)),e},f.prototype.visitObject=function(n,t){var r=this,i={};return this.getObjectPropertiesToVisit(n,t).forEach((function(u){i[u]=r.visitObjectPropertyValueDispatch(u,n,t)})),i},f.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i){return this._callbacks.visitObjectPropertyValue(n,t,i)},f.prototype.visitObjectPropertyValue=function(i,r,u){var f=r[i],e=n.Shared.isObservableObjectPropertyValue(r,i),o=this._visit(e?f():f,u);return e?t(o):o},f.prototype.visitDate=function(n){return new Date(n.getTime())},f.prototype.visitScalar=function(n){return n},f.prototype.visitFunction=function(){throw new Error("Cloning functions is not supported.");
},f})(n.Visitor);n.CloneVisitor=f})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var u=MsPortalFx.Data.Metadata,l=MsPortalFx.Base.Utilities,f=ko.isObservable,a=MsPortalFx.areEqual,e=MsPortalFx.isArrayOrObservableArray,o=MsPortalFx.isObject,s=MsPortalFx.isObservableArray,h=ko.utils,c=h.compareArrays,i="",v={cannotMerge:i,handleAddAndDeleteRequired:i,dataNotTypeCompatible:i,missingId:i},r=n.getErrorMap(v),y=(function(n){function i(t,i){n.call(this,t,i);this._clone=t.clone;this._onDetach=t.onDetach}return __extends(i,n),i.prototype.merge=function(t,i,u){var f=n.prototype._visit.call(this,t,u,i);f||r.cannotMerge()},i.prototype.visitObject=function(n,t,i){var r=this;return this.getObjectPropertiesToVisit(n,t).every((function(u){return r.visitObjectPropertyValueDispatch(u,n,t,i)}))},i.prototype.visitObjectPropertyValueDispatch=function(t,i,r,u){var f=n.prototype.visitObjectPropertyValueDispatch.call(this,t,i,r,u);return f||(f=this._cloneAndSetProperty(
t,i,r,u)),f},i.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitNonEntityTypedObjectPropertyValue=function(n,t,i,r){return this._callbacks.visitObjectPropertyValue(n,t,i,r)},i.prototype.visitObjectPropertyValue=function(n,i,r,u){var f=t.Shared.unwrapObjectPropertyValue(i,n),s=t.Shared.unwrapObjectPropertyValue(u,n),h=!1;return e(f)?e(s)&&(h=this._visitArrayDispatch(f,r,s)):o(f)?o(s)&&(h=this._visitObjectDispatch(f,r,s)):typeof f=="function"?h=!0:a(f,s)&&(h=!0),h},i.prototype.visitArray=function(n,t,i){return this._mergeArray(n,t,i)},i.prototype._mergeArray=function(n,i,e,o){var s=this,a,v,b,tt;o=o||{};!!o.handleAdd!=!!o.handleDelete&&r.handleAddAndDeleteRequired();o.getEdits||(a=void 0,v=void 0,u.typeHasId(i)?(a=function(n,t){var u=n.map((function(n){return s._getItemId(n,i)})),f=t.map((function(n){return s._getItemId(n,i)})),r=c(f,u);return r.forEach((function(r){r.value=(r.status==="added"?n:t).first(
(function(n){return s._getItemId(n,i)===r.value}))})),r},v=function(n,t){var r=s._getItemId(n,i);return t.first((function(n){return s._getItemId(n,i)===r}))}):(a=function(n,t){return c(t,n)},v=null),l.extend(o,{getEdits:a,getSourceItem:v}));var d=t.Shared.unwrapArrayOrObservableArray(n),it=t.Shared.unwrapArrayOrObservableArray(e),y=f(e),k=y&&e,p=k&&k(),w,rt=function(n){var t,r,u;switch(n.status){case"added":if(t=s._clone(n.value,i),o.handleAdd)o.handleAdd(t,n.index);else if(y)w=!0,p.splice(n.index,0,t);else return!1;break;case"deleted":if(r=n.value,u=n.index,o.handleDelete)o.handleDelete(r,u);else if(y)s._onDetach(r,i),w=!0,p.splice(u,1);else return!1;break;case"retained":if(o.getSourceItem){var f=n.value,e=o.getSourceItem(f,d),h=s._callbacks.visitObject(e,i,f);if(!h)if(y)s._onDetach(f,i),w=!0,p.splice(n.index,1,s._clone(e,i));else return!1}}return!0},g=h.adjustArrayEdits(o.getEdits(d,it)),nt=!0;for(b=0;b<g.length;b++)if(tt=g[b],!rt(tt)){nt=!1;break}return w&&k(p),nt},i.prototype._cloneAndSetProperty=
function(n,i,e,o){var h=o[n],v=t.Shared.unwrapObjectPropertyValue(i,n),c=t.Shared.unwrapObjectPropertyValue(o,n),l,a,y;return f(h)&&s(v)!==s(c)&&r.dataNotTypeCompatible(),f(h)?(l=!0,c&&this._onDetach(c,a),a=u.getPropertyTypeMetadata(e,n),y=this._clone(v,a),h(y)):l=!1,l},i.prototype._getItemId=function(n,t){var i=u.getItemId(n,t);return i===undefined&&r.missingId(),i},i})(t.Visitor);t.MergeVisitor=y})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.computed,r=(function(n){function r(r,u,f){var e=this;n.call(this,f);this._currentSkipTakeParams=i(null);this._allItems=u;this._itemsComputed=t((function(){var n=e._currentSkipTakeParams();return n&&e._allItems()?e._allItems().slice(n.skip,n.take?n.skip+n.take:undefined):[]}));this._metadataComputed=t((function(){return{totalItemCount:e._allItems().length}}));this.items=this._itemsComputed;this.metadata=this._metadataComputed;r.registerForDispose(this._itemsComputed);r.registerForDispose(
this._metadataComputed)}return __extends(r,n),r.prototype.loadBySkipTake=function(n,t){return this._currentSkipTakeParams({skip:n||0,take:t}),Q(!0)},r})(n.DataNavigatorBase);n.LocalDataNavigator=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=(function(t){function i(n,i,r,u,f){if(t.call(this,f),this._continuationTokenFilter=null,this._continuationTokenSort=[],this._continuationTokenResetRequested=!0,this._queryParams=null,!n)throw new Error("Argument cannot be null: lifetime");this.items=i;this.metadata=r;this._options=u;this._options.loadBySkipTake||(this.loadBySkipTake=null);this._options.loadByContinuationToken||(this.loadByContinuationToken=null)}return __extends(i,t),i.prototype.loadBySkipTake=function(n,t,i,r){if(!this._options.loadBySkipTake)throw new Error("This data navigator does not support skip/take.");return this._options.loadBySkipTake(this.metadata(),this._getClonedQuery(),n,t,i,r)},i.prototype.loadByContinuationToken=
function(){if(!this._options.loadByContinuationToken)throw new Error("This data navigator does not support continuation tokens.");var n=this._continuationTokenResetRequested;return this._continuationTokenResetRequested=!1,this._options.loadByContinuationToken(this.metadata(),this._getClonedQuery(),n,this._continuationTokenFilter,this._continuationTokenSort)},i.prototype.resetLoadByContinuationToken=function(n,t){this._continuationTokenResetRequested=!0;this._continuationTokenFilter=n;this._continuationTokenSort=t},i.prototype.setQuery=function(n){return this._queryParams=n,this.resetNavigation()},i.prototype._getClonedQuery=function(){return n.Base.Utilities.clone(this._queryParams,!0)},i})(t.DataNavigatorBase);t.RemoteDataNavigator=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){"use strict";function r(i,u,f){Array.isArray(i)?i.forEach((function(n){r(n,u,f)})):n.isObject(i)&&Object.getOwnPropertyNames(i).forEach((function(n){var e=
t.Metadata.getPropertyMetadata(u,n),o=e&&e.itemType;f(i,n,e)&&o&&r(i[n],o,f)}))}function u(n){return n.substr(0,6)==="/Date("?new Date(parseInt(n.substr(6),10)):new Date(n)}i.DataContractJsonSerializer={processResult:function(n,t,i,f,e){return e&&r(t.data,e,(function(n,t,i){var f=!0,r;return i&&(i.isDate||i.itemType==="System.DateTime")&&(r=n[t],typeof r=="string"&&(n[t]=u(r)),f=!1),f})),!0}}})(i=t.DataProvider||(t.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n){var r=n.property,u=n.operator,t=n.value,i;typeof t=="string"?t="'"+t+"'":t&&t instanceof Date&&(t="datetime'"+t.toISOString()+"'");switch(u){case"<":i=r+" lt "+t;break;case"<=":i=r+" le "+t;break;case"==":i=r+" eq "+t;break;case"!=":i=r+" ne "+t;break;case">=":i=r+" ge "+t;break;case">":i=r+" gt "+t;break;case"StartsWith":i="startswith("+r+","+t+") eq true";break;case"EndsWith":i="endswith("+r+","+t+") eq true";break;case"Contains":
i="substringof("+t+","+r+") eq true";break;default:throw new Error("The operator '"+u+"' is not supported.");}return i}function i(n){return!n.descending?n.property:n.property+" desc"}n.OData={shapeQuery:function(n){var u={},e=n.filter,f,r;return e&&e.length&&(u.$filter=e.map(t).join(" and ")),f=n.sort,f&&f.length&&(u.$orderby=f.map(i).join()),r=n.paging,r&&r.skip&&(u.$skip=r.skip),r&&r.take&&(u.$top=r.take),n.includeTotalCount&&(u.$inlinecount="allpages"),u}}})(t=n.DataProvider||(n.DataProvider={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function et(n,t){b.data(n,d,t)}function y(n){return u(n)||c(n)?b.data(n,d):null}function ot(n){delete b.data(n,d)}function a(n){var t=i(n);return u(t)?n:t}function g(n,t){var r=i(n[t]);return u(r)?n[t]:r}function yt(){return Date.now()}function pt(n,t){return n===t}function nt(n,i,r){var u=y(n);return u?r===1&&u.editKind===t.EditKind.Add?!1:!i||u.unlockedAt&&i>=u.unlockedAt:!0}function tt(n,t)
{return t&&t.indexOf?t.indexOf(n):-1}function wt(n,t){n.splice.apply(n,[0,n.length].concat(t))}function bt(n,t,i){for(var u,c=n.length,s,f,h,o,r=i-1;r>=0;r--)if(u=tt(n[r],t),u>=0){s=u+1;f=i-r;break}for(r=i+1;r<c;r++)if(u=tt(n[r],t),u>=0){h=u;o=r-i;break}return e(f)&&e(o)?t.length:(f||1e5)<(o||1e5)?s:h}function kt(n,t){for(var s={},h=[],o,u,i=0,c=n.length;i<c;i++)o=n[i],u=r.getItemId(o,t),e(u)?f.missingId():(s[u]=o,h.push(u));return{index:s,ids:h}}function it(n,t,r){var f=i(n),e,o,h,s;if(!ut(f)){if(e=!1,r++,u(f)){for(o=0,h=f.length;o<h;o++)if(e=t(g(f,o)),e||it(g(f,o),t,r),e)break}else if(c(f)&&(r===1&&(e=t(f)),!e))for(s in f)if(!s.match(/^jQuery\d+$/)&&(e=it(g(f,s),t,r),e))break;return e}}function p(n,t,r,f,e){var o=!0,h=i(t);return u(h)?rt(n,t,r,f,e):c(h)?s(n,t,r,f,e):o=!1,o}function rt(n,t,i,r,u){var f=r.preserveNewItemsOrdering;f?st(n,t,i,r,u):ht(n,t,i,r,u)}function st(n,t,u,o,h){for(var k=i(t),ut=k.length,p,d,l=i(n),c,tt=l.length,w,ft,b=r.getArrayItemType(t)||u,et=r.typeHasId(b),ht=
et&&l.map((function(n){var t=r.getItemId(i(n),b);return e(t)&&f.missingId(),t})),ct=o.preventItemRemoval,lt=o.fetchStart,it,ot,rt=[],g,st=l.slice(0),y=0;y<ut;y++){if(p=k[y],d=undefined,it=!1,et&&tt>0)for(d=r.getItemId(i(p),b),e(d)&&f.missingId(),c=0;c<tt;c++)w=l[c],ft=ht[c],pt(d,ft)&&(s(w,p,b,o,h),l.splice(c,1,p),st[c]=null,it=!0);it||!ct&&nt(a(p),lt,1)||rt.push(y)}for(c=0;c<tt;c++)w=st[c],w&&(l[c]=v(w,b,o,h));for(ot=rt.length,g=0;g<ot;g++)y=rt[g],p=k[y],c=bt(k,l,y),l.splice(c,0,p);t.splice.apply(t,[0,ut].concat(l))}function ht(n,t,u,o,h){for(var b=i(t),k=b.slice(0),d,g,tt=i(n),p,c,w=r.getArrayItemType(t)||u,it=r.typeHasId(w),ft=it&&kt(tt,w),et,ht=o.preventItemRemoval,ct=o.fetchStart,rt=[],ot={},st=0,ut=!1,y=b.length-1;y>=0;y--)d=b[y],c=null,it&&(g=r.getItemId(i(d),w),e(g)&&f.missingId(),c=ft.index[g]),c?(s(c,d,w,o,h),ot[g]=!0,st++):!ht&&nt(a(d),ct,1)&&(k.splice(y,1),ut=!0);if(st!==tt.length){for(p=0,et=tt.length;p<et;p++)c=tt[p],it&&ot.hasOwnProperty(ft.ids[p])||rt.push(v(c,w,o,h));rt.length>
0&&(k.push.apply(k,rt),ut=!0)}ut&&(l(t)&&t.valueWillMutate(),wt(b,k),l(t)&&t.valueHasMutated())}function s(n,t,f,e,h){if(nt(a(t),e.fetchStart,0)){ot(a(t));var v,p=i(t),y,l,w;for(v in n)if(n.hasOwnProperty(v))if(y=i(p[v]),l=i(n[v]),w=r.getPropertyType(f,v),l===null)y!==null&&p[v](null);else if(u(l))u(y)?rt(l,p[v],w||null,e,h):o(p,v,l,w,e,h);else if(c(l))ut(y)?o(p,v,l,w,e,h):y instanceof Date?(y>l||y<l)&&o(p,v,l,w,e,h):s(l,y,w||null,e,h);else if(typeof l=="function")continue;else o(p,v,l,w,e,h)}}function o(n,t,r,u,f,e){var o=v(r,u,f,e);n[t]&&l(n[t])?n[t](i(o)):n[t]=l(o)?o:k(o)}function v(n,t,i,u){var f=w(n,t,i,u);return r.decorateWithType(f,t),f}function w(n,t,r,f){return u(i(n))?ft(i(n).map((function(n){return w(n,t,r,f)}))):c(n)?ct(n,t,r,f):n}function ct(n,t,i,u){var f,a=u&&u.lifetime&&u._atomizationContext&&FxImpl.Data.AtomizationContext.canAtomizeType(t),c,o,e,h;if(a&&(c=r.getItemId(n,t),o=u._atomizationContext.getEntity(t,c,u.lifetime),o&&(s(n,o,t,i,u),f=o)),!f){f={};for(e in n)n.hasOwnProperty(
e)&&(h=w(n[e],r.getPropertyType(t,e),i,u),f[e]=l(h)?h:k(h));a&&u._atomizationContext.addEntity(t,c,f,u.lifetime)}return f}var lt=FxImpl.Data,at=lt.AtomizationContext,h=n,r=h.Data.Metadata,b=h.Base.ProxiedObservables,e=h.isUndefined,c=h.isObject,ut=h.isNullOrUndefined,k=ko.observable,ft=ko.observableArray,i=ko.unwrap,l=ko.isObservable,vt=window,gt=new n.Base.Diagnostics.Log("MsPortalFx/Data/Data.DataSet"),u=Array.isArray,ni=vt.fx.environment.isDevelopmentMode,d="aux-lockState",f=FxImpl.getErrorMap({missingId:"Data item is missing id property.",incorrectOptions:"If 'atomizationOptions' is provided, data set lifetime manager and an atomizable type have to be provided.",invalidEditKind:"Invalid edit kind.",multipleIds:"Type has multiple id properties.",invalidMergeTarget:"Merge target must be an array or object contained in this data set.",addToNonArray:"Cannot add items to non-array target.",removeFromNonArray:"Cannot remove items from non-array target."}),dt=(function(){function h(t,i,r){
this._data=null;this._navigationMetadata=k(null);this._partialErrors=ft();n.Base.ProxiedObservables.markNonSerializable(this);this._type=t||null;r&&!i&&f.incorrectOptions();this._lifetime=i;this._atomizationContext=r&&at.get(r.atomizationContextId)}return Object.defineProperty(h.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"navigationMetadata",{get:function(){return this._navigationMetadata},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"partialErrors",{get:function(){return this._partialErrors},enumerable:!0,configurable:!0}),h.lockItem=function(n,i){t.EditKind[i]||f.invalidEditKind();et(n,{editKind:i})},h.hasUnmergedClientChanges=function(n){return it(n,(function(n){var t=y(
n);return!!(t&&!!t.unlockedAt)}),0)},h.unlockItem=function(n,t){if(t=arguments.length===1?!0:t,t){var i=y(n);i&&(i.unlockedAt=yt())}else ot(n)},h.isLockedItem=function(n){var t=y(n);return!!(t&&!t.unlockedAt)},h.getIdPropertyNames=function(n){var t;return n instanceof h&&(n=n.data),t=r.getArrayItemType(n),t&&r.getIdPropertyNames(t&&r.getTypeMetadata(t))},h.getIdPropertyName=function(n){var t=this.getIdPropertyNames(n),i=null;return t&&(t.length>1&&f.multipleIds(),i=t[0]||null),i},h.mergeWithoutAtomization=function(n,t,i){i=i||{};var u=i.type||r.getArrayItemType(t);p(n,t,u,i)||f.invalidMergeTarget()},h.prototype.addItems=function(n,o,s,h,c){var p=this,l,y;s=s||{};c?l=s.type||r.getArrayItemType(c):(c=this.data,l=this.type);u(i(c))||f.addToNonArray();h=e(h)?!0:h;y=o.map((function(n){var i=v(n,l,s,p);return h&&et(a(i),{editKind:t.EditKind.Add}),i}));c.splice.apply(c,[n,0].concat(y))},h.prototype.removeItems=function(n,t,e,o){o?e=e||r.getArrayItemType(o):(o=this.data,e=this.type);u(i(o))||f.removeFromNonArray(
);var s=o.splice(n,t);this._atomizationContext&&this._atomizationContext.releaseEntities(e,s,this.lifetime)},h.prototype.removeItem=function(n,t,r){r||(r=this.data);var u=tt(n,i(r));u>=0&&this.removeItems(u,1,t,r)},h.prototype.setProperty=function(n,t,i,r){i=i||{};var u;r?u=i.type:(r=this.data,u=this.type);p(t,r[n],u,i,this)||o(r,n,t,u,i,this)},h.prototype.merge=function(n,t){t=t||{};p(n,this.data,this.type,t,this)||o(this,"_data",n,this.type,t,this)},h.prototype.hasUnmergedClientChanges=function(){return h.hasUnmergedClientChanges(this.data)},h._mergeArrayOrObject=p.bind(h),h._mergeArray=rt.bind(h),h._mergeArrayPreserveSourceItemsOrdering=st.bind(h),h._mergeArrayPreserveTargetItemsOrdering=ht.bind(h),h._mergeObject=s.bind(h),h._attachPropertyValue=o.bind(h),h._processForAdd=v.bind(h),h._atomizeOrMap=w.bind(h),h._atomizeOrMapObject=ct.bind(h),h=__decorate([n.Composition.ProxyCompatibilityMode],h)})();t.DataSet=dt})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(
function(n){"use strict";var t,i,r;(function(n){n[n.Copy=0]="Copy";n[n.InPlace=1]="InPlace"})(n.EditScopeKind||(n.EditScopeKind={}));t=n.EditScopeKind,(function(n){n[n.None=0]="None";n[n.Created=1]="Created";n[n.Deleted=2]="Deleted";n[n.Updated=3]="Updated"})(n.EditState||(n.EditState={}));i=n.EditState,(function(n){n[n.AcceptClientChanges=0]="AcceptClientChanges";n[n.DiscardClientChanges=1]="DiscardClientChanges";n[n.RefreshFromServerImplicitly=2]="RefreshFromServerImplicitly";n[n.ServerChangesAppliedManually=3]="ServerChangesAppliedManually";n[n.ServerDataReturned=4]="ServerDataReturned"})(n.AcceptEditScopeChangesAction||(n.AcceptEditScopeChangesAction={}));r=n.AcceptEditScopeChangesAction})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function ki(n,t){var i=t&&t.kind;return i===ci.InPlace?new nr(n,t):new gi(n,t)}function di(n){var t=si(n),r,u;t.length?(r=t.map((function(n){var t={state:i[n.state]},r=n.entityReference;return r&&r.type&&(
t.entityType=r.type,t.entityId=r.id),n.entityPath&&(t.pathFromRoot=n.entityPath),n.encodedCreatedEntities&&(t.createdEntities=n.encodedCreatedEntities),n.entityUpdates&&(t.updates=n.entityUpdates),t})),u=JSON.stringify(ko.toJS(r),(function(n,t){return n&&dt(t)?"<undefined>":t}),4),console.debug(u)):console.debug("No edits")}function ii(){r.accessorLifetime()}function f(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),lt({shouldVisitObjectProperty:function(t,r,u){return oi(t,u)&&n().shouldVisitObjectProperty(t,r,u)&&(!i||!ut(k(u,t)))}},t)}function pt(n){typeof n!="object"&&r.makeObs();pi(n,(function(t,i){if(rt(i))pt(i),n[t]=ct(i);else{var r=typeof i;r==="object"?pt(i):r!=="function"&&(n[t]=o(i))}}))}function fi(n){var t=bt.toSerializableObject(n);return JSON.stringify(t)}function ei(n,t,i){if(i===0)return rr(n,t);var r=JSON.parse(n);return bt.fromSerializableObject(r)}function rr(n,t){var i=JSON.parse(n);return t||pt(i),i}function wt(n,t){var i=nt(n.type)&&nt(t.type)&&nt(n.id)&&nt(t.id),r=
n.type===t.type&&n.id===t.id;return i||r}function et(n){var t=0,r,i;if(n.length===0)return t+"";for(i=0;i<n.length;i++)r=n.charCodeAt(i),t=(t<<5)-t+r|0;return t+""}function oi(n,t){return!(t&&t.properties&&t.properties[n]&&t.properties[n].trackEdits===!1)}function si(n,t){t===void 0&&(t=!0);var r=n.version||0;return n.edits.map((function(n){var u={state:n.state,entityReference:n.entityReference};switch(n.state){case i.Created:u.entityPath=n.entityPath;u.encodedCreatedEntities=n.createdEntities.map((function(n){return ei(n,t,r)}));break;case i.Updated:u.entityUpdates=ei(n.entityUpdates,t,r)}return u}))}function hi(n){return ut(n)?!0:n?c.getProperties(n).some((function(t){return hi(k(n,t))})):!1}var e=MsPortalFx,c=e.Data.Metadata,i=e.Data.EditState,ot=n.Data.Shared,st=e.Base.Utilities,bt=st.Internal.Serialization,w=e.Data.AcceptEditScopeChangesAction,l=n.Data.Visitor,g=n.Data.CloneVisitor,ht=n.Data.MergeVisitor,ci=e.Data.EditScopeKind,h=e.isArrayOrObservableArray,kt=e.areEqual,dt=e.isUndefined,
nt=e.isNullOrUndefined,s=e.isObject,o=ko.observable,ct=ko.observableArray,v=ko.isObservable,tt=ko.unwrap,it=ko.computed,lt=st.extend,gt=MsPortalFx.getUniqueId,ni=e.Data.DataSet,y=e.Base.ProxiedObservables,p=ot.unwrapArrayOrObservableArray,b=ot.unwrapObjectPropertyValue,li=ot.isObservableObjectPropertyValue,rt=Array.isArray,ut=c.typeIsEntityType,k=c.getPropertyTypeMetadata,at=new e.Base.Diagnostics.Log("MsPortalFx/Data/Data.EditScope"),a=undefined,ai="aux-entityState",vi="aux-entityArrayState",yi=window,d=yi.fx.environment.isDevelopmentMode,ti="Turn on development mode to generate diagnostic information for this error.",pi=e.forEachKey,wi=e.isEmpty,u="",bi={accessorLifetime:u,scopeInputType:u,scopeOptsTypes:u,missingMeta:u,noRefresh:u,noSave:u,entityDupe:u,saveInProg:u,nullMerge:u,resetInProg:u,noEntityRoot:u,resetType:u,newInputObs:u,newEditObs:u,diffEditInput:u,missingIdProp:u,targetArrObs:u,editsUnavail:u,mergeUnavail:u,noImpl:u,serialize:u,namedMeta:u,disposed:u,nestedEntities:u,makeObs:
u,entityEdit:u,resetObs:u,moveEditState:u},r=n.getErrorMap(bi),ft,vt;t.allowNonPersistentEdits=!1;t.createEditScope=ki;t.logEditsToConsole=di;t.nonPersistedPropertySentinel="EDITSCOPENOTPERSISTED";ft={entityType:!0};vt={registerForDispose:ii,createChildLifetime:ii};var ri=(function(){function u(n,t,i){var u=this,e,l,f;this._isDisposed=!1;this._initializing=o(!0);this._saving=o(!1);this._refreshing=o(!1);this._refreshInProgressCount=0;this._resettingValue=o(!1);this._dirty=o(!1);this._edits=o([]);this.editsChanged=o();y.markNonSerializable(this);this._createEditableAndOriginalData=i;e=h(n)&&tt(n);l=e&&(e.length===0||s(e[0]));l||s(n)||r.scopeInputType();t=t||{};f=t.typeMetadata;f?t.typeName&&r.scopeOptsTypes():t.typeName&&(f=c.getTypeMetadata(t.typeName),f||r.missingMeta(t.typeName));this._hasMetadata=!!f;f?f.entityType||(f=lt(st.clone(f),{entityType:!0})):f=ft;this._inconsistent=ko.pureComputed((function(){return u._initializing()||u._refreshing()||u._saving()||u._resettingValue()}));this.
_getEditsVisitor=this._createGetEditsVisitor(!1);this._getPersistableEditsVisitor=this._createGetEditsVisitor(!0);this._applyEditsVisitor=this._createApplyPersistedEditsVisitor();this._revertAllVisitor=this._createRevertAllVisitor();this._generateValueBasedEntityIdVisitor=this._createGenerateValueBasedEntityIdVisitor();this._mergeToEditableVisitor=this._createMergeToEditableVisitor();this._getEditsReactor=it((function(){u._inconsistent()?u._edits(null):(u._edits(u._getEdits(!1)),u.editsChanged.valueHasMutated())}));this._entityStateKey=ai+gt();this._entityArrayStateKey=vi+gt();this._rootTypeMetadata=f;this._root=this._createEditableAndOriginalData(n,this._rootTypeMetadata).editable;this._refreshCallback=t.refresh||function(){return r.noRefresh(),null};this._saveCallback=t.save||function(){return r.noSave(),null};this._dirtyReactor=it((function(){u._inconsistent()||u._dirty(u._edits().length>0)}));this._initializing(!1)}return u.prototype.dispose=function(){this._isDisposed||(this._isDisposed=
!0,this._deregisterNestedEntities(this._root,this._rootTypeMetadata,!1),this._getEditsReactor.dispose(),this._dirtyReactor.dispose())},Object.defineProperty(u.prototype,"root",{get:function(){return this._assertNotDisposed(),this._root},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"refreshing",{get:function(){return this._refreshing},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"saving",{get:function(){return this._saving},enumerable:!0,configurable:!0}),u.prototype.markForDelete=function(n){this._assertNotDisposed();var r=this._getEntityState(n,!1),t=r.readOnlyEditState();t!==i.None&&this._revertEntity(n,r,t);t!==i.Created&&this._markAsDeletedOrUpdated(n,i.Deleted)},u.prototype.create=function(n){this._assertNotDisposed();var t=this._getEntityArrayType(n,!1);return c.createEmptyObject(t)},u.prototype.addCreated=function(n,t){var i,u;this.
_assertNotDisposed();i=this._getEntityState(n,!1,!1);i&&r.entityDupe();u=this._getCreatedEntities(t,!1);this._addEntityStateToCreatedEntity(n,t);u.push(n)},u.prototype.revert=function(n){this._assertNotDisposed();var t=this._getEntityState(n,!1),r=t.readOnlyEditState();this._revertEntity(n,t,r);t.writableEditState(i.None)},u.prototype.revertAll=function(){this._assertNotDisposed();this._revertAll()},u.prototype.getEditState=function(n){return this._assertNotDisposed(),this._getEditState(n,!1)},u.prototype.getOriginal=function(n){return this._assertNotDisposed(),h(n)?this._getEntityArrayState(n,!1).original:this._getEntityState(n,!1).original},u.prototype.getCreated=function(n){return this._assertNotDisposed(),this._getCreatedEntities(n,!1)},u.prototype.mergeFromOriginal=function(){this._assertNotDisposed();this._mergeFromOriginal()},u.prototype.refresh=function(){var n=this;this._assertNotDisposed();this._refreshInProgressCount++;this._refreshing(!0);var r=this._refreshCallback(this._getRefreshableData(
))||Q(a),t=Q.defer(),i=function(){--n._refreshInProgressCount<=0&&(n._refreshInProgressCount=0,n._refreshing(!1))};return r.then((function(r){n._onRefreshComplete(r);n._isDisposed||(i(),t.resolve())})).catch((function(n){i();t.reject(n)})),t.promise},u.prototype.save=function(){this.mergeFromOriginal();this.revertAll()},u.prototype.saveChanges=function(){var n=this,t;if(this._assertNotDisposed(),this._inconsistent()&&r.saveInProg(),t=this._edits(),t.length===0)return Q();this._saving(!0);var e=MsPortalFx.mapMany(t,(function(n){switch(n.state){case i.Created:return n.createdEntities.map((function(t){return{editState:i.Created,entityTypeName:n.typeMetadata.name,entity:t}}));case i.Updated:case i.Deleted:return[{editState:n.state,entityTypeName:n.typeMetadata.name,entity:n.updatedOrDeletedEntity}]}return[]})),o=this._saveCallback(this,e,this._getRefreshableData())||Q(a),u=Q.defer(),f=function(){n._revertAll();n._isDisposed||(n._saving(!1),u.resolve())};return o.then((function(t){var u=t&&t.action||
w.AcceptClientChanges,i;switch(u){case w.AcceptClientChanges:n._acceptChanges();break;case w.RefreshFromServerImplicitly:return n.refresh().then((function(){f()}));case w.ServerChangesAppliedManually:n._onRefreshComplete(null);break;case w.ServerDataReturned:i=t.dataToMerge;i||r.nullMerge();n._onRefreshComplete(i)}f()})).catch((function(t){n._isDisposed||(n._saving(!1),u.reject(t))})),u.promise},u.prototype.resetValue=function(n,t){var y=this,e,p,o,i,w,c,a,h,u;this._assertNotDisposed();this._inconsistent.peek()&&r.resetInProg();e=function(n){var t="";n&&n.stack&&(t+="  Inner exception: "+n.stack);r.resetObs(t)};p=n;p.returnsObservablesFromEditScope||e();try{o=n.getOriginalObservable(vt);i=n.getEditableObservable(vt)}catch(b){e(b)}(!o||!i||ko.isComputed(o)||ko.isComputed(i))&&e();w=function(n){var e=n,i,u,t=new l(null,f((function(){return t}),{visitObject:function(n,r){t.getObjectPropertiesToVisit(n,r).forEach((function(f){n[f]===e?(u=!0,i=k(r,f)):t.visitObjectPropertyValueDispatch(f,n,r)}))}}));
return t.visit(y._root,y._rootTypeMetadata),u||r.noEntityRoot(),i};this._resettingValue(!0);try{c=w(i);hi(c)&&r.resetType();a=t.newInputValue;v(a)&&r.newInputObs();h=this._createEditableAndOriginalData(a,c);i(h.editable);o(h.original);t.hasOwnProperty("newEditableValue")&&(u=t.newEditableValue,v(u)&&r.newEditObs(),(rt(u)||s(u))&&u===h.original&&r.diffEditInput(),i(t.newEditableValue))}finally{this._resettingValue(!1)}},u.prototype.getEntityArrayWithEdits=function(n){var t=this,u=this._getCreatedEntities(n,!1)(),r=tt(n),f=r.filter((function(n){return t.getEditState(n)()!==i.Deleted})).concat(u),e=r.filter((function(n){return t.getEditState(n)()===i.Updated})),o=r.filter((function(n){return t.getEditState(n)()===i.Deleted}));return{arrayWithEdits:f,createdEntities:u,updatedEntities:e,deletedEntities:o}},u.prototype.applyArrayAsEdits=function(n,t){var u=this,o=this._getEntityArrayState(t,!1,!1),i,e,h;if(o){i=t;e=o.typeMetadata;(!rt(e.idProperties)||e.idProperties.length<1)&&r.missingIdProp();var
l=[],s=[],p=this._getCreatedEntities(t,!0)().slice(0);n.forEach((function(n){var t=c.getItemId(n,e);dt(t)?s.push(n):l.push(n)}));var a=function(n){v(i)?u.addCreated(n,i):u.addCreated(n,i)},w=lt({handleAdd:function(n){a(n)},handleDelete:function(n){u.markForDelete(n)}},this._createMergeEntityOnlyVisitorOptions()),y=new ir(w,f((function(){return y})));y.applyEntityArrayAsEdits(l,i,o.typeMetadata);s.length&&s.forEach((function(n){a(n)}));p.forEach((function(n){u.revert(n)}))}else v(t)||r.targetArrObs(),h=new g(null,f((function(){return h}))),t(h.clone(n,null))},u.prototype.getEdits=function(){this._inconsistent()&&r.editsUnavail();var n=this._getEdits(!0).map((function(n){var t={state:n.state,entityReference:n.entityReference};switch(t.state){case i.Created:t.entityPath=n.entityPath;t.createdEntities=n.encodedCreatedEntities.map((function(n){return fi(n)}));break;case i.Updated:t.entityUpdates=fi(n.entityUpdates)}return t}));return{edits:n,version:1}},u.prototype.applyEdits=function(n){this._assertNotDisposed(
);var t=si(n,this._hasMetadata);return this._applyEdits(t,this._applyEditsVisitor,!1),!0},Object.defineProperty(u.prototype,"isDisposed",{get:function(){return this._isDisposed},enumerable:!0,configurable:!0}),u.prototype._mergeFromOriginal=function(){r.mergeUnavail()},u.prototype._getRefreshableData=function(){return r.noImpl(),null},u.prototype._onRefreshComplete=function(){r.noImpl()},u.prototype._addEntityStateToEditableEntity=function(n,t,u){var f=this,e=this._addEntityState(n);e.original=t;e.typeMetadata=u;e.entityUpdateReactor=it((function(){if(!f._inconsistent()){var u=f._getEntityState(n,!0),t=u.readOnlyEditState.peek(),e=f._edits().some((function(t){return t.state===i.Updated&&t.updatedOrDeletedEntity===n}));e?t===i.None?f._markAsDeletedOrUpdated(n,i.Updated):t!==i.Updated&&r.moveEditState(i[t],i[i.Updated]):t===i.Updated&&u.writableEditState(i.None)}}))},u.prototype._addEntityStateToCreatedEntity=function(n,t){var r=this._addEntityState(n);r.containingArray=t;r.writableEditState(
i.Created)},u.prototype._addEntityState=function(n){var t=o(i.None),r={writableEditState:t,readOnlyEditState:it((function(){return t()}))};return y.data(n,this._entityStateKey,r),r},u.prototype._getEntityState=function(n,t,i){var u,f,r;if(i===void 0&&(i=!0),u=n&&y.data(n,this._entityStateKey),!u&&i){f=!h(n)&&s(n);r="";r=t?"Entity-typed object is not known to this edit scope.  Such entity-typed objects can only be added via 'editScope.addCreated', 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such objects cannot be added due to the addition of some object/array that nests this object.":f?this._rootTypeMetadata===ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":d?"":"Object passed as the 'entity' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":
"Value passed as the 'entity' parameter must be an object.";d&&(r=this._addMetadataHelperMessage(r,n));d||(r=r+"  "+ti);throw new Error(r);}return u},u.prototype._deregisterNestedEntities=function(n,t,r){var e=this,u;r===void 0&&(r=!0);u=new yt({getCreatedEntities:function(n){return e._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,t,i){u.visitEntityArray(n,t,i);e._disposeEntityArrayState(n)},visitEntity:function(n,t,r){if(u.visitEntity(n,t,r),r){var f=e._getEditState(n,!0)();f!==i.None&&at.error("Edited entities are being disconnected from the EditScope, losing user-authored edits.")}e._disposeEntityState(n)}}));u.visit(n,t,r)},u.prototype._addEntityArrayState=function(n,t,i){var r={typeMetadata:i,original:t};y.data(n,this._entityArrayStateKey,r)},u.prototype._createVisitorCallbacks=function(n,t,i){return t===void 0&&(t={}),i===void 0&&(i=!1),f(n,t,i)},u.prototype._rootIsEntity=function(){return s(this._root)},u.prototype._rootAsEntity=function(n){return n===
void 0&&(n=!0),s(this._root)?n?this._root:this._getOriginalEntity(this._root):null},u.prototype._rootAsArray=function(n){return n===void 0&&(n=!0),h(this._root)?n?this._root:this._getOriginalArray(this._root):null},u.prototype._getOriginalEntity=function(n){return this._getEntityState(n,!0).original},u.prototype._getOriginalArray=function(n){return this._getEntityArrayState(n,!0).original},u.prototype._revertEntity=function(n,t,r){switch(r){case i.Updated:this._mergeToEditableVisitor.mergeEntity(t.original,n,t.typeMetadata);break;case i.Created:var u=this._getCreatedEntities(t.containingArray,!0);u.splice(u().indexOf(n),1)}},u.prototype._getEntityArrayState=function(n,t,i){var u,f,r;if(i===void 0&&(i=!0),u=y.data(n,this._entityArrayStateKey),!u&&i){f=h(n);r="";r=t?"Entity-typed array is not known to this EditScope.  Such entity-typed arrays can only be added via 'editScope.refresh' and any refresh concluding an async 'editScope.saveChanges' call.  Such arrays cannot be added due to the addition of some object/array that nests this array.":
f?this._rootTypeMetadata===ft?"No type metadata was supplied to this EditScope.  Depending on scenario, be sure to supply either: (1) the 'editScopeMetadataType' option to your MsPortalFx.ViewModels.ParameterProvider or (2) the 'entityTypeName' option to your MsPortalFx.Data.EditScopeCache.":d?"":"Array passed as the 'entityArray' parameter either isn't reachable from 'editScope.root' or isn't entity-typed according to type metadata.":"Value passed as the 'entityArray' parameter must be an array or an observable array.";d&&(r=this._addMetadataHelperMessage(r,n));d||(r=r+"  "+ti);throw new Error(r);}return u},u.prototype._disposeEntityArrayState=function(n){y.data(n,this._entityArrayStateKey,a)},u.prototype._disposeEntityState=function(n){var t=this._getEntityState(n,!0);t.entityUpdateReactor&&(t.entityUpdateReactor.dispose(),t.entityUpdateReactor=null);y.data(n,this._entityStateKey,a)},u.prototype._markAsDeletedOrUpdated=function(n,t){var f=this._getEntityState(n,!0),u=f.readOnlyEditState.
peek();u!==i.None&&u!==t&&r.entityEdit(i[u]);f.writableEditState(t)},u.prototype._getEntityArrayType=function(n,t){return this._getEntityArrayState(n,t).typeMetadata},u.prototype._getCreatedEntities=function(n,t){var r=this._getEntityArrayState(n,t),i=r.createdEntities;return i||(i=r.createdEntities=ct()),i},u.prototype._revertAll=function(){this._revertAllVisitor.visit(this._root,this._rootTypeMetadata)},u.prototype._createRevertAllVisitor=function(){var n=this,t=new yt({getCreatedEntities:function(t){return n._getCreatedEntities(t,!0)}},f((function(){return t}),{visitEntityArray:function(i,r){t.visitArray(i,r);for(var u=n._getCreatedEntities(i,!0);u().length>0;)n.revert(u()[0])},visitEntity:function(i,r){t.visitEntity(i,r);n.revert(i)}}));return t},u.prototype._getEdits=function(n){var t=[],i=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,!1):null,r=n?this._getPersistableEditsVisitor:this._getEditsVisitor;return r.visit(this._root,this._rootTypeMetadata,
{edits:t,entityReference:i,entityPath:""}),t},u.prototype._createGetEditsVisitor=function(n){var t=this,u=new yt({getCreatedEntities:function(n){return t._getCreatedEntities(n,!0)}},f((function(){return u}),{visitEntityArray:function(n,i){t._getEntityArrayState(n,!0);u.visitEntityArray(n,i)},visitEntity:function(n,i){t._getEntityState(n,!0);u.visitEntity(n,i)}})),o=this._createComputeEntityUpdatesVisitor(n),e=function(n,t,i){return o.visit(n,t,i)},r=new l(null,f((function(){return r}),{shouldVisitObjectProperty:function(n,i,u){return oi(n,u)&&r.shouldVisitObjectProperty(n,i,u)&&t._objectPropertyNestsEntities(i,n,u)},visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(n,f,o){var s;if(r.visitArray(n,f,o),s=t._getCreatedEntities(n,!0),s().length){var h=o.edits,c=o.entityReference,l=o.entityPath;h.push({state:i.Created,entityReference:c,entityPath:l,encodedCreatedEntities:s().map((function(
n){return e(n,f)})),typeMetadata:f,createdEntities:s()});s().forEach((function(n){u.visit(n,f)}))}},visitObject:function(n,i,u){var f=ut(i),e=u.edits,o=u.entityReference,s=u.entityPath;r.getObjectPropertiesToVisit(n,i).forEach((function(u){r.visitObjectPropertyValueDispatch(u,n,i,{edits:e,entityReference:f?t._createEntityReference(n,i,!1):o,entityPath:f?u:s+"."+u})}))},visitEntity:function(n,u,f){var o=f.edits,h=t._getEditState(n,!0)(),s=e(n,u,t._getOriginalEntity(n));wi(s)?h===i.Deleted&&o.push({state:i.Deleted,entityReference:t._createEntityReference(n,u,!1),typeMetadata:u,updatedOrDeletedEntity:n}):o.push({state:i.Updated,entityReference:t._createEntityReference(n,u,!1),entityUpdates:s,typeMetadata:u,updatedOrDeletedEntity:n});r.visitEntity(n,u,f)}}));return r},u.prototype._createApplyPersistedEditsVisitor=function(){var n=this;return this._createApplyEditsVisitor(!1,{applyCreate:function(t,i,r){n._removeNonPersistedPropertySentinels(i,r,!0);n.addCreated(i,t)},applyUpdate:function(t,i,r)
{n._removeNonPersistedPropertySentinels(i,r,!1);n._applyEntityUpdates(t,i,r)},applyDelete:function(t,r){n._markAsDeletedOrUpdated(r,i.Deleted)}})},u.prototype._createApplyEditsVisitor=function(n,t){var u=this,r=new l(null,f((function(){return r}),{visitArrayItem:function(n,t,i,u){r.visitArrayItem(n,t,i,{edits:u.edits,entityReference:u.entityReference,entityPath:u.entityPath+"."+t})},visitEntityArray:function(f,e,o){var s,c,h,p;for(r.visitArray(f,e,o),s=o.edits,c=tt(f),h=c.length-1;h>=0;h--){var a=c[h],w=u._createEntityReference(a,e,n),v=s.firstIndex((function(n){return n.state===i.Deleted&&wt(w,n.entityReference)}));v>=0&&(s.splice(v,1),t.applyDelete(f,a))}var y=o.entityReference,b=o.entityPath,l=s.firstIndex((function(n){if(n.state===i.Created)if(y){if(n.entityReference&&wt(y,n.entityReference)&&b===n.entityPath)return!0}else if(!n.entityReference)return!0}));l>=0&&(p=s[l],s.splice(l,1),p.encodedCreatedEntities.forEach((function(n){t.applyCreate(f,n,e)})))},visitObject:function(f,e,o){var s=o.
edits,c=o.entityReference,v=o.entityPath,l=ut(e),h,a;l&&(c=u._createEntityReference(f,e,n));r.getObjectPropertiesToVisit(f,e).forEach((function(n){r.visitObjectPropertyValueDispatch(n,f,e,{edits:s,entityReference:c,entityPath:l?n:v+"."+n})}));l&&(h=s.firstIndex((function(n){return n.state===i.Updated&&wt(c,n.entityReference)})),h>=0&&(a=s[h],s.splice(h,1),t.applyUpdate(f,a.entityUpdates,e)))}}));return r},u.prototype._acceptChanges=function(){var n=this._getEdits(!1);this._applyEdits(n.slice(0),this._createAcceptChangesVisitor(!0),!0);this._applyEdits(n,this._createAcceptChangesVisitor(!1),!1)},u.prototype._createAcceptChangesVisitor=function(n){var t=this;return this._createApplyEditsVisitor(n,{applyCreate:function(i,r,u){if(!n){var f=i,e=t._createEditableAndOriginalData(r,u).editable,o=function(n,t){if(n.push)n.push(t);else{var i=n,r=i().slice(0);r.push(t);i(r)}};o(f,e);o(t._getOriginalArray(f),t._getOriginalEntity(e))}},applyUpdate:function(i,r,u){n&&t._applyEntityUpdates(i,r,u)},applyDelete:
function(n,t){var u=tt(n).indexOf(t),i,r;n.splice?n.splice(u,1):(i=n,r=i().slice(0),r.splice(u,1),i(r))}})},u.prototype._applyEntityUpdates=function(n,t,i){this._mergeToEditableVisitor.mergeEntity(t,n,i)},u.prototype._removeNonPersistedPropertySentinels=function(n,i,r){var u=new l(null,{visitObjectPropertyValue:function(n,i,f){var e=b(i,n);e===t.nonPersistedPropertySentinel?v(i[n])?i[n](a):r?i[n]=a:delete i[n]:u.visitObjectPropertyValue(n,i,f)},visitArray:function(n,i){var r=p(n);r.length===1&&r[0]===t.nonPersistedPropertySentinel?r.splice(0,1):u.visitArray(n,i)}});u.visit(n,i)},u.prototype._generateValueBasedEntityId=function(n,t){return this._generateValueBasedEntityIdVisitor.visit(n,t)},u.prototype._createGenerateValueBasedEntityIdVisitor=function(){var n=new l(null,f((function(){return n}),{visitArray:function(t,i){var r="";return p(t).forEach((function(t,u){r+=n.visitArrayItem(t,u,i)})),et(r)},visitObject:function(t,i){var u=n.getObjectPropertiesToVisit(t,i).sort(),r="";return u.forEach(
(function(u){r+=n.visitObjectPropertyValueDispatch(u,t,i)})),et(r)},visitScalar:function(n){return et(""+n)},visitDate:function(n){return et(""+n)}},!0));return n},u.prototype._createEntityReference=function(n,t,i){var u,o,f,s,e;return i===void 0&&(i=!1),o=this._rootAsEntity(!i)===n,o?u={type:a,id:a}:(f=i?n:this._getOriginalEntity(n),t&&(t.name||t===this._rootTypeMetadata)||r.serialize(),s=c.typeHasId(t)?c.getItemId(f,t):this._generateValueBasedEntityId(f,t),e=t.name||null,e||t===this._rootTypeMetadata||r.namedMeta(),u={type:e,id:s}),u},u.prototype._createComputeEntityUpdatesVisitor=function(n){var e=this,r=new g(null,f((function(){return r}),{visitObject:function(i,u){var f={};return r.getObjectPropertiesToVisit(i,u).forEach((function(s){var c=r.visit(b(i,s),k(u,s)),l,a,y;n&&(e._shouldPersistObjectPropertyEdits(s,u)||(c=t.nonPersistedPropertySentinel));l=i[s];li(i,s)?a=o(c):h(l)&&c===t.nonPersistedPropertySentinel?(y=[t.nonPersistedPropertySentinel],a=v(l)?!l.splice?o(y):ct(y):y):a=c;f[s]=
a})),f}},!0)),i={},u=new l(null,f((function(){return u}),{visitObject:function(f,o,h){if(s(h)){var c;return e._enumeratePropertiesForUpdates(f,h,u,o,(function(r){var s=u.visit(b(f,r),k(o,r),b(h,r));s!==i&&(c||(c={}),n&&(e._shouldPersistObjectPropertyEdits(r,o)||(s=t.nonPersistedPropertySentinel)),c[r]=s)})),c||i}return r.visit(f,o)},visitArray:function(n,t,f){var e=!1,o;return h(f)?p(n).length!==p(f).length?e=!0:(o=p(f),e=p(n).some((function(n,r){return u.visitArrayItem(n,r,t,o[r])!==i}))):e=!0,e?r.visit(p(n),t):i},visitScalar:function(n,t){return kt(n,t)?i:n},visitDate:function(n,t){return kt(n,t)?i:n}},!0));return u},u.prototype._shouldPersistObjectPropertyEdits=function(t,i){if(!n.Data.allowNonPersistentEdits)return!0;var r=i&&i.properties&&i.properties[t];return!r||r.persistEdits!==!1},u.prototype._enumeratePropertiesForUpdates=function(n,t,i,r,u){i.getObjectPropertiesToVisit(n,r).forEach((function(n){t.hasOwnProperty(n)?u(n):at.warning("Encountered a property '"+n+"' on an editable object that is not present on the original object.  Updates to the property value are not being persisted along with other edits.")})
);i.getObjectPropertiesToVisit(t,r).forEach((function(t){n.hasOwnProperty(t)||at.warning("Encountered a property '"+t+"' on an original object that is not present on the editable object.  Updates to the property value are not being persisted along with other edits.")}))},u.prototype._assertNotDisposed=function(){this._isDisposed&&r.disposed()},u.prototype._objectPropertyNestsEntities=function(n,t,i){var r=n[t],u;return(v(r)&&(r=r.peek()),!(rt(r)||s(r)))?!1:(u=k(i,t),!u)?!1:!0},u.prototype._getEditState=function(n,t){return this._getEntityState(n,t).readOnlyEditState},u.prototype._createMergeToEditableVisitor=function(){var n=new tr(this._createMergeEntityOnlyVisitorOptions(),f((function(){return n})));return n},u.prototype._createMergeEntityOnlyVisitorOptions=function(){var n=new l(null,f((function(){return n}),{visitEntityTypedObjectPropertyValue:function(){r.nestedEntities()}})),t=new g(null,f((function(){return t})));return{onDetach:function(t,i){n.visit(t,i)},clone:function(n,i){return t.clone(
n,i)}}},u.prototype._applyEdits=function(n,t,i){var r=this._rootIsEntity()?this._createEntityReference(this._rootAsEntity(),this._rootTypeMetadata,i):null,u=i?this.getOriginal(this._root):this._root;t.visit(u,this._rootTypeMetadata,{edits:n,entityReference:r,entityPath:""})},u.prototype._addMetadataHelperMessage=function(n){return n},u.prototype._computeMetadataHelperMessage=function(){},__decorate([MsPortalFx.Composition.ProxyCompatibilityMode],u)})(),gi=(function(n){function t(t,i){var r=this;n.call(this,t,i,(function(n,t){return{editable:r._getVisitor().clone(n,t),original:n}}))}return __extends(t,n),t.prototype._mergeFromOriginal=function(n){n===void 0&&(n=!0);var t=this._rootTypeMetadata,i=this._createMergeEntitiesVisitor(n);this._rootIsEntity()?i.mergeEntity(this._rootAsEntity(!1),this._rootAsEntity(),t):i.mergeEntityArray(this._rootAsArray(!1),this._rootAsArray(),t)},t.prototype._getRefreshableData=function(){return this.getOriginal(this._root)},t.prototype._onRefreshComplete=function(
n){n&&ni.mergeWithoutAtomization(n,this.getOriginal(this._root),{type:this._rootTypeMetadata.name});this._mergeFromOriginal(!1)},t.prototype._getVisitor=function(){var t=this,n=this._visitor;return n||(this._visitor=n=new g(null,f((function(){return n}),{visitEntityArray:function(i,r){var u=n.visitEntityArray(i,r);return t._addEntityArrayState(u,i,r),u},visitEntity:function(i,r){var u=n.visitEntity(i,r);return t._addEntityStateToEditableEntity(u,i,r),u}}))),n},t.prototype._createMergeEntitiesVisitor=function(n){var t=this,i=new ui({onDetach:function(i,r){t._deregisterNestedEntities(i,r,n)},clone:function(n,i){return t._getVisitor().clone(n,i)},getSourceEntity:function(n){return t._getOriginalEntity(n)},isSourceForTargetEntity:function(n,i){return t._getOriginalEntity(i)===n}},f((function(){return i})));return i},t})(ri),nr=(function(n){function t(t,i){var r=this;n.call(this,t,i,(function(n,t){return{editable:n,original:r._getVisitors().clone.clone(n,t)}}))}return __extends(t,n),t.prototype._getRefreshableData=
function(){return this._root},t.prototype._onRefreshComplete=function(n){n&&ni.mergeWithoutAtomization(n,this._root,{type:this._rootTypeMetadata.name});this._mergeToOriginal()},t.prototype._getVisitors=function(){var t=this,i=this._visitors,n,r;return i||(n=new g(null,f((function(){return n}),{visitEntityArray:function(i,r,u){var f=n.visitEntityArray(i,r,u);return t._addEntityArrayState(i,f,r),f},visitEntity:function(i,r,u){var f=n.visitEntity(i,r,u);return t._addEntityStateToEditableEntity(i,f,r),f}})),r=new ui({onDetach:function(){},clone:function(t,i){return n.clone(t,i)},getSourceEntity:function(n,i){return i.first((function(i){var r=t._getEntityState(i,!0,!1);return r&&r.original===n}))},isSourceForTargetEntity:function(n,i){var r=t._getEntityState(n,!0,!1);return r&&r.original===i}},f((function(){return r}))),this._visitors=i={clone:n,merge:r}),i},t.prototype._mergeToOriginal=function(){var n=this._rootTypeMetadata,t=this._getVisitors().merge;this._rootIsEntity()?t.mergeEntity(this._rootAsEntity(
),this._rootAsEntity(!1),n):t.mergeEntityArray(this._rootAsArray(),this._rootAsArray(!1),n)},t})(ri),yt=(function(n){function t(t,i){n.call(this,t,i);this._getCreatedEntities=t&&t.getCreatedEntities}return __extends(t,n),t.prototype.visitEntityArray=function(t,i,r){var u=this._getCreatedEntities(t);return n.prototype.visitEntityArray.call(this,u,i,r),n.prototype.visitEntityArray.call(this,t,i,r)},t})(l),tr=(function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(){return!0},t})(ht),ir=(function(n){function t(t,i){n.call(this,t,i);this._handleAdd=t.handleAdd;this._handleDelete=t.handleDelete}return __extends(t,n),t.prototype.applyEntityArrayAsEdits=function(n,t,i){var r=this;this._mergeArray(n,i,t,{handleAdd:function(n){r._handleAdd(n)},handleDelete:function(n){r._handleDelete(n)}})},t})(ht),ui=(function(n){function t(t,i){n.call(this,t,i);this._getSourceEntity=
t.getSourceEntity;this._isSourceForTargetEntity=t.isSourceForTargetEntity}return __extends(t,n),t.prototype.mergeEntity=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.mergeEntityArray=function(t,i,r){n.prototype.merge.call(this,t,i,r)},t.prototype.visitEntityTypedObjectPropertyValue=function(n,t,i,r){var o=this._callbacks,u=b(t,n),f=b(r,n),e=!1;return h(u)?h(f)&&(e=o.visitEntityArray(u,i,f)):s(u)&&s(f)&&this._isSourceForTargetEntity(u,f)&&(e=o.visitEntity(u,i,f)),e},t.prototype.visitEntityArray=function(n,t,i){var r=this;return this._mergeArray(n,t,i,{getEdits:function(n,t){var i=function(t){return r._getSourceEntity(t,n)},f=t.map((function(n){return i(n)})),u=ko.utils.compareArrays(f,n);return u.forEach((function(n){if(n.status==="deleted"||n.status==="retained"){var r=n.value;n.value=t.first((function(n){return i(n)===r}))}})),u},getSourceItem:function(n,t){return r._getSourceEntity(n,t)}})},t})(ht)})(t=n.Data||(n.Data={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(
n){var t;(function(n){"use strict";function i(n){return new t.EditScopeCache(n)}function r(n){return new t.EditScopeCacheOld(n)}var t=FxImpl.Data;n.createNew=i;n.create=r})(t=n.EditScopeCache||(n.EditScopeCache={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=(function(t){function i(){t.apply(this,arguments)}return __extends(i,t),Object.defineProperty(i.prototype,"editScope",{get:function(){return this._loadedCacheEntry},enumerable:!0,configurable:!0}),i.prototype.fetchForNewData=function(n){return this.fetch({editScopeId:n,params:undefined})},i.prototype.fetchForExistingData=function(t,i){return this.fetch({editScopeId:t,params:n.isNullOrUndefined(i)?null:i})},__decorate([n.Composition.ProxyCompatibilityMode],i)})(FxImpl.Data.ObjectView);t.EditScopeView=i})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var u=n.Base.Utilities,i="",f={entityCacheWithLoader:i,missingObservableData:
i},r=FxImpl.getErrorMap(f),e=(function(n){function i(t){n.call(this,u.clone(t));var i=t;i.findCachedEntity&&i.loader&&!i.loader.establishDataSet&&r.entityCacheWithLoader();this._findCachedEntity=i.findCachedEntity}return __extends(i,n),i.prototype.createView=function(n,i){return new t.EntityView(this,n,i)},i.prototype._tryFindDataInRelatedCache=function(n){var i,t=this._findCachedEntity,r,f,u,e;return t&&(t.hasOwnProperty("queryCache")?(r=t,f=r.queryCache,i=f._findMatchingEntity(r.entityMatchesId,n)):(u=t,e=u.dataCache,i=e._findEntity(u.findMatchingEntityInCacheEntry,n))),i},i.prototype._getDataFromDataSet=function(n){var t=n.data;return ko.isObservable(t)||r.missingObservableData(),n.data()},i})(FxImpl.Data.DataCache);t.EntityCache=e})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(t){function r(n,r,u){var f=this,e;t.call(this,n,r,u||{});this._item=i(null);e=ko.computed((function(){var t=f._loadedCacheEntry(
),n,i;if(t)if(n=t.data,ko.isObservable(n))i=n(),f._item(i);else throw new Error("DataSets used with EntityView must contain observable data.");else f._item(null)}));r.registerForDispose(e)}return __extends(r,t),Object.defineProperty(r.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this._item()},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],r)})(FxImpl.Data.DataView);t.EntityView=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function ot(n,t){return r[n]=new ct(n,t)}function g(){return+new Date}function l(n,t){var i=n in u&&u[n]||k||d;return i[t]}function st(){return wt||d.fastPollingInterval}function bt(n){var t=st();return n=y(n),(isNaN(n.pollingInterval)||n.pollingInterval<t)&&(n.pollingInterval=t),(isNaN(n.fastPollingInterval)||n.fastPollingInterval<t)&&(n.fastPollingInterval=t),(isNaN(n.slowPollingInterval)||
n.slowPollingInterval<t)&&(n.slowPollingInterval=t),n.fastPollingInterval>n.pollingInterval&&(n.pollingInterval=n.fastPollingInterval),n.pollingInterval>n.slowPollingInterval&&(n.slowPollingInterval=n.pollingInterval),n}function ht(n,t,i){n.fetchingSameData&&(n.fetchingSameData=i);t&&(n.isForcedCacheRefresh=!0)}function kt(t,i,r){if(i){var u=i.status;if(u===401||u===403)return new n.Errors.UnauthorizedDataError(t,i);if(u===404&&(!r||pt(i)))return new n.Errors.NotFoundDataError(t,i)}return new n.Errors.FetchDataError(t,i)}var a=n.Base,lt=a.Promises,tt=a.Utilities,v=a.Net2,o=n.Helpers.Deferred,it=tt.extend,y=tt.clone,rt=n.isObject,ut=n.deepEquals,i=null,s="",at={earlyRefresh:s,unknownDataSet:s,modifyLifetime:s,unaccessedDataSet:s},h=FxImpl.getErrorMap(at),p=window,w=new n.Base.Diagnostics.Log(""),r={},ft={getFetchParameters:function(n,t,r){return r?{headers:t&&t.ajaxHeaders,data:t&&t.ajaxData}:i},fetchData:function(n,t,r,u,f,e){var h=i,o,s;return r&&(h=typeof r=="string"?r:JSON.stringify(
r)),o="json",s=v.ajax({uri:t,type:f||"POST",dataType:o,cache:!1,headers:u,traditional:!0,contentType:"application/json",data:h,setAuthorizationHeader:e}),s.requestedDataType=o,s},processResult:[t.DataProvider.DataContractJsonSerializer.processResult]},b,k,u={},d={fastPollingInterval:1e4,pollingInterval:6e4,slowPollingInterval:3e5},f={slow:"slowPollingInterval",normal:"pollingInterval",fast:"fastPollingInterval"},e=0,vt=/^application\/json\b/,yt=function(n){try{return JSON.parse(n),!0}catch(t){return!1}},pt=function(n){return vt.test(n.getResponseHeader("Content-Type"))&&yt(n.responseText)},et=p.fx.environment.features.tracefetch==="true",wt,c,ct,nt;(function(n){n[n.Never=1]="Never";n[n.Normal=2]="Normal"})(t.PollFrequency||(t.PollFrequency={}));c=t.PollFrequency;ct=(function(){function t(t,r){var f=this,u;this._pollFrequency=c.Normal;this._fastPollingRefCount=0;this._pollCount=0;this._merged=!1;this._hasSnapshottedFetchOptions=!1;this._name=t;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;
r&&(this._snapshotFetchOptions(r),u=r.type);this.dataSet=new n.Data.DataSet(u||i,r.dataSetLifetime,r.atomizationOptions)}return t.prototype._hasRequestInFlight=function(){return!!this._currentFetchDeferred},t.prototype._getLastFetchState=function(){return this._lastFetchState},t.prototype.getCachedOrInFlightData=function(n){var u=n.uri,f=n.ajaxData,e=n.ajaxHeaders,t,r,s=n.httpMethod||i;return this._lastCompletedFetchStart&&u===this._uri&&s===this._httpMethod&&ut(f,this._ajaxData)&&ut(e,this._ajaxHeaders)?!this._expiry||this._expiry>g()?(n.forceCacheRefresh&&this.debounceServerFetch(!0,!0),t=o().resolve({name:this._name,value:this.dataSet})):this._currentFetchDeferred&&!n.forceCacheRefresh?t=this._currentFetchDeferred:(w.verbose("Cached data expired: '"+this._name+"'"),r=!0):(this._tryExecuteDebouncedServerFetch(),this._snapshotFetchOptions(n)),{promise:t?t.promise():i,fetchingSameData:r}},t.prototype.forceRefresh=function(){return this._hasSnapshottedFetchOptions||h.earlyRefresh(),v.invalidateCacheHeader(
this._ajaxHeaders),this._tryExecuteDebouncedServerFetch(!0)?this._currentFetchDeferred.promise():this.debounceServerFetch(!0,!0)},t.prototype.debounceServerFetch=function(t,r){var u=this,f;return this._debouncedFetch?ht(this._debouncedFetch,r,t):(this._currentFetchDeferred=o(),this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask),f=function(){var n=u._debouncedFetch,t=n.isForcedCacheRefresh,r=n.fetchingSameData;u._debouncedFetch=i;u._fetchData(r,!0,t)},this._debouncedFetch={callback:f,timeoutId:p.setTimeout(f,0),isForcedCacheRefresh:r,fetchingSameData:t}),this._currentFetchDeferred.promise()},t.prototype.setFastPolling=function(n){n?this._fastPollingRefCount++:this._fastPollingRefCount>0&&this._fastPollingRefCount--},t.prototype.dispose=function(){this._lifetimeManager.dispose();delete u[this._name];this._pollingTask&&n.Base.Scheduler.deleteTask(this._pollingTask)},t.prototype._tryExecuteDebouncedServerFetch=function(n){var t=this._debouncedFetch;return t?(ht(t,n,n),p.clearTimeout(
t.timeoutId),t.callback(),!0):!1},t.prototype._snapshotFetchOptions=function(t){this._hasSnapshottedFetchOptions=!0;this._uri=t.uri;this._httpMethod=t.httpMethod||i;this._ajaxData=t.ajaxData;this._ajaxHeaders=t.ajaxHeaders;this._loaderOptions=t.loaderOptions;this._preserveNewItemsOrdering=t.preserveNewItemsOrdering;this._pollFrequency=t.pollFrequency||c.Normal;this._setAuthorizationHeader=t.setAuthorizationHeader;var r=t.fetchStartListener;this._fetchStartListener=r?function(n){r.fire(n)}:n.noop},t.prototype._fetchData=function(t,r,u){var f=this,o=this._name,tt=this._getLoaderOptionFunction("getFetchParameters"),p=this._getLoaderOptionFunction("fetchData"),s=this._getLoaderOptionFunction("processResult"),c,a=g(),h=this._currentFetchDeferred,b=this._lastFetchState,k=n.Base.Diagnostics.Telemetry,d,rt=this.dataSet,l,nt;et&&(d=k.startTrace({source:"Data",action:"Fetch",name:this._name,data:this._uri}));u&&(this._lastForcedFetchStart=a);this._fetchStartListener({dataSetName:o,promise:h.promise(
),isClientInitiated:r});c=tt(o,b,t)||{};l=y(this._ajaxData,!1,!0)||i;c.data&&(l=it(l,c.data));this._uri||p!==ft.fetchData||w.error("Missing uri parameter in fetchData for '"+o+"' created by: "+(this._constructorCallStack||""));lt.cancelOnDispose(this._lifetimeManager,(function(){var n=p(o,f._uri,l,it(y(f._ajaxHeaders),c.headers),f._httpMethod,f._setAuthorizationHeader);return nt=n.requestedDataType==="json",n})).then((function(n){var l=!0,u=n&&n.cachedAjax?n:{cachedAjax:!1,modified:!0,data:n,cacheTagValue:i},y={data:u.data},c,p,g,nt,tt;u.cacheTagValue&&(f._ajaxHeaders=v.setCacheHeader(f._ajaxHeaders,u.cacheTagValue));try{if(f._lifetimeManager.isDisposed())return;if(Array.isArray(s)||(s=[s]),u.modified)for(p=s.length,c=0;c<p;++c)if(!s[c](o,y,b,t,rt.type)){l=!1;break}g=!r&&e>0;f._onFetchCompleted(r,!0,h);u.modified&&l&&!g&&f._shouldAcceptFetchResult(a)&&f._acceptFetchResult(y,a)}catch(it){nt=FxImpl.Diagnostics.getLogFriendlyMessage(it);tt="Data merge failed for data set '"+o+"'. The error message was: "+
nt;w.error(tt)}finally{et&&k.completeTrace(d);h.resolve({name:o,value:f.dataSet})}})).catch((function(n){if(!f._lifetimeManager.isDisposed()){f._onFetchCompleted(r,!1,h);var t=kt(o,n&&n.jqXHR||n,nt);h.reject(t)}}))},t.prototype._onFetchCompleted=function(n,t,r){var u=this,e=this._pollFrequency!==c.Never;n&&t&&e&&!this._pollingTask&&(this._pollingTask={name:"poll data set: "+this._name,scheduledTask:function(){u._pollData()},recurring:!1,isAsync:!0,delayInMs:l(this._name,f.fast),silent:!0});r===this._currentFetchDeferred&&(this._currentFetchDeferred=i,this._reschedulePolling(!0))},t.prototype._reschedulePolling=function(t){this._pollingTask&&(t&&(this._pollCount=0),n.Base.Scheduler.scheduleTask(this._pollingTask))},t.prototype._shouldAcceptFetchResult=function(n){if(this._lastCompletedFetchStart){var t=n>this._lastCompletedFetchStart,i=this._lastForcedFetchStart&&n<this._lastForcedFetchStart;return t&&!i}return!0},t.prototype._acceptFetchResult=function(n,t){this.dataSet.merge(n.data,{type:
n.type,fetchStart:t,preserveNewItemsOrdering:this._preserveNewItemsOrdering});var r=this.dataSet;r.navigationMetadata(n.navigationMetadata||i);r.partialErrors(n.partialErrors||[]);this._lastCompletedFetchStart=t;this._lastFetchState=n.fetchState;this._merged=!0;this._expiry=g()+l(this._name,f.slow)*3;$(r).trigger("mergeComplete")},t.prototype._determinePollingInterval=function(){return f.normal},t.prototype._pollData=function(){var n,t,i,r,u;if(!this._lifetimeManager.isDisposed())return this._currentFetchDeferred||e||(this._pollCount++,this._isFastPollNeeded()?(n=!0,u="Client side locking or mutation flags detected",t=f.fast):(n=!0,u="Poll is needed",t=this._determinePollingInterval()),t&&(i=l(this._name,t)),n&&(r=Math.ceil(i/l(this._name,f.fast)),n=this._pollCount%r==0)),n?(this._currentFetchDeferred=o(),this._fetchData(!0),this._currentFetchDeferred.promise()):(this._reschedulePolling(),o().resolve(null))},t.prototype._isFastPollNeeded=function(){return this._fastPollingRefCount>0||this.
dataSet.hasUnmergedClientChanges()},t.prototype._getLoaderOptionFunction=function(n){var t;return this._loaderOptions&&(t=this._loaderOptions[n]),!t&&b&&(t=b[n]),t||ft[n]},t})();nt=(function(){function n(){}return n.getData=function(n,t){var i,u,e,f;return rt(n)&&(t=n,n=t.dataSetName||t.uri),i=r[n],i?(f=i.getCachedOrInFlightData(t),u=f.promise,e=f.fetchingSameData):i=ot(n,t),u||(u=i.debounceServerFetch(e,t.forceCacheRefresh)),u},n.forceRefresh=function(n){var t=r[n];if(t)return t.forceRefresh();h.unknownDataSet()},n.getDataSet=function(t,i,r,u,f){var e=!1,o={dataSetLifetime:u,atomizationOptions:f,uri:undefined};return typeof i=="boolean"?e=i:typeof i=="string"&&(e=!0,o.type=i),n.getDataSet2(t,e,o,r)},n.getDataSet2=function(n,t,u,f){var e=r[n],s=u.dataSetLifetime,o;return e&&s&&s!==e.dataSet.lifetime&&h.modifyLifetime(),!e&&t&&(e=ot(n,u)),o=e?e.dataSet:i,o&&f&&o.merge(f),o},n.hasRequestInFlight=function(n){var t=r[n];return t&&t._hasRequestInFlight()},n.disposeDataSet=function(n){var t=r[
n];t&&(t.dispose(),delete r[n])},n.setFastPolling=function(n,t){var i=r[n];i?i.setFastPolling(t):h.unaccessedDataSet()},n.pausePolling=function(){e++},n.resumePolling=function(){e>0&&e--},n.setDefaultLoaderOptions=function(n){b=n},n.getMinPollingInterval=function(){return st()},n.setPollingIntervals=function(n,t){var r=n;rt(n)&&(t=n,r=i);t=bt(t);r?u[r]=t:k=t},n.resetPollingIntervals=function(n){typeof n=="string"?u[n]=null:k=null},n._internal={setDefaultPollingIntervals:function(n){d=n}},n})();t.Loader=nt,(function(n){var t;(function(n){function t(){Object.getOwnPropertyNames(r).forEach((function(n){var t=r[n];t&&(t.dispose(),delete r[n])}))}n.disposeAllCachedDataSetsForTests=t})(t=n.Internal||(n.Internal={}))})(nt=t.Loader||(t.Loader={}))})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=t.Loader,f=n.Data.PollFrequency,s="GET",r="",h={needBothOptions:r,minimumPoll:r,incompatibleOptions:r},u=FxImpl.getErrorMap(h),e=(function(){function r(
i){i.atomizationOptions&&!i.entityTypeName?u.needBothOptions():!i.atomizationOptions&&i.entityTypeName&&(i.atomizationOptions={});this._dataType=i.entityTypeName;this._uriForParams=i.sourceUri;this._httpMethod=i.httpMethod;this._polls=!!i.poll;this._pollInterval=i.pollInterval||null;this._serializeParams=i.serializeParams;this._supplyData=i.supplyData;this._atomizationOptions=i.atomizationOptions;this._processServerResponse=i.processServerResponse;this._preservesClientOrder=!!i.pollPreservesClientOrdering;this._setAuthHeader=i.setAuthorizationHeader;n.Base.ProxiedObservables.markNonSerializable(this);var r=t.Loader.getMinPollingInterval();this._polls&&this._pollInterval!==null&&this._pollInterval<r&&u.minimumPoll(r);this._setAuthHeader!==undefined&&this._supplyData&&u.incompatibleOptions()}return r.prototype._doesPoll=function(){return this._polls},r.prototype.serializeParams=function(n){return this._serializeParams?this._serializeParams(n):this._uriForParams(n)},r.prototype.loadDataSetForParams=
function(n,t,i){var r=this._getDataSetLoaderOptions(n,t,i);return this.loadDataSet(n,r)},r.prototype.loadDataSet=function(n,t){var u=i.getData(n,t),r=u.then((function(n){return n.value}));return r.dataSetName=n,r},r.prototype.refreshDataSet=function(n){return i.forceRefresh(n.dataSetName)},r.prototype.disposeDataSet=function(n){i.disposeDataSet(n.dataSetName)},r.prototype.getLoadedDataSet=function(n){var t=i.getDataSet(n);return t&&t.data?t:null},r.prototype.isLoadingDataSet=function(n){return i.hasRequestInFlight(n)},r.prototype._getDataSetLoaderOptions=function(n,r,u){var h=this,o={uri:this._uriForParams?this._uriForParams(r):null,type:this._dataType,httpMethod:this._httpMethod||s,pollFrequency:this._polls?f.Normal:f.Never,atomizationOptions:this._atomizationOptions,dataSetLifetime:u,preserveNewItemsOrdering:!this._preservesClientOrder,setAuthorizationHeader:this._setAuthHeader,loaderOptions:{processResult:[t.DataProvider.DataContractJsonSerializer.processResult]}},e=this._pollInterval,
c;return this._polls&&e!==null&&i.setPollingIntervals(n,{slowPollingInterval:e,pollingInterval:e,fastPollingInterval:e}),this._supplyData&&(o.loaderOptions.fetchData=function(n,t,i,f,e){return h._supplyData(e,t,f,i,r,u)}),this._processServerResponse&&(c=function(n,t){var i=h._processServerResponse(t.data);return i&&(t.data=i.data,t.navigationMetadata=i.navigationMetadata,t.partialErrors=i.partialErrors),!0},o.loaderOptions.processResult.unshift(c)),o},r})(),o;t.DataCacheLoader=e;o=(function(n){function t(t){n.call(this,t)}return __extends(t,n),t.prototype.establishDataSet=function(n,t,r,u){var f=this._getDataSetLoaderOptions(n,t,u);return i.getDataSet2(n,!0,f,r)},t})(e);t.DataCacheLoader2=o})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Add=0]="Add";n[n.Update=1]="Update"})(n.EditKind||(n.EditKind={}));var t=n.EditKind})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=
FxImpl.Data,i=0,r=(function(){function n(n){var u=this,r,f;this._referrerUniqueId=0;r=n.onEntryDisposed;this._referrerPropertyName="_objectCache_"+ ++i;this._serializeKey=n.serializeKey;this._supplyValue=n.supplyValue;this._tryFindValueInRelatedCache=n.tryFindValueInRelatedCache;this._entries=new t.RefCountCache({evictionDelay:n.evictionDelay,extendEntryLifetimes:n.extendEntryLifetimes,onEntryDisposed:function(n,t){u._telemetryCollector&&u._telemetryCollector.recordEviction(t);n.lifetime&&n.lifetime.dispose();r&&r(n.value,n.key)}});f=n;f.collectEfficiencyTelemetry&&(this._telemetryCollector=new t.ObjectCacheTelemetryCollector)}return n.prototype.getValue=function(n,t){var i=this,r=this._serializeKey(n),s=t?this._getOrCreateReferrerId(t):null,f,u,e,o;return this._telemetryCollector&&(f=this._entries.hasEntry(r)),e=function(){var t=new FxImpl.TriggerableLifetimeManager,r,f;return i._tryFindValueInRelatedCache&&(f=i._tryFindValueInRelatedCache(n,t),f&&(r=f.value,u=!0)),u||(r=i._supplyValue(
n,t)),{key:n,value:r,lifetime:t}},o=this._entries.getEntry(r,s,e).value,this._telemetryCollector&&this._telemetryCollector.recordCacheRead(r,f||u),o},n.prototype.insertValueIfNotPresent=function(n,t,i){var r=this._serializeKey(n),u=this._getOrCreateReferrerId(i);this._entries.getEntry(r,u,(function(){return{key:n,value:t,lifetime:null}}))},n.prototype.hasEntry=function(n){var t=this._serializeKey(n);return this._entries.hasEntry(t)},n.prototype.dissociateEntry=function(n,t){var r=this._serializeKey(n),i=this._getOrCreateReferrerId(t);i&&this._entries.dissociateEntry(r,i)},n.prototype.immediatelyEvictEntry=function(n){var t=this._serializeKey(n);this._entries.immediatelyEvictEntry(t)},n.prototype.forEachEntry=function(n){this._entries.forEachEntry((function(t,i){n(i.key,i.value)}))},n.prototype.dispose=function(){this._entries.dispose()},n.prototype._getOrCreateReferrerId=function(n){var r=this,t=n,i=t[this._referrerPropertyName];return this._referrerPropertyName in t||(t[this._referrerPropertyName]=
i="referrer"+ ++this._referrerUniqueId,n.registerForDispose((function(){delete t[r._referrerPropertyName];r._entries.disposeReferrer(i);i=null}))),i},n})();n.ObjectCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n.Base.Utilities.clone,r=(function(r){function u(n){r.call(this,n);this._navigationOptions=n.navigation?i(n.navigation):null}return __extends(u,r),u.prototype.createView=function(n,i){return new t.QueryView(this,n,i)},u.prototype.createNavigator=function(n){return this.createNavigatorWithOptions(n,null)},u.prototype.createNavigatorWithOptions=function(n,i){var u=this._navigationOptions,f,r,e;if(u)return f={},r=this.createView(n),e=i&&i.createMapping?i.createMapping(n,r.items):r.items,u.loadBySkipTake&&(f.loadBySkipTake=function(n,t,i,f,e,o){return u.loadBySkipTake(r,t,i,f,e,o)}),u.loadByContinuationToken&&(f.loadByContinuationToken=function(n,t,i,f,e){return u.loadByContinuationToken(r,t,i,f,e)}),new t.RemoteDataNavigator(
n,e,r.metadata,f,r.partialErrors);throw new Error("Cannot create a DataNavigator, because the QueryCache has no navigation options configured.");},Object.defineProperty(u.prototype,"navigationOptions",{get:function(){return this._navigationOptions},enumerable:!0,configurable:!0}),u.prototype._findMatchingEntity=function(n,t){var i;return this._forEachEntry((function(r,u,f){if(f&&!i){var e=ko.unwrap(f.data);e&&(i=e.first((function(i){return n(i,t)})))}})),i},u.prototype._getDataFromDataSet=function(n){var t=n.data;if(!ko.isObservable(t)||!Array.isArray(t()))throw new Error("DataSets used with QueryCache must contain an observable-wrapped array.");return n.data},__decorate([n.Composition.ProxyCompatibilityMode],u)})(FxImpl.Data.DataCache);t.QueryCache=r})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=ko.observable,u=ko.observableArray,i=ko.computed,f=(function(t){function f(n,f,e){var o=this;t.call(this,n,f,e||{});this._items=u();this._metadata=
r(null);i(f,(function(){var i=o._loadedCacheEntry(),r=o._items,n,t;if(i)if(n=i.data,ko.isObservable(n)){if(t=n(),!Array.isArray(t))throw new Error("DataSets used with QueryView must contain arrays.");r(t)}else throw new Error("DataSets used with QueryView must contain observable data.");else r([])}));i(f,(function(){var n=o._loadedCacheEntry(),t=o._metadata;n?t(n.navigationMetadata()||null):t(null)}))}return __extends(f,t),Object.defineProperty(f.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"metadata",{get:function(){return this._metadata},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"data",{get:function(){return this._items},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],f)})(FxImpl.Data.DataView);t.QueryView=f})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n,t){var i=t?encodeURIComponent:null;return function(
t){var r=typeof t,u=r==="string"||r==="number"?{id:t}:t;return n.format(u,i)}}n.uriFormatter=t})(t=n.Data||(n.Data={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t=FxImpl.Constants.RpcMethods,i=MsPortalFx.Base.Rpc.Internal.ActionEndPointDefinition;n.updateTenantInfoEndPoint=new i(t.updateTenantInfo);n.updateSubscriptionInfoEndPoint=new i(t.updateSubscriptionInfo);n.getRegisteredResourceProviderInfoEndPoint=new i(t.getRegisteredResourceProviderInfo)})(t=n.Azure||(n.Azure={}))})(t=n.Internal||(n.Internal={}))})(HubsExtension||(HubsExtension={})),(function(n){var t;(function(n){"use strict";function i(n){return n.toLowerCase()}function g(n,t,r){var u=n[i(t)];return u?(r(u),!0):!1}function nt(n,t,r,u){var f=n[i(t)],e;return f&&(e=f.kinds[i(r)],e)?(u(f,e),!0):!1}function tt(n,t,f){var h=function(n,t){var o=f||window.location.protocol==="https:"?y:v,e;return o.test(n)?{type:2,data:n,options:{isLogo:!0}}:p.test(n)?{type:1,data:n,options:{isLogo:
!0}}:(t=i(t||""),u[t]||(e=r.Utilities.getCurrentCallStack(!0),w.warning("Invalid resource type metadata ("+t+"), icon must be inline SVG or a URL: "+n.substr(0,50)+"\n"+e),u[t]=!0),null)},c=t&&t.icon,l=n&&n.resourceType,e,o,s;return c&&(e=h(c,l+":"+t.kind),e)?e:(o=n&&n.icon,o&&(s=h(o,l),s))?s:null}var r=MsPortalFx.Base,v=/^(https\:\/\/|http\:\/\/|\/\/)/i,y=/^(https\:\/\/|\/\/)/i,p=/^(\<svg(\>|\ )|\<\?xml\ ([a-z][^(\=|\ |\")]*\=\"(?:[^\"\\]|\\.)*?\"\ ?)*\?\>[\s]*\<svg(\>|\ ))/i,w=new r.Diagnostics.Log("MsPortalFx/Observables/AzureObservables"),u={},t=ko.observable,b=(function(){function n(){}return n})(),f,e,o,s,h,c,l,a,k,d;n.Subscription=b;f=(function(){function n(){}return n})();n.SubscriptionPolicies=f;e=(function(){function n(){}return n})();n.SubscriptionList=e;o=(function(){function n(){}return n})();n.TenantInfo=o;s=(function(){function n(){}return n})();n.Tenant=s;h=(function(){function n(){this.regionPicker={regionId:t()}}return n})();n.RegionPickerDataModel=h;c=(function(){function n(){this.
subscriptionPicker={subscriptionId:t(),subscriptionName:t()}}return n})();n.SubscriptionPickerDataModel=c;l=(function(){function n(){this.resourceGroup={resourceGroupName:t(),subscriptionId:t()}}return n})();n.ResourceGroupDataModel=l;a=(function(){function n(){this.resourceGroupPicker={resourceGroupName:t(),resourceGroupLocation:t(),subscriptionId:t(),isNewResourceGroup:t()}}return n})();n.ResourceGroupPickerDataModel=a,(function(n){var t=r.Constants.ExtensionNames,i;(function(n){n.PricingSummaryBlade={displayText:MsPortalFx.Resources.Strings.Services.Gallery.viewPricingSummaryLabel,bladeName:"PricingSummaryBlade",bladeExtension:t.Marketplace};n.LegalTermsBlade={bladeName:"LegalTermsBlade",bladeExtension:t.Marketplace};n.ChannelType={directEA:"DirectEA",indirectEA:"IndirectEA",direct:"Direct",csp:"CSP"}})(i=n.Constants||(n.Constants={}))})(k=n.Pricing||(n.Pricing={})),(function(n){n.defaultVisibility="default";n.hiddenVisibility="hidden"})(d=n.KindMetadataVisibility||(n.KindMetadataVisibility=
{}));n.withResourceType=g;n.withResourceTypeKind=nt;n.getResourceKindIconAsImage=tt})(t=n.Azure||(n.Azure={}))})(HubsExtension||(HubsExtension={})),(function(n){var t;(function(n){var t;(function(n){"use strict";n.CellWidth=85;n.CellHeight=85;n.CellSpacingWidth=5;n.CellSpacingHeight=5;n.GridSpacingWidth=n.CellWidth+n.CellSpacingWidth;n.GridSpacingHeight=n.CellHeight+n.CellSpacingHeight})(t=n.AzureGrid||(n.AzureGrid={}))})(t=n.Widgets||(n.Widgets={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Theme=0]="Theme";n[n.Blue=1]="Blue";n[n.Green=2]="Green";n[n.Orange=3]="Orange";n[n.Pink=4]="Pink";n[n.Purple=5]="Purple";n[n.Azure=6]="Azure";n[n.Dark=7]="Dark";n[n.Red=8]="Red"})(n.PartColor||(n.PartColor={}));var t=n.PartColor})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Custom=0]="Custom";n[n.CollectionSummary=1]="CollectionSummary";n[n.Error=3]="Error";n[n.ItemSummary=4]="ItemSummary";
n[n.Settings=7]="Settings";n[n.SingleSetting=8]="SingleSetting";n[n.LogStream=11]="LogStream";n[n.Grid=14]="Grid";n[n.Editor=15]="Editor";n[n.DiffEditor=16]="DiffEditor";n[n.Provisioning=17]="Provisioning";n[n.Unavailable=18]="Unavailable";n[n.Create=19]="Create";n[n.Button=20]="Button";n[n.QuickStart=21]="QuickStart";n[n.Asset=22]="Asset";n[n.InfoList=23]="InfoList";n[n.Properties=24]="Properties";n[n.Collection=25]="Collection";n[n.Chart=26]="Chart";n[n.SingleValueGauge=27]="SingleValueGauge";n[n.Donut=28]="Donut";n[n.QuotaGauge=29]="QuotaGauge";n[n.ResourceSummary=30]="ResourceSummary";n[n.Frame=31]="Frame"})(n.PartKind||(n.PartKind={}));var t=n.PartKind})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Mini=0]="Mini";n[n.Small=1]="Small";n[n.Normal=2]="Normal";n[n.Wide=3]="Wide";n[n.Tall=4]="Tall";n[n.HeroWide=5]="HeroWide";n[n.HeroTall=6]="HeroTall";n[n.HeroWideFitHeight=7]="HeroWideFitHeight";n[n.FullWidthFitHeight=
8]="FullWidthFitHeight";n[n.FitToContainer=9]="FitToContainer";n[n.Large=10]="Large";n[n.Hero=11]="Hero";n[n.Custom=99]="Custom"})(n.PartSize||(n.PartSize={}));var t=n.PartSize})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function u(n,t){var i=function(n,t,i){return n<0?-1:n===0?0:Math.max(0,n*t+(n-1)*i)};return{width:i(n,r.CellWidth,r.CellSpacingWidth),height:i(t,r.CellHeight,r.CellSpacingHeight)}}function f(n,t){var i=function(n,t,i){return Math.ceil(n/(t+i))};return{colSpan:i(n,r.CellWidth,r.CellSpacingWidth),rowSpan:i(t,r.CellHeight,r.CellSpacingHeight)}}var i=n.Parts.PartSize,r=n.Widgets.AzureGrid,e;(function(t){function o(n,t){var i=function(n){return Math.ceil(Math.min(Math.max(n,1),25))};return u(i(n),i(t))}function s(u,e){var o=n.find(t.AllSizes,(function(n){var t=n&&n.size;return n&&t.width===u&&t.height===e}));return o||(o=r(i.Custom),o.size={width:u,height:e},o.span=f(u,e)),$.extend(!0,{},o)}function h(){return r(i.Normal)}
function r(i){return $.extend(!0,{},n.find(t.AllSizes,(function(n){return n&&n.name===i})))}function e(n){return function(t){return t===n}}function c(n){var t=e(n),r=[i.Mini,i.Small,i.Normal,i.Wide,i.Tall,i.Large,i.HeroWide,i.HeroTall,i.Hero,i.Custom];return r.some(t)}function l(n){var t=e(n),r=[i.HeroWideFitHeight,i.FullWidthFitHeight,i.FitToContainer];return r.some(t)}function a(n){var t=e(n),r=[i.FullWidthFitHeight,i.FitToContainer];return r.some(t)}t.AllSizes=(function(){var t=[],n=function(n,r,f){t[n]={name:n,css:"fxs-tilesize-"+i[n].toLowerCase(),size:u(r,f),span:{colSpan:r,rowSpan:f}}};return n(i.Mini,1,1),n(i.Small,2,1),n(i.Normal,2,2),n(i.Wide,4,2),n(i.Tall,2,4),n(i.HeroWide,6,4),n(i.HeroTall,4,6),n(i.HeroWideFitHeight,6,0),n(i.FullWidthFitHeight,-1,0),n(i.FitToContainer,-1,-1),n(i.Large,4,4),n(i.Hero,6,6),n(i.Custom,0,0),t})();t.AllCssClasses=t.AllSizes.map((function(n){return n.css}));t.getGridPixelSize=o;t.getCorrespondingStandardSize=s;t.getDefaultSize=h;t.getSize=r;t.isFixedSize=
c;t.isVariableSize=l;t.isAdaptiveWidth=a})(e=t.PartSizeHelper||(t.PartSizeHelper={}))})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Ready=0]="Ready";n[n.Failed=1]="Failed"})(n.PartState||(n.PartState={}));var t=n.PartState})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Fixed=0]="Fixed";n[n.Programmatic=1]="Programmatic";n[n.User=2]="User"})(n.ResizeMode||(n.ResizeMode={}));var t=n.ResizeMode})(t=n.Parts||(n.Parts={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function i(n,t,i){var f=u.Utilities.clone(n);return r.addAssetExpansion(f,t(f,i)),f}function f(n,t,r,u){var f=i(n,r,u);return t.push(f),f}var u=n.Base,r,e;(function(n){function r(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]!==undefined}function u(t){return t.hasOwnProperty(n.assetDetailsPropertyName)&&t[n.assetDetailsPropertyName]}
function f(n,r){var u=r.icon,f=[r,r.title,r.description,u,r.assetId,r.assetType||""];t.forEach((function(t,r){i(n,t,f[r])}))}function e(n){r(n)&&t.forEach((function(t){i(n,t,undefined)}))}n.assetDetailsPropertyPrefix="$$MSPORTALFX";n.assetDetailsPropertyName=n.assetDetailsPropertyPrefix+"$assetDetails";n.titlePropertyName=n.assetDetailsPropertyName+"$title";n.descriptionPropertyName=n.assetDetailsPropertyName+"$description";n.iconPropertyName=n.assetDetailsPropertyName+"$icon";n.assetTypeStringPropertyName=n.assetDetailsPropertyName+"$assetTypeString";n.assetIdPropertyName=n.assetDetailsPropertyName+"$assetId";var t=[n.assetDetailsPropertyName,n.titlePropertyName,n.descriptionPropertyName,n.iconPropertyName,n.assetIdPropertyName,n.assetTypeStringPropertyName],i=function(n,t,i){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!1,value:i})};n.isAssetExpanded=r;n.getAssetExpansion=u;n.addAssetExpansion=f;n.removeAssetExpansion=e})(r=t.AssetExpansion||(t.AssetExpansion={}));t.
assetExpandItem=i;t.assetExpandItemAndAddToResultSet=f,(function(n){function t(n,t,r,u){var f=n.map((function(n){return i(n,r,u)}));return t(f()),f.subscribe(t)}n.connectDataSet=t})(e=t.DataSetAssetExpansionMapper||(t.DataSetAssetExpansionMapper={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(){function n(){}return n.subscribeDataSet=function(n,t,i,r){n().forEach((function(n,i){t(n,i,r)}));var u="Subscription does not handle ";return n.subscribeArrayEdits(null,(function(n){n=ko.utils.adjustArrayEdits(n);n.forEach((function(n){switch(n.status){case"added":if(t)t(n.value,n.index,r);else throw new Error(u+"insert.");break;case"deleted":if(i)i(n.value,n.index,r);else throw new Error(u+"remove.");}}))}))},n.insertItem=function(n,t,i){n.splice(i,0,t)},n.removeItem=function(n,t,i){n.splice(i,1)},n})();n.DataSetSubscription=t})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(
n){"use strict";var t,u,i,f,r;n.noSubCreateCategoryId="hidden_nosubcreate";t=ko.observable,(function(n){n.GalleryParametersKey="galleryParameters";n.GalleryOptionsKey="galleryOptions"})(u=n.Constants||(n.Constants={}));i=(function(){function n(){}return n.prototype.galleryCreatePreCheck=function(){return null},n})();n.BaseGalleryServiceViewModel=i,(function(n){n[n.template=0]="template";n[n.fragment=1]="fragment";n[n.custom=3]="custom";n[n.metadata=4]="metadata"})(n.ArtifactType||(n.ArtifactType={}));f=n.ArtifactType;r=(function(){function n(){this.galleryParameters={selectedTemplateId:t(),templateJson:t(),subscriptionId:t(),resourceGroupName:t(),resourceGroupLocation:t(),resourceProviders:t(),primaryResourceId:t(),deploymentName:t()}}return n})();n.GalleryDataModel=r})(t=n.Gallery||(n.Gallery={}))})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function r(){return i.Rpc.Internal.client.acquireObject(FxImpl.Constants.RpcMethods.getSettings,
i.Constants.Shell,null).then((function(n){return n.getValue()}))}var i=n.Base;t.getSettings=r})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function f(n){return{trace:n,traceBrowserInfo:u,flush:function(){return s}}}function l(n,t){return n?new c(n,t):f(u)}function a(){return f((function(t){t.actionModifier!==n.Base.Diagnostics.Telemetry.ActionModifier.Start&&console.log("[PERF] "+JSON.stringify(t))}))}var r=n,e=r.Base,o=e.EventTypes,i=window,s=n.Helpers.resolve(),u=r.noop,h=r.forEachKey,c=(function(){function n(n,t){function f(n){n&&u.execute([n],n.optional)}function r(n){h(n,(function(n,t){f({timestamp:Date.now(),source:"BrowserInfo",action:n,data:t})}))}i.location.search&&n.indexOf("?")===-1&&(n+=i.location.search);var u=FxImpl.getStandardDebouncer(n,!0,t);this.trace=f;this.traceBrowserInfo=function(){function s(){var n=t.height,u=t.width,f=i.innerHeight,e=i.innerWidth;r({ScreenHeight:n,ScreenResolution:u+" x "+n,ScreenWidth:u,WindowHeight:
f,WindowResolution:e+" x "+f,WindowWidth:e})}var t=i.screen||{},n=i.navigator||{},f=t.availHeight,e=t.availWidth,u;r({AppName:n.appName,AppVersion:n.appVersion,CpuClass:n.cpuClass,Language:n.language,Location:i.location.href,Platform:n.platform,ScreenAvailableHeight:f,ScreenAvailableResolution:e+" x "+f,ScreenAvailableWidth:e,ScreenColorDepth:t.colorDepth});s();u=0;$(i).on(o.resize,(function(){i.clearTimeout(u);u=i.setTimeout(s,1e4)}));r({SystemLanguage:n.systemLanguage,UserAgent:n.userAgent,UserLanguage:n.userLanguage})};this.flush=function(){return u.flush()}}return n})();t.getTelemetryEventProcessor=l;t.getConsoleTelemetryEventProcessor=a})(t=n.Services||(n.Services={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(t,i){if(r(u(t))||r(u(i)))throw new Error("compareIds requires ids for comparison.");return n.deepEquals(t,i,!0)}var r=n.isNullOrUndefined,e=n.initObservable,i=n.initObservableArray,u=ko.utils.peekObservable,
f;t.compareIds=o;f=(function(){function t(n,t){t===void 0&&(t={});this._lifetime=n.createChildLifetime();this._msPortalFxSelectableSet=!0;this.dynamicSelectionProvider=t.dynamicSelectionProvider;this.commandGroupProvider=t.commandGroupProvider;this.selectionMode=t.selectionMode||2;this.activationMode=t.activationMode||2;this.selectedIds=i(t.selectedIds);this.selectedAll=e(t.selectedAll,!1);this.unselectedIds=i(t.unselectedIds);this.activatedIds=i(t.activatedIds)}return t.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},Object.defineProperty(t.prototype,"lifetime",{get:function(){return this._lifetime},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.SelectableSet=f})(i=t.Selection2||(t.Selection2={}))})(i=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function a(t,i){if(i){var u=t.peek(),r=u.slice();n.pushUnique(
r,i,null,!0);r.length!==u.length&&t(r)}}var u=n.isUndefined,h=n.isNullOrUndefined,c=ko.unwrap,i=ko.observable,f=ko.observableArray,e=ko.computed,r="added",l="deleted",v="_lifetime",y=FxImpl.TriggerableLifetimeManager,o="",w={noCreateSelection:o,noMatchesSelection:o,badSelectableValue:o,readOnlyEdits:o},s=FxImpl.getErrorMap(w),k=window.fx.environment.isDevelopmentMode,b=(function(){function t(t,o,p,w,b,k,d){var g=this,tt,nt;this.selectedItems=f();this.activatedItems=f();this.itemsWithChildEdits=f();this.itemsArePinnable=i(!0);this._msPortalFxCurrentCommands=i();this._isDisposed=!1;ko.isObservable(t)&&typeof t!="object"||(o=t.itemMatchesSelection,p=t.createSelection,w=t.initialState,b=t.supplyCommands,k=t.keepDeselectedItemsActivated,d=t.leaveSelectionOnDeactivation,t=t.items);o&&!p&&s.noCreateSelection();p&&!o&&s.noMatchesSelection();tt=this._lifetime=new y;this._msPortalFxHasCreateSelection=!0;o||p||(o=function(n,t){return n===t},p=function(n){return n},this._msPortalFxHasCreateSelection=
!1);nt=function(n,t){return ko.ignoreDependencies((function(){return o(n,t)}))};this.itemMatchesSelection=nt;this.createSelection=p;this._msPortalFxFindDataItem=function(i,r){var u=!(r&&r.length),f=u?nt:function(t,i){var u=p(t);return n.find(r,(function(t){return!n.deepEquals(u[t],i[t])}))===undefined};return t().first((function(n){return f(n,i)}))};this._msPortalFxSupplyCommands=b?function(n){var t=b(n);return g._msPortalFxCurrentCommands(t),t}:undefined;this._msPortalFxCursor=i(null);this._msPortalFxDelayedBladeSelection=i();var it,at=this,vt=function(n){return n.data===it},et=function(n){return n.some((function(n){return nt(it,n)}))},ot=function(){return et(g.activatedItems.peek())},st=function(){return et(g.selectedItems.peek())},yt=function(n){return function(){return at.itemsWithChildEdits().some((function(t){return nt(n,t.item)}))}},ut=e(tt,(function(){for(var u,o,y,h,r=ut?ut.peek():[],c=r.map((function(n,t){return t})),l=[],a=t(),n,f=0,p=a.length;f<p;f++)it=a[f],u=r.firstIndex(vt),u>=0?(n=r[
u],c[u]=-1,o=ot(),y=o||st(),n.isActivated(o),n.isSelected(y)):(h=tt.createChildLifetime(),n={data:it,isSelected:i(st()),isActivated:i(ot()),hasChildEdits:e(h,{read:yt(it),write:function(){s.readOnlyEdits()}})},n[v]=h),l.push(n);return c.forEach((function(n){if(n>=0){var t=r[n],i=t&&t[v];i&&i.dispose()}})),l}));this.selectableItems=f(ut());ut.subscribe(tt,(function(n){(g.selectableItems().length!==0||n.length!==0)&&g.selectableItems.splice.apply(g.selectableItems,[0,g.selectableItems().length].concat(n))}));var ft=this.selectableItems(),ht=function(n){var i=g.selectedItems().first((function(t){return nt(n.data,t)})),f=g.activatedItems().first((function(t){return nt(n.data,t)})),e=g.selectableItems().indexOf(n)<0,r,u,t;!e&&n.isSelected()?i||(r=function(n){h(n)||g.selectedItems.splice(0,0,n)},f||!g._createDelayedBladeSelection?(u=f||p(n.data),r(u)):(t=g._createDelayedBladeSelection(n.data),t&&t.preventActivation!==!0&&t.selectedValuePromise.then((function(){var t=g._isDisposed||!n.isSelected()||!g.
selectableItems().first((function(t){return n===t}));t||r(u)})))):(i&&g.selectedItems.remove(i),k||n.isActivated(!1))},ct=function(n){var u=g.selectedItems().first((function(t){return nt(n.data,t)})),i=g.activatedItems().first((function(t){return nt(n.data,t)})),f=g.selectableItems().indexOf(n)<0,r,t;!f&&n.isActivated()?i||(u||!g._createDelayedBladeSelection?(r=u||p(n.data),h(r)||g.activatedItems.splice(0,0,r)):(t=g._createDelayedBladeSelection(n.data),t&&t.preventActivation!==!0&&g._msPortalFxDelayedBladeSelection(t))):(i&&g.activatedItems.remove(i),d||n.isSelected(!1))},rt,lt=function(){rt&&rt.dispose();rt=tt.createChildLifetime();ft.forEach((function(n){n.isSelected.subscribe(rt,(function(){ht(n)}));n.isActivated.subscribe(rt,(function(){ct(n)}))}))};this.selectableItems.subscribeArrayEdits(tt,(function(n){n.forEach((function(n){if(u(n.moved)&&!h(n.value))switch(n.status){case r:case l:ht(n.value);ct(n.value)}}));lt()}));lt();this.selectedItems.subscribeArrayEdits(tt,(function(n){n.forEach((function(n)
{if(u(n.moved))switch(n.status){case r:case l:ft.some((function(t){return nt(t.data,n.value)?(t.isSelected(n.status===r),!0):!1}))}}))}));this.activatedItems.subscribeArrayEdits(tt,(function(n){n.forEach((function(n){if(u(n.moved))switch(n.status){case r:case l:ft.some((function(t){return nt(t.data,n.value)?(t.isActivated(n.status===r),!0):!1}))}}))}));w&&(a(this.selectedItems,c(w.selectedItems)),a(this.activatedItems,c(w.activatedItems)),a(this.itemsWithChildEdits,c(w.itemsWithChildEdits)))}return t.prototype.activateAllSelectedItems=function(){this.activatedItems(this.selectedItems.slice(0))},t.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null);this._isDisposed=!0},t.prototype._setCreateDelayedBladeSelection=function(n){var t=this;this._createDelayedBladeSelection=n;this._msPortalFxCreateSelectionAsync=function(n){var i=t._createDelayedBladeSelection(n);return i?i.selectedValuePromise:Q(null)};this.createSelection=null},t})(),p;t.SelectableSet=b;p=(function(
){function n(n){var t=this;n===void 0&&(n={});var o=!1,r=i(n.selectedValue),f=this,h=this._lifetime=new y;f.lock=function(){o=!0};f.setInternalSelectedValue=function(n){r(n)};f.isLocked=function(){return o};this.selectedValue=e(h,{read:function(){return r()},write:function(n){r(n)}});this.isSelected=i(!!n.isSelected);this.isCommandSelected=i(!!n.isCommandSelected);this.hasChildEdits=i(!1);this.isActivated=i(!!n.isActivated);this.isClickable=ko.pureComputed((function(){return!t.isSelected()}));this.value=e(h,{read:function(){return t.isSelected()?t.selectedValue():undefined},write:function(n){u(n)?(t.isSelected(!1),t.isActivated(!1)):s.badSelectableValue()}})}return n.prototype.dispose=function(){this._lifetime&&(this._lifetime.dispose(),this._lifetime=null)},n.prototype.setIsSelected=function(n,t){n&&n.container&&n.container.selectable?this.isSelected(!!n.container.selectable.isSelected):this.isSelected(t)},n.prototype.onClick=function(){this.isSelected(!0)},n})();t.Selectable=p})(t=n.ViewModels||
(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function i(n,t,i){return{extension:n,detailBlade:t,detailBladeInputs:i}}function r(n,t,i){return{extension:n,assetType:t,detailBladeInputs:i}}function f(n,t){return n&&t?u.every((function(i){var e=i.name,r=n[e],u=t[e],f;return r&&u?(f=i.value,f?f(r,u):r===u):!r==!u})):!n==!t}t.getBladeSelection=i;t.getAssetSelection=r;var u=[{name:"extension"},{name:"detailBlade"},{name:"assetType"},{name:"resourceId"},{name:"cloudName",value:FxImpl.Extension.isEqualCloudName},{name:"detailBladeInputs",value:n.deepEquals}];t.equalDynamicSelections=f})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n,t,i,r){return{cloudName:n,extension:t,assetType:i,detailBladeInputs:r}}function i(n,t,i,r){return{cloudName:n,extension:t,detailBlade:i,detailBladeInputs:r}}n.getAssetSelection=t;n.getBladeSelection=i})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||
(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var f=!1,r=ko.observableArray,u=ko.utils.peekObservable,t="",e={selectableSetMissing:t,nameMissing:t,alreadyRegistered:t,alreadyRegisteredWithName:t,InvalidParams:t,notRegistered:t,unexpectedSyncGuard:t},i=FxImpl.getErrorMap(e),o=(function(){function n(n,t){this._disposables=[];this._selectableSets=r();this._selectableSetMap={};this._subs=[];this._syncing=[null];this.selectableItems=r();this.selectedItems=r();this.activatedItems=r();this.itemsWithChildEdits=r();this._getSetName=n;this._initComputeds();this._initSubs();t&&this._initState(t)}return n.prototype.registerSelectableSet=function(n,t){n||i.selectableSetMissing();t||i.nameMissing();this._selectableSets.peek().some((function(t){return t===n}))&&i.alreadyRegistered();this._selectableSetMap[t]&&i.alreadyRegisteredWithName(t);this._selectableSetMap[t]=n;this._selectableSets.push(n);this._attachSet(n,t)},n.prototype.unregisterSelectableSet=function(n){var r,t;n||
i.InvalidParams();typeof n=="string"?t=n:r=n;t&&(this._selectableSetMap[t]?r=this._selectableSetMap[t]:i.notRegistered(t));this._detachSet(r,!0);this._selectableSets.remove(r);delete this._selectableSetMap[t]},n.prototype.dispose=function(){for(var n;n=this._disposables.pop();)n.dispose();for(this._disposables=null;this._subs.length;)this._detachSet(this._subs[this._subs.length-1].selectableSet,!1)},n.prototype._initComputeds=function(){var n=this;this._disposables.push(ko.computed((function(){var t=n._selectableSets().map((function(n){return n.selectableItems()}));n.selectableItems(Array.prototype.concat.apply([],t))})))},n.prototype._initSubs=function(){var n=this;this._disposables.push(this.activatedItems.subscribe((function(t){n._syncItemsToChildSets(t,(function(n,t){return n.activatedItems(t)}))})));this._disposables.push(this.selectedItems.subscribe((function(t){n._syncItemsToChildSets(t,(function(n,t){return n.selectedItems(t)}))})))},n.prototype._initState=function(n){n.selectedItems&&this.
selectedItems(u(n.selectedItems));n.activatedItems&&this.activatedItems(u(n.activatedItems))},n.prototype._attachSet=function(n,t){var i=this._createSyncToParentArray(n.selectedItems,this.selectedItems,t,!0),r=this._createSyncToParentArray(n.activatedItems,this.activatedItems,t,!0);this._syncItemsToChildSets(this.selectedItems(),(function(n,t){return n.selectedItems(t)}),t);this._syncItemsToChildSets(this.activatedItems(),(function(n,t){return n.activatedItems(t)}),t);this._subs.push({selectableSet:n,subscriptions:[r,i]})},n.prototype._detachSet=function(n,t){var i=this._subs.first((function(t){return t.selectableSet===n}));i&&this._subs.splice(this._subs.indexOf(i),1);t&&(this._removeItems(n.selectedItems,this.selectedItems),this._removeItems(n.activatedItems,this.activatedItems));i.subscriptions.forEach((function(n){return n.dispose()}))},n.prototype._removeItems=function(n,t){t.removeAll(n())},n.prototype._syncItemsToChildSets=function(n,t,i){var e=this,u={},r,f;if(n.forEach((function(n){var
i=e._getSetName(n),t=u[i];t||(u[i]=t=[]);t.push(n)})),i)r=this._selectableSetMap[i],r&&u[i]&&this._guardedSync(i,(function(){return t(r,u[i]||[])}));else for(f in this._selectableSetMap)r=this._selectableSetMap[f],r&&this._guardedSync(f,(function(){return t(r,u[f]||[])}))},n.prototype._createSyncToParentArray=function(n,t,i){var r=n.peek();return r.length&&this._guardedSync(i,(function(){t.push.apply(t,r)})),n.subscribe((function(n){_this._guardedSync(i,(function(){var i=t.peek();t.valueWillMutate();try{i.length=0;i.push.apply(i,n)}finally{t.valueHasMutated()}}))}))},n.prototype._guardedSync=function(n,t){if(this._syncing[0]!==n){this._syncing.unshift(n);try{t()}finally{var r=this._syncing.shift();r!==n&&i.unexpectedSyncGuard(r,n)}}},n})();n.MultiplexingSelectableSet=o})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){t===void 0&&(t={});n.
call(this,t);this.delayedBladeSelection=i()}return __extends(t,n),t})(n.ViewModels.Selectable);t.Selectable=r})(i=t.Internal||(t.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(n,t){n._setCreateDelayedBladeSelection(t)}n.setCreateDelayedBladeSelection=t})(t=n.SelectableSet||(n.SelectableSet={}))})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(){function t(n){if(this.controlType=0,n){var t=this._lifetimeManager=n.createChildLifetime();t.registerForDispose(this)}else this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this._disposed=!1}return t.prototype.dispose=function(){var n=this._lifetimeManager;n&&(n.dispose(),this._lifetimeManager=null);this._disposed=!0},Object.defineProperty(t.prototype,"lifetimeManager",
{get:function(){return this._lifetimeManager},enumerable:!0,configurable:!0}),t.prototype.populateFromObject=function(n){var r=this,t=n;for(var i in t)t.hasOwnProperty(i)&&t[i]!==undefined&&(r[i]=t[i])},t.prototype._addDisposablesToCleanUp=function(n){this.lifetimeManager.registerForDispose(n)},__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.ViewModel=i})(i=t.Base||(t.Base={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.initObservable,r=ko.observable,u=(function(n){function t(t,u){t&&t.createChildLifetime||(t=undefined,u=arguments[0]);n.call(this,t);u===!1||u===!0?u={loading:r(u)}:(u===null||u===undefined)&&(u={});this.disabled=i(u.disabled,!1);this.loading=i(u.loading,!1)}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=u})(i=t.Loadable||(t.Loadable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.
ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.name=null;this.value=i();this.dirty=i()}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.EditableControl||(n.EditableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,r;t.DefaultDelayValidationTimeout=500;r=(function(n){function t(t){var r=this;n.call(this,t);this.enableValidation=i(!0);this.delayValidationTimeout=i(0);this.validationState=i(0);this.validators=u();this.valid=ko.computed((function(){return!r.enableValidation()||r.validators().length===0||r.enableValidation()&&r.validators().length>0&&(r.validationState()===0||r.validationState()===2)}))}return __extends(t,n),t})(n.EditableControl.ViewModel);
t.ViewModel=r})(t=n.ValidatableControl||(n.ValidatableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var r=ko.observable,i;t.DefaultValidationDelay=500;i=(function(i){function u(){i.apply(this,arguments);this.delayValidationTimeout=r(t.DefaultValidationDelay);this.valueUpdateTrigger=n.ValueUpdateTrigger.Default}return __extends(u,i),u})(n.ValidatableControl.ViewModel);t.ViewModel=i})(t=n.TypableControl||(n.TypableControl={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var f=ko.observable,i,r,u,e;(function(n){n[n.LeftTop=3]="LeftTop";n[n.RightTop=5]="RightTop";n[n.LeftBottom=10]="LeftBottom";n[n.RightBottom=12]="RightBottom"})(i||(i={}));t.PositioningAlignment=i,(function(n){n[n.BottomRight=
0]="BottomRight";n[n.TopRight=1]="TopRight";n[n.BottomLeft=2]="BottomLeft";n[n.TopLeft=3]="TopLeft"})(r||(r={}));t.DropDownPositioning=r,(function(n){n[n.Default=0]="Default";n[n.Full=1]="Full";n[n.MinWidgetMaxContent=2]="MinWidgetMaxContent"})(u||(u={}));t.DropDownWidth=u;e=(function(n){function t(t){n.call(this,t);this.popupAlignment=5;this.inputAlignment=12;this.dropDownPositioning=f(0);this.dropDownWidth=f(1)}return __extends(t,n),t})(n.ValidatableControl.ViewModel);t.ViewModel=e})(i=t.EditableCombo||(t.EditableCombo={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Forms,i=ko.observable,u,f,e;(function(n){n[n.Top=0]="Top";n[n.Left=1]="Left";n[n.Hidden=2]="Hidden"})(t.LabelPosition||(t.LabelPosition={}));u=t.LabelPosition,(function(n){n[n.Bottom=0]="Bottom";n[n.Right=1]="Right"})(t.SubLabelPosition||(t.SubLabelPosition={}));f=t.
SubLabelPosition,(function(t){var u;(function(t){var u=(function(t){function u(u,f){t.call(this,u,f);f=f||{};this.label=n.isNullOrUndefined(f.label)?i():f.label;this.subLabel=f.subLabel;this.labelPosition=n.isNullOrUndefined(f.labelPosition)?i(r.LabelPosition.Top):f.labelPosition;this.subLabelPosition=n.isNullOrUndefined(f.subLabelPosition)?i(r.SubLabelPosition.Bottom):f.subLabelPosition;this.infoBalloonContent=n.isNullOrUndefined(f.infoBalloonContent)?i():f.infoBalloonContent;this.infoBalloonLinkContent=f.infoBalloonLinkContent||i();this.hideValidationCheck=f.hideValidationCheck||!1}return __extends(u,t),u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(u=t.LabelAndBalloon||(t.LabelAndBalloon={}))})(e=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n,o=f.Base.Diagnostics,c=f.Base.Promises.cancelOnDispose,u=
f.isNullOrUndefined,r=ko.observable,e=ko.computed,l=ko.ignoreDependencies,a=window,s=2,h=window.navigator.userAgent,v=!/MSIE /i.test(h)&&/Trident[\/]/i.test(h)&&!/Edge\//i.test(h),y=(function(t){function i(i,f,e,h){var y=this,c=null,l=null,a=null,v;u(f)||f.valid&&f.sections?!u(f)&&f.valid&&f.sections&&(c=f):h=f;typeof e=="string"?l=e:e&&(a=e);e&&h&&h.defaultValue&&o.Log.writeEntry(s,"Forms","Both edit scope and default value are set.  Forms should only specify one of the two.  The default value will be ignored.");h=h||{};t.call(this,i,h);this._options=h;this._msPortalFxViewModelValueChangesAreClean=!!this._options.viewModelValueChangesAreClean;this._form=c;this.controlType=0;this.enableValidation=r(!1);this.valid=r(!0);this.validate=r(0);this.delayValidationTimeout=r(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout);this.performValidation=r(null);this.ensureValidation=r(0);this.validations=h.validations||ko.observableArray();this.defaultValue=h.defaultValue||r(null);
this.initialValue=r(null);this._previousEditScope=null;this.telemetryKeys=h.telemetryKeys;this._msPortalFxWidgetValue=r();this.enabled=r(!this.disabled());this.enabled.subscribe(this.lifetimeManager,(function(n){y.disabled(!n)}));this.disabled.subscribe(this.lifetimeManager,(function(n){y.enabled(!n)}));this.dirty=r(!1);u(c)?(v=this.defaultValue(),this.value=r(v),this.initialValue(v),this.enableValidation(!0)):l?this._setEditScopeAccessors(c._createEditScopeAccessorFromPath(l),c):a?this._setEditScopeAccessors(a,c):this.value=r(this.defaultValue());this.createValueSubscriptions();this._msPortalFxClearValidation=r();this._msPortalFxTriggerValidation=r();this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(n){if(u(this._editScopeAccessors))if(n.createdByBaseFormClass)this._editScopeAccessors=n,this._initializeFieldStateObservables();else{o.Log.writeEntry(s,"MsPortalFx.ViewModels.Forms.Field.EditScopeAccessorsNotCreatedByFormFactory",
"Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");throw new Error("Field._setEditScopeAccessors only accepts EditScopeAccessors created by the Form.createEditScopeAccessors factory method.");}else{o.Log.writeEntry(s,"MsPortalFx.ViewModels.Forms.Field.SetEditScopeAccessorsCanOnlyBeCalledOnce","Field._setEditScopeAccessors can only be called once.");throw new Error("Field._setEditScopeAccessors can only be called once.");}},i.prototype.clearValidation=function(){var n=this;return l((function(){var t=n._msPortalFxClearValidation();return c(n.lifetimeManager,t||Q())}))},i.prototype.triggerValidation=function(){var t=this;return l((function(){var i=t._msPortalFxTriggerValidation,r=i();return c(t.lifetimeManager,r?r:function(){var r=Q.defer(),u=t.lifetimeManager.createChildLifetime();return i.subscribe(u,(function(t){u.dispose();t?Q.fcall(t).then(r.resolve).catch(r.reject):r.reject(new n.Errors.Error("Invalid validating Function detected."))})
),r.promise})}))},i.prototype._initializeFieldStateObservables=function(){var n=this,t,o,s,i=this._editScopeAccessors,r=this.lifetimeManager;this.initialValue=e(r,{read:function(){t&&t.dispose();t=r.createChildLifetime();var u=i.getOriginalObservable(t);return u?u():n.defaultValue()},write:function(n){i.getOriginalObservable(t)(n)}});this.value=e(r,{read:function(){var t,f;return o&&o.dispose(),o=r.createChildLifetime(),t=i.getEditableObservable(o),n._form&&(f=n._form.editScope(),n._previousEditScope!==f&&(n.enableValidation(!1),n._previousEditScope=f)),u(t)?n.defaultValue.peek():t()},write:function(n){s&&s.dispose();s=r.createChildLifetime();var t=i.getEditableObservable(s);if(t)t(n);else if(!(v&&!n))throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.createValueSubscriptions();this._dirtyComputed=e(this.lifetimeManager,(function(){n.setDirty(!f.deepEquals(n.value(),n.initialValue()))}));this._enableValidationReactor=e(r,(function(){n._form&&n._form.editScope(
);n.enableValidation(!!(i.getOriginalObservable(t)&&i.getEditableObservable(o)))}))},i.prototype.createValueSubscriptions=function(){var t=this,i=!0,r;this._msPortalFxWidgetValue(this.value());this.value.subscribe(this.lifetimeManager,(function(n){t._msPortalFxViewModelValueChangesAreClean&&!i&&t.setDirty(!0);t._form&&t._form.viewModelValueChangesSetDefaultValues&&i&&t.initialValue(n);t._msPortalFxWidgetValue()!==n&&t._msPortalFxWidgetValue(n)}));r=this.value;a.setTimeout((function(){var i=t.value;i!==r&&t.lifetimeManager&&(n.disposeDisposable(t._newThisValueBinding),t._newThisValueBinding=i.subscribeAndRun(t.lifetimeManager,r))}));this._msPortalFxWidgetValue.subscribe(this.lifetimeManager,(function(n){i=!1;t.value()!==n?t.value(n):Array.isArray(n)&&(t.value(n),t.value.notifySubscribers(n));i=!0}))},i.prototype.setDirty=function(n){try{this.dirty(n)}catch(t){}},i})(t.LabelAndBalloon.ViewModel);i.ViewModel=y})(i=t.Input||(t.Input={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||
(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){var f=this;n.call(this,t,i,r,u);this.empty=ko.computed((function(){return!f.value()}))}return __extends(t,n),t.prototype.dispose=function(){this.empty&&this.empty.dispose();n.prototype.dispose.call(this)},t})(n.Input.ViewModel);t.ViewModel=i})(t=n.Nullable||(n.Nullable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.emptyValueText=this._options.emptyValueText||i("");this.editing=i(!1)}return __extends(t,n),t})(n.Nullable.ViewModel);t.ViewModel=r})(t=n.Editable||(n.Editable={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels=
{}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.valueUpdateTrigger=this._options.valueUpdateTrigger||n.ViewModels.Controls.ValueUpdateTrigger.Default;this.delayValidationTimeout=this._options.delayValidationTimeout||r(500)}return __extends(i,t),i})(t.Editable.ViewModel);i.ViewModel=u})(i=t.Typable||(t.Typable={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n.ViewModels.Controls.Forms.EditableCombo,r=ko.observable,u=(function(n){function t(t,i,u,f){n.call(this,t,i,u,f);this.dropDownWidth=r(1);this.popupAlignment=3;this.inputAlignment=10}return __extends(t,n),t})(t.Editable.ViewModel);i.ViewModel=u})(i=t.EditableComboBox||(t.EditableComboBox={}))}
)(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function s(t,r,f){f===void 0&&(f=".");var s,h,e;try{for(r=r.replace(/\[/g,f).replace(/\]/g,""),r=r.charAt(0)===f?r.substr(1):r,s=r.split(f),e=o(t)[s[0]],h=1;h<s.length;h++)e=o(e)[s[h]]}catch(c){i.invalidPath()}return(n.isNullOrUndefined(e)||!ko.isObservable(e))&&(u.writeEntry(2,"MsPortalFx.ViewModels.Forms.EditScopeAccessors.InvalidObservablePath","'observablePath' does not identify a non-null observable (observablePath: "+r+")."),i.observablePathInvalid()),e}var u=n.Base.Diagnostics.Log,c=ko.observableArray,o=ko.unwrap,f=ko.computed,l=window,v=l.fx.environment.isDevelopmentMode,r="",a={invalidPath:r,observablePathInvalid:r,setOnce:r,editScopeNotSet:r,obsMissing:r},i=FxImpl.getErrorMap(a),e,h;(function(n){n[n.Original=0]="Original";n[n.Editable=1]="Editable"})(t.EditScopeObservableType||(t.
EditScopeObservableType={}));e=t.EditScopeObservableType;h=(function(){function t(n,t,i){var r=this;this.sections=c();this.viewModelValueChangesSetDefaultValues=!1;t&&(this.editScope=t);this._getNestedData=i;n.registerForDispose(this);this._lifetimeManager=n.createChildLifetime();this.valid=f((function(){return!r.sections().some((function(n){return!n.valid()}))}));this._lifetimeManager.registerForDispose(this.valid);this.createFieldValueAccessor=function(n){var i,t;return typeof n=="string"?(i=n,t=function(n){return s(n,i)}):t=n,this.createCustomEditScopeAccessor(t)}}return Object.defineProperty(t.prototype,"editScope",{get:function(){return this._editScope||i.editScopeNotSet(),this._editScope},set:function(n){this._editScope&&i.setOnce();this._editScope=n},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._lifetimeManager&&(this._lifetimeManager.dispose(),this._lifetimeManager=null)},t.prototype._createEditScopeAccessorFromPath=function(n){var t=function(t){return s(t,n)}
;return this._createEditScopeAccessorFromAccessorFunction(t,!0)},t.prototype.createEditScopeAccessor=function(n){var t,i,r,u;return n.writeToEditScope?(r=n,u=this._sanitizeAccessorOptions(r),this._createEditScopeAccessorFromOptions(u)):(t=n,i=this._sanitizeAccessorFunction(t),this._createEditScopeAccessorFromAccessorFunction(i,!0))},t.prototype.createCustomEditScopeAccessor=function(n){var t,i;return n.writeToEditScope?(i=n,this._createEditScopeAccessorFromOptions(i)):(t=n,this._createEditScopeAccessorFromAccessorFunction(t,!1))},t.prototype._sanitizeAccessorFunction=function(n){return this._sanitizeAccessorLambda(n)},t.prototype._sanitizeAccessorOptions=function(n){return{readFromEditScope:this._sanitizeAccessorLambda(n.readFromEditScope),writeToEditScope:this._sanitizeAccessorLambda(n.writeToEditScope)}},t.prototype._sanitizeAccessorLambda=function(n){return n},t._logEditScopeAccessorError=function(n){u.writeEntry(2,"EditScopeAccessor",n)},t.prototype._createEditScopeAccessorFromAccessorFunction=
function(n,t){var r=this;return{getOriginalObservable:function(t){var f=r.editScope(),o,s,h;return f&&(s=f.getOriginal(f.root),h=r._getNestedData?r._getNestedData(s):s,o=n(h,t,e.Original),o||(u.writeEntry(2,_formsArea.format(_original),_obsMissingMessage.format(_original)),i.obsMissing(_original))),o},getEditableObservable:function(t){var s=r.editScope(),f,o,h;return s&&(o=s.root,h=r._getNestedData?r._getNestedData(o):o,f=n(h,t,e.Editable),f||(u.writeEntry(2,_formsArea.format(_editable),_obsMissingMessage.format(_editable)),i.obsMissing(_editable))),f},createdByBaseFormClass:!0,returnsObservablesFromEditScope:t}},t.prototype._createEditScopeAccessorFromOptions=function(n){var t=this;return{getOriginalObservable:function(i){if(!t.editScope())return null;var r=f((function(){return n.readFromEditScope(t.editScope().getOriginal(t.editScope().root))}));return i.registerForDispose(r),r},getEditableObservable:function(i){if(!t.editScope())return null;var r=f({read:function(){return n.readFromEditScope(
t.editScope().root)},write:function(i){n.writeToEditScope(t.editScope().root,i)}});return i.registerForDispose(r),r},createdByBaseFormClass:!0,returnsObservablesFromEditScope:!1}},__decorate([n.Composition.ProxyCompatibilityMode],t)})();t.ViewModel=h})(i=t.Form||(t.Form={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.observableArray,f=(function(n){function t(t,i,f,e){n.call(this,t,i,f,e);this.groups=this._options.groups||u();this.groups().length===0||this.groups()[0].options().length===0||r.isNullOrUndefined(this.defaultValue())&&this.defaultValue(this.groups()[0].options()[0].value)}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=f})(i=t.Groups||(t.Groups={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(
n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observableArray,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.options=this._options.options||i()}return __extends(t,n),t})(n.Input.ViewModel);t.ViewModel=r})(t=n.Options||(n.Options={}))})(t=n.Base||(n.Base={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n,r=ko.observable,f=(function(n){function t(t,i,f,e){var o=e||{};u.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(o=i);n.call(this,t,i,f,e);this.min=o.min||r(0);this.max=o.max||r(10);this.step=o.step||r(1);this.showStepMarkers=o.showStepMarkers||r(!0)}return __extends(t,n),t})(t.Input.ViewModel);i.ViewModel=f})(i=t.Slider||(t.Slider={}))})(i=t.Base||(t.Base={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var
i;(function(t){var i;(function(i){"use strict";var f=ko.observableArray,r=n.initObservable,e=(function(){function n(n,t,i,u){this.text=r(n);this.value=r(t);this.selected=r(i,!1);this.disabled=r(u,!1)}return n})(),u;i.ItemValue=e;u=(function(n){function t(){n.apply(this,arguments);this.label=null;this.values=f()}return __extends(t,n),t})(t.ValidatableControl.ViewModel);i.ViewModel=u})(i=t.ItemList||(t.ItemList={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f=ko.pureComputed,o=f((function(){return!0})),r,e,u;(function(n){n[n.None=0]="None";n[n.Pending=1]="Pending";n[n.Success=2]="Success";n[n.Failure=3]="Failure"})(t.Status||(t.Status={}));r=t.Status;e=(function(n){function t(t,u,f,e){n.call(this,t);this.text=i(u||"");this.visible=i(!0);this.afterExecute=null;this.status=i(r.None);this.error=i(null);this.handler=i(null);this.attach(f,e)}
return __extends(t,n),t.prototype.execute=function(){var o=this,u=!1,n,f=this.error,t=this.status,i,e;try{if(f(null),t(r.Pending),i=this.handler(),!i)throw new Error("Command does not have handler.");e=i.execute();n=Q(e).then((function(){u=!0}))}catch(s){n=Q.reject(s)}return n.finally((function(n){u?t(r.Success):(f(n),t(r.Failure));var i=o.afterExecute;i&&i()}))},t.prototype.attach=function(n,t){if(n){var i=new u(n,t);this.attachHandler(i)}},t.prototype.attachHandler=function(n){this.handler(n)},t.prototype.detach=function(){this.handler(null)},t})(n.Loadable.ViewModel);t.ViewModel=e;u=(function(){function n(n,t,i){this.execute=i?n.bind(i):n;this.canExecute=t?f(t,i):o}return n})();t.DelegatingHandler=u})(t=n.Command||(n.Command={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n.ViewModels,e=f.Controls,o=ko.observable,c=ko.observableArray,r=ko.computed,
s=n.isNullOrWhiteSpace,l=n.Resources.Strings,u=l.DeleteAssetConfirmation,a=n.disposeDisposable,v=(function(t){function i(i,f){var v=this,p,l,y;if(t.call(this,i),this.selectedItems=c(),this._gridItems=null,this._options=null,this._assetName=o(),this._assetTypeDisplayName=o(),this.affectedItemsLabel=o(u.affectedItemsLabel),this.controlType=76,this._options=f,p=this.lifetimeManager,this._assetTypeDisplayName(f.assetTypeDisplayName),l=f.grid,l){var w=l.selectableRowExtensionOptions,b=w?e.Lists.Grid.Extensions.SelectableRow:null,a=this.grid=new e.Lists.Grid.ViewModel(p,l.items,b,w);a.columns=l.columns;a.noRowsMessage=l.noRowsMessage;a.showHeader=n.isNullOrUndefined(l.showHeader)?!0:l.showHeader;w&&(this.selectedItems=a.selectableData.selectedItems);this._gridItems=a.items}y=this._assetName;this._addDisposablesToCleanUp([this.grid,this.confirmationEditor=new h(p,y),this.warning=r((function(){return v._onUpdateWarningText(y())})),this.confirmationLabel=r((function(){return v._onUpdateConfirmationLabel(
v._assetTypeDisplayName())})),this.valid=r((function(){var n=y(),t=v.confirmationEditor.textBox.valid();return s(n)?!1:t})),])}return __extends(i,t),i.prototype._onUpdateWarningText=function(n){return u.warningText.format(n)},i.prototype._onUpdateConfirmationLabel=function(n){return u.confirmationLabel.format(n)},i.prototype._selectAll=function(){var n=this.grid&&this.grid.selectableData;n&&n.selectableItems().forEach((function(n){return n.isSelected(!0)}))},i})(t.Loadable.ViewModel),h;i.ViewModel=v;h=(function(){function n(n,t){var i=this.textBox=new f.Forms.TextBox.ViewModel(n);i.disabled(!0);i.valueUpdateTrigger=e.ValueUpdateTrigger.Input;this._disposables=[i,r((function(){var n=t();s(n)?(i.disabled(!0),i.validations([])):(i.disabled(!1),i.validations([new f.EqualsValidation(n,u.assetNameValidationFailureMessage.format(n))]),i.value(""))})),]}return n.prototype.dispose=function(){a(this._disposables)},n})()})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(i=t.Controls||(t.Controls=
{}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.galleryItem=i();this.bladeSelection=i();this.bannerClicked=i();this.createClicked=i();this.controlType=77;this.cloudName=FxImpl.Extension.selfCloudName}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.HeroBanner||(n.HeroBanner={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t){n.call(this,t);this.disabled=ko.observable(!1);this.controlType=84}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.BaseViewModel=i})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;
(function(i){var r;(function(i){"use strict";var r=n.ViewModels.Controls.HotSpot.BaseViewModel,u=(function(n){function i(i){n.call(this,i);this.selectable=t.Part.createSelectableViewModel();this.clickableDuringCustomize=!1}return __extends(i,n),i})(r);i.ViewModel=u})(r=i.HotSpot||(i.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r){n.call(this,t);this.controlType=88;this.clickableLink=r?r.clickableLink:i()}return __extends(t,n),t})(n.ViewModels.Controls.HotSpot.BaseViewModel);t.LinkViewModel=r})(i=t.HotSpot||(t.HotSpot={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Small=0]="Small";n[n.Normal=1]="Normal"})(t.Size||(t.Size=
{}));r=t.Size;u=(function(n){function t(t,u){n.call(this,t,!1);this.image=u?u.image:i();this.text=u?u.text:i();this.size=u&&u.size?u.size:i(r.Normal)}return __extends(t,n),t})(n.Loadable.ViewModel);t.BaseViewModel=u})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t){var i=this;t===void 0&&(t={});n.call(this,t);this.isClickable&&this.isClickable.dispose();this.isClickable=ko.pureComputed((function(){return i.isSelected()&&!!i.selectedValue()}))}return __extends(t,n),t})(n.ViewModels.Selectable),r=(function(n){function t(t,r,u,f){n.call(this,t,f);this.controlType=78;this.selectable=new i({isSelected:r&&r.isSelected})}return __extends(t,n),t})(t.BaseViewModel);t.ViewModel=r})(i=t.InfoBox||(t.InfoBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(
n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r){n.call(this,i,r);this.controlType=87;this.clickableLink=r?r.clickableLink:t()}return __extends(i,n),i})(n.BaseViewModel);n.LinkViewModel=i})(t=n.InfoBox||(n.InfoBox={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Default=0]="Default";n[n.ComingSoon=1]="ComingSoon";n[n.NoSubscription=2]="NoSubscription";n[n.Unauthorized=3]="Unauthorized"})(t.ImageType||(t.ImageType={}));r=t.ImageType;u=(function(n){function t(t){n.call(this,t);this.header=i("");this.title=i("");this.description=i("");this.callToActionText=i("");this.callToActionUri=i("");this.callToSecondaryActionText=i("");this.callToSecondaryActionUri=i("");this.imageType=i(r.Default);this.controlType=79}return __extends(t,n),t})(n.Loadable.
ViewModel);t.ViewModel=u})(t=n.Notice||(n.Notice={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var v=n.Base,r=ko.observable,c=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Controls/ViewModels.Wizard"),l=ko.observableArray,a,e,u,f,o,s,h;(function(n){n[n.Sequential=0]="Sequential";n[n.NonSequential=1]="NonSequential"})(i.WizardMode||(i.WizardMode={}));e=i.WizardMode,(function(n){n[n.Form=0]="Form";n[n.Selector=1]="Selector"})(i.StepType||(i.StepType={}));u=i.StepType;f=(function(){function t(t,i,f,e,o){this.description=r("");this.iconUri=r();this.status=r();this.stepId=t;this.stepType=n.isNullOrUndefined(i)?u.Form:i;this.title=r(f);this.formBlade=e;this.extension=o}return t})();i.WizardStepBase=f;o=(function(t){function i(i,u){var f,o;i&&i.createChildLifetime||(a&&(f=new n.Errors.Error("MsPortalFx.ViewModels.Controls.Wizard.ViewModel's constructor first argument must be lifetimeManager."),
c.error(f)),i=undefined,u=arguments[0]);t.call(this,i);this.controlType=107;this.mode=e.Sequential;this.steps=l();this.selection=r();o=this.savedState=r();this.currentState=r();this.stepOutput=r();this.beginExecuteCommand=r();this._autoOpenFirstStep=!1;u&&u.currentState!==undefined?o(u.currentState):this._autoOpenFirstStep=!0}return __extends(i,t),i.prototype.initialize=function(){this._autoOpenFirstStep&&(this.savedState({stepStatuses:[]}),this._autoOpenFirstStep=!1)},i})(t.Loadable.ViewModel);i.ViewModel=o;s=(function(n){function t(t,i,r,f,e,o){n.call(this,t,u.Form,i,r,o);this.status(f);this.isOptional=!!e}return __extends(t,n),t})(f);i.WizardStep=s;h=(function(n){function t(t,i,f,e){n.call(this,t,u.Selector,i,f,e);this.value=r();this.defaultValue=r();this.displayText=r("");this.locked=r(!1);this.infoBalloonText=r("");this.lockedBalloonText=r("")}return __extends(t,n),t})(f);i.SelectorStep=h})(i=t.Wizard||(t.Wizard={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})
(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f,e,r,u,o;(function(n){n[n.Top=0]="Top";n[n.Right=1]="Right";n[n.Bottom=2]="Bottom";n[n.Left=3]="Left"})(t.Position||(t.Position={}));f=t.Position;e=(function(){function n(n,t){this.linkText=n||"";this.linkUri=t||""}return n})();t.Link=e;r=(function(){function n(n,t){this.preferred=n||0;this.alternate=t||0}return n})();t.Offset=r;u=(function(){function n(n,t,i,r){this.top=n||0;this.left=t||0;this.width=i||0;this.height=r||0}return n})();t.Box=u;o=(function(n){function t(t){n.call(this,t);this.visible=i(!1);this.box=i(new u);this.content=i("");this.link=i();this.position=i(f.Top);this.horizontalOffset=new r;this.verticalOffset=new r;this.appendTo="body";this.closeOtherBalloons=!1}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=o})(t=n.Balloon||(n.Balloon={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,f,u;(function(n){n[n.Normal=0]="Normal";n[n.Emphasized=1]="Emphasized";n[n.Strong=2]="Strong"})(i.Emphasis||(i.Emphasis={}));f=i.Emphasis;u=(function(t){function i(i){t.call(this,i);this.max=r(2e5);this.wrap=r(!0);this.click=$.noop;this.clear=new n.ViewModels.Controls.Command.ViewModel(i,"");this.scrollbars=!0;this.write=r().extend({notify:"always"});this.writeLine=r().extend({notify:"always"});this.writeText=r().extend({notify:"always"});this.writeTextLine=r().extend({notify:"always"});this.writeTextArray=r().extend({notify:"always"})}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.TextStream||(t.TextStream={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;(function(n){n[n.Text=0]="Text";
n[n.Information=1]="Information";n[n.Success=2]="Success";n[n.Warning=3]="Warning";n[n.Error=4]="Error"})(t.LogItemType||(t.LogItemType={}));f=t.LogItemType;r=(function(n){function t(t){n.call(this,t);this.controlType=58;this.paused=i(!1);this.filters=u();var r=this.log=i(),f=this.logItem=i(),e=this.logItems=i();r.extend({notify:"always"});f.extend({notify:"always"});e.extend({notify:"always"})}return __extends(t,n),t})(n.TextStream.ViewModel);t.ViewModel=r})(t=n.LogStream||(n.LogStream={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(t){function i(i){var f=this;t.call(this,i);this.controlType=75;this.isReady=r(!1);this.prompt=r("> ");this.clear=new n.ViewModels.Controls.Command.ViewModel(i);this.command=r("");this.text=r("");this.info=r("");this.success=r("");this.warning=r("");this.error=r("");this.command.extend({notify:
"always"});this.text.extend({notify:"always"});this.info.extend({notify:"always"});this.success.extend({notify:"always"});this.warning.extend({notify:"always"});this.error.extend({notify:"always"});var u=i.createChildLifetime(),e=[];["command","text","info","success","warning","error"].forEach((function(n){f[n].subscribe(u,(function(t){e.push({type:n,data:t})}))}));this.isReady.subscribe(u,(function(){u.dispose();e.forEach((function(n){f[n.type](n.data)}))}))}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=u})(i=t.Console||(t.Console={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var u=n,r=ko.observable,e,o,f;(function(n){n[n.TextBackground=1]="TextBackground";n[n.Text=2]="Text";n[n.Debug=3]="Debug";n[n.Informational=4]="Informational";n[n.Warning=5]="Warning";n[n.Error=6]="Error";n[n.Black=101]="Black";n[n.DarkBlue=102]="DarkBlue";
n[n.Blue=103]="Blue";n[n.Green=104]="Green";n[n.Cyan=105]="Cyan";n[n.DarkGreen=106]="DarkGreen";n[n.DarkCyan=107]="DarkCyan";n[n.Gray=108]="Gray";n[n.DarkRed=109]="DarkRed";n[n.DarkMagenta=110]="DarkMagenta";n[n.DarkYellow=111]="DarkYellow";n[n.DarkGray=112]="DarkGray";n[n.Red=113]="Red";n[n.Magenta=114]="Magenta";n[n.Yellow=115]="Yellow";n[n.White=116]="White";n[n.LightSteelBlue=201]="LightSteelBlue";n[n.LightCyan=202]="LightCyan";n[n.Violet=203]="Violet";n[n.Moccasin=204]="Moccasin";n[n.PaleGreen=205]="PaleGreen";n[n.Bisque=206]="Bisque";n[n.LightGray=207]="LightGray";n[n.PaleVioletRed=208]="PaleVioletRed";n[n.DarkSeaGreen=209]="DarkSeaGreen";n[n.OrangeRed=210]="OrangeRed";n[n.DarkOrange=211]="DarkOrange";n[n.WhiteSmoke=212]="WhiteSmoke";n[n.PowerShellBackground=213]="PowerShellBackground"})(i.Color||(i.Color={}));e=i.Color,(function(n){n[n.Enter=1]="Enter";n[n.Tab=2]="Tab";n[n.ShiftTab=3]="ShiftTab";n[n.Cancel=4]="Cancel"})(i.CommandMode||(i.CommandMode={}));o=i.CommandMode;f=(function(
n){function t(t,i){n.call(this,t);this.controlType=90;u.isNullOrUndefined(i)&&(i={});this.command=i.command||r();this.write=i.write||r(null);this.progress=i.progress||r(null);this.prompt=i.prompt||r({text:"> "});this.input=i.input||r({text:"",position:0});this.maxLines=i.maxLines||r(200);this.colorPalette=i.colorPalette;this.clear=i.clear||new u.ViewModels.Controls.Command.ViewModel(t)}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=f})(r=i.ConsoleV2||(i.ConsoleV2={}))})(i=t.Unsupported||(t.Unsupported={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Auto=1]="Auto";n[n.Yes=2]="Yes";n[n.No=3]="No"})(t.Scroll||(t.Scroll={}));r=t.Scroll;u=(function(n){function t(t,u){n.call(this,t);this.controlType=108;this.src=u.src;this.scrolling=u.scrolling||r.Auto;this.postMessage=u.postMessage||i("Initialized");
this.receiveMessage=u.receiveMessage||i()}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=u})(i=t.IFrame||(t.IFrame={}))})(t=n.Internal||(n.Internal={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r){n.call(this,t);this.controlIsReady=i(!1);this.controlType=113;this.src=r.src;this.postMessage=r.postMessage||i();this.receiveMessage=r.receiveMessage||i()}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=r})(i=t.IFrameV2||(t.IFrameV2={}))})(t=n.Internal||(n.Internal={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var s=n.ViewModels,u=s.Controls.Command.ViewModel,r=ko.observable,h=ko.observableArray,f,c,e,o;(function(n){n[
n.NotLoading=0]="NotLoading";n[n.Loading=1]="Loading";n[n.Failed=2]="Failed"})(i.QueryLoadingStatus||(i.QueryLoadingStatus={}));f=i.QueryLoadingStatus,(function(n){n[n.Operator=0]="Operator";n[n.Operand=1]="Operand"})(i.CallbackMethodType||(i.CallbackMethodType={}));c=i.CallbackMethodType;e=(function(){function n(){}return Object.defineProperty(n,"Group",{get:function(){return"group"},enumerable:!0,configurable:!0}),Object.defineProperty(n,"Predicate",{get:function(){return"predicate"},enumerable:!0,configurable:!0}),n})();i.QueryExpressionType=e;o=(function(n){function t(t,i){t&&t.createChildLifetime||(t=undefined,i=arguments[0]);n.call(this,t);this.controlType=31;this.schema=r(i);this.title=r("");this.query=r(null);this.queryViewModel=r();this.savedQuery=r(null);this.callback=null;this.showHeader=r(!0);this.showFooter=r(!0);this.add=new u(t);this.insert=new u(t);this.remove=new u(t);this.group=new u(t);this.ungroup=new u(t);this.save=new u(t);this.queryLoading=r({status:f.NotLoading});this.
_msPortalFxOperandControls=h()}return __extends(t,n),t})(t.Loadable.ViewModel);i.ViewModel=o})(r=i.QueryBuilder||(i.QueryBuilder={}))})(i=t.Data||(t.Data={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u,f;(function(n){n[n.Info=0]="Info";n[n.Validation=2]="Validation"})(i.Type||(i.Type={}));u=i.Type;f=(function(t){function i(i){t.call(this,i);this.type=u.Info;this.position=r(n.ViewModels.Controls.Balloon.Position.Top);this.content=r("");this.link=r();this.balloonVisible=r(!1);this.stopClickPropagation=r(!0);this.controlType=32}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=f})(i=t.DockedBalloon||(t.DockedBalloon={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(
n){u.push(n)}function s(){return u}var i=n.ViewModels.Controls.Command.Status,r=ko.observable,e,f,u;(function(n){n[n.None=0]="None"})(t.Extensions||(t.Extensions={}));e=t.Extensions;f=(function(){function t(n){this.handler=r(n);this.status=r(i.None);this.error=r(null);this.errorMessage=r(null)}return t.prototype.execute=function(t){var r=n.Helpers.Deferred(),s=this.handler(),e=this.status,o=this.error,u=this.errorMessage,f;return e(i.Pending),o(null),u(null),s?s(t).then((function(n){e(i.Success);r.resolve(n)}),(function(n){e(i.Failure);o(n);n&&(n.message?u(n.message):n.toString&&u(n.toString()));r.reject(n)})):(f=new Error("Command is not available for execution."),r.reject(f),o(f),u(f.message)),r.promise()},t})();t.ExtensionCommand=f;u=[];t.registerExtensionSetup=o;t.getExtensionSetups=s})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(
t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.Documents.Editor.ExtensionCommand,i=ko.observable,f=ko.observableArray,e=(function(){function n(n,t,u){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.parentId=i(-1);this.threadId=i(-1);this.author=i(u);this.content=i(t||"");this.canDelete=i(!1);this.isEditable=i(!1);this.save=new r}return n})(),u;t.DiscussionCommentViewModel=e;u=(function(){function n(n,t){this.id=i(n||-1);this.lastUpdatedDate=i(null);this.publishedDate=i(null);this.comments=f(t);this.save=new r;this.addComment=new r;this.deleteComment=new r}return n})();t.DiscussionThreadViewModel=u})(i=t.DiscussionThread||(t.DiscussionThread={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.Helpers,s=ko.observable,o=r.resolve(),u,f,
e;(function(n){n[n.Discussion=1]="Discussion"})(i.Extensions||(i.Extensions={}));u=i.Extensions;f=(function(n){function t(t,i,r){n.call(this,t,i);this.position=s(r)}return __extends(t,n),t})(n.ViewModels.Controls.Documents.DiscussionThread.DiscussionThreadViewModel);i.EditorThreadViewModel=f;e=(function(){function i(n){var t=this;this._lifetimeManager=new FxImpl.TriggerableLifetimeManager;this.options=n;this._attachAddThreadHandler();n.threads.subscribeArrayAdds(this._lifetimeManager,(function(n){t._addThreadHandlers(n)}));n.threads().forEach((function(n){t._addThreadHandlers(n)}))}return i.prototype.dispose=function(){this.options=null;this._lifetimeManager.dispose()},i.prototype._attachAddThreadHandler=function(){var i=this.options,r;i.addThread||(i.addThread=new n.ViewModels.Controls.Documents.Editor.ExtensionCommand);r=function(n){var r,u;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.author()),r.canDelete(!0),r.isEditable(!0),u=new f(-(new Date).getTime(),[r],n),i.threads.
push(u),o};i.addThread.handler(r)},i.prototype._addThreadHandlers=function(n){var t=this;this._attachSaveThreadHandler(n);this._attachAddCommentHandler(n);this._attachDeleteCommentHandler(n);n.comments().forEach((function(n){t._attachSaveCommentHandler(n)}))},i.prototype._attachSaveThreadHandler=function(n){var t=this,i=function(i){var u=t.options,f;return u.saveThread&&(f=u.saveThread(i,n,u.containerName),f)?f:r.reject("No save handler found.")};n.save.handler(i)},i.prototype._attachAddCommentHandler=function(n){var i=this,r=function(){var r;return r=new t.DiscussionThread.DiscussionCommentViewModel(-1,"",i.options.author()),r.canDelete(!0),r.isEditable(!0),r.threadId(n.id()),i._attachSaveCommentHandler(r),n.comments.push(r),o};n.addComment.handler(r)},i.prototype._attachDeleteCommentHandler=function(n){var t=this,i=function(i){var u,f=n.comments().first((function(n){return n.id()===i})),e=t.options;return f&&e.deleteComment&&(u=e.deleteComment(n.id(),i),u)?u.then((function(){n.comments.remove(
f)})):r.reject("No save handler found.")};n.deleteComment.handler(i)},i.prototype._attachSaveCommentHandler=function(n){var t=this,i=function(i){var f=t.options,u;return f.saveComment&&(u=f.saveComment(i,n),u)?u:r.reject("No save handler found.")};n.save.handler(i)},i})();i.DiscussionCommandHandler=e;i.registerExtensionSetup((function(n,t){var i;return(n&u.Discussion)!==u.None&&!!t.discussion?(i=new e(t.discussion),[i]):null}))})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,f="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAH5SURBVDhPpVJNaxNRFD3vzbyZaRqbtIGEkBYXVpeK0m6sdCWIv0JEUBctBcGFf0Nw41bBbYu4Utx0U1ChihWFQgraNqTVmKT5mpnM8943MxHswq8zDO/j3nvuufddsfS0pvEfkMn6zzhGoElPGGn0gggdP/55Hww12Y6LFbfXatomGjYGQ6AfRjiZVzhXdlHK2hgj4347wPsDHx/rPpQl4FoUKERMcGt1TytLYhBqTE/YuDGXR4VWxrfuEJ4SyKhY6Fc6P3z1HdVGACchMRaf5M3kbdxZmBwFMx69bWF9p5ucgELGwsrFSZyaUhQT3xmCfqBxcy6HLGsjpLXapNKSsdQouWM11y/kjGL2M+nYpZRVvEWrP8T9jQYOSS437tOhj9UPbcxPe7h2Pm98itSbhDcm0EJjvxWiTPJPeBJ3LxXgUPoHRDRbcHDl9DiRRSaAUWuHSE+mBEXNeFntmAtBn0vBnMDIpI/3DjU6xZN3LTgkYdREz5F4sd3F6y8945Di8mwGZ4uu2XcGEd7s9rD8rIat+sC8DsM8o20KEri3OIVKTuH59hG61FiPZmBA0g86ET43fexSmRZl5VlIYQi40xOuxNUzWTzebKJH0lMfXqSU4FHggUsHKMVokPiReITZHCv6M/zsDL8pxf1NMEMm82Gk/Srv9wB+ALD6wSjYZ9JHAAAAAElFTkSuQmCC",
e,u;(function(n){n[n.None=0]="None";n[n.Add=1]="Add";n[n.Delete=2]="Delete";n[n.Edit=3]="Edit"})(t.DiffBlockChangeType||(t.DiffBlockChangeType={}));e=t.DiffBlockChangeType;u=(function(t){function u(i,f,e){i&&i.createChildLifetime||(i=undefined,f=arguments[0],e=arguments[1]);t.call(this,i);this.controlType=35;this.blocks=r(f);this.discussionOptions=e?e:u.getDefaultDiscussionOptions();this.lifetimeManager.registerForDispose(new n.ViewModels.Controls.Documents.Editor.DiscussionCommandHandler(this.discussionOptions))}return __extends(u,t),u.getDefaultDiscussionOptions=function(){var n=i({id:i("0"),displayName:i("me"),image:i("")});return{enabled:i(!0),addIcon:i(f),addIconOnLeft:i(!0),threads:r(),author:n}},u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.DiffView||(t.DiffView={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(
t){var i;(function(t){"use strict";var c=n.ViewModels,r=c.Controls,f=n.Helpers,e=r.Documents.DiffView,o=r.Documents.Editor,i=ko.observable,u=ko.observableArray,l=15,s,h;(function(n){n[n.Name=0]="Name";n[n.Path=1]="Path";n[n.Type=2]="Type"})(t.DiffListGroupBy||(t.DiffListGroupBy={}));s=t.DiffListGroupBy;h=(function(n){function t(t,r,f,o,h,c){t&&t.createChildLifetime||(t=undefined,r=arguments[0],f=arguments[1],o=arguments[2],h=arguments[3],c=arguments[4]);n.call(this,t);this.controlType=34;r=r||[];this.items=u(r);this.fetchDiff=f;this.groupBy=i(o||s.Name);this.expandLimit=i(h||l);this.expandAll=i(r.length<=this.expandLimit());this.filterPath=i("");this.diffViewModels=u();this.discussionOptions=c?c:e.ViewModel.getDefaultDiscussionOptions();this._ensureFetchCommand();this._ensureItemClickCommand()}return __extends(t,n),t.prototype._ensureFetchCommand=function(){var n=this,i=function(t){var i;return n.fetchDiff&&(i=n.fetchDiff(t.name(),t.path()),i)?i.then((function(i){return i.blocks?(n.diffViewModels.
push(n._createDiffViewModel(n.lifetimeManager,t.path()+t.name(),i.blocks,i.threads)),null):i})):f.reject("No fetch handler found.")},t=function(n){n.fetch||(n.fetch=new o.ExtensionCommand(i))};this.items().forEach((function(n){t(n)}));this.items.subscribeArrayAdds(this.lifetimeManager,(function(n){t(n)}))},t.prototype._ensureItemClickCommand=function(){var n=this,t=function(t){return n.itemClick&&n.itemClick(t.name(),t.path()),f.resolve()};this.click=new o.ExtensionCommand(t)},t.prototype._createDiffViewModel=function(n,t,i,r){var f=this.discussionOptions,o={containerName:t,author:f.author,addIcon:f.addIcon,enabled:f.enabled,addIconOnLeft:f.addIconOnLeft,saveThread:f.saveThread,saveComment:f.saveComment,deleteComment:f.deleteComment,threads:u(r||[])};return new e.ViewModel(n,i,o)},t})(r.Loadable.ViewModel);t.ViewModel=h})(i=t.DiffList||(t.DiffList={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(
n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,e=n.ViewModels.Controls.Documents,u=(function(n){function t(t,i,u,f,e,o){n.call(this,t,i,u);this.itemName=r(f||null);this.itemPath=r(e||null);this.isSystemMessage=r(o===!0)}return __extends(t,n),t})(e.Editor.EditorThreadViewModel),f;i.TimelineThreadViewModel=u;f=(function(i){function f(t,u,f,e,o){t&&t.createChildLifetime||(t=undefined,u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3]);i.call(this,t);this.controlType=36;this.discussionOptions=u;this.sortChronologically=r(f!==!1);this.showSystemMessages=r(e!==!1);this.groupFormat=r(o||"M");this.lifetimeManager.registerForDispose(new n.ViewModels.Controls.Documents.Editor.DiscussionCommandHandler(this.discussionOptions));this._ensureItemClickCommand()}return __extends(f,i),f.prototype.addNewThread=function(){var r=this.discussionOptions.threads().first((function(n){return n.id()<0})),n,i;r||(n=new t.DiscussionThread.DiscussionCommentViewModel(
-1,"",this.discussionOptions.author()),n.canDelete(!0),n.isEditable(!0),i=new u(-(new Date).getTime(),[n]),this.discussionOptions.threads.push(i))},f.prototype._ensureItemClickCommand=function(){var i=this,r=function(t){return i.itemClick&&i.itemClick(t.itemPath(),t.position()),n.Helpers.resolve()};this.click=new t.Editor.ExtensionCommand(r)},f})(n.ViewModels.Controls.Loadable.ViewModel);i.ViewModel=f})(i=t.DiscussionTimeline||(t.DiscussionTimeline={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.Command.ViewModel,i=ko.observable,f=ko.observableArray,e,o,u;(function(n){n[n.Text=0]="Text";n[n.Custom=1]="Custom";n[n.Bat=2]="Bat";n[n.C=3]="C";n[n.CoffeeScript=4]="CoffeeScript";n[n.Cpp=5]="Cpp";n[n.CSharp=6]="CSharp";n[n.CSHtml=7]="CSHtml";n[n.Css=8]="Css";n[n.Dockerfile=9]=
"Dockerfile";n[n.FSharp=10]="FSharp";n[n.Go=11]="Go";n[n.Handlebars=12]="Handlebars";n[n.Html=13]="Html";n[n.Ini=14]="Ini";n[n.Jade=15]="Jade";n[n.Java=16]="Java";n[n.JavaScript=17]="JavaScript";n[n.JSHtm=18]="JSHtm";n[n.Json=19]="Json";n[n.Less=20]="Less";n[n.Lua=21]="Lua";n[n.MarkDown=22]="MarkDown";n[n.ObjectiveC=23]="ObjectiveC";n[n.Php=24]="Php";n[n.PowerShell=25]="PowerShell";n[n.Python=26]="Python";n[n.R=27]="R";n[n.Ruby=28]="Ruby";n[n.Sql=29]="Sql";n[n.Swift=30]="Swift";n[n.TypeScript=31]="TypeScript";n[n.VisualBasic=32]="VisualBasic";n[n.Xaml=33]="Xaml";n[n.Xml=34]="Xml"})(t.ContentType||(t.ContentType={}));e=t.ContentType,(function(n){n[n.Ignore=0]="Ignore";n[n.Info=1]="Info";n[n.Warning=2]="Warning";n[n.Error=3]="Error"})(t.MarkerSeverity||(t.MarkerSeverity={}));o=t.MarkerSeverity;u=(function(n){function u(u,e,o,s,h,c,l,a){s===void 0&&(s={});h===void 0&&(h=null);c===void 0&&(c=t.Extensions.None);l===void 0&&(l=null);a===void 0&&(a=null);u&&u.createChildLifetime||(u=undefined,e=
arguments[0],o=arguments[1],s=arguments[2],h=arguments[3],c=arguments[4],l=arguments[5],a=arguments[6]);n.call(this,u);this.controlType=37;this.contentType=i(e);this.customContentType=i(h);this.content=i(o);this.contentUri=i();this.selectedContent=i("");this.selectedRange=i({startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1});this.markers=f();this.position=i({lineNumber:1,column:1});this.options=i(s);this.dirty=i(!1);this.visible=i(!0);this.save=new r(u,"");this.refresh=new r(u,"");this.autoSaveTimeout=i(0);this.extensions=c;this.extensionOptions=l;this.configuration=a;this.content.extend({notify:"always"});this._setupExtensions()}return __extends(u,n),u.prototype._setupExtensions=function(){for(var i,f=t.getExtensionSetups(),r,n=0,u=f.length;n<u;n++)i=f[n],i&&(r=i(this.extensions,this.extensionOptions),r&&this._addDisposablesToCleanUp(r))},u})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.Editor||(t.Editor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||
(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=(function(n){function i(i,u,f,e,o,s,h){o===void 0&&(o={});s===void 0&&(s=t.Editor.Extensions.None);h===void 0&&(h=null);i&&i.createChildLifetime?n.call(this,i,u,e,o,null,s,h):(i=undefined,u=arguments[0],f=arguments[1],e=arguments[2],o=arguments[3],s=arguments[4],h=arguments[5],o===void 0&&(o={}),s===void 0&&(s=t.Editor.Extensions.None),h===void 0&&(h=null),n.call(this,u,e,o,null,s,h));this.controlType=33;this.originalContent=r(f);this.originalContent.extend({notify:"always"})}return __extends(i,n),i})(n.ViewModels.Controls.Documents.Editor.ViewModel);i.ViewModel=u})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Documents||(t.Documents={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var
i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.submit=!1;this.selector=i();this.click=$.noop;this.uri=i();this.text=i();this.visible=i(!0);this.isDefault=i(!1);this.controlType=38}return __extends(t,n),t})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=r})(i=t.Button||(t.Button={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=n.ViewModels.Forms.Base.LabelAndBalloon,u=(function(n){function t(t,r){n.call(this,t,r);this.value=i();this.controlType=40}return __extends(t,n),t})(r.ViewModel);t.ViewModel=u})(i=t.CopyableLabel||(t.CopyableLabel={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t)
{var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.formatString=i("D");this.controlType=41;this.value(null)}return __extends(t,n),t})(n.ViewModels.Controls.Forms.EditableCombo.ViewModel);t.ViewModel=r})(i=t.DateTimeCombo||(t.DateTimeCombo={}))})(i=t.Forms||(t.Forms={}))})(i=t.Controls||(t.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var r=ko.observable,i,u;(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete"})(i||(i={}));t.UploadStatus=i;u=(function(n){function t(t){n.call(this,t);this.accept="";this.maxFiles=1;this.sizeLimit=209715200;this.showProgressBars=r(!0);this.files=r([]);this.controlType=28}return __extends(t,n),t})(n.ValidatableControl.ViewModel);
t.ViewModel=u})(i=t.FileUpload||(t.FileUpload={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u=(function(n){function t(t){n.call(this,t);this.groupInfos=[];this.itemsDataArray=[];this.areItemsInitialized=i(!1);this.items=r();this.controlType=44}return __extends(t,n),t})(n.ValidatableControl.ViewModel);t.ViewModel=u})(i=t.GroupDropDown||(t.GroupDropDown={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.SpinnerSmall=0]="SpinnerSmall"})(n.Type||(n.Type={}));var t=n.Type})(t=n.ProgressOverlay||(n.ProgressOverlay={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={
}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=(function(i){function u(u,f,e){u&&u.createChildLifetime||(u=undefined,f=arguments[0],e=arguments[1]);i.call(this,u);this.controlType=51;this.label=r("");this.defaultValue=r();this.showValue=r(!0);this.displayText=r("");this.icon=r();this.locked=r(!1);this.infoBalloonText=r("");this.lockedBalloonText=r("");this.infoBalloonLink=r(new n.ViewModels.Controls.Balloon.Link);this.selectable=new t.Selectable({allowUnselect:!1,selectedValue:e!==undefined?e:null,isSelected:f&&f.selectable&&f.selectable.isSelected,isActivated:f&&f.selectable&&f.selectable.isActivated})}return __extends(u,i),u.prototype.dispose=function(){this.selectable&&this.selectable.dispose();i.prototype.dispose.call(this)},u})(n.ViewModels.Controls.ValidatableControl.ViewModel);i.ViewModel=u})(r=i.Selector||(i.Selector=
{}))})(r=i.Forms||(i.Forms={}))})(r=i.Controls||(i.Controls={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var u=ko.observable,f,i,r;(function(n){n[n.Default=0]="Default";n[n.AfterKeyDown=1]="AfterKeyDown";n[n.KeyPress=2]="KeyPress";n[n.Blur=3]="Blur";n[n.Input=4]="Input"})(t.ValueUpdateTrigger||(t.ValueUpdateTrigger={}));f=t.ValueUpdateTrigger;i=(function(){function n(){this.enterPressed=$.noop}return n})();t.Events=i;r=(function(n){function t(t){n.call(this,t);this.placeholder=u();this.events=new i;this.controlType=53;var r=this.valid;this.valid=ko.computed(t,{read:r,write:function(){}})}return __extends(t,n),t})(n.TypableControl.ViewModel);t.ViewModel=r})(i=t.TextBox||(t.TextBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(
n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.SortableColumn=1]="SortableColumn";n[n.SelectableRow=2]="SelectableRow";n[n.RightClickableRow=4]="RightClickableRow";n[n.Groupable=8]="Groupable";n[n.EditableRow=16]="EditableRow";n[n.Filterable=32]="Filterable";n[n.ReorderRow=64]="ReorderRow";n[n.ContextMenuShortcut=128]="ContextMenuShortcut";n[n.Pageable=256]="Pageable";n[n.Hierarchical=512]="Hierarchical";n[n.Scrollable=1024]="Scrollable";n[n.Hoverable=2048]="Hoverable";n[n.ResizableColumn=4096]="ResizableColumn"})(n.Extensions||(n.Extensions={}));var t=n.Extensions})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={}));GroupDropDown=MsPortalFx.ViewModels.Forms.GroupDropDown,(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.ShortTime=100]=
"ShortTime";n[n.LongTime=101]="LongTime";n[n.ShortDate=102]="ShortDate";n[n.LongDate=103]="LongDate";n[n.MonthDay=104]="MonthDay";n[n.YearMonth=105]="YearMonth";n[n.CustomDate=106]="CustomDate";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.PercentageBar=113]="PercentageBar";n[n.Number=114]="Number";n[n.HtmlBindings=1e3]="HtmlBindings"})(n.Format||(n.Format={}));t=n.Format,(function(n){n[n.Default=0]="Default";n[n.CheckBox=1]="CheckBox";n[n.TextBox=2]="TextBox";n[n.MultiselectDropDown=3]="MultiselectDropDown";n[n.CheckBoxRowSelection=4]="CheckBoxRowSelection";n[n.DropDown=5]="DropDown";n[n.GroupDropDown=6]="GroupDropDown"})(n.HtmlBindingsType||(n.HtmlBindingsType={}));i=n.HtmlBindingsType})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(
n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Bottom=0]="Bottom";n[n.Top=1]="Top"})(n.EditableRowPlacement||(n.EditableRowPlacement={}));var t=n.EditableRowPlacement})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.DateTime=1]="DateTime";n[n.SettingListGroupOrder=9999]="SettingListGroupOrder"})(n.SortFunction||(n.SortFunction={}));var t=n.SortFunction})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Sequential=0]="Sequential";n[n.Pageable=1]="Pageable"})(n.PageableType||(n.PageableType=
{}));var t=n.PageableType})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Off=0]="Off";n[n.Single=1]="Single";n[n.Multiple=2]="Multiple";n[n.MultipleToggle=3]="MultipleToggle"})(t||(t={}));n.RowSelectionMode=t,(function(n){n[n.Default=0]="Default";n[n.Checked=1]="Checked"})(i||(i={}));n.SelectionStyle=i})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Unsorted=0]="Unsorted";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(n.SortOrder||(n.SortOrder={}));var t=n.SortOrder})(t=n.Grid||(n.Grid={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||
(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function y(n,t){return s((function(){var i=t(),r=i?i():[];n.splice.apply(n,[0,n().length].concat(r))}))}function h(n,t){return t(n)}function c(n){var t=n();return t||r.blockInteractionUntilEditScopeLoads(),t}function b(n){p.Log.writeEntry(2,"Grid",n)}var p=n.Base.Diagnostics,u=ko.observable,o=ko.observableArray,s=ko.computed,l=ko.ignoreDependencies,a=n.ViewModels,i=a.Controls.Lists.Grid.Extensions,f=$.extend,v=n.disposeDisposable,e="",w={itemsSuppliedWithEditableRow:e,editScopeRoot:e,pageableEditableRowMismatch:e,pageableScrollableMismatch:e,missingValidDataNavigator:e,itemsSuppliedWithPageableExtensionWithDataNav:e,blockInteractionUntilEditScopeLoads:e,itemsSuppliedWithScrollableExtensionWithDataNav:e,sortCallbackWithDataNav:e,loadBySkipTakeMissing:e,loadByContinuationTokenMissing:e,scrollableEditableRowMismatch:
e},r=FxImpl.getErrorMap(w),k=(function(e){function p(v,p,w,b){var k=this,nt,ai,vi,yi,pi,pt,wi,kt,dt,tt,ct,wt,gt,ut,lt,ni,ti,ii,ui,fi;v&&v.createChildLifetime||(v=undefined,p=arguments[0],w=arguments[1],b=arguments[2]);e.call(this,v);v=this.lifetimeManager;this.controlType=54;this.addEmptyRow=u();this.summary=u();this.columns=o();this.resetCallback=u();this.noRowsMessage=u(n.Resources.Strings.ViewModels.Controls.noRowsMessage);this.sortByList=o();this.showHeader=!0;this._resetHandler=null;this._addCreatedLocked=!1;this._pendingResetCallbackPromise=null;this._pendingResetCallbackSubscription=null;this._msPortalFxActions={};var it=this.items=p||o(),at=this.createdItems=o(),d=b||{},g=this.extensionsOptions={},rt=[],ei=w&i.ContextMenuShortcut,et=w&i.EditableRow,oi=w&i.Filterable,si=w&i.Groupable,hi=w&i.Hierarchical,ci=w&i.Hoverable,vt=w&i.Pageable,li=w&i.ReorderRow,yt=w&i.ResizableColumn,ot=w&i.RightClickableRow,st=w&i.Scrollable,ht=w&i.SelectableRow,ri=w&i.SortableColumn;if(yt||(w|=yt=i.ResizableColumn),
et&&(w|=ht=i.SelectableRow,w|=ot=i.RightClickableRow),ei&&(w|=ot=i.RightClickableRow),ot&&(w|=ht=i.SelectableRow),ht&&(w|=ot=i.RightClickableRow),this.extensions=w,et&&(nt=g.editableRow=f({},d.editableRow)),oi&&(ai=g.filterable=f({},d.filterable)),si&&(vi=g.groupable=f({},d.groupable)),hi&&(yi=g.hierarchical=f({},d.hierarchical)),ci&&(pi=g.hoverable=f({},d.hoverable)),vt&&(pt=g.pageable=f({},d.pageable)),li&&(wi=g.reorderRow=f({},d.reorderRow)),yt&&(kt=g.resizableColumn=f({},d.resizableColumn)),ot&&(g.controlCommands=d.controlCommands),st&&(dt=g.scrollable=f({},d.scrollable)),ht&&(tt=g.selectableRow=f({},d.selectableRow),g.onRowClicked=d.onRowClicked),ri&&(ct=g.sortableColumn=f({},d.sortableColumn)),et&&(wt=nt.editScope,wt&&p&&r.itemsSuppliedWithEditableRow(),wt&&(this._editScope=wt,nt.editScope=null,nt.getItems||(nt.getItems=function(n){return ko.isObservable(n.root)&&Array.isArray(n.root())&&n.root.splice||r.editScopeRoot(),n.root}),rt.push(y(it,(function(){var n=k._editScope();return n&&
h(n,nt.getItems)}))),rt.push(y(at,(function(){var n=k._editScope();return n&&n.getCreated(h(n,nt.getItems))}))),gt=s((function(){return!!k._editScope()})),rt.push(gt),f(nt,{create:function(){return k._create(c(k._editScope),nt.getItems)},addCreated:function(n){k._addCreated(c(k._editScope),nt.getItems,n)},markForDelete:function(n){k._markForDelete(c(k._editScope),n)},enableValidation:gt}),nt.enableRowAdd!==!1&&this._addInitialCreatedRow(this._editScope,nt.getItems))),vt&&(et&&r.pageableEditableRowMismatch(),st&&r.pageableScrollableMismatch(),ut=pt.dataNavigator,ut||r.missingValidDataNavigator(),ut&&p&&r.itemsSuppliedWithPageableExtensionWithDataNav(),lt=pt.type,lt!==t.PageableType.Pageable&&lt===t.PageableType.Sequential,lt!==t.PageableType.Sequential||ut.loadByContinuationToken||r.loadByContinuationTokenMissing(),lt!==t.PageableType.Pageable||ut.loadBySkipTake||r.loadBySkipTakeMissing(),this._resetHandler=function(){return k.reset()},ut.addResetNavigationListener(this._resetHandler)),yt&&st&&
!kt.resizeToPercent&&(kt.resizeToPercent=u(!1)),ri){var ft=ct.dataNavigator,bi=this.sortByList,bt=ct.sortCallback;ft||(ft=ct.dataNavigator=vt&&pt.dataNavigator||st&&dt.dataNavigator);ft&&bt&&r.sortCallbackWithDataNav();ft||bt||(bt=ct.sortCallback=function(i){var r=it().slice(0);i&&i.length&&r&&r.length&&r.sort((function(r,u){var f=0;return i.some((function(i){var e=r[i.itemKey],o=u[i.itemKey];return f=n.Util.compare(e,o),f&&i.sortOrder===t.SortOrder.Descending&&(f=-f),f!==0})),f}));it(r)});this._msPortalFxActions.sort=function(n){return(bi(n),ft)?ft.resetNavigation():Q(bt(n))}}st&&(et&&r.scrollableEditableRowMismatch(),vt&&r.pageableScrollableMismatch(),ni=dt.dataNavigator,ni&&(p&&r.itemsSuppliedWithScrollableExtensionWithDataNav(),this._resetHandler=function(){return k.reset()},ni.addResetNavigationListener(this._resetHandler)));ht&&(ti=it,n.isUndefined(tt.selectionMode)&&(tt.selectionMode=1),n.isUndefined(tt.leaveSelectionOnDeactivation)&&(tt.leaveSelectionOnDeactivation=tt.selectionMode!==
1),at&&(ii=s((function(){return it().concat(at())})),ti=ii,rt.push(ii)),this.selectableData=new a.SelectableSet(ti,tt.itemMatchesSelection,tt.createSelection,tt.initialSelection,tt.supplyCommands,!0,tt.leaveSelectionOnDeactivation));ui=it.map(v,(function(n,t){return l((function(){return k._createMetadataForItem(n,t)}))}));fi=at.map(v,(function(n,t){return l((function(){return k._createMetadataForItem(n,t)}))}));this.rowMetadata=o();rt.push(s((function(){k.rowMetadata(ui().concat(fi()))})));this._addDisposablesToCleanUp(rt)}return __extends(p,e),p.prototype.getRowMetadata=function(n){return this.rowMetadata().first((function(t){return t.item===n}))},p.prototype.reset=function(){var t=this,i=this.resetCallback(),n;return i?Q(i()):(this._pendingResetCallbackPromise||(n=Q.defer(),this._pendingResetCallbackPromise=n.promise,this._pendingResetCallbackSubscription=this.resetCallback.subscribe((function(i){i&&(t._pendingResetCallbackPromise?Q(i()).then((function(t){n.resolve(t)}),(function(t){n.reject(t)})).finally(
(function(){v(t._pendingResetCallbackSubscription);t._pendingResetCallbackSubscription=null;t._pendingResetCallbackPromise=null})):n.reject())}))),this._pendingResetCallbackPromise)},p.prototype.dispose=function(){if(this._resetHandler){var n=this.extensionsOptions.pageable;n&&n.dataNavigator&&n.dataNavigator.removeResetNavigationListener(this._resetHandler);this._resetHandler=null}this._pendingResetCallbackSubscription=null;this._pendingResetCallbackPromise&&(this._pendingResetCallbackPromise=null);v(this._pendingResetCallbackSubscription,this.selectableData);e.prototype.dispose.call(this)},p.prototype._createMetadataForItem=function(n,t){var r={item:t,cssClass:u("")},e,f;return this.extensions&i.EditableRow&&(e=this.extensionsOptions.editableRow,e&&(r.editState=c(this._editScope).getEditState(t))),this.extensions&i.SelectableRow&&(f=this.extensionsOptions.selectableRow,r.selected=u(!1),r.disabled=u(!1),r.activated=u(null),r.activatedInfo=u(null),r.useDefaultActivation=u(!0),f&&f.linkProvider&&
(r.link=f.linkProvider(n,t))),this.extensions&i.Groupable&&(r.groupId=u("")),r},p.prototype._create=function(t,i){var r=t.create(h(t,i)),u=this.extensionsOptions.editableRow;return u&&u.created&&u.created(r),this.addEmptyRow(r),n.Helpers.resolve(r)},p.prototype._addCreated=function(n,t,i){if(!this._addCreatedLocked)try{this._addCreatedLocked=!0;var r=this.createdItems().some((function(n){return n&&i&&n===i}));i&&!r&&n.addCreated(i,h(n,t))}finally{this._addCreatedLocked=!1}},p.prototype._markForDelete=function(n,t){var r=function(n){return n===t},i=this.items().first(r);if(i){n.markForDelete(i);return}if(i=this.createdItems().first(r),i){n.revert(i);return}b("The item marked for deletion could not be found.")},p.prototype._addInitialCreatedRow=function(n,t){var f=this,i=function(n){f._create(n,t)},r=n(),u;r?i(r):u=n.subscribe((function(n){n&&(i(n),u.dispose())}))},p})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=k})(i=t.Grid||(t.Grid={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.
Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,s=ko.observableArray,u,e,f,o;(function(n){n[n.Selectable=1]="Selectable";n[n.Groupable=2]="Groupable";n[n.ContextMenu=4]="ContextMenu";n[n.Filterable=8]="Filterable"})(i.Extensions||(i.Extensions={}));u=i.Extensions,(function(n){n[n.Collection=0]="Collection";n[n.Ascending=1]="Ascending";n[n.Descending=2]="Descending"})(i.GroupOrder||(i.GroupOrder={}));e=i.GroupOrder,(function(n){n[n.Single=0]="Single";n[n.Multiple=1]="Multiple"})(i.SelectionMode||(i.SelectionMode={}));f=i.SelectionMode;o=(function(t){function i(i,o,h){o===void 0&&(o=0);h===void 0&&(h={});i&&i.createChildLifetime||(i=undefined,o=arguments[0],h=arguments[1],o===void 0&&(o=0),h===void 0&&(h={}));t.call(this,i);this.controlType=56;this.items=s();this.events=$.noop;this.noItemsMessage=r("");this.extensions=o;this.extensionOptions=
h;this.extensions&u.Selectable&&(this.extensionOptions.selectable||(this.extensionOptions.selectable={}),(this.extensionOptions.selectable.selectionMode===undefined||this.extensionOptions.selectable.selectionMode===null)&&(this.extensionOptions.selectable.selectionMode=f.Single),this.extensionOptions.selectable.selectedItem||this.extensionOptions.selectable.selectionMode!==f.Single||(this.extensionOptions.selectable.selectedItem=r()),this.extensionOptions.selectable.selection||(this.extensionOptions.selectable.selection=new n.ViewModels.SelectableSet(this.items)),(this.extensionOptions.selectable.activateOnSelected===undefined||this.extensionOptions.selectable.activateOnSelected===null)&&(this.extensionOptions.selectable.activateOnSelected=!0));this.extensions&u.Groupable&&(this.extensionOptions.groupable||(this.extensionOptions.groupable={}),this.extensionOptions.groupable.groupKey||(this.extensionOptions.groupable.groupKey=r("")),this.extensionOptions.groupable.headerTemplate||(this.
extensionOptions.groupable.headerTemplate=null),this.extensionOptions.groupable.groups||(this.extensionOptions.groupable.groups=null),this.extensionOptions.groupable.noGroupLabel||(this.extensionOptions.groupable.noGroupLabel=""),this.extensionOptions.groupable.order||(this.extensionOptions.groupable.order=r(e.Collection)))}return __extends(i,t),i})(t.Loadable.ViewModel);i.ViewModel=o})(r=i.ListView||(i.ListView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r){t&&t.createChildLifetime?n.call(this,t,i,r):(t=undefined,i=arguments[0],r=arguments[1],n.call(this,i,r));this.controlType=55}return __extends(t,n),t})(n.ListView.ViewModel);t.ViewModel=i})(t=n.Gallery||(n.Gallery={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||
(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u,f;(function(n){n[n.Selectable=1]="Selectable";n[n.OnDemandLoadable=2]="OnDemandLoadable";n[n.RightClickable=4]="RightClickable";n[n.LoadableByContinuationToken=8]="LoadableByContinuationToken"})(u||(u={}));t.Extensions=u;f=(function(t){function u(n,u,f,e){var o=this;n&&n.createChildLifetime||(n=undefined,u=arguments[0],f=arguments[1],e=arguments[2]);t.call(this,n);this.controlType=57;this.padding=i(16);this.alwaysExpanded=i(!1);this.htmlTemplates=[];this.toggleNodeCallback=i();this._tokenStorage={};this.pathSeparator="/";this.items=u||r();this.extensions=f||0;this.extensionsOptions=e;this._processCallBack=function(n){if(n)for(var t=0,i=n.length;t<i;t++)o._processItem(n[t])};this._processItems(this.items);this._selectableExists&&this._setupSelectable(e.selectable);this._loadableExists&&this._setupOnDemandLoadable();this._selectableExists&&
this.extensionsOptions.selectable.selectionMode===1&&this.selectableData.selectedPaths.subscribeArrayChanges(this.lifetimeManager,(function(n){o.findItemByPath(n).metadata.selected(!0)}),(function(n){o.findItemByPath(n).metadata.selected(!1)}))}return __extends(u,t),u.prototype.loadMoreNode=function(n,t){return this.extensionsOptions.loadableByContinuationToken.loadMoreNode(n,t)},u.prototype.syncToken=function(n,t){this._tokenStorage[n]=t},u.prototype.getTokenByPath=function(n){return this._tokenStorage[n]},u.prototype.expandNode=function(n){this.toggleNode(n,!0)},u.prototype.collapseNode=function(n){this.toggleNode(n,!1)},u.prototype.toggleNode=function(n,t){t===undefined&&(t=!n.metadata.expanded());var i=this.toggleNodeCallback();i&&i(n,t)},u.prototype.findItemByPath=function(t){var c=this.items,e=c,i=null,f,o,u,s,h;if(t)for(f=t.split(this.pathSeparator),o=function(){var t=f[u].toLowerCase();if(i=n.find(e(),(function(n){return t===n.text().toLowerCase()})),i)e=i.items||r();else return"break"}
,u=0,s=f.length;u<s;u++)if(h=o(),h==="break")break;return i},Object.defineProperty(u.prototype,"_selectableExists",{get:function(){return(this.extensions&1)>0&&!!this.extensionsOptions.selectable},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"_loadableExists",{get:function(){return(this.extensions&2)>0&&!!this.extensionsOptions.onDemandLoadable},enumerable:!0,configurable:!0}),u.prototype._processItems=function(n){this._processCallBack(n());n.subscribeArrayBulkChanges(this.lifetimeManager,this._processCallBack)},u.prototype._processItem=function(n){var t=n.metadata||(n.metadata={});t.disabled=t.disabled||i(!1);t.expanded=t.expanded||i(!1);this._selectableExists&&(t.selected=t.selected||i(!1),t.selectable=t.selectable||i(!0),t.focused=t.focused||i(!1));this._loadableExists&&(t.loadable=t.loadable||i());n.items=n.items||r();this._processItems(n.items)},u.prototype._setupSelectable=function(n){var t=this;this.selectableData={selectedItem:i(),selectedPath:i(),selectionMode:
n.selectionMode||0,selectedItems:r(),selectedPaths:r()};this.selectableData.selectedPath.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.selectableData.selectedItem(t.extensionsOptions.selectable.createSelection(i,n))}));this.selectableData.selectedPaths.subscribe(this.lifetimeManager,(function(n){var i=n.map((function(n){var i=t.findItemByPath(n);return t.extensionsOptions.selectable.createSelection(i,n)}));t.selectableData.selectedItems(i)}))},u.prototype._setupOnDemandLoadable=function(){var t=this,n=i();n.extend({notify:"always"});n.subscribe(this.lifetimeManager,(function(n){var i=t.findItemByPath(n);i&&t.extensionsOptions.onDemandLoadable.loadItem(i,n)}));this.onDemandLoadableData={loadingPath:n}},__decorate([n.Composition.ProxyCompatibilityMode],u)})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=f})(i=t.TreeView||(t.TreeView={}))})(i=t.Lists||(t.Lists={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})
),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservable,u=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.controlType=110;this.markdown=r(i.markdown,"")}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=u})(i=t.Markdown||(t.Markdown={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i){n.call(this,t);this.controlType=112;this.options=i}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.PartPinner||(n.PartPinner={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.show=i(!1);this.darkText=i(!1);this.controlType=89}return __extends(t,n),t})(
n.Base.ViewModel);t.ViewModel=r})(t=n.PreviewTag||(n.PreviewTag={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t){n.call(this,t);this.autoRefreshContent=!0;this.refreshContainerOnResize=!0;this.scrollIntoViewVertical=!0;this.scrollIntoViewHorizontal=!0;this.fitContainer=!1;this.controlType=59}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=i})(t=n.Scrollbar||(n.Scrollbar={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservable,u=n.initValue,f=(function(t){function i(i,f){t.call(this,i);this.controlType=93;this.defaultText=f.defaultText;this.submit=f.submit;this.update=f.update;this.placeholder=r(f.placeholder,n.Resources.Strings.ViewModels.Controls.search);this.
updateFrequency=u(f.updateFrequency,400);this.resultLimit=f.resultLimit;this._msPortalFxresetTrigger=r()}return __extends(i,t),i.prototype.reset=function(){var n=this._msPortalFxresetTrigger;if(n())return n()();Q()},i})(t.Base.ViewModel);i.ViewModel=f})(i=t.SearchBox||(t.SearchBox={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,f=ko.observableArray,r,u;(function(n){n[n.Small=2]="Small";n[n.Large=3]="Large"})(t.Size||(t.Size={}));r=t.Size;u=(function(n){function t(t){n.call(this,t);this.items=f();this.maxItems=i();this.size=i(r.Small);this.controlType=60}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=u})(t=n.Settings||(n.Settings={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(
n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.controlType=100;this.onClick=i.onClick;this.text=i.text||"";this.disabled=i.disabled||!1;this.primary=i.primary||!1}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.SimpleButton||(n.SimpleButton={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t){n.call(this,t);this.value=i();this.unit=i();this.caption=i();this.infoBalloon=i();this.hideInfoBalloon=i(!1);this.controlType=61}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=r})(t=n.SingleSetting||(n.SingleSetting={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n.initObservableArray,f,u;(function(n){n[n.Orange=0]="Orange";n[n.DarkOrchid=
1]="DarkOrchid";n[n.YellowGreen=2]="YellowGreen";n[n.MediumBlue=3]="MediumBlue"})(i.Colors||(i.Colors={}));f=i.Colors;u=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.controlType=95;this.headers=r(i.headers,[]);this.rows=r(i.rows,[])}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=u})(i=t.SpecComparisonTable||(t.SpecComparisonTable={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.controlType=101;this.text=i.text||""}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(t=n.TextBlock||(n.TextBlock={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r)
{r===void 0&&(r={});n.call(this,t);this.controlType=102;this.input=i().extend({notify:"always"});this.write=i().extend({notify:"always"});this.resize=r.resize||i({cols:100,rows:80})}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=r})(i=t.TerminalEmulator||(t.TerminalEmulator={}))})(t=n.Unsupported||(n.Unsupported={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=ko.computed,i=[],e="azc-validatableControl-none",o="azc-validatableControl-invalid",s="azc-validatableControl-pending",u="azc-validatableControl-valid-validated",h="data-validatable-control-valid",l="data-validatable-control-validation-state",f,c;i[0]="none";i[1]="invalid";i[2]="valid";i[3]="pending";f=(function(){function t(){this._destroyIds=[]}return t.prototype._checkExistsOrRegisterDestroyId=function(n){var t=this._destroyIds.indexOf(n)<0;return t&&this._destroyIds.push(n),!t}
,t.prototype.isDestroyed=function(){return this._destroyIds.length>0},t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(null)||(this._errorMessage&&(this._errorMessage.dispose(),this._errorMessage=null),this._disposeSubscriptions())},t.prototype.initialize=function(n,t){var i=this;this._element=n;this._validatable={enableValidation:t.enableValidation,valid:t.valid,validationState:t.validationState,validators:t.validators};this._errorMessage||(this._errorMessage=r((function(){var u="",r=i._validatable.validators(),n,t;if(r)for(n=0;n<r.length;n++)if(t=r[n],!t.valid()&&t.message()){u=t.message();break}return u})));this._subscriptions||this._initializeSubscriptions()},t.prototype.onErrorMessageChanged=function(){},t.prototype.onValidationStateChanged=function(){},t.prototype._initializeSubscriptions=function(){var n,t;this._subscriptions=this._subscriptions||[];this._disposeSubscriptions();n=this._validatable.validationState;this.onValidationStateChanged(n());this._subscriptions.
push(n.subscribe(this.onValidationStateChanged));t=this._errorMessage;this.onErrorMessageChanged(t());this._subscriptions.push(t.subscribe(this.onErrorMessageChanged))},t.prototype._disposeSubscriptions=function(){var t=this._subscriptions;this._subscriptions=[];t&&n.disposeDisposable(t)},t})();t.ValidationPlacementBase=f;c=(function(n){function t(){n.apply(this,arguments);this._input=null;this._valid=r($.noop)}return __extends(t,n),t.prototype.dispose=function(){this._checkExistsOrRegisterDestroyId(n.prototype.dispose)||(n.prototype.dispose.call(this),this._element&&this._element.removeClass([e,o,s,u].join(" ")),this._input&&this._input.removeAttr(h),this._valid&&(this._valid.dispose(),this._valid=null))},t.prototype.initialize=function(t,i){var f=this;n.prototype.initialize.call(this,t,i);this._valid=r((function(){return f._validatable.enableValidation()&&f._validatable.validators().length>0&&f._validatable.validationState()===2}));this._subscriptions.push(this._valid.subscribe((function(
n){f._element.toggleClass(u,n)})));this._input=this._element.find("input, select, textarea");this._validatable.validationState.notifySubscribers(this._validatable.validationState());this._setValidationAttribute(this._validatable.validationState())},t.prototype.onValidationStateChanged=function(n){var t=this._element;t.toggleClass(e,n===0);t.toggleClass(o,n===1);t.toggleClass(s,n===3);this._element.toggleClass(u,this._valid());this._setValidationAttribute(n)},t.prototype._setValidationAttribute=function(n){var t=this._input;t&&(t.attr(h,n===2||this._validatable.validators().length===0),t.attr(l,i[n]))},t})(f);t.Css=c})(i=t.ValidationPlacements||(t.ValidationPlacements={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function y(n){return(n||"").toLowerCase()}function p(n){return(n||"").toLocaleLowerCase()}function e(n){return n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,
"\\$&")}var pt=n.Base,wt=pt.Diagnostics,i=n.isNullOrUndefined,s=ko.observable,bt=new wt.Log("MsPortalFx.ViewModels.Controls.Validators"),u=jQuery,r=(function(){function n(n){var t=this;this.message=s(n);this.validationState=s(0);this.validate=s();this.isEmptyValid=s(!1);this.valid=ko.computed((function(){return t.validationState()===2}));this._sub=this.validate.subscribe((function(n){t.validationState(t._validate(n))}))}return n.prototype.dispose=function(){this._sub&&(this._sub.dispose(),this._sub=null)},n.prototype._validate=function(){return 0},n})(),f,h,w,b,a,k,d,g,nt,tt,it,o,rt,ut,ft,c,v,et,ot,st,ht,l,ct,lt,at,vt,yt;t.Validator=r;t.escapeRegExpOperators=e;f=(function(n){function t(t,i){n.call(this,i||"The value must match the expression '"+t+"'.");this._expression=t}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:this._expression.test(n||"")?2:1},t})(r);t.Match=f;h=(function(n){function t(t,i){n.call(this,i||"The value must not match the expression '"+
t+"'.");this._expression=t}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:this._expression.test(n||"")?1:2},t})(r);t.NotMatch=h;w=(function(n){function t(t,i){n.call(this,new RegExp(e(t),"i"),i||"The value must contain at least one case insensitive match of '"+t+"'.")}return __extends(t,n),t})(f);t.Contains=w;b=(function(n){function t(t,i){n.call(this,new RegExp(e(t),"i"),i||"The value must not contain a case insensitive match of '"+t+"'.")}return __extends(t,n),t})(h);t.NotContains=b;a=(function(n){function t(t,i){n.call(this,new RegExp("["+e(t)+"]",""),i||"The value must contain at least one character from '"+t+"'.")}return __extends(t,n),t})(f);t.ContainsCharacters=a;k=(function(n){function t(t,i){n.call(this,new RegExp("["+e(t)+"]",""),i||"The value must not contain characters from '"+t+"'.")}return __extends(t,n),t})(h);t.NotContainsCharacters=k;d=(function(n){function t(t){n.call(this,/[0-9]/,t||"The value must have at least one digit from 0 to 9.")}
return __extends(t,n),t})(f);t.HasDigit=d;g=(function(n){function t(t){n.call(this,/[A-Za-z]/,t||"The value must have at least one upper or lower case letter from A to Z or a to z.")}return __extends(t,n),t})(f);t.HasLetter=g;nt=(function(n){function t(t){n.call(this,/[A-Z]/,t||"The value must have at least one upper case letter from A to Z.")}return __extends(t,n),t})(f);t.HasUpperCaseLetter=nt;tt=(function(n){function t(t){n.call(this,/[a-z]/,t||"The value must have at least one lower case letter from a to z.")}return __extends(t,n),t})(f);t.HasLowerCaseLetter=tt;it=(function(n){function t(t){n.call(this,"!@#$%^&*()_+-={}|[]\\:\";'<>,.?/~`",t||"The value must contain at least one punctuation character from '!@#$%^&*()_+-={}|[]\\:\";'<>,.?/~`'.")}return __extends(t,n),t})(a);t.HasPunctuation=it;o=(function(n){function t(t,i){n.call(this,i);this._compareTo=u.isFunction(t)?t:function(){return t}}return __extends(t,n),t.prototype._validate=function(n){return this._compare(n,this._compareTo())?2:1}
,t.prototype._compare=function(){return!1},t})(r);t.Compare=o;rt=(function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(n,t){return n===t},t})(o);t.Equals=rt;ut=(function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(n,t){return y(n)===y(t)},t})(o);t.CaseInsensitiveCompare=ut;ft=(function(n){function t(t,i){n.call(this,t,i||"The value must equal the provided value.")}return __extends(t,n),t.prototype._compare=function(n,t){return p(n)===p(t)},t})(o);t.LocaleAwareCaseInsensitiveCompare=ft;c=(function(n){function t(t,i,r){n.call(this,r||"The value must be between "+t+" and "+i+" characters long.");this._min=t;this._max=i}return __extends(t,n),t.prototype._validate=function(n){var t,r;return(n=u.trim(n),(i(n)||u.trim(n)==="")&&this.isEmptyValid())?2:(t=0,i(n)||(t=n.length),r=0,i(this._min)||(r=this._min),t>=r&&(i(this._max)||t<=
this._max))?2:1},t})(r);t.LengthRange=c;v=(function(n){function t(t,i){n.call(this,t,null,i||"The value must have a length of at least "+t+".")}return __extends(t,n),t})(c);t.MinLength=v;et=(function(n){function t(t,i){n.call(this,0,t,i||"The value must have a length of at most "+t+".")}return __extends(t,n),t})(c);t.MaxLength=et;ot=(function(n){function t(t){n.call(this,1,t||"The value should not be empty.")}return __extends(t,n),t})(v);t.Required=ot;st=(function(n){function t(t){n.call(this,t||"The input value must be a non-null value.")}return __extends(t,n),t.prototype._validate=function(n){return i(n)?1:2},t})(r);t.NotNull=st;ht=(function(n){function t(t){n.call(this,t||"The input value must be a number.")}return __extends(t,n),t.prototype._validate=function(n){return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:!i(n)&&n!==""?isNaN(+n)?1:2:1},t})(r);t.Numeric=ht;l=(function(n){function t(t,i,r){var e=t,f;u.isFunction(t)||(e=function(){return t});f=i;u.isFunction(i)||(f=function(){return i});n.
call(this,r||"The value must be between "+e()+" and "+f()+".");this.min=e;this.max=f}return __extends(t,n),t.prototype._validate=function(n){var t;return(i(n)||u.trim(n)==="")&&this.isEmptyValid()?2:(i(n)||n==="")&&i(this.min())&&i(this.max())?2:!i(n)&&(typeof n=="string"||typeof n=="number")&&n!==""&&(t=+n,!isNaN(t))?!i(this.min())&&t<this.min()?1:!i(this.max())&&t>this.max()?1:2:1},t})(r);t.ValueRange=l;ct=(function(n){function t(t,i){n.call(this,t,null,i||"The value must be at least "+t+".")}return __extends(t,n),t})(l);t.MinValue=ct;lt=(function(n){function t(t,i){n.call(this,null,t,i||"The value must be at most "+t+".")}return __extends(t,n),t})(l);t.MaxValue=lt;at=(function(){function n(n,t){this.promise=n;this.asyncRequestId=t}return n})();vt=(function(t){function i(n,i,r){t.call(this,n);this._validationHandler=i;this._context=r||null;this._pendingAsyncRequests=[];this._latestValidationAsyncRequestId=null}return __extends(i,t),i.prototype._validate=function(t){var r=this,u=!1,i;return this.
_validationHandler?(this._latestValidationAsyncRequestId=n.getUniqueId(),i=this._validationHandler(t,this._context),!i)?(bt.error("Extension validation handler did not return a promise"),3):(this._pendingAsyncRequests.push(new at(i,this._latestValidationAsyncRequestId)),i.then((function(n){r._updateValidationResult(i,n,2)}),(function(n){r._updateValidationResult(i,n,1)})).finally((function(){u=!0})),u)?(this._removePendingAsyncRequest(i),this.validationState()):3:2},i.prototype._updateResult=function(n,t){n&&this.message(n);this.validationState(t)},i.prototype._updateValidationResult=function(n,t,i){var r;r=this._pendingAsyncRequests.length<=1?this._pendingAsyncRequests.pop():this._removePendingAsyncRequest(n);r&&r.asyncRequestId===this._latestValidationAsyncRequestId&&this._updateResult(t,i)},i.prototype._removePendingAsyncRequest=function(n){for(var t=0,i=-1,r=null,t=0;t<this._pendingAsyncRequests.length;t++)if(this._pendingAsyncRequests[t].promise===n){i=t;break}return i>=0?(r=this._pendingAsyncRequests[
i],this._pendingAsyncRequests.splice(i,1),r):null},i})(r);t.CustomAsyncValidator=vt;yt=(function(n){function t(t){n.call(this,t||"The value is invalid.")}return __extends(t,n),t.prototype._validate=function(){return 1},t})(r);t.Invalid=yt})(i=t.Validators||(t.Validators={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";(function(n){n[n.Default=0]="Default";n[n.AfterKeyDown=1]="AfterKeyDown";n[n.KeyPress=2]="KeyPress";n[n.Blur=3]="Blur";n[n.Input=4]="Input"})(n.ValueUpdateTrigger||(n.ValueUpdateTrigger={}));var t=n.ValueUpdateTrigger})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,u=ko.observableArray,wt=n.shallowCopyFromObject,bt=0,a,v,y,p,w,b,k,kt,d,g,nt,tt,it,rt,ut,ft,et,ot,st,dt,c,gt,ni,h,ti,ii,ri,ui,
fi,ht,ei,ct,e,lt,oi,o,f,at,l,vt,yt,s,pt,si,hi,ci,li,ai,vi,yi;(function(n){n[n.Line=0]="Line";n[n.Area=1]="Area";n[n.Scatter=2]="Scatter";n[n.StackedBar=3]="StackedBar";n[n.GroupedBar=4]="GroupedBar";n[n.SplitBar=5]="SplitBar";n[n.StackedArea=6]="StackedArea"})(a||(a={}));i.ChartType=a,(function(n){n[n.Linear=0]="Linear";n[n.Monotone=1]="Monotone";n[n.StepAfter=2]="StepAfter"})(v||(v={}));i.Interpolation=v,(function(n){n[n.Solid=0]="Solid";n[n.Dotted=1]="Dotted";n[n.Dashed=2]="Dashed";n[n.Trendline=3]="Trendline";n[n.UsageThreshold=4]="UsageThreshold";n[n.WarningThreshold=5]="WarningThreshold"})(y||(y={}));i.LineStyle=y,(function(n){n[n.ShowLineWithPoints=0]="ShowLineWithPoints";n[n.HideLine=1]="HideLine";n[n.ShowLineWithXHoverPoint=2]="ShowLineWithXHoverPoint"})(p||(p={}));i.LineState=p,(function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"})(w||(w={}));i.AreaHatchingPattern=w,(function(n){n[n.Stacked=
0]="Stacked";n[n.Grouped=1]="Grouped";n[n.Split=2]="Split"})(b||(b={}));i.BarChartType=b,(function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"})(k||(k={}));i.AxisPosition=k,(function(n){n[n.All=0]="All";n[n.XSlider_Off=1]="XSlider_Off";n[n.XSlider_noCallout=2]="XSlider_noCallout";n[n.ChartArea_Off=4]="ChartArea_Off";n[n.ChartArea_noClick=8]="ChartArea_noClick";n[n.ChartArea_noHover=16]="ChartArea_noHover"})(i.InteractionBehavior||(i.InteractionBehavior={}));kt=i.InteractionBehavior,(function(n){n[n.None=0]="None";n[n.Top=1]="Top";n[n.Right=2]="Right";n[n.Bottom=3]="Bottom";n[n.Left=4]="Left"})(d||(d={}));i.LegendPosition=d,(function(n){n[n.Max=0]="Max";n[n.Min=1]="Min";n[n.First=2]="First";n[n.Last=3]="Last";n[n.Every=4]="Every";n[n.Custom=5]="Custom"})(g||(g={}));i.DataLabelContext=g,(function(n){n[n.Callout=0]="Callout";n[n.Badge=1]="Badge"})(nt||(nt={}));i.DataLabelStyle=nt,(function(n){n[n.Ordinal=0]="Ordinal";n[n.Linear=1]="Linear";n[n.
Time=2]="Time";n[n.Log=3]="Log"})(tt||(tt={}));i.Scale=tt,(function(n){n[n.None=0]="None";n[n.Low=1]="Low";n[n.High=2]="High"})(it||(it={}));i.AxisLabelPosition=it,(function(n){n[n.GreaterThan=0]="GreaterThan";n[n.LessThan=1]="LessThan"})(rt||(rt={}));i.ConditionOperator=rt,(function(n){n[n.General=0]="General";n[n.HorizontalLine=1]="HorizontalLine";n[n.VerticalLine=2]="VerticalLine";n[n.Uniform=3]="Uniform"})(ut||(ut={}));i.SeriesType=ut,(function(n){n[n.Default=0]="Default";n[n.Point=2]="Point";n[n.MultiplePointsSingleSeries=3]="MultiplePointsSingleSeries";n[n.MultiplePointsMultipleSeries=4]="MultiplePointsMultipleSeries"})(ft||(ft={}));i.MetricRuleScope=ft,(function(n){n[n.AllTogether=0]="AllTogether";n[n.AllSeparately=1]="AllSeparately";n[n.SingleSeries=2]="SingleSeries"})(et||(et={}));i.MetricRuleAggregationScope=et,(function(n){n[n.CurrentXValue=0]="CurrentXValue";n[n.CurrentYValue=1]="CurrentYValue";n[n.MinY=2]="MinY";n[n.MaxY=3]="MaxY";n[n.AverageY=4]="AverageY";n[n.SumY=5]="SumY";n[n.Count=
6]="Count";n[n.CustomValue=7]="CustomValue"})(ot||(ot={}));i.MetricRuleAggregationType=ot;st=(function(){function n(){this.context=r(0);this.style=r(0);this.formatter=r(null)}return n})();i.DataLabel=st;dt=(function(n){function t(){n.apply(this,arguments);this.chartItems=u();this.context=r(5)}return __extends(t,n),t})(st);i.CustomDataLabel=dt;c=(function(){function t(t,i){this.name=r("");this.scale=r(0);this.reverseDomain=r(!1);this.ticks=r(0);this.position=r(3);this.positionIndex=r(0);this.showAxis=r(!0);this.autoScaleUnit=r(!0);this.showName=r(!1);this.showLabel=r(1);this.labelPadding=r(50);this.rotateLabel=r(0);this.showAxisLine=r(!1);this.showTickMarks=r(!1);this.showGridLines=r(!1);this.inputFormat=r("");this.outputFormat=r("");this.formatOptions=r(null);this.xSliderOutputFormat=r(null);this.xSliderFormatOptions=r(null);this.displayLabelFormatter=r("");this.xSliderCalloutDisplayFormatter=r("");this.min=r(null);this.max=r(null);this.unit=r(n.UnitConversion.Unit.None);this.displaySIUnit=r(
!1);this.defaultAxisPadding=r(null);this.customAxisPadding=r(null);t&&this.position(t);i&&this.scale(i)}return t})();i.Axis=c;gt=(function(){function n(n,t,i,r,u,f,e){this.years=n;this.months=t;this.days=i||0;this.hours=r||0;this.minutes=u||0;this.seconds=f||0;this.milliseconds=e||0}return n})();i.DateSpan=gt;ni=(function(){function n(n){this.value=n}return n})();i.NumberSpan=ni;h=(function(){function n(){this.type=r(0);this.name=r(String(bt=bt+1&65535))}return n})();i.SeriesBase=h;ti=(function(n){function t(){n.apply(this,arguments);this.values=u();this.xAxisName=r("");this.yAxisName=r("")}return __extends(t,n),t})(h);i.Series=ti;ii=(function(n){function t(){n.apply(this,arguments);this.type=r(3);this.startXValue=r(null);this.span=r(null);this.yValues=u();this.xAxisName=r("");this.yAxisName=r("")}return __extends(t,n),t})(h);i.UniformSeries=ii;ri=(function(n){function t(){n.apply(this,arguments);this.type=r(1);this.value=r(null);this.axisName=r("")}return __extends(t,n),t})(h);i.LineSeries=ri;ui=(function(
){function n(n){n?this._initOptions(n):this._initLegacyDefaults()}return n.prototype._initOptions=function(n){wt(this,n,["scope","scopeSeriesName","metrics"])},n.prototype._initLegacyDefaults=function(){this.scope=r(null);this.scopeSeriesName=r(null);this.metrics=u()},n})();i.MetricRule=ui;fi=(function(){function n(n){n?this._initOptions(n):this._initLegacyDefaults()}return n.prototype._initOptions=function(n){wt(this,n,["aggregationScope","aggregationType","aggregationSeriesName","showBarColor","colorCode","hatchingPattern","formatOptions","title","unit","customValue","defaultInfoBalloon"])},n.prototype._initLegacyDefaults=function(){this.aggregationScope=r(2);this.aggregationType=r(4);this.aggregationSeriesName=r(null);this.showBarColor=r(!0);this.colorCode=r(null);this.hatchingPattern=r(null);this.outputFormat=r(null);this.formatOptions=r(null);this.title=r(null);this.unit=r(null);this.customValue=r(null);this.defaultInfoBalloon=r(null)},n})();i.MetricRuleMetric=fi;ht=(function(){function n(
){this.chartViewIndex=r(null);this.seriesViewIndex=r(null)}return n})();i.SeriesId=ht;ei=(function(n){function t(){n.apply(this,arguments);this.chartItems=u()}return __extends(t,n),t})(ht);i.SeriesSubset=ei;ct=(function(){function n(){}return n})();i.Events=ct;e=(function(){function n(){}return n})();i.SeriesChartEvents=e;lt=(function(){function n(){}return n})();i.BarChartEvents=lt;oi=(function(){function n(){this.seriesName=r("");this.conditionOperator=r(0);this.interpolation=r(0)}return n})();i.RenderingCondition=oi;o=(function(){function n(){this.seriesName=r("");this.displayName=r("");this.cssClass=r("");this.dataLabels=u();this.showTooltip=r(!1);this.tooltipFormatter=r("Series: '{0}' Point: {1} Value: {2}");this.renderingConditions=u();this.selectable=r(!0);this.hoverable=r(!0);this.hideFromLegend=r(!1);this.autoGenerated=!1}return n})();i.SeriesView=o;f=Object.create(null);at=(function(n){function t(){n.apply(this,arguments);this.interpolation=r(0);this.lineStyle=r(0);this.showTooltip=r(!1);this.
showDataPoints=r(!0)}return __extends(t,n),t})(o);i.LineChartSeriesView=at;l=(function(n){function t(){n.apply(this,arguments);this.interpolation=r(0);this.areaHatchingPattern=r(0);this.showTooltip=r(!1)}return __extends(t,n),t})(o);i.AreaChartSeriesView=l;vt=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(l);i.StackedAreaChartSeriesView=vt;yt=(function(n){function t(){n.apply(this,arguments);this.radius=r(2);this.showTooltip=r(!1)}return __extends(t,n),t})(o);i.ScatterChartSeriesView=yt;s=(function(){function n(){this.chartType=r(undefined);this.seriesView=u()}return n.prototype.newSeriesView=function(){return null},n})();i.View=s;pt=(function(n){function t(){n.apply(this,arguments);this.chartType=r(0);this.seriesView=u();this.events=new e}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=0,t})(s);i.LineChartView=pt;f[pt.defaultChartType]=function(n){var t=new at;return n&&t.seriesName(n.name()),t};si=(function(
n){function t(){n.apply(this,arguments);this.chartType=r(1);this.seriesView=u();this.events=new e}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t.defaultChartType=1,t})(s);i.AreaChartView=si;f[1]=function(n){var t=new l;return n&&t.seriesName(n.name()),t};hi=(function(){function n(){this.enableSparseSeries=r(!0);this.chartType=r(undefined);this.seriesView=u()}return n.prototype.newSeriesView=function(){return null},n})();i.StackedChartView=hi;ci=(function(){function n(){this.chartType=r(6);this.seriesView=u();this.events=new e;this.lineState=r(0);this.enableSparseSeries=r(!0)}return n.prototype.newSeriesView=function(n){return f[this.chartType()](n)},n.defaultChartType=6,n})();i.StackedAreaChartView=ci;f[6]=function(n){var t=new vt;return n&&t.seriesName(n.name()),t};li=(function(n){function t(){n.apply(this,arguments);this.chartType=r(2);this.seriesView=u();this.events=new e}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.
chartType()](n)},t.defaultChartType=2,t})(s);i.ScatterChartView=li;f[2]=function(n){var t=new yt;return n&&t.seriesName(n.name()),t};ai=(function(n){function t(t){n.call(this);this.barPaddingRatio=r(.3);this.enableSparseSeries=r(!0);this.barChartType=r(0);this.xAxisSpan=r(null);this.events=new lt;this.barChartType(t);switch(t){case 0:this.chartType(3);break;case 1:this.chartType(4);break;case 2:this.chartType(5)}}return __extends(t,n),t.prototype.newSeriesView=function(n){return f[this.chartType()](n)},t})(s);i.BarChartView=ai;f[3]=f[4]=f[5]=function(n){var t=new o;return n&&t.seriesName(n.name()),t};vi=(function(){function n(n,t){this.xValue=n;this.yValue=t}return n})();i.ChartItem=vi;yi=(function(t){function i(f){var e=this;t.call(this,f);this.title=r("");this.showTitle=r(!1);this.width=r(0);this.height=r(0);this.noDataMessage="No data to display";this.series=u();this.xAxis=new c;this.yAxis=new c(4,1);this.secondaryXAxes=u();this.secondaryYAxes=u();this.views=u();this.legendPosition=r(0);this.
interactionBehavior=r(kt.All);this.autogenerateSeriesViews=r(!0);this.events=new ct;this.seriesSelections=u();this.seriesHovers=u();this.hoveredID=u();this.metricsRules=u();this.enableTrackXSlider=r();this.xSliderCoordinate=r();this.xSliderFilterHoverThreshold=r();this.noData=r(!1);this.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(f);this.controlType=63;this.xAxis.showTickMarks(!0);this.yAxis.labelPadding(i.defaultYAxisLabelPadding);ko.reactor(this.lifetimeManager,(function(){if(e.autogenerateSeriesViews()){var n=e.series()||[],t=e.views();t.forEach((function(t){var r=t.seriesView.peek(),u=r.filter((function(n){return n.autoGenerated})),f=u.filter((function(t){return n.some((function(n){return n.name.peek()===t.seriesName.peek()}))})),e=u.filter((function(n){return f.indexOf(n)<0})),o=n.filter((function(n){var t=n.name();return!f.some((function(n){return t===n.seriesName.peek()}))}));e.forEach((function(n){return r.remove(n)}));o.forEach((function(n){var u=i.getDefaultSeriesViewCreator(
t.chartType())(n,t);u.autoGenerated=!0;r.push(u)}));t.seriesView(r)}))}}))}return __extends(i,t),i.getDefaultSeriesViewCreator=function(n){return f[n]},i.defaultYAxisLabelPadding=38,i})(t.Loadable.ViewModel);i.ViewModel=yi})(r=i.Chart||(i.Chart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){var r;(function(i){"use strict";var o=n,s=ko.observable,h=ko.observableArray,u,r,f,e;(function(n){n[n.Circle=1]="Circle"})(i.EntityType||(i.EntityType={}));u=i.EntityType;r=(function(){function n(n){this.entityType=n}return n})();i.Entity=r;f=(function(n){function t(t){n.call(this,u.Circle);this.accesses=t.accesses;this.location=t.location;this.cssColorClass=t.cssColorClass;this.city=t.city;this.country=t.country}return __extends(t,n),t})(r);i.Circle=f;e=(function(n){function t(t,i){n.call(this,t);this.controlType=96;o.isNullOrUndefined(
i)&&(i={});this.entities=i.entities||h();this.showMetrics=i.showMetrics||s(!0)}return __extends(t,n),t})(t.Base.ViewModel);i.ViewModel=e})(r=i.MapV2||(i.MapV2={}))})(r=i.Unsupported||(i.Unsupported={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u,f;(function(n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Small=4]="Small";n[n.Medium=5]="Medium";n[n.MediumLarge=6]="MediumLarge";n[n.Large=7]="Large"})(t.GaugeSize||(t.GaugeSize={}));u=t.GaugeSize;f=(function(n){function t(t){n.call(this,t);this.gaugeSize=i(u.Auto);this.groupInfos=r();this.itemsDataArray=r();this.itemSetting=i();this.resetItems=i(!0);this.valueInitialized=!1;this.total=i(100);this.startOffset=
i(-90);this.totalFormat=i("{0}");this.unitFormat=i("");this.infoFormat=i("");this.numberFormatOptions=i({minimumFractionDigits:0,maximumFractionDigits:1});this.hoverInfoFormat=i("{0} {1}{2}");this.selectedInfoFormat=i("{0}/{1}{2}");this.hoveredUnit=i("%");this.disableSelectOnClick=i(!1);this.showCenter=i(!0);this.noData=i(!1);this._msPortalFxRerenderTrigger=i(0);this.controlType=65}return __extends(t,n),t.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},t})(n.Loadable.ViewModel);t.ViewModel=f})(i=t.Donut||(t.Donut={}))})(t=n.Visualization||(n.Visualization={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f=(function(){function n(n){this.limit=i();this.cssClass=i();this.limit(n)}return n})(),r;t.Threshold=f;r=(function(n){function t(t){n.call(
this,t);this.value=i();this.unit=i();this.caption=i();this.footerValue=i();this.footerUnit=i();this.footerCaption=i();this.gaugeValue=i(0);this.gaugeMaxValue=i(100);this.gaugePresentationArc=i(270);this.gaugeThresholds=u();this.controlType=66}return __extends(t,n),t})(n.ViewModels.Controls.SingleSetting.ViewModel);t.ViewModel=r})(i=t.Gauge||(t.Gauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,h=ko.observableArray,c=n.Base.Internal,l=n.Helpers,ft=n.ViewModels,a=c.ObservableMap,v=ft.SelectableSet,et=l.resolve,y=l.reject,p=ko.unwrap,u=et(),e,w,b,k,d,g,ot,nt,tt,o,st,it,f,s,rt,ut;(function(n){n[n.None=0]="None";n[n.Horizontal=1]="Horizontal";n[n.Vertical=2]="Vertical"})(i.GraphScrollBars||(i.GraphScrollBars={}));e=i.GraphScrollBars,(function(n){n[n.AlwaysVisible=0]="AlwaysVisible";
n[n.AlwaysHidden=1]="AlwaysHidden";n[n.AppearWhenNodesOutsideOfTheView=2]="AppearWhenNodesOutsideOfTheView"})(i.GraphScrollBarsVisibilityMode||(i.GraphScrollBarsVisibilityMode={}));w=i.GraphScrollBarsVisibilityMode,(function(n){n[n.Blade=0]="Blade";n[n.Document=1]="Document";n[n.Document2=2]="Document2";n[n.Document3=3]="Document3"})(i.GraphEditorSkinStyle||(i.GraphEditorSkinStyle={}));b=i.GraphEditorSkinStyle,(function(n){n[n.NodeCenter=0]="NodeCenter";n[n.NodePort=1]="NodePort"})(i.EdgeConnectionStrategy||(i.EdgeConnectionStrategy={}));k=i.EdgeConnectionStrategy,(function(n){n[n.None=0]="None";n[n.MoveEntities=1]="MoveEntities";n[n.AddRemoveEntities=2]="AddRemoveEntities"})(i.GraphEditorCapabilities||(i.GraphEditorCapabilities={}));d=i.GraphEditorCapabilities,(function(n){n[n.Rebuild=0]="Rebuild";n[n.Incremental=1]="Incremental"})(i.EntityRenderMode||(i.EntityRenderMode={}));g=i.EntityRenderMode,(function(n){n[n.Normal=1]="Normal";n[n.Strong=2]="Strong"})(i.EdgeStrength||(i.EdgeStrength={}));ot=
i.EdgeStrength,(function(n){n[n.Single=1]="Single";n[n.Double=2]="Double"})(i.EdgeType||(i.EdgeType={}));nt=i.EdgeType,(function(n){n[n.Solid=1]="Solid";n[n.Dotted=2]="Dotted";n[n.Dashed=3]="Dashed"})(i.EdgeStyle||(i.EdgeStyle={}));tt=i.EdgeStyle,(function(n){n[n.None=1]="None";n[n.Arrow=2]="Arrow";n[n.Circle=3]="Circle"})(i.EdgeMarker||(i.EdgeMarker={}));o=i.EdgeMarker,(function(n){n[n.GraphNode=0]="GraphNode";n[n.GraphEdge=1]="GraphEdge"})(i.GraphEntityType||(i.GraphEntityType={}));st=i.GraphEntityType;it=(function(){function n(n,t,i,r,u){u===void 0&&(u=null);this.id=n;this.entityType=t;this.detailBlade=i;this.detailBladeInputs=r;u&&(this.extension=u)}return n})();i.SelectedGraphEntity=it;f=(function(){function t(t){t===void 0&&(t=n.getUniqueId());this.commandGroup=r("");this.selected=r(!1);this.selectable=r(!0);this.id=r(t);this.dimmed=r(!1)}return t})();i.GraphEntity=f;s=(function(n){function t(t,i){n.call(this);this.strength=r(1);this.type=r(nt.Single);this.style=r(tt.Solid);this.startMarker=r(
o.Circle);this.endMarker=r(o.Arrow);this.startNodePadding=r(7);this.endNodePadding=r(7);this.selectable(!1);this.startNodeId=r(t.id());this.endNodeId=r(i.id())}return __extends(t,n),t})(f);i.GraphEdge=s;rt=(function(n){function t(t){var i,r;(n.call(this),this.extensionViewModel=null,this.extensionTemplate="",this.detailBlade=null,this.detailBladeInputs=null,this.initialRect={x:0,y:0,height:85,width:85},i=this.initialRect,t)&&(r=undefined,t.x!==r&&(i.x=t.x),t.y!==r&&(i.y=t.y),t.height!==r&&(i.height=t.height),t.width!==r&&(i.width=t.width))}return __extends(t,n),t})(f);i.GraphNode=rt;ut=(function(n){function t(f,o){var l=this,p;o===void 0&&(o=b.Blade);n.call(this,f);this.scrollBars=r(e.Horizontal|e.Vertical);this.scrollBarsVisibilityMode=r(w.AlwaysVisible);this.edgeConnectionStrategy=r(k.NodeCenter);this.editorCapabilities=r(d.None);this.graphNodes=new a;this.edges=new a;this.gridResolution=r(10);this.widgetAttached=r(!1);this.layoutChanged=r(0);this.getLayoutNoOverlaps=r(null);this.setNodeRects=
r((function(){throw new Error("Function called before widget was initialized.");}));this.getNodeRects=r((function(n){n===void 0&&(n=[]);throw new Error("Function called before widget was initialized.");}));this.rectSelectionMode=r(!1);this.entityRenderMode=r(g.Rebuild);this.zoomToFit=r((function(){return u}));this.zoomToFitPadding=r(100);this.zoomIn=r((function(){return u}));this.zoomOut=r((function(){return u}));this.zoomTo100Percent=r((function(){return u}));this.focusOnNode=r((function(){return Q(!0)}));this.focusOnEdge=r((function(){return Q(!0)}));this.bringRectIntoView=r((function(){return Q(!0)}));this.disableMouseWheelZoom=r(!1);this.enableLineage=r(!1);this.controlType=67;this.styleSkin=o;var nt=new c.ObservableMapUnion(this.lifetimeManager,this.graphNodes,this.edges),tt=t.itemMatchesSelection,it=t.createSelection;this.selectableSet=new v(h(),tt,it);p=this.selectableSet;this.selection=new v(h(),tt,it);p.selectedItems.subscribe(f,(function(n){var t=[];n.forEach((function(n){var i=nt.lookup(n.id);i&&
t.push(i)}));l.selection.selectedItems(t)}));p.activatedItems.subscribe(f,(function(n){var t=[];n.forEach((function(n){var i=nt.lookup(n.id);i&&t.push(i)}));l.selection.activatedItems(t)}));this.addEdge=function(n){return u.then((function(){try{var i=l.graphNodes,t,u,f;if(n)if(i.lookup(n.startNodeId))if(i.lookup(n.endNodeId))u={id:r(n.startNodeId)},f={id:r(n.endNodeId)},t=new s(u,f),l.edges.put(t.id(),t);else throw"The edge end node is not present in the list of the view model graph nodes.";else throw"The edge start node is not present in the list of the view model graph nodes.";else throw"The edge is null or undefined.";}catch(e){return y(e)}}))};this.deleteEntities=function(n,t){return u.then((function(){try{i.GraphEntitiesDeletion.run(l,n,t)}catch(r){return y(r)}}))}}return __extends(t,n),t.itemMatchesSelection=function(n,t){return p(n.id)===p(t.id)},t.createSelection=function(n){return n},t})(t.Loadable.ViewModel);i.ViewModel=ut})(r=i.Graph||(i.Graph={}))})(i=t.Visualization||(t.Visualization=
{}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.Base.Internal.ObservableMap,r=(function(){function n(){}return n.run=function(n,t,r){if(t.length>0||r.length>0){var f=new i,u=new i,e=n.edges,o=n.graphNodes;t.forEach((function(t){if(n.graphNodes.lookup(t.id))u.put(t.id,t);else throw"The node "+t.id+" is not present at the graphNodes map.";}));r.forEach((function(t){if(n.edges.lookup(t.id))f.put(t.id,t);else throw"The edge "+t.id+" is not present at the edges map.";}));(f.count>0||u.count>0)&&e.modify((function(){e.toArray().forEach((function(n){var t=n.id();(u.lookup(n.startNodeId())||u.lookup(n.endNodeId()))&&f.put(t,{id:t});f.lookup(t)&&e.remove(t)}))}));u.count>0&&o.modify((function(){u.forEach((function(n){o.remove(n.id)}))}));f.dispose();u.dispose()}},n})();t.GraphEntitiesDeletion=r})(i=t.Graph||(t.Graph={}))})(i=t.Visualization||(t.
Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,l=70,a=120,v=16,y=16,e,u,p,o,s,r,h,f,c;(function(n){n[n.HexagonLayout=1]="HexagonLayout"})(t.Extensions||(t.Extensions={}));e=t.Extensions;u=(function(){function n(n,t){this.latitude=n;this.longitude=t}return n})();t.Location=u,(function(n){n[n.Solid=0]="Solid";n[n.AnimatedDashed=1]="AnimatedDashed"})(t.LinkType||(t.LinkType={}));p=t.LinkType;o=(function(){function n(){this.id="";this.location=new u(0,0);this.metadata=new r}return n})();t.Item=o,(function(n){n[n.Source=0]="Source";n[n.Target=1]="Target";n[n.IconOnly=2]="IconOnly"})(t.ItemType||(t.ItemType={}));s=t.ItemType;r=(function(){function n(){this.icon=i({type:0,data:"",palette:0});this.iconWidth=i(y);this.iconHeight=i(v)}return n})();t.ItemMetadata=r;h=(function(n){function t(){n.apply(this,arguments);this.
type=s.Target;this.text=i("");this.hasFill=i(!1);this.itemScale=i(1)}return __extends(t,n),t})(r);t.HexagonLayoutItemMetadata=h;f=(function(){function n(){}return n})();t.Events=f;c=(function(n){function t(t,r,u,o){r===void 0&&(r=i([]));u===void 0&&(u=0);o===void 0&&(o={});t&&t.createChildLifetime||(t=undefined,r=arguments[0],u=arguments[1],o=arguments[2],r===void 0&&(r=i([])),u===void 0&&(u=0),o===void 0&&(o={}));n.call(this,t);this.controlType=68;this.events=new f;this.width=i(505);this.height=i(319);this.items=r;this.extensions=u;this.extensionOptions=o;this.extensions&e.HexagonLayout&&(this.extensionOptions.hexagonLayout=$.extend(this._getDefaultOptions(),this.extensionOptions.hexagonLayout))}return __extends(t,n),t.prototype.dispose=function(){n.prototype.dispose.call(this)},t.prototype._getDefaultOptions=function(){return{showLinks:i(!1),links:i(),rows:i(l),columns:i(a)}},t})(n.Loadable.ViewModel);t.ViewModel=c})(i=t.Map||(t.Map={}))})(t=n.Visualization||(n.Visualization={}))})(t=n.Controls||
(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observable,h=ko.observableArray,f,e,u,c,o,s;(function(n){n[n.Small=0]="Small";n[n.Medium=1]="Medium";n[n.Large=2]="Large";n[n.XLarge=3]="XLarge";n[n.ExtraSmall=4]="ExtraSmall"})(i.Size||(i.Size={}));f=i.Size,(function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"})(i.Orientation||(i.Orientation={}));e=i.Orientation,(function(n){n[n.Top=1]="Top";n[n.Left=2]="Left";n[n.Right=4]="Right";n[n.Bottom=8]="Bottom"})(i.Alignment||(i.Alignment={}));u=i.Alignment,(function(n){n[n.Solid=0]="Solid";n[n.CrossHatching=1]="CrossHatching";n[n.DiagonalHatching=2]="DiagonalHatching";n[n.DottedHatching=3]="DottedHatching"})(i.HatchingPattern||(i.HatchingPattern={}));c=i.HatchingPattern;o=(function(t){function i(){t.apply(this,arguments);this.barCssClass=r("");this.showBarColor=r(!0);this.hatchingPattern=r(n.
ViewModels.Controls.Visualization.Metrics.HatchingPattern.Solid);this.unitAlignment=r(u.Right);this.captionAlignment=r(u.Top);this.hide=r(!1);this.prioritized=r(!1)}return __extends(i,t),i})(n.ViewModels.Controls.SingleSetting.ViewModel);i.SingleMetric=o;s=(function(n){function t(t){n.call(this,t);this.items=h();this.orientation=r(e.Horizontal);this.size=r(f.Large);this.visible=r(!0);this.controlType=69}return __extends(t,n),t})(t.Loadable.ViewModel);i.ViewModel=s})(r=i.Metrics||(i.Metrics={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){var r;(function(i){"use strict";var o=n.Base.Diagnostics,u=new o.Log("MsPortalFx/ViewModels/Controls/ProgressBar"),f=ko.observable,r,e;(function(n){n[n.InProgress=0]="InProgress";n[n.Error=1]="Error";n[n.Warning=2]="Warning";n[n.Success=3]="Success";n[n.Indeterminate=4]="Indeterminate";n[n.
IndeterminateVertical=5]="IndeterminateVertical"})(i.StatusType||(i.StatusType={}));r=i.StatusType;e=(function(n){function t(t){var i=this;n.call(this,t);this.valuePercentage=f(0);this.status=f(r.InProgress);this.controlType=71;this.valuePercentage.subscribe(t,(function(n){i.status()!==r.Indeterminate&&((isNaN(n)||n===null)&&u.error("View model valuePercentage is "+n+" which is not number."),(n>100||n<0)&&u.error("View model valuePercentage is "+n+" which is not between 0 to 100."))}))}return __extends(t,n),t})(t.Loadable.ViewModel);i.ViewModel=e})(r=i.ProgressBar||(i.ProgressBar={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u,f;(function(n){n[n.Triangle=0]="Triangle";n[n.Circle=1]="Circle"})(t.ErrorWarningShape||(t.ErrorWarningShape={}));r=t.ErrorWarningShape,(function(
n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Small=4]="Small";n[n.Medium=5]="Medium";n[n.MediumLarge=6]="MediumLarge";n[n.Large=7]="Large"})(t.GaugeSize||(t.GaugeSize={}));u=t.GaugeSize;f=(function(n){function t(t){n.call(this,t);this.errorWarningShape=i(r.Triangle);this.gaugeSize=i(u.Auto);this.instance=i(55);this.instanceQuota=i(65);this.total=i(75);this.totalQuota=i(80);this.totalCaption=i("total is {2}");this.showCenter=i(!0);this.omitTotal=i(!1);this.noQuota=i(!1);this.maximum=i(100);this.startOffset=i(-90);this.unit=i("%");this.valueDisplayFormat=i("{0}");this.hideTick=i(!1);this.controlType=72}return __extends(t,n),t})(n.Loadable.ViewModel);t.ViewModel=f})(i=t.QuotaGauge||(t.QuotaGauge={}))})(t=n.Visualization||(n.Visualization={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(
t){var i;(function(i){var r;(function(i){"use strict";var r=ko.observableArray,u=n.shallowCopyFromObject,f=0,o=(function(){function n(n){var n=$.extend(this._getDefaultOptions(),n);this._initOptions(n)}return n.prototype._getDefaultOptions=function(){return{name:String(f=f+1&65535),values:r()}},n.prototype._initOptions=function(n){var t=this,i=n;u(t,i,["name","values","viewOptions"])},n})(),e;i.Series=o;e=(function(n){function t(t,i){n.call(this,t);this.controlType=97;var i=$.extend(this._getDefaultOptions(),i);this._initOptions(i)}return __extends(t,n),t.prototype._getDefaultOptions=function(){return{series:r()}},t.prototype._initOptions=function(n){var t=this,i=n;u(t,i,["series","xAxis","yAxis","chartType","viewOptions","metricsRules","legendPosition"])},t})(t.Loadable.ViewModel);i.ViewModel=e})(r=i.SimpleChart||(i.SimpleChart={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var
t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Icon=4]="Icon";n[n.Tiny=5]="Tiny";n[n.Small=6]="Small";n[n.Medium=7]="Medium";n[n.MediumLarge=8]="MediumLarge";n[n.Large=9]="Large"})(t.GaugeSize||(t.GaugeSize={}));r=t.GaugeSize;u=(function(n){function t(t){n.call(this,t);this.gaugeSize=i(r.Auto);this.hideTick=i(!0);this.maximum=i(100);this.startOffset=i(-90);this.unit=i("");this.current=i(55);this.captionDisplayFormat=i("");this.valueDisplayFormat=i("{0}");this.controlType=73}return __extends(t,n),t})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.SingleValueGauge||(t.SingleValueGauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(
t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r,u;(function(n){n[n.Auto=0]="Auto";n[n.CenterOnlySmall=1]="CenterOnlySmall";n[n.CenterOnlyMedium=2]="CenterOnlyMedium";n[n.CenterOnlyLarge=3]="CenterOnlyLarge";n[n.Small=4]="Small";n[n.Medium=5]="Medium";n[n.MediumLarge=6]="MediumLarge";n[n.Large=7]="Large"})(t.GaugeSize||(t.GaugeSize={}));r=t.GaugeSize;u=(function(n){function t(t){n.call(this,t);this.gaugeSize=i(r.Auto);this.step=i(1);this.maximum=i(8);this.startOffset=i(-90);this.current=i(1);this.centerDisplayFormat=i("{0}");this.captionDisplayFormat=i("");this.controlType=74}return __extends(t,n),t})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=u})(i=t.StepGauge||(t.StepGauge={}))})(i=t.Visualization||(t.Visualization={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var e=FxImpl.Extension,i=ko.observable,
u=n.Resources.Strings,o=412,f,r,s;(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(f||(f={}));t.Type=f;r=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})();t.Status=r;s=(function(){function n(n){var t=this,f,s;this.downloadStatus=i();f=n.addDefaultAuthorizationToken;f&&(this.authorizationOptions={resourceName:f!==!0?n.addDefaultAuthorizationToken.resourceName:""});this.authorizationToken=n.authorizationToken||i("");this.downloadType=n.downloadType||i(1);this.headers=n.headers||i({});this.httpMethod=n.httpMethod||i("GET");this.httpRequestContent=n.httpRequestContent||i("");this.httpRequestContentType=n.httpRequestContentType||i("application/json");this.targetFileName=n.targetFileName||i("");this.targetUri=n.targetUri||i("");this.errorMessage=n.errorMessage||i("");this.targetUriCallback=n.targetUriCallback;this.showUriCallbackConfirmationDialog=n.showUriCallbackConfirmationDialog;this.uriCallbackConfirmationDialogOptions=n.uriCallbackConfirmationDialogOptions;
this.showDownloadProgressDialog=n.showDownloadProgressDialog||i(!1);this.downloadProgressDialogOptions=n.downloadProgressDialogOptions;this.onStart=n.onStart;this.onEnd=n.onEnd;this.authorizationOptions&&(s={resourceName:this.authorizationOptions.resourceName||"",cloudName:e.selfCloudName},e.getRuntime().getAuthorizationToken(s).then((function(n){n&&n.header?t.authorizationToken(n.header):t.downloadStatus(new r(u.FileDownloadCommand.fileDownloadErrorStatus,o,u.FileDownloadCommand.authTokenNotAvailable))}),(function(n){t.downloadStatus(new r(u.FileDownloadCommand.fileDownloadErrorStatus,o,n))})))}return n})();t.Context=s})(i=t.FileDownload||(t.FileDownload={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n.Resources.Strings.FileDownload,r=ko.observable,f=(function(t){function i(i,f){i&&i.createChildLifetime||(i=undefined,f=arguments[0]);t.call(this,i);
this.controlType=82;this.type=n.ViewModels.Toolbars.ToolbarItemType.FileDownloadButton;this.context=f.context;this.label=f.label||r("");this.disabled=f.disabled||r(!1);this.unauthorizedMessage=f.unauthorizedMessage||r(u.unauthorizedText);this.asLink=f.asLink}return __extends(i,t),i.prototype.unauthorized=function(n){this.unauthorizedMessage(n||u.unauthorizedText);this.disabled(!0)},i})(t.Loadable.ViewModel);i.ViewModel=f})(i=t.FileDownloadButton||(t.FileDownloadButton={}))})(i=t.Controls||(t.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";var r,u,i;(function(n){n[n.PlayReady=0]="PlayReady";n[n.Widevine=1]="Widevine";n[n.AES=2]="AES"})(t.ProtectionType||(t.ProtectionType={}));r=t.ProtectionType,(function(n){n[n.Smooth=0]="Smooth";n[n.Dash=1]="Dash";n[n.HLS=2]="HLS";n[n.ProgressiveMP4=3]="ProgressiveMP4"})(t.StreamingFormatMimeType||(t.StreamingFormatMimeType=
{}));u=t.StreamingFormatMimeType;i=(function(n){function t(t,i){n.call(this,t);this.controlType=109;i=i||{source:{url:""}};this.autoplay=i.autoplay||!1;this.controls=i.controls||!0;this.poster=i.poster||"";this.logo=i.logo||{enabled:!1};this.source=i.source}return __extends(t,n),t})(n.Base.ViewModel);t.ViewModel=i})(i=t.AzureMediaPlayer||(t.AzureMediaPlayer={}))})(t=n.Unsupported||(n.Unsupported={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t;(function(t){var i;(function(t){var i=MsPortalFx.ViewModels.Controls.HotSpot.BaseViewModel,r=n.Composition.Selectable,u=(function(n){function t(t,i,u){n.call(this,t);i&&(this.selectable=new r.Selectable2(i));this.clickableDuringCustomize=!!u}return __extends(t,n),t})(i);t.ViewModel2=u})(i=t.HotSpot||(t.HotSpot={}))})(t=n.Controls||(n.Controls={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var r=ko.computed,i=ko.observable,f=ko.observableArray,
e=ko.utils.arrayPushAll,u=(function(t){function u(u,o,s,h,c,l){var a=this;l===void 0&&(l=null);t.call(this,u);this.enableValidation=i(!1);this.valid=i(!0);this.validate=i(0);this.label=i();this.labelPosition=i();this.validations=f();this.delayValidationTimeout=i(n.ViewModels.Controls.ValidatableControl.DefaultDelayValidationTimeout);this.enabled=i(!0);this.infoBalloonContent=i(c);this.initialValue=r((function(){var n=o.getOriginalObservable();return n?n():l}));this.value=r({read:function(){var n=o.getEditableObservable();return n?n():l},write:function(n){var t=o.getEditableObservable();if(t)t(n);else throw new Error("Form should not allow edits until an EditScope is loaded.");}});this.label(s);this.labelPosition(n.ViewModels.Forms.LabelPosition.Top);h&&e(this.validations,h);c&&(this.infoBalloonContent=i(c));this.dirty=ko.observable(!1);r(this.lifetimeManager,(function(){a.setDirty(a.value()!==a.initialValue())}));this._enableValidationReactor=r((function(){a.enableValidation(!!(o.getOriginalObservable(
)&&o.getEditableObservable()))}));this.performValidation=i(null);this.ensureValidation=i(0);this._msPortalFxClearValidation=i();this._msPortalFxTriggerValidation=i()}return __extends(u,t),u.prototype.dispose=function(){this.initialValue&&this.initialValue.dispose();this.value&&this.value.dispose();var n=this._enableValidationReactor;n&&(n.dispose(),this._enableValidationReactor=null);t.prototype.dispose.call(this)},u.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();if(n)return n();Q()},u.prototype.triggerValidation=function(){var t=this._msPortalFxTriggerValidation,n,i;return t()?t()():(n=Q.defer(),i=t.subscribe(this.lifetimeManager,(function(t){t().then(n.resolve).catch(n.reject).finally((function(){return i.dispose()}))})),n.promise)},u.prototype.setDirty=function(n){try{this.dirty(n)}catch(t){}},u})(n.ViewModels.Controls.Loadable.ViewModel),o,s,h,c,l,a;t.Field=u;o=(function(n){function t(t,i,u,f,e){var o=this;n.call(this,t,i,u,f,e);this.empty=r((function(){return!o.
value()}))}return __extends(t,n),t.prototype.dispose=function(){this.empty&&this.empty.dispose();n.prototype.dispose.call(this)},t})(u);t.NullableField=o;s=(function(n){function t(t,r,u,f,e){n.call(this,t,r,u,f,e);this.editing=i(!1)}return __extends(t,n),t})(o);t.EditableField=s;h=(function(n){function t(t,i,r,u,o,s){n.call(this,t,i,r,o,s,u.length===0||u[0].options().length===0?undefined:u[0].options()[0].value);this.groups=f();e(this.groups,u)}return __extends(t,n),t})(u);t.GroupsField=h;c=(function(n){function t(t,i,r,u,o,s){if(u.length===0)throw new Error("'values' array must contain one or more FormOption values.");n.call(this,t,i,r,o,s,u[0].value);this.options=f();e(this.options,u)}return __extends(t,n),t})(u);t.OptionsField=c;l=(function(n){function t(t,r,u,f,e,o,s,h,c,l){r===void 0&&(r=null);u===void 0&&(u=null);f===void 0&&(f=0);e===void 0&&(e=10);o===void 0&&(o=[]);s===void 0&&(s=!1);h===void 0&&(h=null);c===void 0&&(c=null);l===void 0&&(l=1);n.call(this,t,r,u,o,h,c);this.showStepMarkers=
i(s);this.min=i(f);this.max=i(e);this.step=i(l)}return __extends(t,n),t})(u);t.SliderBaseField=l;a=(function(t){function r(r,u,f,e,o){t.call(this,r,u,f,e,o);this.editing=i(!1);this.valueUpdateTrigger=n.ViewModels.Controls.ValueUpdateTrigger.Default}return __extends(r,t),r})(s);t.TypableField=a})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var u=n.ViewModels.Controls.Forms.EditableCombo,i=ko.observable,r=(function(n){function t(t,r,u,f,e,o){n.call(this,t,r,u,f,o);this.dropDownWidth=i(1);this.emptyValueText=i(e);this.popupAlignment=3;this.inputAlignment=10}return __extends(t,n),t})(t.EditableField);t.EditableComboField=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var i=ko.observable,t=ko.isObservable,r=(function(){function n(n,r){this.text=t(n)?n:i(n);this.value=t(r)?r():r}return n})(),u;n.Option=r;u=(function(n){function r(r,u,f){n.call(this,r,u);
f!==undefined&&(this.disabled=t(f)?f:i(f))}return __extends(r,n),r})(r);n.DisablableOption=u})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r,u,f){n.call(this,i,r,u);f!==undefined&&(this.selected=ko.isObservable(f)?f:t(f))}return __extends(i,n),i})(n.DisablableOption);n.SelectableOption=i})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Invalid=0]="Invalid";n[n.Section=1]="Section";n[n.TextBox=2]="TextBox";n[n.DropDown=3]="DropDown";n[n.OptionsGroup=4]="OptionsGroup";n[n.Password=5]="Password";n[n.Slider=6]="Slider";n[n.CheckBox=7]="CheckBox";n[n.MultiselectDropDown=8]="MultiselectDropDown";n[n.RangeSlider=9]="RangeSlider";n[n.NumericTextBox=10]="NumericTextBox";n[n.Selector=11]="Selector";n[n.FilterCombo=12]="FilterCombo";
n[n.MultiLineTextBox=13]="MultiLineTextBox";n[n.DateTimeCombo=14]="DateTimeCombo";n[n.DynamicSection=15]="DynamicSection";n[n.Attachment=16]="Attachment";n[n.StringList=17]="StringList";n[n.HtmlEditor=18]="HtmlEditor";n[n.History=19]="History";n[n.ArtifactLinks=20]="ArtifactLinks";n[n.Splitter=21]="Splitter";n[n.TriStateCheckBox=22]="TriStateCheckBox";n[n.CustomHtml=23]="CustomHtml";n[n.TimePicker=24]="TimePicker";n[n.DatePicker=25]="DatePicker";n[n.DateTimePicker=26]="DateTimePicker";n[n.DateTimeRangePicker=27]="DateTimeRangePicker";n[n.FileUpload=28]="FileUpload";n[n.OAuthButton=29]="OAuthButton";n[n.TokenComboBox=30]="TokenComboBox";n[n.QueryBuilder=31]="QueryBuilder";n[n.DockedBalloon=32]="DockedBalloon";n[n.DiffEditor=33]="DiffEditor";n[n.DiffList=34]="DiffList";n[n.DiffView=35]="DiffView";n[n.DiscussionTimeline=36]="DiscussionTimeline";n[n.Editor=37]="Editor";n[n.Button=38]="Button";n[n.pcCheckBox=39]="pcCheckBox";n[n.CopyableLabel=40]="CopyableLabel";n[n.pcDateTimeCombo=41]="pcDateTimeCombo";
n[n.pcDropDown=42]="pcDropDown";n[n.pcFilterCombo=43]="pcFilterCombo";n[n.pcGroupDropDown=44]="pcGroupDropDown";n[n.pcMultiLineTextBox=45]="pcMultiLineTextBox";n[n.pcMultiselectDropDown=46]="pcMultiselectDropDown";n[n.pcNumericTextBox=47]="pcNumericTextBox";n[n.pcOptionPicker=48]="pcOptionPicker";n[n.pcPassword=49]="pcPassword";n[n.pcRangeSlider=50]="pcRangeSlider";n[n.pcSelector=51]="pcSelector";n[n.pcSlider=52]="pcSlider";n[n.pcTextBox=53]="pcTextBox";n[n.pcGrid=54]="pcGrid";n[n.Gallery=55]="Gallery";n[n.pcListView=56]="pcListView";n[n.pcTreeView=57]="pcTreeView";n[n.LogStream=58]="LogStream";n[n.Scrollbar=59]="Scrollbar";n[n.Settings=60]="Settings";n[n.SingleSetting=61]="SingleSetting";n[n.Toolbar=62]="Toolbar";n[n.Chart=63]="Chart";n[n.CsmTopology=64]="CsmTopology";n[n.Donut=65]="Donut";n[n.Gauge=66]="Gauge";n[n.Graph=67]="Graph";n[n.Map=68]="Map";n[n.Metrics=69]="Metrics";n[n.PairedTimeline=70]="PairedTimeline";n[n.ProgressBar=71]="ProgressBar";n[n.QuotaGauge=72]="QuotaGauge";n[n.
SingleValueGauge=73]="SingleValueGauge";n[n.StepGauge=74]="StepGauge";n[n.Console=75]="Console";n[n.DeleteAssetConfirmation=76]="DeleteAssetConfirmation";n[n.HeroBanner=77]="HeroBanner";n[n.InfoBox=78]="InfoBox";n[n.Notice=79]="Notice";n[n.Picker=80]="Picker";n[n.FileUploadWidget=81]="FileUploadWidget";n[n.FileDownloadButton=82]="FileDownloadButton";n[n.CreatorAndSelector=83]="CreatorAndSelector";n[n.HotSpot=84]="HotSpot";n[n.CreatorAndSelectorV2=85]="CreatorAndSelectorV2";n[n.RangeSelection=86]="RangeSelection";n[n.LinkInfoBox=87]="LinkInfoBox";n[n.LinkHotSpot=88]="LinkHotSpot";n[n.PreviewTag=89]="PreviewTag";n[n.ConsoleV2=90]="ConsoleV2";n[n.CustomValueSlider=91]="CustomValueSlider";n[n.DayPicker=92]="DayPicker";n[n.SearchBox=93]="SearchBox";n[n.PairedTimelineBadges=94]="PairedTimelineBadges";n[n.SpecComparisonTable=95]="SpecComparisonTable";n[n.MapV2=96]="MapV2";n[n.SimpleChart=97]="SimpleChart";n[n.GroupDropDown=98]="GroupDropDown";n[n.DurationPicker=99]="DurationPicker";n[n.SimpleButton=
100]="SimpleButton";n[n.TextBlock=101]="TextBlock";n[n.TerminalEmulator=102]="TerminalEmulator";n[n.Grid2=103]="Grid2";n[n.List2=104]="List2";n[n.Tree2=105]="Tree2";n[n.AsyncFileUpload=106]="AsyncFileUpload";n[n.Wizard=107]="Wizard";n[n.IFrame=108]="IFrame";n[n.MediaPlayer=109]="MediaPlayer";n[n.Markdown=110]="Markdown";n[n.CustomRangeSlider=111]="CustomRangeSlider";n[n.PartPinner=112]="PartPinner";n[n.IFrameV2=113]="IFrameV2";n[n.ResourceFilter=114]="ResourceFilter";n[n.Menu=115]="Menu";n[n.Video=116]="Video";n[n.CustomControl=117]="CustomControl";n[n.Legend=118]="Legend";n[n.HeatMap=119]="HeatMap";n[n.Essentials=120]="Essentials";n[n.IntuneAppFileUpload=121]="IntuneAppFileUpload"})(t||(t={}));n.ControlType=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";(function(n){n[n.Invalid=0]="Invalid";n[n.Required=1]="Required";n[n.RegExMatch=2]="RegExMatch";n[n.NotRegExMatch=3]="NotRegExMatch";n[n.Contains=4]="Contains";n[n.NotContains=
5]="NotContains";n[n.ContainsCharacters=6]="ContainsCharacters";n[n.NotContainsCharacters=7]="NotContainsCharacters";n[n.HasDigit=8]="HasDigit";n[n.HasLetter=9]="HasLetter";n[n.HasUpperCaseLetter=10]="HasUpperCaseLetter";n[n.HasLowerCaseLetter=11]="HasLowerCaseLetter";n[n.HasPunctuation=12]="HasPunctuation";n[n.Equals=13]="Equals";n[n.LengthRange=14]="LengthRange";n[n.MinLength=15]="MinLength";n[n.MaxLength=16]="MaxLength";n[n.Numeric=17]="Numeric";n[n.Range=18]="Range";n[n.MinValue=19]="MinValue";n[n.MaxValue=20]="MaxValue";n[n.Custom=21]="Custom";n[n.CaseInsensitiveComparison=22]="CaseInsensitiveComparison";n[n.LocaleAwareCaseInsensitiveComparison=23]="LocaleAwareCaseInsensitiveComparison";n[n.Uri=24]="Uri"})(n.FormValidationType||(n.FormValidationType={}));var t=n.FormValidationType})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function t(n){var t=typeof n!="string";return t&&(n=undefined),{valid:t,message:n}}function i(
n){return Q(t(n))}n.getValidationResult=t;n.getValidationResultPromise=i;var r=(function(){function n(n){this.type=n}return n})();n.Validation=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(i,r){n.call(this,i);this.message=r;this.isEmptyValid=t(!1)}return __extends(i,n),i})(n.Validation);n.StaticMessageValidation=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.CaseInsensitiveComparison,r);this.compareTo=i}return __extends(i,t),i})(n.StaticMessageValidation);n.CaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.ContainsCharacters,r);this.characters=i}return __extends(i,t),i})(n.StaticMessageValidation);
n.ContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Contains,r);this.searchString=i}return __extends(i,t),i})(n.StaticMessageValidation);n.ContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Custom);this.message=i;this.validate=r}return __extends(i,t),i})(n.Validation);n.CustomValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Equals,r);this.compareTo=i}return __extends(i,t),i})(n.StaticMessageValidation);n.EqualsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t)
{function i(i){t.call(this,n.FormValidationType.HasDigit,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasDigitValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasLetter,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasLowerCaseLetter,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasLowerCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasPunctuation,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasPunctuationValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||
(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.HasUpperCaseLetter,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.HasUpperCaseLetterValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.Invalid,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.InvalidValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r,u){t.call(this,n.FormValidationType.LengthRange,u);this.min=i;this.max=r}return __extends(i,t),i})(n.StaticMessageValidation);n.LengthRangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.LocaleAwareCaseInsensitiveComparison,
r);this.compareTo=i}return __extends(i,t),i})(n.StaticMessageValidation);n.LocaleAwareCaseInsensitiveComparisonValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MaxLength,r);this.max=i}return __extends(i,t),i})(n.StaticMessageValidation);n.MaxLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MaxValue,r);this.max=i}return __extends(i,t),i})(n.StaticMessageValidation);n.MaxValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MinLength,r);this.min=i}return __extends(i,t),i})(n.StaticMessageValidation);n.MinLengthValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||
(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.MinValue,r);this.min=i}return __extends(i,t),i})(n.StaticMessageValidation);n.MinValueValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.NotContainsCharacters,r);this.characters=i}return __extends(i,t),i})(n.StaticMessageValidation);n.NotContainsCharactersValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.NotContains,r);this.searchString=i}return __extends(i,t),i})(n.StaticMessageValidation);n.NotContainsValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.
NotRegExMatch,r);this.pattern=i}return __extends(i,t),i})(n.StaticMessageValidation);n.NotRegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.Numeric,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.NumericValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r,u){t.call(this,n.FormValidationType.Range,u);this.min=i;this.max=r}return __extends(i,t),i})(n.StaticMessageValidation);n.RangeValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.RegExMatch,r);this.pattern=i}return __extends(i,t),i})(n.StaticMessageValidation);n.RegExMatchValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i){t.call(this,n.FormValidationType.Required,i)}return __extends(i,t),i})(n.StaticMessageValidation);n.RequiredValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=(function(t){function i(i,r){t.call(this,n.FormValidationType.Uri,i);this.options=r||{}}return __extends(i,t),i})(n.StaticMessageValidation);n.UriValidation=t})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){var t,i,u,f,e,o,s,h,c,l,a,v,y,r,p,w,b,k,d;(function(n){n[n.Html=1]="Html";n[n.Text=2]="Text";n[n.Uri=107]="Uri";n[n.Icon=108]="Icon";n[n.IconLookup=109]="IconLookup";n[n.TextLookup=110]="TextLookup";n[n.SvgIcon=111]="SvgIcon";n[n.SvgIconLookup=112]="SvgIconLookup";n[n.Date=113]="Date";n[n.Number=114]="Number";n[n.HtmlTemplate=1e3]="HtmlTemplate";
n[n.CheckBox=1001]="CheckBox";n[n.TextBox=1002]="TextBox";n[n.MultiselectDropDown=1003]="MultiselectDropDown";n[n.CheckBoxRowSelection=1004]="CheckBoxRowSelection";n[n.DropDown=1005]="DropDown"})(n.FormatType||(n.FormatType={}));t=n.FormatType;i=(function(){function n(n){this.type=n}return n})();n.BaseFormat=i;u=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.Html)}return __extends(i,n),i})(i);n.Html=u;f=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.Text)}return __extends(i,n),i})(i);n.Text=f;e=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.Date);this.dateFormat=i.dateFormat}return __extends(i,n),i})(i);n.Date=e;o=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.Number);this.numberFormat=i.numberFormat}return __extends(i,n),i})(i);n.Number=o;s=(function(n){function i(){n.call(this,t.Uri)}return __extends(i,n),i})(i);n.Uri=s;h=(function(n){function i(){n.call(this,t.Icon)}return __extends(i,n),i})(i);n.Icon=h;c=(function(n){function i(i){i===void 0&&(i=
{});n.call(this,t.IconLookup);this.iconLookup=i.iconLookup}return __extends(i,n),i})(i);n.IconLookup=c;l=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.TextLookup);this.textLookup=i.textLookup}return __extends(i,n),i})(i);n.TextLookup=l;a=(function(n){function i(i){n.call(this,t.SvgIcon);i&&(this.height=i.height,this.width=i.width)}return __extends(i,n),i})(i);n.SvgIcon=a;v=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.SvgIconLookup);this.svgIconLookup=i.svgIconLookup;this.height=i.height;this.width=i.width}return __extends(i,n),i})(i);n.SvgIconLookup=v;y=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.HtmlTemplate);this.template=i.template}return __extends(i,n),i})(i);n.HtmlTemplate=y;r=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t);this.label=i.label;this.validations=i.validations;this.validate=i.validate;this.infoBalloonContent=i.infoBalloonContent}return __extends(t,n),t})(i);n.FieldFormat=r;p=(function(n){function i(i){i===void 0&&(i={});
n.call(this,t.CheckBox,i)}return __extends(i,n),i})(r);n.CheckBox=p;w=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.TextBox,i);this.emptyValueText=i.emptyValueText}return __extends(i,n),i})(r);n.TextBox=w;b=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.MultiselectDropDown,i);this.displaySeparator=i.displaySeparator;this.groups=i.groups;this.maxSelectAllowed=i.maxSelectAllowed;this.multiItemsDisplayFormat=i.multiItemsDisplayFormat;this.multiItemsMaxDisplayFormat=i.multiItemsMaxDisplayFormat;this.multiselect=i.multiselect;this.valueSeparator=i.valueSeparator}return __extends(i,n),i})(r);n.MultiselectDropDown=b;k=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.CheckBoxRowSelection,i)}return __extends(i,n),i})(r);n.CheckBoxRowSelection=k;d=(function(n){function i(i){i===void 0&&(i={});n.call(this,t.DropDown,i);this.options=i.options}return __extends(i,n),i})(r);n.DropDown=d})(t=n.Formatters||(n.Formatters={}))})(t=n.Grid2||(n.Grid2={}))})(t=n.Lists||(n.Lists=
{}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var i=MsPortalFx.ViewModels.Internal.Selection2.SelectableSet,r=MsPortalFx.initValue,u=(function(n){function t(t,i){n.call(this,t,i);this.enabled=r(i.enabled,!0)}return __extends(t,n),t})(i),t;n.SelectionViewModel=u;t=(function(n){function t(t,i){i===void 0&&(i={});n.call(this,t,i);this.dataNavigator=i.dataNavigator;this.loading=ko.observable(!1)}return __extends(t,n),t})(MsPortalFx.ViewModels.Controls.Loadable.ViewModel);n.ViewModel=t})(t=n.Base||(n.Base={}))})(t=n.Lists||(n.Lists={}))})(t=n.Controls||(n.Controls={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function p(n,t,i){return FxImpl.FileUpload.getUploadInfos(n,t,i)}function w(n,t,i){return FxImpl.FileUpload.getResumableUploadInfos(n,t,i)}function b(n,t,i){return FxImpl.
FileUpload.getAsyncUploadTasks(n,t,i)}function k(n,t,i){return FxImpl.FileUpload.invokeUploadAction(n,t,i)}function d(n,t,i){return FxImpl.FileUpload.getNextChunk(n,t,i)}var i=ko.observable,r,f,e,o,s,u,h,c,l,a,v,y;t.defaultFullFileUploadMaxSize=2097152;t.defaultFullFileUploadChunkSize=t.defaultFullFileUploadMaxSize;t.defaultStreamFileUploadMaxSize=10737418240;t.defaultStreamFileUploadChunkSize=1048576;t.defaultBlobStoreUploadMaxSize=53687091200;t.defaultBlobStoreUploadChunkSize=t.defaultFullFileUploadMaxSize;t.pageBlobPageSize=512;t.defaultResumableTrackingChunkSize=t.defaultBlobStoreUploadChunkSize*4;r=n.Resources.Strings.FileUpload,(function(n){n[n.Full=0]="Full";n[n.Stream=1]="Stream";n[n.BlockBlobStore=2]="BlockBlobStore";n[n.PageBlobStore=3]="PageBlobStore";n[n.AppendBlobStore=4]="AppendBlobStore";n[n.FileService=5]="FileService"})(f||(f={}));t.UploadType=f,(function(n){n[n.Default=0]="Default";n[n.Text=1]="Text";n[n.ArrayBuffer=2]="ArrayBuffer";n[n.DataUri=3]="DataUri"})(e||(e={}));t.
ContentType=e,(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete";n[n.Canceled=5]="Canceled";n[n.Aborted=6]="Aborted"})(o||(o={}));t.UploadStatus=o,(function(n){n[n.None=0]="None";n[n.Pause=1]="Pause";n[n.Resume=2]="Resume";n[n.Cancel=3]="Cancel";n[n.Dispose=4]="Dispose";n[n.AddUploadTasks=5]="AddUploadTasks";n[n.ResetUploadTasks=6]="ResetUploadTasks";n[n.Complete=7]="Complete";n[n.Abort=8]="Abort";n[n.GetNextChunk=9]="GetNextChunk"})(t.ObsoleteUploadAction||(t.ObsoleteUploadAction={}));s=t.ObsoleteUploadAction;t.UploadAction=s;t.getUploadInfos=p;t.getResumableUploadInfos=w;t.getAsyncUploadTasks=b;t.invokeUploadAction=k;t.getNextChunk=d;u=(function(){function n(){this.type=0;this.contentType=0;this.encoding=null;this.maxFileSize=t.defaultFullFileUploadMaxSize;this.chunkSize=t.defaultFullFileUploadChunkSize;this.category=null;this.uploadTarget=null;this.notificationBlade=null;this.resumable=!1;this.disableNotifications=
!1}return n})();t.FullFileUploadContext=u;h=(function(n){function i(){n.call(this);this.type=1;this.maxFileSize=t.defaultStreamFileUploadMaxSize;this.chunkSize=t.defaultStreamFileUploadChunkSize}return __extends(i,n),i})(u);t.StreamFileUploadContext=h;c=(function(n){function r(){n.call(this);this.sasUriCommand=i();this.type=2;this.maxFileSize=t.defaultBlobStoreUploadMaxSize;this.chunkSize=t.defaultBlobStoreUploadChunkSize;this.context=i();this.addFilenameToSasUri=i(!1);this.useDefaultFileInfoContext=i(!0)}return __extends(r,n),r})(u);t.BlobStoreFileUploadContext=c;l=(function(){function n(){this.uploadResult=i(null);this._msPortalFxUploadAction=i(0);this._msPortalFxActionTrigger=i(0)}return n.prototype.resume=function(){this._msPortalFxUploadAction(2);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.pause=function(){this._msPortalFxUploadAction(1);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.cancel=function(){this._msPortalFxUploadAction(
3);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n.prototype.dispose=function(){this._msPortalFxUploadAction(4);this._msPortalFxActionTrigger(this._msPortalFxActionTrigger.peek()+1)},n})();t.UploadTask=l;a=(function(){function n(n){this.uploadInfo=n}return n.prototype.resume=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},2,n)},n.prototype.pause=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},1)},n.prototype.cancel=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},3)},n.prototype.complete=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:n.id(),name:n.name},7)},n.prototype.abort=function(n){var t=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction({id:t.id(),name:t.name},8,n)},n.prototype.dispose=function(){var n=this.uploadInfo;return FxImpl.FileUpload.invokeUploadAction(
{id:n.id(),name:n.name},4)},n.prototype.getNextChunk=function(n,t){var i=this.uploadInfo;if(i.type()!==1)throw new Error(r.notSupported);return FxImpl.FileUpload.getNextChunk({id:i.id(),name:i.name},n,t)},n})();t.AsyncUploadTask=a;v=(function(){function n(n,t,r){this.uploadInfo=n;this._msPortalFxActionCallback=i(t);this._msPortalFxGetNextChunkCallback=i(r)}return n.prototype.resume=function(n){return this._invoke(2,n)},n.prototype.pause=function(){return this._invoke(1)},n.prototype.cancel=function(){return this._invoke(3)},n.prototype.complete=function(){return this._invoke(7)},n.prototype.abort=function(n){return this._invoke(8,n)},n.prototype.dispose=function(){return this._invoke(4)},n.prototype.getNextChunk=function(n,t){if(this._msPortalFxGetNextChunkCallback()){var i=this.uploadInfo;return this._msPortalFxGetNextChunkCallback()({id:i.id(),name:i.name},n,t)}return Q.reject(r.notReady)},n.prototype._invoke=function(n,t){if(this._msPortalFxActionCallback()){var i=this.uploadInfo;return this.
_msPortalFxActionCallback()([{id:i.id(),name:i.name}],n,t)}return Q.reject(r.notReady)},n})();t.AsyncUploadWidgetTask=v;y=(function(){function n(n){this.id=n.id;this.name=n.name;this.mimetype=n.mimetype;this.size=n.size;this.valid=i(!0)}return n})();t.SelectedFile=y})(i=t.FileUpload||(t.FileUpload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function e(n,r,u){var f=u?{uploadKey:n,action:r,context:u}:{uploadKey:n,action:r};return t.uploadActionEndPoint.invoke(i.client,"fx",f)}function u(n,t,u){var f=Q.defer();return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u}).then((function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)})),f.promise}function o(n,t,u){var f=Q.defer();return i.client.acquireObject(r,"fx",{uploadKeys:t,category:u,resumable:!0}).then((function(t){n.registerForDispose(t);var i=t.getValue();f.resolve(i.uploads)})),f.promise}function s(n,t,i){var r=Q.defer();return u(n,t,i).then((function(
n){var t=[];n&&n.length>0&&(t=n.map((function(n){return new f.AsyncUploadTask(n)})));r.resolve(t)})),r.promise}function h(t,i,r){var u;return(i!==undefined||r!==undefined)&&(u={startByte:i,chunkSize:r}),n.FileUpload.invokeUploadAction(t,9,u)}var f=MsPortalFx.ViewModels.FileUpload,i=MsPortalFx.Base.Rpc.Internal,r="FxImpl.FileUpload.getUploadInfos";t.getUploadInfosEndPoint=new i.ProxiedObjectTypeDefinition(r);t.uploadActionEndPoint=new i.ActionEndPointDefinition("FxImpl.FileUpload.uploadActionMethodName");t.invokeUploadAction=e;t.getUploadInfos=u;t.getResumableUploadInfos=o;t.getAsyncUploadTasks=s;t.getNextChunk=h})(t=n.FileUpload||(n.FileUpload={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var r=n.ViewModels.Controls.FileDownload,e=ko.observable,o=n.Resources.Strings.FileDownloadCommand,i,u,f;(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(i||(i={}));t.Type=i;u=(function(n){function t(t,i,r){n.call(this,t,i,r)}return __extends(t,n),t})(r.Status);
t.Status=u;f=(function(n){function t(t){n.call(this,t)}return __extends(t,n),t})(r.Context);t.Context=f})(i=t.FileDownload||(t.FileDownload={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=7;this.inlineLabel=this._options.inlineLabel||!1}return __extends(t,n),t})(n.Base.Input.ViewModel);t.ViewModel=i})(t=n.CheckBox||(n.CheckBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.initObservable,f=(function(n){function t(t,i){n.call(this,t,i);this.controlType=23;this.htmlTemplate=u(i.htmlTemplate);this.innerViewModel=i.innerViewModel;this.isolated=i.isolated!==!1;this.validate=r(0);this.valid=r(!0);this.dirty=r(!1);this.loading=r(!1);this._msPortalFxClearValidation=
r();this._msPortalFxTriggerValidation=r()}return __extends(t,n),t.prototype.clearValidation=function(){var n=this._msPortalFxClearValidation();return n?n():Q()},t.prototype.triggerValidation=function(){var t=this._msPortalFxTriggerValidation,i=t(),n,r;return i?i():(n=Q.defer(),r=t.subscribe(this.lifetimeManager,(function(t){t().then(n.resolve).catch(n.reject).finally((function(){return r.dispose()}))})),n.promise)},t})(t.Base.LabelAndBalloon.ViewModel);i.ViewModel=f})(i=t.CustomHtml||(t.CustomHtml={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=n,u=ko.observable,f=ko.observableArray,e=(function(n){function t(t,i,e,o){var s=o||{};r.isNullOrUndefined(i)||typeof i.createEditScopeAccessor=="function"||(s=i);n.call(this,t,i,e,o);this.controlType=91;this.showStepMarkers=s.showStepMarkers||u(!0);this.customValues=s.customValues||f([1,2,3,4,5,6,7,8,9,10])}return __extends(
t,n),t})(t.Base.Input.ViewModel);i.ViewModel=e})(i=t.CustomValueSlider||(t.CustomValueSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.computed,u=(function(t){function i(i,u,f,e){var o=this,s=e||{},h;n.isNullOrUndefined(u)||typeof u.createEditScopeAccessor=="function"||(s=u);t.call(this,i,u,f,e);this.valueSeparator=";";this.controlType=111;this.showStepMarkers=s.showStepMarkers||s.showStepMarkers===!1?s.showStepMarkers:!0;this.customValues=s.customValues;h=this.valueSeparator;this.start=r(i,{read:function(){var i=o.value()?o.value():"",n=i.split(h),t;return n.length===2&&(t=parseInt(n[0],10)),t},write:function(n){o.value(n+h+o.end())}});this.end=r(i,{read:function(){var i=o.value()?o.value():"",n=i.split(h),t;return n.length===2&&(t=parseInt(n[1],10)),t},write:function(n){o.value(o.start()+h+n)}})}return __extends(i,t),i})(t.Base.Input.ViewModel);
i.ViewModel=u})(i=t.CustomRangeSlider||(t.CustomRangeSlider={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=ko.computed,f=(function(t){function i(i,u,f,e){t.call(this,i,u,f,e);this.controlType=25;var o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||r(new n.DateUtil.DateTimeRange);this.allowEmpty=!!o.allowEmpty;this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(i){var r=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=u(this.lifetimeManager,(function(){var n=r.value(),t=r.initialValue();n||t?n&&t?r.setDirty(n.getFullYear()!==t.getFullYear()||n.getMonth()!==t.getMonth()||n.getDate()!==t.getDate()):r.setDirty(!0):r.setDirty(!1)})
))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=f})(i=t.DatePicker||(t.DatePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.DateUtil.DateTimeRange,i=ko.observable,u=ko.computed,f=(function(t){function f(n,u,f,e){t.call(this,n,u,f,e);this.controlType=14;this.formatString=this._options.formatString||i("D");this.enabledDateTimeRange=this._options.enabledDateTimeRange||i(new r);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(f,t),f.prototype._setEditScopeAccessors=function(i,r){var f=this;t.prototype._setEditScopeAccessors.call(this,i,r);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=u((function(){var n=f.value(),t=f.initialValue();n||t?n&&t?f.setDirty(n.getTime()!==t.getTime()):f.setDirty(!0):f.setDirty(!1)})))},f})(n.ViewModels.
Forms.Base.EditableComboBox.ViewModel);t.ViewModel=f})(i=t.DateTimeComboBox||(t.DateTimeComboBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Obsolete||(t.Obsolete={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,f=ko.computed,u=Math.floor,e=(function(t){function i(i,u,f,e){var o,s;t.call(this,i,u,f,e);this.showSeconds=!0;this.controlType=26;o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||r(new n.DateUtil.DateTimeRange);this.showTimezoneDropdown=o.showTimezoneDropdown||r(!1);this.timezoneOffset=o.timezoneOffset||this.value()&&r(-this.value().getTimezoneOffset())||r(-(new Date).getTimezoneOffset());this.allowEmpty=!!o.allowEmpty;this.emptyTimeValueText=o.emptyTimeValueText||r("");s=o.showSeconds;n.isNullOrUndefined(s)||(this.showSeconds=s);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=
function(i){var r=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=f(this.lifetimeManager,(function(){var n=r.value(),t=r.initialValue();n||t?n&&t?r.setDirty(u(n.getTime()/1e3)!==u(t.getTime()/1e3)):r.setDirty(!0):r.setDirty(!1)})))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=e})(i=t.DateTimePicker||(t.DateTimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var f=n.DateUtil.DateTimeRange,r=ko.observable,e=ko.computed,u=Math.floor,o=(function(t){function i(n,i,u,e){t.call(this,n,i,u,e);this.controlType=27;var o=this._options;this.startDateTimeEnabledRange=o.startDateTimeEnabledRange||r(new f);this.endDateTimeEnabledRange=o.endDateTimeEnabledRange||r(new f);this.showTimezoneDropdown=o.showTimezoneDropdown||r(!1);this.timezoneOffset=o.timezoneOffset||
r(-(new Date).getTimezoneOffset());this.displayFieldsInline=o.displayFieldsInline||r(!1);this.emptyValueText=o.emptyValueText||r("");this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(i){var r=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=e(this.lifetimeManager,(function(){var n=r.value(),t=r.initialValue();n||t?n&&t?r.setDirty(u(n.startDateTime().getTime()/1e3)!==u(t.startDateTime().getTime()/1e3)||u(n.endDateTime().getTime()/1e3)!==u(t.endDateTime().getTime()/1e3)):r.setDirty(!0):r.setDirty(!1)})))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=o})(i=t.DateTimeRangePicker||(t.DateTimeRangePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(
n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=92}return __extends(t,n),t})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})(i=t.DayPicker||(t.DayPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=3}return __extends(t,n),t})(n.Base.Options.ViewModel);t.ViewModel=i})(t=n.DropDown||(n.DropDown={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observableArray,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.controlType=98;var e=this._options;this.items=e.items||i();this.filter=e.filter||!1;this.customFilter=e.customFilter;this.filterPlaceholder=e.filterPlaceholder||"";this.multiselect=e.multiselect||!1;this.selectAll=
e.selectAll||!1;this.selectAllOverride=e.selectAllOverride}return __extends(t,n),t})(n.ViewModels.Forms.Base.Input.ViewModel);t.ViewModel=r})(i=t.GroupDropDown||(t.GroupDropDown={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=99}return __extends(t,n),t})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=i})(i=t.DurationPicker||(t.DurationPicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";function g(n,t){var u=n.items();if(u.length===1){for(var i=u[0],f=[],r=[];i;)f.push(new s(i.text(),i.value)),i.children&&(r=r.concat(i.children.map((function(n){return n.text(i.text()+t+n.text()),n})))),i=r.shift();n.items(f)}}function w(n){return(n.text()||"")
.toLocaleLowerCase()}function nt(n,t){var i=w(n),r=w(t);return i===r?0:i>r&&1||-1}function tt(n){return n.sort(nt)}function c(n,t,i){var r=n[i];r?~r.indexOf(t)||r.push(t):n[i]=[t]}function l(n,t,i,r){var o,u,f,e;for(r===void 0&&(r=" "),o=t.length,u=0;u<o;u++)for(f=t[u],n.addWord(f,i),e=u+1;e<o;e++)f=f+r+t[e],n.addWord(f,i)}function it(n,t,i,r){l(n,t.split(" "),i);l(n,t.split(r),i,r)}function rt(n){var t={},i=[];return n.forEach((function(n){var r=n.text();t.hasOwnProperty(r)||(t[r]=i.push(n))})),i}function k(n){return n?(t=n.lineMatches).concat.apply(t,n.children.map(k)):[];var t}var o=ko.observable,y=ko.observableArray,p=ko.computed,s=(function(n){function t(t,i,r){n.call(this,t,i);this.children=r||[]}return __extends(t,n),t})(t.Option),u,f,h,e,a,b,v,r,d;i.HierarchicalFormOptionItem=s;u=(function(){function n(n){this.children=[];this.lineMatches=[];this._value=n&&n.toLocaleLowerCase()}return n.prototype.getChild=function(n){return this.children.first((function(t){return t._value===n.toLocaleLowerCase(
)}))},n.prototype.matchesValue=function(n){return this._value&&this._value===n.toLocaleLowerCase()},n})();i.Node=u;f=(function(){function t(n,t,i){var r=this;this._filterInProgress=!1;this._disposables=[];n.registerForDispose(this);this._viewModel=t;this._filterOptions=i;ko.reactor(n,(function(){r._filterInProgress=!0;var n=r.filterData(t.filterText());t.filterInProgress(r._viewModel.items().length!==n.length);t.filteredItems(n);r._filterInProgress=!1}))}return t.prototype.dispose=function(){this._disposables&&(n.disposeDisposable(this._disposables),this._disposables=void 0)},t.prototype.filterData=function(n){return this._viewModel.items().filter((function(t){var i;return ko.unwrap(t.doNotFilter)||(i=t.text())&&!!~i.toLowerCase().indexOf(n.toLowerCase())}))},t.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},t})();i.SearchFilter=f;h=(function(n){function t(t,i,r){var u=r.delimiter||"\\";i.items.subscribe((function(){g(i,u)})).callback([]);n.call(this,t,i,r)}return __extends(
t,n),t})(f);i.TreeSearchFilter=h;e=(function(){function n(n,t,i){var u=this;this._filterInProgress=!1;this._directMatchDictionary={};this._viewModel=t;this._filterOptions=i;this._prefixTree=new r;p(n,(function(){u._filterInProgress||(u._directMatchDictionary={},u._prefixTree=new r,u._setFilteredItems(u._viewModel.items()))}));t.filterText.subscribe(n,(function(n){u._filterInProgress=!0;var i=u.filterData(n);t.filterInProgress(u._viewModel.items().length!==i.length);t.filteredItems(i);u._filterInProgress=!1}))}return n.prototype.filterData=function(n){var r=this,t=[],i={};return this._prefixTree.getMatches(n).forEach((function(n){i[n]||(t=t.concat(r._directMatchDictionary[n]),i[n]=!0)})),tt(t)},n.prototype._setFilteredItems=function(n){var t=this;n.forEach((function(n){return t._addToSearchOnInitialize(n,n.text())}));this._viewModel.filteredItems(n);this._viewModel.filterText("")},n.prototype._addToSearchOnInitialize=function(n,t){c(this._directMatchDictionary,n,t);l(this._prefixTree,t.split(" "),
t)},n.prototype._setfilteredItems=function(n){this._viewModel.filteredItems(n)},n})();i.SearchFilterPrefixTree=e;a=(function(n){function t(t,i,u){n.call(this,t,i,u);this._childPrefixTree=new r;this._childMatchDictionary={}}return __extends(t,n),t.prototype.filterData=function(n){var t=this._prefixTree.getMatches(n),i=this._childPrefixTree.getMatches(n);return rt(this._processMatches(t,i))},t.prototype._setFilteredItems=function(t){if(this._directMatchDictionary={},this._childMatchDictionary={},this._childPrefixTree=new r,t.length===1){var i=this._filterOptions;i.delimiter||(i.delimiter="\\");t=this._flattenTree(t[0]);this._viewModel.items(t)}n.prototype._setFilteredItems.call(this,t)},t.prototype._addToSearchOnInitialize=function(){},t.prototype._processMatch=function(n,t){var i=this,r=[],u=[],f,e;return n.forEach((function(n){t[n]||(r.push(i._directMatchDictionary[n]||[]),u.push(i._childMatchDictionary[n]||[]),t[n]=!0)})),{filteredResults:(f=[]).concat.apply(f,r),filteredChildResults:(e=[
]).concat.apply(e,u),isResultProcessed:t}},t.prototype._processMatches=function(n,t){var i=this._processMatch(n,{}),r=this._processMatch(t,i.isResultProcessed);return[].concat(i.filteredResults,r.filteredResults,i.filteredChildResults,r.filteredChildResults)},t.prototype._flattenTree=function(n){for(var i=this,t=n,f=[],r=[],e=function(){var e=new s("",""),o=t===n;u._updateCurrentItem(e,e,t.text(),t.text(),o?0:1);c(o?u._directMatchDictionary:u._childMatchDictionary,e,e.text());f.push(e);t.children&&(r=r.concat(t.children.map((function(n){var r=n.text(),u=t.text()+i._filterOptions.delimiter+r;return i._updateCurrentItem(n,t,r,u,0),c(i._directMatchDictionary,e,t.text()),n}))));t=r.shift()},u=this;t;)e();return f},t.prototype._updateCurrentItem=function(n,t,i,r,u){var f=u===0&&this._prefixTree||u===1&&this._childPrefixTree;f&&it(f,i,r,this._filterOptions.delimiter);n.text(n.value=r)},t})(e);i.TreeSearchFilterPrefixTree=a;b=[function(n,t,i){var r=i.algorithmType===1?e:f;return new r(n,t,i)},function(
n,t,i){var r=i.algorithmType===1?a:h;return new r(n,t,i)}];v=(function(){function n(){}return n.prototype.getSearchFilter=function(n,t,i){i||(t.filterOptions=i={datasetType:0});var r=b[i.datasetType];return r?r(n,t,i):null},n})();i.FilterFactory=v;r=(function(){function n(){this._root=new u}return n.prototype.addWord=function(n,t){var i=this._root.lineMatches;n.split("").reduce((function(n,t){var i=n.getChild(t);return i||n.children.push(i=new u(t)),i}),this._root);~i.indexOf(t)||i.push(t)},n.prototype.getMatches=function(n){var t=this._root,i,r=n.split("").first((function(n){return i=t.getChild(n),!i||!(t=i)}));return r?k(t):[]},n})();i.PrefixTree=r;d=(function(t){function i(n,i,r,u){var f,e,s;t.call(this,n,i,r,u);this.filteredItems=y();this.filterText=o("");this.noRowsMessage=o("");this.filterInProgress=o(!1);this.controlType=12;f=this._options;f.options||(f.options=y());e=this.value();e&&this.filterText(e);s=this._values=f.options;this.populated=p(n,(function(){return!!s().length}));(new v).getSearchFilter(
n,this,this._options.filterOptions)}return __extends(i,t),Object.defineProperty(i.prototype,"items",{get:function(){return this._values},enumerable:!0,configurable:!0}),__decorate([n.Composition.ProxyCompatibilityMode],i)})(t.Base.EditableComboBox.ViewModel);i.ViewModel=d})(i=t.FilterComboBox||(t.FilterComboBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=18}return __extends(t,n),t})(n.Base.Editable.ViewModel);t.ViewModel=i})(t=n.HtmlEditor||(n.HtmlEditor={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.controlType=13;this.rows=this._options.rows||i(7)}return __extends(t,
n),t})(n.Base.Typable.ViewModel);t.ViewModel=r})(t=n.MultiLineTextBox||(n.MultiLineTextBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.controlType=8;var e=this._options;this.valueInitialized=!1;this.valueSeparator=";";this.popupShown=i(!1);this.multiselect=e.multiselect||i(!0);this.showSelectAll=e.showSelectAll||i(!1);this.showTotal=e.showTotal||!1;this.formatSetting=e.formatSetting||null;this.maxSelectAllowed=e.maxSelectAllowed||i();this.multiItemsDisplayFormat=e.multiItemsDisplayFormat||i("");this.multiItemsMaxDisplayFormat=e.multiItemsMaxDisplayFormat||i("");this.filter=e.filter;this.filterPlaceholder=e.filterPlaceholder;this.customFilter=e.customFilter}return __extends(t,n),t})(n.Base.Groups.ViewModel);t.ViewModel=r})(t=n.MultiSelectDropDown||(n.MultiSelectDropDown={}))}
)(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=n.initValue,r=n.initObservable,f=(function(t){function i(i,f,e,o){t.call(this,i,f,e,o);this.controlType=10;var s=this._options;this.min=r(s.min,null);this.max=r(s.max,null);this.decimalPoint=r(s.decimalPoint,2);this.invalidText=u(s.invalidText,n.Resources.Strings.NumericTextBox.invalidText);this.placeholder=r(s.placeholder,null);this.allowEmpty=u(s.allowEmpty,!1)}return __extends(i,t),i})(t.Base.Typable.ViewModel);i.ViewModel=f})(i=t.NumericTextBox||(t.NumericTextBox={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.controlType=29;this.showValidationMessagesBelowControl=!0;var e=this._options;this.requestUrl=
e.requestUrl||i(null);this.buttonText=e.buttonText||i(null);this.popupWidth=e.popupWidth||i(null);this.popupHeight=e.popupHeight||i(null);this.beforeRequest=e.beforeRequest||function(){return Q()}}return __extends(t,n),t})(n.Base.Input.ViewModel);t.ViewModel=r})(t=n.OAuthButton||(n.OAuthButton={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=4;this.showValidationMessagesBelowControl=!0;u=this._options;this.sizeToContent=u.sizeToContent!==undefined?u.sizeToContent:!0;this.radioButtonStyle=!!u.radioButtonStyle;this.singleItemPerLine=!!u.singleItemPerLine}return __extends(t,n),t})(n.Base.Options.ViewModel);t.ViewModel=i})(t=n.OptionsGroup||(n.OptionsGroup={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var
t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(t,r,u,f){n.call(this,t,r,u,f);this.controlType=5;this.emptyValueText=this._options.emptyValueText||i()}return __extends(t,n),t})(n.Base.Editable.ViewModel);t.ViewModel=r})(t=n.PasswordBox||(n.PasswordBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.computed,r=(function(n){function t(t,r,u,f){var e=this;n.call(this,t,r,u,f);this.controlType=9;this.valueSeparator=";";this.start=i(this.lifetimeManager,{read:function(){var u=e.value()?e.value():"",t=u.split(e.valueSeparator),i=e.min(),r=i,n=NaN;return t.length===2&&(n=parseFloat(t[0]),isNaN(n)||(r=n)),Math.max(r,i)},write:function(n){e.value(n+e.valueSeparator+e.end())}});this.end=i(this.lifetimeManager,{read:function(){var u=e.value()?e.value():"",t=u.split(e.valueSeparator),i=e.max(),r=i,n=NaN;return t.length===
2&&(n=parseFloat(t[1]),isNaN(n)||(r=n)),Math.min(r,i)},write:function(n){e.value(e.start()+e.valueSeparator+n)}})}return __extends(t,n),t})(n.Base.Slider.ViewModel);t.ViewModel=r})(t=n.RangeSlider||(n.RangeSlider={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var o=n,r=ko.unwrap,i=ko.observable,s=ko.observableArray,h=ko.computed,u,f,e;(function(n){n[n.Column=0]="Column";n[n.Default=1]="Default";n[n.Dependent=2]="Dependent";n[n.Row=3]="Row";n[n.Tabs=4]="Tabs";n[n.Wrapper=5]="Wrapper";n[n.SingleControl=6]="SingleControl"})(u||(u={}));t.SectionStyle=u,(function(n){n[n.Line=0]="Line";n[n.Block=1]="Block"})(f||(f={}));t.TabStyle=f;e=(function(n){function t(t,u){var f=this;n.call(this,t);this.active=i(!1);this.children=s();this.dirty=i(!1);this.name=i();this.width=i();this.submit=i();this.populateSection=i();this.style=i(1);this.valid=i(!0);this.validate=null;this.
tabSection=i();this.tabHasBeenLoaded=i(!1);this.cssClass=i();this.controlType=15;o.isNullOrUndefined(u)&&(u={});this.name=u.name||this.name;this.children=u.children||this.children;this.submit=u.submit||this.submit;this.populateSection=u.populateSection||this.populateSection;this.style=u.style||this.style;this.width=u.width||this.width;this.cssClass=ko.isObservable(u.cssClass)?u.cssClass:i(u.cssClass)||this.cssClass;this.minHeight=u.minHeight;this.tabStyle=u.tabStyle||0;h(this.lifetimeManager,(function(){var n=f.children(),e=n.some((function(n){var t=r(n);return t.dirty?t.dirty():!1})),t,i,u;f.tabSection&&f.tabSection()&&(t=f.tabSection().children().some((function(n){var t=r(n);return t.dirty?t.dirty():!1})));i=n.some((function(n){var t=r(n);return t.valid?!t.valid():!1}));u=n.some((function(n){var t=r(n);return t.loading?t.loading():!1}));f.dirty(e||t);f.valid(!i);f.loading(u)}))}return __extends(t,n),t.prototype.clearValidation=function(){var n=[];return this.children().forEach((function(t){var i=
t.clearValidation();i&&n.push(i)})),Q.all(n)},t.prototype.triggerValidation=function(){var n=[];return this.children().forEach((function(t){if(typeof t.triggerValidation=="function"){var i=t.triggerValidation();i&&n.push(i)}})),Q.all(n)},t})(n.ViewModels.Controls.Loadable.ViewModel);t.ViewModel=e})(i=t.Section||(t.Section={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(r){"use strict";var u=ko.observable,s=ko.computed,f=(function(t){function i(i,r,f,e){var s=this,o;t.call(this,i,r,f,e);this.defaultValue=u();this.showValue=u(!0);this.displayText=u("");this.icon=u();this.locked=u(!1);this.infoBalloonText=u("");this.lockedBalloonText=u("");this.controlType=11;o=this._options;this.defaultValue=o.defaultValue||u();this.showValue=o.showValue||u(!0);this.displayText=o.displayText||u("");this.icon=o.icon||u();this.locked=o.locked||u(!1);this.infoBalloonText=o.infoBalloonText||u("");this.
lockedBalloonText=o.lockedBalloonText||u("");this.infoBalloonLink=o.infoBalloonLink||u(new n.ViewModels.Controls.Balloon.Link);this.isDefault=ko.computed(i,(function(){return s.defaultValue()===s.value()}))}return __extends(i,t),i})(i.Base.Editable.ViewModel),e,o;r.ViewModelBase=f;e=(function(i){function r(r,u,f,e){var o=this;i.call(this,r,u,f,e);this.selectable=new t.Selectable({allowUnselect:!1,selectedValue:this._options.selectedValue||!0,isSelected:this._options.initialState&&this._options.initialState.selectable&&this._options.initialState.selectable.isSelected,isActivated:this._options.initialState&&this._options.initialState.selectable&&this._options.initialState.selectable.isActivated});this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=s(this.lifetimeManager,(function(){o.setDirty(!n.deepEquals(o.value(),o.initialValue()))})))}return __extends(r,i),r})(f);r.ViewModel=e;o=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.
controlType=11;this.selectable=new FxImpl.Composition.Selectable.Selectable2({supplyBladeReference:u.supplyBladeReference})}return __extends(t,n),t})(f);r.ViewModel2=o})(r=i.Selector||(i.Selector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,f,e;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(i.Mode||(i.Mode={}));f=i.Mode;e=(function(t){function i(i,e,o,s){t.call(this,i,e,o,s);this.textBoxLabel=r("");this.selectExistingLinkDisplayText=r("");this.createNewLinkDisplayText=r("");this.controlType=83;var h=this._options;this.createNew=h.createNew||r(!0);this.textBoxLabel=h.textBoxLabel||r("");this.selectExistingLinkDisplayText=h.selectExistingLinkDisplayText||r(u.selectExisting);this.createNewLinkDisplayText=h.createNewLinkDisplayText||
r(u.createNew);this.displayMode=h.displayMode||r(f.CreateOrSelect);this.valueUpdateTrigger=h.valueUpdateTrigger||n.ViewModels.Controls.ValueUpdateTrigger.KeyPress}return __extends(i,t),i})(t.Selector.ViewModel);i.ViewModel=e})(i=t.CreatorAndSelector||(t.CreatorAndSelector={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=ko.observable,o=ko.computed,u=n.Resources.Strings.ViewModels.Controls.CreatorAndSelector,s=n.ViewModels,f,e;(function(n){n[n.CreateOnly=0]="CreateOnly";n[n.SelectOnly=1]="SelectOnly";n[n.CreateOrSelect=2]="CreateOrSelect"})(i.Mode||(i.Mode={}));f=i.Mode;e=(function(t){function i(i,e,h,c){var v=this,a,l;e||(c={defaultValue:r({value:"",createNew:!0})});!e||e.valid&&e.sections||(a=e.defaultValue,a?a()||a({value:"",createNew:!0}):a=r({value:"",createNew:!0}));t.call(this,i,e,h,c);this.controlType=85;e.valid&&e.sections&&!this._msPortalFxViewModelValueChangesAreClean&&
(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=o(this.lifetimeManager,(function(){var n=v.value(),t=v.initialValue();n&&t?v.setDirty(t.value!==n.value||t.createNew!==n.createNew):v.setDirty(n!==t)})));l=this._options;this.textBoxLabel=l.textBoxLabel||r("");this.selectExistingLinkDisplayText=l.selectExistingLinkDisplayText||r(u.selectExisting);this.createNewLinkDisplayText=l.createNewLinkDisplayText||r(u.createNew);this.displayMode=l.displayMode||r(f.CreateOrSelect);this.valueUpdateTrigger=l.valueUpdateTrigger||s.Controls.ValueUpdateTrigger.Input}return __extends(i,t),i})(t.Selector.ViewModel);i.ViewModel=e})(i=t.CreatorAndSelectorV2||(t.CreatorAndSelectorV2={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var e=MsPortalFx.Resources.Strings.ViewModels.Controls.CreatorAndComboBox,o=MsPortalFx.ViewModels,u=o.Forms,s=u.FilterComboBox,f=u.Section,t=
ko.observable,r=ko.observableArray,h=ko.reactor,l,i,c;(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew"})(n.Mode||(n.Mode={}));l=n.Mode,(function(n){n[n.UseExisting=0]="UseExisting";n[n.CreateNew=1]="CreateNew";n[n.Both=2]="Both"})(n.AllowedMode||(n.AllowedMode={}));i=n.AllowedMode;c=(function(n){function c(c,l){var k=this,a=l.filterComboOptions=MsPortalFx.Base.Utilities.extend({},l&&l.filterComboOptions),it=l.children,d=a.filterOptions,ut=d&&d.algorithmType,p,w,b;l.allowedMode||(l.allowedMode=t(i.Both));var v,g,nt,tt=[g={text:t(e.createNew),value:!0},nt={text:t(e.useExisting),value:!1}],rt={label:a.label,options:v=r(tt),defaultValue:t(!0),validations:r([new o.RequiredValidation]),radioButtonStyle:!0,infoBalloonContent:a.infoBalloonContent,infoBalloonLinkContent:a.infoBalloonLinkContent,viewModelValueChangesAreClean:a.viewModelValueChangesAreClean},y=new u.OptionsGroup.ViewModel(c,rt);a.label=undefined;a.labelPosition=undefined;a.infoBalloonContent=undefined;a.infoBalloonLinkContent=
undefined;p=l.accessor?new s.ViewModel(c,l.form,l.accessor,a):new s.ViewModel(c,a);w=new f.ViewModel(c,{children:it,style:t(1)});b=new f.ViewModel(c,{children:r([p]),style:t(1)});l.children=r([y]);h(c,(function(){var n=l.children;n().length>1&&n.pop();y.value()?n.push(w):n.push(b)}));n.call(this,c,l);this.control=p;this.createOrSelectControl=y;this.allowedMode=l.allowedMode;this._newSection=w;this._selectSection=b;this._options=l;h(c,(function(){switch(l.allowedMode()){case i.CreateNew:v([g]);k.toggleNewOrExisting();break;case i.UseExisting:v([nt]);k.toggleNewOrExisting();break;default:v(tt)}}))}return __extends(c,n),c.prototype.toggleNewOrExisting=function(n){var r=this.createOrSelectControl.value,u=this._options.allowedMode(),t=n===undefined?!r():!!n;switch(u){case i.CreateNew:t=!0;break;case i.UseExisting:t=!1}r(t)},c})(f.ViewModel);n.ViewModel=c})(t=n.CreatorAndComboBox||(n.CreatorAndComboBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(
n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);this.controlType=6}return __extends(t,n),t})(n.Base.Slider.ViewModel);t.ViewModel=i})(t=n.Slider||(n.Slider={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observable,i,r;(function(n){n[n.Primary=0]="Primary";n[n.Secondary=1]="Secondary";n[n.Both=2]="Both"})(t.Panes||(t.Panes={}));i=t.Panes;r=(function(n){function t(t,r){n.call(this,t);this.controlType=21;var r=r||{};this.primaryPaneSize=r.primaryPaneSize||300;this.showPanes=r.showPanes||u(i.Both);this.vertical=r.vertical||!1;this.reversed=r.reversed||!1;this.minPaneSizes=r.minPaneSizes||{primaryPaneSize:0,secondaryPaneSize:0}}return __extends(t,n),t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=r})(i=t.Splitter||(t.Splitter={}))})(i=t.Controls||(t.Controls={}))})
(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,r=ko.computed,f=(function(n){function t(t,f){var e=this;n.call(this,t);this.disabled=i(!1);this.loading=i(!1);this.controlType=1;this.validate=i(0);this.fields=u();this._subs=[];this.dirty=r((function(){return e.fields().some((function(n){return n.dirty()}))}));this.valid=r((function(){var n=e.fields().some((function(n){return!n.valid()}));return!n}));this._subs.push(this.validate.subscribe((function(n){e.fields().forEach((function(t){t.validate(n)}))})));f&&ko.utils.arrayPushAll(this.fields,f)}return __extends(t,n),t.prototype.dispose=function(){this._subs.length>0&&(this._subs.forEach((function(n){n.dispose()})),this._subs=[]);this.dirty&&this.dirty.dispose();this.valid&&this.valid.dispose()},t.prototype.clearValidation=function(){var n=[];return this.fields().forEach((function(t){var i=t.clearValidation();i&&n.push(
i)})),Q.all(n)},t.prototype.triggerValidation=function(){var n=[];return this.fields().forEach((function(t){var i=t.triggerValidation();i&&n.push(i)})),Q.all(n)},t})(n.ViewModels.Controls.Base.ViewModel);t.ViewModel=f})(i=t.StaticSection||(t.StaticSection={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,f=ko.computed,r=(function(){function t(t,r){r===void 0&&(r={});this.separator=r.separator||i(";");this.viewModel=new n.ViewModels.Forms.FilterComboBox.ViewModel(t,r.viewModel)}return t})(),u;t.StringListBoxNewValueOptions=r;u=(function(t){function u(n,u,f,e){t.call(this,n,u,f,e);this.controlType=17;var o=this._options;this.values=o.values||i([]);this.selected=o.selected||i(null);this.newValueOptions=new r(n,o.newValueOptions);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(u,t),u.prototype.
_setEditScopeAccessors=function(i,r){var u=this;t.prototype._setEditScopeAccessors.call(this,i,r);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=f(this.lifetimeManager,(function(){u.setDirty(!u._compareValues(u.value(),u.initialValue()))})))},u.prototype._getUniqueValues=function(n){var t=n.slice(0);return t.sort((function(n,t){return n.localeCompareIgnoreCase(t)})),t.reduce((function(n,t){return(n.length===0||t.localeCompareIgnoreCase(n[n.length-1])!==0)&&n.push(t),n}),[])},u.prototype._compareValues=function(n,t){var r,u,i;if(n&&!t||!n&&t)return!1;if(!n&&!t)return!0;if(r=this._getUniqueValues(n),u=this._getUniqueValues(t),r.length!==u.length)return!1;for(i=0;i<r.length;i++)if(r[i].localeCompareIgnoreCase(u[i])!==0)return!1;return!0},u})(n.ViewModels.Forms.Base.Editable.ViewModel);t.ViewModel=u})(i=t.StringListBox||(t.StringListBox={}))})(i=t.Forms||(t.Forms={}))})(i=t.Vso||(t.Vso={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||
(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u);var f=this._options;this.controlType=2;this.readonly=f.readonly||!1;this.actionHandler=u?u.actionHandler:i?i.actionHandler:null;this.actionsEnabled=ko.observable(!0);this.showValidationMessagesBelowControl=f&&f.showValidationMessagesBelowControl?f.showValidationMessagesBelowControl:!1}return __extends(t,n),t})(n.Base.Typable.ViewModel);t.ViewModel=i})(t=n.TextBox||(n.TextBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var u=ko.observable,f=ko.computed,r=Math.floor,e=(function(t){function i(i,r,f,e){var o,s;t.call(this,i,r,f,e);this.showSeconds=!0;this.controlType=24;o=this._options;this.enabledDateTimeRange=o.enabledDateTimeRange||u(new n.DateUtil.DateTimeRange);this.allowEmpty=!!o.allowEmpty;s=this.
_options.showSeconds;n.isNullOrUndefined(s)||(this.showSeconds=s);this.setFieldValueAccessors=function(n){this._setEditScopeAccessors(n)}}return __extends(i,t),i.prototype._setEditScopeAccessors=function(i){var u=this;t.prototype._setEditScopeAccessors.call(this,i);this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=f(this.lifetimeManager,(function(){var n=u.value(),t=u.initialValue();n||t?n&&t?u.setDirty(r(n.getTime()/1e3)!==r(t.getTime()/1e3)):u.setDirty(!0):u.setDirty(!1)})))},i})(t.Base.EditableComboBox.ViewModel);i.ViewModel=e})(i=t.TimePicker||(t.TimePicker={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var e=n.isNullOrUndefined,r=n.Resources.Strings.FileUpload,u=ko.observable,f=ko.observableArray,o=ko.computed,s=(function(t){function i(i,r,s,h){var l=this,c;t.call(this,i,r,s,h);this.controlType=106;
c=this._options;this.accept=c.accept||null;this.allowedFileExtensions=c.allowedFileExtensions||null;this.maxFiles=c.maxFiles||1;this.uploadContext=c.uploadContext||u();this.showValidationMessagesBelowControl=c&&c.showValidationMessagesBelowControl?c.showValidationMessagesBelowControl:!1;this.selectedFiles=f();this.uploadTasks=f();this.autoAddUploadTasks=n.isNullOrUndefined(c.autoAddUploadTasks)?!0:c.autoAddUploadTasks;this._msPortalFxUploadActionCallback=u(null);e(r)||r.valid&&r.sections||this._options.viewModelValueChangesAreClean||(n.disposeDisposable(this._dirtyComputed),this._dirtyComputed=o(this.lifetimeManager,(function(){l.setDirty(!n.deepEquals(l.value(),l.initialValue()))})))}return __extends(i,t),i.prototype.addUploadTasks=function(n){var t=this._msPortalFxUploadActionCallback(),i=n.map((function(n){return{id:n.id,name:n.name}}));return t?t(i,5):Q.reject(r.notReady)},i.prototype.resetUploadTasks=function(){var n=this._msPortalFxUploadActionCallback();return n?n([],6):Q.reject(r.notReady)}
,i})(t.Base.Editable.ViewModel);i.ViewModel=s})(i=t.AsyncFileUpload||(t.AsyncFileUpload={}))})(i=t.Forms||(t.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var u=2097152,l=u,a=209715200,v=1048576,y=53687091200,p=u,i=ko.observable,f,e,o,r,s,h,c;(function(n){n[n.Full=0]="Full";n[n.Stream=1]="Stream";n[n.BlobStore=2]="BlobStore"})(f||(f={}));t.FileUploadType=f,(function(n){n[n.Default=0]="Default";n[n.Text=1]="Text";n[n.ArrayBuffer=2]="ArrayBuffer";n[n.DataUri=3]="DataUri"})(e||(e={}));t.ContentType=e,(function(n){n[n.Invalid=0]="Invalid";n[n.Pending=1]="Pending";n[n.Uploading=2]="Uploading";n[n.Paused=3]="Paused";n[n.Complete=4]="Complete";n[n.Canceled=5]="Canceled"})(o||(o={}));t.UploadStatus=o;r=(function(){function n(){this.type=0;this.contentType=0;this.encoding=null;this.maxFileSize=u;this.chunkSize=l}return n})();t.FullFileUploadContext=r;s=(function(n){function t(){n.call(this);
this.type=1;this.maxFileSize=a;this.chunkSize=v}return __extends(t,n),t})(r);t.StreamFileUploadContext=s;h=(function(n){function t(){n.call(this);this.context=i();this.sasUriCommand=i();this.type=2;this.maxFileSize=y;this.chunkSize=p;this.skipSasUriUpdateWithSelectedFile=i(!1)}return __extends(t,n),t})(r);t.BlobStoreFileUploadContext=h;c=(function(n){function t(t,u,f,e){n.call(this,t,u,f,e);this.controlType=81;var o=this._options;this.accept=o.accept||"";this.maxFiles=o.maxFiles||1;this.uploadContext=o.uploadContext||i(new r);this.cancelAllUploads=o.cancelAllUploads||i(!1);this.showProgressBars=o.showProgressBars||i(!0);this.files=i([]);this.showValidationMessagesBelowControl=o&&o.showValidationMessagesBelowControl?o.showValidationMessagesBelowControl:!1}return __extends(t,n),t})(n.Base.Editable.ViewModel);t.ViewModel=c})(t=n.FileUpload||(n.FileUpload={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(
n){var t;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u,f;(function(n){n[n.Allow=0]="Allow";n[n.Disallow=1]="Disallow";n[n.Ignore=2]="Ignore"})(t.UnrecognizedTokenBehavior||(t.UnrecognizedTokenBehavior={}));u=t.UnrecognizedTokenBehavior;f=(function(n){function t(t,f,e,o){n.call(this,t,f,e,o);this.tokenStartAndEndCharacters=i({tokenStart:"[",tokenEnd:"]"});this.items=r();this.unrecognizedTokenBehavior=i(u.Disallow);this.removeTokenOnDelete=i(!1);this.valueKey=i("name");this.columns=r();this.rowsCount=i(7);this.defaultColumnWidth=i("150px");this.noRowsMessage=i("");this.controlType=30;this._setDefaults(this._options)}return __extends(t,n),t.prototype._setDefaults=function(n){for(var t in n)this[t]=n[t]||this[t]},t})(n.Base.Editable.ViewModel);t.ViewModel=f})(t=n.TokenComboBox||(n.TokenComboBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";
var r=ko.observable,u,i;(function(n){n[n.Unchecked=0]="Unchecked";n[n.Checked=1]="Checked";n[n.Indeterminate=2]="Indeterminate"})(t.Value||(t.Value={}));u=t.Value;i=(function(n){function t(t,i,u,f){n.call(this,t,i,u,f);this.controlType=22;var e=this._options;this.inlineLabel=e.inlineLabel||!1;this.canUserSetIndeterminate=e.canUserSetIndeterminate||r(!0)}return __extends(t,n),t})(n.Base.Input.ViewModel);t.ViewModel=i})(t=n.TriStateCheckBox||(n.TriStateCheckBox={}))})(t=n.Forms||(n.Forms={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){"use strict";var s=n.ViewModels,tt=s.FileDownload,it=tt.Context,h=n.Base.Images,r=ko.observable,c=ko.observableArray,u,o,l,f,a,e,v,y,p,w,b,k,d,g,nt;(function(n){n[n.None=0]="None";n[n.Group=1]="Group";n[n.OpenLinkButton=2]="OpenLinkButton";n[n.OpenBladeButton=3]="OpenBladeButton";n[n.CommandButton=4]="CommandButton";n[n.DialogButton=5]="DialogButton";n[n.ToggleButton=6]="ToggleButton";n[
n.FileDownloadButton=7]="FileDownloadButton";n[n.FileUploadButton=8]="FileUploadButton";n[n.OAuthButton=9]="OAuthButton";n[n.OpenBladeButton2=10]="OpenBladeButton2";n[n.MoveResourceButton=11]="MoveResourceButton"})(i.ToolbarItemType||(i.ToolbarItemType={}));u=i.ToolbarItemType;o=(function(){function n(n){if(this.type=u.None,this.disabled=r(!1),this.unauthorizedMessage=r(),!u[n])throw new Error("Invalid toolbar item type specified.");this.type=n}return n.prototype.unauthorized=function(n){n||(n="No access");this.unauthorizedMessage(n)},n})();i.ToolbarItem=o;l=(function(n){function t(t){n.call(this,t);this.showLabels=r(!1);this.items=c();this.controlType=62}return __extends(t,n),t.prototype.setItems=function(n){this.items(n)},t})(t.Controls.Loadable.ViewModel);i.Toolbar=l;f=(function(n){function t(t){n.call(this,t);this.label=r();this.icon=r({type:1,data:""})}return __extends(t,n),t})(o);i.ToolbarButton=f;a=(function(n){function t(t){n.call(this,u.Group);this.items=t}return __extends(t,n),t})(o);
i.ToolbarGroup=a;e=(function(n){function t(t){n.call(this,t)}return __extends(t,n),t})(f);i.ExecutableButtonBase=e;v=(function(n){function t(){n.call(this,u.CommandButton);this.commandContext=r()}return __extends(t,n),t})(e);i.CommandButton=v;y=(function(n){function t(t){n.call(this,u.ToggleButton);this.checked=r(!1);this.commandContext=r();this.optionGroupName=t}return __extends(t,n),t})(e);i.ToggleButton=y;p=(function(n){function t(t){n.call(this,t||u.DialogButton)}return __extends(t,n),t})(e);i.DialogButton=p;w=(function(n){function t(){n.call(this,u.FileUploadButton);this.icon(h.Upload());this.accept="";this.maxFiles=1;this.uploadContext=r(new s.FileUpload.FullFileUploadContext);this.cancelAllUploads=r(!1);this.cancelAllUploadsOnFileSelection=r(!0);this.uploadTasks=c()}return __extends(t,n),t})(f);i.FileUploadButton=w;b=(function(n){function t(t){n.call(this,u.FileDownloadButton);this.icon(h.Download());this.context=r(new it(t))}return __extends(t,n),t})(f);i.FileDownloadButton=b;k=(function(n)
{function t(){n.call(this,u.OAuthButton);this.icon(h.Link());this.requestUrl=r(null);this.popupWidth=r(800);this.popupHeight=r(600)}return __extends(t,n),t})(f);i.OAuthButton=k;d=(function(n){function t(t){n.call(this,u.OpenBladeButton);var i=this.selectable=new s.Selectable(t);t||i.selectedValue()!==undefined||i.selectedValue(null)}return __extends(t,n),t})(f);i.OpenBladeButton=d;g=(function(n){function t(t){n.call(this,u.OpenBladeButton2);t&&(this.selectable=new FxImpl.Composition.Selectable.Selectable2(t))}return __extends(t,n),t})(f);i.OpenBladeButton2=g;nt=(function(n){function i(i,f){f===void 0&&(f="_blank");n.call(this,u.OpenLinkButton);this.clickableLink=new t.ClickableLink(r(i),r(f))}return __extends(i,n),i})(f);i.OpenLinkButton=nt})(i=t.Toolbars||(t.Toolbars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(t){var i;(function(t){"use strict";function e(n){return!!n&&n.status===3&&(n.action===2||n.action===4)}var i=
ko.observable,r,u,f;(function(n){n[n.NotStarted=0]="NotStarted";n[n.InProgress=1]="InProgress";n[n.Error=2]="Error";n[n.Completed=3]="Completed"})(r||(r={}));t.Status=r,(function(n){n[n.None=0]="None";n[n.Previous=1]="Previous";n[n.Next=2]="Next";n[n.Skip=3]="Skip";n[n.Complete=4]="Complete";n[n.Cancel=5]="Cancel"})(u||(u={}));t.Action=u;t.isCompleted=e;f=(function(n){function t(){n.apply(this,arguments);this.valid=i();this.input=i();this.output=i({status:1,action:0})}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.input(n.input),n.valid!==undefined&&this.valid(n.valid),Q()},t})(n.Controls.Loadable.ViewModel);t.ViewModel=f})(i=t.Base||(t.Base={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(){n.apply(this,arguments);this.enableErrorInfoBox=i(!0);this._msPortalFxClearGroupValidationMessage=
i((function(){}));this.asyncValidations=[]}return __extends(t,n),t.prototype.clearGroupValidationMessage=function(){this._msPortalFxClearGroupValidationMessage()()},t})(n.Base.ViewModel);t.ViewModel=r})(t=n.ErrorInfoBoxActionBar||(n.ErrorInfoBoxActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,u,r,f;(function(n){n[n.Default=0]="Default";n[n.Purchase=1]="Purchase"})(t.ActionButtonText||(t.ActionButtonText={}));u=t.ActionButtonText,(function(n){n[n.Unstyled=0]="Unstyled";n[n.BottomBanner=1]="BottomBanner"})(t.SecondaryLinkStyle||(t.SecondaryLinkStyle={}));r=t.SecondaryLinkStyle;f=(function(n){function t(t,f){n.call(this,t);this.actionInProgress=i(!1);this.input=i();this.isProvisioningBlade=i();this.provisionOnStartboardPart=i();this.masterIsProvisioningPart=i(!1);this.eula=i();this.secondaryLinkDisplayText=i();this.secondaryLinkTriggerValidation=
i(!1);this.secondaryLinkStyle=i(r.Unstyled);this.disablePrimaryButton=i(!0);this.triggerSelectAction=i("");this.forceInProgressStatus=i();this.dropDown=i();this.showActionBar=i(!0);this.actionButtonUri=i();this.actionButtonLabel=i(u.Default);f&&typeof f.hideActionBar=="boolean"&&this.showActionBar(!f.hideActionBar)}return __extends(t,n),t.prototype.onInputsSet=function(t){var i=this;return"actionInProgress"in t&&this.actionInProgress(!!t.actionInProgress),n.prototype.onInputsSet.call(this,t).then((function(){i.eula(t.eula);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.isProvisioningBlade&&i.isProvisioningBlade(t.isProvisioningBlade);i.masterIsProvisioningPart(t.input&&!!t.input.masterIsProvisioningPart);i.forceInProgressStatus(t.forceInProgressStatus);t.suppressErrorInfoBox&&i.enableErrorInfoBox(!1);i.disablePrimaryButton(!!t.disablePrimaryButton);r[t.secondaryLinkStyle]&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.dropDown&&i.dropDown(t.dropDown);
t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t})(n.ErrorInfoBoxActionBar.ViewModel);t.ViewModel=f})(t=n.CreateActionBar||(n.CreateActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(i){"use strict";var r=(function(t){function i(){t.apply(this,arguments)}return __extends(i,t),i.prototype.deleteButtonClick=function(){this._onButtonClicked(!0)},i.prototype.cancelButtonClick=function(){this._onButtonClicked(!1)},i.prototype._onButtonClicked=function(t){var i=t?3:0,r=t?4:5;this.output({status:i,action:r,userActionId:n.getUniqueId()})},i})(t.Base.ViewModel);i.ViewModel=r})(i=t.DeleteActionBar||(t.DeleteActionBar={}))})(i=t.ActionBars||(t.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=
(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.updateButtonClick=function(){},t.prototype.resetButtonClick=function(){},t})(n.Base.ViewModel);t.ViewModel=i})(t=n.FilterActionBar||(n.FilterActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.prototype.saveButtonClick=function(){},t.prototype.discardButtonClick=function(){},t})(n.Base.ViewModel);t.ViewModel=i})(t=n.FormActionBar||(n.FormActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(){n.apply(this,arguments);this.enableErrorInfoBox=i(!1);this.actionButtonLabel=i();this.actionButtonUri=i(
);this.actionButtonUriWindowFeatures=i();this.actionSummaryHtml=i();this.allowToggleProvisioningLocation=i(!1);this.secondaryLinkDisplayText=i();this.secondaryLinkTriggerValidation=i(!1);this.secondaryLinkStyle=i(0)}return __extends(t,n),t.prototype.actionButtonClick=function(){},t.prototype.onInputsSet=function(t){var i=this;return n.prototype.onInputsSet.call(this,t).then((function(){t.actionButtonLabel&&i.actionButtonLabel(t.actionButtonLabel);t.actionSummaryHtml&&i.actionSummaryHtml(t.actionSummaryHtml);t.allowToggleProvisioningLocation&&i.allowToggleProvisioningLocation(t.allowToggleProvisioningLocation);t.secondaryLinkDisplayText&&i.secondaryLinkDisplayText(t.secondaryLinkDisplayText);t.secondaryLinkStyle!==undefined&&i.secondaryLinkStyle(t.secondaryLinkStyle);t.secondaryLinkTriggerValidation&&i.secondaryLinkTriggerValidation(t.secondaryLinkTriggerValidation)}))},t})(n.ErrorInfoBoxActionBar.ViewModel);t.ViewModel=r})(t=n.GenericActionBar||(n.GenericActionBar={}))})(t=n.ActionBars||(n.
ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(n){function t(){n.apply(this,arguments);this.triggerSelectAction=i("");this.eula=i();this.showSelectButton=i();this.selectButtonText=i()}return __extends(t,n),t.prototype.onInputsSet=function(t){"triggerSelectAction"in t&&this.triggerSelectAction(t.triggerSelectAction);"eula"in t&&this.eula(t.eula);"selectButtonText"in t&&this.selectButtonText(t.selectButtonText);var i=this.showSelectButton;return"showSelectButton"in t?i(!!t.showSelectButton):i()===undefined&&i(!0),n.prototype.onInputsSet.call(this,t)},t})(n.Base.ViewModel);t.ViewModel=r})(t=n.PickerActionBar||(n.PickerActionBar={}))})(t=n.ActionBars||(n.ActionBars={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t=(function(){function n(n){this.type=0;this.
title=n}return n})();n.Dialog=t})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Abort=0]="Abort";n[n.Cancel=1]="Cancel";n[n.Ignore=2]="Ignore";n[n.No=3]="No";n[n.Ok=4]="Ok";n[n.Retry=5]="Retry";n[n.Yes=6]="Yes"})(t||(t={}));n.DialogResult=t})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){n[n.Invalid=0]="Invalid";n[n.MessageBox=1]="MessageBox";n[n.ProgressBox=2]="ProgressBox";n[n.Form=3]="Form";n[n.List=4]="List"})(t||(t={}));n.DialogType=t})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function tt(n){var t=window.fx.environment;return t.extensionName===o.Constants.ExtensionNames.Hubs?l.CloudName.
readFromInputs(n):l.selfCloudName}var o=n.Base,f=n.Helpers,c=n.Services.Gallery,l=FxImpl.Extension,a=c.Constants,r=undefined,i=ko.observable,v=ko.toJS,k=o.Constants.ExtensionNames.Hubs,y=new o.Diagnostics.Log("MsPortalFx/ViewModels/ParameterCollection/Internal/Provisioner"),d=a.GalleryParametersKey,e=a.GalleryOptionsKey,s="",g={provEntityUndefined:s,notEnabled:s,unableToLocatePart:s},h=FxImpl.getErrorMap(g),nt=(function(){function n(){this.inputs=i();this.errors=i([])}return n})(),p,w,u,b;t.CollectorBindingInternals=nt;p=(function(){function n(){this.outputs=i();this.commit=i()}return n})();t.ProviderBindingInternals=p;w=(function(){function i(n){this._provisioningEntity=r;this._data=r;this._options=r;this._executionDeferred=r;this._provisioningCommandSubscription=r;this._mappedOutputs=r;n||h.provEntityUndefined();this._provisioningEntity=n;this._executionDeferred=f.Deferred()}return Object.defineProperty(i.prototype,"mappedOutputs",{get:function(){return this._mappedOutputs},enumerable:!0,
configurable:!0}),i.prototype.executeProvisioning=function(n,t){var p=this,i=this._provisioningEntity,tt,l,a,it,u;i.enableProvisioning()||h.notEnabled();var w=n,b=i.executeProvisioning&&i.executeProvisioning.bind(i),k=i.mapOutputsForProvisioning&&i.mapOutputsForProvisioning.bind(i),o=!!b,d=!!k;if(o&&d)return y.error("Override 'executeProvisioning' or 'mapOutputsForProvisioning' but not both."),f.reject();if(!o){var g=t&&t[e],s=g&&g.galleryItem,nt=s&&s.categoryIds||[];if(nt.length>0&&(tt=nt.some((function(n){return n.toLowerCase()===c.noSubCreateCategoryId})),tt))return y.error("The gallery item '"+s.itemDisplayName+"' requires no subscriptions, which requires custom provisioning. Override 'executeProvisioning'"),f.reject()}return(d&&(n=k(w)),l=i.provisionOnStartboardPart,a=i.privatePcPrBI,l&&l())?(a.masterIsProvisioningPart()?this._mappedOutputs=n:(this._initializeProvisioningEntity(t[e]),it={provisioningOptions:{originalData:w,data:v(n),options:v(t)}},a.triggerProvisioningInStartboardPart(
it)),f.resolve()):o?(this._traceProvisioningStarted(),u=b(n),u?u.then((function(){p._traceProvisioningEnded(!0)}),(function(){p._traceProvisioningEnded(!1)})):this._traceProvisioningEnded(r),u):this._beginExecution(n,t)},i.prototype.dispose=function(){var n=this._provisioningCommandSubscription;n&&!n.isDisposed&&n.dispose()},i.prototype._initializeProvisioningEntity=function(n){var u=n.uiDefinition.markup.reference,t=u.provisioningPartName,i=u.provisioningPartExtension,r;t||i?t&&i||h.unableToLocatePart():(t="ProvisionerPart",i=k);r=this._provisioningEntity.privatePcPrBI;r.provisioningPartName(t);r.provisioningPartExtensionName(i)},i.prototype._beginExecution=function(t,i){var f=this,r;return this._data=t,this._options=i,r=this._provisioningEntity.privatePcPrBI,this._provisioningCommandSubscription=r.provisioningCommand.subscribe((function(n){n.status(u.Idle);f._executeProvisioning(n);var t=f._provisioningCommandSubscription;t&&!t.isDisposed&&t.dispose()})),r.triggerProvisioningCommand(n.getUniqueId(
)),this._executionDeferred.promise()},i.prototype._executeProvisioning=function(n){var t=this,f,i;n.status(u.InProgress);this._traceProvisioningStarted();f=n.execute({options:this._options,data:this._data});i=this._executionDeferred;f?f.then((function(r){t.deploymentResponse=r;t._provisioningEntity.privatePcPrBI.provisioningStarted({galleryParameters:t._data.outputParameters[d],configurationOptions:t._options[e],deploymentResponse:r});n.status(u.Succeeded);t._traceProvisioningEnded(!0);i.resolve()}),(function(){n.status(u.Failed);t._traceProvisioningEnded(!1);i.reject()})):(this._traceProvisioningEnded(r),i.resolve())},i.prototype._createEventBase=function(){var i=this._options,u=i&&i[e],n=u&&u.launchingContext,t={name:r,data:{oldCreateApi:!0}};return n&&(t.name=n.galleryItemId,t.data.launchingContext=n),t},i.prototype._traceProvisioningStarted=function(){return t.ProvisioningTelemetry.traceProvisioningStarted(this._createEventBase())},i.prototype._traceProvisioningEnded=function(n){var f=
this._createEventBase(),e=t.ProvisioningTelemetry.ActionModifier,o=t.ProvisioningTelemetry.ProvisioningStatus,i,u;return n===r?(i=e.Succeeded,u=o.NoPromise):n?(i=e.Succeeded,u=o.Resolved):(i=e.Failed,u=o.UnknownFailure),f.actionModifier=i,f.data.provisioningStatus=u,t.ProvisioningTelemetry.traceProvisioningEnded(f)},__decorate([n.Composition.ProxyCompatibilityMode],i)})();t.Provisioner=w,(function(n){n[n.Idle=0]="Idle";n[n.InProgress=1]="InProgress";n[n.Succeeded=2]="Succeeded";n[n.Failed=3]="Failed"})(t.ProvisioningCommandStatus||(t.ProvisioningCommandStatus={}));u=t.ProvisioningCommandStatus;b=(function(){function n(){this.triggerProvisioningCommand=i();this.provisioningPartExtensionName=i();this.provisioningPartName=i();this.triggerProvisioningInStartboardPart=i();this.masterIsProvisioningPart=i(!1);this.forceDiscardJourney=i(!0);this.provisioningCommand=i();this.provisioningAttempted=i();this.provisioningStarted=i();this.provisioningCompleted=i()}return n})();t.ProvisioningEntityBindingInternals=
b;t.getCloudNameFromInputs=tt})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){var t=n.data||{},i=t.launchingContext||{};return i.telemetryId&&(t.telemetryId=i.telemetryId),n}function r(n){f.client.invokeRpc(u.submitProvisionerTelemetry,s.Shell,n)}function a(){f.client.registerRpcEndPoint(u.submitProvisionerTelemetry,{allowedOrigin:null,handler:function(n,t){n.extension=t.srcWindowId;h.trace(n)}})}function v(n){return n||(n={}),n.source=e,n.action=i.ProvisioningStarted,r(o(n)),n}function y(n){return n||(n={}),n.source=e,n.action=i.ProvisioningEnded,r(o(n)),n}var s=n.Base.Constants,u=FxImpl.Constants.RpcMethods,f=n.Base.Rpc.Internal,h=n.Base.Diagnostics.Telemetry,e="Provisioner",i,c,l;(function(n){n.ProvisioningEnded="ProvisioningEnded";n.ProvisioningStarted="ProvisioningStarted"}
)(i||(i={})),(function(n){n.Failed="Failed";n.Succeeded="Succeeded"})(c=t.ActionModifier||(t.ActionModifier={})),(function(n){n.NoPromise="NoPromise";n.Resolved="Resolved";n.UnknownFailure="UnknownFailure"})(l=t.ProvisioningStatus||(t.ProvisioningStatus={}));t.registerTelemetrySubmissionHandler=a;t.traceDeployment=r;t.traceProvisioningStarted=v;t.traceProvisioningEnded=y})(i=t.ProvisioningTelemetry||(t.ProvisioningTelemetry={}))})(i=t.Internal||(t.Internal={}))})(i=t.ParameterCollection||(t.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var k=n.Base,o=FxImpl.Extension,d=k.Images,i=ko.observable,g=ko.observableArray,nt=n.Resources.Strings,s="error",h=412,c=FxImpl.getErrorMap({hasNotBeenImplemented:""}),f,e,r,l,a,v,y,p,u,w,b,tt;(function(n){n[n.None=0]="None";n[n.Executing=1]="Executing"})(f||(f={}));t.CommandStatus=f,(function(n){n[n.Text=1]="Text";n[n.Binary=2]="Binary"})(e||(e={}));t.FileDownloadType=e;
r=(function(){function n(){this.enabled=i(!0);this.icon=i();this.text=i()}return n})();t.CommandBase=r;l=(function(n){function t(){n.apply(this,arguments);this.status=i(0);this.dialog=i()}return __extends(t,n),t.prototype.execute=function(){c.hasNotBeenImplemented("execute")},t.prototype.dialogClick=function(){c.hasNotBeenImplemented("dialogClick")},t})(r);t.Command=l;a=(function(n){function t(){n.apply(this,arguments);this.navigateUri=i("");this.navigateTarget=i("_blank")}return __extends(t,n),t})(r);t.UriCommand=a;v=(function(n){function t(){n.apply(this,arguments);this.navigateUri=i("");this.navigateUriCallback=i(null);this.navigateTarget=i("_blank");this.showUriCallbackConfirmationDialog=i(!1)}return __extends(t,n),t})(r);t.UriCallbackCommand=v;y=(function(n){function t(){n.apply(this,arguments);this.listItems=g();this.selectedItem=i("")}return __extends(t,n),t})(r);t.ListCommand=y;p=(function(n){function t(){n.apply(this,arguments);this.viewModel=i(null)}return __extends(t,n),t})(r);t.DynamicCommand=
p;u=(function(){function n(n,t,i){this.status=n;this.statusCode=t;this.errorMessage=i}return n})();t.FileDownloadStatus=u;w=(function(n){function t(t){var f=this,r,e;n.call(this);this.targetUri=i("");this.targetUriCallback=i(null);this.httpMethod=i("GET");this.httpRequestContent=i("");this.httpRequestContentType=i("application/json");this.headers=i({});this.authorizationToken=i(null);this.targetFileName=i("");this.errorMessage=i("");this.downloadType=i(1);this.downloadStatus=i();this.showUriCallbackConfirmationDialog=i(!1);this.uriCallbackConfirmationDialogOptions=null;this.showDownloadProgressDialog=i(!1);this.downloadProgressDialogOptions=null;this.icon(d.Download());t===!0?r={resourceName:""}:t&&(r=t.authorizationOptions);r&&(e={resourceName:r.resourceName,cloudName:o.selfCloudName},o.getRuntime().getAuthorizationToken(e).then((function(n){n&&n.header?f.authorizationToken(n.header):f.downloadStatus(new u(s,h,nt.FileDownloadCommand.authTokenNotAvailable))}),(function(n){f.downloadStatus(new
u(s,h,n))})))}return __extends(t,n),t})(r);t.FileDownloadCommand=w;b=(function(n){function i(t){n.call(this);var r=t.selectable;r&&r.selectedValue||(t.selectable=i.createSelectableViewModel())}return __extends(i,n),i.createSelectableViewModel=function(n){return new t.Selectable({selectedValue:arguments.length===1?n:{}})},i})(r);t.OpenBladeCommand=b,(function(t){var r;(function(t){function u(n){n.enabled(null);(n.icon||f)(null);(n.text||f)(null)}var r=n.ViewModels,f=i(""),c=(function(n){function t(t){n.call(this,t);u(this)}return __extends(t,n),t})(r.OpenBladeCommand),e,o,s,h;t.OpenBladeCommand=c;e=(function(n){function t(){n.call(this);u(this)}return __extends(t,n),t})(r.FileDownloadCommand);t.FileDownloadCommand=e;o=(function(n){function t(){n.call(this);u(this)}return __extends(t,n),t})(r.Command);t.ExecutableCommand=o;s=(function(n){function t(){n.call(this);u(this)}return __extends(t,n),t})(r.UriCallbackCommand);t.UriCallbackCommand=s;h=(function(n){function t(){n.call(this);u(this)}return __extends(
t,n),t})(r.UriCommand);t.UriCommand=h})(r=t.Dynamic||(t.Dynamic={}))})(tt=t.Commands||(t.Commands={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.title=i();this.shortTitle=i();this.description=i();this.icon=i(n.Base.Images.Shell.DefaultBlade());this.size=i(n.Parts.PartSize.Small)}return t})();t.ButtonPart=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.observable,u=(function(){function n(){this.inputParameters={};this.inputMetadata={};this.options={}}return n})(),t,i;n.ParameterCollectionInput=u;t=(function(){function n(){this.outputParameters={}}return n})();n.ParameterCollectionOutput=t;i=(function(){function n(){}return n.modelToParameters=function(n){var i={},t,r;for(t in n){t in i||(i[t]={});for(r in n[t])i[t][r]=n[t][r]()||""}return i},n.parametersToModel=function(n){var u={},t,i;
for(t in n)for(i in n[t]){if(t in u||(u[t]={}),ko.isObservable(n[t][i])||ko.isComputed(n[t][i]))throw new Error("Parameters cannot be knockout observables.");u[t][i]?u[t][i](n[t][i]):u[t][i]=r(n[t][i])}return u},n})();n.Models=i})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var r=ko.unwrap,t="",u={onProviderCommitMissing:t,onCommitSuccessActionMissing:t,onCommitFailedActionMissing:t},i=FxImpl.getErrorMap(u),f=(function(){function n(n){this._provisioner=null;this._previousOutputs=null;this._previousCommit="";this._previousDetailBladeOutput=null;this._provisioner=n}return n.prototype.onProviderBindingInternalsReceived=function(n,t,u,f,e,o){var a=this,c;if(f||i.onProviderCommitMissing(),e||i.onCommitSuccessActionMissing(),o||i.onCommitFailedActionMissing(),n){var h=r(n.commit),s=r(n.outputs),l=function(){e();a._provisioner.executeProvisioning(
s,t)};!h||h===this._previousCommit||!s||s===this._previousOutputs||!u||u===this._previousDetailBladeOutput||(this._previousOutputs=s,this._previousCommit=h,c=f(null,s),c?c.then((function(n){n?l():o()}),(function(){o()})):l())}},n})();n.CollectorBase=f})(t=n.Internal||(n.Internal={}))})(t=n.ParameterCollection||(n.ParameterCollection={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t,r){var u=n&&n.stepStatuses,f=u&&u.length?u[0].status:0;return i({stepId:"NoWizardStep",status:f,isFirstStep:!0,isLastStep:!0,isOptional:!1,disabled:!1,allowToggleProvisioningLocation:t,masterIsProvisioningPart:r})}var r=n.ViewModels,i=ko.observable,u=" is not implemented",e=(function(n){function e(u,e,o,s){var c;n.call(this);this.editScopeId=i();this.cloudName=i();this._commit=i();this._baseButtonContainer=null;this._basePartSubscriptions=[];this._baseProviderCommit=null;this._initialLoadComplete=!1;c=e&&e.container;
u.selectable=new r.Internal.Selectable({selectedValue:!0,isSelected:!!c&&c.selectable.isSelected});var h={stepStatuses:[]},l=e&&e.content,a=l&&l.currentState;a&&(h=a);this.beginExecuteCommand=i(!1);this.savedState=i(h);this.currentState=i(h);this.stepInput=f(h,o!==!1,s);this.stepOutput=i();this.parameterCollectionErrors=i();this.privateFcTpBI=new t.Internal.CollectorBindingInternals;this._baseButtonContainer=u}return __extends(e,n),e.prototype.onInputsSet=function(n){var i=this,f,u,r,s,e,o;return this.cloudName(t.Internal.getCloudNameFromInputs(n)),f=this.privateFcTpBI,f.inputs(this.getProviderInputs(null)),this._initialLoadComplete||(this._basePartSubscriptions.push(this.parameterCollectionErrors.subscribe((function(n){var t=f.errors;t(n);t([])}))),this._basePartSubscriptions.push(this.stepOutput.subscribe((function(n){i._processStepOutput(n)}))),this._basePartSubscriptions.push(this._baseButtonContainer.selectable.isSelected.subscribe((function(){i.savedState(i.currentState())}))),this._initialLoadComplete=
!0),u=n.fromProviderBindingInternals,u&&(r=u.commit,!r||r===this._baseProviderCommit||(this._baseProviderCommit=r,s=this.onProviderCommit(null,u.outputs),s.then((function(n){n?(i._baseButtonContainer.selectable.isSelected(!1),i._commit(r)):i.parameterCollectionErrors([{errorMessage:"Parameter Collection failed!"}])})))),e=n.stepOutput,e&&this.stepOutput(e),o=this.savedState,o()||o(n.savedState),null},e.prototype.getProviderInputs=function(){throw new Error("'getProviderInputs'"+u);},e.prototype.onProviderCommit=function(){throw new Error("'onProviderCommit'"+u);},e.prototype.dispose=function(){while(this._basePartSubscriptions.length){var n=this._basePartSubscriptions.splice(0,1)[0];n&&!n.isDisposed&&n.dispose()}},e.prototype._processStepOutput=function(n){n&&(this.currentState({stepStatuses:[{stepId:n.stepId,status:n.status}],selectedStepId:n.stepId}),this.beginExecuteCommand(n.status===3))},e})(r.ButtonPart);t.BaseGalleryButtonPartViewModel=e})(i=t.ParameterCollection||(t.ParameterCollection=
{}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.assetType=i();this.assetName=i();this.icon=i();this.assetId=i();this.status=i();this.state=i();this.size=i(n.Parts.PartSize.Small)}return t})();t.AssetPart=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var r=t.Controls.Visualization.Chart.InteractionBehavior,i=n.Parts.PartSize,u=ko.observable,f=(function(t){function f(f){t.call(this,f);this.size=u(i.Small);this.editButtonText=u(n.Resources.Strings.Part.Chart.editButtonText);var e=this.size,o=this.interactionBehavior;e.subscribe(f,(function(n){switch(n){case i.Normal:case i.Small:case i.Wide:o(r.ChartArea_Off|r.XSlider_Off);break;default:o(r.All)}}));e.notifySubscribers(e())}return __extends(f,t),f})(n.ViewModels.Controls.Visualization.Chart.ViewModel);t.ChartPart=f})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||
(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function p(n,t,r){var u;switch(n){case i.FullWidthFitHeight:case i.FitToContainer:case i.HeroWideFitHeight:u=y;break;case i.HeroTall:u=v;break;case i.Large:case i.HeroWide:case i.Tall:u=a;break;case i.Wide:case i.Normal:default:u=l}return u=t?u-1:u,r?u-1:u}function w(n){return n===i.Mini||n===i.Small}function b(n){return n===i.Normal||n===i.Wide}var u=ko.observable,o=ko.observableArray,f=ko.computed,e=n,i=e.Parts.PartSize,c=e.ViewModels,s=c.Controls.Lists.Grid,l=3,a=9,v=14,y=20,r,h;(function(n){n[n.None=0]="None";n[n.Data=1]="Data";n[n.Rollup=2]="Rollup"})(t.GridMode||(t.GridMode={}));r=t.GridMode;h=(function(){function n(n,t){var h=this,c;this.size=u(i.Normal);this.alwaysShowRollupCount=u(!1);this.rollupCount=u();this.rollupCountIconUri=u();this.rollupCountIcon=u();this.rollupCountLabel=u();this._options=null;this._container=null;this._container=n;this._options=t;this.gridMode=u(r.None);this.
hasMoreData=u(!1);c=t.selectableRowExtensionOptions?s.Extensions.SelectableRow:null;this.grid=new s.ViewModel(n,o(),c,t.selectableRowExtensionOptions);this.grid.showHeader=!!t.showHeader;this.grid.columns=o();n.registerForDispose(this.grid);this._options.noRowsMessage&&(this.grid.noRowsMessage||(this.grid.noRowsMessage=u()),f(n,(function(){h.grid.noRowsMessage(h._options.noRowsMessage())})));this.selectableData=this.grid.selectableData;this._reactToDataChange(n,this._options.data,(function(n){return n===r.Data}));this._reactToDataChange(n,this._options.rollupData,(function(n){return n===r.Rollup}));this._reactToSizeChange();this.noRollupCount=f(n,(function(){return e.isNullOrUndefined(h.rollupCount())}))}return n.prototype._reactToDataChange=function(n,t,i){var r=this;t&&(t.items.subscribe(n,(function(){i(r.gridMode())&&r._updateGrid(t)})),f(n,(function(){if(i(r.gridMode())){var n=t.columns();r.grid.columns(n)}})))},n.prototype._reactToSizeChange=function(){var n=this;f(this._container,(function(){
var t=n.size();n.alwaysShowRollupCount();!w(t)&&(n._options.data||n._options.rollupData)?n._options.rollupData&&b(t)||n._options.rollupData&&!n._options.data?n.gridMode(r.Rollup):n._options.data&&n.gridMode(r.Data):n.gridMode(r.None);ko.ignoreDependencies((function(){switch(n.gridMode()){case r.Data:n._updateGrid(n._options.data);break;case r.Rollup:n._updateGrid(n._options.rollupData)}}))}))},n.prototype._updateGrid=function(n){if(n){var t=n.items(),r=this.size(),o=e.Parts.PartSizeHelper.isFixedSize(r),u=o?p(r,this._options.showHeader,this.alwaysShowRollupCount()):t.length;this.hasMoreData(t.length>u);var i=t.slice(0,u),f=this.grid.items.peek(),s=f.length!==i.length||ko.utils.compareArrays(f,i,{sparse:!0}).length>0;s&&this.grid.items(i)}},n})();t.ViewModel=h})(i=t.Collection||(t.Collection={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=ko.observable,r=(function(){function t(){this.resourceCount=
i(0);this.countIsMinimum=i(!1);this.description=i("");this.icon=i(n.Base.Images.Shell.DefaultBlade());this.label=i("");this.size=i(n.Parts.PartSize.Normal)}return t})();t.CollectionSummary=r})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";var t=ko.observable,i=(function(n){function i(){n.apply(this,arguments);this.createName=t("")}return __extends(i,n),i})(n.ButtonPart);n.CreatePart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=(function(t){function r(r){t.call(this,r,n.ViewModels.Controls.Documents.Editor.ContentType.Text,null,null);this.size=i(n.Parts.PartSize.Normal)}return __extends(r,t),r})(n.ViewModels.Controls.Documents.DiffEditor.ViewModel);t.ViewModel=r})(i=t.DiffEditor||(t.DiffEditor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var
t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,r=ko.observableArray,u=(function(){function t(t){this.groupInfos=r();this.itemsDataArray=r();this.itemSetting=i();this.valueInitialized=!1;this.resetItems=i(!0);this.total=i(null);this.startOffset=i(-90);this.totalFormat=i("{0}");this.unitFormat=i("");this.infoFormat=i("");this.numberFormatOptions=i({minimumFractionDigits:0,maximumFractionDigits:1});this.hoveredUnit=i("%");this.hoverInfoFormat=i("{0} {1}{2}");this.selectedInfoFormat=i("{0}/{1}{2}");this.disableSelectOnClick=i(!1);this.showLegend=i(!0);this.size=i(n.Parts.PartSize.Normal);this._msPortalFxRerenderTrigger=i(0);this.metrics=new n.ViewModels.Controls.Visualization.Metrics.ViewModel(t)}return t.prototype.render=function(){this._msPortalFxRerenderTrigger(this._msPortalFxRerenderTrigger.peek()+1)},t})();t.ViewModel=u})(i=t.Donut||(t.Donut={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(
n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls.Documents.Editor,r=ko.observable,u=(function(t){function u(u){t.call(this,u,i.ContentType.Text,null);this.size=r(n.Parts.PartSize.Normal)}return __extends(u,t),u})(i.ViewModel);t.ViewModel=u})(i=t.Editor||(t.Editor={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var u=ko.observableArray,o=ko.isObservable,i=ko.utils.wrap,f="string",r=(function(){function n(n,t){this.text=i(n);typeof t===f||o(t)&&typeof t()===f?this.uri=i(t):this.bladeSelection=i(t)}return n})(),e;t.Link=r;e=(function(){function t(t){this.sections=u();this.bladeLinks=u();this.selection=new n.ViewModels.SelectableSet(this.bladeLinks,function(n,t){return n.bladeSelection().detailBlade===t.detailBlade},function(n){return n.bladeSelection()},t&&t.content&&t.content.selection)}return t.prototype.dispose=
function(){this.selection.dispose()},t.prototype.addSection=function(n,t,u,f){var o=this,e;e=Array.isArray(u)?new r("",undefined):new r("",u);this.sections.push({title:i(n),description:i(t),selection:e,links:Array.isArray(u)?u:null,icon:f});(Array.isArray(u)?u:[e]).forEach((function(n){n.bladeSelection&&o.bladeLinks.push(n)}))},t})();t.ViewModel=e})(i=t.InfoList||(t.InfoList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function f(n){return typeof n=="object"}var h=n,rt=h.Base,c=h.ViewModels,p=c.equalDynamicSelections,l=c.SelectableSet,ut=ko.observable,e=ko.observableArray,o=ko.unwrap,a=ko.pureComputed,r=ko.utils.wrap,v,w="_msPortalFxPropertiesPartSelectionKey",ft=h.Resources.Strings.Part.PropertiesPart,et=new rt.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.PropertiesPart"),ot=(function(){function n(n){var i=this;this._openBladeProperties=null;this.
_openBladeAsyncProperties=null;this._moveResourceProperties=null;this.properties=e();this.addProperty=function(n){i._addProperty(n)};this._openBladeProperties=e();this.selection=new l(this._openBladeProperties,function(n,t){return p(n.bladeSelection(),t)},function(n){return n.bladeSelection()},n&&n.content&&n.content.selection);this._moveResourceProperties=e();this.moveResourceSelection=new l(this._moveResourceProperties,function(n,t){var i=o(n.editBlade.bladeSelection);return p(i,t)},function(n){return o(n.editBlade.bladeSelection)},n&&n.content&&n.content.moveResourceSelection);var t=function(n){return n.label},r=function(n,i){n[w]=t(i)},u=function(n){return n[w]};this._openBladeAsyncProperties=e();this.asyncSelection=new l(this._openBladeAsyncProperties,function(n,i){return u(i)===t(n)},function(){return null},n&&n.content&&n.content.asyncSelection);c.Internal.SelectableSet.setCreateDelayedBladeSelection(this.asyncSelection,(function(n){return{bladeWidth:h.Blades.BladeWidth.Medium,selectedValuePromise:
n.resolveBlade().then((function(t){return r(t,n),t}))}}))}return n.prototype._addProperty=function(n){var t=this;this.properties.push(n);switch(n.getType()){case i.MultiOpenBlades:n.bladeLinks().forEach((function(n){t._openBladeProperties.push(n)}));break;case i.OpenBladeAsync:this._openBladeAsyncProperties.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&this._moveResourceProperties.push(n);break;default:n.bladeSelection&&this._openBladeProperties.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&this._moveResourceProperties.push(n)}return},n.prototype.setProperties=function(n){var t=[],u=[],r=[];n.forEach((function(n){switch(n.getType()){case i.MultiOpenBlades:n.bladeLinks().forEach((function(n){t.push(n)}));break;case i.OpenBladeAsync:u.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&r.push(n);break;default:n.bladeSelection&&t.push(n);n.editBlade&&n.editBlade.editType===s.MoveResource&&r.push(n)}}));this.properties(n);this._openBladeProperties(t);this._openBladeAsyncProperties(
u);this._moveResourceProperties(r)},n.prototype.removeAllProperties=function(){this.properties([]);this._openBladeProperties([]);this._openBladeAsyncProperties([]);this._moveResourceProperties([])},n.prototype.dispose=function(){this.properties().forEach((function(n){n.dispose()}));this.selection.dispose();this.moveResourceSelection.dispose()},n})(),i,s,u,b,k,d,g,y,nt,tt,it;t.ViewModel=ot,(function(n){n[n.Text=0]="Text";n[n.Link=1]="Link";n[n.CopyField=2]="CopyField";n[n.Callback=3]="Callback";n[n.OpenBlade=4]="OpenBlade";n[n.MultiLinks=5]="MultiLinks";n[n.Image=6]="Image";n[n.MultiOpenBlades=7]="MultiOpenBlades";n[n.OpenBladeAsync=8]="OpenBladeAsync"})(t.PropertyType||(t.PropertyType={}));i=t.PropertyType,(function(n){n[n.Unknown=0]="Unknown";n[n.MoveResource=1]="MoveResource"})(t.EditType||(t.EditType={}));s=t.EditType;u=(function(){function n(n){var h=this,t,f,e,u,o,s;this.displayValue=ut("");this.editBladeText=ft.changeLabel;this.label=n.label;this.value=r(n.value);t=n.blade;f=t&&t.displayValue;
this.displayValue=f?r(f):r(n.displayValue);this.copyableValue=r(n.copyableValue);this.visible=r(n.visible===v?!0:n.visible);this.wrappable=r(n.wrappable===v?!1:n.wrappable);e=t&&t.bladeSelection;this.bladeSelection=e?r(e):null;this.infoBalloon=n.infoBalloon;this.editBlade=n.editBlade;u=n.isLoading;this.isLoading=a((function(){return u&&u()}));this._supportsIsLoading=!!u;this.type=this.getType();o=this.hasValidBladeSelection=a((function(){var n=h.bladeSelection;return!!(n&&n())||h.type===i.OpenBladeAsync}));s=o();this._bladeSelectionSub=o.subscribe((function(n){s&&!n&&et.error("A property's bladeSelection should never be updated from a non-null/non-empty value to a null/empty value.");s=n}))}return n.prototype.getType=function(){throw new Error("Subclass needs to provide the property type.");},n.prototype.dispose=function(){this._bladeSelectionSub&&this._bladeSelectionSub.dispose();this.hasValidBladeSelection&&this.hasValidBladeSelection.dispose()},n})();t.Property=u;b=(function(n){function t(t,
i){var u;u=f(t)?t:{label:t,value:i};u.copyableValue=u.value;n.call(this,u);this.icon=r(u.icon)}return __extends(t,n),t.prototype.getType=function(){return i.Text},t})(u);t.TextProperty=b;k=(function(t){function r(i,r,u){var s=this,e;f(i)?(e=i,e.displayValue||(e.displayValue=e.value)):e={label:i,value:r,displayValue:!u?r:u};t.call(this,e);this.copyableValue=a((function(){var t=o(s.displayValue),i=o(s.value);return n.isNullOrWhiteSpace(t)?i:i&&t.toLowerCase()===i.toLowerCase()?t:t+" <"+i+">"}))}return __extends(r,t),r.prototype.getType=function(){return i.Link},r})(u);t.LinkProperty=k;d=(function(n){function t(t,i,r){var u,e=new c.Controls.Forms.CopyableLabel.ViewModel(t);e.disabled(!0);f(i)?u=i:(t&&t.createChildLifetime||(t=v,i=arguments[0],r=arguments[1]),u={label:i,value:r});u.copyableValue=u.value;n.call(this,u);this._valueResponder=ko.computed((function(){var n=o(u.value);e.value(n)}));this.value=e}return __extends(t,n),t.prototype.getType=function(){return i.CopyField},t.prototype.dispose=
function(){n.prototype.dispose.call(this);this._valueResponder.dispose();this.value.dispose()},t})(u);t.CopyFieldProperty=d;g=(function(n){function t(t,i,u,e){var s=this,o;o=f(t)?t:{label:t,displayValue:i,callback:u,icon:e};o.copyableValue=o.displayValue;n.call(this,o);this.callback=o.callback;this.icon=r(o.icon);this.callbackWrapper=function(){return s.callback(),!1}}return __extends(t,n),t.prototype.getType=function(){return i.Callback},t})(u);t.CallbackProperty=g;y=(function(n){function t(t,i,u){var e,o;e=f(t)?t:{label:t,displayValue:i,bladeSelection:u};o=$.extend({},{blade:{displayValue:e.displayValue,bladeSelection:e.bladeSelection}},e);n.call(this,o);this.copyableValue=r(e.displayValue)}return __extends(t,n),t.prototype.getType=function(){return i.OpenBlade},t})(u);t.OpenBladeProperty=y;nt=(function(n){function t(t,i,r){var u,o;u=f(i)?i:{label:i,bladeLinks:r};n.call(this,u);this.bladeLinks=e();o=u.bladeLinks.map((function(n){return new y({label:"",displayValue:n.displayValue,bladeSelection:
n.bladeSelection})}));o.subscribe(t,this.bladeLinks);this.bladeLinks(o())}return __extends(t,n),t.prototype.getType=function(){return i.MultiOpenBlades},t})(u);t.MultiOpenBladeProperty=nt;tt=(function(n){function t(t,i){var r;r=f(t)?t:{label:t,links:i};n.call(this,r);this.links=r.links}return __extends(t,n),t.prototype.getType=function(){return i.MultiLinks},t})(u);t.MultiLinksProperty=tt;it=(function(n){function t(t,i){var u;u=f(t)?t:{label:t,icon:i};n.call(this,u);this.icon=r(u.icon)}return __extends(t,n),t.prototype.getType=function(){return i.Image},t})(u);t.ImageProperty=it})(i=t.Properties||(t.Properties={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels.Parts.Properties,i=ko.utils.wrap,r=(function(n){function r(t){var r=$.extend({},{blade:{displayValue:t.displayValue,resolveBlade:t.resolveBlade}},t);n.call(this,r);this.resolveBlade=
t.resolveBlade;this.copyableValue=i(t.displayValue)}return __extends(r,n),r.prototype.getType=function(){return t.PropertyType.OpenBladeAsync},r})(t.Property);n.OpenBladeAsyncProperty=r})(t=n.Properties||(n.Properties={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var r=n.Base.Images,i=ko.observable,u=n.Resources.Strings.Part.Provisioning.description,f=(function(n){function t(t,f,e){n.call(this,t,f,e!==!1,!0);this._partContainer=null;this.title=i("");this.description=i(u);this.icon=i(r.Shell.DefaultBlade());this.errorMessage=i();this._partContainer=t;this.icon=i(r.Gear())}return __extends(t,n),t.prototype.onInputsSet=function(t){return n.prototype.onInputsSet.call(this,t)},t.prototype.mutate=function(n){this._partContainer.mutate({containerModel:n})},t})(n.ViewModels.ParameterCollection.BaseGalleryButtonPartViewModel);t.ContentViewModel=f})(i=t.ProvisioningPart||(t.ProvisioningPart={
}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=(function(t){function i(){t.call(this);this.backgroundColor=n.Parts.PartColor.Theme;this.title(n.Resources.Strings.Part.Quickstart.title);this.icon(n.Base.Images.AzureQuickstart())}return __extends(i,t),i})(t.ButtonPart);t.QuickStartPart=i})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground";n[n.TotalValue=3]="TotalValue"})(t.MetricColorBarKind||(t.MetricColorBarKind={}));f=t.MetricColorBarKind;r=(function(){function t(){this.instance=i(0);this.total=i(0);this.instanceQuota=i(100);this.totalQuota=i(100);this.unit=i("");this.hideTotal=i(!1);this.hideQuota=i(!1);this.hideTick=i(!1);this.maximum=i(100);this.startOffset=i(-90);this.
totalArc=i(355);this.captionDisplayFormat=i("{2}");this.valueDisplayFormat=i("{0}");this.metrics=u();this.size=i(n.Parts.PartSize.Normal)}return t})();t.ViewModel=r})(i=t.QuotaGauge||(t.QuotaGauge={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function u(n,t,i,r){return{key:n,extension:t,name:i,name2:r}}function rt(n){return ii.some((function(t){return n.key===t.key}))}function vi(n){var r="<div data-bind='",u=r+"image: {0}' style='height: {1}px; width: {1}px; padding: {2};' alt=''/>",t=function(n,t,r){var u=p.Format.HtmlBindings,f={htmlBindingsTemplate:t};return{itemKey:n,template:t,format:u,formatOptions:f,filterableFormat:u,filterableFormatOptions:f,width:r?i(r):null}},f=[t("icon",u.format("value",15,0),"25px"),t("displayText",r+"text: value' class='msportalfx-text-small msportalfx-text-ellipsis'/>"),t("",u.format("MsPortalFx.Base.Images.Shell.Chevron()",
14,"8px 0 9px 3px"),"30px"),];return n&&f.unshift(t("__placeholder__","","1px")),f}function ft(t){n.isNullOrWhiteSpace(t.group())&&t.group(nt.general)}function ui(n,t){var i=n[ct];ko.reactor(t,(function(){var t=n.displayText()+" "+n.group()+" "+(n.keywords()||[]).join(" ");i(t)}))}var h=n,v=h.Base,k=v.Constants,d=FxImpl.Extension.CloudName,s=k.ExtensionNames,y=h.ViewModels,et=y.Selectable,p=y.Controls.Lists.Grid,g=p.Extensions,f=y.Services.ResourceTypes,oi=v.Diagnostics.Telemetry,r=h.Resources.Strings.Part.SettingList,nt=r.Group,c=r.Keywords,e=v.Images,si=e.Polychromatic,l=h.isNullOrUndefined,tt=ko.utils,i=ko.observable,it=ko.observableArray,hi=k.ResourceTypes.ResourceGroups,ot=FxImpl.Azure,ci=window,st=tt.wrap,ht=tt.arrayFirst,li=v.ImagePalette.Blue,yi=r.resources,pi=r.resourceGroups,ct="aggregatedKeywords",lt="Resource",o=s.Hubs,wi=s.Resources,a=s.Support,at="AzureDiagnosticsBlade",ai=ci.fx.environment.features,vt=ai.newauditlogs==="true",yt=u("__users",s.ActiveDirectory,"UserAssignmentsBlade"),
pt=u("__tags",o,lt+"TagsListBlade"),wt=u("__locks",o,"LocksBlade"),bt=u("__exportTemplate",o,"TemplateViewerBlade"),kt=u("__troubleshoot",a,"TroubleshootBlade"),dt=u("__troubleshootV2",a,"TroubleshootV2Blade"),gt=u("__supportRequest",a,"NewSupportRequestBlade"),ni=u("__resourceHealth",a,lt+"HealthDetailBlade"),ti=vt?u("__eventLogs",s.AzureMonitoring,"EventsBrowseBlade"):u("__eventLogs",s.AzureInsights,at+"FromSettings",at+"WithParameter"),bi=u("__accessDetails",o,"MyAccessBlade"),ki=u("__resourceProviders",o,"RPStatusBlade"),di=u("__resources",o,"Resources"),gi=u("__subCerts",o,"SubCertsBlade"),ii=[yt,pt,wt,bt,kt,dt,gt,ni,ti],w=n.isFeatureEnabled("hidesupport"),ut=(function(){function t(n,t,r,u,f){this.displayText=i("");this.icon=i();this.keywords=it();this.group=i(" ");this.aggregatedKeywords=i("");this._key=n;this._blade=st(t);this._bladeInputs=r;this._extension=st(u);this._options=f}return Object.defineProperty(t.prototype,"key",{get:function(){return this._key},enumerable:!0,configurable:
!0}),t.prototype.getOptions=function(){return this._options},t.prototype.toSelection=function(){var n=this._options;return{key:this._key,detailBlade:this._blade.peek(),detailBladeInputs:this._bladeInputs.peek(),extension:this._extension.peek(),isParameterCollector:!!(n&&n.parameterCollector)}},__decorate([n.Composition.ProxyCompatibilityMode],t)})(),ri,b,fi,ei;t.Setting=ut;ri=(function(n){function t(){n.apply(this,arguments);this._cloudName=k.EmptyCloudName}return __extends(t,n),t.prototype.toSelection=function(){var t=n.prototype.toSelection.call(this),i=this._cloudName,r=this._bladeInputs.peek();return this._extension.peek()===o?d.readFromInputs(r)||this._bladeInputs(d.addToModel(i,r)):t.cloudName=i,t},t})(ut);b=(function(){function t(t,u,e,o){var s=this,k,c,nt,v,y,h,a,w,b;this._cloudAwareSettings=[];k=this.resourceId=i();this.searchBoxPlaceholder=i(r.searchBoxPlaceholder);c=tt.wrapArray(e);o=o||{};v=function(){s._updateSettings(t,c,o,nt);s._processSettings(t)}.bind(this);k.subscribe(t,(function(
t){y=(y||Q()).then((function(){var r=f.isSubscriptionId(t),i=Q();return r&&(i=ot.getSubscriptionInfo(n.Base.Rpc.Internal.client,f.parseSubscriptionDescriptor(t).subscription,s._cloudName).then((function(n){nt=n}),(function(){}))),i.then((function(){v()}))}))}));var ut=g.SelectableRow|g.Filterable,lt=this._searchText=i(""),et={selectableRow:{selectionMode:1,itemMatchesSelection:function(n,t){return n.key===t.key},createSelection:function(n){return n.toSelection()},activateOnSelected:i(!0),initialSelection:u&&u.content&&u.content.settingList&&u.content.settingList.selectableData},filterable:{searchableColumns:it([ct]),searchBoxCloseButtonVisible:i(!1),searchBoxPlaceholder:this.searchBoxPlaceholder,queryString:lt}},st=o&&!l(o.groupable)?o.groupable:!0;st&&(ut|=g.Groupable,et.groupable={groupKey:i("group"),sortFunction:p.SortFunction.SettingListGroupOrder},c().forEach((function(n){ft(n)})));h=new p.ViewModel(t,c,ut,et);this.settingList=h;h.columns=it(vi(st));h.showHeader=!1;h.selectableData.activatedItems.
subscribe(t,(function(n){if(n&&n.length>0){var t=n[0];s._trace(t)}}));a=h.items;w=[];a.subscribe(t,(function(n){w=n}),null,"beforeChange");a.subscribe(t,(function(n){(y||Q()).then((function(){var t=!l(ht(w,rt)),i=!l(ht(n,rt));t&&!i&&v()}))}));a.subscribeArrayChanges(t,(function(n){s._removeSetting(n)||(ui(n,t),ft(n))}),null);this._processSettings(t);b=function(n){t.onInputsSetCallbacks.remove(b);s._cloudName=d.readFromInputs(n);s._cloudAwareSettings.forEach((function(n){n._cloudName=s._cloudName}))};t.onInputsSetCallbacks.add(b)}return t.prototype.isPCv3=function(){return!1},t.prototype._updateSettings=function(t,u,o,s){var et=this,d=u().slice(),a=this.resourceId(),ft,ct;if(h.remove(d,rt),!l(a)){var lt=f.isTenantResource(a),b=f.isSubscriptionId(a),g=f.isResourceGroupId(a),tt=f.isResourceId(a),p=b||g||tt,at=g?a:tt?f.buildResourceGroupIdFromResourceId(a):null,it=g?hi:tt?f.buildResourceTypeFromResourceId(a):null,st=it&&it.toLowerCase().startsWith("microsoft.classic"),ii=i({scope:a}),k=i({resourceId:a}),
ht=i({assetId:a}),y=!l(o),ui=b&&s&&ot.isZeroCapSubscription(s),v=function(n,t,i,r,u,f,e,o,s){var h=new(o?ri:ut)(n.key,n.name,f,n.extension,s);return h.displayText(r),h.icon(i),h.group(t?nt.support:nt.resourceManagement),h.keywords([u]),d[e?"unshift":"push"](h),o&&(h._cloudName=et._cloudName,et._cloudAwareSettings.push(h)),h};!this.isPCv3()||w||y&&o.enableSupportHelpRequest===!1||v(gt,!0,e.Support(),r.helpRequest,c.helpRequest,ht,!1,!1,{parameterCollector:{supplyInitialData:function(){return""},receiveResult:function(){return{}},supplyProviderConfig:function(){return{provisioningConfig:{provisioningEnabled:!0,dontDiscardJourney:!0}}}}});!w&&y&&o.enableSupportResourceHealth&&v(ni,!0,e.HeartPulse(),r.resourceHealth,c.resourceHealth,k,!0);p&&(!y||o.enableSupportEventLogs!==!1)&&v(ti,!0,si.Log(),r.eventLogs,c.eventLogs,vt?i({queryInputs:{id:a}}):k,!0);ft=n.isFeatureEnabled("addtagstosettings");p&&!st&&(y&&(ct=o.enableTags||ct!==!1&&ft)||!y&&ft)&&v(pt,!1,e.Tag(),r.tags,"",k,!1,!0);p&&!ui&&v(
wt,!1,e.Lock(),b?r.locksForSubscriptions:r.locks,"",k,!1,!0);(p||lt)&&(!y||o.enableRbac!==!1)&&v(yt,!1,e.PersonWithFriend(li),r.users,r.access,ii,!1,!0);!p||st||b||o.enableExportTemplate===!1||v(bt,!1,e.Polychromatic.Download(),r.exportTemplate,c.exportTemplate,i({options:{resourceGroup:at,telemetryId:it}}),!1,!0);!w&&y&&(o.enableSupportTroubleshoot||o.enableSupportTroubleshootV2)&&v(o.enableSupportTroubleshootV2?dt:kt,!0,e.Tools(),r.troubleshoot,c.troubleshoot,ht,!0);u(d)}},t.prototype._processSettings=function(n){var t=this;this.settingList.items().slice().forEach((function(i){t._removeSetting(i)||(ui(i,n),ft(i))}))},t.prototype._removeSetting=function(n){var f=this,t=n.toSelection(),i=t.extension,r=t.detailBlade,e=t.key,u=!1;return ii.forEach((function(t){var o=f.settingList.items,s=o().some((function(n){return n.key===t.key}));(w&&i===a||i===t.extension&&(r===t.name||r===t.name2)&&e!==t.key&&s)&&(o.remove(n),u=!0)})),u},t.prototype._trace=function(t){var i={extension:t.extension,detailBlade:
t.detailBlade},r=this._searchText.peek();n.isNullOrWhiteSpace(r)||(i.searchText=r);oi.trace({source:"MsPortalFx.ViewModels.Parts.SettingList",action:"OpenSetting",name:t.key,data:i})},t})();t.BaseViewModel=b;fi=(function(n){function t(t,i,r,u){n.call(this,t,i,r,u)}return __extends(t,n),t})(b);t.ViewModel=fi;ei=(function(n){function t(t,i,r,u){var f=this,o,s,e;n.call(this,t,i,r,u);o=this.selectable=new et;s=this.pcSelectable=new et;this.settingList.selectableData.selectedItems.subscribe(t,(function(n){var r=f.pcSelectable,u=f.selectable,t,i;n.length<1?(u.isSelected(!1),r.isSelected(!1)):(t=n[0],i=t.isParameterCollector?r:u,i.selectedValue(t),i.isSelected(!0))}));e=function(){var n=f.settingList.selectableData;n.selectedItems([]);n.activatedItems([])};o.isSelected.subscribe(t,(function(n){n||e()}));s.isSelected.subscribe(t,(function(n){n||e()}));this._initParameterCollector(t)}return __extends(t,n),t.prototype.isPCv3=function(){return!0},t.prototype._initParameterCollector=function(n){var t=this,i=
this._getCurrentSetting.bind(this),r={selectable:this.pcSelectable,supplyInitialData:function(){var n=i(t.pcSelectable);return n.getOptions().parameterCollector.supplyInitialData()},receiveResult:function(n){var r=i(t.pcSelectable);r.getOptions().parameterCollector.receiveResult(n)},supplyProviderConfig:function(){var r=i(t.pcSelectable),n=r.getOptions().parameterCollector;return n.supplyProviderConfig?n.supplyProviderConfig():null}};this.parameterCollector=new y.ParameterCollector(n,r)},t.prototype._getCurrentSetting=function(n){var t=n.selectedValue.peek();return this.settingList.items.peek().first((function(n){return n.key===t.key}))},t})(b);t.ViewModelV2=ei})(i=t.SettingList||(t.SettingList={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){"use strict";var r=n.ViewModels.ParameterCollection.Internal,u=ko.observable,f=n.ViewModels.ContentState,e=new n.Base.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.SetupPart"),
o=n.Services.Gallery.Constants.GalleryOptionsKey,s=(function(i){function s(n,t){i.call(this,n,t,!1);this._setupPartContainer=null;this._previousCommit=null;this._outputs=null;this._setupPartContainer=n;this.provisioningEntity={cloudName:u(),enableProvisioning:u(!0),privatePcPrBI:new r.ProvisioningEntityBindingInternals}}return __extends(s,i),s.prototype.onInputsSet=function(n){return this.provisioningEntity.cloudName(r.getCloudNameFromInputs(n)),this._loadContent(),i.prototype.onInputsSet.call(this,n)},s.prototype.mutateOnLoad=function(){return null},s.prototype.mutate=function(n,t){this._setupPartContainer.mutate({partName:n,extensionName:t})},s.prototype.onProviderCommit=function(t,i){return this._outputs=i,n.Helpers.resolve(!0)},s.prototype._loadContent=function(){var i=this,n=this._setupPartContainer,r=this.mutateOnLoad(),t=function(){i._commit.subscribe(n,(function(n){i._executeProvisioningIfApplicable(n)}))};r?r.then((function(i){i?typeof i=="string"?n.mutate({partName:i}):n.mutate(i):
t()}),(function(){e.error("Extension's mutateOnLoad() function returned a promise that failed.");t()})):t()},s.prototype._executeProvisioningIfApplicable=function(i){var a=this,s,u;if(this._outputs&&(s=this._previousCommit,this._previousCommit=i,!n.deepEquals(s,i)&&t.ActionBars.Base.isCompleted(this.stepOutput()))){u=this._setupPartContainer;u.selectable.isSelected(!1);u.contentState(f.None);var v=new r.Provisioner(this.provisioningEntity),y=this._outputs,h=this.privateFcTpBI.inputs().options,c=v.executeProvisioning(y,h);u.operations.add(c,{blockUi:!0});var p=h[o].uiDefinition,l=p.markup.reference,w=l.partName,b=l.partExtension;c.then((function(){u.mutate({partName:w,extensionName:b})}),(function(){e.error("executeProvisioning callback failed.");u.contentState(f.Error);a.beginExecuteCommand(!1)}))}},s})(t.ProvisioningPart.ContentViewModel);i.Content=s})(i=t.SetupPart||(t.SetupPart={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";
function r(){return{size:i(n.Parts.PartSize.HeroWide),editButtonText:n.Resources.Strings.Part.Chart.editButtonText}}var i=ko.observable,u=(function(t){function i(n,i){var i=$.extend(r(),i);t.call(this,n,i);this._initSimpleChartPartOptions(i)}return __extends(i,t),i.prototype._initSimpleChartPartOptions=function(t){var i=this,r=t;n.shallowCopyFromObject(i,r,["size","editButtonSelectable","editButtonText"])},i})(n.ViewModels.Controls.Visualization.SimpleChart.ViewModel);t.SimpleChartPart=u})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=ko.observable,u=ko.observableArray,f,r;(function(n){n[n.None=0]="None";n[n.CurrentValue=1]="CurrentValue";n[n.GaugeBackground=2]="GaugeBackground"})(t.MetricColorBarKind||(t.MetricColorBarKind={}));f=t.MetricColorBarKind;r=(function(){function t(){this.maximum=i(100);this.current=i(0);this.unit=i("");this.metrics=u();this.size=i(n.Parts.PartSize.Normal)}
return t})();t.ViewModel=r})(i=t.SingleValueGauge||(t.SingleValueGauge={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var o=n.Data,i=n.Base.Utilities.Internal.Serialization,r=ko.observable,u=i.fromSerializableObject,f="",s={bothCallbacks:f,alreadySubscribed:f},e=FxImpl.getErrorMap(s),h=(function(){function f(n,t){this.defaultActionBarInput=r({isLastStep:!0,allowToggleProvisioningLocation:!0,status:null});this._configFromCollector=r();this._hasSentResult=!1;this._getResultSubscribers=[];!t.mapIncomingDataForEditScope==!t.mapIncomingDataForEditScopeAsync&&e.bothCallbacks();this._options=t;this._prepareEditScopeWithInitialData(n);this._setUpActionBarWatcher(n)}return Object.defineProperty(f.prototype,"editScope",{get:function(){return this._editScopeView.editScope},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"configFromCollector",{get:function(){return this._configFromCollector}
,enumerable:!0,configurable:!0}),f.prototype.getResultsBeforeCommit=function(n){var t=this._getResultSubscribers.some((function(t){return t===n}));t&&e.alreadySubscribed();this._getResultSubscribers.push(n)},f.prototype.getResults=function(){var n=this._editScopeView.editScope&&this._editScopeView.editScope(),t;return n&&(t=this._options.mapOutgoingDataForCollector(n.root)),t},f.prototype._prepareEditScopeWithInitialData=function(n){var r=this,e,s,h,f;this.bladeCallable=new t.Internal.BladeCallable(n,{receiveParams:function(n){var f=u(n.initialData),t=n.providerConfig;t&&i.isSerializedObject(t)&&(t=u(t));r._configFromCollector(t);r._options.mapIncomingDataForEditScope?(s=r._options.mapIncomingDataForEditScope(f),e=Q({})):e=r._options.mapIncomingDataForEditScopeAsync(f).then((function(n){s=n}))}});h=this._editScopeCache=o.EditScopeCache.createNew({entityTypeName:this._options.editScopeMetadataType,supplyNewData:function(){return s}});n.registerForDispose(h);this._editScopeView=h.createView(
n);n.onInputsSetCallbacks.add((function(t){if(t.editScopeId&&t.editScopeId!==r._editScopeId){r._editScopeId=t.editScopeId;f=e.then((function(){return r._editScopeView.fetchForNewData(r._editScopeId)}));var i=n;typeof i.revealContent=="function"&&(f=f.then((function(){i.revealContent()})))}return f}))},f.prototype._setUpActionBarWatcher=function(n){var t=this,i=function(n){n&&n.status===3&&(t._hasSentResult||(t._hasSentResult=!0,t._discardEditScopeAndSendResult({actionBarOutput:n})))};n.onInputsSetCallbacks.add((function(n){i(n.internal_parameterProviderActionBarOutput);return}));ko.reactor(n,(function(){if(ko.isObservable(n._actionBar)){var t=n._actionBar();t&&i(t.output())}}))},f.prototype._discardEditScopeAndSendResult=function(n){var t=this._editScopeView,r=t.editScope&&t.editScope(),u,f,e;r&&(u=this._options.commitResult,u&&u(r.root),f=this._options.mapOutgoingDataForCollector(r.root,n),this.bladeCallable.sendResult({resultData:i.toSerializableObject(f)}),this._getResultSubscribers.forEach((function(
n){n.receiveResult(f)})),e=this._editScopeCache,e.disposeAndDiscardEdits(this._editScopeId,t))},__decorate([n.Composition.ProxyCompatibilityMode],f)})();t.ParameterProvider=h})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var f=n.Base.Utilities.Internal.Serialization,u=undefined,i="",e={missingSelectable:i,bothSelectables:i,fieldAccessorAndCallbacks:i,missingCallbacks:i},r=FxImpl.getErrorMap(e),o=(function(){function n(n,i){var c=i.selectable,s=i.selectableSet,v=n.selectable,l=s?null:c||v,e=i.formFieldValueAccessor,o=i.receiveResult?i.receiveResult.bind(i):u,h=i.supplyInitialData?i.supplyInitialData.bind(i):u,a=i.supplyProviderConfig?i.supplyProviderConfig.bind(i):u;l||s||r.missingSelectable();c&&s&&r.bothSelectables();e?(o||h)&&r.fieldAccessorAndCallbacks():o||r.missingCallbacks();this.bladeCaller=new t.Internal.BladeCaller(n,{forceInvocation:i.fxInternalFI,invokeOnSelectable:l,invokeOnSelectableSet:i.selectableSet,supplyParams:
function(t){var i=null,r;return h?i=h(t):e&&(r=e.getEditableObservable(n),i=r()),{initialData:f.toSerializableObject(i),providerConfig:a?a(t):null}},receiveResult:function(t,i){var r=f.fromSerializableObject(t.resultData),u;o?o(r,i):(u=e.getEditableObservable(n),u(r))}})}return n})();t.ParameterCollector=o})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function e(n,i){return t.getProvisioningOperationEndPoint.acquireObject(i?i:f.client,u.Constants.Shell,n).then((function(n){var t=n&&n.getValue(),i;if(t)return i=t.provisioningPromise,i?(i.finally((function(){n.dispose()})),Q(t)):(n.dispose(),Q.reject("The provisioning operation was invalid."))}))}var u=MsPortalFx.Base,f=u.Rpc.Internal,i=n.Constants.RpcMethods,r=f.ProxiedObjectTypeDefinition;t.initiateProvisioningRequestEndPoint=new r(i.initiateProvisioningRequest);t.getProvisioningRequestEndPoint=new r(i.getProvisioningRequest);t.getProvisioningOperationEndPoint=
new r(i.getProvisioningOperation);t.getProvisioningOperation=e})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n){return typeof n=="function"}function g(n){n||r.optionsMissing();u(n.supplyProvisioningPromise)||r.supplyProvisioningPromiseMissing();u(n.supplyStartboardInfo)||r.supplyStartboardInfoMissing();var t=n.parameterProvider;(n.actionBar?t:!t)||r.providerAndActionBar()}var e=n.Base,p=FxImpl.Extension.CloudName,w=n.ViewModels,l=FxImpl.ViewModels.ParameterCollectionV3,b=e.Rpc.Internal,a=e.Utilities.clone,o=w.ParameterCollection.Internal.ProvisioningTelemetry,v=o.ActionModifier,h=o.ProvisioningStatus,c=ko.observable,k=window,y=k.fx.environment,f=undefined,i="",d={optionsMissing:i,supplyProvisioningPromiseMissing:i,supplyStartboardInfoMissing:i,providerAndActionBar:i,automaticProvisioning:i,invalidStarboardInfo:i,badStarboardInfo:i,requestAlreadyExists:
i,refKeyDoesntMatch:i,provisionerIdMissing:i,provisionerNotFound:i,refKeyMissing:i,requestNotFound:i},r=FxImpl.getErrorMap(d),nt=(function(){function t(i,r){var o=this,f,s,v,e,h,l;this.provisioningConfig=c();this.provisioningPromise=c();this.provisionOnStartboard=c(!1);this._isCustomProvisioning=!0;this._actionBarSupportsForceInProgressStatus=!1;this._actionBarSupportsIsProvisioningBlade=!1;this._actionBarSupportsProvisionOnStartboardPart=!1;this._actionBarSupportsSecondaryLinkDisplayText=!1;this._actionBarSupportsSecondaryLinkValidation=!1;this._actionBarSupportsShowActionBar=!1;g(r);this._options=r;f=this._actionBar=r&&r.actionBar;s=!1;f&&(s=this._actionBarSupportsIsProvisioningBlade=u(f.isProvisioningBlade),this._actionBarSupportsForceInProgressStatus=u(f.forceInProgressStatus),this._actionBarSupportsProvisionOnStartboardPart=u(f.provisionOnStartboardPart),this._actionBarSupportsSecondaryLinkDisplayText=u(f.secondaryLinkDisplayText),this._actionBarSupportsSecondaryLinkValidation=u(f.
secondaryLinkTriggerValidation),this._actionBarSupportsShowActionBar=u(f.showActionBar));v=this._provisionerId=n.getUniqueId();t.provisionersList[v]=this;e=r.parameterProvider;e&&(e.getResultsBeforeCommit(this),h=function(n){var i=n&&n.provisioningConfig,r,t,u;i&&(o.provisioningConfig(a(i)),r=i&&i.galleryCreateOptions,t=r&&r.launchingContext,t=o._launchingContext=a(t)||{},t.extVersion=y.version,u=o._telemetryId,!u||(t.telemetryId=u),s&&f.isProvisioningBlade(n.provisioningConfig.provisioningEnabled))},h(e.configFromCollector()),e.configFromCollector.subscribe(i,h));t._registerRpcCallbacks();l=function(n){o._cloudName=p.readFromInputs(n);i.onInputsSetCallbacks.remove(l);return};i.onInputsSetCallbacks.add(l)}return t.prototype.dispose=function(){delete t.provisionersList[this._provisionerId]},t.prototype.startProvisioning=function(n){this._actionBar&&r.automaticProvisioning();var t=this._options.supplyStartboardInfo(n);return t&&!s.isValid(t)&&r.invalidStarboardInfo(),this.provisionOnStartboard(
!!t),this._initiateProvisioningRequest(n,t)},t.prototype.receiveResult=function(n){var t=this.provisioningConfig()||{};t.provisioningEnabled&&this._beginProvisioning(n)},t.prototype._beginProvisioning=function(n){var t,i=this._actionBarSupportsProvisionOnStartboardPart&&this._actionBar.provisionOnStartboardPart();return this.provisionOnStartboard(i),i&&(t=this._options.supplyStartboardInfo(n)||this.provisioningConfig().startboardProvisioningInfo,s.isValid(t)||r.badStarboardInfo()),this._initiateProvisioningRequest(n,t)},t.prototype._initiateProvisioningRequest=function(i,u){var a=this,c=this._launchingContext||{},h,o,s;return c.telemetryId||(c.telemetryId=this._telemetryId=n.newGuid()),c.extVersion||(c.extVersion=y.version),h=this._createEventBase.bind(this),this._traceProvisioningStarted(h()),o=this._options.supplyProvisioningPromise(i),this.provisioningPromise(o),o?(o.then((function(n){a._traceProvisioningEnded(n,!0,h())}),(function(n){a._traceProvisioningEnded(n,!1,h())})),s=n.getUniqueId(
),t.provisioningRequestsLookup[s]&&r.requestAlreadyExists(),t.provisioningRequestsLookup[s]={provisioningConfig:this.provisioningConfig(),provisioningRefKey:s,provisioningPromise:o,startboardInfo:u},l.initiateProvisioningRequestEndPoint.acquireObject(t.rpcClient,e.Constants.Shell,{provisionerId:this._provisionerId,provisioningRefKey:s,cloudName:this._cloudName}).then((function(n){n.getValue().provisioningRefKey!==s&&r.refKeyDoesntMatch();n.dispose()}))):this._traceProvisioningEnded(f,f,h()),o},t._registerRpcCallbacks=function(){t._rpcRegistered||(l.getProvisioningRequestEndPoint.registerObjectFactory(t.rpcClient,{allowedOrigin:[e.Constants.Shell],allowRemoteChanges:!0,handler:function(n){var i=n.provisionerId,u;if(i||r.provisionerIdMissing(),u=t.provisionersList[i],u)return Q(u.getProvisioningRequest(n.provisioningRefKey));r.provisionerNotFound(i)}}),t._rpcRegistered=!0)},t.prototype.getProvisioningRequest=function(n){var i,u;return n||r.refKeyMissing(),i=t.provisioningRequestsLookup[n],
i||r.requestNotFound(n),u=i.provisioningPromise,u&&u.finally((function(){delete t.provisioningRequestsLookup[n]})),i},t.prototype._createEventBase=function(){var n=this._launchingContext,t={source:f,action:f,name:n&&n.galleryItemId,data:{isCustomProvisioning:this._isCustomProvisioning,provisionOnStartboard:this.provisionOnStartboard()}};return n&&(t.data.launchingContext=n),t},t.prototype._traceProvisioningStarted=function(n){return o.traceProvisioningStarted(n)},t.prototype._traceProvisioningEnded=function(n,t,i){var r=i||{};return r.actionModifier||(r.actionModifier=t===f||t?v.Succeeded:v.Failed),r.data||(r.data={}),r.data.provisioningStatus||(r.data.provisioningStatus=t===f?h.NoPromise:t?h.Resolved:h.UnknownFailure),o.traceProvisioningEnded(r)},t.rpcClient=b.client,t.provisioningRequestsLookup={},t.provisionersList={},t._rpcRegistered=!1,t})(),s;t.Provisioner=nt;s=(function(){function n(){}return n.isValid=function(n){n=n||{};var t=n.provisioningPart||{},i=n.startboardPart||{};return!!t.
name&&!!t.extension&&!!i.name&&!!i.extension&&!!n.startboardPartKeyId},n})();t.StartboardInfo=s})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";n.pollingInterval=2e3;n.pollingRetries=10})(t=n.ParameterCollectionV3||(n.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(i){"use strict";function o(n){return typeof n=="function"}function s(n,t){return t===void 0&&(t=u.pollingRetries),u.getProvisioningOperation(n).catch((function(i){return--t?Q.delay(u.pollingInterval).then((function(){return s(n,t)})):Q.reject(i)}))}var u=FxImpl.ViewModels.ParameterCollectionV3,r=ko.observable,f=new n.Base.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),h=f.warning.bind(f),e=n.Base.Utilities.clone,c=(function(i){function u(u,f){var e=this,h,c,s;i.call(this);this.description=r("");this.
errorMessage=r();this.icon=r(n.Base.Images.Shell.DefaultBlade());this.initialData=r();this.updatedData=r();this.provisioningPromise=r();this.provisioningStarted=r(!1);this.statusUnknown=r(!1);this.title=r("");this._shouldBlockUiWhenProvisioning=!0;this._provisioningConfig=r();this._delayPromise=Q.delay(2e3);h=f&&f.container||{};c=h.selectable&&h.selectable.selectedValue||!0;u.selectable=t.Part.createSelectableViewModel(f,c);this._partContainer=u;this.icon=r(n.Base.Images.Gear());s=f&&f.content||{};this.initialData(s.initialData);this.updatedData(s.updatedData);this.statusUnknown(s.statusUnknown);this.errorMessage(s.errorMessage);this.provisioningPromise.subscribe(u,(function(n){if(n)if(e._shouldBlockUiWhenProvisioning&&u.operations.add(n,{blockUi:!0}),o(e.onProvisioningPromiseAcquired))e.onProvisioningPromiseAcquired(n);else n.then((function(n){e.mutateIntoStartboardPart(n)}),(function(n){if(o(e.onProvisioningPromiseError))e.onProvisioningPromiseError(n);else e.errorMessage(n)}))}))}return __extends(
u,i),Object.defineProperty(u.prototype,"provisioningConfig",{get:function(){if(!this._provisioningConfig()){var n=this.initialData();this._provisioningConfig(e(n&&n.provisioningConfig))}return this._provisioningConfig()},set:function(n){this._provisioningConfig(e(n))},enumerable:!0,configurable:!0}),u.prototype.onInputsSet=function(n){n&&n.initialData&&(this.initialData(n.initialData),this.provisioningPromise()||this.errorMessage()||this.statusUnknown()||(this.provisioningStarted(!0),this._fetchProvisioningPromise()));return},u.prototype.mutateIntoStartboardPart=function(n){var u=this,t=this.initialData(),i,r;if(!t||!t.startboardPart){this.errorMessage("Could not mutate into target part");throw new Error("Initial data was not persisted correctly to the part's viewstate. Make sure the 'initialData' property is added to your Part.ViewStateProperties in your PDL.");}i=t.startboardPart;r={partName:i.name,extensionName:i.extension,containerModel:n};this._delayPromise.then((function(){u._partContainer.
mutate(r)}))},u.prototype._fetchProvisioningPromise=function(){var n=this,t=this.initialData().provisioningRefKey;!t||s(t).then((function(t){var i=t.provisioningPromise;if(i)n.updatedData(t.data),n.provisioningPromise(i);else throw new Error("Provisioning operation missing promise");})).catch((function(t){n.statusUnknown(!0);h(t)}))},__decorate([n.Composition.ProxyCompatibilityMode],u)})(t.ButtonPart);i.ProvisioningPart=c})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function o(n){return typeof n=="function"}var f=n.Base,u=n.ViewModels,v=f.Diagnostics,i=u.Controls.Lists.Grid,y=f.Utilities,r=ko.observable,e=ko.observableArray,s=v.Log.writeEntry,h=1,c="msportalfx-text-regular msportalfx-text-muted-50 msportalfx-text-ellipsis msportalfx-tooltip-overflow",l="Pickers",a="Metadata is null. Unable to set {0} flag.",p=(function(t){function v(
n,i,f){var e=this,s,h;if(t.call(this,n),this.showSelectButton=r(!1),this.triggerSelectAction=r(""),this.showInfoBox=r(!1),this._basicTemplate="<div style='height: 40px; margin-top: 10px'><!-- ko if: settings.item.icon --><div style='width: 30px; height: 30px; float: left; margin-right: 10px;' data-bind='image: settings.item.icon'><\/div><!-- /ko --><div><div><div data-bind='text: value()' class='msportalfx-text-header-regular msportalfx-text-ellipsis msportalfx-tooltip-overflow'><\/div><\/div><div><!-- ko if: settings.item.subtitle --><div class='"+c+"' data-bind='text: settings.item.subtitle' style='max-width: 60%; float: left'><\/div><!-- /ko --><!-- ko if: settings.item.detail --><div class='"+c+"' style='max-width: 20%; float: right' data-bind='text: settings.item.detail'><\/div><!-- /ko --><\/div><\/div><\/div>",!f.dataNavigator==!f.items)throw new Error("For PickerBase options, specify dataNavigator or items (not both).");this.showSelectButton(f.allowMultiSelect||!1);s=f.createNewOptions;
this.showCreateAction=r(s&&!!s.title&&!!s.dynamicBladeSelection);this._buildAddNewGrid(n,s);this._buildPickerGrid(n,f);this.pickerGrid.selectableData.selectedItems.subscribe(n,(function(n){var t=e.showSelectButton(),i,r,u;n&&n.length>0?(e.addNewGrid&&e.addNewGrid.selectableData&&e.addNewGrid.selectableData.selectedItems&&e.addNewGrid.selectableData.selectedItems([]),i=void 0,t||(r=n[0],i=e.dataModel&&!f.isItemInDataModel(r,e.dataModel())),(i||t)&&(u=f.mapItemsToDataModel(n),e._saveToEditScope(u))):t&&e._saveToEditScope(null)}));this.pickerGrid.items.subscribeArrayAdds(n,(function(n){n.disabled&&n.disabled()?e._disableGridItem(n):e.dataModel&&f.isItemInDataModel(n,e.dataModel())&&e._selectGridItem(n)}));this.parameterProvider=new u.ParameterProvider(n,{mapIncomingDataForEditScope:function(n){return{pickedItems:r(f.mapIncomingDataToDataModel(n))}},mapOutgoingDataForCollector:function(n){return n.pickedItems()}});this.addNewItemCollector=new u.ParameterCollector(n,{supplyInitialData:function(
){return o(s.supplyInitialData)?s.supplyInitialData():{}},receiveResult:function(n){o(s.receiveResults)&&s.receiveResults(n);e.addNewGrid.selectableData.selectedItems([]);e._saveToEditScope(n)},supplyProviderConfig:function(){if(o(s.supplyProviderConfig))return s.supplyProviderConfig()},selectableSet:this.addNewGrid.selectableData});this.addNewGrid.selectableData&&this.addNewGrid.selectableData.selectedItems&&this.addNewGrid.selectableData.selectedItems.subscribe(n,(function(n){n&&n.length>0&&e.pickerGrid.selectableData.selectedItems([])}));h=n.createChildLifetime();ko.computed(h,(function(){if(e.parameterProvider.editScope()){var n=e.parameterProvider.configFromCollector();f.loadPickerItems(n||{},e.dataModel());h.dispose()}})).extend({throttle:50})}return __extends(v,t),v.prototype.openCreateNewBlade=function(){var n=this.addNewGrid.items,t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.selected(!0))},v.prototype.disableCreateNewOption=function(){var n=this.addNewGrid.items,
t=n&&n()||[],i;t.length&&(i=this.addNewGrid.getRowMetadata(t[0]),i.disabled(!0))},v.prototype._saveToEditScope=function(t){this.dataModel(t);this.showSelectButton()||this.triggerSelectAction(n.getUniqueId())},v.prototype._buildPickerGrid=function(t,u){var s=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}},{itemKey:"infoBalloon",format:i.Format.HtmlBindings,width:r("35px"),formatOptions:{htmlBindingsTemplate:"<!-- ko if: value --><div data-bind='pcDockedBalloon:value'><\/div><!-- /ko -->"}}],o={selectionMode:u.allowMultiSelect?2:1},f;f=u.dataNavigator?this.pickerGrid=new i.ViewModel(t,null,i.Extensions.SelectableRow|i.Extensions.Pageable,{selectableRow:o,pageable:{type:i.PageableType.Sequential,dataNavigator:u.dataNavigator}}):this.pickerGrid=new i.ViewModel(t,u.items,i.Extensions.SelectableRow,{selectableRow:o});f.columns=e(s);f.showHeader=!1;f.noRowsMessage(n.Resources.Strings.ViewModels.Controls.noRowsMessage)},v.prototype.
_buildAddNewGrid=function(n,t){var u,o={activateOnSelected:r(!0),selectionMode:1},h=e(),s;!t||!t.title||!t.dynamicBladeSelection||(u=[{name:r(""),itemKey:"title",format:i.Format.HtmlBindings,formatOptions:{htmlBindingsTemplate:this._basicTemplate}}],h([{title:r(t.title),icon:r(f.Images.AddBoxed()),item:null}]),o=y.extend(o,{itemMatchesSelection:function(){return!0},createSelection:function(){return t.dynamicBladeSelection}}));s=this.addNewGrid=new i.ViewModel(n,h,i.Extensions.SelectableRow,{selectableRow:o});u&&(s.columns=e(u));s.showHeader=!1},Object.defineProperty(v.prototype,"dataModel",{get:function(){var n=this.parameterProvider.editScope();return n&&n.root&&n.root.pickedItems},enumerable:!0,configurable:!0}),v.prototype._selectGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?t.selected()||t.selected(!0):s(h,l,a.format("selected"))}},v.prototype._disableGridItem=function(n){if(n){var t=this.pickerGrid.getRowMetadata(n);t?(t.disabled(!0),t.selected()&&t.selected(
!1)):s(h,l,a.format("disabled"))}},__decorate([n.Composition.ProxyCompatibilityMode],v)})(u.Controls.Loadable.ViewModel);t.PickerBase=p})(i=t.Pickers||(t.Pickers={}))})(i=t.ParameterCollectionV3||(t.ParameterCollectionV3={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.Base,f=i.Rpc.Internal,e=new i.Diagnostics.Log("MsPortalFx/Hubs/Notifications"),r="Only one of asset/blade/uri can be specified",o,u;(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(t.NotificationStatus||(t.NotificationStatus={}));o=t.NotificationStatus;u=(function(){function t(t){var u=this,i;if(t.asset&&t.linkedBlade)throw new Error(r);["status","title","description","descriptionAsHtml","percentComplete","asset","uri","uriAction","linkedBlade","additionalProperties"].forEach((function(n){u[n]=t[n]}));this.correlationIds=["clientNotification-"+
n.getUniqueId()];i=t.correlationIds;i&&i.length&&Array.prototype.push.apply(this.correlationIds,i)}return t.prototype.validate=function(){var n=this.title||"",t=this.description||"";if(n.trim()&&t.trim())return!0;e.error("Missing title/description")},t.prototype.package=function(n){var t=this;return{timestamp:new Date,status:t.status,title:t.title,description:t.description,descriptionAsHtml:t.descriptionAsHtml||!1,correlationIds:t.correlationIds,percentComplete:t.percentComplete,asset:t.asset,isRecommendation:!1,cloudName:n,uri:t.uri,linkedBlade:t.linkedBlade,additionalProperties:t.additionalProperties}},t.prototype.publish=function(){var n=this;if(n.validate()){if(n.asset&&n.linkedBlade)throw new Error(r);FxImpl.Hubs.Notifications.addClientNotficationDefinition.invoke(f.client,i.Constants.Shell,n.package())}},t.publish=function(n){var i=new t(n);return i.publish(),i},t})();t.ClientNotification=u})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(MsPortalFx||(MsPortalFx=
{})),(function(n){var t;(function(t){var i;(function(t){"use strict";var r=MsPortalFx.Base,u=r.Rpc.Internal,o=MsPortalFx.Hubs.Notifications,f=n.Constants.RpcMethods,i=u.FuncEndPointDefinition,s,e;t.addClientNotficationDefinition=new i(f.addClientNotification);t.addClientNotficationsDefinition=new i(f.addClientNotifications),(function(n){n[n.NavigatePortal=0]="NavigatePortal";n[n.OpenInNewTab=1]="OpenInNewTab";n[n.OpenInCurrentTab=2]="OpenInCurrentTab"})(t.ClientNotificationUriAction||(t.ClientNotificationUriAction={}));s=t.ClientNotificationUriAction;t.showModalNotification=new i("showModalNotification");e=(function(n){function i(t,i){n.call(this,t);this.cloudName=i}return __extends(i,n),i.prototype.publish=function(){var i=this,n;if(i.validate())return n=i.package(i.cloudName),n.isServerEvent=!1,t.addClientNotficationDefinition.invoke(u.client,r.Constants.Shell,n),n.timestamp},i.internalPublish=function(n,t){var r=new i(n,t);return r.publish(),r},i})(o.ClientNotification);t.InternalClientNotification=
e})(i=t.Notifications||(t.Notifications={}))})(t=n.Hubs||(n.Hubs={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t;(function(n){var t=MsPortalFx.Base.Rpc.Internal.FuncEndPointDefinition;n.getLockValidation="isLocked";n.isLockedEndpoint=new t(n.getLockValidation)})(t=n.Lock||(n.Lock={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function i(n){return typeof n=="string"}function c(n){return typeof n=="object"}function u(n){var t={};if(n)return MsPortalFx.forEachKey(n,(function(n,r){var e=i(n)&&n.toLowerCase()||n,f=r;try{f=JSON.parse(f)}catch(o){}f&&(t[e]=c(f)&&u(f)||f)})),t}function f(n,t,u){var o=n.message,a=$.map(n.details,(function(n){return[n]})),c=[],e="",s="",l,h;return(o&&(l=o.error||{},e=l.message||o.message,s=l.code||o.code,e||i(o)?e&&!i(e)&&(e=JSON.stringify(e)):e=JSON.stringify(o)),t&&a&&(c=a.map((function(n){return f(n,t-1,u)}))),e=e||o,s=s||
n.code,h=s&&r.format(e,s)||e,u)?(c.length&&(h=h.concat(" "+c.join(", "))),h):{error:h,details:c}}function e(n,t){var e;if(t===void 0&&(t=!0),n){var i=u(n),o=i.code&&r.format(i.message,i.code)||i.message,h=$.map(i.details,(function(n){return[n]})),c=(h||[]).map((function(n){return f(n,s,t)}));e={error:o,details:c}}return e}function o(n,t){var i=e(n),r=i.error||t||"";return MsPortalFx.forEachKey(i.details,(function(n,t){r+=" "+t})),r}function l(n,t,i){var r=MsPortalFx.Base.Utilities.extend({message:t},{name:n.name,stack:n.stack,code:i||n.code,readyState:n.readyState,status:n.status,statusText:n.statusText});return r.readyState!==0||r.status||(r.status=0,r.statusText="ajax readyState was zero"),r}function a(t){var r,f,e=t.responseText,u=t.responseJSON&&(t.responseJSON.error||t.responseJSON.Error||t.responseJSON),s=u&&(u.message||u.Message);if(s)r=o(u),f=u.code;else if(e)r=e;else if(t.message)r=t.message;else{if(t instanceof Error)return t;r=i(t)?t:"Unknown error occurred. Detail: "+n.Diagnostics.
getLogFriendlyMessage(t)+"."}return l(t,r,f)}function v(n){return h.test(JSON.stringify(n))?{code:"Scrubbed",message:"Object may contain sensitive data."}:n}var r=MsPortalFx.Resources.Strings.Azure.errorMessageWithCode,s=2,h=new RegExp("password","ig");t.parseArmError=e;t.parseArmErrorToMessage=o;t.buildSimplifiedError=a;t.scrubError=v})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function i(n){return typeof n=="function"}var h=MsPortalFx.Base,c=MsPortalFx.ViewModels,b=c.Forms,k=b.FilterComboBox,d=h.Security,y=h.Utilities,r=undefined,p=MsPortalFx.Resources.Strings.Azure.BaseResourceDropDown,e=ko.computed,o=ko.observable,l=ko.observableArray,a=ko.reactor,w=new h.Diagnostics.Log("MsPortalFx/Azure/BaseResourceDropDown"),v=w.warning.bind(w),s=c.getValidationResultPromise,g=MsPortalFx.localeCompareIgnoreCase,u="",nt={optionsUndefined:u,formUndefined:u,accessorUndefined:u,configUndefined:u,fetchItemsUndefined:u,filterObjUndefined:u,mapItemUndefined:
u,cannotWriteValidate:u},f=n.getErrorMap(nt),tt=(function(){function n(n,t,u){var v=this,g,nt,w,h,b,it,rt,d,tt,ut;this._itemsObs=l();this._firstLoad=!0;this._validateBaseOptions(t);this._validateBaseConfig(u);this._bContainer=n;this._loadingDeferred=Q.defer();this._loading=o(!0);g={options:l(),filterOptions:{datasetType:0},validations:l()};y.extend(g,t);this._bOptions=g;this._setOptions=g.options;nt={allowCreateNew:!1,blockLoadingItems:o(!1),nameForInitialValue:o(),getSortedListForInitialSelection:function(){return v._items},fetchItems:r,filterObjectByName:r,itemToHierarchicalFormOption:r};y.extend(nt,u);this._bConfig=nt;this._bConfig.allowCreateNew||this._bOptions.validations.push(new c.CustomValidation(p.creatingResourcedDisabledValidationMessage,function(n){var t=!v.getObjectByName(n);return s(t&&p.creatingResourcedDisabledValidationMessage)}));w=i(u.filterComboBoxCreateCallback)?u.filterComboBoxCreateCallback(this._bOptions):{filterComboBox:new k.ViewModel(n,this._bOptions),control:
null};h=this._filterCombo=w.filterComboBox;this.control=u.control||w.control||w.filterComboBox;it=!1;rt=u.optionsFilter;a(n,(function(){var n=v._itemsObs();v._setOptions((rt?rt(n):n).map(u.itemToHierarchicalFormOption));h.value.peek()&&v.triggerValidation()}));d=!1;a(n,(function(){var n=u.createNewOption&&u.createNewOption(),t=n?null:h.value();n=n||v.getObjectByName(t)||nt.nullValue;(!t||~h.items.peek().map((function(n){return n.text.peek()})).indexOf(t))&&!d&&b&&b(n)}));this.value=o();this.value.subscribe(n,(function(n){if(d||n!==b()){var i=n&&v._bConfig.itemToHierarchicalFormOption(n),t=i&&i.text(),r=v.getObjectByName(t)||v.getObjectByName(i&&i.value);(t=r&&v._bConfig.itemToHierarchicalFormOption(r).text()||t,h.value()!==t)&&h.value(t)}}));a(n,(function(){var i=v._bConfig.blockLoadingItems(),r=t.form.editScope();!i&&r&&(it||(it=!0,b=t.accessor.getEditableObservable(n),b.subscribe(n,(function(n){try{d=!0;v.value(n)}finally{d=!1}})),v._loadItems()))}));i(h.valid)&&(this.valid=e(n,{read:function(){
return w.valid?w.valid()&&h.valid():h.valid()},write:function(){f.cannotWriteValidate()}}));i(h.enabled)&&(tt=o(!0),this.enabled=e(n,{read:function(){return h.enabled()},write:function(n){tt(n);tt.valueHasMutated()}}),e(n,(function(){h.enabled(tt())})),e(n,(function(){h.loading(v._loading())})));i(h.infoBalloonContent)&&(this.infoBalloonContent=e(n,{read:function(){return h.infoBalloonContent()},write:function(n){h.infoBalloonContent(n)}}));ut=function(){return v._loadingDeferred.promise.then((function(){n.onInputsSetCallbacks.remove(ut)}))};n.onInputsSetCallbacks.add(ut)}return Object.defineProperty(n.prototype,"_items",{get:function(){return this._itemsObs.peek()},set:function(n){this._itemsObs(n)},enumerable:!0,configurable:!0}),n.prototype.clearValidation=function(){var n=this._filterCombo;return n&&i(n.clearValidation)?n.clearValidation():Q()},n.prototype.triggerValidation=function(){var n=this._filterCombo;return!this._firstLoad&&n&&i(n.triggerValidation)?n.triggerValidation():Q()},n.prototype.
getObjectByName=function(n){var t=this;return this._items.first((function(i){return t._bConfig.filterObjectByName(i,n)}))},n.prototype._loadItems=function(){var n=this;this._loading(!0);this._bConfig.fetchItems().catch((function(n){return v("Failed to fetch items: "+n.message),[]})).then((function(t){t===void 0&&(t=[]);n._items=t;var i=n._bOptions.form.editScope();i.isDisposed||n._setInitialValue().finally((function(){n._firstLoad=!1;n._loading(!1);n._loadingDeferred.resolve();n.triggerValidation()}))}))},n.prototype._hasPermission=function(n,t,r){var f=i(t)&&t(),u=f&&f.actions||[];return u.length<1?s():d.hasPermission(n,u).then((function(n){return s(!n&&(f.message||r||"{0}").format(u.toString()))}),(function(){return v("Failed to get permissions on ["+u.toString()+"] over scope '"+n+"'."),s()}))},n.prototype._setInitialValue=function(){var f=this,n,t=this._bConfig,s=t.itemToHierarchicalFormOption,h=this._filterCombo,u=t.createNewOption,p=u&&u(),c=!1,w,l,v,k,o,y;if(this._firstLoad?(w=this._bOptions.
form.editScope(),w.isDisposed||(l=this._bOptions.accessor.getEditableObservable(this._bContainer),n=l&&l()),MsPortalFx.keysLength(n)||(n=r)):n=this.value(),n){var e=s(n),a=e&&e.text(),b=e&&e.value;n=(a||b)&&h.items().first((function(n){return n.value===b||!g(n.text(),a)}))&&this.getObjectByName(a)||p?(c=!0)&&n:r}return!this._firstLoad&&n?Q():(this._firstLoad&&!n&&(v=i(t.nameForInitialValue)?t.nameForInitialValue():r,n=!!v&&this.getObjectByName(v)||r),!n&&!n&&t.allowCreateNew&&i(u))?(h.value(""),this._firstLoad&&Q.nextTick((function(){f._resetEditScopeValue(n=p)})),Q()):(k=n,y=this._items,Q().then((function(){if(!c)return n?(o=s(n),f._validate(o.text()).then((function(t){t||(n=r)}))):void 0})).then((function(){if(!n&&y.length)return f._getFirstValidValue(t.getSortedListForInitialSelection()).then((function(t){n=t}))})).finally((function(){n||(n=k||y[0]);f._resetEditScopeValue(n);n&&(c?u&&u(n):(o=s(n),h.value(o.text())))})))},n.prototype._getFirstValidValue=function(n,t){var f=this;if(t===void 0&&(t=0),
t<n.length){var i=n[t],e=this._bConfig.itemToHierarchicalFormOption(i),u=e.text();return this._filterCombo.items().first((function(n){return n.text()===u}))?this._validate(u).then((function(r){return r?i:f._getFirstValidValue(n,t+1)}),(function(){return Q(r)})):this._getFirstValidValue(n,t+1)}return Q(r)},n.prototype._resetEditScopeValue=function(n){if(n){var t=this._bOptions.form.editScope();t.isDisposed||t.resetValue(this._bOptions.accessor,{newInputValue:n})}},n.prototype._validate=function(n){var t=this._bOptions.validations,u=i(t)&&t()||[],f=u.map((function(t){var u=t.validate;return i(u)&&u(n)||r}));return Q.all(f).then((function(n){return n.every((function(n){return!n||n.valid}))}),(function(){return v("Failed to validate '"+n+"'. Assuming valid."),Q(!0)}))},n.prototype._validateBaseOptions=function(n){n||f.optionsUndefined();n.form||f.formUndefined();n.accessor||f.accessorUndefined()},n.prototype._validateBaseConfig=function(n){n||f.configUndefined();i(n.fetchItems)||f.fetchItemsUndefined();
i(n.filterObjectByName)||f.filterObjUndefined();i(n.itemToHierarchicalFormOption)||f.mapItemUndefined()},n})();t.BaseResourceDropDown=tt})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function o(n,r){return t.getLocationsForCreateEndPoint.invoke(n,i,r)}function s(n){return t.getLocationDisplayNamesEndPoint.invoke(n,i,null)}function h(n){return t.ResourceManager.readUserSettingsEndPoint.invoke(n,i,[t.lastUsedLocationsKey]).then((function(n){var i=n[t.lastUsedLocationsKey]||{};return Object.keys(i).sort((function(n,t){var r=i[n],u=i[t];return r<u?1:r>u?-1:0}))}))}function c(n,t){return n.displayName.toLowerCase().localeCompare(t.displayName.toLowerCase())}var r=MsPortalFx.Base,e=r.Rpc.Internal,u=n.Constants.RpcMethods,f=e.FuncEndPointDefinition,i=r.Constants.ExtensionNames.Hubs;t.getLocationDisplayNamesEndPoint=new f(u.getLocationDisplayNames);t.getLocationsForCreateEndPoint=new f(u.getLocationsForCreate);t.lastUsedLocationsKey="deployments_lastUsed_locations";
t.getLocationsForCreate=o;t.getLocationDisplayNames=s;t.getLastUsedLocations=h;t.locationsComparer=c})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function h(n){return n.toLowerCase()}function k(){return i.getLocationDisplayNames(a.client)}var l=n.Base,a=n.Base.Rpc.Internal,i=FxImpl.Azure,v=n.ViewModels,y=FxImpl.Azure,p=FxImpl.Extension.CloudName,c="function",u=undefined,r=ko.observable,w=ko.observableArray,f=ko.unwrap,e=v.getValidationResultPromise,o="",b={subsIdObsMissing:o,bothfilters:o,subIdMissing:o},s=FxImpl.getErrorMap(b),d;t.getLocations=k,(function(t){function nt(n){typeof n.subscriptionIdObservable!==c&&s.subsIdObsMissing();var t=f(n.filter);t&&!t.allowedLocations==!t.disallowedLocations&&s.bothfilters()}function tt(n,t){return!k(n.displayName,t)||!k(n.name,t)}function it(n){if(n)return{text:r(n.displayName||n.name),value:n.name}}function rt(n,t,r){return i.getLocationsForCreate(a.client,{subscriptionId:n,resourceTypes:t,cloudName:
r}).then((function(n){return(n||[]).map((function(n){return{displayName:n.displayName,name:n.name}}))}))}var d=y.BaseResourceDropDown,g=n.ViewModels,a=n.Base.Rpc.Internal,v=l.Utilities.Internal.Serialization,b=n.Resources.Strings.Azure,o=b.Locations.DropDown,k=n.localeCompareIgnoreCase,ut=(function(n){function t(t,l){var y=this,lt,k,d,ut,st,ht,at,ot,ft,et,ct;nt(l);l.label||(l.label=r(o.defaultLabel));k=l.filter;st=[null];k&&(l.validations||(l.validations=w()),ht=function(n){var t,i;d=ut=u;n&&(t=n.allowedLocations,t?d=t.locationNames.map(h):(i=n.disallowedLocations||[],ut=i.map((function(n){return{name:h(n.name)}}))))},ht(f(k)),at=k,ko.isSubscribable(k)&&at.subscribe(t,(function(n){ht(n)})),l.validations.push(new g.CustomValidation(o.emptyMessage,function(n){if(!st.length)return e(o.emptyMessage);var t=y._items.first((function(t){return t.displayName===n}));return(n=t&&t.name,d&&!~d.indexOf(n)||ut&&~ut.map((function(n){return n.name})).indexOf(n))?e(b.BaseResourceDropDown.searchingValidationMessage.
format(n)):e()})));ft={optionsFilter:function(n){return f(k),st=n.filter((function(n){var t=h(n.name);return(!d||!!~d.indexOf(t))&&(!ut||!~ut.map((function(n){return n.name})).indexOf(t))}))},blockLoadingItems:r(!0),nameForInitialValue:r(),getSortedListForInitialSelection:function(){return ot},fetchItems:function(){var n=y._subId,t=y._resourceTypes||[];return n||s.subIdMissing(),rt(n,t,lt).then((function(n){return i.getLastUsedLocations(a.client).then((function(t){var r=n.map((function(n){return n.name})),u=r.map((function(){return!1}));return ot=[],t.forEach((function(t){var i=r.indexOf(t);i>-1&&(u[i]=!0,ot.push(n[i]))})),u.reduce((function(t,i,r){return i||t.push(n[r]),t}),ot),n.sort(i.locationsComparer)}))}))},filterObjectByName:tt,itemToHierarchicalFormOption:it};n.call(this,t,l,ft);this._subId=null;et=u;l.subscriptionIdObservable.subscribe(t,(function(n){if(n){if(typeof et=="boolean"&&(y.enabled(et),et=u),y._subId!==n){var t=!!y._subId;y._subId=n;ft.blockLoadingItems(!1);t&&y._loadItems()}}else et=
y.enabled(),y.enabled(!1)}));ko.reactor(t,(function(){y._resourceTypes=typeof l.resourceTypesObservable===c?l.resourceTypesObservable():[];y._subId&&y._loadItems()}));ct=function(n){var u,i,r;lt=p.readFromInputs(n);u=n.internal_bladeCallerParams||{};i=u.providerConfig||{};v.isSerializedObject(i)&&(i=v.fromSerializableObject(i));ft.nameForInitialValue()||(r=(i.provisioningConfig||{}).galleryCreateOptions||{},r.resourceGroupLocationDisplayName&&(ft.nameForInitialValue(r.resourceGroupLocationDisplayName),!y._subId&&r.subscriptionId&&(y._subId=r.subscriptionId,ft.blockLoadingItems(!1))),t.onInputsSetCallbacks.remove(ct));return};t.onInputsSetCallbacks.add(ct)}return __extends(t,n),t})(d);t.DropDown=ut})(d=t.Locations||(t.Locations={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";function o(n,i,u){return t.getResourceGroupsFromSubscriptionEndPoint.invoke(n,r,{cloudName:u,subscriptionIds:i})}function s(n,i){return t.ResourceManager.Lock.isLockedEndpoint.
invoke(n,r,{lockLevel:"ReadOnly",resourceId:i})}var i=MsPortalFx.Base,u=i.Rpc.Internal,f=n.Constants.RpcMethods,e=u.FuncEndPointDefinition,r=i.Constants.ExtensionNames.Hubs;t.getResourceGroupsFromSubscriptionEndPoint=new e(f.hubsGetResourceGroupsFromSubscription);t.getResourceGroupsFromSubscription=o;t.getIsReadOnly=s})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var o=n.ViewModels,s=n.Resources.Strings.ViewModels.Controls.ResourceGroups,f=o.CustomValidation,u=undefined,r=ko.observable,e=ko.observableArray,h=ko.reactor,i=o.getValidationResult,c;(function(t){function bt(n,t,i,r){return v.validateResourceGroupName(n,t,u,i,r)}function kt(n,t){var r,u,i;return n?(r=et(n),!r.valid)?void 0:t.length<1?n:(u=1,i=function(r){var f=r.toLocaleLowerCase(),e=t.some((function(n){return n.toLocaleLowerCase()===f}));return e&&i(n+"_"+u++)||r},i(n)):n}function et(n){return(n=n||"",n.length>t.NameMaxLength)?i(o.lengthValidationMessage):n&&!yt.test(n)?i(o.invalidMessage):
i()}var st=n.Azure,c=n.Base,y=FxImpl.ViewModels.Forms.CreatorAndComboBox,ht=c.Constants,b=c.Diagnostics,l=n.ViewModels,ct=l.Forms,k=l.Controls.Balloon.Link,lt=l.Services.ResourceTypes,p=FxImpl.Azure,at=p.BaseResourceDropDown,d=l.Forms.LabelPosition,g=n.Resources.Strings.Azure,vt=FxImpl.Extension.CloudName,nt=g.ResourceGroups,a=nt.DropDown,tt=nt.InfoBalloon,it=a.ProvisioningStateValidation,o=n.Resources.Strings.ResourceGroup.Validation,rt=c.Utilities.Internal.Serialization,ot;t.AllowedMode=y.AllowedMode;t.Mode=y.Mode;t.NameMaxLength=90;var ut="\\s~!@#$%^&*+=<>,\\?/\\\\\\:;'\"\\[\\]\\{\\}\\|",yt=new RegExp("^[^"+ut+"]*[^."+ut+"]$","i"),w=c.Rpc.Internal.client,pt=g.BaseResourceDropDown,wt=ht.ResourceTypes.ResourceGroups,ft=1,v;(function(n){function t(n,t){return p.getResourceGroupsFromSubscription(w,[n.subscriptionIdObservable()],t).then((function(n){return n.map((function(n){return{createNew:!1,value:n}}))}))}function r(n,t,r,u,f){var e=et(n);return e.valid?t?FxImpl.Azure.getSubscriptionInfo(
w,t,r).then((function(n){return n&&n.uniqueDisplayName||t})).then((function(e){var h=FxImpl.Security.hasPermission("/subscriptions/"+t,["Microsoft.Resources/subscriptions/resourcegroups/write"],r).then((function(n){return n?i():i(o.subscriptionHasNoPermissionsMessage.format(e))}),(function(){return b.Log.writeEntry(ft,"ResourceGroupValidation","Error checking if user has permissions to create resource group. Defaulting to true."),i()})),s;return s=u?~u.indexOf(n)?i(o.alreadyExistsMessage.format(e)):i():f?f():i(),Q.all([h,s]).spread((function(n,t){return n.valid?t:n}))})):l.getValidationResultPromise():Q(e)}n.fetchItems=t;n.validateResourceGroupName=r})(v=t.Internal||(t.Internal={}));t.validateResourceGroupName=bt;ot=(function(g){function nt(nt,ut){var et=this,at,fi,ni,bt,ci,ti,ii,ei;ut.label||(ut.label=r(a.defaultLabel));var oi=u,ri=r(ut.defaultNewValue),si=r(new k("","")),ot,yt={filterComboOptions:c.Utilities.extend({options:e(),defaultValue:r(""),infoBalloonLinkContent:ut.infoBalloonLinkContent||
ut.infoBalloonContent?u:si,infoBalloonContent:ut.infoBalloonContent||ut.infoBalloonLinkContent?u:ko.observable(tt.text)},ut)};n.Settings.getSharedSettings().then((function(n){si(new k(tt.linkText,n.links.resourceGroupOverview))}));var ui=ut.subscriptionIdObservable,li={label:r(s.createNew),defaultValue:r(""),validations:e([new f(o.invalidMessage,function(n){return v.validateResourceGroupName(n,ui(),et._cloudName,yt.filterComboOptions.options().map((function(n){return n.value})))}),new f(o.invalidMessage,function(n){return et._reservedResourceNameValidator||(et._reservedResourceNameValidator=new st.Internal.ReservedResourceNameValidator(wt,u,u,et._cloudName)),et._reservedResourceNameValidator.validate(n)}),new l.RequiredValidation]),labelPosition:r(d.Hidden)},ht=new ct.TextBox.ViewModel(nt,li);yt.children=e([ht]);ut.options=yt.filterComboOptions.options;ut.validations=ut.validations||e();ut.validations.push(new f("",function(n){return n=lt.buildResourceGroupIdFromSubscriptionAndResourceGroupName(
ut.subscriptionIdObservable(),n),p.getIsReadOnly(w,n).then((function(n){return i(n&&a.lockedValidationMessage)})).catch((function(){return b.Log.writeEntry(ft,"ResourceGroupValidation","Error checking if the resource group is read only. Defaulting to false."),i()}))}));at=r(null);at.extend({notify:"always"});ut.validations.push(new f(o.invalidMessage,function(n){return Q().then((function(){var r,t,u,f,e,o;return n?(r=at(),t=et.getObjectByName(n),!t&&!r&&et._validated)?i(pt.searchingValidationMessage.format(n)):(et._validated=!0,r)?i():(u=t&&t.value,f=u&&(u.provisioningState||"").toLowerCase(),f&&(e=it[f],e))?i(it.baseMessage.format(e)):(o=et._options,et._hasPermission("/subscriptions/"+o.subscriptionIdObservable()+"/resourcegroups/"+n,o.requiredPermissions,a.requiredPermissionsValidationMessage)):i()}))}));var gt=r(!0),hi=function(n){n&&(gt()?gt(!1):(ot.enabled(!!n),oi!==n&&(oi=n,gt()||et._loadItems())))},dt=null;ui.subscribe(nt,(function(n){hi(n);dt=ht.value();var i;et.toggleNewOrExisting(i=
ni&&ni()?t.Mode.UseExisting:t.Mode.CreateNew);i===t.Mode.CreateNew&&ht.value()&&(ci||Q()).then((function(){return ht.triggerValidation()}))}));fi=ut.requiredPermissions;ko.isSubscribable(fi)&&fi.subscribe(nt,(function(){et.triggerValidation()}));ni=r("");ti={filterComboBoxCreateCallback:function(n){delete n.options;c.Utilities.extend(yt.filterComboOptions,n);yt.allowedMode=ut.allowedMode;yt.style=r(6);bt=et._dropDown=new y.ViewModel(nt,yt);var t=bt.control;return t.label(s.selectExisting),t.labelPosition(d.Hidden),et._optionsGroup=bt.createOrSelectControl,et.allowedMode=bt.allowedMode,t.items.subscribeAndRun(nt,(function(n){return t.emptyValueText(n.length?"":a.noOptions)})),{control:bt,filterComboBox:ot=t,valid:ko.computed(nt,(function(){return et._optionsGroup.value()?ht.valid():!0}))}},allowCreateNew:!0,fetchItems:function(){return ci=et._lastFetch=v.fetchItems(ut,et._cloudName).then((function(n){var t=kt(ut.defaultNewValue,n.map((function(n){return n.value.name})));return ri(t),t&&ri.valueHasMutated(
),n}))},filterObjectByName:function(t,i){return!n.localeCompareIgnoreCase(t.value.name,i)},itemToHierarchicalFormOption:function(n){var t=n.value?n.value.name:"";return{text:r(t),value:t}},blockLoadingItems:gt,createNewOption:at,nameForInitialValue:ni,nullValue:{createNew:!1,value:{name:"",location:"",provisioningState:""}}};g.call(this,nt,ut,ti);this._createNewText=ri;this._validated=!1;this._options=ut;hi(ui());ii=null;this._createNewText.subscribe(nt,(function(n){ht.value(dt||n||"")}));h(nt,(function(){var i=ht.value(),t=et._createNewText()||"",n;bt.createOrSelectControl.value()?at({createNew:!0,value:{name:i||dt||t,location:ii,provisioningState:""}}):(n=at.peek(),n&&(n=n.value)&&(ii=n.location,dt=n.createNew&&n.name||dt||t),at(null));ot.value()}));this._itemsObs.subscribe(nt,(function(){ot.filterText("");ot.clearValidation()}));this.value.subscribe(nt,(function(n){if(n){var i=n.value;et.toggleNewOrExisting(n.createNew?t.Mode.CreateNew:t.Mode.UseExisting);n.createNew&&(ht.value(i.name||""),
ii=i.location)}n===at()&&at.valueHasMutated()}));this._optionsGroup.value.subscribe(nt,(function(n){if(!n){var t=ot.items.peek().map((function(n){return n.text.peek()})),i;~t.indexOf(ot.value())||~t.indexOf(i=ht.value())&&ot.value(i)||ot.value("")&&ot.filterText("")}}));ei=function(n){var r,i,u,f,e;et._cloudName=vt.readFromInputs(n);r=n.internal_bladeCallerParams;i=r&&r.providerConfig;rt.isSerializedObject(i)&&(i=rt.fromSerializableObject(i));u=i&&i.provisioningConfig;f=u&&u.galleryCreateOptions;ti.nameForInitialValue()||(e=f&&f.resourceGroupName,e&&(et.toggleNewOrExisting(t.Mode.UseExisting),ti.nameForInitialValue(e)),nt.onInputsSetCallbacks.remove(ei));return};nt.onInputsSetCallbacks.add(ei)}return __extends(nt,g),nt.prototype.toggleNewOrExisting=function(n){this._dropDown.toggleNewOrExisting(n)},nt})(at);t.DropDown=ot})(c=t.ResourceGroups||(t.ResourceGroups={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t=MsPortalFx.Base,i=t.Rpc.Internal,f=window,
r,u;(function(t){t.getSasUriForQueueEndPoint=new i.FuncEndPointDefinition(n.Constants.RpcMethods.getSasUriForQueue)})(r=n.InternalAzure||(n.InternalAzure={})),(function(n){var u;(function(n){function u(n){return r.getSasUriForQueueEndPoint.invoke(i.client,t.Constants.Shell,n)}n.getSasUriForQueue=u})(u=n.Storage||(n.Storage={}))})(u=n.Azure||(n.Azure={}));f.define("MsPortalFx/Azure/Storage",[],(function(){return u.Storage}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function c(n,i,r){return t.getSubscriptionInfoEndPoint.invoke(n,f,{subscriptionId:i,cloudName:r})}function l(i,r){return o.getOrSet(r||n.Extension.selfCloudName,Q(t.getAllSubscriptionsEndPoint.invoke(i,f,r)))}function a(n,i){return t.getSelectedSubscriptionsEndPoint.invoke(n,s.Shell,i)}function v(n,i,r,u){return r===void 0&&(r=[]),t.canRegisterSubWithRPsEndPoint.invoke(n,f,{subscriptionId:i,resourceProviders:r,cloudName:u})}function r(n,t,i){var r=(n&&n.subscriptionPolicies&&n.subscriptionPolicies.quotaId||
"").toLowerCase();return i?r.startsWith(t):t===r}var e=MsPortalFx.Base,s=e.Constants,h=e.Rpc.Internal,u=n.Constants.RpcMethods,i=h.FuncEndPointDefinition,f=n.Extension.getHubsWindowId(),o;t.getSubscriptionInfoEndPoint=new i(u.getSubscriptionInfo);t.getAllSubscriptionsEndPoint=new i(u.getAllSubscriptions);t.getSelectedSubscriptionsEndPoint=new i(u.getSelectedSubscriptions);t.canRegisterSubWithRPsEndPoint=new i("Hubs.canRegisterSubWithRPs");o=n.getCloudMap();t.getSubscriptionInfo=c;t.getAllSubscriptions=l;t.getSelectedSubscriptions=a;t.canRegisterSubWithRPs=v;t.isFreeTrialSubscription=function(n){return r(n,"freetrial_",!0)};t.isDreamSparkSubscription=function(n){return r(n,"dreamspark_",!0)};t.isBizSparkSubscription=function(n){return r(n,"bizspark_",!0)};t.isZeroCapSubscription=function(n){return r(n,"aad_2015-09-01",!1)}})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";function b(n,t,i){return v.Rpc.invokeCallback(h.getWindowId({name:y,cloudName:
i},{addSelfCloudNameIfMissing:!0}),p,{galleryItem:t,subscriptions:n})}function d(n){return i.getSubscriptionInfo(u,n,e)}function g(){return i.getSelectedSubscriptions(u,e)}function nt(){return i.getAllSubscriptions(s.client,e)}var l=n.Base,o=n.Base.Constants,s=n.Base.Rpc.Internal,h=FxImpl.Extension,a=n.ViewModels,v=n.Services,i=FxImpl.Azure,e=o.EmptyCloudName,u=s.client,y=o.ExtensionNames.Marketplace,p="validateSubscriptions",f=ko.observable,w=ko.observableArray,c=n.localeCompareIgnoreCase,r=a.getValidationResultPromise,k;(function(t){function s(n,t){return!c(n.subscriptionId,t)||!c(n.uniqueDisplayName,t)}function a(n){return{text:f(n.uniqueDisplayName),value:n.subscriptionId}}var y=i.BaseResourceDropDown,p=n.ViewModels,o=l.Utilities.Internal.Serialization,d=n.Hubs.Notifications,k=["enabled","active"],e=n.Resources.Strings.Azure.Subscriptions.DropDown,v;t.filterObjectByName=s;t.itemToHierarchicalFormOption=a;v=(function(n){function t(t,c){var l=this,y,v,b,k;c.label||(c.label=f(e.defaultLabel));
y=c.requiredPermissions;ko.isSubscribable(y)&&y.subscribe(t,(function(){l.triggerValidation()}));ko.isSubscribable(c.resourceProviders)&&c.resourceProviders.subscribe(t,(function(){l.triggerValidation()}));c.allowSelectingDisabledSubscriptions||(c.validations||(c.validations=w()),c.validations.push(new p.CustomValidation(e.disabledSubscriptionValidationMessage,function(n){var t=l.getObjectByName(n),f;return t?l._isSubDisabled(t)?r(e.disabledSubscriptionValidationMessage):(f=l._isSubAllowedForGalleryItem(t),f)?r(f.displayText||e.subscriptionNotAllowedForGalleryItemValidationMessage):i.canRegisterSubWithRPs(u,t.subscriptionId,ko.unwrap(c.resourceProviders),l._cloudName).then((function(n){if(!n.success){var i=t.uniqueDisplayName||t.subscriptionId,u=n.disallowedRPs||[];return u.length?r(e.subDisallowedRP.format(i,u.join(", "))):r(e.subCantRegisterWithRP.format(i,n.failedRPs.join(", ")))}})).then((function(n){return n?n:l._hasPermission("/subscriptions/"+t.subscriptionId,y,e.requiredPermissionsValidationMessage)})
).catch((function(){return r()})):r()})));v={blockLoadingItems:f(!0),nameForInitialValue:f(),fetchItems:function(){return l._fetchItems()},filterObjectByName:s,itemToHierarchicalFormOption:a};n.call(this,t,c,v);this._cloudName=this._marketplaceValidation=null;this._options=c;b=t.onInputsSetCallbacks;k=function(n){var i,t,r,u,f;l._cloudName=h.CloudName.readFromInputs(n);i=n.internal_bladeCallerParams;t=i&&i.providerConfig;o.isSerializedObject(t)&&(t=o.fromSerializableObject(t));r=t&&t.provisioningConfig;u=r&&r.galleryCreateOptions;v.nameForInitialValue()||(f=u&&u.subscriptionId,f&&v.nameForInitialValue(f),b.remove(k));v.blockLoadingItems(!1);return};b.add(k);this.subscriptionId=ko.computed(t,(function(){var n=l.value&&l.value();return n&&n.subscriptionId}))}return __extends(t,n),t.prototype._isSubDisabled=function(n){var t=n.status||n.state||"";return k.indexOf(t.toLowerCase())<0},t.prototype._isSubAllowedForGalleryItem=function(n){if(this._marketplaceValidation&&this._marketplaceValidation.
invalidSubscriptions.length)return this._marketplaceValidation.invalidSubscriptions.first((function(t){return t.subscriptionId===n.subscriptionId}))},t.prototype._fetchItems=function(){var n=this;return i.getAllSubscriptions(u,this._cloudName).then((function(t){var i=n._options.filterByGalleryItem&&n._options.filterByGalleryItem();return b(t,i,n._cloudName).then((function(i){return n._marketplaceValidation=i,t}),(function(){return t}))}))},t})(y);t.DropDown=v})(k=t.Subscriptions||(t.Subscriptions={}));t.getSubscriptionInfo=d;t.getSelectedSubscriptions=g;t.getAllSubscriptions=nt})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var e=n.Base,o=n.ViewModels,s=o.Controls,r=e.Constants,u=FxImpl.Extension,f=window.fx.environment,i=ko.observable,h;(function(n){var t=(function(n){function t(t,e){var c=this,o,s,h;n.call(this,t);this.subscriptionsFiltered=i(!1);this.selectedTypes=i([]);this.selectedSubscriptions=i([]);this.filterText=i("");this.cloudName=
i();this.isCloudNameInitialized=i(!1);e=e||{};this.controlType=114;this.showTextFilter=e.showTextFilter||i(!1);this.showTypeFilter=e.showTypeFilter||i(!1);this.showSubscriptionFilter=e.showSubscriptionFilter||i(!1);this.showSubscriptionSummary=e.showSubscriptionSummary||i(!0);this.showTenantLevelSubscriptionSummary=e.showTenantLevelSubscriptionSummary||i(!1);this.selectedSubscriptionId=e.selectedSubscriptionId||i();this.textFilterPlaceholder=e.textFilterPlaceholder||i();this.actionHandler=e.actionHandler;o=this.isCloudNameInitialized;f.extensionName===r.ExtensionNames.Hubs?(s=t.onInputsSetCallbacks,h=function(n){c.cloudName(u.CloudName.readFromInputs(n));o(!0);s.remove(h);return},s.add(h)):(f.extensionName===r.Shell?this.cloudName(r.DefaultCloudName):this.cloudName(u.selfCloudName),o(!0));this.subscriptionsLoaded=i(!1)}return __extends(t,n),t})(s.Base.ViewModel);n.ViewModel=t})(h=t.ResourceFilter||(t.ResourceFilter={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n)
{var t;(function(t){"use strict";var r=n,u=r.Base,f=r.ViewModels,e=f.Validation,v=u.Rpc.Internal,o=r.Resources.Strings.Azure.Validators,y=FxImpl.Extension,s=undefined,h=f.FormValidationType.Custom,p=y.getArmEndpointEndPoint,i=f.getValidationResult,c,l,a;(function(n){var t=(function(n){function t(t,f,e,s){n.call(this,h);this.validate=function(n){var h=Q.defer(),c;return Q(e||p.invoke(v.client,u.Constants.ExtensionNames.Hubs,s)).then((function(e){return u.Net2.postJSON({uri:r.ensureSuffix(e,"/")+"providers/microsoft.resources/checkresourcename?api-version=2015-01-01",setAuthorizationHeader:!0},{name:n,type:t}).then((function(t){t&&(t.status||"").toLowerCase()==="reserved"&&(c=i((f||t.error&&t.error.message||o.ReservedResourceName.message).format(n)))}))})).finally((function(){h.resolve(c||i())})),h.promise}}return __extends(t,n),t})(e);n.ReservedResourceNameValidator=t})(c=t.Internal||(t.Internal={}));l=(function(n){function t(t){n.call(this,h);this.validate=function(n){return t(n).then((function(
n){if(!n)return i();var t=Q.defer(),r;return u.Security.hasPermission(n.entityId,n.actions).then((function(t){t||(r=i((n.message||o.RequiredPermission.message).format(n.actions.toString())))})).finally((function(){t.resolve(r||i())})),t.promise}))}}return __extends(t,n),t})(e);t.RequiredPermissionsValidator=l;a=(function(n){function t(t,i){n.call(this,t,i,s,s)}return __extends(t,n),t})(c.ReservedResourceNameValidator);t.ReservedResourceNameValidator=a})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";var t,i;(function(n){n[n.Windows=0]="Windows";n[n.Linux=1]="Linux"})(n.FirstPartyOperatingSystem||(n.FirstPartyOperatingSystem={}));t=n.FirstPartyOperatingSystem,(function(n){n[n.Default=0]="Default";n[n.TemplateDeployment=1]="TemplateDeployment";n[n.RequestPricingInformation=2]="RequestPricingInformation";n[n.ProgrammaticAccess=3]="ProgrammaticAccess"})(n.LegalTermsLanguageEnum||(n.LegalTermsLanguageEnum={}));i=n.LegalTermsLanguageEnum}
)(t=n.Legal||(n.Legal={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t){if(!n)throw new Error("Can't move resource without resource id.");return{bladeSelection:e(n,t),displayValue:t===1?r.changeResourceGroupLabel:r.changeSubscriptionLabel,editType:u.EditType.MoveResource}}function e(t,r){return i.getBladeSelection(n.Base.Constants.ExtensionNames.Hubs,"MoveResourceBlade",{resourceId:t,moveType:r})}var i=n.ViewModels,u=i.Parts.Properties,r=n.Resources.Strings.Part.PropertiesPart,o;t.getMoveResourceBlade=f,(function(n){(function(n){n[n.NotSet=0]="NotSet";n[n.Allowed=1]="Allowed";n[n.NotAllowed=2]="NotAllowed"})(n.GalleryItemAccess||(n.GalleryItemAccess={}));var t=n.GalleryItemAccess})(o=t.Internal||(t.Internal={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function f(n,t,i,r){var
u=Q.defer(),f=u.reject;return n.acquireObject(t,h,i).then((function(n){var t=s(n&&n.getValue());t?t.progress(u.notify).then(u.resolve).catch(f).finally((function(){n.dispose()})):r()})).catch(f),u.promise}function l(n,t){return typeof t.validateTemplate=="undefined"&&(t.validateTemplate=!1),f(n,i.azureResourceManagerDeployTemplate,t,u.deployTemplateFailure)}function a(n,t){return f(n,i.azureResourceManagerPollForDeployment,t,u.pollForDeploymentFailure)}function v(n,t){return f(n,i.validateArmTemplate,t,u.validateTemplateFailure)}var e=MsPortalFx.Base,o=e.Rpc.Internal,i=n.Constants.RpcMethods,s=ko.unwrap,h=e.Constants.ExtensionNames.Hubs,r="",c={deployTemplateFailure:r,pollForDeploymentFailure:r,validateTemplateFailure:r},u=n.getErrorMap(c);t.lastDeployedGalleryItemsMaxCount=10;t.lastUsedLocationsMaxCount=5;t.readUserSettingsEndPoint=new o.FuncEndPointDefinition("HubsExtension.readUserSettings");t.deployTemplate=l;t.pollForDeployment=a;t.validateTemplate=v})(i=t.ResourceManager||(t.ResourceManager=
{}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function s(n){return i.deployTemplate(r.client,n).then((function(n){return n.deploymentStatusCode===f.Success?n:Q.reject(n)}))}function h(n){return i.pollForDeployment(r.client,n).then((function(n){return n.deploymentStatusCode===f.Success?n:Q.reject(n)}))}var i=FxImpl.Azure.ResourceManager,r=n.Base.Rpc.Internal,e,o,u,f,c;(function(n){n[n.InitialSetup=0]="InitialSetup";n[n.SanityCheck=1]="SanityCheck";n[n.FulfillPrerequisites=2]="FulfillPrerequisites";n[n.ProvisionResourceGroup=3]="ProvisionResourceGroup";n[n.RegisterResourceProviders=4]="RegisterResourceProviders";n[n.GetDeploymentName=5]="GetDeploymentName";n[n.ValidateTemplate=6]="ValidateTemplate";n[n.SubmitDeploymentRequest=7]="SubmitDeploymentRequest";n[n.GetDeploymentStatus=8]="GetDeploymentStatus"})(t.DeploymentStages||(t.DeploymentStages={}));e=t.DeploymentStages,(function(n){n.Accepted="accepted";n.Succeeded="succeeded";
n.Failed="failed";n.Canceled="canceled";n.Running="running";n.Deploying="deploying";n.Waiting="waiting";n.Deleting="deleting";n.Deleted="deleted"})(o=t.DeploymentStates||(t.DeploymentStates={})),(function(n){n[n.RequestDeploymentOnly=1]="RequestDeploymentOnly";n[n.DeployAndAwaitCompletion=2]="DeployAndAwaitCompletion";n[n.DeployAndGetAllOperations=3]="DeployAndGetAllOperations";n[n.PreflightOnly=4]="PreflightOnly"})(u||(u={}));t.TemplateDeploymentMode=u,(function(n){n[n.Failure=-1]="Failure";n[n.Success=0]="Success";n[n.DeploymentRequestFailed=1]="DeploymentRequestFailed";n[n.DeploymentFailed=2]="DeploymentFailed";n[n.DeploymentStatusUnknown=3]="DeploymentStatusUnknown";n[n.ErrorProvisioningResourceGroup=4]="ErrorProvisioningResourceGroup";n[n.ErrorSubmittingDeploymentRequest=5]="ErrorSubmittingDeploymentRequest";n[n.ErrorGettingDeploymentStatus=6]="ErrorGettingDeploymentStatus";n[n.InvalidArgs=7]="InvalidArgs";n[n.ErrorRegisteringResourceProviders=8]="ErrorRegisteringResourceProviders";n[
n.DeploymentCanceled=9]="DeploymentCanceled";n[n.UnknownError=10]="UnknownError"})(t.DeploymentStatusCode||(t.DeploymentStatusCode={}));f=t.DeploymentStatusCode;t.deployTemplate=s;t.pollForDeployment=h,(function(n){function t(n){return i.deployTemplate(r.client,n)}function u(n){return i.pollForDeployment(r.client,n)}function f(n){return i.validateTemplate(r.client,n)}n.deployTemplate=t;n.pollForDeployment=u;n.validateTemplate=f})(c=t.Deployments||(t.Deployments={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=MsPortalFx.ViewModels,i=(function(){function n(n,i,r,u){var f=this;this.collector=new t.ParameterCollector(n,{supplyInitialData:function(){var n=u.supplyInitialData(),i=r(),t;return i&&(t=i.selectedSpecId,n.selectedSpecId=t,n.selectedSpecIds=[t]),n.originControl=f.controlType,{fromCollectorToProvider:n,fromProviderToCollector:
null}},receiveResult:function(n){var t=n.fromProviderToCollector;r(t);typeof u.receiveResult=="function"&&u.receiveResult(t)},selectable:i})}return n})();n.CollectorControl=i})(t=n.Specs||(n.Specs={}))})(t=n.Pickers||(n.Pickers={}))})(t=n.ResourceManager||(n.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=FxImpl.Azure.ResourceManager.Pickers.Specs,r=n.ViewModels,u=r.Forms,f=ko.observable,e=ko.observableArray,o=(function(t){function i(i,r){r=n.Base.Utilities.extend({label:f(n.Resources.Strings.Pickers.Specs.pricingTier),validations:e(),displayText:ko.pureComputed((function(){var n=o.value();return n?n.selectedSpecIds&&n.selectedSpecIds.join(", ")||n.selectedSpecId:""}))},r);var o=new u.Selector.ViewModel(i,r.form,r.pathOrAccessor,r);t.call(this,i,o.selectable,o.value,r);this.controlType=2;this.control=o}return __extends(i,t),i})(i.CollectorControl);t.Selector=o})(i=
t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){var i;(function(t){"use strict";var i=n.ViewModels.Controls,r=FxImpl.Azure.ResourceManager.Pickers.Specs,u=ko.observable,f=(function(t){function r(r,f){var o=u(),e=new i.InfoBox.ViewModel(r,{},!1,f);e.selectable=n.ViewModels.Part.createSelectableViewModel();t.call(this,r,e.selectable,o,f);this.controlType=3;this.value=o;this.control=e}return __extends(r,t),r})(r.CollectorControl);t.InfoBox=f})(i=t.Specs||(t.Specs={}))})(i=t.Pickers||(t.Pickers={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function ut(n){return n.toLowerCase()}function u(n){return typeof n=="function"}function st(){return n.isFeatureEnabled("deploymentmanagerv2")}function ht(
n,t){t===void 0&&(t={});var i=new f.Internal.Selectable({allowUnselect:!1,selectedValue:t.selectedValue,isSelected:t.isSelected,isActivated:t.isActivated});return n.registerForDispose(i),i}function dt(n){n||r.optionsUndefined();u(n.supplyTemplateDeploymentOptions)||r.supplyTemplateUndefined();n.createFeatures&&(n.createFeatures&1||n.createFeatures&2)&&!u(n.supplyPricingConfig)&&r.supplyPricingUndefined()}function gt(n){n===void 0&&(n={});var t=n.galleryCreateOptions||{};return t.launchingContext||{}}var l=n.Base,f=n.ViewModels,ct=f.ActionBars.Base,lt=f.ParameterCollectionV3,at=HubsExtension.Azure.Pricing,d=f.ParameterCollection.Internal.ProvisioningTelemetry,o=l.Diagnostics.Telemetry,a=l.Utilities,v=d.ProvisioningStatus,g=d.ActionModifier,vt=a.Internal.JQuery,yt=window,pt=undefined,nt=ko.observable,tt=ko.isObservable,h=n.Resources.Strings.Azure.ResourceManager.Provisioner,it=h.ArmValidation,s=f.getValidationResult,rt=n.newGuid,y=vt.extend,c=a.extend,e=a.clone,k;t.armValidateFeatureEnabled=
n.isFeatureEnabled("validatearmtemplates");t.armValidateFeatureForced=ut(n.getFeatureValue("validatearmtemplates")||"")==="force";var wt=["microsoft_azure_automation","microsoft_azure_batch","microsoft_azure_cloudservices","microsoft_azure_compute","microsoft_azure_containeregistries","microsoft_azure_customerinsights","microsoft_azure_datacatalog","microsoft_azure_datalakeanalytics","microsoft_azure_datalakestore","microsoft_azure_devtestlab","microsoft_azure_ema","microsoft_azure_marketplaceapps","microsoft_azure_media","microsoft_azure_mlcommitmentplans","microsoft_azure_mlworkspaces","microsoft_azure_mobileengagement","microsoft_azure_mobileservices","microsoft_azure_notificationhubs","microsoft_azure_rsmt","microsoft_azure_scheduler","microsoft_azure_servicefabric","microsoft_azure_storage","microsoft_azure_storsimple","microsoft_operationsmanagementsuite_workspace","azurecacheextension","cleardbextension","newrelic_azureportal_apm","sendgrid_emailservice","websitesextension",],p=
g.Succeeded,w=g.Failed,ft=at.Constants,et=ft.PricingSummaryBlade,ot=ft.LegalTermsBlade,b=l.Constants.ExtensionNames.Hubs,bt=1,i="",kt={canNotProvision:i,invalidGalleryOptions:i,launchPricingBladeFailure:i,legalTermsUnsupported:i,missingTemplateOptions:i,optionsUndefined:i,secondaryLinksUnsupported:i,supplyPricingUndefined:i,supplyTemplateUndefined:i},r=FxImpl.getErrorMap(kt);k=(function(i){function l(t,f,e){var o=this,a=!1,s,h,c,l;arguments.length===2&&(e=f,f=pt,a=!0);dt(e);s=e.actionBar;i.call(this,t,{supplyProvisioningPromise:function(n){return o._supplyProvisioningPromise(n)},supplyStartboardInfo:function(n){return o._supplyStartboardInfo(n)},actionBar:s,parameterProvider:e.parameterProvider});this._armOptions=e;this._showPricingSummary=nt(!1);this._showAutomationOptions=nt(!1);this._legalTermsBladeShown=this._purchaseInProgress=this._isCustomProvisioning=!1;h=f&&f.content||{};this.pricingSelectable=ht(t,h.pricingSelectable);this.errorsSelectable=ht(t,h.errorsSelectable);this.pricingSelectable.
isSelected.subscribe(t,(function(n){n||o._purchaseInProgress||o._setActionBarProgress(!1)}));s&&(this._setUpActionBarWatcher(t),this._setUpActionBarValidation(t,e));c=function(){var t=e.createFeatures,i=!!(t&1),u=!!(t&2),f=t&8,h=!!(t&4)||!f&&n.isFeatureEnabled("seetemplate");s&&(o._actionBarSupportsSecondaryLinkDisplayText?(o._showPricingSummary(i),o._showAutomationOptions(h)):i&&r.secondaryLinksUnsupported(),o._actionBarSupportsForceInProgressStatus?s.forceInProgressStatus(u):u&&r.legalTermsUnsupported())};this._parameterProvider=e.parameterProvider;e.parameterProvider&&e.parameterProvider.configFromCollector.subscribe(t,c);c();l=t.createChildLifetime.bind(t);u(t.registerSelectable)&&(t.registerSelectable(l(),rt(),this.pricingSelectable),t.registerSelectable(l(),rt(),this.errorsSelectable,{openInContextPane:!0,persistentContextPane:!0}))}return __extends(l,i),Object.defineProperty(l.prototype,"armProvisioningConfig",{get:function(){return this.provisioningConfig()},enumerable:!0,configurable:
!0}),l.prototype.startProvisioning=function(n){u(this._armOptions.supplyGalleryCreateOptions)||r.canNotProvision();var t=this._armOptions.supplyGalleryCreateOptions(),f=e(this.provisioningConfig())||{},o=t&&t.galleryItem;return o&&!!o.itemDisplayName?(c(f,{galleryCreateOptions:t}),this.provisioningConfig(f)):r.invalidGalleryOptions(),i.prototype.startProvisioning.call(this,n)},l.prototype._deployTemplate=function(n){return t.Deployments.deployTemplate(n)},l.prototype._validateTemplate=function(n){return t.Deployments.validateTemplate(n)},l.prototype._supplyProvisioningPromise=function(n){var i=this,u=st()&&this._deploymentOptions;return(u?Q(u):this._armOptions.supplyTemplateDeploymentOptions(n,0)).then((function(f){var o=i.provisionOnStartboard();return o&&!f.resourceId&&r.missingTemplateOptions(),c(f,{deploymentMode:2,launchingContext:i._launchingContext,submitDeployment:!u,skipPreflight:!!u,pollForUpdates:!0}),i._deployTemplate(f).then((function(r){var h=r.deployment||{},c=h.properties||
{},s=ut(c.provisioningState||""),u;return(!s||s===t.DeploymentStates.Succeeded||(r.deploymentStatusCode=t.DeploymentStatusCode.Failure),r.deploymentStatusCode!==t.DeploymentStatusCode.Success)?(u=e(r,!0),u.subscriptionId=f.subscriptionId,u.resourceGroupName=f.resourceGroupName,u.deploymentName=f.deploymentName,u):o?i._getStartboardPartInputs(n,f):r}),(function(n){var t=e(n,!0);return t.subscriptionId=f.subscriptionId,t.resourceGroupName=f.resourceGroupName,t.deploymentName=f.deploymentName,Q.reject(t)}))}))},l.prototype._supplyStartboardInfo=function(n){var t=this._armOptions.supplyStartboardInfo;if(u(t))return t(n)},l.prototype._setUpActionBarValidation=function(n,i){var r=this,f=i.actionBar,h=!!(i.createFeatures&16),a=!!(i.createFeatures&32),v=tt(f.showActionBar),k=wt.some((function(n){return yt.fx.environment.extensionName===n})),d=!h&&(a||t.armValidateFeatureForced||!k&&t.armValidateFeatureEnabled),g={validate:function(t){if(!(r.armProvisioningConfig||{}).provisioningEnabled||v&&!f.showActionBar(
))return Q(s());var d=st(),h=gt(r.armProvisioningConfig),i={telemetryId:h.telemetryId,galleryItemId:h.galleryItemId,createBlade:h.createBlade},a=o.startTrace({source:"ArmProvisioner",action:"ValidateArmTemplate",data:i}),g=function(n){o.endTrace(a,w,y({},i,{error:FxImpl.Azure.scrubError(n)}));var t=n.error||n;return t.status===0||n.status===0?s(it.networkFailure):{valid:!1,message:it.validationFailed,blade:{extension:b,detailBlade:"ArmErrorsBlade",detailBladeInputs:{errors:y({},i,d?n.details||n:t)}}}},k,nt,tt=Q().then((function(){return f.infoBoxSelectable.isSelected(!1),r._armOptions.supplyTemplateDeploymentOptions(r._parameterProvider.getResults(),2)})).then((function(n){nt=n.suppressDefaultNotifications;n.suppressDefaultNotifications=!0;n.launchingContext=h;var t=r._validateTemplate(n).then((function(n){return(u(r._armOptions.postValidationCallback)?r._armOptions.postValidationCallback(n.validationResult||n):Q(s())).then((function(t){return d&&(k=e(n)),o.endTrace(a,p,i),t}))})).catch(g);return Q.
timeout(t,l.armValidationTimeout).catch((function(n){return c(i,{error:{message:n.message,code:n.code}}),o.endTrace(a,w,i),s()}))})).then((function(n){return!d||!k||t!==0?n:(c(k,{suppressDefaultNotifications:!0,skipPreflight:!0,submitDeployment:!0,validateTemplate:!1,pollForUpdates:!1}),r._deployTemplate(k).then((function(t){return r._deploymentOptions=e(t),r._deploymentOptions.suppressDefaultNotifications=nt,n})).catch(g))})).catch((function(n){return o.cancelTrace(a,y({},i,{error:n.message})),s()}));return n.operations&&n.operations.add(tt,{blockUi:!0,shieldType:bt}),tt}};d&&(f.infoBoxSelectable=this.errorsSelectable,f.asyncValidations.push(g))},l.prototype._setActionBarProgress=function(n){tt(this._actionBar.actionInProgress)&&this._actionBar.actionInProgress(n)},l.prototype._getStartboardPartInputs=function(n,i){var f={},r=this.provisioningConfig().startboardProvisioningInfo,e=this._armOptions.supplyStartboardInfo;return u(e)&&(r=e(n)||r),f[r.startboardPartKeyId]=i.resourceId,{deploymentStatusCode:
t.DeploymentStatusCode.Success,partInputs:f}},l.prototype._setUpActionBarWatcher=function(t){var i=this,u=this._armOptions.supplyPricingConfig,f=u&&u(),e=f&&f.showPricingSummaryLink,r=this._actionBar;ko.computed(t,(function(){if(i._actionBarSupportsSecondaryLinkDisplayText){var u=i._showPricingSummary()&&(e?e():!0),n=null,t=!1;u?n=h.pricingSummaryLinkLabel:i._showAutomationOptions()&&(n=h.seeTemplateLink,t=!0);r.secondaryLinkDisplayText(n);i._actionBarSupportsSecondaryLinkValidation&&r.secondaryLinkTriggerValidation(t)}}));ko.reactor(t,(function(){var n=r.output(),e=n&&i._actionBarSupportsForceInProgressStatus&&r.forceInProgressStatus()&&n.status===1&&n.action===4,t=n&&n.commitId;if(e&&i._legalTermsCommitId!==t)return i._legalTermsCommitId=t,i._legalTermsBladeShown=!0,i._setActionBarProgress(!0),i._launchPricingSelectable(ot.bladeExtension,ot.bladeName),null;var u=r.secondaryLinkDisplayText(),f=n&&n.secondaryLinkClicked,o=n&&i._actionBarSupportsSecondaryLinkDisplayText&&!!f&&f===u;o&&i._pricingSummaryCommitId!==
t&&(i._pricingSummaryCommitId=t,i._setActionBarProgress(!1),u===h.seeTemplateLink?i._launchTemplateViewerBlade():i._launchPricingSelectable(et.bladeExtension,et.bladeName))}));t.onInputsSetCallbacks.add((function(t){if(i.pricingSelectable.isSelected()&&ct.isCompleted(t.pricingOutput)&&t.pricingOutput.actionButtonClicked){if(i._legalTermsBladeShown){i._legalTermsBladeShown=!1;i._purchaseInProgress=!0;var u=t.pricingOutput.pinToStartboard;i._actionBarSupportsShowActionBar&&!r.showActionBar()&&typeof u=="boolean"&&r.provisionOnStartboardPart(u);r.forceInProgressStatus(!1);r.triggerSelectAction(n.getUniqueId())}i.pricingSelectable.isSelected(!1)}return}))},l.prototype._launchTemplateViewerBlade=function(){var u=this,i=this._parameterProvider.getResults(),r,t;i&&(r=this._armOptions.supplyTemplateDeploymentOptions(i,1).then((function(n){var i=u.armProvisioningConfig.galleryCreateOptions,t=i.galleryItem;return f.getBladeSelection(b,"TemplateViewerBlade",{options:{templateLink:n.templateLinkUri,templateJson:
n.templateJson,parameters:n.parameters,telemetryId:t&&t.id}})})),t=this.pricingSelectable,t.delayedBladeSelection({bladeWidth:n.Blades.BladeWidth.Large,selectedValuePromise:r}),t.isSelected(!0))},l.prototype._launchPricingSelectable=function(n,t){this.pricingSelectable.selectedValue(f.getBladeSelection(n,t,this._getPricingBladeInputs()));this.pricingSelectable.isSelected(!0)},l.prototype._getPricingBladeInputs=function(){var o=this._armOptions.supplyPricingConfig(),t=o&&o.supplyPricingInfo(),n,i,f;return t||r.launchPricingBladeFailure(),n=(this.armProvisioningConfig.galleryCreateOptions||{}).galleryItem,i=this._armOptions.supplyGalleryCreateOptions,!n&&u(i)&&(f=i(),n=f&&f.galleryItem),n=n&&e(n)||{categoryIds:[],products:[],productsWithNoPricing:[]},n.products=n.products.concat(t.products||[]),n.productsWithNoPricing=n.productsWithNoPricing.concat(t.productsWithNoPricing||[]),{galleryPricingInfo:t,galleryItem:n}},l.prototype._traceProvisioningStarted=function(){return i.prototype._traceProvisioningStarted.
call(this,this._createEventBase())},l.prototype._traceProvisioningEnded=function(n,r){var e=this._createEventBase(),o=w,f=v.UnknownFailure,u;return r&&(n?(u=n.deploymentStatusCode,u&&u!==t.DeploymentStatusCode.Success?f=t.DeploymentStatusCode[u]:(o=p,f=u===t.DeploymentStatusCode.Success?t.DeploymentStatusCode[u]:v.Resolved)):(o=p,f=v.Resolved)),e.actionModifier=o,e.data.provisioningStatus=f,i.prototype._traceProvisioningEnded.call(this,n,r,e)},l=__decorate([n.Composition.ProxyCompatibilityMode],l)})(lt.Provisioner);t.Provisioner=k,(function(n){var t,i;n.armValidationTimeout=1e4;n.azureResourceManagerProvisioningPart={name:"AzureResourceManagerProvisioningPart",extension:b},(function(n){n[n.Create=0]="Create";n[n.ExportTemplate=1]="ExportTemplate";n[n.Validate=2]="Validate"})(t||(t={}));n.GetTemplateDeploymentOptionsMode=t,(function(n){n[n.None=0]="None";n[n.ShowPricingSummary=1]="ShowPricingSummary";n[n.ShowLegalTerms=2]="ShowLegalTerms";n[n.ShowAutomationOptions=4]="ShowAutomationOptions";
n[n.HideExportTemplate=8]="HideExportTemplate";n[n.DisableArmValidation=16]="DisableArmValidation";n[n.EnableArmValidation=32]="EnableArmValidation"})(i||(i={}));n.CreateFeatures=i})(k=t.Provisioner||(t.Provisioner={}))})(i=t.ResourceManager||(t.ResourceManager={}))})(t=n.Azure||(n.Azure={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(i){var r;(function(i){"use strict";function ri(){for(var t=[],n=0;n<arguments.length;n++)t[+n]=arguments[n];t.forEach((function(n){i.includedResourceTypes[n]=b}))}function yt(t,r){if(!a.isResourceGroupId(t))try{var f=a.buildResourceTypeFromResourceId(t),u=i.includedResourceTypes[f.toLowerCase()];return u?u===r||u===b:n.isFeatureEnabled("autoenablemove")}catch(e){return h("Failed to get resource type from the resource id '"+t+"'."),!1}return!0}function fi(n){var t={resourceGroup:null,resourceGroupId:null,success:!1},i;try{i=a.parseResourceManagerDescriptor(n);t.resourceGroup=i.resourceGroup;t.resourceGroupId=a.buildResourceGroupIdFromResourceDescriptor(
i);t.success=!0}catch(r){h("It failed to get resource group name from the resource id '"+n+"'.")}return t}var it=n.Resources.Strings.Part,c=it.ResourceSummary,p=n.ViewModels,k=n.Base.Constants,rt=k.ExtensionNames,ut=k.BladeNames.Hubs,wt=k.AssetNames,f=p.Parts.Properties,l=f.PropertyType,ft=FxImpl.ViewModels,bt=ft.Parts.Properties,kt=n.Base,a=p.Services.ResourceTypes,dt=n.Assets,et=FxImpl.Extension,gt=et.CloudName,ni=FxImpl,ti=n.Azure,ot=n.Azure.ResourceManager,u=ko.observable,v=ko.reactor,st=ko.computed,ht=window,w=new kt.Diagnostics.Log("MsPortalFx/ViewModels/Parts/ViewModels.ResourceSummaryPart"),ct=ht.fx&&ht.fx.environment,ei=ct&&ct.isDevelopmentMode,e=5,lt="number",d=new f.TextProperty("",""),at=it.PropertiesPart,ii=n.isFeatureEnabled("resourcemenu"),vt=rt.Hubs,b=3,g=0,nt=1,y="MsPortalFx.Parts.ResourceSummary.ViewModel2",h=w.error.bind(w),tt,r,pt;i.includedResourceTypes={};ri("microsoft.classiccompute/domainnames","microsoft.compute/availabilitysets","microsoft.containerservice/containerservices",
"microsoft.devices/iothubs","microsoft.network/dnszones","microsoft.network/trafficmanagerprofiles","microsoft.servicefabric/clusters","microsoft.web/serverfarms","microsoft.web/sites","microsoft.classicnetwork/networksecuritygroups","microsoft.classicnetwork/reservedips","microsoft.classicnetwork/virtualnetworks","microsoft.certificateregistration/certificateorders","microsoft.compute/disks","microsoft.compute/virtualmachinescalesets","microsoft.db.mysql/servers","microsoft.db.postgresql/servers","microsoft.insights/components","microsoft.insights/eventdetail","microsoft.insights/webtests","microsoft.network/applicationgateways","microsoft.network/connections","microsoft.network/expressroutecircuits","microsoft.network/localnetworkgateways","microsoft.network/networkwatchers","microsoft.network/virtualnetworkgateways","microsoft.recoveryservices/vaults","microsoft.servermanagement/gateways","microsoft.servermanagement/nodes","microsoft.web/serverfarms","microsoft.web/sites");var o="",
ui={onlyStatic:o,propertyReused:o,setPropertiesNotAvail:o,noResourceGroupWithLayout:o,statusMissing:o,noSubId:o,maxColumns:o,missingProperties:o,maxProperties:o},s=FxImpl.getErrorMap(ui);tt=(function(i){function o(n,t,f){var c=this,a,e,o,s,h;i.call(this,n);this._editRg=u();this._currentResourceId=u();this._partContainer=f;this._options=t;this._allowedPropertyTypes=[l.Callback,l.Link,l.OpenBlade,l.OpenBladeAsync,l.Text];this.collapsed=u(undefined);this.tagsVisible=u(!0);this.hasQuickStart=u(!!t.getQuickStartSelection);this.hasKeys=u(!!t.getKeysSelection);this.hasSettings=u(!!t.getSettingsSelection);this.noTags=u(!!t.noTags);this.noRbac=u(!!t.noRbac);a=t.supportsResourceMove;this._editRg(a===nt||a===b);this.title=u("");this.settingsLabel=u("");e=this._createSelectable;o="Selectable";this.resourceGroupSelectable=e(n,"resourceGroup"+o);this.quickStartSelectable=e(n,"quickStart"+o);this.settingsSelectable=e(n,"settings"+o);this.accessSelectable=e(n,"access"+o);this.tagsSelectable=e(n,"tags"+
o);this.keysSelectable=e(n,"keys"+o);f?(s=f,this.collapsed.subscribe(s,(function(n){c._updateDataLoading(f,n)}))):s=new ni.TriggerableLifetimeManager;this._ensureRGProperty=function(){return h||(h=c._createResourceGroupProperty(s),c._markBuiltInProperty(h,r.ResourceGroup)),h};t.noResourceGroup||i.prototype.setProperties.call(this,[this._ensureRGProperty()]);t.hasOwnProperty("staticProperties")||w.warning("MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel is deprecated.  Please use MsPortalFx.ViewModels.Parts.ResourceSummary.ViewModel2.")}return __extends(o,i),o.prototype.onInputsSet=function(t){var i=this._options,o=this._cloudName,s,r,u,c,f,e;return(arguments.length<2&&(s="The onInputsSet method of resource summary viewmodel requires the second *settings* argument.",h(s)),t.actionBarOutput)?(this.moveResourceSelection.activatedItems([]),Q()):(this._inputs=t,r=t.resourceId,r!==this._currentResourceId()&&this._startRebind(r),i.noRbac||this.accessSelectable.selectedValue(ft.getBladeSelection(
o,"Microsoft_Azure_AD","UserAssignmentsBlade",{scope:r})),i.noTags||this.tagsSelectable.selectedValue(p.getBladeSelection(vt,"ResourceTagsListBlade",gt.addToModel(o,{resourceId:r}))),i.getSettingsSelection&&this.settingsSelectable.selectedValue(i.getSettingsSelection(t)),i.getQuickStartSelection&&this.quickStartSelectable.selectedValue(i.getQuickStartSelection(t)),i.getKeysSelection&&this.keysSelectable.selectedValue(i.getKeysSelection(t)),u=this.collapsed,c=u.peek(),n.isNullOrUndefined(u())&&u(i.collapsed),f=this._partContainer,e=u.peek(),f&&c===e&&this._updateDataLoading(f,e),Q())},o.prototype.onExpanded=function(){return Q()},o.prototype._addProperty=function(n){var t=2*e;this.properties.peek().length>=t?h("Resource summary cannot have more than "+t+" properties"):this._isValidProperty(n)&&i.prototype._addProperty.call(this,n)},o.prototype.setProperties=function(n){var f=this,u=!this._options.noResourceGroup,r=2*e-(u?1:0),t;n.length>r&&h("Resource summary cannot have more than "+r+" properties");
t=[];u&&t.push(this._ensureRGProperty());n.slice(0,r).forEach((function(n){f._isValidProperty(n)&&t.push(n)}));i.prototype.setProperties.call(this,t)},o.prototype._setProperties=function(n){i.prototype.setProperties.call(this,n)},o.prototype._startRebind=function(n){this._currentResourceId(n)},o.prototype._isValidProperty=function(n){return this._allowedPropertyTypes.indexOf(n.getType())<0?(h("Only Callback, Link, OpenBlade and Text properties are allowed to added to resource summary."),!1):!0},o.prototype._markBuiltInProperty=function(n,t){n.builtInPropertyKind=t},o.prototype._createSelectable=function(n,i){return new t.Selectable({isSelected:!!(n&&n[i]&&n[i].isSelected)})},o.prototype._updateDataLoading=function(n,t){var i,u,r;this._resetLoadingState(n);i=this._inputs;!t&&i&&(u=this._loadingLM=n.createChildLifetime(),r=this._loadingPromise=this.onExpanded(u,i),r&&n.operations.add(r,{blockUi:!0}))},o.prototype._resetLoadingState=function(n){var i=this._loadingPromise,t;i&&(n.operations.
remove(i),this._loadingPromise=null);t=this._loadingLM;t&&(t.dispose(),this._loadingLM=null)},o.prototype._createResourceGroupProperty=function(n){var t=this,r=u(),e=u(),o=u(),i;return v(n,(function(){var n=t._currentResourceId(),u,i,f;n&&(u=t._editRg(),t._editRg(u?u:yt(n,nt)),i=fi(n),i.success&&(r(i.resourceGroup),e(p.getBladeSelection(vt,ii?ut.ResourceMenuBlade:ut.ResourceGroupMapBlade,{id:i.resourceGroupId})),t._editRg()&&(f=ot.getMoveResourceBlade(n,nt).bladeSelection,o(f))))})),i={label:c.resourceGroupPropertyLabel,displayValue:r,bladeSelection:e},i.editBlade={bladeSelection:o,editType:f.EditType.MoveResource,displayValue:at.changeResourceGroupLabel,showLink:!0},new f.OpenBladeProperty(i)},o})(f.ViewModel);i.ViewModel=tt,(function(n){n[n.ResourceGroup=0]="ResourceGroup";n[n.Status=1]="Status";n[n.Location=2]="Location";n[n.SubscriptionName=3]="SubscriptionName";n[n.SubscriptionId=4]="SubscriptionId"})(i.BuiltInPropertyKind||(i.BuiltInPropertyKind={}));r=i.BuiltInPropertyKind;pt=(function(
t){function i(n,i,f){var e=this,h,o,c,l;t.call(this,n,i,f);this._dynamicProperties=u([]);this._editSub=u();this._dependencies={getLocation:function(n){var t=et.getRuntime();return t.getResource(n,"resourcesummarypartviewmodel").then((function(n){return n.locationString}))},getSubscriptionName:function(n){return ti.getSubscriptionInfo(n).then((function(n){return n.displayName}))},getSubscriptionBlade:function(n){var t={extensionName:rt.Billing,assetType:wt.SubscriptionDetail,assetId:n};return dt.mapAssetIdToDynamicSelection(t,!0)}};h=this._options.supportsResourceMove;this._editSub(h===g||h===b);o=this._createBuiltInProperties(f,i);c=i.staticProperties||[];c.forEach((function(n){if(!n._supportsIsLoading)s.onlyStatic(y)}));l=f;v(l,(function(){var n=e._dynamicProperties(),t=e._layoutProperties(o,c,n,i.layout);e._setProperties(t)}));v(l,(function(){var t=o[r.SubscriptionId],i=o[r.ResourceGroup],u=(!i||i.displayValue())&&(!t||t.value()),n;u&&(n=e._loadingPromise,n?f.operations.update(n,{blockUi:!1}):
f.revealContent())}))}return __extends(i,t),i.prototype.setDynamicProperties=function(n){var i=this,r=n||[],u=this._dynamicProperties(),t=[];r.forEach((function(n){!n._supportsIsLoading&&u.indexOf(n)>=0?s.propertyReused(y):i._isValidProperty(n)&&t.push(n)}));this._dynamicProperties(t)},i.prototype.setProperties=function(){s.setPropertiesNotAvail(y)},i.prototype._setBuiltInProperty=function(n,t,i){this._markBuiltInProperty(i,t);n[t]=i},i.prototype._createBuiltInProperties=function(t,i){var e=this,o,ft,p,l,b,k,d,et,nt;if(i.layout?(i.noResourceGroup&&s.noResourceGroupWithLayout(y),ft=[i.layout.left||[],i.layout.right||[]],o=n.mapMany(ft,(function(n){return n.filter((function(n){return typeof n===lt}))})).unique()):(o=[],i.noResourceGroup||o.push(r.ResourceGroup),i.status&&o.push(r.Status),o.push(r.Location),o.push(r.SubscriptionName),o.push(r.SubscriptionId)),p=function(n){return o.indexOf(n)>=0},l={},p(r.ResourceGroup)&&this._setBuiltInProperty(l,r.ResourceGroup,this._ensureRGProperty()),p(r.Status)&&
(i.status||s.statusMissing(y),this._setBuiltInProperty(l,r.Status,new f.TextProperty({label:c.statusPropertyLabel,value:i.status.value,isLoading:i.status.isLoading}))),p(r.Location)&&(b=u(),k=u(),v(t,(function(){var t,n;e.collapsed()||(t=e._currentResourceId(),t)&&(k(!0),n=d=e._dependencies.getLocation(t),n.then((function(t){n===d&&b(t)})).catch((function(i){n===d&&(w.warning("Failed to get location for resource id '"+t+"'. '"+i+"'"),b(c.notAvailable))})).finally((function(){n===d&&k(!1)})))})),et=st(t,(function(){return i.location&&i.location()||b()})),this._setBuiltInProperty(l,r.Location,new f.TextProperty({label:c.locationPropertyLabel,value:et,isLoading:k}))),nt=st(t,(function(){var n=e._currentResourceId(),t;if(!n)return"";try{t=a.parseResourceManagerDescriptor(n).subscription}catch(i){h("Failed to get subscription name from the resource id '"+n+"'.")}return t})),p(r.SubscriptionId)&&this._setBuiltInProperty(l,r.SubscriptionId,new f.TextProperty(c.subscriptionIdPropertyLabel,nt)),p(r.SubscriptionName))
{var it=u(),rt=u(),tt,ht=u(),ct=this._currentResourceId(),ut=void 0;v(t,(function(){var n,t,r,u,i;e.collapsed()||(n=e._currentResourceId(),n&&n!==ct)&&(ct=n,t=nt(),t)&&(r=e._editSub(),e._editSub(r?r:yt(n,g)),e._editSub()&&(u=ot.getMoveResourceBlade(n,g).bladeSelection,ht(u)),rt(!0),i=tt=e._dependencies.getSubscriptionName(t).then((function(n){i===tt&&it(n)})).catch((function(){i===tt&&(h("Failed to get the subscription name for the subscription id '"+t+"'."),it(c.notAvailable))})).finally((function(){i===tt&&rt(!1)})))}));ut={label:c.subscriptionNamePropertyLabel,displayValue:it,resolveBlade:function(){var n=nt(),t;return n||(t=e._currentResourceId(),s.noSubId(t)),e._dependencies.getSubscriptionBlade(n)},isLoading:rt};ut.editBlade={bladeSelection:ht,editType:f.EditType.MoveResource,displayValue:at.changeSubscriptionLabel,showLink:!0};this._setBuiltInProperty(l,r.SubscriptionName,new bt.OpenBladeAsyncProperty(ut))}return l},i.prototype._layoutProperties=function(n,t,i,u){var f=[],o=0,l,a,c,h,p;
if(u){l=u.left||[];a=u.right||[];(l.length>e||a.length+i.length>e)&&s.maxColumns(e);for(var v=0,y=0,w=function(r){var u,h=r?l:a,e;(r?v:y)<h.length?(e=h[r?v++:y++],typeof e===lt?u=n[e]:(u=e,t.indexOf(u)<0&&s.missingProperties())):u=!r&&o<i.length?i[o++]:d;f.push(u)},b=0;b++<e&&(v<l.length||y<a.length||o<i.length);)w(!0),w(!1)}else for(t.length+i.length>e&&s.maxProperties(e),c=0,h=function(){var n;n=c<t.length?t[c++]:o<i.length?i[o++]:d;f.push(n)},this._options.noResourceGroup||(f.push(n[r.ResourceGroup]),h()),p=n[r.Status],p&&(f.push(p),h()),f.push(n[r.Location]),h(),f.push(n[r.SubscriptionName]),h(),f.push(n[r.SubscriptionId]),h();c+o<e&&(c<t.length||o<i.length);)f.push(d),h();return f},i.prototype._startRebind=function(n){t.prototype._startRebind.call(this,n);this._dynamicProperties([])},i})(tt);i.ViewModel2=pt})(r=i.ResourceSummary||(i.ResourceSummary={}))})(i=t.Parts||(t.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;
(function(n){var t;(function(n){"use strict";function t(n,t){var i=n._dependencies;t.getLocation&&(i.getLocation=t.getLocation);t.getSubscriptionName&&(i.getSubscriptionName=t.getSubscriptionName);t.getSubscriptionBlade&&(i.getSubscriptionBlade=t.getSubscriptionBlade)}n.setDependencies=t})(t=n.ResourceSummary||(n.ResourceSummary={}))})(t=n.Parts||(n.Parts={}))})(t=n.ViewModels||(n.ViewModels={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var h=n.Services,u=ko.observable,f=ko.observableArray,e=n.disposeDisposable,i=!1,r=null,c=(function(){function t(){var n=this;this.initialized=u(i);this.results=f();this.canceled=u(i);this._dataSub=r;this._canceledSub=this.canceled.subscribe((function(t){t&&(n.results([]),n._releaseDataSub())}))}return t.prototype.dispose=function(){e(this._canceledSub);this._canceledSub=r;this._releaseDataSub()},t.prototype.onInputsSet=function(){return this._releaseDataSub(),this.initialized(i),this.canceled(
i),this.results([]),r},t.prototype.connectDataSource=function(t,i){t.map((function(t){Object.isExtensible(t)&&n.Base.Utilities.extend(t,{browse_cloudName:FxImpl.Extension.selfCloudName})}));this._dataSub=h.DataSetAssetExpansionMapper.connectDataSet(t,this.results,i);this.initialized(!0)},t.prototype._releaseDataSub=function(){e(this._dataSub);this._dataSub=r},t})(),o,s;t.Service=c;o=(function(){function n(){}return n.serialize=function(n,t,u){t===void 0&&(t=i);u===void 0&&(u=r);var f={browseCriteria:n,newBrowse:t,useBrowseKey:u};return JSON.stringify(f)},n.deserialize=function(n){var t=JSON.parse(n);return{browseCriteria:t.browseCriteria,newBrowse:t.newBrowse,useBrowseKey:t.useBrowseKey}},n})();t.BrowseSerializer=o;s=(function(){function n(n,t){this.initialized=u(i);this.results=f();this.browseCriteria=n;this.results(t)}return n})();t.ResultsViewModel=s})(i=t.Browse||(t.Browse={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){
var t;(function(t){var i;(function(t){var i;(function(t){"use strict";function e(n,t,r,f){var o=function(){return i.getAssetSelection(r,f,{id:t})},s=function(){var u=n.bladeName();return u?i.getBladeSelection(n.extensionName()||r,u,{id:t}):o()},e;return n&&(e=void 0,typeof n.onInputsSet=="function"&&(e=n.onInputsSet({assetId:t,usage:u.DynamicAssetSelection})),e)?e.then((function(){return s()})):Q(o())}var i=n.ViewModels,r=ko.observable,u,f;(function(n){n[n.DynamicAssetSelection=0]="DynamicAssetSelection"})(t.Usage||(t.Usage={}));u=t.Usage;f=(function(){function n(){this.extensionName=r(null);this.bladeName=r(null)}return n})();t.Service=f;t.prepareDynamicSelection=e})(i=t.DynamicBlade||(t.DynamicBlade={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){var i;(function(t){"use strict";var r=n.Services.AssetExpansion,u=n.Resources.Strings.Services.AssetHandler,i=ko.observable,e=(function(){function n(
){}return Object.defineProperty(n,"base",{get:function(){return[{id:"title",name:i(u.titleGridColumn),itemKey:r.titlePropertyName},{id:"assetType",name:i(u.assetTypeGridColumn),itemKey:r.assetTypeStringPropertyName}]},enumerable:!0,configurable:!0}),n})(),o,f;t.BaseColumns=e,(function(n){n[n.Default=0]="Default"})(t.Usage||(t.Usage={}));o=t.Usage;f=(function(){function n(){this.includeAssetIcon=i(!0);this.columns=i([])}return n})();t.Service=f})(i=t.GridColumns||(t.GridColumns={}))})(i=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=(function(){function n(){this.properties=t()}return n.prototype.setProperty=function(n,t){var i=this.properties,r=i().some((function(i){return i.property===n?(i.value=t,!0):!1}));r||i.push({property:n,value:t})},n})();n.Service=i})(t=n.PropertyProvider||(n.PropertyProvider={}))})(t=n.Services||(n.Services={}))})
(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i,r;(function(n){var t;(function(n){var t;(function(n){var t;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Warning=2]="Warning";n[n.Error=3]="Error";n[n.Information=4]="Information";n[n.Stopped=5]="Stopped";n[n.Canceled=6]="Canceled";n[n.Critical=7]="Critical";n[n.Disabled=8]="Disabled";n[n.Failed=9]="Failed";n[n.Pending=10]="Pending";n[n.Unknown=11]="Unknown"})(t||(t={}));n.ResourceStatus=t})(t=n.CsmTopology||(n.CsmTopology={}))})(t=n.Visualization||(n.Visualization={}))})(i=t.Controls||(t.Controls={})),(function(t){var i;(function(t){function i(n){return n.toLowerCase()}function rt(n){var i,r;return t.isSubscriptionId(n)||u.invalidSub(n),i=t.regExpSubscriptionId.exec(n),i&&i.length===2||u.invalidSub(n),r=new s,r.subscription=i[1],r}function l(n){var i,r;return t.isResourceGroupId(n)||u.invalidRG(n),i=t.regExpResourceGroupId.exec(n),i&&i.length===3||u.invalidRG(
n),r=new h,r.subscription=i[1],r.resourceGroup=i[2],r}function r(n){return st(n,!0)}function ut(n){return st(n)}function yt(n){var i=t.regExpDeploymentResourceId.exec(n),r;return i&&i.length===4||(i=t.regExpDeploymentId.exec(n)),i&&i.length===4||u.invalidDeployment(n),r=new y,r.subscription=i[1],r.resourceGroup=i[2],r.deploymentName=i[3],r}function pt(n){var i=t.regExpTagId.exec(n),r;return i&&i.length===4||u.invalidTag(n),r=new p,r.subscription=i[1],r.tagName=i[2],r.tagValue=i[3]||e,r}function wt(n,t,i){return a(n,t)+"/deployments/"+i}function bt(n){return c(n.subscription)}function w(n){return c(n.subscription)}function b(n){var t=n.subscription;return t?c(t):""}function kt(n){return w(l(n))}function dt(n){return b(r(n))}function c(n){return"/subscriptions/"+n}function gt(n){return a(n.subscription,n.resourceGroup)}function k(n){return a(n.subscription,n.resourceGroup)}function ni(n){return k(r(n))}function a(n,t){return"/subscriptions/"+n+"/resourcegroups/"+t}function ti(n){return d(
r(n))}function ii(n){return d(ut(n))}function d(n){for(var t=n.provider,i=0;i<n.types.length;i++)t=t+"/"+n.types[i];return t}function ft(n){for(var i="/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,u=n.resources,t=0;t<r.length;t++)i+="/"+r[t]+"/"+u[t];return i}function ri(n){return"/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider+"/"+n.types[0]+"/"+n.resources[0]}function ui(n){var t;n.types.length<2&&u.notForNestedResource();var i="/subscriptions/"+n.subscription+"/resourcegroups/"+n.resourceGroup+"/providers/"+n.provider,r=n.types,f=n.resources;for(t=0;t<r.length-1;t++)i+="/"+r[t]+"/"+f[t];return i}function fi(t,r){var u=i(t)+"/";return n.startsWith(i(r),u)}function ei(n){return g(t.relatedTagPrefix,r(n))}function oi(n){return g(t.linkTagPrefix,r(n))}function g(n,t){return n+":"+ft(t)}function si(n){return rt(n),i(n)}function nt(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isSubscriptionId(
n)&&t.isSubscriptionId(r)?i(n)===i(r):!1}function hi(n){return l(n),i(n)}function et(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceGroupId(n)&&t.isResourceGroupId(r)?i(n)===i(r):!1}function ci(n){return r(n),i(n)}function li(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceId(n)&&t.isResourceId(r)?i(n)===i(r):!1}function ai(n,r){return n===r?!0:!n&&!r?!0:!n||!r?!1:t.isResourceManagerId(n)&&t.isResourceManagerId(r)?i(n)===i(r):!1}function vi(n){return t.isResourceManagerId(n)?n:null}function yi(n,t){return!n||!t?!1:nt(n,w(l(t)))}function pi(n,t){return!n||!t?!1:nt(n,b(r(t)))}function wi(n,t){return!n||!t?!1:et(n,k(r(t)))}function st(n,i){var o=i?tt+n:"Invalid resource manager id: "+n,c=i?t.isResourceId:t.isResourceManagerId,h,f;if(!c(n))throw new Error(o);var r=new v,u=lt.exec(n),s=u&&u.length;if(r.subscription=s>1&&u[1]||e,r.resourceGroup=s>2&&u[2]||e,n="/providers/Microsoft.Resources"+n,u=ht.exec(n),!u)throw new Error(o);for(r.provider=u[1],h=u[2],f=r.provider,r.type=e,r.types=
[],r.resource=e,r.resources=[],r.resourceMap={};u=ct.exec(h);){if(!u)throw new Error(tt+n);r.types.push(u[1]);r.type=u[1];r.resources.push(u[2]);r.resource=u[2];f+="/"+r.type;r.resourceMap[f]=r.resource}return r}var ht=/(?!(?:\/[^\/]+\/[^\/]+)+\/providers)\/providers\/([^\/]+)((:?\/[^\/]+\/[^\/]+)*)$/i,ct=/\/([^\/]+)\/([^\/]+)/ig,lt=/\/subscriptions\/([^\/\s]+)(?:\/resourcegroups\/([^\/\s]+))?/i,vt,it,s,h,v,y,p,ot;t.relatedTagPrefix="hidden-related";t.linkTagPrefix="hidden-link";var e=undefined,f=ko.observable,o="",at={invalidDeployment:o,invalidRG:o,invalidSub:o,invalidTag:o,notForNestedResource:o},tt="Invalid {0} id: {1}".format("resource",""),u=FxImpl.getErrorMap(at);(function(n){n[n.Failure=0]="Failure";n[n.DataNotAvailable=1]="DataNotAvailable";n[n.AccessDenied=2]="AccessDenied"})(t.MappingRejectionReason||(t.MappingRejectionReason={}));vt=t.MappingRejectionReason;it=(function(){function n(){this.name=f();this.description=f();this.descriptionUri=f();this.status=f();this.statusMessage=
f()}return n})();t.Service=it;s=(function(){function n(){}return n})();t.SubscriptionDescriptor=s;h=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(s);t.ResourceGroupDescriptor=h;v=(function(n){function t(){n.apply(this,arguments);this.types=[];this.resources=[];this.resourceMap={}}return __extends(t,n),t})(h);t.ResourceDescriptor=v;y=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(h);t.DeploymentDescriptor=y;p=(function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t})(s);t.TagDescriptor=p;t.parseSubscriptionDescriptor=rt;t.parseResourceGroupDescriptor=l;t.parseResourceDescriptor=r;t.parseResourceManagerDescriptor=ut;t.parseDeploymentDescriptor=yt;t.parseTagDescriptor=pt;t.buildDeploymentId=wt;t.buildSubscriptionIdFromDescriptor=bt;t.buildSubscriptionIdFromResourceGroupDescriptor=w;t.buildSubscriptionIdFromResourceDescriptor=b;t.buildSubscriptionIdFromResourceGroupId=kt;t.buildSubscriptionIdFromResourceId=dt;t.buildSubscriptionIdFromSubscriptionName=
c;t.buildResourceGroupIdFromDescriptor=gt;t.buildResourceGroupIdFromResourceDescriptor=k;t.buildResourceGroupIdFromResourceId=ni;t.buildResourceGroupIdFromSubscriptionAndResourceGroupName=a;t.buildSubscriptionFromId=c;t.buildResourceTypeFromResourceId=ti;t.buildResourceTypeFromResourceManagerId=ii;t.buildResourceTypeFromResourceDescriptor=d;t.buildResourceIdFromDescriptor=ft;t.buildTopmostParentResourceIdFromDescriptor=ri;t.buildParentResourceIdFromDescriptor=ui;t.isParentResource=fi;t.buildRelatedTagName=ei;t.buildLinkTagName=oi;t.buildTagName=g;t.buildLowerCaseSubscriptionId=si;t.compareSubscriptionId=nt;t.buildLowerCaseResourceGroupId=hi;t.compareResourceGroupId=et;t.buildLowerCaseResourceId=ci;t.compareResourceId=li;t.compareResourceManagerId=ai;t.tryBuildResourceManagerKey=vi;t.subscriptionContainsResourceGroup=yi;t.subscriptionContainsResource=pi;t.resourceGroupContainsResource=wi;ot=(function(){function n(){this.refreshPacket=f(null)}return n.prototype.signalResourceGroupRefresh=
function(n){this.refreshPacket({resourceGroupId:n})},n.prototype.signalResourceRefresh=function(n){this.refreshPacket({resourceId:n})},n.prototype.signalAssetRefresh=function(n,t,i){this.refreshPacket({assetOwner:n,assetType:t,assetId:i})},n})();t.ResourcePartExtender=ot})(i=t.ResourceTypes||(t.ResourceTypes={}))})(r=t.Services||(t.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){var t;(function(n){"use strict";var t=ko.observableArray,i=(function(){function n(){this.actions=t()}return n})();n.Service=i})(t=n.Security||(n.Security={}))})(t=n.Services||(n.Services={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";function f(t,i,r,u){n.notifyAssetDeletedBulk([{assetId:i,assetType:t,extensionName:r,cloudName:u}])}function e(t,i){var r=(Array.isArray(t)?t:[t]).map((function(t){return{assetId:t,assetType:n.resourceAssetType,extensionName:undefined,cloudName:
i}}));n.notifyAssetDeletedBulk(r)}var t=MsPortalFx.Base.Rpc.Internal.ActionEndPointDefinition,i=MsPortalFx.Base.Rpc.Internal.client,u=MsPortalFx.Base.Constants.ExtensionNames.Hubs,r;n.resourceAssetType="*Impl_Resource*";r=function(t){n.notifyAssetDeletedDefinition.invoke(i,"fx",t);n.createResourceDeletedEventInHubsDefinition.invoke(i,u,t)};n.notifyAssetDeletedBulk=r;n.notifyAssetDeleted=f;n.notifyResourceDeleted=e;n.notifyAssetDeletedDefinition=new t("MsPortalFx.UI.AssetManager.NotifyAssetDeleted");n.createResourceDeletedEventInHubsDefinition=new t("MsPortalFx.UI.AssetManager.CreateResourceDeletedEvent");n.hubsNotifyAssetDeletedDefinition=new t("MsPortalFx.UI.AssetManager.Hubs.NotifyAssetDeleted")})(t=n.AssetManager||(n.AssetManager={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function i(n,i,r){t.notifyAssetDeleted(n,i,r)}function r(n){t.notifyAssetDeletedBulk(n)}function u(n){t.notifyResourceDeleted(n)}var t=FxImpl.AssetManager;n.notifyAssetDeleted=
i;n.notifyAssetDeletedBulk=r;n.notifyResourceDeleted=u})(t=n.AssetManager||(n.AssetManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var t=new MsPortalFx.Base.Rpc.Internal.ActionEndPointDefinition("OpenFeedbackPane");n.feedbackEndPoint=t})(FxImpl||(FxImpl={})),(function(n){var t;(function(n){"use strict";var r=MsPortalFx.Base.Rpc.Internal,i="MsPortalFx.UI.NotificationManager",t=r.ActionEndPointDefinition;n.addNotificationsEndPoint=new t(i+".AddNotifications");n.addNotification2EndPoint=new t(i+".AddNotifications2");n.updateNotificationEndPoint=new t(i+".UpdateNotification");n.addServerEventsEndPoint=new t("addServerEvents")})(t=n.NotificationManager||(n.NotificationManager={}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){var i;(function(t){"use strict";function u(n,t,r){i.updateNotificationEndPoint.invoke(i.rpcClient,"fx",{id:n,propertyName:t,propertyValue:r})}function s(n){return new r(n)}function c(n){e([n])}function e(n){n&&n.length>0&&i.
addNotificationsEndPoint.invoke(i.rpcClient,"fx",{notifications:n})}var o=n.Base.Rpc.Internal,i=FxImpl.NotificationManager,r,h,f;i.rpcClient=o.client;r=(function(){function t(t){this._id=n.getUniqueId();this._name=t}return t.prototype.raise=function(n,t,r){i.addNotification2EndPoint.invoke(i.rpcClient,"fx",{id:this._id,name:this._name,status:n.status,subStatus:n.subStatus,assetId:t,properties:r})},t.prototype.updateCorrelationId=function(n){u(this._id,"correlationId",n)},t.prototype.reportProgress=function(n){u(this._id,"percentComplete",n)},t})();t.Notification2=r;t.create=s,(function(n){n[n.Information=0]="Information";n[n.Warning=1]="Warning";n[n.Error=2]="Error";n[n.InProgress=3]="InProgress";n[n.Success=4]="Success"})(t.NotificationState||(t.NotificationState={}));h=t.NotificationState;f=(function(){function n(n,t,i,r,u,f,e,o){if(i===undefined)throw new Error("Invalid state arg.");if(f&&!u)throw new Error("Sub id must be specified when operation id is specified.");this.source=n;this.eventType=
t;this.state=i;this.timestamp=new Date;this.descriptionArgs=r;this.subscriptionId=u;this.operationId=f;this.percentOperationComplete=e;this.assetId=o}return n})();t.Notification=f;t.addNotification=c;t.addNotifications=e})(i=t.NotificationManager||(t.NotificationManager={}))})(t=n.UI||(n.UI={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";var i=MsPortalFx.Base,r=i.Rpc.Internal,u=window,f,t;(function(t){var i=n.Constants.RpcMethods;t.getHmacSha256EndPoint=new r.FuncEndPointDefinition(i.getHmacSha256)})(f=n.InternalCryptography||(n.InternalCryptography={})),(function(n){function t(n){return n.stringToSign&&(n.stringToHash=n.stringToSign),f.getHmacSha256EndPoint.invoke(r.client,i.Constants.Shell,n)}n.getHmacSha256=t})(t=n.Cryptography||(n.Cryptography={}));u.define("MsPortalFx/Util/Cryptography",[],(function(){return t}));u.define("Fx/Cryptography",[],(function(){return t}))})(FxImpl||(FxImpl={})),(function(n){var t;(function(t){"use strict";var r=n.ViewModels,u=n.Base,i=ko.observable,f=
(function(){function n(){this.title=i();this.subtitle=i();this.description=i();this.helpUri=i();this.icon=i(u.Images.Shell.DefaultBlade());this.titleImageUri=i();this.statusBar=null;this.contentState=i(r.ContentState.None);this.contentStateDisplayText=i()}return n})();t.Blade=f})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(n){"use strict";function e(n){return n.startsWith("internal_bladeCall")}var t=undefined,f=1,i=ko.observable,r,u;n.isBladeCallerInput=e;r=(function(){function n(n,r){var u=this;if(this._currentBladeCallId=null,this._activatedItemForCurrentBladeCall=t,this._hasInitialized=!1,this.internal_bladeCallId=i(),this.internal_bladeCallerParams=i(),this._options=r,this._invokeOnSelectable=r.invokeOnSelectable,this._invokeOnSelectableSet=r.invokeOnSelectableSet,!!this._invokeOnSelectable==!!this._invokeOnSelectableSet)throw new Error("Specify 'invokeOnSelectable' or 'invokeOnSelectableSet', but not both.");n.onInputsSetCallbacks.
add((function(t){if(u._hasInitialized||(u._hasInitialized=!0,u._initialize(n,r.forceInvocation)),t){var i=t.internal_bladeCallerResult;i&&i.bladeCallId===u._currentBladeCallId&&(u._currentBladeCallId=null,u._options.receiveResult(i.result,u._activatedItemForCurrentBladeCall),u._clearActivation())}return null}),!0)}return n.prototype._initialize=function(n,t){var i=this;this._isCurrentlyActivated()&&this._beginNewBladeCall(!!t);this._subscribeToActivationStateChange(n,(function(n){n&&i._beginNewBladeCall(!0)}))},n.prototype._beginNewBladeCall=function(n){if(this._currentBladeCallId=f++,this.internal_bladeCallId(this._currentBladeCallId),this._activatedItemForCurrentBladeCall=this._getCurrentlyActivatedValue(),n){var t=this._options.supplyParams(this._activatedItemForCurrentBladeCall);this.internal_bladeCallerParams(t)}},n.prototype._isCurrentlyActivated=function(){if(this._invokeOnSelectable)return this._invokeOnSelectable.isSelected();if(this._invokeOnSelectableSet){var n=this._invokeOnSelectableSet.
activatedItems().length;if(n>1)throw new Error("Multiselection is not supported with parameter collectors.");return n>0}},n.prototype._getCurrentlyActivatedValue=function(){if(this._invokeOnSelectable)return this._invokeOnSelectable.value();if(this._invokeOnSelectableSet){var n=this._invokeOnSelectableSet.activatedItems();return n?n[0]:null}return null},n.prototype._subscribeToActivationStateChange=function(n,t){var i=this;this._invokeOnSelectable?this._invokeOnSelectable.isSelected.subscribe(n,t):this._invokeOnSelectableSet&&this._invokeOnSelectableSet.activatedItems.subscribe(n,(function(){t(i._isCurrentlyActivated())}))},n.prototype._clearActivation=function(){this._invokeOnSelectable?this._invokeOnSelectable.isSelected(!1):this._invokeOnSelectableSet&&this._invokeOnSelectableSet.activatedItems([])},n})();n.BladeCaller=r;u=(function(){function n(n,r){var u=this;this.internal_bladeCallerResult=i();this._options=r;n.onInputsSetCallbacks.add((function(n){if(n.internal_bladeCallId!==t&&(u._bladeCallId=
n.internal_bladeCallId),n.internal_bladeCallerParams!==t){var i=u._makeStringHashFromParams(n.internal_bladeCallerParams);i!==u._lastReceivedParamsStringHash&&(u._lastReceivedParamsStringHash=i,u._options.receiveParams(n.internal_bladeCallerParams))}return null}))}return n.prototype.sendResult=function(n){this.internal_bladeCallerResult({bladeCallId:this._bladeCallId,result:n})},n.prototype._makeStringHashFromParams=function(n){return ko.toJSON(n)},n})();n.BladeCallable=u})(t=n.Internal||(n.Internal={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n.ViewModels,u=i.Controls.Internal.IFrameV2,f=n.Base,e=(function(){function n(n,t){this.signature="FxAppBlade";this.kind=n;this.data=t}return n})(),r;t.Message=e;r=(function(n){function t(t,i){var r=this,f;n.call(this);this._handlers={};this._queue=[];f=this.iFrame=new u.ViewModel(t,{src:i.source});f.controlIsReady.subscribe(t,(function(n){n&&r._queue.forEach(
(function(n){r.iFrame.postMessage(n)}))}));f.receiveMessage.subscribe(t,(function(n){var t=r._handlers[n.kind];t&&t.fire(n.data)}))}return __extends(t,n),t.prototype.postMessage=function(n){var t=this.iFrame;t.controlIsReady()?t.postMessage(n):this._queue.push(n)},t.prototype.on=function(n,t){var r=this._handlers,i=r[n];i||(i=r[n]=new f.Callbacks);i.add(t)},t.prototype.off=function(n,t){var i=this._handlers[n];i&&i.remove(t)},t})(i.Blade);t.ViewModel=r})(i=t.AppBlade||(t.AppBlade={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){var i;(function(t){"use strict";var i=n,o=i.UI,s=o.NotificationManager,u=i.ViewModels,l=u.Controls,r=ko.observable,a=i.Resources.Strings,f=i.Helpers,e=" has not been implemented.",v=(function(n){function t(){n.apply(this,arguments);this.data=r()}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.data;return this.data(t),this.title(this._onGetTitle(t)),f.resolve()},t.prototype._onGetTitle=function(n){return a.
DeleteAssetConfirmation.bladeTitle.format(n.assetName)},t})(u.Blade),h,c;t.BladeViewModel=v;h=(function(n){function t(t,u){var f=this;n.call(this,t);this.data=r();this.result=r(0);this._container=null;this._assetType=null;this._data=null;this._selectedItems=null;this._previousUserActionId="";this._container=t;this._assetType=u;ko.computed(t,(function(){var n=f.data(),t=f._onValidateCommand(n);f.enabled(t)}));this.result.subscribe(t,(function(n){f._onDeletionResultChange(n)}));this.enabled(!1);this.icon(i.Base.Images.Delete())}return __extends(t,n),t.prototype.onInputsSet=function(n){var i=n.data,r=n.selectedItems,t=n.actionBarOutput;return this.data(i),t&&((t.action===4||t.action===5)&&this._container.selectable.isSelected(!1),t.action===4&&t.userActionId&&this._previousUserActionId!==t.userActionId&&(this._previousUserActionId=t.userActionId,this._data=i,this._selectedItems=r,this._onDelete(i,r))),f.resolve()},t.prototype._onDelete=function(){throw new Error("_onDelete()"+e);},t.prototype._onSendErrorNotification=
function(){throw new Error("_onSendErrorNotification()"+e);},t.prototype._onValidateCommand=function(n){return!i.isNullOrUndefined(n)},t.prototype._onDeletionResultChange=function(n){switch(n){case 1:o.AssetManager.notifyAssetDeleted(this._assetType,this._data.assetId);break;case 2:this._sendErrorNotification(this._data,this._selectedItems)}},t.prototype._sendErrorNotification=function(n,t){var i=this._onSendErrorNotification(n,t);i.state=s.NotificationState.Error;s.addNotification(i)},t})(u.OpenBladeCommand);t.CommandViewModel=h;c=(function(n){function t(t,i){var u=this;n.call(this,t,i);this.data=r();this._data=null;t.registerForDispose(this.data.subscribe((function(n){!u._isSameAsset(n)&&u._options.grid&&(u._onPopulateGrid(n),u._selectAll());u._data=n})))}return __extends(t,n),t.prototype.onInputsSet=function(n){var t=n.data;return this._assetName(t.assetName),i.isNullOrWhiteSpace(t.assetTypeDisplayName)||this._assetTypeDisplayName(t.assetTypeDisplayName),this.data(t),f.resolve()},t.prototype.
_onPopulateGrid=function(){throw new Error("_onPopulateGrid()"+e);},t.prototype._isSameAsset=function(n){return i.deepEquals(this._data,n)},t})(l.DeleteAssetConfirmation.ViewModel);t.PartViewModel=c})(i=t.DeleteAssetConfirmation||(t.DeleteAssetConfirmation={}))})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(t){"use strict";var i=n,e=i.UI.NotificationManager,o=i.ViewModels,r=o.Dialogs,s=ko.observable,u=" has not been implemented.",v=100,h=i.Resources.Strings.DeleteCommand,c=h.Confirmation,l=h.Failure,f,a;(function(n){n[n.None=0]="None";n[n.Success=1]="Success";n[n.Failure=2]="Failure"})(f||(f={}));t.CommandResult=f;a=(function(n){function t(t,r){var u=this;n.call(this);this._assetType=null;this._confirmationDialog=null;this._errorDialog=null;this._data=null;this._assetType=r;this.data=s();this.result=s(0);ko.computed(t,(function(){var n=u.data(),t=u._onValidateCommand(n);u.enabled(t)}));this.result.subscribe(t,(function(n){u._onDeletionResultChange(
n)}));this.icon(i.Base.Images.Delete())}return __extends(t,n),t.prototype.onInputsSet=function(n){return this.data(n.data),i.Helpers.resolve()},t.prototype.execute=function(){this._data=this.data();this._createConfirmationDialog(this._data);this.dialog(this._confirmationDialog)},t.prototype.dialogClick=function(n){this._shouldDelete(n)?(this.result(0),this._onDelete(this._data)):this._resetCommand()},t.prototype._onDelete=function(){throw new Error("onDelete()"+u);},t.prototype._onGetAssetId=function(){throw new Error("onGetAssetId()"+u);},t.prototype._onSendErrorNotification=function(){throw new Error("onSendErrorNotification()"+u);},t.prototype._onShowConfirmation=function(){return{title:c.title,message:c.message}},t.prototype._onShowError=function(){return{title:l.title,message:l.message}},t.prototype._onValidateCommand=function(n){return!i.isNullOrUndefined(n)},t.prototype._shouldDelete=function(n){var t=this.dialog(),i=t===this._confirmationDialog&&n===6,r=t===this._errorDialog&&n===
5;return i||r},t.prototype._onDeletionResultChange=function(n){var t=this,r=this._data;switch(n){case 1:i.UI.AssetManager.notifyAssetDeleted(this._assetType,this._onGetAssetId(r));this._resetCommand();break;case 2:this._sendErrorNotification(r);setTimeout((function(){t._createErrorDialog(r);t.dialog(t._errorDialog)}),v)}},t.prototype._createConfirmationDialog=function(n){var t=this._onShowConfirmation(n);this._confirmationDialog=new r.MessageBox(t.title,t.message,r.MessageBoxButtons.YesNo)},t.prototype._createErrorDialog=function(n){var t=this._onShowError(n);this._errorDialog=new r.MessageBox(t.title,t.message,r.MessageBoxButtons.RetryCancel)},t.prototype._sendErrorNotification=function(n){var t=this._onSendErrorNotification(n);t&&(t.state=e.NotificationState.Error,e.addNotification(t))},t.prototype._resetCommand=function(){this.status(0)},t})(o.Command);t.DeleteAssetCommand=a})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){var t;(function(
n){"use strict";var t=ko.observable,e=ko.observableArray,o,i,r,u,f;(function(n){n[n.AbortRetryIgnore=0]="AbortRetryIgnore";n[n.OK=1]="OK";n[n.OKCancel=2]="OKCancel";n[n.RetryCancel=3]="RetryCancel";n[n.YesNo=4]="YesNo";n[n.YesNoCancel=5]="YesNoCancel"})(n.MessageBoxButtons||(n.MessageBoxButtons={}));o=n.MessageBoxButtons;i=(function(n){function t(t,i,r){n.call(this,t);this.type=1;this.text=i;this.buttons=r}return __extends(t,n),t})(n.Dialog);n.MessageBox=i;r=(function(n){function i(i,r,u){n.call(this,i);this.text=t("");this.completionPercentage=t(-1);this.type=2;this.text(r);u!==undefined&&this.completionPercentage(u)}return __extends(i,n),i})(n.Dialog);n.ProgressBox=r;u=(function(n){function i(i){n.call(this,i);this.description=t();this.type=3}return __extends(i,n),i})(n.Dialog);n.FormDialog=u;f=(function(n){function i(){n.call(this,"");this.listItems=e();this.selectedItem=t();this.type=4}return __extends(i,n),i})(n.Dialog);n.ListPopup=f})(t=n.Dialogs||(n.Dialogs={}))})(t=n.ViewModels||(n.ViewModels=
{}))})(MsPortalFx||(MsPortalFx={})),(function(n){var t;(function(n){"use strict";n.ResourceIdTypeName="MsPortalFx.ViewModels.ResourceId"})(t=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={})),(function(n){"use strict";function v(){f.config(i.fxRequireConfig||{});f.config(r)}var e=n,l=e.Base,o=FxImpl,y=l.Constants,p=o.Diagnostics,s=window,h=s.fx,i=h.environment,r=i.requireConfig,w=i.extensionName,u=new n.Base.Diagnostics.Log("MsPortalFx/MsPortalFxEnd"),b=i.isDevelopmentMode||i.crossOriginTraces,a=r.ignoreErrorsForModule={},c,f,t,k;r.onNodeCreated=function(n,t,i,r){b&&n.setAttribute("crossorigin","anonymous");a[i]||p.addScriptErrorListener(5,n,r,i)};c="retryAttempt";r.getPathFallback=function(n,t){var i,r,f;if(t){if(i=new l.UriBuilder(t),r=i.query.getParameter(c),!r)return u.warning("Retrying download",0,n,t),i.query.setParameter(c,1),i.toString();f=a[n]?u.warning:u.error;f.call(u,"Download failed even after retry: "+n,0,n,t)}};h.bootstrapTelemetry.fxScriptsEnd=h.getTimestamp();
f=s.requirejs;t=s.define;t("MsPortalFx",[],(function(){return e}));t("f",[],(function(){return e}));t("i",[],(function(){return o}));t("u",[],(function(){}));t("o",[],(function(){return Object}));t("a",[],(function(){return Array}));n.requireExtension=v;w===y.Shell?f.config(r):i.isShellLike?v():n.loadScriptText("MsPortalFx.requireExtension();"),(function(n){var t;(function(n){var t;(function(n){n.ViewModel2=o.Controls.HotSpot.ViewModel2})(t=n.HotSpot||(n.HotSpot={}))})(t=n.Controls||(n.Controls={}))})(k=n.ViewModels||(n.ViewModels={}))})(MsPortalFx||(MsPortalFx={}))